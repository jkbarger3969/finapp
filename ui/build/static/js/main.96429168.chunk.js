(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{395:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"PaymentMethodAuthorizedEntity","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5467:function(e,n,t){e.exports=t(5571)},5571:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(28),o=t.n(l),i=t(171),u=t(71),c=t(5610),d=t(118),s=t(132),p=t(307),m=t(395),f=new p.b({introspectionQueryResultData:m}),v=new p.a({fragmentMatcher:f,addTypename:!0}),b=t(16),y=t(17),E=t.n(y);function O(){var e=Object(b.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return O=function(){return e},e}var j,h,g,R,_,A,C,M=[E()(O())],S={},T=t(417),x=t(397),w=t(58),I=t(398),D=t(155),k=new T.a({uri:"/graphql",credentials:"same-origin"}),U=new x.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),F=w.a.from([Object(I.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),w.a.split((function(e){var n=e.query,t=Object(D.a)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),U,k)]),P=new s.a({link:F,cache:v,typeDefs:M,resolvers:S}),L=t(131),N=t(45),$=t(50),B=t(15),V=t(23),J=t.n(V),W=t(10),z=t(301),q=t.n(z),Y=t(30),G=t(72),H=t.n(G),K=t(303),X=t.n(K),Q=t(5642),Z=t(414),ee=t(5637),ne=t(5638),te=t(5622),ae=t(5639),re=t(5623),le=t(5624),oe=t(5625),ie=t(5626),ue=t(5617),ce=t(5627),de=t(5628),se=t(5629),pe=t(5630),me=t(5631),fe=t(5632),ve=t(5633),be=t(5634),ye=t(5635),Ee=t(5636),Oe=t(290),je=t(366),he=t(367),ge=t(363),Re=t(59),_e=t(164),Ae=t(161),Ce=t(170);function Me(){var e=Object(b.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Me=function(){return e},e}function Se(){var e=Object(b.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Se=function(){return e},e}function Te(){var e=Object(b.a)(['\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: "JournalEntries_1", filter: ["where"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return Te=function(){return e},e}function xe(){var e=Object(b.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ","\n"]);return xe=function(){return e},e}function we(){var e=Object(b.a)(["\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      num\n      den\n    }\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n"]);return we=function(){return e},e}!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(j||(j={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(h||(h={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(g||(g={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(R||(R={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(_||(_={})),function(e){e.Update="UPDATE",e.Add="ADD"}(A||(A={})),function(e){e.Asc="ASC",e.Desc="DESC"}(C||(C={}));var Ie=E()(we()),De=E()(xe(),Ie),ke=E()(Te(),De),Ue=(E()(Se(),De),E()(Me(),De),"5dc46d0af74afb2c2805bd54"),Fe=t(32),Pe=t(29),Le=t(5585),Ne=t(5612),$e=t(5611),Be=t(5587),Ve=t(5603),Je=t(5588),We=t(146),ze=t(5618),qe=t(5619);function Ye(){var e=Object(b.a)(["\n  mutation AddRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return Ye=function(){return e},e}var Ge,He=E()(Ye(),Ie),Ke=function(){var e=Object(N.a)(J.a.mark((function e(n,t,a){var r,l,o,i,u,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=a.paymentMethod.value[a.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:a.paymentMethod.value[a.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),i=o.paymentMethod,u=o.paymentMethodAdd,c={id:t,fields:{date:a.date.value,description:(null===(r=a.description)||void 0===r?void 0:r.trim())?a.description.trim():null,paymentMethod:i,total:a.total.value,reconciled:null!==(l=a.reconciled)&&void 0!==l?l:null},paymentMethodAdd:u},e.next=4,n.mutate({mutation:He,variables:c});case 4:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),Xe=t(38),Qe=t(288),Ze=t(229),en=t(166),nn=t(5614),tn=t(5615),an=t(416),rn=t(5616),ln=function(e){return function(n){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return{inputValue:n,value:e.apply(void 0,[n].concat(a))}}};!function(e){e[e.NOTIFICATION=0]="NOTIFICATION",e[e.ERROR=1]="ERROR",e[e.FATAL_ERROR=2]="FATAL_ERROR"}(Ge||(Ge={}));var on=function(){var e=Object(Fe.c)(),n=e.setStatus,t=e.status,r=Object(a.useCallback)((function(e){t?e&&!Object.keys(e).some((function(n){return e[n]!==t[n]}))||n(e):e&&n(e)}),[n,t]);return[null!==t&&void 0!==t?t:null,r]},un={inputMode:"numeric"},cn={tabIndex:-1},dn=ln((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0],r=n[1];return a&&Object(en.a)(a)?Object(nn.a)(a):r||""})),sn=function(e){var n,t,l,o=e.variant,i=void 0===o?"filled":o,u=e.autoFocus,c=void 0!==u&&u,d=e.disabled,s=void 0!==d&&d,p=e.maxDate,m=void 0===p?new Date:p,f=e.minDate,v=Object(Fe.c)().isSubmitting,b=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.value)||"").trim();if(!n)return"Date is Required";var t=Object(tn.a)(n);return Object(en.a)(t)?f&&t<f?"Cannot be before ".concat(Object(an.a)(f,"MM/dd/yyyy")):m<t?"Cannot be after ".concat(Object(an.a)(m,"MM/dd/yyyy")):void 0:"Invalid Date"}),[f,m]),y=Object(Fe.b)({name:"date",validate:b}),E=Object(B.a)(y,3),O=E[0],j=E[1],h=E[2],g=null!==(n=null===(t=O.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:null,R=j.error,_=j.touched,A=h.setValue,C=h.setTouched,M=null===(l=j.initialValue)||void 0===l?void 0:l.inputValue,S=Object(a.useMemo)((function(){return M&&Object(en.a)(M)?M:new Date}),[M]),T=Object(a.useMemo)((function(){return{autoFocus:c}}),[c]),x=Object(a.useRef)(!1),w=Object(a.useCallback)((function(){return setTimeout((function(){x.current||C(!0)}),0)}),[C,x]),I=Object(a.useCallback)((function(){return x.current=!0}),[x]),D=Object(a.useCallback)((function(){x.current=!1,w()}),[x,w]),k=Object(a.useCallback)((function(e,n){A(dn(e&&Object(en.a)(e)?Object(rn.a)([new Date,e]):e,n))}),[A]),U=on(),F=Object(B.a)(U,1)[0],P=Object(a.useMemo)((function(){return Object(W.a)({},O,{disabled:v||s||(null===F||void 0===F?void 0:F.type)===Ge.FATAL_ERROR,value:g,error:_&&!!R,helperText:_?R:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:i,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date",initialFocusedDate:S,autoOk:!0,InputProps:T,inputProps:un,placeholder:"mm/dd/yyyy",KeyboardButtonProps:cn,onBlur:w,onOpen:I,onClose:D,onChange:k})}),[g,S,w,R,i,T,v,O,I,D,k,_,s,F]);return r.a.createElement(Xe.a,{utils:Ze.default},r.a.createElement(Qe.b,Object.assign({maxDate:m},e,P)))},pn=t(47),mn=t(247),fn=function(e){var n,t=e.autoFocus,l=void 0!==t&&t,o=e.disabled,i=void 0!==o&&o,u=e.variant,c=void 0===u?"filled":u,d=Object(pn.a)(e,["autoFocus","disabled","variant"]),s=Object(Fe.b)({name:"description"}),p=Object(B.a)(s,3),m=p[0],f=p[2].setValue,v=Object(a.useCallback)((function(e){var n,t;f((null===e||void 0===e||null===(n=e.target)||void 0===n||null===(t=n.value)||void 0===t?void 0:t.trimLeft())||null)}),[f]),b=Object(a.useMemo)((function(){return{type:"text",autoFocus:l}}),[l]),y=on(),E=Object(B.a)(y,1)[0];return r.a.createElement(mn.a,Object.assign({},d,m,{disabled:i||(null===E||void 0===E?void 0:E.type)===Ge.FATAL_ERROR,onChange:v,value:null!==(n=m.value)&&void 0!==n?n:"",variant:c,label:"Description",name:"description",InputProps:b}))},vn=t(297),bn=t(408),yn=t.n(bn),En={min:"0.00",step:"0.01"},On=ln((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=new yn.a(("string"===typeof e?Number.parseFloat(e.trim()||"0"):e).toFixed(n)),a=t.n,r=t.d;return{num:a,den:r}}(e,2)})),jn=function(e){var n,t,l=e.autoFocus,o=void 0!==l&&l,i=e.disabled,u=void 0!==i&&i,c=e.variant,d=void 0===c?"filled":c,s=e.maxTotal,p=void 0===s?Number.MAX_SAFE_INTEGER:s,m=e.minTotal,f=void 0===m?0:m,v=Object(pn.a)(e,["autoFocus","disabled","variant","maxTotal","minTotal"]),b=Math.max(.01,f),y=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.inputValue)||"").trim();if(""===n)return"Total Required";var t="string"===typeof n?Number.parseFloat(n):n;return Number.isNaN(t)?"Invalid Number":t>p?"Cannot be greater than ".concat(H()(p).format("$0,0.00")):0===t?"Cannot be 0":t<b?"Cannot be less than ".concat(H()(b).format("$0,0.00")):void 0}),[b,p]),E=Object(Fe.b)({name:"total",validate:y}),O=Object(B.a)(E,3),j=O[0],h=O[1],g=O[2].setValue,R=null!==(n=null===(t=j.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:"",_=h.error,A=h.touched,C=Object(a.useMemo)((function(){return{type:"number",autoFocus:o,startAdornment:r.a.createElement(vn.a,{position:"start"},"$")}}),[o]),M=Object(a.useCallback)((function(e){var n;g(On((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||""))}),[g]),S=Object(a.useMemo)((function(){return A&&_?_:p!==Number.MAX_SAFE_INTEGER&&b>.01?"Max ".concat(H()(p).format("$0,0.00")," & Min ").concat(H()(b).format("$0,0.00")):p!==Number.MAX_SAFE_INTEGER?"Max ".concat(H()(p).format("$0,0.00")):b>.01?"Min ".concat(H()(b).format("$0,0.00")):""}),[A,_,p,b]),T=on(),x=Object(B.a)(T,1)[0];return r.a.createElement(mn.a,Object.assign({},v,j,{disabled:u||(null===x||void 0===x?void 0:x.type)===Ge.FATAL_ERROR,type:"number",value:R,error:A&&!!_,helperText:S,placeholder:"0.00",label:"Total",name:"total",required:!0,variant:d,inputProps:En,InputProps:C,onChange:M}))},hn=t(381),gn=t(389),Rn={type:"checkbox"},_n=function(e){var n,t=e.label,a=e.disabled,l=void 0!==a&&a,o=Object(pn.a)(e,["label","disabled"]),i=Object(Fe.b)({name:"reconciled",type:"checkbox"}),u=Object(B.a)(i,1)[0],c=null!==(n=u.value)&&void 0!==n&&n,d=on(),s=Object(B.a)(d,1)[0];return t?r.a.createElement(hn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===Ge.FATAL_ERROR,label:"Reconcile",control:r.a.createElement(gn.a,{inputProps:Rn})})):r.a.createElement(gn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===Ge.FATAL_ERROR,inputProps:Rn}))},An=t(392);function Cn(){var e=Object(b.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Cn=function(){return e},e}function Mn(){var e=Object(b.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return Mn=function(){return e},e}function Sn(){var e=Object(b.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      ... on Business {\n        __typename\n        id\n      }\n      ... on Department {\n        __typename\n        id\n      }\n    }\n  }\n"]);return Sn=function(){return e},e}function Tn(){var e=Object(b.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return Tn=function(){return e},e}function xn(){var e=Object(b.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return xn=function(){return e},e}function wn(){var e=Object(b.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return wn=function(){return e},e}var In=E()(wn()),Dn=E()(xn()),kn=E()(Tn()),Un=E()(Sn()),Fn=E()(Mn(),Un),Pn=E()(Cn()),Ln=t(5641);function Nn(){var e=Object(b.a)(["\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return Nn=function(){return e},e}var $n=E()(Nn(),Pn),Bn=function(e){var n,t,a=null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:[],r=a.length,l=a[r-1],o=a[r-2];if(void 0===l)return"Method Required";if("string"===typeof l){if((null===o||void 0===o?void 0:o.id)===Ue&&!(null!==(t=l.match(/[0-9]/g))&&void 0!==t?t:[]).join(""))return"Check # Required"}else if(l.id===Ue)return"Check # Required"},Vn=function(e){return"string"===typeof e?e:e.name},Jn=function(e,n){var t=e.length-1;return e.map((function(a,l){var o,i,u=t===l,c=n({index:l}),d=c.key,s=Object(pn.a)(c,["key"]),p=e[l-1],m="string"===typeof a;switch(null===p||void 0===p?void 0:p.id){case Ue:o="CK-"+(m?a:a.name);break;default:o=Vn(a)}if(u){if(!m)switch(a.id){case Ue:i=r.a.createElement("span",null,"CK-")}}else i=r.a.createElement(ue.a,{fontSize:"small"});return r.a.createElement(Oe.a,{key:d,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(An.a,Object.assign({color:u?"primary":"default",variant:u?"default":"outlined",label:o,size:"medium"},s,{disabled:!u}))," ",i)}))},Wn=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(pn.a)(e,["disabled"]),s=Object(a.useState)(!1),p=Object(B.a)(s,2),m=p[0],f=p[1],v=Object(Fe.b)({name:"paymentMethod",validate:Bn}),b=Object(B.a)(v,3),y=b[0],E=b[1],O=b[2],j=y.onBlur,h=null!==(n=null===(t=y.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],g=null!==(l=null===(o=y.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",R=E.error,_=E.touched,A=O.setValue,C=null!==(i=h[h.length-1])&&void 0!==i?i:null,M=Object(a.useMemo)((function(){return null===C?{where:{hasParent:!1}}:{where:{parent:{eq:C.id}}}}),[C]),S=on(),T=Object(B.a)(S,2),x=T[0],w=T[1],I=Object(a.useCallback)((function(e){w({msg:e.message,type:Ge.FATAL_ERROR})}),[w]),D=Object(Y.c)($n,{skip:"string"===typeof C,variables:M,onError:I}),k=D.loading,U=D.error,F=D.data,P=Object(a.useMemo)((function(){return(null===F||void 0===F?void 0:F.paymentMethods)&&"string"!==typeof C&&(null===C||void 0===C?void 0:C.id)!==Ue?F.paymentMethods:[]}),[F,C]),L=P.length>0,N=Object(a.useMemo)((function(){var e;return(null===(e=C)||void 0===e?void 0:e.id)===Ue}),[C]),$=Object(a.useMemo)((function(){return!L&&!N}),[L,N]),V=Object(a.useMemo)((function(){var e;return"string"===typeof C||(null===(e=C)||void 0===e?void 0:e.id)===Ue?"Check #":"Payment Method"}),[C]),J=Object(a.useMemo)((function(){var e;return(null===(e=C)||void 0===e?void 0:e.id)===Ue?{type:"number"}:{}}),[C]),z=Object(a.useMemo)((function(){var e;return(null===(e=C)||void 0===e?void 0:e.id)===Ue?{min:"0",step:"1"}:{}}),[C]),q=Object(a.useCallback)((function(e){var n,t;e.InputProps=Object(W.a)({},null!==(n=e.InputProps)&&void 0!==n?n:{},{},J),e.inputProps=Object(W.a)({},null!==(t=e.inputProps)&&void 0!==t?t:{},{},z);var a=U?U.message:_?R:void 0;return r.a.createElement(mn.a,Object.assign({},d,e,{variant:d.variant||"filled",error:_&&!!R||!!U,helperText:a,name:"paymentMethod",label:V}))}),[d,_,U,R,V,J,z]),G=Object(a.useCallback)((function(e){return f(!0)}),[f]),H=Object(a.useCallback)((function(e){f(!1),e.persist(),setTimeout((function(){j(e)}),0)}),[f,j]),K=Object(a.useCallback)((function(e,n){A({inputValue:g,value:n})}),[A,g]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),$||A({inputValue:n,value:h})}),[A,h,$]),Q=Object(a.useMemo)((function(){return{value:h,disabled:!!U||k||(null===x||void 0===x?void 0:x.type)===Ge.FATAL_ERROR||c,multiple:!0,options:P,renderInput:q,renderTags:Jn,freeSolo:N,getOptionLabel:Vn,onChange:K,onInputChange:X,inputValue:$?"":g,onFocus:G,onBlur:H,open:m&&L&&(null===x||void 0===x?void 0:x.type)!==Ge.FATAL_ERROR,loading:k,autoSelect:!0,name:"paymentMethod"}}),[P,h,q,N,K,X,g,$,G,H,m,L,k,U,c,x]);return r.a.createElement(Ln.a,Q)},zn=t(360),qn=t(184),Yn=function(e){var n=Object(Pe.a)(),t=e.opacity,a=void 0===t?.62:t,l=Object(pn.a)(e,["opacity"]);return r.a.createElement(Oe.a,Object.assign({},l,{overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:Object(qn.fade)(n.palette.background.paper,a)}))},Gn=function(e){return r.a.createElement(Yn,Object.assign({},e,{children:r.a.createElement(zn.a,null)}))};function Hn(){var e=Object(b.a)(["\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      num\n      den\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n"]);return Hn=function(){return e},e}var Kn=E()(Hn());function Xn(){var e=Object(b.a)(["\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ","\n"]);return Xn=function(){return e},e}var Qn=E()(Xn(),Kn),Zn=Symbol(),et=function(e){var n,t,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=e.handleSubmit,p=Object(Fe.c)(),m=p.resetForm,f=p.isSubmitting,v=p.isValid,b=on(),y=Object(B.a)(b,2),E=y[0],O=y[1],j=Object(a.useCallback)((function(e){return O({msg:e.message,type:Ge.FATAL_ERROR})}),[O]),h=Object(Y.c)(Qn,{skip:!i,variables:{id:i},onError:j}),g=h.loading,_=h.error,A=h.data,C=null===A||void 0===A||null===(n=A.journalEntry)||void 0===n?void 0:n.total,M=(null===A||void 0===A||null===(t=A.journalEntry)||void 0===t?void 0:t.refunds)||[],S=Object(a.useMemo)((function(){if(C){var e=M.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:e+a.num/a.den}),0);return C.num/C.den-e}return Number.MAX_SAFE_INTEGER}),[C,M]),T=null===A||void 0===A||null===(l=A.journalEntry)||void 0===l?void 0:l.date,x=Object(a.useMemo)((function(){return T?new Date(T):void 0}),[T]),w=Object(a.useCallback)((function(){d(),m(),O(null)}),[m,d,O]),I=Object(a.useMemo)((function(){return!E||E.type!==Ge.FATAL_ERROR&&E.type!==Ge.ERROR?[null,null]:[E.msg,E.type===Ge.FATAL_ERROR]}),[E]),D=Object(B.a)(I,2),k=D[0],U=D[1],F=null===A||void 0===A||null===(o=A.journalEntry)||void 0===o?void 0:o.type,P=Object(a.useMemo)((function(){var e=g||_||(null!==F&&void 0!==F?F:Zn)===Zn?"Refund":"".concat(F===R.Credit?"Give":"Add"," Refund");return U?"Fatal Error":g?"Loading ".concat(e,"..."):f?"Submitting ".concat(e):e}),[g,_,F,U,f]),L=Object(Pe.a)();return r.a.createElement(Le.a,{open:u,onClose:c,onExited:w,disableBackdropClick:f,disableEscapeKeyDown:f,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:s}},r.a.createElement(Ne.a,{style:k?{color:L.palette.error.main}:void 0},P),r.a.createElement(Oe.a,{position:"relative"},(g||f)&&!k&&r.a.createElement(Gn,{zIndex:"modal"}),!!k&&U&&r.a.createElement(Yn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement($e.a,{color:"error"},k)),r.a.createElement(Be.a,{dividers:!0},!!k&&!U&&r.a.createElement($e.a,{color:"error"},k),r.a.createElement(Ve.a,{container:!0,spacing:2},r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(sn,{minDate:x,disabled:g||f,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(fn,{disabled:g||f,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Wn,{disabled:g||f,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(jn,{disabled:g||f,fullWidth:!0,maxTotal:S})),r.a.createElement(Ve.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(_n,{disabled:g||f,label:!0}))))),r.a.createElement(Je.a,null,!U&&r.a.createElement(We.a,{disabled:g||f||!v,type:"submit",startIcon:r.a.createElement(ze.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(We.a,{disabled:g||f,color:U?"primary":"default",startIcon:!U&&r.a.createElement(qe.a,null),onClick:c},U?"Ok":"Cancel")))},nt=function(e){var n=e.entryId,t=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(Y.a)(),c=Object(a.useCallback)(function(){var e=Object(N.a)(J.a.mark((function e(t,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,Ke(u,n||"",t,a);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:Ge.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[u,n,l]),d=Object(a.useCallback)((function(e){return r.a.createElement(et,{entryId:n,open:t,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[n,t,l,o]);return r.a.createElement(Fe.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})},tt=t(404);function at(){var e=Object(b.a)(["\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return at=function(){return e},e}var rt=E()(at(),Ie),lt=function(){var e=Object(N.a)(J.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,p,m,f,v;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(tt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.description!==t.description?null!==(l=null===(o=r.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:"":null,c=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,d=r.reconciled===t.reconciled?null:r.reconciled,s=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(B.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Ue?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),p=s.paymentMethod,m=s.paymentMethodAdd,f=s.paymentMethodUpdate,v={id:a,fields:{date:i,description:u,total:c,reconciled:d,paymentMethod:p},paymentMethodAdd:m,paymentMethodUpdate:f},e.next=8,n.mutate({mutation:rt,variables:v});case 8:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function ot(){var e=Object(b.a)(["\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        num\n        den\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n"]);return ot=function(){return e},e}var it=E()(ot(),Kn,Pn),ut=function(e){var n=e.refundId,t=e.open,l=e.onClose,o=e.onExited,i=e.journalEntry,u=e.loading,c=e.handleSubmit,d=Object(Fe.c)(),s=d.resetForm,p=d.isSubmitting,m=d.isValid,f=on(),v=Object(B.a)(f,2),b=v[0],y=v[1],E=null===i||void 0===i?void 0:i.total,O=(null===i||void 0===i?void 0:i.refunds)||[],j=Object(a.useMemo)((function(){if(E){var e=O.reduce((function(e,t){var a=t.id,r=t.deleted,l=t.total;return r||a===n?e:e+l.num/l.den}),0);return E.num/E.den-e}return Number.MAX_SAFE_INTEGER}),[E,O,n]),h=null===i||void 0===i?void 0:i.date,g=Object(a.useMemo)((function(){return h?new Date(h):void 0}),[h]),R=Object(a.useCallback)((function(){o(),s(),y(null)}),[s,o,y]),_=Object(a.useMemo)((function(){return!b||b.type!==Ge.FATAL_ERROR&&b.type!==Ge.ERROR?[null,null]:[b.msg,b.type===Ge.FATAL_ERROR]}),[b]),A=Object(B.a)(_,2),C=A[0],M=A[1],S=Object(a.useMemo)((function(){var e="Refund Update";return M?"Fatal Error":u?"Loading ".concat(e,"..."):p?"Submitting ".concat(e):e}),[u,M,p]),T=Object(Pe.a)();return r.a.createElement(Le.a,{open:t,onClose:l,onExited:R,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:c}},r.a.createElement(Ne.a,{style:C?{color:T.palette.error.main}:void 0},S),r.a.createElement(Oe.a,{position:"relative"},(u||p)&&!C&&r.a.createElement(Gn,{zIndex:"modal"}),!!C&&M&&r.a.createElement(Yn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement($e.a,{color:"error"},C)),r.a.createElement(Be.a,{dividers:!0},!!C&&!M&&r.a.createElement($e.a,{color:"error"},C),r.a.createElement(Ve.a,{container:!0,spacing:2},r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(sn,{minDate:g,disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(fn,{disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Wn,{disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Ve.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(jn,{disabled:u||p||!!M,fullWidth:!0,maxTotal:j})),r.a.createElement(Ve.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(_n,{disabled:u||p||!!M,label:!0}))))),r.a.createElement(Je.a,null,!M&&r.a.createElement(We.a,{disabled:u||p||!m,type:"submit",startIcon:r.a.createElement(ze.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(We.a,{disabled:u||p||!!M,color:M?"primary":"default",startIcon:!M&&r.a.createElement(qe.a,null),onClick:l},M?"Ok":"Cancel")))},ct=function(e){var n=e.entryId,t=e.refundId,l=e.open,o=e.onClose,i=e.onExited,u=Object(Y.c)(it,{skip:!n,variables:{entryId:n,refundId:t}}),c=u.loading,d=u.error,s=u.data,p=Object(a.useMemo)((function(){return d?{msg:d.message,type:Ge.FATAL_ERROR}:null}),[d]),m=null===s||void 0===s?void 0:s.journalEntryRefund,f=Object(a.useMemo)((function(){var e;return m?{date:{inputValue:new Date(m.date),value:m.date},paymentMethod:function(){var e=m.paymentMethod,n=e.ancestors,t=Object(pn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),total:{inputValue:(m.total.num/m.total.den).toFixed(2),value:m.total},reconciled:m.reconciled,description:null!==(e=m.description)&&void 0!==e?e:null}:{}}),[m]),v=Object(Y.a)(),b=Object(a.useCallback)(function(){var e=Object(N.a)(J.a.mark((function e(n,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for refund "'.concat(t,'".'),type:Ge.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No refund ID.",type:Ge.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,lt(v,f,t,n,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:Ge.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,f,o,t]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(ut,{entryId:n,refundId:t,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,n,c,o,i,l,t]);return r.a.createElement(Fe.a,{initialValues:null!==f&&void 0!==f?f:{},initialStatus:p,enableReinitialize:!0,onSubmit:b,children:y})},dt=t(5621),st=t(168);function pt(){var e=Object(b.a)(["\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return pt=function(){return e},e}var mt=E()(pt(),De),ft=function(){var e=Object(N.a)(J.a.mark((function e(n,t){var a,r,l,o,i,u,c,d,s,p;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:t.paymentMethod.value[t.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),o=l.paymentMethod,i=l.paymentMethodAdd,u=function(){var e=t.source.value[0],n=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===g.Person){var a=Object(st.parseName)(n);return{source:{sourceType:g.Person,id:""},businessAdd:null,personAdd:{name:{first:a.firstName,last:a.lastName}}}}return{source:{sourceType:g.Business,id:""},businessAdd:{name:n},personAdd:null}}return{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),c=u.source,d=u.personAdd,s=u.businessAdd,p={fields:{date:t.date.value,department:t.department.id,type:t.type,category:t.category.value[t.category.value.length-1].id,description:(null===(a=t.description)||void 0===a?void 0:a.trim())||null,total:t.total.value,reconciled:null!==(r=t.reconciled)&&void 0!==r?r:null,paymentMethod:o,source:c},paymentMethodAdd:i,personAdd:d,businessAdd:s},e.next=5,n.mutate({mutation:mt,variables:p});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function vt(){var e=Object(b.a)(["\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return vt=function(){return e},e}var bt=E()(vt(),Dn),yt=function(e){return e.name},Et=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(pn.a)(o,["key"]);return r.a.createElement(Oe.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(An.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ue.a,{fontSize:"small"}))}))},Ot=Symbol(),jt=function(e){var n,t,l,o,i,u,c=Object(Fe.c)(),d=e.disabled,s=void 0!==d&&d,p=(null===(n=c.values)||void 0===n||null===(t=n.category)||void 0===t?void 0:t.value)||[],m=(null===(l=c.values)||void 0===l||null===(o=l.category)||void 0===o?void 0:o.inputValue.trimLeft())||"",f=null!==(i=null===(u=c.values)||void 0===u?void 0:u.type)&&void 0!==i?i:null,v=p[p.length-1],b=Object(a.useMemo)((function(){return(null===v||void 0===v?void 0:v.id)?{where:{parent:{eq:v.id},type:{eq:f}}}:{where:{hasParent:!1,type:{eq:f}}}}),[v,f]),y=on(),E=Object(B.a)(y,2),O=E[0],j=E[1],h=Object(a.useCallback)((function(e){j({msg:e.message,type:Ge.FATAL_ERROR})}),[j]),g=Object(Y.c)(bt,{skip:(null!==f&&void 0!==f?f:Ot)===Ot,variables:b,onCompleted:function(){return setTimeout((function(){return c.validateField("category")}),0)},onError:h}),R=g.loading,_=g.error,A=g.data,C=null===A||void 0===A?void 0:A.catOpts,M=Object(a.useMemo)((function(){return C||[]}),[C]),S=Object(a.useCallback)((function(e){var n=(null===e||void 0===e?void 0:e.value)||[];return n[n.length-1]||null?M.length>0?"Sub-category Required":void 0:"Category Required"}),[M]),T=Object(Fe.b)({name:"category",validate:S}),x=Object(B.a)(T,3),w=x[0],I=x[1],D=x[2],k=w.onBlur,U=I.error,F=I.touched,P=D.setValue;Object(a.useEffect)((function(){v&&f!==v.type&&P({inputValue:"",value:[]})}),[f,v,P]);var L=Object(a.useMemo)((function(){return U&&F?U:(null!==f&&void 0!==f?f:Ot)===Ot?"Category requires entry type.":_?_.message:""}),[f,U,F,_]),N=Object(a.useMemo)((function(){return R||(null===O||void 0===O?void 0:O.type)===Ge.FATAL_ERROR||(null!==f&&void 0!==f?f:Ot)===Ot||s}),[s,f,O,R]),$=Object(a.useCallback)((function(n){return r.a.createElement(mn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:F&&!!U||!!_,disabled:N,helperText:L,name:"category",label:"Category"}))}),[e,F,U,_,N,L]),V=Object(a.useState)(!1),J=Object(B.a)(V,2),z=J[0],q=J[1],G=Object(a.useCallback)((function(e){return q(!0)}),[q]),H=Object(a.useCallback)((function(e){q(!1),e.persist(),setTimeout((function(){k(e)}),0)}),[q,k]),K=Object(a.useCallback)((function(e,n){P({inputValue:m,value:n})}),[P,m]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),P({inputValue:n,value:p})}),[P,p]),Q=Object(a.useMemo)((function(){return Object(W.a)({},w,{open:z&&M.length>0,onFocus:G,onBlur:H,options:M,renderTags:Et,forcePopupIcon:!1,disabled:N,value:p,renderInput:$,loading:R,autoSelect:!0,multiple:!0,getOptionLabel:yt,onInputChange:X,inputValue:m,onChange:K,name:"category"})}),[w,z,M,G,H,R,N,p,$,X,m,K]);return r.a.createElement(Ln.a,Q)};function ht(){var e=Object(b.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return ht=function(){return e},e}var gt=E()(ht(),In),Rt=function(e){return e.name},_t=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(pn.a)(o,["key"]);return r.a.createElement(Oe.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(An.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ue.a,{fontSize:"small"}))}))},At=function(e){var n=e.disabled,t=void 0!==n&&n,l=on(),o=Object(B.a)(l,2),i=o[0],u=o[1],c=Object(a.useCallback)((function(e){u({msg:e.message,type:Ge.FATAL_ERROR})}),[u]),d=Object(Y.c)(gt,{onError:c,variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),s=d.loading,p=d.error,m=d.data,f=(null===m||void 0===m?void 0:m.deptOpts)||[],v=Object(a.useState)(!1),b=Object(B.a)(v,2),y=b[0],E=b[1],O=Object(a.useState)(""),j=Object(B.a)(O,2),h=j[0],g=j[1],R=Object(a.useCallback)((function(e){return e?f.some((function(n){var t=n.parent;return"Department"===t.__typename&&t.id===e.id}))?"Sub-department Required":void 0:"Department Required"}),[f]),_=Object(Fe.b)({name:"department",validate:R}),A=Object(B.a)(_,3),C=A[0],M=A[1],S=A[2],T=C.value,x=C.onBlur,w=M.error,I=M.touched,D=S.setValue,k=Object(a.useMemo)((function(){return new Map(f.reduce((function(e,n){return e.push([n.id,n]),e}),[]))}),[f]),U=Object(a.useMemo)((function(){if(!T)return[];for(var e=[T],n=T.parent,t=n.__typename,a=n.id;"Business"!==t&&k.has(a);){var r=k.get(a);e.unshift(r);var l=r.parent;t=l.__typename,a=l.id}return e}),[T,k]),F=Object(a.useMemo)((function(){var e,n=null===(e=U[U.length-1])||void 0===e?void 0:e.id;return f.filter((function(e){return n?e.parent.id===n:"Business"===e.parent.__typename}))}),[f,U]),P=Object(a.useMemo)((function(){return U.length>0&&0===F.length}),[U,F]),L=Object(a.useMemo)((function(){return w&&I?w:p?p.message:""}),[w,I,p]),N=Object(a.useMemo)((function(){return s||P||(null===i||void 0===i?void 0:i.type)===Ge.FATAL_ERROR||t}),[P,t,i,s]),$=Object(a.useCallback)((function(n){return r.a.createElement(mn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:I&&!!w,helperText:L,name:"department",label:"Department",disabled:N}))}),[e,I,w,L,N]),V=Object(a.useCallback)((function(e){return E(!0)}),[E]),J=Object(a.useCallback)((function(e){E(!1),x(e)}),[E,x]),z=Object(a.useCallback)((function(e,n){if(n)if(Array.isArray(n)){var t=n.length;D(0===t?null:n[t-1])}else D(n);else D(null)}),[D]),q=Object(a.useCallback)((function(e,n,t){g((n||"").trimStart())}),[g]),G=Object(a.useMemo)((function(){return Object(W.a)({},C,{open:y&&F.length>0,onFocus:V,onBlur:J,options:F,renderTags:_t,forcePopupIcon:!1,disabled:N,value:U,renderInput:$,loading:s,autoSelect:!0,multiple:!0,getOptionLabel:Rt,onChange:z,onInputChange:q,inputValue:P?"":h,name:"department"})}),[C,y,F,V,J,P,N,U,$,s,z,q,h]);return p?r.a.createElement("pre",null,JSON.stringify(p,null,2)):r.a.createElement(Ln.a,G)},Ct=t(304);function Mt(){var e=Object(b.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Mt=function(){return e},e}var St=E()(Mt(),kn,Fn,Un),Tt=function(e){switch(e){case g.Business:case g.Department:case g.Person:break;default:return"string"===typeof e}return!1},xt=function(e){switch(e){case g.Business:return"Vendor";case g.Department:return"Department";case g.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},wt=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(pn.a)(o,["key"]);return Tt(e)?e:r.a.createElement(Oe.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(An.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:xt(e),size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ue.a,{fontSize:"small"}))}))},It=function(e,n){var t=n.inputValue,a=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return a.test(xt(e))}))},Dt=function(e){var n,t=(null===e||void 0===e?void 0:e.value)||[],a=null!==(n=t[0])&&void 0!==n?n:null,r=t.length>1?t[t.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(Tt(r)&&a===g.Person){var l=Object(st.parseName)(r);if(!l.firstName.trim())return"First Name Required";if(!l.lastName.trim())return"Last Name Required"}},kt=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(a.useState)(!1),s=Object(B.a)(d,2),p=s[0],m=s[1],f=Object(Fe.b)({name:"source",validate:Dt}),v=Object(B.a)(f,3),b=v[0],y=v[1],E=v[2],O=b.onBlur,j=null!==(n=null===(t=b.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],h=null!==(l=null===(o=b.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",R=y.error,_=y.touched,A=E.setValue,C=null!==(i=j[0])&&void 0!==i?i:null,M=j.length>1?j[j.length-1]:null,S=Object(a.useRef)(""),T=on(),x=Object(B.a)(T,2),w=x[0],I=x[1],D=Object(a.useCallback)((function(e){I({msg:e.message,type:Ge.FATAL_ERROR})}),[I]),k=Object(Y.c)(St,{skip:!S.current&&!j[1],variables:{name:S.current,isBiz:C!==g.Person},onError:D}),U=k.loading,F=k.error,P=k.data,L=Object(a.useMemo)((function(){var e=new Map,n=!0,t=!1,a=void 0;try{for(var r,l=((null===P||void 0===P?void 0:P.businesses)||[])[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value,i=!0,u=!1,c=void 0;try{for(var d,s=o.departments[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var p=d.value;e.set(p.id,p)}}catch(m){u=!0,c=m}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}}}catch(m){t=!0,a=m}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[P]),N=Object(a.useMemo)((function(){if(null===C)return[g.Business,g.Person];if(C===g.Person)return null===M&&(null===P||void 0===P?void 0:P.people)||[];if(!M)return(null===P||void 0===P?void 0:P.businesses)||[];if("string"===typeof M)return[];var e=[],n=!0,t=!1,a=void 0;try{for(var r,l=L.values()[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.__typename===M.__typename&&o.parent.id===M.id&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[C,P,L,M]),$=Object(a.useMemo)((function(){return null!==C&&null===M}),[C,M]),V=Object(a.useMemo)((function(){return j.length>0&&0===N.length&&!$}),[j,N,$]),J=Object(a.useMemo)((function(){return null===C?"Source Type":C===g.Person?"Person Name":1===j.length?"Vendor":2===j.length&&N.length>0?"Department":N.length>0?"Sub-Department":"Vendor"}),[j,N,C]),z=Object(a.useMemo)((function(){return c||V||(null===w||void 0===w?void 0:w.type)===Ge.FATAL_ERROR}),[V,c,w]),q=Object(a.useCallback)((function(n){var t,a,l;M&&"string"!==typeof M&&"Person"!==M.__typename&&0===N.length&&(n=Object(W.a)({},n,{inputProps:Object(W.a)({},(null===(t=n)||void 0===t?void 0:t.inputProps)||{},{style:Object(W.a)({},(null===(a=n)||void 0===a||null===(l=a.inputProps)||void 0===l?void 0:l.style)||{},{display:"none"})})}));return r.a.createElement(mn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:_&&!!R,helperText:_?R:void 0,name:"source",label:J,disabled:z}))}),[M,N.length,e,_,R,J,z]),G=Object(a.useCallback)((function(e){return m(!0)}),[m]),H=Object(a.useCallback)((function(e){m(!1),e.persist(),setTimeout((function(){return O(e)}),0)}),[m,O]),K=Object(a.useCallback)((function(e,n){var t=n.length-1,a=n[t];if(Tt(a)){var r=[],l=!0,o=!1,i=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;d&&(Ct.checkName(d)&&(d=Ct(d)),r.push(d))}}catch(p){o=!0,i=p}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}var s=r.join(" ").trim();n[t]=s.charAt(0).toUpperCase()+s.substring(1)}A({inputValue:h,value:n})}),[A,h]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),V||A({inputValue:n,value:j}),null!==C&&null===M&&n&&(S.current=n[0].toLowerCase())}),[A,C,M,j,V,S]),Q=Object(a.useMemo)((function(){return Object(W.a)({},b,{inputValue:V?"":h,open:p&&N.length>0,onFocus:G,onBlur:H,options:N,renderTags:wt,forcePopupIcon:!1,freeSolo:$,value:j,renderInput:q,loading:U,autoSelect:!0,multiple:!0,getOptionLabel:xt,onInputChange:X,onChange:K,filterOptions:It,name:"source",disabled:z})}),[b,V,h,p,N,G,H,$,j,q,U,X,K,z]);return F?r.a.createElement("pre",null,JSON.stringify(F,null,2)):r.a.createElement(Ln.a,Q)},Ut=t(5643),Ft=t(5620),Pt=t(365),Lt=t(295),Nt=t(5583),$t=Symbol(),Bt=function(e){if((null!==e&&void 0!==e?e:$t)===$t)return"Type Required"},Vt=function(e){var n=e.disabled,t=void 0!==n&&n,l=on(),o=Object(B.a)(l,1)[0],i=e.label,u=void 0!==i&&i,c=Object(Fe.c)().isSubmitting,d=Object(Fe.b)({name:"type",validate:Bt}),s=Object(B.a)(d,3),p=s[0],m=s[1],f=s[2],v=m.error,b=m.touched,y=f.setValue,E=f.setTouched,O=Object(a.useMemo)((function(){return Object(W.a)({size:"small",exclusive:!0,disabled:c},p,{onChange:function(){var e=Object(N.a)(J.a.mark((function e(n,t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==t&&void 0!==t?t:$t)!==$t){e.next=2;break}return e.abrupt("return");case 2:return y(t),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:E(!0);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})}),[p,c,y,E]),j=c||t||(null===o||void 0===o?void 0:o.type)===Ge.FATAL_ERROR,h=Object(a.useMemo)((function(){return r.a.createElement(Oe.a,{pl:1,clone:!0},r.a.createElement(Ut.a,Object.assign({},e,O),r.a.createElement(Ft.a,{disabled:j,value:R.Credit},r.a.createElement(Pt.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(Ce.b,null))),r.a.createElement(Ft.a,{disabled:j,value:R.Debit},r.a.createElement(Pt.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(Ce.a,null)))))}),[e,O,j]);return u?r.a.createElement(Lt.a,null,r.a.createElement(hn.a,Object.assign({},e,{labelPlacement:"boolean"===typeof u?void 0:u,control:h,label:"Type"})),b&&!!v&&r.a.createElement(Nt.a,{error:!0},v)):r.a.createElement(Lt.a,null,h,!!v&&r.a.createElement(Nt.a,{error:!0},v))};function Jt(){var e=Object(b.a)(["\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Jt=function(){return e},e}var Wt={item:!0,lg:4,sm:6,xs:12},zt=E()(Jt(),In),qt=function(e){var n=e.open,t=e.onClose,l=e.loading,o=Object(Fe.c)(),i=o.resetForm,u=o.isSubmitting,c=o.isValid,d=o.submitForm,s=on(),p=Object(B.a)(s,2),m=p[0],f=p[1],v=Object(a.useMemo)((function(){return!m||m.type!==Ge.FATAL_ERROR&&m.type!==Ge.ERROR?[null,null]:[m.msg,m.type===Ge.FATAL_ERROR]}),[m]),b=Object(B.a)(v,2),y=b[0],E=b[1],O=Object(a.useCallback)((function(){i(),f(null)}),[i,f]),j=Object(a.useMemo)((function(){return E?"Fatal Error":u?"Submitting Add Entry...":l?"Loading Add Entry...":"Add Entry"}),[E,u,l]),h=Object(Pe.a)(),g=Object(a.useCallback)(Object(N.a)(J.a.mark((function e(){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),e.next=4,d();case 4:t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:Ge.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,t,f]),R=Object(a.useCallback)(Object(N.a)(J.a.mark((function e(){var n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),e.next=4,d();case 4:i(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:Ge.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,i,f]),_=Object(a.useCallback)((function(e){return e.preventDefault()}),[]);return r.a.createElement(Le.a,{open:n,onClose:t,onExited:O,disableBackdropClick:u,disableEscapeKeyDown:u,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:_}},r.a.createElement(Ne.a,{style:y?{color:h.palette.error.main}:void 0},j),r.a.createElement(Oe.a,{position:"relative"},(u||l)&&!y&&r.a.createElement(Gn,{zIndex:"modal"}),!!y&&E&&r.a.createElement(Yn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement($e.a,{color:"error"},y)),r.a.createElement(Be.a,{dividers:!0},!!y&&!E&&r.a.createElement($e.a,{color:"error"},y),r.a.createElement(Ve.a,{container:!0,spacing:2},r.a.createElement(Ve.a,Object.assign({},Wt,{justify:"center",container:!0}),r.a.createElement(Vt,{style:{margin:h.spacing(1)},label:"start",disabled:l||u||!!E})),r.a.createElement(Ve.a,Wt,r.a.createElement(sn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(kt,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(jt,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(At,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(fn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(Wn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Wt,r.a.createElement(jn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ve.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},Wt),r.a.createElement(_n,{disabled:l||u||!!E,label:!0}))))),r.a.createElement(Je.a,null,!E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{onClick:g,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(ze.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(We.a,{onClick:R,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(dt.a,null),variant:"outlined"},"Add & New")),r.a.createElement(We.a,{disabled:u,color:E?"primary":"default",startIcon:!E&&r.a.createElement(qe.a,null),onClick:t},E?"Ok":"Cancel")))},Yt=function(e){var n=e.open,t=e.onClose,l=e.deptId,o=Object(Y.c)(zt,{skip:!l,variables:{id:l}}),i=o.loading,u=o.error,c=o.data,d=null===c||void 0===c?void 0:c.department,s=Object(a.useMemo)((function(){return d?{department:d}:{}}),[d]),p=Object(a.useMemo)((function(){return u?{msg:u.message,type:Ge.FATAL_ERROR}:null}),[u]),m=Object(Y.a)(),f=Object(a.useCallback)((function(e,n){return ft(m,e,n)}),[m]),v=Object(a.useCallback)((function(e){return r.a.createElement(qt,{open:n,onClose:t,loading:i})}),[n,t,i]);return r.a.createElement(Fe.a,{initialValues:s,initialStatus:p,enableReinitialize:!0,onSubmit:f,children:v})};function Gt(){var e=Object(b.a)(["\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Gt=function(){return e},e}Symbol();var Ht=E()(Gt(),De),Kt=function(){var e=Object(N.a)(J.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,p,m,f,v,b,y,E,O,j,h;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,n,a,l,o=null!==(e=null===(n=r.category.value[r.category.value.length-1])||void 0===n?void 0:n.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=t.category.value[t.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),i=Object(tt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.department.id===t.department.id?null:r.department.id,c=(null===(l=r.description)||void 0===l?void 0:l.trim())&&r.description!==t.description?r.description.trim():null,d=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,s=r.type===t.type?null:r.type,p=r.reconciled===t.reconciled?null:r.reconciled,m=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(B.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Ue?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),f=m.paymentMethod,v=m.paymentMethodAdd,b=m.paymentMethodUpdate,y=function(){var e=r.source.value[0],n=r.source.value[r.source.value.length-1],a=t.source.value[0],l=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===g.Person){var o=Object(st.parseName)(n);return{source:{sourceType:g.Person,id:""},businessAdd:null,personAdd:{name:{first:o.firstName,last:o.lastName}}}}return{source:{sourceType:g.Business,id:""},businessAdd:{name:n},personAdd:null}}return e===a&&n.id===l.id?{source:null,businessAdd:null,personAdd:null}:{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),E=y.source,O=y.personAdd,j=y.businessAdd,h={id:a,fields:{category:o,date:i,department:u,description:c,total:d,type:s,source:E,reconciled:p,paymentMethod:f},paymentMethodAdd:v,paymentMethodUpdate:b,personAdd:O,businessAdd:j},console.log(h),e.next=13,n.mutate({mutation:Ht,variables:h});case 13:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function Xt(){var e=Object(b.a)(["\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ...SrcEntryDeptOptFragment\n        ... on Department {\n          ancestors {\n            ...SrcEntryDeptOptFragment\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          num\n          den\n        }\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Xt=function(){return e},e}var Qt=E()(Xt(),In,Dn,kn,Fn,Un,Pn),Zt=new Date(864e13),ea={item:!0,lg:4,sm:6,xs:12},na=function(e){var n=e.open,t=e.onClose,l=e.onExited,o=e.journalEntry,i=e.loading,u=e.handleSubmit,c=Object(Fe.c)(),d=c.resetForm,s=c.isSubmitting,p=c.isValid,m=on(),f=Object(B.a)(m,2),v=f[0],b=f[1],y=(null===o||void 0===o?void 0:o.refunds)||[],E=Object(a.useMemo)((function(){return y.reduce((function(e,n){var t=Object(B.a)(e,2),a=t[0],r=t[1],l=(n.id,n.deleted),o=n.total,i=n.date;return[l?a:a+o.num/o.den,l?r:Object(rn.a)([r,new Date(i)])]}),[0,Zt])}),[y]),O=Object(B.a)(E,2),j=O[0],h=O[1],g=Object(a.useCallback)((function(){l(),d(),b(null)}),[d,l,b]),R=Object(a.useMemo)((function(){return!v||v.type!==Ge.FATAL_ERROR&&v.type!==Ge.ERROR?[null,null]:[v.msg,v.type===Ge.FATAL_ERROR]}),[v]),_=Object(B.a)(R,2),A=_[0],C=_[1],M=Object(a.useMemo)((function(){var e="Entry Update";return C?"Fatal Error":i?"Loading ".concat(e,"..."):s?"Submitting ".concat(e):e}),[i,C,s]),S=Object(Pe.a)();return r.a.createElement(Le.a,{open:n,onClose:t,onExited:g,fullWidth:!0,disableBackdropClick:s,disableEscapeKeyDown:s,maxWidth:"lg",PaperProps:{component:"form",onSubmit:u}},r.a.createElement(Ne.a,{style:A?{color:S.palette.error.main}:void 0},M),r.a.createElement(Oe.a,{position:"relative"},(s||i)&&!A&&r.a.createElement(Gn,{zIndex:"modal"}),!!A&&C&&r.a.createElement(Yn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement($e.a,{color:"error"},A)),r.a.createElement(Be.a,{dividers:!0},!!A&&!C&&r.a.createElement($e.a,{color:"error"},A),r.a.createElement(Ve.a,{container:!0,spacing:2},r.a.createElement(Ve.a,Object.assign({},ea,{justify:"center",container:!0}),r.a.createElement(Vt,{style:{margin:S.spacing(1)},label:"start",disabled:s||i||!!C})),r.a.createElement(Ve.a,ea,r.a.createElement(sn,{disabled:s||i||!!C,maxDate:h===Zt?void 0:h,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(kt,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(jt,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(At,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(fn,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(Wn,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Ve.a,ea,r.a.createElement(jn,{disabled:s||i||!!C,minTotal:j,fullWidth:!0})),r.a.createElement(Ve.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},ea),r.a.createElement(_n,{disabled:s||i||!!C,label:!0}))))),r.a.createElement(Je.a,null,!C&&r.a.createElement(We.a,{disabled:s||!p||i,type:"submit",startIcon:r.a.createElement(ze.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(We.a,{disabled:s,color:C?"primary":"default",startIcon:!C&&r.a.createElement(qe.a,null),onClick:t},C?"Ok":"Cancel")))},ta=function(e){var n,t=e.entryId,l=e.open,o=e.onClose,i=e.onExited,u=Object(Y.c)(Qt,{skip:!t,variables:{id:t}}),c=u.loading,d=u.error,s=u.data;d&&(console.log(t,Qt),console.error(d));var p=Object(a.useMemo)((function(){return d?{msg:d.message,type:Ge.FATAL_ERROR}:null}),[d]),m=null===s||void 0===s?void 0:s.journalEntry,f=Object(a.useMemo)((function(){var e;if(!m)return{};var n={inputValue:new Date(m.date),value:m.date},t=function(){var e=m.category,n=e.ancestors,t=Object(pn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),a=function(){var e=m.paymentMethod,n=e.ancestors,t=Object(pn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),r={inputValue:(m.total.num/m.total.den).toFixed(2),value:m.total};return{date:n,category:t,paymentMethod:a,department:m.department,total:r,reconciled:m.reconciled,description:null!==(e=m.description)&&void 0!==e?e:null,type:m.type,source:function(){var e=[],n=null===m||void 0===m?void 0:m.source;switch(null===n||void 0===n?void 0:n.__typename){case"Person":e.push(g.Person,n);break;case"Business":e.push(g.Business,n);break;case"Department":e.push(g.Business);var t=[],a=!0,r=!1,l=void 0;try{for(var o,i=n.ancestors[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;"Business"===u.__typename?e.push(u):t.push(u.id)}}catch(E){r=!0,l=E}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}var c=e[1];if(t.length>0){var d=[],s=!0,p=!1,f=void 0;try{for(var v,b=c.departments[Symbol.iterator]();!(s=(v=b.next()).done);s=!0){var y=v.value;if(-1!==t.indexOf(y.id)&&d.push(y)===t.length)break}}catch(E){p=!0,f=E}finally{try{s||null==b.return||b.return()}finally{if(p)throw f}}d.sort((function(e,n){return e.id===n.parent.id||c.id||e.parent.id?-1:n.id===e.parent.id?1:0})),e.push.apply(e,d)}}return{inputValue:"",value:e}}()}}),[m]),v=Object(Y.a)(),b=Object(a.useCallback)(function(){var e=Object(N.a)(J.a.mark((function e(n,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,Kt(v,f,t,n,a);case 4:o(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:Ge.ERROR});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,f,t,o]),y=Object(a.useCallback)((function(e){return r.a.createElement(na,{open:l,onClose:o,onExited:i,loading:c,journalEntry:null!==m&&void 0!==m?m:null,handleSubmit:e.handleSubmit})}),[l,o,i,c,m]);return r.a.createElement(Fe.a,{initialValues:f,initialStatus:p,journalEntry:null!==(n=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==n?n:null,loading:c,onSubmit:b,enableReinitialize:!0,children:y})};function aa(){var e=Object(b.a)(["\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return aa=function(){return e},e}var ra=E()(aa(),De),la=function(e){var n=e.entryId,t=e.onClose,l=Object(Y.b)(ra),o=Object(B.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,p=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),m=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Entry...":"Delete Entry"}),[s,c]),f=Object(Pe.a)();return r.a.createElement(Le.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement(Ne.a,{style:s?{color:f.palette.error.main}:void 0},m),r.a.createElement(Oe.a,{position:"relative"},c&&r.a.createElement(Gn,{zIndex:"modal"}),r.a.createElement(Be.a,null,s&&r.a.createElement($e.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement($e.a,null,"Are you sure you want to delete this entry?"))),r.a.createElement(Je.a,null,!s&&r.a.createElement(We.a,{disabled:c,onClick:p,startIcon:r.a.createElement(te.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(We.a,{disabled:c,startIcon:!s&&r.a.createElement(qe.a,null),onClick:t},s?"Close":"Cancel")))};function oa(){var e=Object(b.a)(["\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return oa=function(){return e},e}var ia,ua=E()(oa(),De),ca=function(e){var n=e.refundId,t=e.onClose,l=Object(Y.b)(ua),o=Object(B.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,p=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),m=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Refund...":"Delete Refund"}),[s,c]),f=Object(Pe.a)();return r.a.createElement(Le.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement(Ne.a,{style:s?{color:f.palette.error.main}:void 0},m),r.a.createElement(Oe.a,{position:"relative"},c&&r.a.createElement(Gn,{zIndex:"modal"}),r.a.createElement(Be.a,null,s&&r.a.createElement($e.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement($e.a,null,"Are you sure you want to delete this refund?"))),r.a.createElement(Je.a,null,!s&&r.a.createElement(We.a,{disabled:c,onClick:p,startIcon:r.a.createElement(te.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(We.a,{disabled:c,startIcon:!s&&r.a.createElement(qe.a,null),onClick:t},s?"Close":"Cancel")))};function da(){var e=Object(b.a)(["\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return da=function(){return e},e}function sa(){var e=Object(b.a)(["\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return sa=function(){return e},e}function pa(){var e=Object(b.a)(["\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return pa=function(){return e},e}!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(ia||(ia={}));var ma={Add:Object(a.forwardRef)((function(e,n){return r.a.createElement(re.a,Object.assign({},e,{ref:n}))})),Check:Object(a.forwardRef)((function(e,n){return r.a.createElement(le.a,Object.assign({},e,{ref:n}))})),Clear:Object(a.forwardRef)((function(e,n){return r.a.createElement(oe.a,Object.assign({},e,{ref:n}))})),Delete:Object(a.forwardRef)((function(e,n){return r.a.createElement(ie.a,Object.assign({},e,{ref:n}))})),DetailPanel:Object(a.forwardRef)((function(e,n){return r.a.createElement(ue.a,Object.assign({},e,{ref:n}))})),Edit:Object(a.forwardRef)((function(e,n){return r.a.createElement(ce.a,Object.assign({},e,{ref:n}))})),Export:Object(a.forwardRef)((function(e,n){return r.a.createElement(de.a,Object.assign({},e,{ref:n}))})),Filter:Object(a.forwardRef)((function(e,n){return r.a.createElement(se.a,Object.assign({},e,{ref:n}))})),FirstPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(pe.a,Object.assign({},e,{ref:n}))})),LastPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(me.a,Object.assign({},e,{ref:n}))})),NextPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(ue.a,Object.assign({},e,{ref:n}))})),PreviousPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(fe.a,Object.assign({},e,{ref:n}))})),ResetSearch:Object(a.forwardRef)((function(e,n){return r.a.createElement(oe.a,Object.assign({},e,{ref:n}))})),Search:Object(a.forwardRef)((function(e,n){return r.a.createElement(ve.a,Object.assign({},e,{ref:n}))})),SortArrow:Object(a.forwardRef)((function(e,n){return r.a.createElement(be.a,Object.assign({},e,{ref:n}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,n){return r.a.createElement(ye.a,Object.assign({},e,{ref:n}))})),ViewColumn:Object(a.forwardRef)((function(e,n){return r.a.createElement(Ee.a,Object.assign({},e,{ref:n}))}))},fa=J.a.mark((function e(n){var t,a,r,l,o,i,u;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:t=n.type===R.Credit?R.Debit:R.Credit,a=!0,r=!1,l=void 0,e.prev=6,o=n.refunds[Symbol.iterator]();case 8:if(a=(i=o.next()).done){e.next=15;break}return u=i.value,e.next=12,Object(W.a)({},n,{},u,{type:t,description:u.description||n.description,refunds:n.id});case 12:a=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),r=!0,l=e.t0;case 21:e.prev=21,e.prev=22,a||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),e,null,[[6,17,21,29],[22,,24,28]])})),va=E()(pa(),De),ba=E()(sa(),De),ya=E()(da(),De),Ea=function(e){var n,t,l=e.deptId,o=void 0===l?null:l,i=e.journalTitle,u=void 0===i?null:i,c=e.mode,d=Object(a.useState)(!1),s=Object(B.a)(d,2),p=s[0],m=s[1],f=Object(a.useCallback)((function(){m(!1)}),[m]),v=Object(a.useState)(!1),b=Object(B.a)(v,2),y=b[0],E=b[1],O=Object(a.useState)(null),j=Object(B.a)(O,2),h=j[0],g=j[1],_=Object(a.useCallback)((function(){E(!1)}),[E]),A=Object(a.useCallback)((function(){g(null)}),[g]),C=Object(a.useState)(null),M=Object(B.a)(C,2),S=M[0],T=M[1],x=Object(a.useCallback)((function(){T(null)}),[T]),w=Object(a.useState)(!1),I=Object(B.a)(w,2),D=I[0],k=I[1],U=Object(a.useState)(null),F=Object(B.a)(U,2),P=F[0],L=F[1],V=Object(a.useCallback)((function(){k(!1)}),[k]),W=Object(a.useCallback)((function(){L(null)}),[L]),G=Object(a.useState)(!1),K=Object(B.a)(G,2),re=K[0],le=K[1],oe=Object(a.useState)(null),ie=Object(B.a)(oe,2),ue=ie[0],de=ie[1],se=Object(a.useCallback)((function(){le(!1)}),[le]),pe=Object(a.useCallback)((function(){de(null)}),[de]),me=Object(a.useState)(null),fe=Object(B.a)(me,2),ve=fe[0],be=fe[1],ye=Object(a.useCallback)((function(){be(null)}),[be]),Ee=Object(Y.b)(ba),Me=Object(B.a)(Ee,2),Se=Me[0],Te=Me[1].loading,xe=Object(Y.b)(ya),we=Object(B.a)(xe,2),Ie=we[0],De=we[1].loading,Fe=Object(a.useMemo)((function(){return o?{where:{department:{eq:o}}}:void 0}),[o]),Pe=Object(Y.c)(ke,{variables:Fe,fetchPolicy:"cache-and-network"}),Le=Pe.loading,Ne=Pe.error,$e=Pe.data,Be=Pe.subscribeToMore,Ve=Le&&!(null===$e||void 0===$e?void 0:$e.journalEntries);Object(a.useEffect)((function(){return Be({document:va,updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var a=t.data.journalEntryUpserted,r=a.department.ancestors;if(o&&a.department.id!==o&&r.every((function(e){return e.id!==o}))){var l=e.journalEntries.filter((function(e){return e.id!==a.id}));return l.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:l})}return e.journalEntries.some((function(e){return e.id===a.id}))?e:Object.assign({},e,{journalEntries:[a].concat(Object($.a)(e.journalEntries))})}})}),[o,Be]);var Je=Object(a.useMemo)((function(){return[{field:"reconciled",title:"Reconciled",render:function(e){return e.reconciled?r.a.createElement(ee.a,null):null},customFilterAndSearch:function(e,n){var t,a=X()(n.date),r={type:[n.type===R.Credit?"credit":"debit"],date:[a.format("dddd, MMMM Do YYYY, h:mm:ss a"),a.toString(),a.format("M/d/YY"),a.format("M/d/YYYY"),a.format("MMM DD, YYYY")],description:[n.description||""],reconciled:[n.reconciled?"reconciled":""],department:[n.department.name],category:[n.category.name],paymentMethod:[(null===(t=n.paymentMethod.parent)||void 0===t?void 0:t.id)===Ue?"CK-".concat(n.paymentMethod.name):n.paymentMethod.name],source:[function(){switch(n.source.__typename){case"Person":return"".concat(n.source.name.first," ").concat(n.source.name.last);case"Business":return n.source.bizName;case"Department":return n.source.deptName}}()],total:[H()(n.total.num/n.total.den).format("$0,0.00")]};return new Z.a([r],{threshold:.4,useExtendedSearch:!0,keys:["date","type","description","reconciled","department","category","paymentMethod","source","total"]}).search(e).length>0},hidden:c===ia.Reconcile,filtering:!1,sorting:!1},{field:"total",title:"Total",render:function(e){var n=e.total,t=n.num,a=n.den;return H()(t/a).format("$0,0.00")},searchable:!1,filtering:!1,sorting:!1},{field:"date",title:"Date",render:function(e){var n=e.date;return X()(n).format("MMM DD, YYYY")},searchable:!1,filtering:!1,sorting:!1},{field:"category",title:"Category",render:function(e){var n=e.category;return Object(Q.a)(n.name)},searchable:!1,filtering:!1,sorting:!1},{field:"source",title:"Source",render:function(e){var n=e.source;switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}},searchable:!1,filtering:!1,sorting:!1},{field:"paymentMethod",title:"Payment Method",render:function(e){var n,t=e.paymentMethod;return(null===(n=t.parent)||void 0===n?void 0:n.id)===Ue?"CK-".concat(t.name):t.name},searchable:!1,filtering:!1,sorting:!1},{field:"description",title:"Description",render:function(e){return e.description},searchable:!1,filtering:!1,sorting:!1},{field:"department",title:"Department",render:function(e){var n=e.department;return Object(Q.a)(n.name)},searchable:!1,filtering:!1,sorting:!1}]}),[c]),We=Object(a.useMemo)((function(){return{toolbar:{searchTooltip:r.a.createElement(Oe.a,{fontSize:12,component:"span"},'[abc] | [efg] = "abc" OR "efg"',r.a.createElement("br",null),'\'[abc] = EXACTLY "abc"',r.a.createElement("br",null),'![abc] = NOT "abc"',r.a.createElement("br",null),'^[abc] = STARTS WITH "abc"',r.a.createElement("br",null),'!^[abc] = DOES NOT START WITH "abc"',r.a.createElement("br",null),'[abc]$ = ENDS WITH "abc"',r.a.createElement("br",null),'![abc]$ = DOES NOT END WITH "abc"'),nRowsSelected:"Reconcile {0} Entry(s)"}}}),[]),ze=Object(a.useMemo)((function(){return{rowStyle:function(e){return{color:e.type===R.Credit?_e.a[900]:Ae.a[900]}},maxBodyHeight:"calc(100vh - 53px - 64px)",headerStyle:{position:"sticky",top:0},pageSize:25,pageSizeOptions:[25,50,100],showTitle:!!u,selection:c===ia.Reconcile,showSelectAllCheckbox:!1}}),[u,c]),qe=Object(a.useMemo)((function(){return c===ia.Reconcile?[{icon:function(e){return r.a.createElement(ne.a,e)},tooltip:"Reconcile Selected",position:"toolbarOnSelect",iconProps:{color:"secondary",fontSize:"large"},onClick:function(){var e=Object(N.a)(J.a.mark((function e(n,t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=Object(N.a)(J.a.mark((function e(n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.reconciled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"JournalEntryRefund"!==n.__typename){e.next=8;break}return e.next=6,Ie({variables:{id:n.id}});case 6:e.next=10;break;case 8:return e.next=10,Se({variables:{id:n.id}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}]:[function(e){var n="JournalEntryRefund"===e.__typename;return{icon:te.a,tooltip:"Delete ".concat(n?"Refund":"Entry"),onClick:function(){var e=Object(N.a)(J.a.mark((function e(n,t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=Object(N.a)(J.a.mark((function e(n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.deleted){e.next=4;break}return e.abrupt("return");case 4:"JournalEntryRefund"===n.__typename?be(n.id):T(n.id);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}},function(e){var n="JournalEntryRefund"===e.__typename;return{icon:ce.a,tooltip:"Update ".concat(n?"Refund":"Entry"),onClick:function(e,t){n?(le(!0),de({entryId:t.refunds,refundId:t.id})):(E(!0),g(t.id))}}},function(e){if("JournalEntryRefund"===e.__typename)return null;var n=e.type===R.Credit;return{icon:function(e){return n?r.a.createElement(Ce.d,e):r.a.createElement(Ce.c,e)},tooltip:n?"Give Refund":"Add Refund",iconProps:{style:{color:n?Ae.a[900]:_e.a[900]}},onClick:function(e,n){k(!0),L(n.id)}}},{icon:function(e){return r.a.createElement(ae.a,e)},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Entry",isFreeAction:!0,onClick:function(){m(!0)}}]}),[c,Ie,Se,be,T]),Ye=Object(a.useMemo)((function(){return{Body:Ne?function(e){return r.a.createElement(je.a,e,r.a.createElement(he.a,null,r.a.createElement(ge.a,{colSpan:Je.length+(Array.isArray(qe)&&qe.length>0?1:0),align:"left"},r.a.createElement(Re.a,{align:"center",color:"error",variant:"h4"},"Error Loading Entries"),r.a.createElement(Re.a,{variant:"body1"},Ne.message))))}:function(e){return r.a.createElement(z.MTableBody,e)}}}),[Ne,Je,qe]),Ge=(null===$e||void 0===$e?void 0:$e.journalEntries)||[],He=Object(a.useMemo)((function(){var e=c===ia.Reconcile?[function(e){return!e.reconciled&&!e.deleted}]:[function(e){return!e.deleted}];return Ge.reduce((function(n,t){var a=!0,r=!1,l=void 0;try{for(var o,i=function(){var t=o.value;e.every((function(e){return e(t)}))&&n.push(t)},u=fa(t)[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)i()}catch(c){r=!0,l=c}finally{try{a||null==u.return||u.return()}finally{if(r)throw l}}return n}),[]).sort((function(e,n){return new Date(n.date).getTime()-new Date(e.date).getTime()}))}),[Ge,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{icons:ma,isLoading:Ve||Te||De,columns:Je,data:He,options:ze,localization:We,actions:qe,components:Ye,title:null!==u&&void 0!==u?u:void 0}),r.a.createElement(Yt,{deptId:o,open:p,onClose:f}),r.a.createElement(ta,{entryId:h,open:y,onClose:_,onExited:A}),r.a.createElement(la,{entryId:S,onClose:x}),r.a.createElement(nt,{entryId:P,open:D,onClose:V,onExited:W}),r.a.createElement(ct,{entryId:null!==(n=null===ue||void 0===ue?void 0:ue.entryId)&&void 0!==n?n:null,refundId:null!==(t=null===ue||void 0===ue?void 0:ue.refundId)&&void 0!==t?t:null,open:re,onClose:se,onExited:pe}),r.a.createElement(ca,{refundId:ve,onClose:ye}))},Oa=t(5609),ja=t(409),ha=t.n(ja),ga=t(411),Ra=t.n(ga),_a=t(413),Aa=t.n(_a),Ca=t(412),Ma=t.n(Ca),Sa=t(5606),Ta=t(5608),xa=t(5607),wa=t(162),Ia=t(158);function Da(){var e=Object(b.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return Da=function(){return e},e}function ka(){var e=Object(b.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return ka=function(){return e},e}function Ua(){var e=Object(b.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return Ua=function(){return e},e}function Fa(){var e=Object(b.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        num\n        den\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n"]);return Fa=function(){return e},e}function Pa(){var e=Object(b.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return Pa=function(){return e},e}var La=E()(Pa()),Na=E()(Fa()),$a=E()(Ua(),La,Na);E()(ka(),Na),E()(Da(),Na);function Ba(){var e=Object(b.a)(["\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ba=function(){return e},e}function Va(){var e=Object(b.a)(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Va=function(){return e},e}var Ja=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?_e.a[n]:e<.9?wa.a[n]:Ae.a[n]},Wa=function(e){var n=e.spentPercentage,t=e.height;return r.a.createElement(Oe.a,{height:t,bgcolor:Ja(n),display:"flex",justifyContent:"flex-start"},r.a.createElement(Oe.a,{height:"100%",width:"".concat(100*n,"%"),bgcolor:Ia.a[400]}))},za=(E()(Va(),In),E()(Ba(),Na)),qa=function(e){var n,t=e.deptId,l=Object(a.useState)(!1),o=Object(B.a)(l,2),i=o[0],u=o[1],c=Object(a.useCallback)((function(){u(!1)}),[u]),s=Object(a.useMemo)((function(){return{deptId:t,where:{department:{eq:t},deleted:!1}}}),[t]),p=Object(Y.c)($a,{variables:s,fetchPolicy:"cache-and-network"}),m=p.loading,f=p.error,v=p.data,b=p.subscribeToMore,y=m&&!(null===v||void 0===v?void 0:v.journalEntries);Object(a.useEffect)((function(){return b({document:za,updateQuery:function(e,n){var a=n.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(t&&r.department.id!==t&&l.every((function(e){return e.id!==t}))){var o=e.journalEntries.filter((function(e){return e.id!==r.id}));return o.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:o})}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(Object($.a)(e.journalEntries))})}})}),[t,b]);var E=Object(a.useMemo)((function(){return((null===v||void 0===v?void 0:v.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[v]),O=(null===v||void 0===v||null===(n=v.department)||void 0===n?void 0:n.name)||"";Object(a.useEffect)((function(){document.title=O}),[O]);var j=(null===v||void 0===v?void 0:v.department)||null,h=Object(a.useMemo)((function(){var e=new Map,n=0;if(j){var t=function(){if(j.budget){var e=j.budget.amount;return e.num/e.den}return null}();e.set(j.id,{name:j.name,spent:0,budget:t});var a=!0,r=!1,l=void 0;try{for(var o,i=j.descendants[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;n+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(w){r=!0,l=w}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}}var p=0,m=!0,f=!1,v=void 0;try{for(var b,y=E[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var O=b.value;if(!O.deleted){var h=e.get(O.department.id),g=O.total.num/O.total.den,_=!0,A=!1,C=void 0;try{for(var M,S=O.refunds[Symbol.iterator]();!(_=(M=S.next()).done);_=!0){var T=M.value;T.deleted||(g-=T.total.num/T.total.den)}}catch(w){A=!0,C=w}finally{try{_||null==S.return||S.return()}finally{if(A)throw C}}O.type===R.Credit?(p-=g,h.spent-=g):(p+=g,h.spent+=g)}}}catch(w){f=!0,v=w}finally{try{m||null==y.return||y.return()}finally{if(f)throw v}}var x=function(){if(null===j||void 0===j?void 0:j.budget){var e,t=(null===j||void 0===j||null===(e=j.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return t.num/t.den}return n}();return{totalRemaining:H()(x-p).format("$0,0.00"),budget:H()(x).format("$0,0.00"),spentToBudgetRatio:p/x,deptReport:e}}),[E,j]),g=h.totalRemaining,_=h.budget,A=h.spentToBudgetRatio,C=h.deptReport,M=Object(a.useMemo)((function(){var e=[],n=!0,t=!1,a=void 0;try{for(var l,o=function(){var n=Object(B.a)(l.value,2),t=n[0],a=n[1],o=a.budget,i=a.spent,u=a.name;if(t===(null===j||void 0===j?void 0:j.id))return"continue";var c=r.a.createElement(Ve.a,{key:t,item:!0,xs:12,md:4,lg:3},r.a.createElement(Sa.a,null,r.a.createElement(Ta.a,{titleTypographyProps:{noWrap:!0},title:u}),r.a.createElement(xa.a,null,function(){if(null===o)return r.a.createElement(Oe.a,{color:i>0?Ae.a[900]:_e.a[900],clone:!0},r.a.createElement(Re.a,{variant:"h6"},"Spent: ".concat(H()(Math.abs(i)).format("$0,0.00"))));var e=o-i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{color:Ja(i/o,900),clone:!0},r.a.createElement(Re.a,{variant:"h6"},"".concat(H()(e).format("$0,0.00")," Remaining"))),r.a.createElement(Re.a,{variant:"body1"},"of ".concat(H()(o).format("$0,0.00"))),r.a.createElement(Wa,{spentPercentage:i/o,height:5}))}())));e.push(c)},i=C[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)o()}catch(u){t=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(t)throw a}}return e}),[C,j]),S=Object(a.useCallback)((function(e){return u(!0)}),[u]);return y?r.a.createElement("p",null,"Loading..."):f?(console.error(f),r.a.createElement("p",null,f.message)):r.a.createElement(Oe.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(Oa.a,null,r.a.createElement(Oe.a,{padding:8},r.a.createElement(Ve.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(Ve.a,{item:!0},r.a.createElement(We.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(ha.a,null),children:"New Entry",onClick:S})),r.a.createElement(Ve.a,{item:!0},r.a.createElement(We.a,{component:d.b,to:"/journal/".concat(t,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Ra.a,null),children:"Reconcile"})),r.a.createElement(Ve.a,{item:!0},r.a.createElement(We.a,{variant:"contained",startIcon:r.a.createElement(Ma.a,null),children:"Reports"})),r.a.createElement(Ve.a,{item:!0},r.a.createElement(We.a,{component:d.b,to:"/journal/".concat(t),variant:"contained",startIcon:r.a.createElement(Aa.a,null),children:"Journal"})))),r.a.createElement(Oe.a,{flexGrow:1,overflow:"auto"},r.a.createElement(Ve.a,{justify:"center",container:!0,spacing:2},r.a.createElement(Ve.a,{item:!0,xs:12},r.a.createElement(Re.a,{align:"center",variant:"h3"},O),r.a.createElement(Oe.a,{color:Ja(A)},r.a.createElement(Re.a,{align:"center",variant:"h4"},"".concat(g," Remaining"))),r.a.createElement(Re.a,{align:"center",variant:"subtitle1"},"of ".concat(_)),r.a.createElement(Wa,{spentPercentage:A,height:10})),M)),r.a.createElement(Yt,{deptId:t,open:i,onClose:c})))},Ya=t(296),Ga=t(364),Ha=t(298);function Ka(){var e=Object(b.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return Ka=function(){return e},e}var Xa=E()(Ka()),Qa=function(e){var n=Object(Y.c)(Xa),t=n.loading,l=n.error,o=n.data,i=Object(a.useState)(null),u=Object(B.a)(i,2),c=u[0],s=u[1],p=(null===o||void 0===o?void 0:o.departments)||[],m=Object(a.useMemo)((function(){var e=[],n=new Set,t=!0,a=!1,r=void 0;try{for(var l,o=p[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var i=l.value;"Business"===i.parent.__typename&&e.push(i),i.virtualRoot&&n.add(i.id)}}catch(u){a=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:n}}),[p]),f=m.rootDepts,v=m.virtualRoots,b=Object(a.useMemo)((function(){var e=[];if(c&&v.has(c)){var n=!0,t=!1,a=void 0;try{for(var r,l=p[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.id===c&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}}return e}),[v,c,p]);Object(a.useEffect)((function(){document.title="Select Department"}));var y=Object(a.useCallback)((function(e){var n;s((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||null)}),[s]);if(t)return r.a.createElement("p",null,"Loading...");if(l)return r.a.createElement("p",null,l.message);var E=b.length>0;return r.a.createElement(Oe.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(Oa.a,null,r.a.createElement(Oe.a,{padding:4,clone:!0},r.a.createElement(Re.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(Oe.a,{minWidth:"250px !important",clone:!0},r.a.createElement(Lt.a,{variant:"filled"},r.a.createElement(Ya.a,null,"Department"),r.a.createElement(Ha.a,{value:c,onChange:y,autoWidth:!0},f.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete n.component,delete n.to),r.a.createElement(Ga.a,n)}))))),E&&r.a.createElement(Oe.a,{pt:2},r.a.createElement(Oe.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(Lt.a,{variant:"filled"},r.a.createElement(Ya.a,null,"Sub Department"),r.a.createElement(Ha.a,{autoWidth:!0},b.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(Ga.a,n)}))))))))};function Za(){var e=Object(b.a)(["\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n"]);return Za=function(){return e},e}var er,nr=function(e){var n=Object(L.f)().id;return n?r.a.createElement(qa,{deptId:n}):r.a.createElement("div",null,"Error: No Dept ID!")},tr=E()(Za()),ar=function(e){var n,t=Object(L.f)().id,a=Object(Y.c)(tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?l.department.name:void 0;return r.a.createElement(Ea,{mode:ia.View,deptId:t,journalTitle:o})},rr=function(e){var n,t=Object(L.f)().id,a=Object(Y.c)(tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?"Reconcile ".concat(l.department.name):"Reconcile";return r.a.createElement(Ea,{mode:ia.Reconcile,deptId:t,journalTitle:o})},lr=function(e){return r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/",component:Qa}),r.a.createElement(L.a,{exact:!0,path:"/department/:id",component:nr}),r.a.createElement(L.a,{exact:!0,path:"/journal",component:Ea}),r.a.createElement(L.a,{exact:!0,path:"/journal/:id",component:ar}),r.a.createElement(L.a,{exact:!0,path:"/journal/:id/reconcile",component:rr}))},or=t(415),ir=t(46),ur=t(192),cr=t.n(ur),dr="journalEntryUpsert/CREATE",sr="journalEntryUpsert/CANCEL",pr="journalEntryUpsert/CLEAR",mr="journalEntryUpsert/SET_SUBMIT_ERROR",fr="journalEntryUpsert/CLEAR_SUBMIT_ERROR",vr="journalEntryUpsert/SET_DATE_INPUT",br="journalEntryUpsert/CLEAR_DATE_INPUT",yr="journalEntryUpsert/SET_DATE_VALUE",Er="journalEntryUpsert/CLEAR_DATE_VALUE",Or="journalEntryUpsert/SET_DATE_ERROR",jr="journalEntryUpsert/CLEAR_DATE_ERROR",hr="journalEntryUpsert/SET_DEPT_INPUT",gr="journalEntryUpsert/CLEAR_DEPT_INPUT",Rr="journalEntryUpsert/SET_DEPT_VALUE",_r="journalEntryUpsert/CLEAR_DEPT_VALUE",Ar="journalEntryUpsert/SET_DEPT_ERROR",Cr="journalEntryUpsert/CLEAR_DEPT_ERROR",Mr="journalEntryUpsert/SET_DEPT_OPEN",Sr="journalEntryUpsert/SET_TYPE_VALUE",Tr="journalEntryUpsert/SET_TYPE_ERROR",xr="journalEntryUpsert/CLEAR_TYPE_ERROR",wr="journalEntryUpsert/SET_CAT_INPUT",Ir="journalEntryUpsert/CLEAR_CAT_INPUT",Dr="journalEntryUpsert/SET_CAT_VALUE",kr="journalEntryUpsert/CLEAR_CAT_VALUE",Ur="journalEntryUpsert/SET_CAT_ERROR",Fr="journalEntryUpsert/CLEAR_CAT_ERROR",Pr="journalEntryUpsert/SET_CAT_OPEN",Lr="journalEntryUpsert/SET_SRC_TYPE",Nr="journalEntryUpsert/SET_SRC_INPUT",$r="journalEntryUpsert/CLEAR_SRC_INPUT",Br="journalEntryUpsert/SET_SRC_VALUE",Vr="journalEntryUpsert/CLEAR_SRC_VALUE",Jr="journalEntryUpsert/SET_SRC_ERROR",Wr="journalEntryUpsert/CLEAR_SRC_ERROR",zr="journalEntryUpsert/SET_SRC_OPEN",qr="journalEntryUpsert/SET_PAY_METHOD_VALUE",Yr="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Gr="journalEntryUpsert/SET_PAY_METHOD_ERROR",Hr="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Kr="journalEntryUpsert/SET_DSCRPT_VALUE",Xr="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Qr="journalEntryUpsert/SET_TOTAL_INPUT",Zr="journalEntryUpsert/CLEAR_TOTAL_INPUT",el="journalEntryUpsert/SET_TOTAL_VALUE",nl="journalEntryUpsert/CLEAR_TOTAL_VALUE",tl="journalEntryUpsert/SET_TOTAL_ERROR",al="journalEntryUpsert/CLEAR_TOTAL_ERROR",rl="journalEntryUpsert/SET_RECONCILED_VALUE",ll="journalEntryUpsert/CLEAR_RECONCILED_VALUE",ol=t(65),il=function e(n){Object(ol.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=n},ul=function(e,n,t,a,r){for(var l=0,o=e.length;l<o;l++){var i=e[l];if(i[a]===t){var u=r(i,n);return u!==i?[].concat(Object($.a)(e.slice(0,l)),[u],Object($.a)(e.slice(l+1))):e}}return e},cl=Object(ir.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===dr?n.payload.entryId||null:e},type:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Sr:return n.value===t.payload.type?n:Object(W.a)({},n,{value:t.payload.type});case Tr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case xr:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},date:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case vr:var r=a.payload.input.trimStart();return t.input===r?t:Object(W.a)({},t,{input:r});case br:return""===t.input?t:Object(W.a)({},t,{input:""});case yr:return(null===(e=t.value)||void 0===e?void 0:e.getTime())===a.payload.value.getTime()?t:Object(W.a)({},t,{value:a.payload.value});case Er:return t.value?Object(W.a)({},t,{value:null}):t;case Or:return(null===(n=t.error)||void 0===n?void 0:n.message)===a.payload.error.message?t:Object(W.a)({},t,{error:a.payload.error});case jr:return t.error?Object(W.a)({},t,{error:null}):t;default:return t}},department:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dr:return t.payload.fromDept?Object(W.a)({},n,{value:t.payload.fromDept}):n;case hr:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case gr:return""===n.input?n:Object(W.a)({},n,{input:""});case Rr:return n.value===t.payload.value?n:Object(W.a)({},n,{value:t.payload.value});case _r:return n.value?Object(W.a)({},n,{value:null}):n;case Ar:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Cr:return n.error?Object(W.a)({},n,{error:null}):n;case Mr:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},category:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wr:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case Ir:return""===n.input?n:Object(W.a)({},n,{input:""});case Dr:return n.value===t.payload.value?n:Object(W.a)({},n,{value:t.payload.value});case kr:return n.value?Object(W.a)({},n,{value:null}):n;case Ur:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Fr:return n.error?Object(W.a)({},n,{error:null}):n;case Pr:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===Lr?n.payload.srcType:e},source:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case $r:return""===n.input?n:Object(W.a)({},n,{input:""});case Br:return cr()(n.value,t.payload.value)?n:Object(W.a)({},n,{value:t.payload.value});case Vr:return n.value?Object(W.a)({},n,{value:null}):n;case Jr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Wr:return n.error?Object(W.a)({},n,{error:null}):n;case zr:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},paymentMethod:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qr:return t.payload.value&&n.value!==t.payload.value?Object(W.a)({},n,{value:t.payload.value}):n;case Yr:return null===n.value?n:Object(W.a)({},n,{value:null});case Gr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Hr:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Kr:var t=n.payload.value.trimStart();return t&&e.value!==t?Object(W.a)({},e,{value:t}):e;case Xr:return null===e.value?e:Object(W.a)({},e,{value:null});default:return e}},total:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qr:return n.input===t.payload.input?n:Object(W.a)({},n,{input:t.payload.input});case Zr:return""===n.input?n:Object(W.a)({},n,{input:""});case el:return cr()(n.value,t.payload.value)?n:Object(W.a)({},n,{value:t.payload.value});case nl:return null===n.value?n:Object(W.a)({},n,{value:null});case tl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case al:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(!1),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case rl:return e.value===n.payload.value?e:Object(W.a)({},e,{value:n.payload.value});case ll:return!1===e.value?e:Object(W.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(er||(er={}));var dl=Object(ir.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===dr?n.payload.upsertId:e},values:cl,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===dr&&n.payload.fromDept?n.payload.fromDept:e},submit:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:er.NotSubmitted,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journalEntryUpsert/SUBMIT":return n.status===t.payload.status?n:Object(W.a)({},n,{status:t.payload.status});case mr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case fr:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}}}),sl=t(101),pl="tableCells/SET_INDEX",ml="tableCells/SET_DEFAULT_INDEX",fl="tableCells/SET_NAME",vl="tableCells/SET_DEFAULT_NAME",bl="tableCells/SET_WIDTH",yl="tableCells/SET_DEFAULT_WIDTH",El="tableCells/COLLAPSE",Ol="tableCells/EXPAND",jl="tableCells/HIDE",hl="tableCells/SHOW",gl="tableCells/RESTORE_DEFAULTS",Rl=function e(n){var t,a;Object(ol.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(W.a)({},n),this.rowId=n.rowId,this.id=n.id,this.index=n.index,this.name=n.name,this.width=n.width,this.collapsed=null!==(t=null===n||void 0===n?void 0:n.collapsed)&&void 0!==t&&t,this.hidden=null!==(a=null===n||void 0===n?void 0:n.hidden)&&void 0!==a&&a},_l=function(e,n){switch(n.type){case pl:return e.index===n.payload.index?e:Object(W.a)({},e,{index:n.payload.index});case ml:return e.index===e.ini.index?e:Object(W.a)({},e,{index:e.ini.index});case fl:return e.name===n.payload.name?e:Object(W.a)({},e,{name:n.payload.name});case vl:return e.name===e.ini.name?e:Object(W.a)({},e,{name:e.ini.name});case bl:return e.width===n.payload.width?e:Object(W.a)({},e,{width:n.payload.width});case yl:return e.width===e.ini.width?e:Object(W.a)({},e,{width:e.ini.width});case El:return!0===e.collapsed?e:Object(W.a)({},e,{collapsed:!0});case Ol:return!1===e.collapsed?e:Object(W.a)({},e,{collapsed:!1});case jl:return!0===e.hidden?e:Object(W.a)({},e,{hidden:!0});case hl:return!1===e.hidden?e:Object(W.a)({},e,{hidden:!1});case gl:var t=new Rl(e.ini);return cr()(e,t)?e:t;default:return e}},Al=J.a.mark((function e(n){var t,a,r,l,o,i,u;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=new Map,r=0,e.t0=J.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(l=e.t1.value,!n.hasOwnProperty(l)){e.next=24;break}if(o=n[l],i=o.index,null!==(u=void 0===i?null:i)){e.next=13;break}return e.abrupt("continue",4);case 13:if(r!==u){e.next=23;break}return e.next=16,o;case 16:if(!a.has(++r)){e.next=21;break}return e.next=19,a.get(r);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?a.set(u,o):t.push(o);case 24:e.next=4;break;case 26:return e.abrupt("return",t);case 27:case"end":return e.stop()}}),e)})),Cl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":return n.payload.id in e?e:Object(W.a)({},e,Object(sl.a)({},n.payload.id,new Rl(n.payload)));case pl:var t=e[n.payload.id].index,a=n.payload.index;if(t===a)return e;if(t<a){var r={},l=!0,o=!1,i=void 0;try{for(var u,c=Al(e)[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;if(d.index>a)break;d.index<t||(d.index===t?r[d.id]=_l(d,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:a})})):r[d.id]=_l(d,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:d.index-1})})))}}catch(M){o=!0,i=M}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}return Object(W.a)({},e,{},r)}var s={},p=!0,m=!1,f=void 0;try{for(var v,b=Al(e)[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=v.value;if(y.index>t)break;y.index<a||(y.index===t?s[y.id]=_l(y,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:a})})):s[y.id]=_l(y,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:y.index+1})})))}}catch(M){m=!0,f=M}finally{try{p||null==b.return||b.return()}finally{if(m)throw f}}return Object(W.a)({},e,{},s);case ml:var E={},O=!0,j=!1,h=void 0;try{for(var g,R=Al(e)[Symbol.iterator]();!(O=(g=R.next()).done);O=!0){var _=g.value;E[_.id]=_l(_,n)}}catch(M){j=!0,h=M}finally{try{O||null==R.return||R.return()}finally{if(j)throw h}}return Object(W.a)({},e,{},E);case fl:case vl:case bl:case yl:case El:case Ol:case jl:case hl:case gl:if(n.payload.id in e){var A=e[n.payload.id],C=_l(A,n);return C===A?e:Object(W.a)({},e,Object(sl.a)({},n.payload.id,C))}return e;default:return e}},Ml="journal/OPEN_PAB",Sl="journal/CLOSE_PAB",Tl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ml:return!0===e.open?e:Object(W.a)({},e,{open:!0});case Sl:return!1===e.open?e:Object(W.a)({},e,{open:!1});default:return e}},xl=Object(ir.c)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"journal/CREATE_PAB":return n.payload.pabId in e?e:Object(W.a)({},e,Object(sl.a)({},n.payload.pabId,Tl(void 0,n)));case Ml:case Sl:if(n.payload.pabId in e){var t=n.payload.pabId,a=e[t],r=Tl(a,n);return a===r?e:Object(W.a)({},e,Object(sl.a)({},t,r))}return e;default:return e}}}),wl=Object(ir.c)({journal:xl,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case dr:return[].concat(Object($.a)(e),[dl(void 0,n)]);case sr:case pr:for(var t=n.payload.upsertId,a=0,r=e.length;a<r;a++)if(e[a].id===t)return[].concat(Object($.a)(e.slice(0,a)),Object($.a)(e.slice(a+1)));return e;case Sr:case Tr:case xr:case vr:case br:case yr:case Er:case Or:case jr:case hr:case Rr:case Ar:case Mr:case gr:case _r:case Cr:case wr:case Ir:case Dr:case kr:case Ur:case Fr:case Pr:case Lr:case Nr:case $r:case Br:case Vr:case Jr:case Wr:case zr:case qr:case Yr:case Kr:case Xr:case Qr:case Zr:case el:case nl:case tl:case al:case"journalEntryUpsert/SUBMIT":case mr:case fr:case Gr:case Hr:case rl:case ll:return ul(e,n,n.payload.upsertId,"id",dl);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":var t=n.payload.rowId;if(t in e){var a=e[t],r=Cl(a,n);return a===r?e:Object(W.a)({},e,Object(sl.a)({},t,r))}return Object(W.a)({},e,Object(sl.a)({},t,Cl(void 0,n)));case pl:case ml:case fl:case vl:case bl:case yl:case El:case Ol:case jl:case hl:case gl:var l=n.payload.rowId;if(l in e){var o=e[l],i=Cl(o,n);return o===i?e:Object(W.a)({},e,Object(sl.a)({},l,i))}return e;default:return e}}}),Il=Object(or.a)({reducer:wl});function Dl(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(i.a,{store:Il},r.a.createElement(u.a,{client:P},r.a.createElement(d.a,null,r.a.createElement(lr,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Dl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5467,1,2]]]);
//# sourceMappingURL=main.96429168.chunk.js.map