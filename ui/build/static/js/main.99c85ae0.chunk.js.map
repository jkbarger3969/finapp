{"version":3,"sources":["apollo/inMemoryCache.ts","apollo/localStateInI.ts","apollo/schema/upsertJournalEntry.gql.ts","apollo/graphTypes.ts","apollo/typeDefs.ts","apollo/resolvers.ts","apollo/link.ts","apollo/apollo.ts","components/Journal/Table/JournalEntries.gql.ts","components/Journal/constants.ts","components/Journal/Upsert/Refunds/submitAdd.ts","formik/utils.ts","components/Journal/Upsert/EntryFields/DateEntry.tsx","components/Journal/Upsert/EntryFields/Description.tsx","components/Journal/Upsert/EntryFields/Total.tsx","utils/transmutations.ts","components/Journal/Upsert/EntryFields/Reconcile.tsx","components/Journal/Upsert/upsertEntry.gql.ts","components/Journal/Upsert/EntryFields/PaymentMethod.tsx","components/Utils/Overlay.tsx","components/Utils/OverlayLoading.tsx","components/Journal/Upsert/Refunds/refunds.gql.ts","components/Journal/Upsert/Refunds/AddRefund.tsx","components/Journal/Upsert/Refunds/submitUpdate.ts","components/Journal/Upsert/Refunds/UpdateRefund.tsx","components/Journal/Upsert/Entries/submitAdd.ts","components/Journal/Upsert/EntryFields/Category.tsx","components/Journal/Upsert/EntryFields/Department.tsx","components/Journal/Upsert/EntryFields/Source.tsx","components/Journal/Upsert/EntryFields/Type.tsx","components/Journal/Upsert/Entries/AddEntry.tsx","components/Journal/Upsert/Entries/submitUpdate.ts","components/Journal/Upsert/Entries/UpdateEntry.tsx","components/Journal/Upsert/Entries/DeleteEntry.tsx","components/Journal/Upsert/Refunds/DeleteRefund.tsx","components/Journal/MaterialTable/Journal.tsx","components/Dashboard/ReportData.gql.ts","components/Dashboard/Dashboard.tsx","components/TopNav.tsx","Routes.tsx","redux/reducers/journalEntryUpserts.ts","redux/actionTypes/journalEntryUpsert.ts","redux/reducers/utils.ts","redux/actionTypes/tableRow.ts","redux/reducers/tableRows.ts","redux/actionTypes/journal.ts","redux/reducers/journal.ts","redux/reducers/root.ts","redux/store.ts","App.tsx","serviceWorker.js","index.js"],"names":["fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","inMemoryCache","InMemoryCache","addTypename","writeData","data","paginate","skip","limit","sortBy","upsertTransactionLocal","lc_journalEntryUpserts","gql","CacheControlScope","FilterType","JournalEntrySourceType","JournalEntryType","Lc_JournalEntryUpsertSubmitStatus","Lc_JournalEntryUpsertType","SortDirection","resolvers","batchHttpLink","BatchHttpLink","uri","credentials","wsLink","WebSocketLink","window","location","host","options","reconnect","link","ApolloLink","from","onError","graphQLErrors","networkError","forEach","message","locations","path","console","error","log","split","query","def","getMainDefinition","kind","operation","ApolloClient","cache","typeDefs","JOURNAL_ENTRY_REFUND","JOURNAL_ENTRY_FRAGMENT","JOURNAL_ENTRIES","CHECK_ID","FormikStatusType","ADD_REFUND","submitAdd","client","id","values","a","payMethod","paymentMethod","value","length","paymentMethodAdd","parent","refId","name","active","variables","fields","date","description","trim","total","reconciled","mutate","mutation","createValueTransmutator","transMutator","inputValue","rest","useFormikStatus","useFormikContext","setStatusNative","setStatus","status","useCallback","args","Object","keys","some","key","inputProps","inputMode","keyboardButtonProps","tabIndex","dateValueTransmutator","isValid","formatISO","DateField","props","variant","inputVariant","autoFocus","disabled","maxDate","Date","minDate","isSubmitting","validate","dateStr","parseISO","format","useField","field","meta","helpers","touched","setValue","setTouched","initialInputValue","initialValue","initialFocusedDate","useMemo","InputProps","calOpen","useRef","onBlur","setTimeout","current","onOpen","onClose","onChange","min","formikStatus","dataPickerProps","type","FATAL_ERROR","helperText","undefined","animateYearScrolling","disableToolbar","disableFuture","margin","label","autoOk","placeholder","KeyboardButtonProps","utils","DateFnsUtils","Description","textFieldProps","event","target","trimLeft","TextField","step","totalValueTransmutator","number","fractionDigits","Fraction","Number","parseFloat","toFixed","num","n","den","d","getRational","Total","maxTotal","MAX_SAFE_INTEGER","minTotal","minTotalProp","Math","max","isNaN","numeral","startAdornment","InputAdornment","position","required","Reconcile","customProps","FormControlLabel","control","Checkbox","DEPT_ENTRY_OPT_FRAGMENT","CAT_ENTRY_OPT_FRAGMENT","SRC_ENTRY_PERSON_OPT_FRAGMENT","SRC_ENTRY_DEPT_OPT_FRAGMENT","SRC_ENTRY_BIZ_OPT_FRAGMENT","PAY_METHOD_ENTRY_OPT_FRAGMENT","PAY_METHOD_ENTRY_OPTS","payMethodValue","numValues","curValue","match","join","getOptionLabel","opt","renderTags","getTagProps","lastIndex","map","index","endAdornment","isLastIndex","isString","ChevronRight","fontSize","Box","display","flexDirection","alignItems","justifyContent","Chip","color","size","PaymentMethod","useState","hasFocus","setHasFocus","onBlurField","where","hasParent","eq","setFormikStatus","msg","useQuery","loading","gqlError","paymentMethods","hasOptions","freeSolo","disableTextInput","renderInput","params","onFocus","persist","onInputChange","reason","trimStart","autoCompleteProps","multiple","open","autoSelect","Autocomplete","Overlay","theme","useTheme","opacity","boxProps","width","top","bottom","bgcolor","fade","palette","background","paper","OverlayLoading","children","CircularProgress","JOURNAL_FRAGMENT","GET_ENTRY_REFUND_INFO","NULLISH","Symbol","AddRefundDialog","entryId","onExitedCb","onExited","handleSubmit","resetForm","journalEntry","refunds","totalRefunds","reduce","deleted","ERROR","generalError","fatalError","journalEntryType","title","Credit","Dialog","disableBackdropClick","disableEscapeKeyDown","fullWidth","maxWidth","PaperProps","component","onSubmit","DialogTitle","style","main","zIndex","padding","DialogContentText","DialogContent","dividers","Grid","container","spacing","item","lg","sm","xs","DateEntry","justify","md","DialogActions","Button","startIcon","Add","Cancel","onClick","AddRefund","initialValues","useApolloClient","formikHelpers","initialStatus","enableReinitialize","UPDATE_REFUND","submitUpdate","iniValues","isEqual","iniPayMethod","slice","reverse","paymentMethodUpdate","UPDATE_REFUND_INI_STATE","UpdateRefundDialog","refundId","UpdateRefund","journalEntryRefund","ancestors","sort","b","push","ADD_ENTRY","srcType","source","src","Person","parsedName","parseName","sourceType","businessAdd","personAdd","first","firstName","last","lastName","Business","department","category","CAT_OPTS_QUERY","dept","Category","formikContext","disabledFromProps","entryType","catValue","onCompleted","validateField","catOpts","transmutationVal","useEffect","forcePopupIcon","DEPT_OPTS_QUERY","Department","fromParent","depts","deptOpts","setInputValue","__typename","deptValue","idDeptMap","Map","idDepts","has","parentDept","get","unshift","deptId","filter","Array","isArray","len","JSON","stringify","SRC_ENTRY_OPTS_QUERY","isFreeSoloOpt","personName","filterOptions","regex","RegExp","test","srcValue","Source","searchedName","isBiz","businesses","bizOpt","departments","deptOpt","set","people","srcValueIndex","formattedSrcStrs","str","namecase","formattedStr","charAt","toUpperCase","substring","toLowerCase","Type","toggleButtonGroupProps","exclusive","Promise","resolve","pl","clone","ToggleButtonGroup","ToggleButton","Tooltip","arrow","placement","Debit","FormControl","labelPlacement","FormHelperText","gridEntryResponsiveProps","DEPT_INI_VALUE","AddEntryDialog","submitForm","onClickAdd","onClickAddAndNew","preventDefault","Fragment","Queue","AddEntry","UPDATE_ENTRY","iniSrcType","iniSrc","UPDATE_ENTRY_INI_STATE","MAX_DATE","UpdateEntryDialog","UpdateEntry","ancestorDeptQueue","ancestor","bizAncestor","ancestorDepts","indexOf","DELETE_ENTRY","DeleteEntry","useMutation","deleteEntry","hasError","onDelete","then","Delete","JournalMode","DELETE_REFUND","DeleteRefund","deleteRefund","tableIcons","forwardRef","ref","AddBox","Check","Clear","DeleteOutline","DetailPanel","Edit","Export","SaveAlt","Filter","FilterList","FirstPage","LastPage","NextPage","PreviousPage","ChevronLeft","ResetSearch","Search","SortArrow","ArrowDownward","ThirdStateCheck","Remove","ViewColumn","entriesGen","entry","refund","ON_ENTRY_UPSERT","RECONCILE_ENTRY","RECONCILE_REFUND","Journal","journalTitle","mode","addEntryOpen","setAddEntryOpen","addEntryOnClose","updateEntryOpen","setUpdateEntryOpen","updateEntry","setUpdateEntry","updateEntryOnClose","updateEntryOnExited","setDeleteEntry","deleteEntryOnClose","addRefundOpen","setAddRefundOpen","addRefundToEntry","setAddRefundToEntry","addRefundOnClose","addRefundOnExited","updateRefundOpen","setUpdateRefundOpen","updateRefund","setUpdateRefund","updateRefundOnClose","updateRefundOnExited","setDeleteRefund","deleteRefundOnClose","reconcileEntry","reconcilingEntry","reconcileRefund","reconcilingRefund","fetchPolicy","subscribeToMore","isLoading","journalEntries","document","updateQuery","prev","subscriptionData","upsertEntry","journalEntryUpserted","every","journalEntriesFiltered","assign","columns","render","Done","customFilterAndSearch","rowData","momentDate","moment","search","toString","bizName","deptName","Fuse","threshold","useExtendedSearch","hidden","filtering","sorting","searchable","capitalCase","localization","toolbar","searchTooltip","nRowsSelected","rowStyle","green","red","maxBodyHeight","headerStyle","pageSize","pageSizeOptions","showTitle","selection","showSelectAllCheckbox","actions","icon","CheckCircle","tooltip","iconProps","all","isRefund","DeleteIcon","isCredit","AddCircle","isFreeAction","components","Body","TableBody","TableRow","colSpan","align","Typography","entries","filters","getTime","icons","GET_REPORT_DATA_DEPT_FRAGMENT","GET_REPORT_DATA_ENTRY_FRAGMENT","GET_REPORT_DATA","colorMeter","percentSpent","shade","orange","BudgetMeter","spentPercentage","height","grey","Dashboard","deptReport","subDeptBudgetAg","budget","amount","spent","descendants","subDept","subBudgetDec","deptReportObj","entryTotal","budgetDec","totalRemaining","spentToBudgetRatio","subDeptCards","card","Card","CardHeader","titleTypographyProps","noWrap","CardContent","abs","onClickAddEntry","overflow","Container","Link","to","flexGrow","DEPTS_FOR_NAV","TopNav","rootDepts","virtualRoots","Set","virtualRoot","add","subDepts","showSubDepts","minWidth","InputLabel","Select","autoWidth","MenuItem","pt","SubmitStatus","DashBoardRender","useParams","DEPARTMENT_NAME","JournalViewRender","View","JournalReconcileRender","Routes","exact","CREATE","CANCEL","CLEAR","SET_SUBMIT_ERROR","CLEAR_SUBMIT_ERROR","SET_DATE_INPUT","CLEAR_DATE_INPUT","SET_DATE_VALUE","CLEAR_DATE_VALUE","SET_DATE_ERROR","CLEAR_DATE_ERROR","SET_DEPT_INPUT","CLEAR_DEPT_INPUT","SET_DEPT_VALUE","CLEAR_DEPT_VALUE","SET_DEPT_ERROR","CLEAR_DEPT_ERROR","SET_DEPT_OPEN","SET_TYPE_VALUE","SET_TYPE_ERROR","CLEAR_TYPE_ERROR","SET_CAT_INPUT","CLEAR_CAT_INPUT","SET_CAT_VALUE","CLEAR_CAT_VALUE","SET_CAT_ERROR","CLEAR_CAT_ERROR","SET_CAT_OPEN","SET_SRC_TYPE","SET_SRC_INPUT","CLEAR_SRC_INPUT","SET_SRC_VALUE","CLEAR_SRC_VALUE","SET_SRC_ERROR","CLEAR_SRC_ERROR","SET_SRC_OPEN","SET_PAY_METHOD_VALUE","CLEAR_PAY_METHOD_VALUE","SET_PAY_METHOD_ERROR","CLEAR_PAY_METHOD_ERROR","SET_DSCRPT_VALUE","CLEAR_DSCRPT_VALUE","SET_TOTAL_INPUT","CLEAR_TOTAL_INPUT","SET_TOTAL_VALUE","CLEAR_TOTAL_VALUE","SET_TOTAL_ERROR","CLEAR_TOTAL_ERROR","SET_RECONCILED_VALUE","CLEAR_RECONCILED_VALUE","InputValue","nullValue","input","this","reduceOneById","state","action","idKey","reducer","i","newEntry","combineReducers","payload","fromDept","journalEntryUpsert","upsertId","submit","NotSubmitted","SET_INDEX","SET_DEFAULT_INDEX","SET_NAME","SET_DEFAULT_NAME","SET_WIDTH","SET_DEFAULT_WIDTH","COLLAPSE","EXPAND","HIDE","SHOW","RESTORE_DEFAULTS","TableCell","ini","rowId","collapsed","tableCell","defaultState","iterateCellByIndex","row","unIndexedCells","indexedCells","nextIndex","hasOwnProperty","cell","tableRow","curIndex","newIndex","newState","curCell","newCell","OPEN_PAB","CLOSE_PAB","pab","journal","pabs","pabId","curPAB","newPAB","root","journalEntryUpserts","tableRows","curRow","newRow","store","configureStore","App","CssBaseline","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.99c85ae0.chunk.js","sourcesContent":["import { InMemoryCache, IntrospectionFragmentMatcher } \n  from 'apollo-cache-inmemory';\n\nimport localState from './localStateInI';\nimport introspectionQueryResultData from './fragmentTypes.json';\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData\n});\n\nconst inMemoryCache = new InMemoryCache({fragmentMatcher, addTypename:false});\n\ninMemoryCache.writeData({data:{...localState}});\n\nexport default inMemoryCache;","export default {\n  paginate:{\n    skip:0,\n    limit:1000\n  },\n  sortBy:[],\n  upsertTransactionLocal:null,\n  lc_journalEntryUpserts:[]\n};","import gql from 'graphql-tag';\n\nexport default gql`\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n`;","import { GraphQLResolveInfo, GraphQLScalarType, GraphQLScalarTypeConfig } from 'graphql';\nimport { Context } from './types';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type RequireFields<T, K extends keyof T> = { [X in Exclude<keyof T, K>]?: T[X] } & { [P in K]-?: NonNullable<T[P]> };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  /** The `Upload` scalar type represents a file upload. */\n  Upload: any;\n};\n\nexport type Budget = {\n   __typename?: 'Budget';\n  id: Scalars['ID'];\n  amount: Rational;\n  owner: BudgetOwner;\n};\n\nexport type BudgetOwner = Department | Business;\n\nexport type Business = {\n   __typename?: 'Business';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  budget?: Maybe<Budget>;\n  departments: Array<Department>;\n  vendor?: Maybe<Vendor>;\n};\n\nexport type BusinessAddFields = {\n  name: Scalars['String'];\n};\n\nexport type ByIdFilter = {\n  eq?: Maybe<Scalars['ID']>;\n};\n\nexport enum CacheControlScope {\n  Public = 'PUBLIC',\n  Private = 'PRIVATE'\n}\n\nexport type Department = {\n   __typename?: 'Department';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  code?: Maybe<Scalars['String']>;\n  budget?: Maybe<Budget>;\n  business: Business;\n  parent: DepartmentAncestor;\n  ancestors: Array<DepartmentAncestor>;\n  descendants: Array<Department>;\n  virtualRoot?: Maybe<Scalars['Boolean']>;\n};\n\nexport type DepartmentAddFields = {\n  name: Scalars['String'];\n};\n\nexport type DepartmentAncestor = Department | Business;\n\nexport enum FilterType {\n  Include = 'INCLUDE',\n  Exclude = 'EXCLUDE'\n}\n\nexport type JournalEntiresWhereInput = {\n  department?: Maybe<JournalEntriesWhereDepartment>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n  deleted?: Maybe<Scalars['Boolean']>;\n  lastUpdate?: Maybe<JournalEntriesWhereLastUpdate>;\n  lastUpdateRefund?: Maybe<JournalEntriesWhereLastUpdate>;\n  or?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>;\n  and?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>;\n};\n\nexport type JournalEntriesWhereDepartment = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  includeDescendants?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntriesWhereLastUpdate = {\n  gt?: Maybe<Scalars['String']>;\n  lt?: Maybe<Scalars['String']>;\n  gte?: Maybe<Scalars['String']>;\n  lte?: Maybe<Scalars['String']>;\n};\n\nexport type JournalEntry = {\n   __typename?: 'JournalEntry';\n  id: Scalars['ID'];\n  refunds: Array<JournalEntryRefund>;\n  type: JournalEntryType;\n  date: Scalars['String'];\n  department: Department;\n  category: JournalEntryCategory;\n  paymentMethod: PaymentMethod;\n  description?: Maybe<Scalars['String']>;\n  total: Rational;\n  source: JournalEntrySource;\n  reconciled: Scalars['Boolean'];\n  lastUpdate: Scalars['String'];\n  deleted: Scalars['Boolean'];\n};\n\nexport type JournalEntryAddFields = {\n  date: Scalars['String'];\n  department: Scalars['ID'];\n  type: JournalEntryType;\n  category: Scalars['ID'];\n  paymentMethod: Scalars['ID'];\n  description?: Maybe<Scalars['String']>;\n  total: RationalInput;\n  source: JournalEntrySourceInput;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryAddRefundFields = {\n  date: Scalars['String'];\n  description?: Maybe<Scalars['String']>;\n  paymentMethod: Scalars['ID'];\n  total: RationalInput;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryCategory = {\n   __typename?: 'JournalEntryCategory';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  type: JournalEntryType;\n  parent?: Maybe<JournalEntryCategory>;\n  ancestors: Array<JournalEntryCategory>;\n  children: Array<JournalEntryCategory>;\n};\n\nexport type JournalEntryCategoryWhereInput = {\n  name?: Maybe<JournalEntryCategoryWhereNameInput>;\n  type?: Maybe<JournalEntryCategoryWhereTypeInput>;\n  hasParent?: Maybe<Scalars['Boolean']>;\n  parent?: Maybe<JournalEntryCategoryWhereParentInput>;\n  or?: Maybe<Array<Maybe<JournalEntryCategoryWhereInput>>>;\n  and?: Maybe<Array<Maybe<JournalEntryCategoryWhereInput>>>;\n};\n\nexport type JournalEntryCategoryWhereNameInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type JournalEntryCategoryWhereParentInput = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n};\n\nexport type JournalEntryCategoryWhereTypeInput = {\n  eq?: Maybe<JournalEntryType>;\n  ne?: Maybe<JournalEntryType>;\n};\n\nexport type JournalEntryRefund = {\n   __typename?: 'JournalEntryRefund';\n  id: Scalars['ID'];\n  date: Scalars['String'];\n  description?: Maybe<Scalars['String']>;\n  paymentMethod: PaymentMethod;\n  total: Rational;\n  reconciled: Scalars['Boolean'];\n  lastUpdate: Scalars['String'];\n  deleted: Scalars['Boolean'];\n};\n\nexport type JournalEntrySource = Person | Business | Department;\n\nexport type JournalEntrySourceInput = {\n  sourceType: JournalEntrySourceType;\n  id: Scalars['ID'];\n};\n\nexport enum JournalEntrySourceType {\n  Business = 'BUSINESS',\n  Department = 'DEPARTMENT',\n  Person = 'PERSON'\n}\n\nexport enum JournalEntryType {\n  Credit = 'CREDIT',\n  Debit = 'DEBIT'\n}\n\nexport type JournalEntryUpdateFields = {\n  date?: Maybe<Scalars['String']>;\n  department?: Maybe<Scalars['ID']>;\n  type?: Maybe<JournalEntryType>;\n  category?: Maybe<Scalars['ID']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  description?: Maybe<Scalars['String']>;\n  total?: Maybe<RationalInput>;\n  source?: Maybe<JournalEntrySourceInput>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryUpdatePaymentMethod = {\n  id: Scalars['ID'];\n  fields: PaymentMethodUpdateFields;\n};\n\nexport type JournalEntryUpdateRefundFields = {\n  date?: Maybe<Scalars['String']>;\n  description?: Maybe<Scalars['String']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  total?: Maybe<RationalInput>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type Lc_JournalEntryUpsert = {\n   __typename?: 'LC_JournalEntryUpsert';\n  id: Scalars['ID'];\n  valid: Scalars['Boolean'];\n  type: Lc_JournalEntryUpsertType;\n  submitStatus: Lc_JournalEntryUpsertSubmitStatus;\n  submitError?: Maybe<Scalars['String']>;\n  inputValues: Lc_JournalEntryUpsertInputValues;\n  inputErrors: Lc_JournalEntryUpsertInputErrors;\n  fields: Lc_JournalEntryUpsertFields;\n};\n\nexport type Lc_JournalEntryUpsertFields = {\n   __typename?: 'LC_JournalEntryUpsertFields';\n  id?: Maybe<Scalars['ID']>;\n  date?: Maybe<Scalars['String']>;\n  department: Array<Scalars['ID']>;\n  type?: Maybe<Scalars['ID']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  total?: Maybe<Rational>;\n  source: Array<Lc_JournalEntryUpsertSource>;\n};\n\nexport type Lc_JournalEntryUpsertInputErrors = {\n   __typename?: 'LC_JournalEntryUpsertInputErrors';\n  dateError?: Maybe<Scalars['String']>;\n  deptError?: Maybe<Scalars['String']>;\n  typeError?: Maybe<Scalars['String']>;\n  payMethodError?: Maybe<Scalars['String']>;\n  totalError?: Maybe<Scalars['String']>;\n  srcError?: Maybe<Scalars['String']>;\n};\n\nexport type Lc_JournalEntryUpsertInputValues = {\n   __typename?: 'LC_JournalEntryUpsertInputValues';\n  deptInput?: Maybe<Scalars['String']>;\n  totalInput?: Maybe<Scalars['String']>;\n  srcInput?: Maybe<Scalars['String']>;\n  srcType?: Maybe<JournalEntrySourceType>;\n};\n\nexport type Lc_JournalEntryUpsertSource = {\n   __typename?: 'LC_JournalEntryUpsertSource';\n  sourceType: JournalEntrySourceType;\n  id: Scalars['ID'];\n};\n\nexport enum Lc_JournalEntryUpsertSubmitStatus {\n  NotSubmitted = 'NOT_SUBMITTED',\n  Submitting = 'SUBMITTING',\n  Submitted = 'SUBMITTED'\n}\n\nexport enum Lc_JournalEntryUpsertType {\n  Update = 'UPDATE',\n  Add = 'ADD'\n}\n\nexport type Mutation = {\n   __typename?: 'Mutation';\n  addBusiness: Business;\n  journalEntryUpdate: JournalEntry;\n  journalEntryAdd: JournalEntry;\n  journalEntryDelete: JournalEntry;\n  journalEntryAddRefund: JournalEntry;\n  journalEntryUpdateRefund: JournalEntry;\n  journalEntryDeleteRefund: JournalEntry;\n  paymentMethodUpdate: PaymentMethod;\n  paymentMethodAdd: PaymentMethod;\n  addPerson: Person;\n};\n\n\nexport type MutationAddBusinessArgs = {\n  fields: BusinessAddFields;\n};\n\n\nexport type MutationJournalEntryUpdateArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type MutationJournalEntryAddArgs = {\n  fields: JournalEntryAddFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type MutationJournalEntryDeleteArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type MutationJournalEntryAddRefundArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryAddRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n};\n\n\nexport type MutationJournalEntryUpdateRefundArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n};\n\n\nexport type MutationJournalEntryDeleteRefundArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type MutationPaymentMethodUpdateArgs = {\n  id: Scalars['ID'];\n  fields: PaymentMethodUpdateFields;\n};\n\n\nexport type MutationPaymentMethodAddArgs = {\n  fields: PaymentMethodAddFields;\n};\n\n\nexport type MutationAddPersonArgs = {\n  fields: PersonAddFields;\n};\n\nexport type PaginateInput = {\n  skip: Scalars['Int'];\n  limit: Scalars['Int'];\n};\n\nexport type PaymentMethod = {\n   __typename?: 'PaymentMethod';\n  id: Scalars['ID'];\n  active: Scalars['Boolean'];\n  refId?: Maybe<Scalars['String']>;\n  name: Scalars['String'];\n  parent?: Maybe<PaymentMethod>;\n  ancestors: Array<PaymentMethod>;\n  children: Array<PaymentMethod>;\n  allowChildren: Scalars['Boolean'];\n  authorization: Array<PaymentMethodAuthorization>;\n};\n\nexport type PaymentMethodAddFields = {\n  active: Scalars['Boolean'];\n  refId?: Maybe<Scalars['String']>;\n  name: Scalars['String'];\n  parent: Scalars['ID'];\n};\n\nexport type PaymentMethodAuthorization = {\n   __typename?: 'PaymentMethodAuthorization';\n  owner: Scalars['Boolean'];\n  entity?: Maybe<PaymentMethodAuthorizedEntity>;\n};\n\nexport type PaymentMethodAuthorizedEntity = Person | Business | Department;\n\nexport type PaymentMethodUpdateFields = {\n  active?: Maybe<Scalars['Boolean']>;\n  refId?: Maybe<Scalars['String']>;\n  name?: Maybe<Scalars['String']>;\n};\n\nexport type PaymentMethodWhereInput = {\n  active?: Maybe<Scalars['Boolean']>;\n  refId?: Maybe<PaymentMethodWhereRefIdInput>;\n  name?: Maybe<PaymentMethodWhereNameInput>;\n  hasParent?: Maybe<Scalars['Boolean']>;\n  parent?: Maybe<PaymentMethodWhereParentInput>;\n  or?: Maybe<Array<Maybe<PaymentMethodWhereInput>>>;\n  and?: Maybe<Array<Maybe<PaymentMethodWhereInput>>>;\n};\n\nexport type PaymentMethodWhereNameInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type PaymentMethodWhereParentInput = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n};\n\nexport type PaymentMethodWhereRefIdInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type Person = {\n   __typename?: 'Person';\n  id: Scalars['ID'];\n  name: PersonName;\n};\n\nexport type PersonAddFields = {\n  name: PersonNameInput;\n};\n\nexport type PersonName = {\n   __typename?: 'PersonName';\n  first: Scalars['String'];\n  last: Scalars['String'];\n};\n\nexport type PersonNameInput = {\n  first: Scalars['String'];\n  last: Scalars['String'];\n};\n\nexport type Query = {\n   __typename?: 'Query';\n  budget: Budget;\n  budgets: Array<Budget>;\n  business: Business;\n  businesses: Array<Business>;\n  department?: Maybe<Department>;\n  departments: Array<Department>;\n  journalEntries: Array<JournalEntry>;\n  journalEntry?: Maybe<JournalEntry>;\n  journalEntryCategories: Array<JournalEntryCategory>;\n  journalEntryCategory: JournalEntryCategory;\n  journalEntryRefund?: Maybe<JournalEntryRefund>;\n  journalEntrySources: Array<JournalEntrySource>;\n  lc_journalEntryUpserts: Array<Lc_JournalEntryUpsert>;\n  paymentMethod?: Maybe<PaymentMethod>;\n  paymentMethods: Array<PaymentMethod>;\n  people: Array<Person>;\n};\n\n\nexport type QueryBudgetArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryBusinessArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryBusinessesArgs = {\n  searchByName?: Maybe<Scalars['String']>;\n};\n\n\nexport type QueryDepartmentArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryDepartmentsArgs = {\n  fromParent?: Maybe<Scalars['ID']>;\n  searchByName?: Maybe<Scalars['String']>;\n};\n\n\nexport type QueryJournalEntriesArgs = {\n  where?: Maybe<JournalEntiresWhereInput>;\n};\n\n\nexport type QueryJournalEntryArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntryCategoriesArgs = {\n  where?: Maybe<JournalEntryCategoryWhereInput>;\n};\n\n\nexport type QueryJournalEntryCategoryArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntryRefundArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntrySourcesArgs = {\n  searchByName: Scalars['String'];\n};\n\n\nexport type QueryPaymentMethodArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryPaymentMethodsArgs = {\n  where?: Maybe<PaymentMethodWhereInput>;\n};\n\n\nexport type QueryPeopleArgs = {\n  searchByName?: Maybe<PersonNameInput>;\n};\n\nexport type Rational = {\n   __typename?: 'Rational';\n  num: Scalars['Int'];\n  den: Scalars['Int'];\n};\n\nexport type RationalInput = {\n  num: Scalars['Int'];\n  den: Scalars['Int'];\n};\n\nexport enum SortDirection {\n  Asc = 'ASC',\n  Desc = 'DESC'\n}\n\nexport type Subscription = {\n   __typename?: 'Subscription';\n  journalEntryAdded: JournalEntry;\n  journalEntryUpdated: JournalEntry;\n  journalEntryUpserted: JournalEntry;\n};\n\n\nexport type User = {\n   __typename?: 'User';\n  id: Scalars['ID'];\n  user: Person;\n};\n\nexport type Vendor = {\n   __typename?: 'Vendor';\n  approved: Scalars['Boolean'];\n  vendorId?: Maybe<Scalars['ID']>;\n};\n\nexport type WhereRegexInput = {\n  pattern: Scalars['String'];\n  flags?: Maybe<Scalars['String']>;\n};\n\nexport type DepartmentName_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DepartmentName_1Query = { __typename?: 'Query', department?: Maybe<{ __typename: 'Department', id: string, name: string }> };\n\nexport type DeptForUpsertAddQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeptForUpsertAddQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type OnEntryUpsert_2SubscriptionVariables = {};\n\n\nexport type OnEntryUpsert_2Subscription = { __typename?: 'Subscription', journalEntryUpserted: (\n    { __typename?: 'JournalEntry', department: { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | { __typename?: 'Business' }> } }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type GetReportDataDept_1Fragment = { __typename: 'Department', id: string, name: string, budget?: Maybe<{ __typename: 'Budget', id: string, amount: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type GetReportDataEntry_1Fragment = { __typename: 'JournalEntry', id: string, type: JournalEntryType, lastUpdate: string, deleted: boolean, category: { __typename: 'JournalEntryCategory', id: string, name: string }, total: { __typename?: 'Rational', num: number, den: number }, department: { __typename: 'Department', id: string, ancestors: Array<{ __typename: 'Department', id: string } | { __typename: 'Business', id: string }> }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, lastUpdate: string, total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type GetReportDataQueryVariables = {\n  deptId: Scalars['ID'];\n  where: JournalEntiresWhereInput;\n};\n\n\nexport type GetReportDataQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department', descendants: Array<(\n      { __typename?: 'Department' }\n      & GetReportDataDept_1Fragment\n    )> }\n    & GetReportDataDept_1Fragment\n  )>, journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_2SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_2Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_2SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_2Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type OnEntryUpsert_1SubscriptionVariables = {};\n\n\nexport type OnEntryUpsert_1Subscription = { __typename?: 'Subscription', journalEntryUpserted: (\n    { __typename?: 'JournalEntry', department: { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | { __typename?: 'Business' }> } }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type ReconcileEntryMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ReconcileEntryMutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type ReconcileRefundMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ReconcileRefundMutation = { __typename?: 'Mutation', journalEntryUpdateRefund: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryRefund_1Fragment = { __typename: 'JournalEntryRefund', id: string, date: string, description?: Maybe<string>, reconciled: boolean, lastUpdate: string, deleted: boolean, total: { __typename?: 'Rational', num: number, den: number }, paymentMethod: { __typename: 'PaymentMethod', id: string, name: string, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> } };\n\nexport type JournalEntry_1Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, description?: Maybe<string>, deleted: boolean, lastUpdate: string, reconciled: boolean, department: { __typename: 'Department', id: string, name: string, ancestors: Array<{ __typename: 'Department', id: string, deptName: string } | { __typename: 'Business', id: string, bizName: string }> }, category: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType, name: string }, paymentMethod: { __typename: 'PaymentMethod', id: string, name: string, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> }, source: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } | { __typename: 'Business', id: string, bizName: string } | { __typename: 'Department', id: string, deptName: string }, total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<(\n    { __typename?: 'JournalEntryRefund' }\n    & JournalEntryRefund_1Fragment\n  )> };\n\nexport type JournalEntries_1QueryVariables = {\n  where: JournalEntiresWhereInput;\n};\n\n\nexport type JournalEntries_1Query = { __typename?: 'Query', journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_1SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_1Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_1SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_1Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type DeptIniValueForAddEntryQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeptIniValueForAddEntryQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type DeleteEntryMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeleteEntryMutation = { __typename?: 'Mutation', journalEntryDelete: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateEntryIniStateQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type UpdateEntryIniStateQuery = { __typename?: 'Query', journalEntry?: Maybe<{ __typename: 'JournalEntry', id: string, type: JournalEntryType, date: string, description?: Maybe<string>, reconciled: boolean, department: (\n      { __typename?: 'Department' }\n      & DeptEntryOptFragment\n    ), category: (\n      { __typename?: 'JournalEntryCategory', ancestors: Array<(\n        { __typename?: 'JournalEntryCategory' }\n        & CatEntryOptFragment\n      )> }\n      & CatEntryOptFragment\n    ), source: (\n      { __typename?: 'Person' }\n      & SrcEntryPersonOptFragment\n    ) | (\n      { __typename?: 'Business' }\n      & SrcEntryBizOptFragment\n    ) | { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | (\n        { __typename?: 'Business' }\n        & SrcEntryBizOptFragment\n      )> }, paymentMethod: (\n      { __typename?: 'PaymentMethod', ancestors: Array<(\n        { __typename?: 'PaymentMethod' }\n        & PayMethodEntryOptFragment\n      )> }\n      & PayMethodEntryOptFragment\n    ), total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, date: string, total: { __typename?: 'Rational', num: number, den: number } }> }> };\n\nexport type AddEntryMutationVariables = {\n  fields: JournalEntryAddFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type AddEntryMutation = { __typename?: 'Mutation', journalEntryAdd: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateEntryMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type UpdateEntryMutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CatEntryOptsQueryVariables = {\n  where: JournalEntryCategoryWhereInput;\n};\n\n\nexport type CatEntryOptsQuery = { __typename?: 'Query', catOpts: Array<(\n    { __typename?: 'JournalEntryCategory' }\n    & CatEntryOptFragment\n  )> };\n\nexport type DeptEntryOptsQueryVariables = {\n  fromParent?: Maybe<Scalars['ID']>;\n};\n\n\nexport type DeptEntryOptsQuery = { __typename?: 'Query', deptOpts: Array<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type PayMethodEntryOptsQueryVariables = {\n  where: PaymentMethodWhereInput;\n};\n\n\nexport type PayMethodEntryOptsQuery = { __typename?: 'Query', paymentMethods: Array<(\n    { __typename?: 'PaymentMethod' }\n    & PayMethodEntryOptFragment\n  )> };\n\nexport type SrcEntryOptsQueryVariables = {\n  name: Scalars['String'];\n  isBiz: Scalars['Boolean'];\n};\n\n\nexport type SrcEntryOptsQuery = { __typename?: 'Query', businesses: Array<(\n    { __typename?: 'Business' }\n    & SrcEntryBizOptFragment\n  )>, people: Array<(\n    { __typename?: 'Person' }\n    & SrcEntryPersonOptFragment\n  )> };\n\nexport type GetEntryRefundInfo_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type GetEntryRefundInfo_1Query = { __typename?: 'Query', journalEntry?: Maybe<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_2Fragment\n  )> };\n\nexport type DeleteRefundMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeleteRefundMutation = { __typename?: 'Mutation', journalEntryDeleteRefund: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateRefundIniStateQueryVariables = {\n  entryId: Scalars['ID'];\n  refundId: Scalars['ID'];\n};\n\n\nexport type UpdateRefundIniStateQuery = { __typename?: 'Query', journalEntry?: Maybe<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_2Fragment\n  )>, journalEntryRefund?: Maybe<{ __typename: 'JournalEntryRefund', id: string, date: string, description?: Maybe<string>, reconciled: boolean, paymentMethod: (\n      { __typename?: 'PaymentMethod', ancestors: Array<(\n        { __typename?: 'PaymentMethod' }\n        & PayMethodEntryOptFragment\n      )> }\n      & PayMethodEntryOptFragment\n    ), total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type JournalEntry_2Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type AddRefundMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryAddRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n};\n\n\nexport type AddRefundMutation = { __typename?: 'Mutation', journalEntryAddRefund: { __typename: 'JournalEntry', id: string, refunds: Array<(\n      { __typename?: 'JournalEntryRefund' }\n      & JournalEntryRefund_1Fragment\n    )> } };\n\nexport type UpdateRefundMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n};\n\n\nexport type UpdateRefundMutation = { __typename?: 'Mutation', journalEntryUpdateRefund: { __typename: 'JournalEntry', id: string, refunds: Array<(\n      { __typename?: 'JournalEntryRefund' }\n      & JournalEntryRefund_1Fragment\n    )> } };\n\nexport type DeptEntryOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type CatEntryOptFragment = { __typename: 'JournalEntryCategory', id: string, name: string, type: JournalEntryType, parent?: Maybe<{ __typename: 'JournalEntryCategory', id: string }> };\n\nexport type SrcEntryPersonOptFragment = { __typename: 'Person', id: string, personName: { __typename?: 'PersonName', first: string, last: string } };\n\nexport type SrcEntryDeptOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type SrcEntryBizOptFragment = { __typename: 'Business', id: string, name: string, vendor?: Maybe<{ __typename?: 'Vendor', approved: boolean, vendorId?: Maybe<string> }>, departments: Array<(\n    { __typename?: 'Department' }\n    & SrcEntryDeptOptFragment\n  )> };\n\nexport type PayMethodEntryOptFragment = { __typename: 'PaymentMethod', id: string, refId?: Maybe<string>, name: string, active: boolean, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> };\n\nexport type DeptsForNav_1QueryVariables = {};\n\n\nexport type DeptsForNav_1Query = { __typename?: 'Query', departments: Array<{ __typename: 'Department', id: string, name: string, virtualRoot?: Maybe<boolean>, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } }> };\n\nexport type AddPerson_1MutationVariables = {\n  fields: PersonAddFields;\n};\n\n\nexport type AddPerson_1Mutation = { __typename?: 'Mutation', addPerson: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } };\n\nexport type AddBusiness_1MutationVariables = {\n  fields: BusinessAddFields;\n};\n\n\nexport type AddBusiness_1Mutation = { __typename?: 'Mutation', addBusiness: { __typename: 'Business', id: string, name: string } };\n\nexport type AddJournalEntry_2MutationVariables = {\n  fields: JournalEntryAddFields;\n};\n\n\nexport type AddJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryAdd: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_2MutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n};\n\n\nexport type UpdateJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CategoryTypeValidation_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type CategoryTypeValidation_1Query = { __typename?: 'Query', journalEntryCategory: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType } };\n\nexport type ValidateDeptIsLeaf_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ValidateDeptIsLeaf_1Query = { __typename?: 'Query', department?: Maybe<{ __typename: 'Department', id: string, descendants: Array<{ __typename: 'Department', id: string }> }> };\n\nexport type CheckValidVendor_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type CheckValidVendor_1Query = { __typename?: 'Query', business: { __typename: 'Business', id: string, vendor?: Maybe<{ __typename?: 'Vendor', approved: boolean }> } };\n\n\n\nexport type ResolverTypeWrapper<T> = Promise<T> | T;\n\nexport type Resolver<TResult, TParent = {}, TContext = {}, TArgs = {}> = ResolverFn<TResult, TParent, TContext, TArgs>;\n\nexport type ResolverFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Promise<TResult> | TResult;\n\nexport type SubscriptionSubscribeFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => AsyncIterator<TResult> | Promise<AsyncIterator<TResult>>;\n\nexport type SubscriptionResolveFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\nexport interface SubscriptionSubscriberObject<TResult, TKey extends string, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<{ [key in TKey]: TResult }, TParent, TContext, TArgs>;\n  resolve?: SubscriptionResolveFn<TResult, { [key in TKey]: TResult }, TContext, TArgs>;\n}\n\nexport interface SubscriptionResolverObject<TResult, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<any, TParent, TContext, TArgs>;\n  resolve: SubscriptionResolveFn<TResult, any, TContext, TArgs>;\n}\n\nexport type SubscriptionObject<TResult, TKey extends string, TParent, TContext, TArgs> =\n  | SubscriptionSubscriberObject<TResult, TKey, TParent, TContext, TArgs>\n  | SubscriptionResolverObject<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionResolver<TResult, TKey extends string, TParent = {}, TContext = {}, TArgs = {}> =\n  | ((...args: any[]) => SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>)\n  | SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>;\n\nexport type TypeResolveFn<TTypes, TParent = {}, TContext = {}> = (\n  parent: TParent,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Maybe<TTypes> | Promise<Maybe<TTypes>>;\n\nexport type isTypeOfResolverFn<T = {}> = (obj: T, info: GraphQLResolveInfo) => boolean | Promise<boolean>;\n\nexport type NextResolverFn<T> = () => Promise<T>;\n\nexport type DirectiveResolverFn<TResult = {}, TParent = {}, TContext = {}, TArgs = {}> = (\n  next: NextResolverFn<TResult>,\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\n/** Mapping between all available schema types and the resolvers types */\nexport type ResolversTypes = {\n  Query: ResolverTypeWrapper<{}>,\n  ID: ResolverTypeWrapper<Scalars['ID']>,\n  Budget: ResolverTypeWrapper<Omit<Budget, 'owner'> & { owner: ResolversTypes['BudgetOwner'] }>,\n  Rational: ResolverTypeWrapper<Rational>,\n  Int: ResolverTypeWrapper<Scalars['Int']>,\n  BudgetOwner: ResolversTypes['Department'] | ResolversTypes['Business'],\n  Department: ResolverTypeWrapper<Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversTypes['DepartmentAncestor'], ancestors: Array<ResolversTypes['DepartmentAncestor']> }>,\n  String: ResolverTypeWrapper<Scalars['String']>,\n  Business: ResolverTypeWrapper<Business>,\n  Vendor: ResolverTypeWrapper<Vendor>,\n  Boolean: ResolverTypeWrapper<Scalars['Boolean']>,\n  DepartmentAncestor: ResolversTypes['Department'] | ResolversTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: ResolverTypeWrapper<Omit<JournalEntry, 'source'> & { source: ResolversTypes['JournalEntrySource'] }>,\n  JournalEntryRefund: ResolverTypeWrapper<JournalEntryRefund>,\n  PaymentMethod: ResolverTypeWrapper<PaymentMethod>,\n  PaymentMethodAuthorization: ResolverTypeWrapper<Omit<PaymentMethodAuthorization, 'entity'> & { entity?: Maybe<ResolversTypes['PaymentMethodAuthorizedEntity']> }>,\n  PaymentMethodAuthorizedEntity: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  Person: ResolverTypeWrapper<Person>,\n  PersonName: ResolverTypeWrapper<PersonName>,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: ResolverTypeWrapper<JournalEntryCategory>,\n  JournalEntrySource: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  JournalEntryCategoryWhereInput: JournalEntryCategoryWhereInput,\n  JournalEntryCategoryWhereNameInput: JournalEntryCategoryWhereNameInput,\n  JournalEntryCategoryWhereTypeInput: JournalEntryCategoryWhereTypeInput,\n  JournalEntryCategoryWhereParentInput: JournalEntryCategoryWhereParentInput,\n  LC_JournalEntryUpsert: ResolverTypeWrapper<Lc_JournalEntryUpsert>,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  LC_JournalEntryUpsertInputValues: ResolverTypeWrapper<Lc_JournalEntryUpsertInputValues>,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: ResolverTypeWrapper<Lc_JournalEntryUpsertInputErrors>,\n  LC_JournalEntryUpsertFields: ResolverTypeWrapper<Lc_JournalEntryUpsertFields>,\n  LC_JournalEntryUpsertSource: ResolverTypeWrapper<Lc_JournalEntryUpsertSource>,\n  PaymentMethodWhereInput: PaymentMethodWhereInput,\n  PaymentMethodWhereRefIdInput: PaymentMethodWhereRefIdInput,\n  PaymentMethodWhereNameInput: PaymentMethodWhereNameInput,\n  PaymentMethodWhereParentInput: PaymentMethodWhereParentInput,\n  PersonNameInput: PersonNameInput,\n  Mutation: ResolverTypeWrapper<{}>,\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  PaymentMethodAddFields: PaymentMethodAddFields,\n  JournalEntryUpdatePaymentMethod: JournalEntryUpdatePaymentMethod,\n  PaymentMethodUpdateFields: PaymentMethodUpdateFields,\n  PersonAddFields: PersonAddFields,\n  JournalEntryAddFields: JournalEntryAddFields,\n  JournalEntryAddRefundFields: JournalEntryAddRefundFields,\n  JournalEntryUpdateRefundFields: JournalEntryUpdateRefundFields,\n  Subscription: ResolverTypeWrapper<{}>,\n  DepartmentAddFields: DepartmentAddFields,\n  SortDirection: SortDirection,\n  FilterType: FilterType,\n  PaginateInput: PaginateInput,\n  ByIdFilter: ByIdFilter,\n  WhereRegexInput: WhereRegexInput,\n  User: ResolverTypeWrapper<User>,\n  CacheControlScope: CacheControlScope,\n  Upload: ResolverTypeWrapper<Scalars['Upload']>,\n};\n\n/** Mapping between all available schema types and the resolvers parents */\nexport type ResolversParentTypes = {\n  Query: {},\n  ID: Scalars['ID'],\n  Budget: Omit<Budget, 'owner'> & { owner: ResolversParentTypes['BudgetOwner'] },\n  Rational: Rational,\n  Int: Scalars['Int'],\n  BudgetOwner: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  Department: Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversParentTypes['DepartmentAncestor'], ancestors: Array<ResolversParentTypes['DepartmentAncestor']> },\n  String: Scalars['String'],\n  Business: Business,\n  Vendor: Vendor,\n  Boolean: Scalars['Boolean'],\n  DepartmentAncestor: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: Omit<JournalEntry, 'source'> & { source: ResolversParentTypes['JournalEntrySource'] },\n  JournalEntryRefund: JournalEntryRefund,\n  PaymentMethod: PaymentMethod,\n  PaymentMethodAuthorization: Omit<PaymentMethodAuthorization, 'entity'> & { entity?: Maybe<ResolversParentTypes['PaymentMethodAuthorizedEntity']> },\n  PaymentMethodAuthorizedEntity: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  Person: Person,\n  PersonName: PersonName,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: JournalEntryCategory,\n  JournalEntrySource: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  JournalEntryCategoryWhereInput: JournalEntryCategoryWhereInput,\n  JournalEntryCategoryWhereNameInput: JournalEntryCategoryWhereNameInput,\n  JournalEntryCategoryWhereTypeInput: JournalEntryCategoryWhereTypeInput,\n  JournalEntryCategoryWhereParentInput: JournalEntryCategoryWhereParentInput,\n  LC_JournalEntryUpsert: Lc_JournalEntryUpsert,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  LC_JournalEntryUpsertInputValues: Lc_JournalEntryUpsertInputValues,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: Lc_JournalEntryUpsertInputErrors,\n  LC_JournalEntryUpsertFields: Lc_JournalEntryUpsertFields,\n  LC_JournalEntryUpsertSource: Lc_JournalEntryUpsertSource,\n  PaymentMethodWhereInput: PaymentMethodWhereInput,\n  PaymentMethodWhereRefIdInput: PaymentMethodWhereRefIdInput,\n  PaymentMethodWhereNameInput: PaymentMethodWhereNameInput,\n  PaymentMethodWhereParentInput: PaymentMethodWhereParentInput,\n  PersonNameInput: PersonNameInput,\n  Mutation: {},\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  PaymentMethodAddFields: PaymentMethodAddFields,\n  JournalEntryUpdatePaymentMethod: JournalEntryUpdatePaymentMethod,\n  PaymentMethodUpdateFields: PaymentMethodUpdateFields,\n  PersonAddFields: PersonAddFields,\n  JournalEntryAddFields: JournalEntryAddFields,\n  JournalEntryAddRefundFields: JournalEntryAddRefundFields,\n  JournalEntryUpdateRefundFields: JournalEntryUpdateRefundFields,\n  Subscription: {},\n  DepartmentAddFields: DepartmentAddFields,\n  SortDirection: SortDirection,\n  FilterType: FilterType,\n  PaginateInput: PaginateInput,\n  ByIdFilter: ByIdFilter,\n  WhereRegexInput: WhereRegexInput,\n  User: User,\n  CacheControlScope: CacheControlScope,\n  Upload: Scalars['Upload'],\n};\n\nexport type BudgetResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Budget'] = ResolversParentTypes['Budget']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  amount?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  owner?: Resolver<ResolversTypes['BudgetOwner'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type BudgetOwnerResolvers<ContextType = Context, ParentType extends ResolversParentTypes['BudgetOwner'] = ResolversParentTypes['BudgetOwner']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type BusinessResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Business'] = ResolversParentTypes['Business']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  vendor?: Resolver<Maybe<ResolversTypes['Vendor']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type DepartmentResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Department'] = ResolversParentTypes['Department']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  code?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType>,\n  parent?: Resolver<ResolversTypes['DepartmentAncestor'], ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['DepartmentAncestor']>, ParentType, ContextType>,\n  descendants?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  virtualRoot?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type DepartmentAncestorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['DepartmentAncestor'] = ResolversParentTypes['DepartmentAncestor']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type JournalEntryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntry'] = ResolversParentTypes['JournalEntry']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  refunds?: Resolver<Array<ResolversTypes['JournalEntryRefund']>, ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  department?: Resolver<ResolversTypes['Department'], ParentType, ContextType>,\n  category?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  source?: Resolver<ResolversTypes['JournalEntrySource'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastUpdate?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  deleted?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntryCategoryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryCategory'] = ResolversParentTypes['JournalEntryCategory']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  children?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntryRefundResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryRefund'] = ResolversParentTypes['JournalEntryRefund']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastUpdate?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  deleted?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntrySourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntrySource'] = ResolversParentTypes['JournalEntrySource']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type Lc_JournalEntryUpsertResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsert'] = ResolversParentTypes['LC_JournalEntryUpsert']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  valid?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['LC_JournalEntryUpsertType'], ParentType, ContextType>,\n  submitStatus?: Resolver<ResolversTypes['LC_JournalEntryUpsertSubmitStatus'], ParentType, ContextType>,\n  submitError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  inputValues?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputValues'], ParentType, ContextType>,\n  inputErrors?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputErrors'], ParentType, ContextType>,\n  fields?: Resolver<ResolversTypes['LC_JournalEntryUpsertFields'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertFieldsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertFields'] = ResolversParentTypes['LC_JournalEntryUpsertFields']> = {\n  id?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  date?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  department?: Resolver<Array<ResolversTypes['ID']>, ParentType, ContextType>,\n  type?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  total?: Resolver<Maybe<ResolversTypes['Rational']>, ParentType, ContextType>,\n  source?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsertSource']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrorsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputErrors'] = ResolversParentTypes['LC_JournalEntryUpsertInputErrors']> = {\n  dateError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  deptError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  typeError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  payMethodError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertInputValuesResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputValues'] = ResolversParentTypes['LC_JournalEntryUpsertInputValues']> = {\n  deptInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcType?: Resolver<Maybe<ResolversTypes['JournalEntrySourceType']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertSourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertSource'] = ResolversParentTypes['LC_JournalEntryUpsertSource']> = {\n  sourceType?: Resolver<ResolversTypes['JournalEntrySourceType'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type MutationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Mutation'] = ResolversParentTypes['Mutation']> = {\n  addBusiness?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<MutationAddBusinessArgs, 'fields'>>,\n  journalEntryUpdate?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryUpdateArgs, 'id' | 'fields'>>,\n  journalEntryAdd?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryAddArgs, 'fields'>>,\n  journalEntryDelete?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryDeleteArgs, 'id'>>,\n  journalEntryAddRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryAddRefundArgs, 'id' | 'fields'>>,\n  journalEntryUpdateRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryUpdateRefundArgs, 'id' | 'fields'>>,\n  journalEntryDeleteRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryDeleteRefundArgs, 'id'>>,\n  paymentMethodUpdate?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType, RequireFields<MutationPaymentMethodUpdateArgs, 'id' | 'fields'>>,\n  paymentMethodAdd?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType, RequireFields<MutationPaymentMethodAddArgs, 'fields'>>,\n  addPerson?: Resolver<ResolversTypes['Person'], ParentType, ContextType, RequireFields<MutationAddPersonArgs, 'fields'>>,\n};\n\nexport type PaymentMethodResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethod'] = ResolversParentTypes['PaymentMethod']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  active?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  refId?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  children?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  allowChildren?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  authorization?: Resolver<Array<ResolversTypes['PaymentMethodAuthorization']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PaymentMethodAuthorizationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethodAuthorization'] = ResolversParentTypes['PaymentMethodAuthorization']> = {\n  owner?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  entity?: Resolver<Maybe<ResolversTypes['PaymentMethodAuthorizedEntity']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PaymentMethodAuthorizedEntityResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethodAuthorizedEntity'] = ResolversParentTypes['PaymentMethodAuthorizedEntity']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type PersonResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Person'] = ResolversParentTypes['Person']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['PersonName'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PersonNameResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PersonName'] = ResolversParentTypes['PersonName']> = {\n  first?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  last?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type QueryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Query'] = ResolversParentTypes['Query']> = {\n  budget?: Resolver<ResolversTypes['Budget'], ParentType, ContextType, RequireFields<QueryBudgetArgs, 'id'>>,\n  budgets?: Resolver<Array<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<QueryBusinessArgs, 'id'>>,\n  businesses?: Resolver<Array<ResolversTypes['Business']>, ParentType, ContextType, RequireFields<QueryBusinessesArgs, never>>,\n  department?: Resolver<Maybe<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentArgs, 'id'>>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentsArgs, never>>,\n  journalEntries?: Resolver<Array<ResolversTypes['JournalEntry']>, ParentType, ContextType, RequireFields<QueryJournalEntriesArgs, never>>,\n  journalEntry?: Resolver<Maybe<ResolversTypes['JournalEntry']>, ParentType, ContextType, RequireFields<QueryJournalEntryArgs, 'id'>>,\n  journalEntryCategories?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType, RequireFields<QueryJournalEntryCategoriesArgs, never>>,\n  journalEntryCategory?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType, RequireFields<QueryJournalEntryCategoryArgs, 'id'>>,\n  journalEntryRefund?: Resolver<Maybe<ResolversTypes['JournalEntryRefund']>, ParentType, ContextType, RequireFields<QueryJournalEntryRefundArgs, 'id'>>,\n  journalEntrySources?: Resolver<Array<ResolversTypes['JournalEntrySource']>, ParentType, ContextType, RequireFields<QueryJournalEntrySourcesArgs, 'searchByName'>>,\n  lc_journalEntryUpserts?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsert']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType, RequireFields<QueryPaymentMethodArgs, 'id'>>,\n  paymentMethods?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType, RequireFields<QueryPaymentMethodsArgs, never>>,\n  people?: Resolver<Array<ResolversTypes['Person']>, ParentType, ContextType, RequireFields<QueryPeopleArgs, never>>,\n};\n\nexport type RationalResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Rational'] = ResolversParentTypes['Rational']> = {\n  num?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  den?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type SubscriptionResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Subscription'] = ResolversParentTypes['Subscription']> = {\n  journalEntryAdded?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryAdded\", ParentType, ContextType>,\n  journalEntryUpdated?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpdated\", ParentType, ContextType>,\n  journalEntryUpserted?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpserted\", ParentType, ContextType>,\n};\n\nexport interface UploadScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Upload'], any> {\n  name: 'Upload'\n}\n\nexport type UserResolvers<ContextType = Context, ParentType extends ResolversParentTypes['User'] = ResolversParentTypes['User']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  user?: Resolver<ResolversTypes['Person'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type VendorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Vendor'] = ResolversParentTypes['Vendor']> = {\n  approved?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  vendorId?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Resolvers<ContextType = Context> = {\n  Budget?: BudgetResolvers<ContextType>,\n  BudgetOwner?: BudgetOwnerResolvers,\n  Business?: BusinessResolvers<ContextType>,\n  Department?: DepartmentResolvers<ContextType>,\n  DepartmentAncestor?: DepartmentAncestorResolvers,\n  JournalEntry?: JournalEntryResolvers<ContextType>,\n  JournalEntryCategory?: JournalEntryCategoryResolvers<ContextType>,\n  JournalEntryRefund?: JournalEntryRefundResolvers<ContextType>,\n  JournalEntrySource?: JournalEntrySourceResolvers,\n  LC_JournalEntryUpsert?: Lc_JournalEntryUpsertResolvers<ContextType>,\n  LC_JournalEntryUpsertFields?: Lc_JournalEntryUpsertFieldsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputErrors?: Lc_JournalEntryUpsertInputErrorsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputValues?: Lc_JournalEntryUpsertInputValuesResolvers<ContextType>,\n  LC_JournalEntryUpsertSource?: Lc_JournalEntryUpsertSourceResolvers<ContextType>,\n  Mutation?: MutationResolvers<ContextType>,\n  PaymentMethod?: PaymentMethodResolvers<ContextType>,\n  PaymentMethodAuthorization?: PaymentMethodAuthorizationResolvers<ContextType>,\n  PaymentMethodAuthorizedEntity?: PaymentMethodAuthorizedEntityResolvers,\n  Person?: PersonResolvers<ContextType>,\n  PersonName?: PersonNameResolvers<ContextType>,\n  Query?: QueryResolvers<ContextType>,\n  Rational?: RationalResolvers<ContextType>,\n  Subscription?: SubscriptionResolvers<ContextType>,\n  Upload?: GraphQLScalarType,\n  User?: UserResolvers<ContextType>,\n  Vendor?: VendorResolvers<ContextType>,\n};\n\n\n/**\n * @deprecated\n * Use \"Resolvers\" root object instead. If you wish to get \"IResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IResolvers<ContextType = Context> = Resolvers<ContextType>;\n","\nimport {DocumentNode} from 'graphql';\n\nimport upsertJournalEntry from './schema/upsertJournalEntry.gql';\n\nexport default <DocumentNode[]>[\n  upsertJournalEntry\n];","import {Resolvers} from \"apollo-client\";\n\nconst resolvers:Resolvers = {};\n\nexport default resolvers;","import { BatchHttpLink } from 'apollo-link-batch-http';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { ApolloLink } from 'apollo-link';\nimport { onError } from 'apollo-link-error';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst batchHttpLink = new BatchHttpLink({\n  uri: '/graphql',\n  credentials: 'same-origin',\n});\n\nconst wsLink = new WebSocketLink({\n  uri: `ws://${window.location.host}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\nconst link = ApolloLink.from([\n  onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n      graphQLErrors.forEach(({ message, locations, path }) =>\n        console.error(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      );\n    if (networkError) console.log(`[Network error]: ${networkError}`);\n  }),\n  ApolloLink.split(({query}) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition'\n      && def.operation === 'subscription';\n  },wsLink, batchHttpLink)\n\n]);\n\nexport default link;","import { ApolloClient } from 'apollo-client';\n\nimport cache from './inMemoryCache';\nimport typeDefs from './typeDefs';\nimport resolvers from './resolvers';\nimport link from './link';\n\nexport default new ApolloClient({\n  link,\n  cache,\n  typeDefs,\n  resolvers\n});","import gql from \"graphql-tag\";\n\nexport const JOURNAL_ENTRY_REFUND = gql`\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      num\n      den\n    }\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n`;\n\nexport const JOURNAL_ENTRY_FRAGMENT = gql`\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nexport const JOURNAL_ENTRIES = gql`\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: \"JournalEntries_1\", filter: [\"where\"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n","export const CHECK_ID = \"5dc46d0af74afb2c2805bd54\";\nexport const CREDIT_ID = \"5dc46d0af74afb2c2805bd55\";\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\n\nimport {\n  JournalEntryAddRefundFields,\n  PayMethodEntryOptFragment,\n  AddRefundMutation as AddRefund,\n  AddRefundMutationVariables as AddRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_REFUND } from \"../../Table/JournalEntries.gql\";\n\nexport type AddValues = O.Overwrite<\n  O.Required<\n    JournalEntryAddRefundFields,\n    keyof JournalEntryAddRefundFields,\n    \"deep\"\n  >,\n  {\n    date: TransmutationValue<Date | null, JournalEntryAddRefundFields[\"date\"]>;\n    total: TransmutationValue<string, JournalEntryAddRefundFields[\"total\"]>;\n    paymentMethod: TransmutationValue<\n      string,\n      (PayMethodEntryOptFragment | string)[]\n    >;\n  }\n>;\n\nconst ADD_REFUND = gql`\n  mutation AddRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nconst submitAdd: (\n  client: ApolloClient<any>,\n  id: string,\n  ...rest: Parameters<FormikConfig<AddValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<AddValues>[\"onSubmit\"]> = async (\n  client,\n  id,\n  values\n) => {\n  const { paymentMethod, paymentMethodAdd } = (() => {\n    const payMethod =\n      values.paymentMethod.value[values.paymentMethod.value.length - 1];\n\n    // New Payment Method\n    if (typeof payMethod === \"string\") {\n      const parent = (values.paymentMethod.value[\n        values.paymentMethod.value.length - 2\n      ] as PayMethodEntryOptFragment).id;\n\n      return {\n        paymentMethod: \"\",\n        paymentMethodAdd: {\n          parent,\n          refId: payMethod,\n          name: payMethod,\n          active: false,\n        },\n      };\n    }\n\n    return {\n      paymentMethod: payMethod.id,\n      paymentMethodAdd: null,\n    };\n  })();\n\n  const variables: O.Required<AddRefundVars, keyof AddRefundVars, \"deep\"> = {\n    id,\n    fields: {\n      date: values.date.value,\n      description: values.description?.trim()\n        ? values.description.trim()\n        : null,\n      paymentMethod,\n      total: values.total.value,\n      reconciled: values.reconciled ?? null,\n    },\n    paymentMethodAdd,\n  };\n\n  await client.mutate<AddRefund, AddRefundVars>({\n    mutation: ADD_REFUND,\n    variables,\n  });\n};\n\nexport default submitAdd;\n","import { useFormikContext } from \"formik\";\nimport { useCallback } from \"react\";\n\nexport type TransmutationValue<TinputValue, Tvalue> = {\n  inputValue: TinputValue;\n  value: Tvalue;\n};\n\nexport const createValueTransmutator = <\n  TinputValue,\n  Tvalue,\n  Trest extends any[]\n>(\n  transMutator: (inputValue: TinputValue, ...rest: Trest) => Tvalue\n) => (inputValue: TinputValue, ...rest: Trest) =>\n  ({\n    inputValue,\n    value: transMutator(inputValue, ...rest),\n  } as TransmutationValue<TinputValue, Tvalue>);\n\nexport enum FormikStatusType {\n  NOTIFICATION,\n  ERROR,\n  FATAL_ERROR,\n}\n\nexport interface FormikStatus {\n  msg: string;\n  type: FormikStatusType;\n}\n\nexport const useFormikStatus = <Values = any>() => {\n  const { setStatus: setStatusNative, status } = useFormikContext<Values>();\n\n  const setStatus = useCallback(\n    (args: FormikStatus | null) => {\n      if (status) {\n        if (\n          !args ||\n          Object.keys(args).some((key) => args[key] !== status[key])\n        ) {\n          setStatusNative(args);\n        }\n      } else if (args) {\n        setStatusNative(args);\n      }\n    },\n    [setStatusNative, status]\n  );\n\n  return [status ?? null, setStatus] as [FormikStatus | null, typeof setStatus];\n};\n","import React, { useMemo, useCallback, useRef } from \"react\";\nimport {\n  KeyboardDatePicker,\n  KeyboardDatePickerProps,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport { useField, useFormikContext, FieldInputProps } from \"formik\";\nimport { TextFieldProps } from \"@material-ui/core\";\nimport { parseISO, min, isValid, formatISO, format } from \"date-fns\";\n\nimport {\n  TransmutationValue,\n  createValueTransmutator,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst inputProps = {\n  inputMode: \"numeric\",\n} as const;\n\nconst keyboardButtonProps = {\n  tabIndex: -1,\n} as const;\n\nconst dateValueTransmutator = createValueTransmutator(\n  (...args: Parameters<KeyboardDatePickerProps[\"onChange\"]>) => {\n    const [date, value] = args;\n    if (date && isValid(date)) {\n      return formatISO(date);\n    }\n    return value || \"\";\n  }\n);\nexport type DateValue = TransmutationValue<Date | null, string>;\n\nconst DateField = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    maxDate?: Date;\n    minDate?: Date;\n  } & Omit<\n    TextFieldProps,\n    | \"value\"\n    | \"variant\"\n    | \"error\"\n    | \"helperText\"\n    | \"animateYearScrolling\"\n    | \"disableToolbar\"\n    | \"disableFuture\"\n    | \"inputVariant\"\n    | \"variant\"\n    | \"format\"\n    | \"margin\"\n    | \"label\"\n    | \"maxDate\"\n    | \"initialFocusedDate\"\n    | \"autoOk\"\n    | \"InputProps\"\n    | \"inputProps\"\n    | \"placeholder\"\n    | \"KeyboardButtonProps\"\n    | \"onBlur\"\n    | \"onOpen\"\n    | \"onClose\"\n    | \"onChange\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    variant: inputVariant = \"filled\",\n    autoFocus = false,\n    disabled = false,\n    maxDate = new Date(),\n    minDate,\n  } = props;\n\n  const { isSubmitting } = useFormikContext();\n\n  const validate = useCallback(\n    (\n      value: TransmutationValue<Date | null, string> | undefined\n    ): string | undefined => {\n      const dateStr = (value?.value || \"\").trim();\n      if (dateStr) {\n        const date = parseISO(dateStr);\n        if (!isValid(date)) {\n          return \"Invalid Date\";\n        } else if (minDate && date < minDate) {\n          return `Cannot be before ${format(minDate, \"MM/dd/yyyy\")}`;\n        } else if (maxDate < date) {\n          return `Cannot be after ${format(maxDate, \"MM/dd/yyyy\")}`;\n        }\n      } else {\n        return \"Date is Required\";\n      }\n    },\n    [minDate, maxDate]\n  );\n\n  const [field, meta, helpers] = useField<\n    TransmutationValue<Date | null, string> | undefined\n  >({\n    name: \"date\",\n    validate,\n  });\n\n  const value = field.value?.inputValue ?? null;\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const initialInputValue = meta.initialValue?.inputValue;\n  const initialFocusedDate = useMemo(\n    () =>\n      initialInputValue && isValid(initialInputValue)\n        ? initialInputValue\n        : new Date(),\n    [initialInputValue]\n  );\n\n  const InputProps = useMemo(\n    () => ({\n      autoFocus,\n    }),\n    [autoFocus]\n  );\n\n  // Handle touched\n  const calOpen = useRef(false);\n  const onBlur = useCallback(\n    () =>\n      setTimeout(() => {\n        if (calOpen.current) {\n          return;\n        }\n        setTouched(true);\n      }, 0),\n    [setTouched, calOpen]\n  );\n  const onOpen = useCallback(() => (calOpen.current = true), [calOpen]);\n  const onClose = useCallback(() => {\n    calOpen.current = false;\n    onBlur();\n  }, [calOpen, onBlur]);\n\n  const onChange = useCallback<KeyboardDatePickerProps[\"onChange\"]>(\n    (date, value) => {\n      setValue(\n        dateValueTransmutator(\n          // limit max date\n          date && isValid(date) ? min([new Date(), date]) : date,\n          value\n        )\n      );\n    },\n    [setValue]\n  );\n\n  const [formikStatus] = useFormikStatus();\n\n  const dataPickerProps: KeyboardDatePickerProps = useMemo(\n    () => ({\n      ...field,\n      disabled:\n        isSubmitting ||\n        disabled ||\n        formikStatus?.type === FormikStatusType.FATAL_ERROR,\n      value,\n      error: touched && !!error,\n      helperText: touched ? error : undefined,\n      animateYearScrolling: true,\n      disableToolbar: true,\n      disableFuture: true,\n      inputVariant,\n      variant: \"inline\",\n      format: \"MM/dd/yyyy\",\n      margin: \"none\",\n      label: \"Date\",\n      initialFocusedDate,\n      autoOk: true,\n      InputProps,\n      inputProps,\n      placeholder: \"mm/dd/yyyy\",\n      KeyboardButtonProps: keyboardButtonProps,\n      onBlur,\n      onOpen,\n      onClose,\n      onChange,\n    }),\n    [\n      value,\n      initialFocusedDate,\n      onBlur,\n      error,\n      inputVariant,\n      InputProps,\n      isSubmitting,\n      field,\n      onOpen,\n      onClose,\n      onChange,\n      touched,\n      disabled,\n      formikStatus,\n    ]\n  );\n\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker\n        maxDate={maxDate}\n        {...(props as any)}\n        {...dataPickerProps}\n      />\n    </MuiPickersUtilsProvider>\n  );\n};\n\nexport default DateField;\n","import React, { useMemo, useCallback } from \"react\";\nimport { TextField, TextFieldProps } from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst Description = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n  } & Omit<\n    TextFieldProps,\n    | \"variant\"\n    | \"onChange\"\n    | \"value\"\n    | \"variant\"\n    | \"label\"\n    | \"name\"\n    | \"InputProps\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    autoFocus = false,\n    disabled = false,\n    variant = \"filled\",\n    ...textFieldProps\n  } = props;\n\n  const [field, , { setValue }] = useField<string | null | undefined>({\n    name: \"description\",\n  });\n\n  const onChange = useCallback<NonNullable<TextFieldProps[\"onChange\"]>>(\n    (event) => void setValue(event?.target?.value?.trimLeft() || null),\n    [setValue]\n  );\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"text\",\n      autoFocus,\n    }),\n    [autoFocus]\n  );\n\n  const [formikStatus] = useFormikStatus();\n\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      onChange={onChange}\n      value={field.value ?? \"\"}\n      variant={variant as any}\n      label={\"Description\"}\n      name={\"description\"}\n      InputProps={InputProps}\n    />\n  );\n};\n\nexport default Description;\n","import React, { useMemo, useCallback } from \"react\";\nimport { TextField, TextFieldProps, InputAdornment } from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport numeral from \"numeral\";\n\nimport {\n  createValueTransmutator,\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\nimport { RationalInput } from \"../../../../apollo/graphTypes\";\nimport { getRational } from \"../../../../utils/transmutations\";\n\nexport type TotalValue = TransmutationValue<string, RationalInput>;\n\nconst inputProps = {\n  min: \"0.00\",\n  step: \"0.01\",\n} as const;\n\nexport const totalValueTransmutator = createValueTransmutator(\n  (inputValue: string) => getRational(inputValue, 2)\n);\n\nconst Total = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    minTotal?: number;\n    maxTotal?: number;\n  } & Omit<\n    TextFieldProps,\n    | \"variant\"\n    | \"type\"\n    | \"value\"\n    | \"error\"\n    | \"helperText\"\n    | \"placeholder\"\n    | \"label\"\n    | \"name\"\n    | \"required\"\n    | \"variant\"\n    | \"inputProps\"\n    | \"InputProps\"\n    | \"onChange\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    autoFocus = false,\n    disabled = false,\n    variant = \"filled\",\n    maxTotal = Number.MAX_SAFE_INTEGER,\n    minTotal: minTotalProp = 0,\n    ...textFieldProps\n  } = props;\n\n  const minTotal = Math.max(0.01, minTotalProp);\n\n  const validate = useCallback(\n    (value: TotalValue | undefined) => {\n      const inputValue = (value?.inputValue || \"\").trim();\n\n      if (inputValue === \"\") {\n        return \"Total Required\";\n      }\n\n      const num =\n        typeof inputValue === \"string\"\n          ? Number.parseFloat(inputValue)\n          : inputValue;\n\n      if (Number.isNaN(num)) {\n        return \"Invalid Number\";\n      } else if (num > maxTotal) {\n        return `Cannot be greater than ${numeral(maxTotal).format(\"$0,0.00\")}`;\n      } else if (num === 0) {\n        return \"Cannot be 0\";\n      } else if (num < minTotal) {\n        return `Cannot be less than ${numeral(minTotal).format(\"$0,0.00\")}`;\n      }\n    },\n    [minTotal, maxTotal]\n  );\n\n  const [field, meta, { setValue }] = useField<TotalValue | undefined>({\n    name: \"total\",\n    validate,\n  });\n\n  const inputValue = field.value?.inputValue ?? \"\";\n\n  const { error, touched } = meta;\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"number\",\n      autoFocus,\n      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n    }),\n    [autoFocus]\n  );\n\n  const onChange = useCallback<NonNullable<TextFieldProps[\"onChange\"]>>(\n    (event) => {\n      setValue(totalValueTransmutator(event?.target?.value || \"\"));\n    },\n    [setValue]\n  );\n\n  const helperText = useMemo(() => {\n    if (touched && error) {\n      return error;\n    } else if (maxTotal !== Number.MAX_SAFE_INTEGER && minTotal > 0.01) {\n      return `Max ${numeral(maxTotal).format(\"$0,0.00\")} & Min ${numeral(\n        minTotal\n      ).format(\"$0,0.00\")}`;\n    } else if (maxTotal !== Number.MAX_SAFE_INTEGER) {\n      return `Max ${numeral(maxTotal).format(\"$0,0.00\")}`;\n    } else if (minTotal > 0.01) {\n      return `Min ${numeral(minTotal).format(\"$0,0.00\")}`;\n    } else {\n      return \"\";\n    }\n  }, [touched, error, maxTotal, minTotal]);\n\n  const [formikStatus] = useFormikStatus();\n\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      type=\"number\"\n      value={inputValue}\n      error={touched && !!error}\n      helperText={helperText}\n      placeholder={\"0.00\"}\n      label={\"Total\"}\n      name={\"total\"}\n      required\n      variant={variant as any}\n      inputProps={inputProps}\n      InputProps={InputProps}\n      onChange={onChange}\n    />\n  );\n};\n\nexport default Total;\n","import Fraction from \"fraction.js\";\n\nexport const getRational = (\n  number: string | number,\n  fractionDigits = 2\n): { num: number; den: number } => {\n  const { n: num, d: den } = new Fraction(\n    (typeof number === \"string\"\n      ? Number.parseFloat(number.trim() || \"0\")\n      : number\n    ).toFixed(fractionDigits)\n  );\n\n  return { num, den };\n};\n","import React from \"react\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  FormControlLabelProps,\n  CheckboxProps,\n} from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst inputProps = {\n  type: \"checkbox\",\n} as const;\n\nconst Reconcile = (\n  props:\n    | ({ label: true } & Partial<\n        Omit<\n          FormControlLabelProps,\n          | \"inputProps\"\n          | \"control\"\n          | \"checked\"\n          | \"label\"\n          | keyof FieldInputProps<any>\n        >\n      >)\n    | ({ label?: false } & Partial<\n        Omit<\n          CheckboxProps,\n          \"inputProps\" | \"checked\" | keyof FieldInputProps<any>\n        >\n      >)\n) => {\n  const { label, disabled = false, ...customProps } = props;\n\n  const [field] = useField<boolean | undefined>({\n    name: \"reconciled\",\n    type: \"checkbox\",\n  });\n\n  const value = field.value ?? false;\n\n  const [formikStatus] = useFormikStatus();\n\n  if (label) {\n    return (\n      <FormControlLabel\n        {...customProps}\n        {...(field as any)}\n        value={value}\n        disabled={\n          disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR\n        }\n        label=\"Reconcile\"\n        control={<Checkbox inputProps={inputProps} />}\n      />\n    );\n  }\n\n  return (\n    <Checkbox\n      {...(customProps as any)}\n      {...field}\n      value={value}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      inputProps={inputProps}\n    />\n  );\n};\n\nexport default Reconcile;\n","import gql from \"graphql-tag\";\n\nexport const DEPT_ENTRY_OPT_FRAGMENT = gql`\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n`;\n\nexport const CAT_ENTRY_OPT_FRAGMENT = gql`\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n`;\n\nexport const SRC_ENTRY_PERSON_OPT_FRAGMENT = gql`\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n`;\n\nexport const SRC_ENTRY_DEPT_OPT_FRAGMENT = gql`\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n`;\n\nexport const SRC_ENTRY_BIZ_OPT_FRAGMENT = gql`\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport const PAY_METHOD_ENTRY_OPT_FRAGMENT = gql`\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n`;\n","import React, { useMemo, useState, useCallback } from \"react\";\nimport { TextField, TextFieldProps, Box, Chip } from \"@material-ui/core\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { useField, FieldInputProps } from \"formik\";\n\nimport { PAY_METHOD_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  PayMethodEntryOptsQuery as PayMethodEntryOpts,\n  PayMethodEntryOptsQueryVariables as PayMethodEntryOptsQueryVars,\n  PayMethodEntryOptFragment,\n} from \"../../../../apollo/graphTypes\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { ChevronRight } from \"@material-ui/icons\";\nimport { CHECK_ID } from \"../../constants\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\ntype Value = PayMethodEntryOptFragment | string;\n\ntype AutocompleteProps = AutocompletePropsRaw<Value> &\n  UseAutocompleteMultipleProps<Value>;\n\nconst PAY_METHOD_ENTRY_OPTS = gql`\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nexport type PaymentMethodValue = TransmutationValue<string, Value[]>;\n\nconst validate = (payMethodValue: PaymentMethodValue | undefined) => {\n  const value = payMethodValue?.value ?? [];\n  const numValues = value.length;\n  const curValue = value[numValues - 1];\n  const parent = value[numValues - 2] as PayMethodEntryOptFragment | undefined;\n\n  if (curValue === undefined) {\n    return \"Method Required\";\n  } else if (typeof curValue === \"string\") {\n    if (parent?.id === CHECK_ID) {\n      const checkNumber = (curValue.match(/[0-9]/g) ?? []).join(\"\");\n      if (!checkNumber) {\n        return \"Check # Required\";\n      }\n    }\n  } else if (curValue.id === CHECK_ID) {\n    return \"Check # Required\";\n  }\n};\n\nconst getOptionLabel: AutocompleteProps[\"getOptionLabel\"] = (opt): string => {\n  return typeof opt === \"string\" ? opt : opt.name;\n};\n\nconst renderTags: AutocompleteProps[\"renderTags\"] = (values, getTagProps) => {\n  const lastIndex = values.length - 1;\n  return values.map((value: Value, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    const parent = values[index - 1] as PayMethodEntryOptFragment | undefined;\n\n    const isString = typeof value === \"string\";\n\n    let label: string;\n    switch (parent?.id) {\n      case CHECK_ID:\n        label =\n          \"CK-\" +\n          (isString ? value : (value as PayMethodEntryOptFragment).name);\n        break;\n      default:\n        label = getOptionLabel(value);\n    }\n\n    let endAdornment: JSX.Element | undefined;\n    if (!isLastIndex) {\n      endAdornment = <ChevronRight fontSize=\"small\" />;\n    } else if (!isString) {\n      // Add Prefixes\n      switch ((value as PayMethodEntryOptFragment).id) {\n        case CHECK_ID:\n          endAdornment = <span>CK-</span>;\n          break;\n      }\n    }\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={label}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {endAdornment}\n      </Box>\n    );\n  });\n};\n\nconst PaymentMethod = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n  } & {} & Omit<\n      TextFieldProps,\n      | \"value\"\n      | \"variant\"\n      | \"error\"\n      | \"helperText\"\n      | \"name\"\n      | \"label\"\n      | keyof FieldInputProps<any>\n      | keyof Omit<RenderInputParams, \"id\" | \"disabled\">\n    >\n) => {\n  const { disabled = false, ...textFieldProps } = props;\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const [field, meta, helpers] = useField<PaymentMethodValue | undefined>({\n    name: \"paymentMethod\",\n    validate,\n  });\n\n  const onBlurField = field.onBlur;\n  const value = field.value?.value ?? [];\n  const inputValue = field.value?.inputValue ?? \"\";\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const curValue = value[value.length - 1] ?? null;\n\n  const variables = useMemo<PayMethodEntryOptsQueryVars>(\n    () =>\n      curValue === null\n        ? {\n            where: {\n              hasParent: false,\n            },\n          }\n        : {\n            where: {\n              parent: {\n                eq: (curValue as PayMethodEntryOptFragment).id,\n              },\n            },\n          },\n    [curValue]\n  );\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<\n        PayMethodEntryOpts,\n        PayMethodEntryOptsQueryVars\n      >[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    PayMethodEntryOpts,\n    PayMethodEntryOptsQueryVars\n  >(PAY_METHOD_ENTRY_OPTS, {\n    skip: typeof curValue === \"string\",\n    variables,\n    onError,\n  });\n\n  const options = useMemo<PayMethodEntryOptFragment[]>(\n    () =>\n      !data?.paymentMethods ||\n      typeof curValue === \"string\" ||\n      curValue?.id === CHECK_ID\n        ? []\n        : data.paymentMethods,\n    [data, curValue]\n  );\n\n  const hasOptions = options.length > 0;\n\n  const freeSolo = useMemo<boolean>(\n    () => (curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID,\n    [curValue]\n  );\n\n  const disableTextInput = useMemo(() => !hasOptions && !freeSolo, [\n    hasOptions,\n    freeSolo,\n  ]);\n\n  const label = useMemo(() => {\n    if (\n      typeof curValue === \"string\" ||\n      (curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID\n    ) {\n      return \"Check #\";\n    }\n\n    return \"Payment Method\";\n  }, [curValue]);\n\n  const InputProps = useMemo(() => {\n    if ((curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID) {\n      return {\n        type: \"number\",\n      };\n    }\n\n    return {};\n  }, [curValue]);\n\n  const inputProps = useMemo(() => {\n    if ((curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID) {\n      return {\n        min: \"0\",\n        step: \"1\",\n      };\n    }\n\n    return {};\n  }, [curValue]);\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      params.InputProps = {\n        ...(params.InputProps ?? {}),\n        ...InputProps,\n      };\n\n      params.inputProps = {\n        ...(params.inputProps ?? {}),\n        ...inputProps,\n      };\n\n      const helperText = (() => {\n        if (gqlError) {\n          return gqlError.message;\n        } else if (touched) {\n          return error;\n        }\n      })();\n\n      return (\n        <TextField\n          {...textFieldProps}\n          {...params}\n          variant={(textFieldProps.variant || \"filled\") as any}\n          error={(touched && !!error) || !!gqlError}\n          helperText={helperText}\n          name=\"paymentMethod\"\n          label={label}\n        />\n      );\n    },\n    [textFieldProps, touched, gqlError, error, label, InputProps, inputProps]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback<NonNullable<AutocompleteProps[\"onBlur\"]>>(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => void onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n      if (!disableTextInput) {\n        setValue({ inputValue, value });\n      }\n    },\n    [setValue, value, disableTextInput]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(\n    () => ({\n      value,\n      disabled:\n        !!gqlError ||\n        loading ||\n        formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n        disabled,\n      multiple: true,\n      options,\n      renderInput,\n      renderTags,\n      freeSolo,\n      getOptionLabel,\n      onChange,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      onFocus,\n      onBlur,\n      open:\n        hasFocus &&\n        hasOptions &&\n        formikStatus?.type !== FormikStatusType.FATAL_ERROR,\n      loading,\n      autoSelect: true,\n      name: \"paymentMethod\",\n    }),\n    [\n      options,\n      value,\n      renderInput,\n      freeSolo,\n      onChange,\n      onInputChange,\n      inputValue,\n      disableTextInput,\n      onFocus,\n      onBlur,\n      hasFocus,\n      hasOptions,\n      loading,\n      gqlError,\n      disabled,\n      formikStatus,\n    ]\n  );\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default PaymentMethod;\n","import React from \"react\";\nimport { useTheme, Box, BoxProps, Theme } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\n\nconst Overlay = (\n  props: {\n    children: React.ReactNode;\n    zIndex: keyof Theme[\"zIndex\"] | number;\n    opacity?: number;\n  } & Pick<\n    BoxProps,\n    | \"p\"\n    | \"pt\"\n    | \"pr\"\n    | \"pb\"\n    | \"pl\"\n    | \"px\"\n    | \"py\"\n    | \"padding\"\n    | \"paddingTop\"\n    | \"paddingRight\"\n    | \"paddingBottom\"\n    | \"paddingLeft\"\n    | \"paddingX\"\n    | \"paddingY\"\n  >\n) => {\n  const theme = useTheme();\n\n  const { opacity = 0.62, ...boxProps } = props;\n\n  return (\n    <Box\n      {...boxProps}\n      position=\"absolute\"\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      width=\"100%\"\n      top=\"0px\"\n      bottom=\"0px\"\n      bgcolor={fade(theme.palette.background.paper, opacity)}\n    />\n  );\n};\n\nexport default Overlay;\n","import React from \"react\";\nimport { CircularProgress, Theme } from \"@material-ui/core\";\n\nimport Overlay from \"./Overlay\";\n\nconst OverlayLoading = (props: { zIndex: keyof Theme[\"zIndex\"] | number }) => {\n  return <Overlay {...props} children={<CircularProgress />} />;\n};\n\nexport default OverlayLoading;\n","import gql from \"graphql-tag\";\n\nexport const JOURNAL_FRAGMENT = gql`\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      num\n      den\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n`;\n","import React, { useCallback, useMemo } from \"react\";\nimport { Formik, FormikConfig, useFormikContext, FormikProps } from \"formik\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  PaperProps,\n  Grid,\n  DialogContentText,\n  useTheme,\n  Box,\n} from \"@material-ui/core\";\nimport {\n  useApolloClient,\n  useQuery,\n  QueryHookOptions,\n} from \"@apollo/react-hooks\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\n\nimport submitAdd, { AddValues } from \"./submitAdd\";\nimport {\n  GetEntryRefundInfo_1Query as GetEntryRefundInfo,\n  GetEntryRefundInfo_1QueryVariables as GetEntryRefundInfoVars,\n  JournalEntryType,\n} from \"../../../../apollo/graphTypes\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport {\n  FormikStatusType,\n  useFormikStatus,\n  FormikStatus,\n} from \"../../../../formik/utils\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport { JOURNAL_FRAGMENT } from \"./refunds.gql\";\n\nconst GET_ENTRY_REFUND_INFO = gql`\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ${JOURNAL_FRAGMENT}\n`;\n\nconst NULLISH = Symbol();\n\nexport interface AddRefundProps {\n  entryId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\n// Must be in separate component to access FormikContext.\nconst AddRefundDialog = (\n  props: AddRefundProps & {\n    handleSubmit: FormikProps<AddValues>[\"handleSubmit\"];\n  }\n) => {\n  const { entryId, open, onClose, onExited: onExitedCb, handleSubmit } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<AddValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<GetEntryRefundInfo, GetEntryRefundInfoVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error, data } = useQuery<\n    GetEntryRefundInfo,\n    GetEntryRefundInfoVars\n  >(GET_ENTRY_REFUND_INFO, {\n    skip: !entryId,\n    variables: { id: entryId as string },\n    onError,\n  });\n\n  const total = data?.journalEntry?.total;\n  const refunds = data?.journalEntry?.refunds || [];\n  const maxTotal = useMemo(() => {\n    if (total) {\n      const totalRefunds = refunds.reduce(\n        (totalRefunds, { deleted, total }) =>\n          deleted ? totalRefunds : totalRefunds + total.num / total.den,\n        0\n      );\n      return total.num / total.den - totalRefunds;\n    }\n    return Number.MAX_SAFE_INTEGER;\n  }, [total, refunds]);\n\n  const date = data?.journalEntry?.date;\n  const minDate = useMemo<Date | undefined>(\n    () => (date ? new Date(date) : undefined),\n    [date]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const journalEntryType = data?.journalEntry?.type;\n  const title = useMemo(() => {\n    const title =\n      !loading && !error && (journalEntryType ?? NULLISH) !== NULLISH\n        ? `${\n            journalEntryType === JournalEntryType.Credit ? \"Give\" : \"Add\"\n          } Refund`\n        : \"Refund\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, error, journalEntryType, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & { onSubmit: FormikProps<AddValues>[\"handleSubmit\"] }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(loading || isSubmitting) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid item lg={4} sm={6} xs={12}>\n              <DateEntry\n                minDate={minDate}\n                disabled={loading || isSubmitting}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Description disabled={loading || isSubmitting} fullWidth />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <PaymentMethod disabled={loading || isSubmitting} fullWidth />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Total\n                disabled={loading || isSubmitting}\n                fullWidth\n                maxTotal={maxTotal}\n              />\n            </Grid>\n            <Grid\n              item\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              lg={4}\n              md={6}\n              sm={12}\n            >\n              <Reconcile disabled={loading || isSubmitting} label />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={loading || isSubmitting || !isValid}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Add\n          </Button>\n        )}\n        <Button\n          disabled={loading || isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst AddRefund = (props: AddRefundProps) => {\n  const { entryId, open, onClose, onExited } = props;\n\n  const initialValues = useMemo<Partial<AddValues>>(() => ({}), []);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<AddValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      try {\n        formikHelpers.setStatus(null);\n        await submitAdd(client, entryId || \"\", values, formikHelpers);\n        onClose();\n      } catch (error) {\n        formikHelpers.setStatus({\n          msg: error.message ?? `${error}`,\n          type: FormikStatusType.ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, entryId, onClose]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<AddValues>) => (\n      <AddRefundDialog\n        entryId={entryId}\n        open={open}\n        onClose={onClose}\n        onExited={onExited}\n        handleSubmit={props.handleSubmit}\n      />\n    ),\n    [entryId, open, onClose, onExited]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as AddValues}\n      initialStatus={null}\n      // isInitialValid={false}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default AddRefund;\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { isEqual } from \"date-fns\";\n\nimport {\n  JournalEntryUpdateRefundFields,\n  PayMethodEntryOptFragment,\n  UpdateRefundMutation as UpdateRefund,\n  UpdateRefundMutationVariables as UpdateRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_REFUND } from \"../../Table/JournalEntries.gql\";\nimport { CHECK_ID } from \"../../constants\";\n\nexport type UpdateValues = O.NonNullable<\n  O.Overwrite<\n    O.Required<JournalEntryUpdateRefundFields>,\n    {\n      date: TransmutationValue<\n        Date,\n        NonNullable<JournalEntryUpdateRefundFields[\"date\"]>\n      >;\n      total: TransmutationValue<\n        string,\n        NonNullable<JournalEntryUpdateRefundFields[\"total\"]>\n      >;\n      paymentMethod: TransmutationValue<\n        string,\n        (PayMethodEntryOptFragment | string)[]\n      >;\n    }\n  >,\n  keyof Omit<JournalEntryUpdateRefundFields, \"description\">\n>;\n\nexport type IniUpdateValues = O.Overwrite<\n  UpdateValues,\n  {\n    paymentMethod: TransmutationValue<string, PayMethodEntryOptFragment[]>;\n  }\n>;\n\nconst UPDATE_REFUND = gql`\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nconst submitUpdate: (\n  client: ApolloClient<any>,\n  iniValues: IniUpdateValues,\n  id: string,\n  ...rest: Parameters<FormikConfig<UpdateValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<UpdateValues>[\"onSubmit\"]> = async (\n  client,\n  iniValues,\n  id,\n  values\n) => {\n  // Date\n  const date = isEqual(iniValues.date.inputValue, values.date.inputValue)\n    ? null\n    : values.date.value;\n\n  // Description\n  const description =\n    values.description !== iniValues.description\n      ? values.description?.trim() ?? \"\"\n      : null;\n\n  // Total\n  const total =\n    values.total.value.num / values.total.value.den ===\n    iniValues.total.value.num / iniValues.total.value.den\n      ? null\n      : values.total.value;\n\n  // Reconciled\n  const reconciled =\n    values.reconciled === iniValues.reconciled ? null : values.reconciled;\n\n  // Payment Method\n  const { paymentMethod, paymentMethodAdd, paymentMethodUpdate } = (() => {\n    const iniPayMethod =\n      iniValues.paymentMethod.value[iniValues.paymentMethod.value.length - 1];\n\n    const [payMethod, parent] = values.paymentMethod.value\n      .slice(-2)\n      .reverse() as [\n      string | PayMethodEntryOptFragment,\n      PayMethodEntryOptFragment\n    ];\n\n    // Currently CHECK Numbers only\n    if (typeof payMethod === \"string\") {\n      // Update check number on payment method\n      if (iniPayMethod.parent && iniPayMethod.parent.id === CHECK_ID) {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: null,\n          paymentMethodUpdate: {\n            id: iniPayMethod.id,\n            fields: {\n              active: null,\n              refId: payMethod,\n              name: payMethod,\n            },\n          },\n        };\n\n        // Add new check number payment method\n      } else {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: {\n            parent: parent.id,\n            refId: payMethod,\n            name: payMethod,\n            active: false,\n          },\n          paymentMethodUpdate: null,\n        };\n      }\n      // Update payment method\n    } else if (payMethod.id !== iniPayMethod.id) {\n      return {\n        paymentMethod: payMethod.id,\n        paymentMethodAdd: null,\n        paymentMethodUpdate: null,\n      };\n    }\n\n    return {\n      paymentMethod: null,\n      paymentMethodAdd: null,\n      paymentMethodUpdate: null,\n    };\n  })();\n\n  const variables: O.Required<\n    UpdateRefundVars,\n    keyof UpdateRefundVars,\n    \"deep\"\n  > = {\n    id,\n    fields: {\n      date,\n      description,\n      total,\n      reconciled,\n      paymentMethod,\n    },\n    paymentMethodAdd,\n    paymentMethodUpdate,\n  };\n\n  await client.mutate<UpdateRefund, UpdateRefundVars>({\n    mutation: UPDATE_REFUND,\n    variables,\n  });\n};\n\nexport default submitUpdate;\n","import React, { useMemo, useCallback } from \"react\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport {\n  useTheme,\n  Dialog,\n  DialogTitle,\n  PaperProps,\n  Box,\n  DialogContent,\n  DialogContentText,\n  Grid,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\n\nimport {\n  UpdateRefundIniStateQuery as UpdateRefundIniState,\n  UpdateRefundIniStateQueryVariables as UpdateRefundIniStateVars,\n  JournalEntry_2Fragment as JournalEntryFragment,\n} from \"../../../../apollo/graphTypes\";\nimport submitUpdate, { UpdateValues, IniUpdateValues } from \"./submitUpdate\";\nimport { JOURNAL_FRAGMENT } from \"./refunds.gql\";\nimport { PAY_METHOD_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  FormikStatus,\n  FormikStatusType,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport Description from \"../EntryFields/Description\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Total from \"../EntryFields/Total\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Reconcile from \"../EntryFields/Reconcile\";\n\nexport interface UpdateRefundProps {\n  entryId: string | null;\n  refundId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\nconst UPDATE_REFUND_INI_STATE = gql`\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        num\n        den\n      }\n      reconciled\n    }\n  }\n  ${JOURNAL_FRAGMENT}\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nconst UpdateRefundDialog = (\n  props: UpdateRefundProps & {\n    journalEntry: JournalEntryFragment | null;\n    loading: boolean;\n    handleSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n  }\n) => {\n  const {\n    refundId,\n    open,\n    onClose,\n    onExited: onExitedCb,\n    journalEntry,\n    loading,\n    handleSubmit,\n  } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<UpdateValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const total = journalEntry?.total;\n  const refunds = journalEntry?.refunds || [];\n  const maxTotal = useMemo(() => {\n    if (total) {\n      const totalRefunds = refunds.reduce(\n        (totalRefunds, { id, deleted, total }) =>\n          // Do NOT include refund being updated in max total calculation\n          deleted || id === refundId\n            ? totalRefunds\n            : totalRefunds + total.num / total.den,\n        0\n      );\n      return total.num / total.den - totalRefunds;\n    }\n    return Number.MAX_SAFE_INTEGER;\n  }, [total, refunds, refundId]);\n\n  const date = journalEntry?.date;\n  const minDate = useMemo<Date | undefined>(\n    () => (date ? new Date(date) : undefined),\n    [date]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const title = useMemo(() => {\n    const title = \"Refund Update\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & {\n          onSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n        }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(loading || isSubmitting) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid item lg={4} sm={6} xs={12}>\n              <DateEntry\n                minDate={minDate}\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Description\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <PaymentMethod\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Total\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n                maxTotal={maxTotal}\n              />\n            </Grid>\n            <Grid\n              item\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              lg={4}\n              md={6}\n              sm={12}\n            >\n              <Reconcile\n                disabled={loading || isSubmitting || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={loading || isSubmitting || !isValid}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Update\n          </Button>\n        )}\n        <Button\n          disabled={loading || isSubmitting || !!fatalError}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst UpdateRefund = (props: UpdateRefundProps) => {\n  const { entryId, refundId, open, onClose, onExited } = props;\n\n  const { loading, error, data } = useQuery<\n    UpdateRefundIniState,\n    UpdateRefundIniStateVars\n  >(UPDATE_REFUND_INI_STATE, {\n    skip: !entryId,\n    variables: {\n      entryId: entryId as string,\n      refundId: refundId as string,\n    },\n  });\n\n  const initialStatus = useMemo(\n    () =>\n      error\n        ? ({\n            msg: error.message,\n            type: FormikStatusType.FATAL_ERROR,\n          } as FormikStatus)\n        : null,\n    [error]\n  );\n\n  const journalEntryRefund = data?.journalEntryRefund;\n  const initialValues = useMemo<IniUpdateValues>(() => {\n    if (!journalEntryRefund) {\n      return {} as any;\n    }\n\n    const date = {\n      inputValue: new Date(journalEntryRefund.date),\n      value: journalEntryRefund.date,\n    };\n\n    const paymentMethod = (() => {\n      const { ancestors, ...paymentMethod } = journalEntryRefund.paymentMethod;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(paymentMethod);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const total = {\n      inputValue: (\n        journalEntryRefund.total.num / journalEntryRefund.total.den\n      ).toFixed(2),\n      value: journalEntryRefund.total,\n    };\n\n    const reconciled = journalEntryRefund.reconciled;\n\n    const description = journalEntryRefund.description ?? null;\n\n    return {\n      date,\n      paymentMethod,\n      total,\n      reconciled,\n      description,\n    };\n  }, [journalEntryRefund]);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<UpdateValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      if (!initialValues) {\n        formikHelpers.setStatus({\n          msg: `Failed to load initial values for refund \"${refundId}\".`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n        return;\n      } else if (!refundId) {\n        formikHelpers.setStatus({\n          msg: `No refund ID.`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n        return;\n      }\n\n      try {\n        formikHelpers.setStatus(null);\n        await submitUpdate(\n          client,\n          initialValues,\n          refundId,\n          values,\n          formikHelpers\n        );\n        onClose();\n      } catch (error) {\n        formikHelpers.setStatus({\n          msg: error?.message ?? `${error}`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, initialValues, onClose, refundId]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<UpdateValues>) => {\n      return (\n        <UpdateRefundDialog\n          entryId={entryId}\n          refundId={refundId}\n          open={open}\n          onClose={onClose}\n          onExited={onExited}\n          journalEntry={data?.journalEntry ?? null}\n          loading={loading}\n          handleSubmit={props.handleSubmit}\n        />\n      );\n    },\n    [data, entryId, loading, onClose, onExited, open, refundId]\n  );\n\n  return (\n    <Formik\n      initialValues={(initialValues ?? {}) as UpdateValues}\n      initialStatus={initialStatus}\n      // isInitialValid={false}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default UpdateRefund;\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { parseName } from \"humanparser\";\n\nimport {\n  JournalEntryAddFields,\n  PayMethodEntryOptFragment,\n  DeptEntryOptFragment,\n  CatEntryOptFragment,\n  SrcEntryBizOptFragment,\n  SrcEntryDeptOptFragment,\n  SrcEntryPersonOptFragment,\n  JournalEntrySourceType,\n  AddEntryMutation as AddEntry,\n  AddEntryMutationVariables as AddEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\n\nexport type SourceValue =\n  | SrcEntryBizOptFragment\n  | SrcEntryDeptOptFragment\n  | SrcEntryPersonOptFragment\n  | string;\n\nexport type AddValues = O.Overwrite<\n  O.Required<JournalEntryAddFields, keyof JournalEntryAddFields, \"deep\">,\n  {\n    category: TransmutationValue<string, CatEntryOptFragment[]>;\n    date: TransmutationValue<Date | null, JournalEntryAddFields[\"date\"]>;\n    total: TransmutationValue<string, JournalEntryAddFields[\"total\"]>;\n    paymentMethod: TransmutationValue<\n      string,\n      (PayMethodEntryOptFragment | string)[]\n    >;\n    department: DeptEntryOptFragment;\n    source: TransmutationValue<\n      string,\n      (JournalEntrySourceType | SourceValue)[]\n    >;\n  }\n>;\n\nconst ADD_ENTRY = gql`\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst submitAdd: (\n  client: ApolloClient<any>,\n  ...rest: Parameters<FormikConfig<AddValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<AddValues>[\"onSubmit\"]> = async (\n  client,\n  values\n) => {\n  const { paymentMethod, paymentMethodAdd } = (() => {\n    const payMethod =\n      values.paymentMethod.value[values.paymentMethod.value.length - 1];\n\n    // New Payment Method\n    if (typeof payMethod === \"string\") {\n      const parent = (values.paymentMethod.value[\n        values.paymentMethod.value.length - 2\n      ] as PayMethodEntryOptFragment).id;\n\n      return {\n        paymentMethod: \"\",\n        paymentMethodAdd: {\n          parent,\n          refId: payMethod,\n          name: payMethod,\n          active: false,\n        },\n      };\n    }\n\n    return {\n      paymentMethod: payMethod.id,\n      paymentMethodAdd: null,\n    };\n  })();\n\n  const { source, personAdd, businessAdd } = (() => {\n    const srcType = values.source.value[0] as JournalEntrySourceType;\n    const src = values.source.value[\n      values.source.value.length - 1\n    ] as SourceValue;\n\n    if (typeof src === \"string\") {\n      if (srcType === JournalEntrySourceType.Person) {\n        const parsedName = parseName(src);\n\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Person,\n            id: \"\",\n          },\n          businessAdd: null,\n          personAdd: {\n            name: {\n              first: parsedName.firstName,\n              last: parsedName.lastName,\n            },\n          },\n        };\n      } else {\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Business,\n            id: \"\",\n          },\n          businessAdd: {\n            name: src,\n          },\n          personAdd: null,\n        };\n      }\n    }\n\n    return {\n      source: {\n        sourceType: srcType,\n        id: src.id,\n      },\n      personAdd: null,\n      businessAdd: null,\n    };\n  })();\n\n  const variables: O.Required<AddEntryVars, keyof AddEntryVars, \"deep\"> = {\n    fields: {\n      date: values.date.value,\n      department: values.department.id,\n      type: values.type,\n      category: values.category.value[values.category.value.length - 1].id,\n      description: values.description?.trim() || null,\n      total: values.total.value,\n      reconciled: values.reconciled ?? null,\n      paymentMethod,\n      source,\n    },\n    paymentMethodAdd,\n    personAdd,\n    businessAdd,\n  };\n\n  await client.mutate<AddEntry, AddEntryVars>({\n    mutation: ADD_ENTRY,\n    variables,\n  });\n};\n\nexport default submitAdd;\n","import React, { useCallback, useMemo, useState, useEffect } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField, useFormikContext } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport { CAT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  CatEntryOptsQuery as CatEntryOpts,\n  CatEntryOptsQueryVariables as CatEntryOptsVars,\n  CatEntryOptFragment as CatValue,\n  CatEntryOptFragment,\n  JournalEntryType,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst CAT_OPTS_QUERY = gql`\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ${CAT_ENTRY_OPT_FRAGMENT}\n`;\n\ntype CatValueBeta = TransmutationValue<String, CatEntryOptFragment[]>;\n\ntype AutocompleteProps = AutocompletePropsRaw<CatValue> &\n  UseAutocompleteMultipleProps<CatValue>;\n\nconst getOptionLabel = (opt: CatValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: CatValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nconst NULLISH = Symbol();\n\nexport type CategoryProps = {\n  entryType?: string | null;\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Category = function (props: CategoryProps) {\n  const formikContext = useFormikContext<{\n    category?: CatValueBeta;\n    type?: JournalEntryType;\n  }>();\n\n  const { disabled: disabledFromProps = false } = props;\n\n  const value = formikContext.values?.category?.value || [];\n  const inputValue =\n    formikContext.values?.category?.inputValue.trimLeft() || \"\";\n  const entryType = formikContext.values?.type ?? null;\n\n  const catValue = value[value.length - 1];\n\n  const variables = useMemo<CatEntryOptsVars>(\n    () =>\n      catValue?.id\n        ? {\n            where: {\n              parent: {\n                eq: catValue.id,\n              },\n              type: {\n                eq: entryType,\n              },\n            },\n          }\n        : {\n            where: {\n              hasParent: false,\n              type: {\n                eq: entryType,\n              },\n            },\n          },\n    [catValue, entryType]\n  );\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<QueryHookOptions<CatEntryOpts, CatEntryOptsVars>[\"onError\"]>\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    CatEntryOpts,\n    CatEntryOptsVars\n  >(CAT_OPTS_QUERY, {\n    skip: (entryType ?? NULLISH) === NULLISH,\n    variables,\n    onCompleted: () =>\n      setTimeout(() => formikContext.validateField(\"category\"), 0),\n    onError,\n  });\n  const catOpts = data?.catOpts;\n  const options = useMemo<CatEntryOptFragment[]>(() => catOpts || [], [\n    catOpts,\n  ]);\n\n  const validate = useCallback(\n    (transmutationVal: CatValueBeta | null | undefined) => {\n      const values = transmutationVal?.value || [];\n      const value = values[values.length - 1] || null;\n\n      if (!value) {\n        return \"Category Required\";\n      } else if (options.length > 0) {\n        return \"Sub-category Required\";\n      }\n    },\n    [options]\n  );\n\n  const [field, meta, helpers] = useField<CatValueBeta | null | undefined>({\n    name: \"category\",\n    validate,\n  });\n\n  const { onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  // Reset category value if type changes\n  useEffect(() => {\n    if (catValue && entryType !== catValue.type) {\n      setValue({\n        inputValue: \"\",\n        value: [],\n      });\n    }\n  }, [entryType, catValue, setValue]);\n\n  // const disableTextInput = useMemo(() => {\n  //   return value.length > 0 && options.length === 0;\n  // }, [value, options]);\n\n  const helperText = useMemo(() => {\n    if (!!error && touched) {\n      return error;\n    } else if ((entryType ?? NULLISH) === NULLISH) {\n      return \"Category requires entry type.\";\n    } else if (!!gqlError) {\n      return gqlError.message;\n    }\n    return \"\";\n  }, [entryType, error, touched, gqlError]);\n\n  const disabled = useMemo(\n    () =>\n      loading ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n      (entryType ?? NULLISH) === NULLISH ||\n      disabledFromProps,\n    [disabledFromProps, entryType, formikStatus, loading]\n  );\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={(touched && !!error) || !!gqlError}\n          disabled={disabled}\n          helperText={helperText}\n          name=\"category\"\n          label=\"Category\"\n        />\n      );\n    },\n    [props, touched, error, gqlError, disabled, helperText]\n  );\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => void onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n      setValue({\n        inputValue,\n        value,\n      });\n    },\n    [setValue, value]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      inputValue,\n      onChange,\n      name: \"category\",\n    };\n  }, [\n    field,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    loading,\n    disabled,\n    value,\n    renderInput,\n    onInputChange,\n    inputValue,\n    onChange,\n  ]);\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Category;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport {\n  DeptEntryOptFragment as DeptValue,\n  DeptEntryOptsQuery,\n  DeptEntryOptsQueryVariables as DeptEntryOptsQueryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  // TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst DEPT_OPTS_QUERY = gql`\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst businessId = \"5dc4b09bcf96e166daaa0090\";\n\ntype AutocompleteProps = AutocompletePropsRaw<DeptValue> &\n  UseAutocompleteMultipleProps<DeptValue>;\n\nconst getOptionLabel = (opt: DeptValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: DeptValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\nexport type DepartmentProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Department = function (props: DepartmentProps) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<DeptEntryOptsQuery, DeptEntryOptsQueryVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    DeptEntryOptsQuery,\n    DeptEntryOptsQueryVars\n  >(DEPT_OPTS_QUERY, { onError, variables: { fromParent: businessId } });\n\n  const depts = data?.deptOpts || [];\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  // Input must be controlled to stop input when leaf option is selected.\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const validate = useCallback(\n    (value: DeptValue | null) => {\n      if (!value) {\n        return \"Department Required\";\n      } else if (\n        depts.some(\n          ({ parent }) =>\n            parent.__typename === \"Department\" && parent.id === value.id\n        )\n      ) {\n        return \"Sub-department Required\";\n      }\n    },\n    [depts]\n  );\n\n  const [field, meta, helpers] = useField<DeptValue | null>({\n    name: \"department\",\n    validate,\n  });\n\n  const { value: deptValue, onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const idDeptMap = useMemo(\n    () =>\n      new Map(\n        depts.reduce((idDepts, dept) => {\n          idDepts.push([dept.id, dept]);\n          return idDepts;\n        }, [] as [string, DeptValue][])\n      ),\n    [depts]\n  );\n\n  const value = useMemo(() => {\n    if (!deptValue) {\n      return [];\n    }\n\n    const value: DeptValue[] = [deptValue];\n\n    let { __typename, id } = deptValue.parent;\n\n    while (__typename !== \"Business\" && idDeptMap.has(id)) {\n      const parentDept = idDeptMap.get(id) as DeptValue;\n      value.unshift(parentDept);\n      ({ __typename, id } = parentDept.parent);\n    }\n\n    return value;\n  }, [deptValue, idDeptMap]);\n\n  const options = useMemo(() => {\n    const deptId = value[value.length - 1]?.id;\n    return depts.filter((opt) =>\n      deptId ? opt.parent.id === deptId : opt.parent.__typename === \"Business\"\n    );\n  }, [depts, value]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0;\n  }, [value, options]);\n\n  const helperText = useMemo(() => {\n    if (!!error && touched) {\n      return error;\n    } else if (!!gqlError) {\n      return gqlError.message;\n    }\n    return \"\";\n  }, [error, touched, gqlError]);\n\n  const disabled = useMemo(\n    () =>\n      loading ||\n      disableTextInput ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n      disabledFromProps,\n    [disableTextInput, disabledFromProps, formikStatus, loading]\n  );\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={helperText}\n          name=\"department\"\n          label=\"Department\"\n          disabled={disabled}\n        />\n      );\n    },\n    [props, touched, error, helperText, disabled]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    (event) => {\n      setHasFocus(false);\n      onBlurField(event);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      if (!value) {\n        setValue(null);\n      } else if (Array.isArray(value)) {\n        const len = value.length;\n        setValue(len === 0 ? null : value[len - 1]);\n      } else {\n        setValue(value);\n      }\n    },\n    [setValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, value: string, reason) => {\n      setInputValue((value || \"\").trimStart());\n    },\n    [setInputValue]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onChange,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      name: \"department\",\n    };\n  }, [\n    field,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    disableTextInput,\n    disabled,\n    value,\n    renderInput,\n    loading,\n    onChange,\n    onInputChange,\n    inputValue,\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Department;\n","import React, { useCallback, useMemo, useState, useRef } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\nimport { parseName } from \"humanparser\";\nimport * as namecase from \"namecase\";\nimport gql from \"graphql-tag\";\n\nimport {\n  JournalEntrySourceType,\n  SrcEntryOptsQuery,\n  SrcEntryOptsQueryVariables as SrcEntryOptsQueryVars,\n  SrcEntryBizOptFragment as BizOpt,\n  SrcEntryDeptOptFragment as DeptOpt,\n  SrcEntryPersonOptFragment as PersonOpt,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT,\n} from \"../upsertEntry.gql\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst SRC_ENTRY_OPTS_QUERY = gql`\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport type SourceProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nexport type SrcObjectValue = BizOpt | DeptOpt | PersonOpt;\nexport type SourceValue = SrcObjectValue | string;\nexport type Value = SourceValue | JournalEntrySourceType;\ntype Options = Value[];\nexport type FieldValue = TransmutationValue<string, Value[]>;\n\ntype AutocompleteProps = AutocompletePropsRaw<Value> &\n  UseAutocompleteMultipleProps<Value>;\n\nexport const isFreeSoloOpt = (opt: Value) => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n    case JournalEntrySourceType.Department:\n    case JournalEntrySourceType.Person:\n      break;\n    default:\n      return typeof opt === \"string\";\n  }\n  return false;\n};\n\nconst getOptionLabel: AutocompleteProps[\"getOptionLabel\"] = (opt): string => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n      return \"Vendor\";\n    case JournalEntrySourceType.Department:\n      return \"Department\";\n    case JournalEntrySourceType.Person:\n      return \"Person\";\n    default:\n      if (typeof opt === \"string\") {\n        return opt;\n      }\n  }\n\n  if (opt.__typename === \"Person\") {\n    return `${opt.personName.first} ${opt.personName.last}`;\n  }\n\n  return opt.name;\n};\n\nconst renderTags: AutocompleteProps[\"renderTags\"] = (values, getTagProps) => {\n  const lastIndex = values.length - 1;\n  return values.map((value: Value, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    if (isFreeSoloOpt(value)) {\n      return value;\n    }\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={getOptionLabel(value)}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nconst filterOptions: AutocompleteProps[\"filterOptions\"] = (\n  options,\n  { inputValue }\n) => {\n  const regex = new RegExp(`(^|\\\\s)${inputValue}`, \"i\");\n  return options.filter((opt) => regex.test(getOptionLabel(opt)));\n};\nconst validate = (transmutationVal?: FieldValue) => {\n  const value = transmutationVal?.value || [];\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  if (srcType === null || srcValue === null || srcValue === \"\") {\n    return \"Source Required\";\n  } else if (\n    isFreeSoloOpt(srcValue) &&\n    srcType === JournalEntrySourceType.Person\n  ) {\n    // Validate Free Solo Person name\n    const parsedName = parseName(srcValue as string);\n    if (!parsedName.firstName.trim()) {\n      return \"First Name Required\";\n    } else if (!parsedName.lastName.trim()) {\n      return \"Last Name Required\";\n    }\n  }\n};\n\nconst Source = function (props: SourceProps) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const [field, meta, helpers] = useField<FieldValue | null | undefined>({\n    name: \"source\",\n    validate,\n  });\n\n  const { onBlur: onBlurField } = field;\n  const value = field.value?.value ?? [];\n  const inputValue = field.value?.inputValue ?? \"\";\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  const searchedName = useRef(\"\");\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<SrcEntryOptsQuery, SrcEntryOptsQueryVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    SrcEntryOptsQuery,\n    SrcEntryOptsQueryVars\n  >(SRC_ENTRY_OPTS_QUERY, {\n    skip: !searchedName.current && !value[1],\n    variables: {\n      name: searchedName.current,\n      isBiz: srcType !== JournalEntrySourceType.Person,\n    },\n    onError,\n  });\n\n  const idDeptMap = useMemo(() => {\n    const idDeptMap = new Map<string, DeptOpt>();\n    for (const bizOpt of data?.businesses || []) {\n      for (const deptOpt of bizOpt.departments) {\n        idDeptMap.set(deptOpt.id, deptOpt);\n      }\n    }\n    return idDeptMap;\n  }, [data]);\n\n  const options = useMemo<Options>(() => {\n    if (srcType === null) {\n      return [JournalEntrySourceType.Business, JournalEntrySourceType.Person];\n      // Person ONLY person options\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return srcValue === null ? data?.people || [] : [];\n      // Only Business options\n    } else if (!srcValue) {\n      return data?.businesses || [];\n      // Free solo no options\n    } else if (typeof srcValue === \"string\") {\n      return [] as Options;\n    }\n\n    const options: DeptOpt[] = [];\n\n    for (const deptOpt of idDeptMap.values()) {\n      if (\n        deptOpt.parent.__typename === srcValue.__typename &&\n        deptOpt.parent.id === srcValue.id\n      ) {\n        options.push(deptOpt);\n      }\n    }\n\n    return options;\n  }, [srcType, data, idDeptMap, srcValue]);\n\n  const freeSolo = useMemo(() => {\n    return srcType !== null && srcValue === null;\n  }, [srcType, srcValue]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0 && !freeSolo;\n  }, [value, options, freeSolo]);\n\n  const label = useMemo(() => {\n    if (srcType === null) {\n      return \"Source Type\";\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return \"Person Name\";\n    } else if (value.length === 1) {\n      return \"Vendor\";\n    } else if (value.length === 2 && options.length > 0) {\n      return \"Department\";\n    } else if (options.length > 0) {\n      return \"Sub-Department\";\n    }\n\n    return \"Vendor\";\n  }, [value, options, srcType]);\n\n  const disabled = useMemo(\n    () =>\n      loading ||\n      disabledFromProps ||\n      disableTextInput ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR,\n    [disableTextInput, disabledFromProps, formikStatus, loading]\n  );\n\n  const renderInput = useCallback(\n    (\n      params: RenderInputParams & { inputProps?: TextFieldProps[\"inputProps\"] }\n    ) => {\n      // Disable input?\n      if (\n        srcValue &&\n        typeof srcValue !== \"string\" &&\n        srcValue.__typename !== \"Person\" &&\n        options.length === 0\n      ) {\n        params = {\n          ...params,\n          inputProps: {\n            ...(params?.inputProps || {}),\n            style: {\n              ...(params?.inputProps?.style || {}),\n              display: \"none\",\n            },\n          },\n        };\n      }\n\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={touched ? error : undefined}\n          name=\"source\"\n          label={label}\n          disabled={disabled}\n        />\n      );\n    },\n    [srcValue, options.length, props, touched, error, label, disabled]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback<NonNullable<AutocompleteProps[\"onBlur\"]>>(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      const srcValueIndex = value.length - 1;\n      const srcValue = value[srcValueIndex];\n      if (isFreeSoloOpt(srcValue)) {\n        const formattedSrcStrs: string[] = [];\n\n        for (let str of (srcValue as string).split(\" \")) {\n          if (str) {\n            if (namecase.checkName(str)) {\n              str = namecase(str);\n            }\n\n            formattedSrcStrs.push(str);\n          }\n        }\n\n        const formattedStr = formattedSrcStrs.join(\" \").trim();\n\n        value[srcValueIndex] =\n          formattedStr.charAt(0).toUpperCase() + formattedStr.substring(1);\n      }\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n\n      if (!disableTextInput) {\n        setValue({ inputValue, value });\n      }\n\n      if (srcType !== null && srcValue === null && inputValue) {\n        searchedName.current = inputValue[0].toLowerCase();\n      }\n    },\n    [setValue, srcType, srcValue, value, disableTextInput, searchedName]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      freeSolo,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      onChange,\n      filterOptions,\n      name: \"source\",\n      disabled,\n    };\n  }, [\n    field,\n    disableTextInput,\n    inputValue,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    freeSolo,\n    value,\n    renderInput,\n    loading,\n    onInputChange,\n    onChange,\n    disabled,\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Source;\n","import React, { useMemo } from \"react\";\nimport { useField, useFormikContext } from \"formik\";\nimport ToggleButtonGroup, {\n  ToggleButtonGroupProps,\n} from \"@material-ui/lab/ToggleButtonGroup\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport { BankPlus, BankMinus } from \"mdi-material-ui\";\nimport {\n  Tooltip,\n  Box,\n  FormControlLabel,\n  FormControlLabelProps,\n  FormControl,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { JournalEntryType } from \"../../../../apollo/graphTypes\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst NULLISH: unique symbol = Symbol();\n\nconst validate = (value?: JournalEntryType) => {\n  if (((value ?? NULLISH) as any) === NULLISH) {\n    return \"Type Required\";\n  }\n};\n\nconst Type = function (\n  props: {\n    label?: boolean | FormControlLabelProps[\"labelPlacement\"];\n  } & ToggleButtonGroupProps & { disabled?: boolean }\n) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [formikStatus] = useFormikStatus();\n\n  const { label = false } = props;\n\n  const { isSubmitting } = useFormikContext();\n\n  const [field, meta, helpers] = useField<JournalEntryType | null>({\n    name: \"type\",\n    validate,\n  });\n\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const toggleButtonGroupProps: ToggleButtonGroupProps = useMemo(\n    () => ({\n      size: \"small\",\n      exclusive: true,\n      disabled: isSubmitting,\n      ...field,\n      onChange: async (event, value: JournalEntryType) => {\n        if (((value ?? NULLISH) as any) === NULLISH) {\n          return;\n        }\n\n        setValue(value);\n        await new Promise((resolve) => setTimeout(resolve, 0)); //Avoid pres\n        setTouched(true);\n      },\n    }),\n    [field, isSubmitting, setValue, setTouched]\n  );\n\n  const disabled =\n    isSubmitting ||\n    disabledFromProps ||\n    formikStatus?.type === FormikStatusType.FATAL_ERROR;\n\n  const control = useMemo(\n    () => (\n      <Box pl={1} clone>\n        <ToggleButtonGroup {...(props as any)} {...toggleButtonGroupProps}>\n          <ToggleButton disabled={disabled} value={JournalEntryType.Credit}>\n            <Tooltip arrow placement=\"top\" title=\"Credit\">\n              <BankPlus />\n            </Tooltip>\n          </ToggleButton>\n          <ToggleButton disabled={disabled} value={JournalEntryType.Debit}>\n            <Tooltip arrow placement=\"top\" title=\"Debit\">\n              <BankMinus />\n            </Tooltip>\n          </ToggleButton>\n        </ToggleButtonGroup>\n      </Box>\n    ),\n    [props, toggleButtonGroupProps, disabled]\n  );\n\n  if (label) {\n    return (\n      <FormControl>\n        <FormControlLabel\n          {...(props as any)}\n          labelPlacement={typeof label === \"boolean\" ? undefined : label}\n          control={control}\n          label=\"Type\"\n        />\n        {touched && !!error && <FormHelperText error>{error}</FormHelperText>}\n      </FormControl>\n    );\n  }\n\n  return (\n    <FormControl>\n      {control}\n      {!!error && <FormHelperText error>{error}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nexport default Type;\n","import React, { useMemo, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  Box,\n  DialogContent,\n  DialogContentText,\n  PaperProps,\n  Grid,\n  DialogActions,\n  Button,\n  useTheme,\n  GridProps,\n} from \"@material-ui/core\";\nimport {\n  Add as AddIcon,\n  Cancel as CancelIcon,\n  Queue as QueueIcon,\n} from \"@material-ui/icons\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport { useApolloClient, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport {\n  DeptIniValueForAddEntryQuery as DeptIniValueForAddEntry,\n  DeptIniValueForAddEntryQueryVariables as DeptIniValueForAddEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport submitAdd, { AddValues } from \"./submitAdd\";\nimport {\n  FormikStatusType,\n  FormikStatus,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Category from \"../EntryFields/Category\";\nimport Department from \"../EntryFields/Department\";\nimport Source from \"../EntryFields/Source\";\nimport Type from \"../EntryFields/Type\";\n\nexport interface AddEntryProps {\n  deptId?: string | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nconst gridEntryResponsiveProps: GridProps = {\n  item: true,\n  lg: 4,\n  sm: 6,\n  xs: 12,\n} as const;\n\nconst DEPT_INI_VALUE = gql`\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst AddEntryDialog = (\n  props: AddEntryProps & {\n    loading: boolean;\n  }\n) => {\n  const { open, onClose, loading } = props;\n\n  const { resetForm, isSubmitting, isValid, submitForm } = useFormikContext<\n    AddValues\n  >();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const onExited = useCallback(() => {\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, setFormikStatus]);\n\n  const title = useMemo<string>(() => {\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (isSubmitting) {\n      return \"Submitting Add Entry...\";\n    } else if (loading) {\n      return \"Loading Add Entry...\";\n    }\n    return \"Add Entry\";\n  }, [fatalError, isSubmitting, loading]);\n\n  const theme = useTheme();\n\n  const onClickAdd = useCallback(async () => {\n    try {\n      setFormikStatus(null);\n      await submitForm();\n      onClose();\n    } catch (error) {\n      setFormikStatus({\n        msg: error.message ?? `${error}`,\n        type: FormikStatusType.ERROR,\n      } as FormikStatus);\n    }\n  }, [submitForm, onClose, setFormikStatus]);\n\n  const onClickAddAndNew = useCallback(async () => {\n    try {\n      setFormikStatus(null);\n      await submitForm();\n      resetForm();\n    } catch (error) {\n      setFormikStatus({\n        msg: error.message ?? `${error}`,\n        type: FormikStatusType.ERROR,\n      } as FormikStatus);\n    }\n  }, [submitForm, resetForm, setFormikStatus]);\n\n  const handleSubmit = useCallback(\n    (event: React.FormEvent<HTMLFormElement>) => event.preventDefault(),\n    []\n  );\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & { onSubmit: FormikProps<AddValues>[\"handleSubmit\"] }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(isSubmitting || loading) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid {...gridEntryResponsiveProps} justify=\"center\" container>\n              <Type\n                style={{ margin: theme.spacing(1) }}\n                label=\"start\"\n                disabled={loading || isSubmitting || !!fatalError}\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <DateEntry\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Source\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Category\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Department\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Description\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <PaymentMethod\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Total\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              {...gridEntryResponsiveProps}\n            >\n              <Reconcile\n                disabled={loading || isSubmitting || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <React.Fragment>\n            <Button\n              onClick={onClickAdd}\n              disabled={loading || isSubmitting || !isValid}\n              type=\"submit\"\n              startIcon={<AddIcon />}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Add\n            </Button>\n            <Button\n              onClick={onClickAddAndNew}\n              disabled={loading || isSubmitting || !isValid}\n              type=\"submit\"\n              startIcon={<QueueIcon />}\n              variant=\"outlined\"\n            >\n              Add & New\n            </Button>\n          </React.Fragment>\n        )}\n        <Button\n          disabled={isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst AddEntry = (props: AddEntryProps) => {\n  const { open, onClose, deptId } = props;\n\n  const { loading, error, data } = useQuery<\n    DeptIniValueForAddEntry,\n    DeptIniValueForAddEntryVars\n  >(DEPT_INI_VALUE, {\n    skip: !deptId,\n    variables: {\n      id: deptId as string,\n    },\n  });\n\n  const department = data?.department;\n  const initialValues = useMemo<Partial<AddValues>>(\n    () => (department ? { department } : {}),\n    [department]\n  );\n  const initialStatus = useMemo<FormikStatus | null>(\n    () =>\n      error ? { msg: error.message, type: FormikStatusType.FATAL_ERROR } : null,\n    [error]\n  );\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<AddValues>[\"onSubmit\"]>(\n    (values, formikHelpers) => submitAdd(client, values, formikHelpers),\n    [client]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<AddValues>) => (\n      <AddEntryDialog open={open} onClose={onClose} loading={loading} />\n    ),\n    [open, onClose, loading]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as AddValues}\n      initialStatus={initialStatus}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default AddEntry;\n","import { O, U } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { isEqual } from \"date-fns\";\nimport { parseName } from \"humanparser\";\n\nimport {\n  JournalEntryUpdateFields,\n  PayMethodEntryOptFragment,\n  DeptEntryOptFragment,\n  CatEntryOptFragment,\n  JournalEntrySourceType,\n  UpdateEntryMutation as UpdateEntry,\n  UpdateEntryMutationVariables as UpdateEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { CHECK_ID } from \"../../constants\";\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport { SourceValue } from \"./submitAdd\";\n\nexport type UpdateValues = O.NonNullable<\n  O.Overwrite<\n    O.Required<\n      JournalEntryUpdateFields,\n      keyof JournalEntryUpdateFields,\n      \"deep\"\n    >,\n    {\n      category: TransmutationValue<string, CatEntryOptFragment[]>;\n      date: TransmutationValue<\n        Date,\n        NonNullable<JournalEntryUpdateFields[\"date\"]>\n      >;\n      total: TransmutationValue<\n        string,\n        NonNullable<JournalEntryUpdateFields[\"total\"]>\n      >;\n      paymentMethod: TransmutationValue<\n        string,\n        (PayMethodEntryOptFragment | string)[]\n      >;\n      department: DeptEntryOptFragment;\n      source: TransmutationValue<\n        string,\n        (JournalEntrySourceType | SourceValue)[]\n      >;\n    }\n  >,\n  keyof Omit<JournalEntryUpdateFields, \"description\">\n>;\n\nexport type IniUpdateValues = O.Overwrite<\n  UpdateValues,\n  {\n    paymentMethod: TransmutationValue<string, PayMethodEntryOptFragment[]>;\n    source: TransmutationValue<\n      string,\n      (JournalEntrySourceType | U.Exclude<SourceValue, string>)[]\n    >;\n  }\n>;\n\nconst NULLISH = Symbol();\n\nconst UPDATE_ENTRY = gql`\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst submitUpdate: (\n  client: ApolloClient<any>,\n  iniValues: IniUpdateValues,\n  id: string,\n  ...rest: Parameters<FormikConfig<UpdateValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<UpdateValues>[\"onSubmit\"]> = async (\n  client,\n  iniValues,\n  id,\n  values\n) => {\n  // Category\n  const category = (() => {\n    const category =\n      values.category.value[values.category.value.length - 1]?.id ?? null;\n\n    return category ===\n      (iniValues.category.value[iniValues.category.value.length - 1]?.id ??\n        null)\n      ? null\n      : category;\n  })();\n\n  // Date\n  const date = isEqual(iniValues.date.inputValue, values.date.inputValue)\n    ? null\n    : values.date.value;\n\n  // Department\n  const department =\n    values.department.id === iniValues.department.id\n      ? null\n      : values.department.id;\n\n  // Description\n  const description =\n    values.description?.trim() && values.description !== iniValues.description\n      ? (values.description as string).trim()\n      : null;\n\n  // Total\n  const total =\n    values.total.value.num / values.total.value.den ===\n    iniValues.total.value.num / iniValues.total.value.den\n      ? null\n      : values.total.value;\n\n  // Type\n  const type = values.type === iniValues.type ? null : values.type;\n\n  // Reconciled\n  const reconciled =\n    values.reconciled === iniValues.reconciled ? null : values.reconciled;\n\n  // Payment Method\n  const { paymentMethod, paymentMethodAdd, paymentMethodUpdate } = (() => {\n    const iniPayMethod =\n      iniValues.paymentMethod.value[iniValues.paymentMethod.value.length - 1];\n\n    const [payMethod, parent] = values.paymentMethod.value\n      .slice(-2)\n      .reverse() as [\n      string | PayMethodEntryOptFragment,\n      PayMethodEntryOptFragment\n    ];\n\n    // Currently CHECK Numbers only\n    if (typeof payMethod === \"string\") {\n      // Update check number on payment method\n      if (iniPayMethod.parent && iniPayMethod.parent.id === CHECK_ID) {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: null,\n          paymentMethodUpdate: {\n            id: iniPayMethod.id,\n            fields: {\n              active: null,\n              refId: payMethod,\n              name: payMethod,\n            },\n          },\n        };\n\n        // Add new check number payment method\n      } else {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: {\n            parent: parent.id,\n            refId: payMethod,\n            name: payMethod,\n            active: false,\n          },\n          paymentMethodUpdate: null,\n        };\n      }\n      // Update payment method\n    } else if (payMethod.id !== iniPayMethod.id) {\n      return {\n        paymentMethod: payMethod.id,\n        paymentMethodAdd: null,\n        paymentMethodUpdate: null,\n      };\n    }\n\n    return {\n      paymentMethod: null,\n      paymentMethodAdd: null,\n      paymentMethodUpdate: null,\n    };\n  })();\n\n  // Source\n  const { source, personAdd, businessAdd } = (() => {\n    const srcType = values.source.value[0] as JournalEntrySourceType;\n    const src = values.source.value[\n      values.source.value.length - 1\n    ] as SourceValue;\n\n    const iniSrcType = iniValues.source.value[0] as JournalEntrySourceType;\n    const iniSrc = iniValues.source.value[\n      iniValues.source.value.length - 1\n    ] as Exclude<SourceValue, string>;\n\n    if (typeof src === \"string\") {\n      if (srcType === JournalEntrySourceType.Person) {\n        const parsedName = parseName(src);\n\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Person,\n            id: \"\",\n          },\n          businessAdd: null,\n          personAdd: {\n            name: {\n              first: parsedName.firstName,\n              last: parsedName.lastName,\n            },\n          },\n        };\n      } else {\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Business,\n            id: \"\",\n          },\n          businessAdd: {\n            name: src,\n          },\n          personAdd: null,\n        };\n      }\n    } else if (srcType === iniSrcType && src.id === iniSrc.id) {\n      // No Updates\n      return {\n        source: null,\n        businessAdd: null,\n        personAdd: null,\n      };\n    }\n\n    return {\n      source: {\n        sourceType: srcType,\n        id: src.id,\n      },\n      personAdd: null,\n      businessAdd: null,\n    };\n  })();\n\n  const variables: O.Required<\n    UpdateEntryVars,\n    keyof UpdateEntryVars,\n    \"deep\"\n  > = {\n    id,\n    fields: {\n      category,\n      date,\n      department,\n      description,\n      total,\n      type,\n      source,\n      reconciled,\n      paymentMethod,\n    },\n    paymentMethodAdd,\n    paymentMethodUpdate,\n    personAdd,\n    businessAdd,\n  };\n\n  console.log(variables);\n\n  await client.mutate<UpdateEntry, UpdateEntryVars>({\n    mutation: UPDATE_ENTRY,\n    variables,\n  });\n};\n\nexport default submitUpdate;\n","import React, { useMemo, useCallback } from \"react\";\nimport gql from \"graphql-tag\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport {\n  Dialog,\n  DialogTitle,\n  Box,\n  DialogContent,\n  DialogContentText,\n  PaperProps,\n  Grid,\n  DialogActions,\n  Button,\n  useTheme,\n  GridProps,\n} from \"@material-ui/core\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\n\nimport {\n  UpdateEntryIniStateQuery as UpdateEntryIniState,\n  UpdateEntryIniStateQueryVariables as UpdateEntryIniStateVars,\n  JournalEntrySourceType,\n  SrcEntryDeptOptFragment,\n  SrcEntryBizOptFragment,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  FormikStatus,\n  FormikStatusType,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport submitUpdate, { UpdateValues, IniUpdateValues } from \"./submitUpdate\";\nimport {\n  PAY_METHOD_ENTRY_OPT_FRAGMENT,\n  DEPT_ENTRY_OPT_FRAGMENT,\n  CAT_ENTRY_OPT_FRAGMENT,\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT,\n} from \"../upsertEntry.gql\";\nimport { min } from \"date-fns/esm\";\n\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Category from \"../EntryFields/Category\";\nimport Department from \"../EntryFields/Department\";\nimport Source from \"../EntryFields/Source\";\nimport Type from \"../EntryFields/Type\";\n\nexport interface UpdateEntryProps {\n  entryId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\nconst UPDATE_ENTRY_INI_STATE = gql`\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ... on Department {\n          ancestors {\n            ... on Department {\n              id\n              __typename\n            }\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          num\n          den\n        }\n      }\n      reconciled\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n  ${CAT_ENTRY_OPT_FRAGMENT}\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nconst MAX_DATE = new Date(8640000000000000);\n\nconst gridEntryResponsiveProps: GridProps = {\n  item: true,\n  lg: 4,\n  sm: 6,\n  xs: 12,\n} as const;\n\nconst UpdateEntryDialog = (\n  props: Omit<UpdateEntryProps, \"entryId\"> & {\n    journalEntry: NonNullable<UpdateEntryIniState[\"journalEntry\"]> | null;\n    loading: boolean;\n    handleSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n  }\n) => {\n  const {\n    open,\n    onClose,\n    onExited: onExitedCb,\n    journalEntry,\n    loading,\n    handleSubmit,\n  } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<UpdateValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const refunds = journalEntry?.refunds || [];\n\n  // Updates to total cannot be less than current refunds.\n  const [minTotal, maxDate] = useMemo(\n    () =>\n      refunds.reduce(\n        ([minTotal, maxDate], { id, deleted, total, date }) => [\n          deleted ? minTotal : minTotal + total.num / total.den,\n          deleted ? maxDate : min([maxDate, new Date(date)]),\n        ],\n        [0, MAX_DATE]\n      ),\n    [refunds]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const title = useMemo(() => {\n    const title = \"Entry Update\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      fullWidth\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & {\n          onSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n        }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(isSubmitting || loading) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid {...gridEntryResponsiveProps} justify=\"center\" container>\n              <Type\n                style={{ margin: theme.spacing(1) }}\n                label=\"start\"\n                disabled={isSubmitting || loading || !!fatalError}\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <DateEntry\n                disabled={isSubmitting || loading || !!fatalError}\n                maxDate={maxDate === MAX_DATE ? undefined : maxDate}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Source\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Category\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Department\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Description\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <PaymentMethod\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Total\n                disabled={isSubmitting || loading || !!fatalError}\n                minTotal={minTotal}\n                fullWidth\n              />\n            </Grid>\n            <Grid\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              {...gridEntryResponsiveProps}\n            >\n              <Reconcile\n                disabled={isSubmitting || loading || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={isSubmitting || !isValid || loading}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Update\n          </Button>\n        )}\n        <Button\n          disabled={isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst UpdateEntry = (props: UpdateEntryProps) => {\n  const { entryId, open, onClose, onExited } = props;\n\n  const { loading, error, data } = useQuery<\n    UpdateEntryIniState,\n    UpdateEntryIniStateVars\n  >(UPDATE_ENTRY_INI_STATE, {\n    skip: !entryId,\n    variables: {\n      id: entryId as string,\n    },\n  });\n\n  const initialStatus = useMemo(\n    () =>\n      error\n        ? ({\n            msg: error.message,\n            type: FormikStatusType.FATAL_ERROR,\n          } as FormikStatus)\n        : null,\n    [error]\n  );\n\n  const journalEntry = data?.journalEntry;\n  const initialValues = useMemo<IniUpdateValues>(() => {\n    if (!journalEntry) {\n      return {} as any;\n    }\n\n    const date = {\n      inputValue: new Date(journalEntry.date),\n      value: journalEntry.date,\n    };\n\n    const category = (() => {\n      const { ancestors, ...category } = journalEntry.category;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(category);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const paymentMethod = (() => {\n      const { ancestors, ...paymentMethod } = journalEntry.paymentMethod;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(paymentMethod);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const total = {\n      inputValue: (journalEntry.total.num / journalEntry.total.den).toFixed(2),\n      value: journalEntry.total,\n    };\n\n    const department = journalEntry.department;\n\n    const reconciled = journalEntry.reconciled;\n\n    const description = journalEntry.description ?? null;\n\n    const type = journalEntry.type;\n\n    const source = (() => {\n      const value: IniUpdateValues[\"source\"][\"value\"] = [];\n\n      const src = journalEntry?.source;\n\n      switch (src?.__typename) {\n        case \"Person\":\n          value.push(JournalEntrySourceType.Person, src);\n          break;\n        case \"Business\":\n          value.push(JournalEntrySourceType.Business, src);\n          break;\n        case \"Department\":\n          // The source type is the root, for Dept is always a business.\n          value.push(JournalEntrySourceType.Business);\n          const ancestorDeptQueue: string[] = [];\n          for (const ancestor of src.ancestors) {\n            if (ancestor.__typename === \"Business\") {\n              value.push(ancestor);\n            } else {\n              ancestorDeptQueue.push(ancestor.id);\n            }\n          }\n\n          const bizAncestor = value[1] as SrcEntryBizOptFragment;\n\n          if (ancestorDeptQueue.length > 0) {\n            const ancestorDepts: SrcEntryDeptOptFragment[] = [];\n            for (const dept of bizAncestor.departments) {\n              const index = ancestorDeptQueue.indexOf(dept.id);\n\n              if (index === -1) {\n                continue;\n              }\n\n              // Be lazy about finding depts\n              if (ancestorDepts.push(dept) === ancestorDeptQueue.length) {\n                break;\n              }\n            }\n\n            // Ensure order\n            ancestorDepts.sort((a, b) => {\n              if (a.id === b.parent.id || bizAncestor.id || a.parent.id) {\n                return -1;\n              } else if (b.id === a.parent.id) {\n                return 1;\n              } else {\n                return 0;\n              }\n            });\n\n            value.push(...ancestorDepts);\n          }\n      }\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const iniUpdateValues: IniUpdateValues = {\n      date,\n      category,\n      paymentMethod,\n      department,\n      total,\n      reconciled,\n      description,\n      type,\n      source,\n    };\n\n    return iniUpdateValues;\n  }, [journalEntry]);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<UpdateValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      try {\n        formikHelpers.setStatus(null);\n        await submitUpdate(\n          client,\n          initialValues,\n          entryId as string,\n          values,\n          formikHelpers\n        );\n        onClose();\n      } catch (error) {\n        console.error(error);\n        formikHelpers.setStatus({\n          msg: error.message ?? `${error}`,\n          type: FormikStatusType.ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, initialValues, entryId, onClose]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<UpdateValues>) => (\n      <UpdateEntryDialog\n        open={open}\n        onClose={onClose}\n        onExited={onExited}\n        loading={loading}\n        journalEntry={journalEntry ?? null}\n        handleSubmit={props.handleSubmit}\n      />\n    ),\n    [open, onClose, onExited, loading, journalEntry]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as UpdateValues}\n      initialStatus={initialStatus}\n      journalEntry={data?.journalEntry ?? null}\n      loading={loading}\n      onSubmit={onSubmit}\n      enableReinitialize={true}\n      children={children}\n    />\n  );\n};\n\nexport default UpdateEntry;\n","import React, { useCallback, useMemo } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Box,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Delete as DeleteIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport {\n  DeleteEntryMutation,\n  DeleteEntryMutationVariables as DeleteEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\n\nconst DELETE_ENTRY = gql`\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst DeleteEntry = (props: {\n  entryId: string | null;\n  onClose: () => void;\n}) => {\n  const { entryId, onClose } = props;\n\n  const [deleteEntry, { loading, error }] = useMutation<\n    DeleteEntryMutation,\n    DeleteEntryVars\n  >(DELETE_ENTRY);\n\n  const hasError = !!error;\n\n  const onDelete = useCallback(\n    (event) => {\n      deleteEntry({ variables: { id: entryId as string } }).then(() =>\n        onClose()\n      );\n    },\n    [entryId, deleteEntry, onClose]\n  );\n\n  const title = useMemo(() => {\n    if (hasError) {\n      return \"Error\";\n    } else if (loading) {\n      return \"Deleting Entry...\";\n    }\n    return \"Delete Entry\";\n  }, [hasError, loading]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={!!entryId}\n      maxWidth=\"sm\"\n      fullWidth\n      disableBackdropClick={loading}\n      disableEscapeKeyDown={loading}\n      onClose={onClose}\n    >\n      <DialogTitle\n        style={hasError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {loading && <OverlayLoading zIndex=\"modal\" />}\n        <DialogContent>\n          {hasError && (\n            <DialogContentText color=\"error\">\n              {error?.message as string}\n            </DialogContentText>\n          )}\n          {!hasError && (\n            <DialogContentText>\n              Are you sure you want to delete this entry?\n            </DialogContentText>\n          )}\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!hasError && (\n          <Button\n            disabled={loading}\n            onClick={onDelete}\n            startIcon={<DeleteIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Delete\n          </Button>\n        )}\n        <Button\n          disabled={loading}\n          startIcon={!hasError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {hasError ? \"Close\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default DeleteEntry;\n","import React, { useCallback, useMemo } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Box,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Delete as DeleteIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport {\n  DeleteRefundMutation,\n  DeleteRefundMutationVariables as DeleteRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\n\nconst DELETE_REFUND = gql`\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst DeleteRefund = (props: {\n  refundId: string | null;\n  onClose: () => void;\n}) => {\n  const { refundId, onClose } = props;\n\n  const [deleteRefund, { loading, error }] = useMutation<\n    DeleteRefundMutation,\n    DeleteRefundVars\n  >(DELETE_REFUND);\n  const hasError = !!error;\n\n  const onDelete = useCallback(\n    (event) => {\n      deleteRefund({ variables: { id: refundId as string } }).then(() =>\n        onClose()\n      );\n    },\n    [refundId, deleteRefund, onClose]\n  );\n\n  const title = useMemo(() => {\n    if (hasError) {\n      return \"Error\";\n    } else if (loading) {\n      return \"Deleting Refund...\";\n    }\n    return \"Delete Refund\";\n  }, [hasError, loading]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={!!refundId}\n      maxWidth=\"sm\"\n      fullWidth\n      disableBackdropClick={loading}\n      disableEscapeKeyDown={loading}\n      onClose={onClose}\n    >\n      <DialogTitle\n        style={hasError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {loading && <OverlayLoading zIndex=\"modal\" />}\n        <DialogContent>\n          {hasError && (\n            <DialogContentText color=\"error\">\n              {error?.message as string}\n            </DialogContentText>\n          )}\n          {!hasError && (\n            <DialogContentText>\n              Are you sure you want to delete this refund?\n            </DialogContentText>\n          )}\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!hasError && (\n          <Button\n            disabled={loading}\n            onClick={onDelete}\n            startIcon={<DeleteIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Delete\n          </Button>\n        )}\n        <Button\n          disabled={loading}\n          startIcon={!hasError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {hasError ? \"Close\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default DeleteRefund;\n","import React, {\n  useMemo,\n  forwardRef,\n  useState,\n  useCallback,\n  useEffect,\n} from \"react\";\nimport MaterialTable, {\n  Column,\n  Options,\n  Localization,\n  MaterialTableProps,\n  Components,\n  MTableBody,\n} from \"material-table\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport numeral from \"numeral\";\nimport moment from \"moment\";\nimport { capitalCase } from \"change-case\";\nimport Fuse from \"fuse.js\";\nimport {\n  Done as DoneIcon,\n  Delete as DeleteIcon,\n  AddCircle as AddCircleIcon,\n  CheckCircle as CheckCircleIcon,\n} from \"@material-ui/icons\";\nimport {\n  AddBox,\n  ArrowDownward,\n  Check,\n  ChevronLeft,\n  ChevronRight,\n  Clear,\n  DeleteOutline,\n  Edit,\n  FilterList,\n  FirstPage,\n  LastPage,\n  Remove,\n  SaveAlt,\n  Search,\n  ViewColumn,\n} from \"@material-ui/icons\";\nimport {\n  Box,\n  TableBody,\n  TableRow,\n  TableCell,\n  Typography,\n} from \"@material-ui/core\";\nimport { green, red } from \"@material-ui/core/colors\";\nimport { BankTransferIn, BankTransferOut } from \"mdi-material-ui\";\nimport gql from \"graphql-tag\";\n\nimport {\n  JournalEntries_1Query as JournalEntriesQuery,\n  JournalEntries_1QueryVariables as JournalEntriesQueryVars,\n  JournalEntry_1Fragment as JournalEntryFragment,\n  JournalEntryRefund_1Fragment as JournalEntryRefundFragment,\n  JournalEntryType,\n  OnEntryUpsert_1Subscription as OnEntryUpsert,\n  ReconcileEntryMutation as ReconcileEntry,\n  ReconcileEntryMutationVariables as ReconcileEntryVars,\n  ReconcileRefundMutation as ReconcileRefund,\n  ReconcileRefundMutationVariables as ReconcileRefundVars,\n} from \"../../../apollo/graphTypes\";\nimport {\n  JOURNAL_ENTRIES,\n  JOURNAL_ENTRY_FRAGMENT,\n} from \"../Table/JournalEntries.gql\";\nimport { CHECK_ID } from \"../constants\";\nimport AddRefund from \"../Upsert/Refunds/AddRefund\";\nimport UpdateRefund from \"../Upsert/Refunds/UpdateRefund\";\nimport AddEntry from \"../Upsert/Entries/AddEntry\";\nimport UpdateEntry from \"../Upsert/Entries/UpdateEntry\";\nimport DeleteEntry from \"../Upsert/Entries/DeleteEntry\";\nimport DeleteRefund from \"../Upsert/Refunds/DeleteRefund\";\n\nexport enum JournalMode {\n  View,\n  Reconcile,\n}\n\nconst tableIcons = {\n  Add: forwardRef<SVGSVGElement>((props, ref) => (\n    <AddBox {...props} ref={ref} />\n  )),\n  Check: forwardRef<SVGSVGElement>((props, ref) => (\n    <Check {...props} ref={ref} />\n  )),\n  Clear: forwardRef<SVGSVGElement>((props, ref) => (\n    <Clear {...props} ref={ref} />\n  )),\n  Delete: forwardRef<SVGSVGElement>((props, ref) => (\n    <DeleteOutline {...props} ref={ref} />\n  )),\n  DetailPanel: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef<SVGSVGElement>((props, ref) => (\n    <Edit {...props} ref={ref} />\n  )),\n  Export: forwardRef<SVGSVGElement>((props, ref) => (\n    <SaveAlt {...props} ref={ref} />\n  )),\n  Filter: forwardRef<SVGSVGElement>((props, ref) => (\n    <FilterList {...props} ref={ref} />\n  )),\n  FirstPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <FirstPage {...props} ref={ref} />\n  )),\n  LastPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <LastPage {...props} ref={ref} />\n  )),\n  NextPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  PreviousPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef<SVGSVGElement>((props, ref) => (\n    <Clear {...props} ref={ref} />\n  )),\n  Search: forwardRef<SVGSVGElement>((props, ref) => (\n    <Search {...props} ref={ref} />\n  )),\n  SortArrow: forwardRef<SVGSVGElement>((props, ref) => (\n    <ArrowDownward {...props} ref={ref} />\n  )),\n  ThirdStateCheck: forwardRef<SVGSVGElement>((props, ref) => (\n    <Remove {...props} ref={ref} />\n  )),\n  ViewColumn: forwardRef<SVGSVGElement>((props, ref) => (\n    <ViewColumn {...props} ref={ref} />\n  )),\n};\n\nexport type Entry =\n  | JournalEntryFragment\n  | (Omit<JournalEntryFragment, \"__typename\" | \"refunds\"> &\n      JournalEntryRefundFragment & { refunds: string });\n\nconst entriesGen = function* (\n  entry: JournalEntryFragment\n): IterableIterator<Entry> {\n  yield entry;\n  const type =\n    entry.type === JournalEntryType.Credit\n      ? JournalEntryType.Debit\n      : JournalEntryType.Credit;\n  for (const refund of entry.refunds) {\n    yield {\n      ...entry,\n      ...refund,\n      type,\n      description: refund.description || entry.description,\n      refunds: entry.id,\n    };\n  }\n};\n\nconst ON_ENTRY_UPSERT = gql`\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst RECONCILE_ENTRY = gql`\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst RECONCILE_REFUND = gql`\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst Journal = (props: {\n  journalTitle?: string;\n  deptId?: string;\n  mode: JournalMode;\n}) => {\n  const { deptId = null, journalTitle = null, mode } = props;\n\n  // Add Entry\n  const [addEntryOpen, setAddEntryOpen] = useState<boolean>(false);\n  const addEntryOnClose = useCallback(() => void setAddEntryOpen(false), [\n    setAddEntryOpen,\n  ]);\n\n  // Update Entry\n  const [updateEntryOpen, setUpdateEntryOpen] = useState<boolean>(false);\n  const [updateEntry, setUpdateEntry] = useState<string | null>(null);\n\n  const updateEntryOnClose = useCallback(() => void setUpdateEntryOpen(false), [\n    setUpdateEntryOpen,\n  ]);\n  const updateEntryOnExited = useCallback(() => void setUpdateEntry(null), [\n    setUpdateEntry,\n  ]);\n\n  // Delete Entry\n  const [deleteEntry, setDeleteEntry] = useState<string | null>(null);\n  const deleteEntryOnClose = useCallback(() => void setDeleteEntry(null), [\n    setDeleteEntry,\n  ]);\n\n  // Add Refund\n  const [addRefundOpen, setAddRefundOpen] = useState<boolean>(false);\n  const [addRefundToEntry, setAddRefundToEntry] = useState<string | null>(null);\n\n  const addRefundOnClose = useCallback(() => void setAddRefundOpen(false), [\n    setAddRefundOpen,\n  ]);\n  const addRefundOnExited = useCallback(() => void setAddRefundToEntry(null), [\n    setAddRefundToEntry,\n  ]);\n\n  // Update Refund\n  const [updateRefundOpen, setUpdateRefundOpen] = useState<boolean>(false);\n  const [updateRefund, setUpdateRefund] = useState<{\n    entryId: string;\n    refundId: string;\n  } | null>(null);\n\n  const updateRefundOnClose = useCallback(\n    () => void setUpdateRefundOpen(false),\n    [setUpdateRefundOpen]\n  );\n  const updateRefundOnExited = useCallback(() => void setUpdateRefund(null), [\n    setUpdateRefund,\n  ]);\n\n  // Delete Entry\n  const [deleteRefund, setDeleteRefund] = useState<string | null>(null);\n  const deleteRefundOnClose = useCallback(() => void setDeleteRefund(null), [\n    setDeleteRefund,\n  ]);\n\n  // Reconcile Entry\n  const [reconcileEntry, { loading: reconcilingEntry }] = useMutation<\n    ReconcileEntry,\n    ReconcileEntryVars\n  >(RECONCILE_ENTRY);\n  // Reconcile Refund\n  const [reconcileRefund, { loading: reconcilingRefund }] = useMutation<\n    ReconcileRefund,\n    ReconcileRefundVars\n  >(RECONCILE_REFUND);\n\n  const variables = useMemo<JournalEntriesQueryVars | undefined>(() => {\n    return deptId\n      ? {\n          where: { department: { eq: deptId } },\n        }\n      : undefined;\n  }, [deptId]);\n\n  const { loading, error, data, subscribeToMore } = useQuery<\n    JournalEntriesQuery,\n    JournalEntriesQueryVars\n  >(JOURNAL_ENTRIES, {\n    variables,\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const isLoading = loading && !data?.journalEntries;\n\n  // Subscribe to updates\n  useEffect(() => {\n    return subscribeToMore<OnEntryUpsert>({\n      document: ON_ENTRY_UPSERT,\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data) {\n          return prev;\n        }\n\n        const upsertEntry = subscriptionData.data.journalEntryUpserted;\n\n        const ancestors = upsertEntry.department.ancestors;\n\n        if (\n          deptId &&\n          upsertEntry.department.id !== deptId &&\n          ancestors.every((dept) => (dept as any).id !== deptId)\n        ) {\n          // Filter entry out of query results if department changes.\n          const journalEntriesFiltered = prev.journalEntries.filter(\n            (entry) => entry.id !== upsertEntry.id\n          );\n\n          if (journalEntriesFiltered.length === prev.journalEntries.length) {\n            return prev;\n          }\n\n          return Object.assign({}, prev, {\n            journalEntries: journalEntriesFiltered,\n          });\n        }\n\n        // Apollo will take care of updating if entry already exists in cache.\n        if (prev.journalEntries.some((entry) => entry.id === upsertEntry.id)) {\n          return prev;\n        }\n\n        return Object.assign({}, prev, {\n          journalEntries: [upsertEntry, ...prev.journalEntries],\n        });\n      },\n    });\n  }, [deptId, subscribeToMore]);\n\n  const columns = useMemo<Column<Entry>[]>(() => {\n    const searchable = false;\n    const filtering = false;\n    const sorting = false;\n\n    return [\n      {\n        field: \"reconciled\",\n        title: \"Reconciled\",\n        render: ({ reconciled }) => (reconciled ? <DoneIcon /> : null),\n        customFilterAndSearch: (filter, rowData) => {\n          const momentDate = moment(rowData.date);\n\n          const search: {\n            [P in keyof Omit<\n              Entry,\n              \"id\" | \"__typename\" | \"deleted\" | \"lastUpdate\" | \"refunds\"\n            >]-?: string[];\n          } = {\n            type: [\n              rowData.type === JournalEntryType.Credit ? \"credit\" : \"debit\",\n            ],\n            date: [\n              momentDate.format(\"dddd, MMMM Do YYYY, h:mm:ss a\"),\n              momentDate.toString(),\n              momentDate.format(\"M/d/YY\"),\n              momentDate.format(\"M/d/YYYY\"),\n              momentDate.format(\"MMM DD, YYYY\"),\n            ],\n            description: [rowData.description || \"\"],\n            reconciled: [rowData.reconciled ? \"reconciled\" : \"\"],\n            department: [rowData.department.name],\n            category: [rowData.category.name],\n            paymentMethod: [\n              rowData.paymentMethod.parent?.id === CHECK_ID\n                ? `CK-${rowData.paymentMethod.name}`\n                : rowData.paymentMethod.name,\n            ],\n            source: [\n              (() => {\n                switch (rowData.source.__typename) {\n                  case \"Person\":\n                    return `${rowData.source.name.first} ${rowData.source.name.last}`;\n                  case \"Business\":\n                    return rowData.source.bizName;\n                  case \"Department\":\n                    return rowData.source.deptName;\n                }\n              })(),\n            ],\n            total: [\n              numeral(rowData.total.num / rowData.total.den).format(\"$0,0.00\"),\n            ],\n          };\n\n          const fuseResult = new Fuse([search], {\n            threshold: 0.4,\n            useExtendedSearch: true,\n            keys: [\n              \"date\",\n              \"type\",\n              \"description\",\n              \"reconciled\",\n              \"department\",\n              \"category\",\n              \"paymentMethod\",\n              \"source\",\n              \"total\",\n            ],\n          }).search(filter);\n          return fuseResult.length > 0;\n        },\n        hidden: mode === JournalMode.Reconcile,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"total\",\n        title: \"Total\",\n        render: ({ total: { num, den } }) =>\n          numeral(num / den).format(\"$0,0.00\"),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"date\",\n        title: \"Date\",\n        render: ({ date }) => moment(date).format(\"MMM DD, YYYY\"),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"category\",\n        title: \"Category\",\n        render: ({ category }) => capitalCase(category.name),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"source\",\n        title: \"Source\",\n        render: ({ source }) => {\n          switch (source.__typename) {\n            case \"Person\":\n              return `${source.name.first} ${source.name.last}`;\n            case \"Business\":\n              return source.bizName;\n            case \"Department\":\n              return source.deptName;\n          }\n        },\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"paymentMethod\",\n        title: \"Payment Method\",\n        render: ({ paymentMethod }) =>\n          paymentMethod.parent?.id === CHECK_ID\n            ? `CK-${paymentMethod.name}`\n            : paymentMethod.name,\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"description\",\n        title: \"Description\",\n        render: ({ description }) => description,\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"department\",\n        title: \"Department\",\n        render: ({ department }) => capitalCase(department.name),\n        searchable,\n        filtering,\n        sorting,\n      },\n    ];\n  }, [mode]);\n\n  const localization = useMemo<Localization>(\n    () => ({\n      toolbar: {\n        searchTooltip: (\n          <Box fontSize={12} component=\"span\">\n            [abc] | [efg] = \"abc\" OR \"efg\"\n            <br />\n            '[abc] = EXACTLY \"abc\"\n            <br />\n            ![abc] = NOT \"abc\"\n            <br />\n            ^[abc] = STARTS WITH \"abc\"\n            <br />\n            !^[abc] = DOES NOT START WITH \"abc\"\n            <br />\n            [abc]$ = ENDS WITH \"abc\"\n            <br />\n            ![abc]$ = DOES NOT END WITH \"abc\"\n          </Box>\n        ) as any,\n        nRowsSelected: \"Reconcile {0} Entry(s)\",\n      },\n    }),\n    []\n  );\n\n  const options = useMemo<Options>(\n    () => ({\n      rowStyle: ({ type }: Entry) => ({\n        color: type === JournalEntryType.Credit ? green[900] : red[900],\n      }),\n      // -53px = pagination, -64px = toolbar\n      maxBodyHeight: \"calc(100vh - 53px - 64px)\",\n      headerStyle: { position: \"sticky\", top: 0 },\n      pageSize: 25,\n      pageSizeOptions: [25, 50, 100],\n      showTitle: !!journalTitle,\n      selection: mode === JournalMode.Reconcile,\n      showSelectAllCheckbox: false,\n    }),\n    [journalTitle, mode]\n  );\n\n  const actions = useMemo<MaterialTableProps<Entry>[\"actions\"]>(() => {\n    if (mode === JournalMode.Reconcile) {\n      return [\n        {\n          icon: ((props) => <CheckCircleIcon {...props} />) as any,\n          tooltip: \"Reconcile Selected\",\n          position: \"toolbarOnSelect\",\n          iconProps: {\n            color: \"secondary\",\n            fontSize: \"large\",\n          },\n          onClick: async (event, rowData) => {\n            await Promise.all(\n              (Array.isArray(rowData) ? rowData : [rowData]).map(\n                async (entry) => {\n                  if (entry.reconciled) {\n                    return;\n                  }\n\n                  try {\n                    if (entry.__typename === \"JournalEntryRefund\") {\n                      await reconcileRefund({ variables: { id: entry.id } });\n                    } else {\n                      await reconcileEntry({ variables: { id: entry.id } });\n                    }\n                  } catch (error) {\n                    console.error(error);\n                  }\n                }\n              )\n            );\n          },\n        },\n      ];\n    }\n\n    return [\n      (rowData) => {\n        const isRefund = rowData.__typename === \"JournalEntryRefund\";\n        return {\n          icon: DeleteIcon as any,\n          tooltip: `Delete ${isRefund ? \"Refund\" : \"Entry\"}`,\n          onClick: async (event, rowData) => {\n            await Promise.all(\n              (Array.isArray(rowData) ? rowData : [rowData]).map(\n                async (entry) => {\n                  if (entry.deleted) {\n                    return;\n                  } else if (entry.__typename === \"JournalEntryRefund\") {\n                    setDeleteRefund(entry.id);\n                  } else {\n                    setDeleteEntry(entry.id);\n                  }\n                }\n              )\n            );\n          },\n        };\n      },\n      (rowData) => {\n        const isRefund = rowData.__typename === \"JournalEntryRefund\";\n\n        return {\n          icon: Edit as any,\n          tooltip: `Update ${isRefund ? \"Refund\" : \"Entry\"}`,\n          onClick: (event, rowData) => {\n            if (isRefund) {\n              setUpdateRefundOpen(true);\n              setUpdateRefund({\n                entryId: (rowData as Entry).refunds as string,\n                refundId: (rowData as Entry).id,\n              });\n            } else {\n              setUpdateEntryOpen(true);\n              setUpdateEntry((rowData as Entry).id);\n            }\n          },\n        };\n      },\n      (rowData) => {\n        if (rowData.__typename === \"JournalEntryRefund\") {\n          return null as any;\n        }\n\n        const isCredit = rowData.type === JournalEntryType.Credit;\n\n        return {\n          icon: ((props) =>\n            isCredit ? (\n              <BankTransferOut {...props} />\n            ) : (\n              <BankTransferIn {...props} />\n            )) as any,\n          tooltip: isCredit ? \"Give Refund\" : \"Add Refund\",\n          iconProps: {\n            style: { color: isCredit ? red[900] : green[900] },\n            // color: \"secondary\",\n            // fontSize: \"large\",\n          } as any,\n          onClick: (event, rowData) => {\n            setAddRefundOpen(true);\n            setAddRefundToEntry((rowData as JournalEntryFragment).id);\n          },\n        };\n      },\n      {\n        icon: ((props) => <AddCircleIcon {...props} />) as any,\n        iconProps: {\n          color: \"secondary\",\n          fontSize: \"large\",\n        },\n        tooltip: \"Add Entry\",\n        isFreeAction: true,\n        onClick: () => {\n          setAddEntryOpen(true);\n        },\n      },\n    ];\n  }, [mode, reconcileRefund, reconcileEntry, setDeleteRefund, setDeleteEntry]);\n\n  const components = useMemo<Components>(\n    () => ({\n      Body: error\n        ? (props) => (\n            <TableBody {...props}>\n              <TableRow>\n                <TableCell\n                  colSpan={\n                    columns.length +\n                    (Array.isArray(actions) && actions.length > 0 ? 1 : 0)\n                  }\n                  align=\"left\"\n                >\n                  <Typography align=\"center\" color=\"error\" variant=\"h4\">\n                    Error Loading Entries\n                  </Typography>\n                  <Typography variant=\"body1\">{error.message}</Typography>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          )\n        : (props) => <MTableBody {...props} />,\n    }),\n    [error, columns, actions]\n  );\n\n  const journalEntries = data?.journalEntries || [];\n  const entries = useMemo(() => {\n    const filters =\n      mode === JournalMode.Reconcile\n        ? [(entry: Entry) => !entry.reconciled && !entry.deleted]\n        : [(entry: Entry) => !entry.deleted];\n\n    return journalEntries\n      .reduce((entries: Entry[], journalEntry) => {\n        for (const entry of entriesGen(journalEntry)) {\n          if (filters.every((filter) => filter(entry))) {\n            entries.push(entry);\n          }\n        }\n\n        return entries;\n      }, [])\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n  }, [journalEntries, mode]);\n\n  return (\n    <React.Fragment>\n      <MaterialTable\n        icons={tableIcons}\n        isLoading={isLoading || reconcilingEntry || reconcilingRefund}\n        columns={columns}\n        data={entries}\n        options={options}\n        localization={localization}\n        actions={actions}\n        components={components}\n        title={journalTitle ?? undefined}\n      />\n      <AddEntry deptId={deptId} open={addEntryOpen} onClose={addEntryOnClose} />\n      <UpdateEntry\n        entryId={updateEntry}\n        open={updateEntryOpen}\n        onClose={updateEntryOnClose}\n        onExited={updateEntryOnExited}\n      />\n      <DeleteEntry entryId={deleteEntry} onClose={deleteEntryOnClose} />\n      <AddRefund\n        entryId={addRefundToEntry}\n        open={addRefundOpen}\n        onClose={addRefundOnClose}\n        onExited={addRefundOnExited}\n      />\n      <UpdateRefund\n        entryId={updateRefund?.entryId ?? null}\n        refundId={updateRefund?.refundId ?? null}\n        open={updateRefundOpen}\n        onClose={updateRefundOnClose}\n        onExited={updateRefundOnExited}\n      />\n      <DeleteRefund refundId={deleteRefund} onClose={deleteRefundOnClose} />\n    </React.Fragment>\n  );\n};\n\nexport default Journal;\n","import gql from \"graphql-tag\";\n\nexport const GET_REPORT_DATA_DEPT_FRAGMENT = gql`\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n`;\n\nexport const GET_REPORT_DATA_ENTRY_FRAGMENT = gql`\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        num\n        den\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n`;\n\nexport const GET_REPORT_DATA = gql`\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_DEPT_FRAGMENT},\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { Link } from \"react-router-dom\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport TableChartIcon from \"@material-ui/icons/TableChart\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport numeral from \"numeral\";\nimport { red, green, orange, grey } from \"@material-ui/core/colors\";\nimport gql from \"graphql-tag\";\n\nimport {\n  GetReportDataQuery,\n  GetReportDataQueryVariables,\n  JournalEntryType,\n  OnEntryUpsert_2Subscription as OnEntryUpsert,\n} from \"../../apollo/graphTypes\";\nimport {\n  GET_REPORT_DATA,\n  GET_REPORT_DATA_ENTRY_FRAGMENT,\n} from \"./ReportData.gql\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../Journal/Upsert/upsertEntry.gql\";\nimport AddEntry from \"../Journal/Upsert/Entries/AddEntry\";\n\nconst colorMeter = (percentSpent: number, shade = 800) => {\n  if (percentSpent < 0.75) {\n    return green[shade];\n  } else if (percentSpent < 0.9) {\n    return orange[shade];\n  } else {\n    return red[shade];\n  }\n};\n\nconst BudgetMeter = (props: { spentPercentage: number; height: number }) => {\n  const { spentPercentage, height } = props;\n\n  return (\n    <Box\n      height={height}\n      bgcolor={colorMeter(spentPercentage)}\n      display=\"flex\"\n      justifyContent=\"flex-start\"\n    >\n      <Box\n        height=\"100%\"\n        width={`${100 * spentPercentage}%`}\n        bgcolor={grey[400]}\n      />\n    </Box>\n  );\n};\n\ninterface DeptReportObj {\n  name: string;\n  spent: number;\n  budget: number | null;\n}\n\nexport const DEPT_FOR_UPSERT_ADD = gql`\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst ON_ENTRY_UPSERT = gql`\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nconst Dashboard = function (props: { deptId: string }) {\n  const { deptId } = props;\n\n  const [addEntryOpen, setAddEntryOpen] = useState<boolean>(false);\n  const addEntryOnClose = useCallback(() => void setAddEntryOpen(false), [\n    setAddEntryOpen,\n  ]);\n\n  const variables = useMemo(\n    () => ({\n      deptId,\n      where: {\n        department: { eq: deptId },\n        deleted: false,\n      },\n    }),\n    [deptId]\n  );\n\n  const { loading, error, data, subscribeToMore } = useQuery<\n    GetReportDataQuery,\n    GetReportDataQueryVariables\n  >(GET_REPORT_DATA, {\n    variables,\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const isLoading = loading && !data?.journalEntries;\n\n  // Subscribe to updates\n  useEffect(() => {\n    return subscribeToMore<OnEntryUpsert>({\n      document: ON_ENTRY_UPSERT,\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data) {\n          return prev;\n        }\n\n        const upsertEntry = subscriptionData.data.journalEntryUpserted;\n\n        const ancestors = upsertEntry.department.ancestors;\n\n        if (\n          deptId &&\n          upsertEntry.department.id !== deptId &&\n          ancestors.every((dept) => (dept as any).id !== deptId)\n        ) {\n          // Filter entry out of query results if department changes.\n          const journalEntriesFiltered = prev.journalEntries.filter(\n            (entry) => entry.id !== upsertEntry.id\n          );\n\n          if (journalEntriesFiltered.length === prev.journalEntries.length) {\n            return prev;\n          }\n\n          return Object.assign({}, prev, {\n            journalEntries: journalEntriesFiltered,\n          });\n        }\n\n        // Apollo will take care of updating if entry already exists in cache.\n        if (prev.journalEntries.some((entry) => entry.id === upsertEntry.id)) {\n          return prev;\n        }\n\n        return Object.assign({}, prev, {\n          journalEntries: [upsertEntry, ...prev.journalEntries],\n        });\n      },\n    });\n  }, [deptId, subscribeToMore]);\n\n  const entries = useMemo(() => {\n    return (data?.journalEntries || []).filter((entry) => !entry.deleted);\n  }, [data]);\n  const deptName = data?.department?.name || \"\";\n\n  useEffect(() => {\n    document.title = deptName;\n  }, [deptName]);\n\n  const department = data?.department || null;\n\n  const {\n    totalRemaining,\n    budget,\n    spentToBudgetRatio,\n    deptReport,\n  } = useMemo(() => {\n    // Generate department report objects\n    const deptReport = new Map<string, DeptReportObj>();\n    let subDeptBudgetAg = 0;\n\n    if (department) {\n      const budget = (() => {\n        if (department.budget) {\n          const { num, den } = department.budget.amount;\n          return num / den;\n        }\n        return null;\n      })();\n\n      deptReport.set(department.id, {\n        name: department.name,\n        spent: 0,\n        budget,\n      });\n\n      for (const subDept of department.descendants) {\n        let budget: null | number = null;\n\n        if (subDept.budget) {\n          const { num, den } = subDept.budget.amount;\n          const subBudgetDec = num / den;\n          subDeptBudgetAg += subBudgetDec;\n          budget = subBudgetDec;\n        }\n\n        deptReport.set(subDept.id, {\n          name: subDept.name,\n          spent: 0,\n          budget,\n        });\n      }\n    }\n\n    // Calculating aggregate depts and credits\n    let spent = 0;\n    for (const entry of entries) {\n      if (entry.deleted) {\n        continue;\n      }\n      const deptReportObj = deptReport.get(\n        entry.department.id\n      ) as DeptReportObj;\n\n      let entryTotal = entry.total.num / entry.total.den;\n\n      // Aggregate refunds\n      for (const refund of entry.refunds) {\n        if (refund.deleted) {\n          continue;\n        }\n        entryTotal -= refund.total.num / refund.total.den;\n      }\n\n      if (entry.type === JournalEntryType.Credit) {\n        spent -= entryTotal;\n        deptReportObj.spent -= entryTotal;\n      } else {\n        spent += entryTotal;\n\n        deptReportObj.spent += entryTotal;\n      }\n    }\n\n    // Format values\n    const budgetDec = (() => {\n      if (department?.budget) {\n        const { num, den } = department?.budget?.amount || { num: 0, den: 1 };\n        return num / den;\n      }\n\n      return subDeptBudgetAg;\n    })();\n\n    const totalRemaining = numeral(budgetDec - spent).format(\"$0,0.00\");\n    const budget = numeral(budgetDec).format(\"$0,0.00\");\n    const spentToBudgetRatio = spent / budgetDec;\n\n    return {\n      totalRemaining,\n      budget,\n      spentToBudgetRatio,\n      deptReport,\n    };\n  }, [entries, department]);\n\n  const subDeptCards = useMemo(() => {\n    const subDeptCards: JSX.Element[] = [];\n\n    for (const [id, { budget, spent, name }] of deptReport) {\n      // Do not include root department\n      if (id === department?.id) {\n        continue;\n      }\n\n      const card = (\n        <Grid key={id} item xs={12} md={4} lg={3}>\n          <Card>\n            <CardHeader\n              titleTypographyProps={{\n                noWrap: true,\n              }}\n              title={name}\n            />\n            <CardContent>\n              {(() => {\n                if (budget === null) {\n                  return (\n                    <Box color={spent > 0 ? red[900] : green[900]} clone>\n                      <Typography variant=\"h6\">\n                        {`Spent: ${numeral(Math.abs(spent)).format(\"$0,0.00\")}`}\n                      </Typography>\n                    </Box>\n                  );\n                }\n\n                const totalRemaining = budget - spent;\n\n                return (\n                  <React.Fragment>\n                    <Box color={colorMeter(spent / budget, 900)} clone>\n                      <Typography variant=\"h6\">{`${numeral(\n                        totalRemaining\n                      ).format(\"$0,0.00\")} Remaining`}</Typography>\n                    </Box>\n                    <Typography variant=\"body1\">{`of ${numeral(budget).format(\n                      \"$0,0.00\"\n                    )}`}</Typography>\n                    <BudgetMeter spentPercentage={spent / budget} height={5} />\n                  </React.Fragment>\n                );\n              })()}\n            </CardContent>\n          </Card>\n        </Grid>\n      );\n\n      subDeptCards.push(card);\n    }\n\n    return subDeptCards;\n  }, [deptReport, department]);\n\n  const onClickAddEntry = useCallback((event?) => setAddEntryOpen(true), [\n    setAddEntryOpen,\n  ]);\n\n  if (isLoading) {\n    return <p>Loading...</p>;\n  } else if (error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" overflow=\"hidden\" clone>\n      <Container>\n        <Box padding={8}>\n          <Grid container alignItems=\"center\" justify=\"center\" spacing={4}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                startIcon={<AddIcon />}\n                children={\"New Entry\"}\n                onClick={onClickAddEntry}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}/reconcile`}\n                variant=\"contained\"\n                startIcon={<DoneAllIcon />}\n                children={\"Reconcile\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                startIcon={<AssessmentIcon />}\n                children={\"Reports\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}`}\n                variant=\"contained\"\n                startIcon={<TableChartIcon />}\n                children={\"Journal\"}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n        <Box flexGrow={1} overflow=\"auto\">\n          <Grid justify=\"center\" container spacing={2}>\n            <Grid item xs={12}>\n              <Typography align=\"center\" variant=\"h3\">\n                {deptName}\n              </Typography>\n              <Box color={colorMeter(spentToBudgetRatio)}>\n                <Typography align=\"center\" variant=\"h4\">\n                  {`${totalRemaining} Remaining`}\n                </Typography>\n              </Box>\n              <Typography align=\"center\" variant=\"subtitle1\">\n                {`of ${budget}`}\n              </Typography>\n              <BudgetMeter spentPercentage={spentToBudgetRatio} height={10} />\n            </Grid>\n            {subDeptCards}\n          </Grid>\n        </Box>\n        <AddEntry\n          deptId={deptId}\n          open={addEntryOpen}\n          onClose={addEntryOnClose}\n        />\n      </Container>\n    </Box>\n  );\n};\n\nexport default Dashboard;\n","import React, {useCallback, useEffect, useState, useMemo} from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport {DeptsForNav_1Query as DeptsForNavQuery} from \"../apollo/graphTypes\";\n\nconst DEPTS_FOR_NAV = gql`\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n`;\n\nconst TopNav = function(props) {\n\n  const {loading, error, data} = useQuery<DeptsForNavQuery>(DEPTS_FOR_NAV);\n\n  const [value, setValue] = useState<string | null>(null);\n\n  const depts = (data?.departments || []);\n\n  type Department = typeof depts[0];\n\n  const {rootDepts, virtualRoots} = useMemo(() => {\n    \n    const rootDepts:Department[] = [];\n    const virtualRoots = new Set<string>();\n\n    for(const dept of depts) {\n      \n      if(dept.parent.__typename === \"Business\") {\n        rootDepts.push(dept);\n      }\n\n      if(dept.virtualRoot) {\n        virtualRoots.add(dept.id);\n      }\n\n    }\n\n    return {rootDepts, virtualRoots};\n\n  },[depts]);\n\n  const subDepts =  useMemo(() => {\n\n    const subDepts:Department[] = [];\n\n    if(value && virtualRoots.has(value)) {\n      \n      for(const dept of depts) {\n  \n        if(dept.parent.id === value) {\n  \n          subDepts.push(dept);\n  \n        }\n  \n      }\n\n    }\n\n    return subDepts;\n\n  }, [virtualRoots, value, depts]);\n\n  useEffect(() => { document.title = \"Select Department\"; });\n\n  const onChange = useCallback((event?) => {\n    setValue(event?.target?.value || null);\n  },[setValue]);\n  \n  if(loading) {\n    return <p>Loading...</p>;\n  } else if(error) {\n    return <p>{error.message}</p>;\n  }\n\n\n  const showSubDepts = subDepts.length > 0;\n\n  return <Box\n    flexGrow={1}\n    display=\"flex\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    flexDirection=\"column\"\n    clone\n  >\n    <Container>\n      <Box padding={4} clone>\n        <Typography align=\"center\" color=\"primary\" variant=\"h3\">\n          Select Department\n        </Typography>\n      </Box>\n      <Box minWidth=\"250px !important\" clone>\n        <FormControl variant=\"filled\">\n          <InputLabel>Department</InputLabel>\n          <Select\n            value={value} \n            onChange={onChange}\n            autoWidth\n          >{rootDepts.map((dept) => {\n            \n            const props = {\n              component:Link,\n              to:`/department/${dept.id}`,\n              key:dept.id,\n              value:dept.id,\n              children:dept.name\n            }  as any;\n\n            if(dept.virtualRoot) {\n              delete props.component;\n              delete props.to;\n            }\n\n            return <MenuItem {...props}/>;\n          \n          })}</Select>\n        </FormControl>\n      </Box>\n      {showSubDepts &&\n        <Box pt={2}>\n          <Box pt={2} minWidth=\"250px !important\" clone>\n            <FormControl variant=\"filled\">\n              <InputLabel>Sub Department</InputLabel>\n              <Select autoWidth>{subDepts.map((dept) => {\n                  const props = {\n                    component:Link,\n                    to:`/department/${dept.id}`,\n                    key:dept.id,\n                    value:dept.id,\n                    children:dept.name\n                  }  as any;\n      \n                  return <MenuItem {...props}/>;\n              })}</Select>\n            </FormControl>\n        </Box>\n      </Box>}\n        \n    </Container>\n   </Box>;\n\n}\n\nexport default TopNav;","import React from \"react\";\nimport { Route, Switch, useParams } from \"react-router-dom\";\n\n// import Journal from \"./components/Journal/Table/Journal\";\nimport Journal from \"./components/Journal/MaterialTable/Journal\";\nimport { JournalMode } from \"./components/Journal/MaterialTable/Journal\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\nimport TopNav from \"./components/TopNav\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { DepartmentName_1Query as DepartmentName } from \"./apollo/graphTypes\";\nimport gql from \"graphql-tag\";\n\nconst DashBoardRender = (props) => {\n  const { id } = useParams();\n  return id ? <Dashboard deptId={id} /> : <div>Error: No Dept ID!</div>;\n};\n\nconst DEPARTMENT_NAME = gql`\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n`;\n\nconst JournalViewRender = (props) => {\n  const { id } = useParams();\n  const { loading, error, data } = useQuery<DepartmentName>(DEPARTMENT_NAME, {\n    variables: { id },\n  });\n  const journalTitle = data?.department?.name\n    ? data.department.name\n    : undefined;\n  return (\n    <Journal mode={JournalMode.View} deptId={id} journalTitle={journalTitle} />\n  );\n};\n\nconst JournalReconcileRender = (props) => {\n  const { id } = useParams();\n  const { loading, error, data } = useQuery<DepartmentName>(DEPARTMENT_NAME, {\n    variables: { id },\n  });\n  const journalTitle = data?.department?.name\n    ? `Reconcile ${data.department.name}`\n    : \"Reconcile\";\n  return (\n    <Journal\n      mode={JournalMode.Reconcile}\n      deptId={id}\n      journalTitle={journalTitle}\n    />\n  );\n};\n\nconst Routes = (props) => {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={TopNav} />\n      <Route exact path=\"/department/:id\" component={DashBoardRender} />\n      <Route exact path=\"/journal\" component={Journal} />\n      <Route exact path=\"/journal/:id\" component={JournalViewRender} />\n      <Route\n        exact\n        path=\"/journal/:id/reconcile\"\n        component={JournalReconcileRender}\n      />\n    </Switch>\n  );\n};\n\nexport default Routes;\n","import {combineReducers} from \"redux\";\nimport * as _ from  \"lodash\"; \nimport isEqual from \"lodash.isequal\";\n\nimport {JournalEntrySourceType, JournalEntrySourceInput, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {\n  \n  Create, CREATE, Cancel, CANCEL, Clear, CLEAR,\n\n  SET_SUBMIT_STATUS, SetSubmitStatus, SET_SUBMIT_ERROR, SetSubmitError, \n  CLEAR_SUBMIT_ERROR, ClearSubmitError,\n\n  SET_TYPE_VALUE, SetTypeValue, SET_TYPE_ERROR,SetTypeError,\n  CLEAR_TYPE_ERROR, ClearTypeError,\n  \n  SetDateInput, SET_DATE_INPUT, ClearDateInput, CLEAR_DATE_INPUT,\n  SetDateValue, SET_DATE_VALUE, ClearDateValue, CLEAR_DATE_VALUE,\n  SetDateError, SET_DATE_ERROR, ClearDateError, CLEAR_DATE_ERROR,\n  \n  SetDeptInput, SET_DEPT_INPUT, ClearDeptInput, CLEAR_DEPT_INPUT,\n  SetDeptValue, SET_DEPT_VALUE, ClearDeptValue, CLEAR_DEPT_VALUE,\n  SetDeptError, SET_DEPT_ERROR, ClearDeptError, CLEAR_DEPT_ERROR,\n  SetDeptOpen , SET_DEPT_OPEN,\n\n  SET_CAT_INPUT, SetCatInput, CLEAR_CAT_INPUT, ClearCatInput, SET_CAT_VALUE,\n  SetCatValue, CLEAR_CAT_VALUE, ClearCatValue, SET_CAT_ERROR, SetCatError,\n  CLEAR_CAT_ERROR, ClearCatError, SET_CAT_OPEN, SetCatOpen,\n  \n  SetSrcType, SET_SRC_TYPE,\n  SetSrcInput, SET_SRC_INPUT, ClearSrcInput, CLEAR_SRC_INPUT,\n  SetSrcValue, SET_SRC_VALUE, ClearSrcValue, CLEAR_SRC_VALUE,\n  SetSrcError, SET_SRC_ERROR, ClearSrcError, CLEAR_SRC_ERROR,\n  SetSrcOpen , SET_SRC_OPEN,\n\n  SetPayMethodValue, SET_PAY_METHOD_VALUE, ClearPayMethodValue, \n  CLEAR_PAY_METHOD_VALUE, SET_PAY_METHOD_ERROR, SetPayMethodError,\n  CLEAR_PAY_METHOD_ERROR, ClearPayMethodError,\n\n  SET_DSCRPT_VALUE, SetDscrptValue, CLEAR_DSCRPT_VALUE, ClearDscrptValue,\n\n  SET_TOTAL_INPUT, SetTotalInput, CLEAR_TOTAL_INPUT, ClearTotalInput,\n  SET_TOTAL_VALUE, SetTotalValue, CLEAR_TOTAL_VALUE, ClearTotalValue,\n  SET_TOTAL_ERROR, SetTotalError, CLEAR_TOTAL_ERROR, ClearTotalError,\n\n  SET_RECONCILED_VALUE, SetReconciledValue,\n  CLEAR_RECONCILED_VALUE, ClearReconciledValue\n\n} from \"../actionTypes/journalEntryUpsert\";\nimport {InputValue, reduceOneById} from \"./utils\";\n\ntype Actions = Create | Cancel | Clear |\n  SetSrcInput | SetDateInput |  ClearDateInput | SetDateValue | ClearDateValue |\n  SetDateError | ClearDateError | SetSrcInput | ClearSrcInput | SetSrcValue |\n  ClearSrcValue | SetSrcError | ClearSrcError | SetSrcOpen | SetDeptInput |\n  ClearDeptInput | SetDeptValue | ClearDeptValue | SetDeptError |\n  ClearDeptError | SetDeptOpen | SetPayMethodValue | ClearPayMethodValue |\n  SetTotalInput | ClearTotalInput | SetTotalValue | ClearTotalValue |\n  SetTotalError | ClearTotalError | SetSubmitStatus | SetSubmitError | \n  ClearSubmitError | SetSrcType | SetPayMethodError | ClearPayMethodError |\n  SetDscrptValue | ClearDscrptValue | SetReconciledValue |\n  ClearReconciledValue | SetCatInput | ClearCatInput | SetCatValue |\n  ClearCatValue | SetCatError | ClearCatError | SetCatOpen | SetTypeValue |\n  SetTypeError | ClearTypeError;\n\n\nconst type = (state = new InputValue<JournalEntryType, null>(null)\n  , action:Actions):InputValue<JournalEntryType, null>  =>\n{\n\n  switch(action.type) {\n    case SET_TYPE_VALUE:\n      return state.value === action.payload.type ?\n        state : {...state, value:action.payload.type};\n    case SET_TYPE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TYPE_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\nconst date = (state = new InputValue<Date, null>(null), action:Actions)\n  :InputValue<Date, null> => \n{\n\n  switch(action.type) {\n    case SET_DATE_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DATE_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DATE_VALUE:\n      return state.value?.getTime() === action.payload.value.getTime() ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DATE_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DATE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DATE_ERROR:\n      return state.error ? {...state, error:null} : state;\n    default:\n      return state;\n  }\n\n}\n\nconst department = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case CREATE:\n      if(action.payload.fromDept) {\n        return {...state, value:action.payload.fromDept};\n      }\n      return state;\n    case SET_DEPT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DEPT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DEPT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DEPT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DEPT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DEPT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_DEPT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\n\nconst category = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_CAT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_CAT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_CAT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_CAT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_CAT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_CAT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_CAT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\nconst source = (state = Object.assign(\n  new InputValue<JournalEntrySourceInput, null>(null),{open:false}),\n  action:Actions):InputValue<JournalEntrySourceInput, null> & {open:boolean} => \n{\n\n  switch(action.type) {\n    case SET_SRC_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_SRC_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_SRC_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_SRC_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_SRC_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SRC_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_SRC_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n\n}\n\nconst paymentMethod = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_PAY_METHOD_VALUE:\n      return action.payload.value && state.value !== action.payload.value ?\n        {...state, value:action.payload.value} : state;\n    case CLEAR_PAY_METHOD_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_PAY_METHOD_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_PAY_METHOD_ERROR:\n        return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst description = (state = new InputValue<string, null>(null), \n  action:Actions ):InputValue<string, null> => \n{\n\n  switch(action.type) {\n    case SET_DSCRPT_VALUE:{\n      const value = action.payload.value.trimStart();\n      return !value || state.value === value ? state : {...state, value};\n    }\n    case CLEAR_DSCRPT_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst total = (state = new InputValue<RationalInput, null>(null), \n  action:Actions ):InputValue<RationalInput, null> => \n{\n\n  switch(action.type) {\n    case SET_TOTAL_INPUT:\n      return state.input === action.payload.input ?\n        state : {...state, input:action.payload.input};\n    case CLEAR_TOTAL_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_TOTAL_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_TOTAL_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_TOTAL_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TOTAL_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst reconciled = (state = new InputValue<boolean, false>(false), \n  action:Actions ):InputValue<boolean, false> => \n{\n\n  switch(action.type) {\n    case SET_RECONCILED_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_RECONCILED_VALUE:\n      return state.value === false ? state : {...state, value:false};\n    default:\n      return state;\n  }\n  \n}\n\nconst values = combineReducers({\n  id:(state:string | null = null, action:Actions) => action.type === CREATE ?\n    (action.payload.entryId || null) : state,\n  type,\n  date,\n  department,\n  category,\n  srcType:(state:JournalEntrySourceType | null = null, action:Actions) => \n    action.type === SET_SRC_TYPE ? action.payload.srcType : state,\n  source,\n  paymentMethod,\n  description,\n  total,\n  reconciled\n});\n\nexport enum SubmitStatus {\n  NotSubmitted,\n  Submitting,\n  Submitted,\n}\n\nconst submit = (state = {\n    status:SubmitStatus.NotSubmitted,\n    error:null as null | Error,\n  }, action:Actions) => \n{\n\n  switch(action.type) {\n    case SET_SUBMIT_STATUS:\n      return state.status === action.payload.status \n        ? state : {...state, status:action.payload.status};\n    case SET_SUBMIT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SUBMIT_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\n\nconst journalEntryUpsert = combineReducers({\n  id:(state:string = \"\", action:Actions) => \n    action.type === CREATE ? action.payload.upsertId : state,\n  values,\n  fromDept:(state:string = \"\", action:Actions):string => {\n    if(action.type === CREATE && action.payload.fromDept) {\n      return action.payload.fromDept;\n    }\n    return state;\n  },\n  submit\n});\n\nexport type JournalEntryUpsert = ReturnType<typeof journalEntryUpsert>;\n\nexport const journalEntryUpserts = (state:JournalEntryUpsert[] = [],\n  action:Actions):JournalEntryUpsert[] => \n{\n\n  switch(action.type) {\n    \n    case CREATE:\n      return [...state, journalEntryUpsert(undefined, action)];\n    case CANCEL:\n    case CLEAR:{\n      const id = action.payload.upsertId;\n      for(let i = 0, len = state.length; i < len; i++){\n        if(state[i].id === id){\n          return [\n            ...state.slice(0, i),\n            ...state.slice(i + 1)\n          ];\n        }\n      }\n      return state;\n    }\n    \n    case SET_TYPE_VALUE:\n    case SET_TYPE_ERROR:\n    case CLEAR_TYPE_ERROR:\n    case SET_DATE_INPUT:\n    case CLEAR_DATE_INPUT:\n    case SET_DATE_VALUE:\n    case CLEAR_DATE_VALUE:\n    case SET_DATE_ERROR:\n    case CLEAR_DATE_ERROR:\n    case SET_DEPT_INPUT:\n    case SET_DEPT_VALUE:\n    case SET_DEPT_ERROR:\n    case SET_DEPT_OPEN:\n    case CLEAR_DEPT_INPUT:\n    case CLEAR_DEPT_VALUE:\n    case CLEAR_DEPT_ERROR:\n    case SET_CAT_INPUT:\n    case CLEAR_CAT_INPUT:\n    case SET_CAT_VALUE:\n    case CLEAR_CAT_VALUE:\n    case SET_CAT_ERROR:\n    case CLEAR_CAT_ERROR:\n    case SET_CAT_OPEN:\n    case SET_SRC_TYPE:\n    case SET_SRC_INPUT:\n    case CLEAR_SRC_INPUT:\n    case SET_SRC_VALUE:\n    case CLEAR_SRC_VALUE:\n    case SET_SRC_ERROR:\n    case CLEAR_SRC_ERROR:\n    case SET_SRC_OPEN:\n    case SET_PAY_METHOD_VALUE:\n    case CLEAR_PAY_METHOD_VALUE:\n    case SET_DSCRPT_VALUE:\n    case CLEAR_DSCRPT_VALUE:\n    case SET_TOTAL_INPUT:\n    case CLEAR_TOTAL_INPUT:\n    case SET_TOTAL_VALUE:\n    case CLEAR_TOTAL_VALUE:\n    case SET_TOTAL_ERROR:\n    case CLEAR_TOTAL_ERROR:\n    case SET_SUBMIT_STATUS:\n    case SET_SUBMIT_ERROR:\n    case CLEAR_SUBMIT_ERROR:\n    case SET_PAY_METHOD_ERROR:\n    case CLEAR_PAY_METHOD_ERROR:\n    case SET_RECONCILED_VALUE:\n    case CLEAR_RECONCILED_VALUE:\n      return reduceOneById(state, action, \n        action.payload.upsertId, \"id\", journalEntryUpsert);\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\n\ntype SetInputAction<A> = Action<A, {upsertId:string, input:string}>;\ntype SetValueAction<A, T> = Action<A, {upsertId:string, value:T}>;\ntype SetErrorAction<A> = Action<A, {upsertId:string, error:Error}>;\ntype ClearAction<A> = Action<A, {upsertId:string}>;\n\n// Upsert Life cycle\nexport const CREATE = \"journalEntryUpsert/CREATE\";\nexport type Create = Action<typeof CREATE, {upsertId:string, entryId?:string,\n  fromDept?:string}>;\n\nexport const CANCEL = \"journalEntryUpsert/CANCEL\";\nexport type Cancel = Action<typeof CANCEL, {upsertId:string}>;\n\nexport const CLEAR = \"journalEntryUpsert/CLEAR\";\nexport type Clear = ClearAction<typeof CLEAR>;\n\n// Submit\nexport const SET_SUBMIT_STATUS = \"journalEntryUpsert/SUBMIT\";\nexport type SetSubmitStatus = \n  Action<typeof SET_SUBMIT_STATUS, {upsertId:string, status:SubmitStatus}>;\n\nexport const SET_SUBMIT_ERROR = \"journalEntryUpsert/SET_SUBMIT_ERROR\";\nexport type SetSubmitError = \n  Action<typeof SET_SUBMIT_ERROR, {upsertId:string, error:Error}>;\n\nexport const CLEAR_SUBMIT_ERROR = \"journalEntryUpsert/CLEAR_SUBMIT_ERROR\";\nexport type ClearSubmitError = \n  Action<typeof CLEAR_SUBMIT_ERROR, {upsertId:string}>;\n\n// Date\nexport const SET_DATE_INPUT = \"journalEntryUpsert/SET_DATE_INPUT\";\nexport type SetDateInput = SetInputAction<typeof SET_DATE_INPUT>;\n\nexport const CLEAR_DATE_INPUT = \"journalEntryUpsert/CLEAR_DATE_INPUT\";\nexport type ClearDateInput = ClearAction<typeof CLEAR_DATE_INPUT>;\n\nexport const SET_DATE_VALUE = \"journalEntryUpsert/SET_DATE_VALUE\";\nexport type SetDateValue = SetValueAction<typeof SET_DATE_VALUE, Date>;\n\nexport const CLEAR_DATE_VALUE = \"journalEntryUpsert/CLEAR_DATE_VALUE\";\nexport type ClearDateValue = ClearAction<typeof CLEAR_DATE_VALUE>;\n\nexport const SET_DATE_ERROR = \"journalEntryUpsert/SET_DATE_ERROR\";\nexport type SetDateError = SetErrorAction<typeof SET_DATE_ERROR>;\n\nexport const CLEAR_DATE_ERROR = \"journalEntryUpsert/CLEAR_DATE_ERROR\";\nexport type ClearDateError = ClearAction<typeof CLEAR_DATE_ERROR>;\n\n// Department\nexport const SET_DEPT_INPUT = \"journalEntryUpsert/SET_DEPT_INPUT\";\nexport type SetDeptInput = SetInputAction<typeof SET_DEPT_INPUT>;\n\nexport const CLEAR_DEPT_INPUT = \"journalEntryUpsert/CLEAR_DEPT_INPUT\";\nexport type ClearDeptInput = ClearAction<typeof CLEAR_DEPT_INPUT>;\n\nexport const SET_DEPT_VALUE = \"journalEntryUpsert/SET_DEPT_VALUE\";\nexport type SetDeptValue = SetValueAction<typeof SET_DEPT_VALUE, string>;\n\nexport const CLEAR_DEPT_VALUE = \"journalEntryUpsert/CLEAR_DEPT_VALUE\";\nexport type ClearDeptValue = ClearAction<typeof CLEAR_DEPT_VALUE>;\n\nexport const SET_DEPT_ERROR = \"journalEntryUpsert/SET_DEPT_ERROR\";\nexport type SetDeptError = SetErrorAction<typeof SET_DEPT_ERROR>;\n\nexport const CLEAR_DEPT_ERROR = \"journalEntryUpsert/CLEAR_DEPT_ERROR\";\nexport type ClearDeptError = ClearAction<typeof CLEAR_DEPT_ERROR>;\n\nexport const SET_DEPT_OPEN = \"journalEntryUpsert/SET_DEPT_OPEN\";\nexport type SetDeptOpen = \n  Action<typeof SET_DEPT_OPEN, {upsertId:string, open:boolean}>;\n\n// Type\nexport const SET_TYPE_VALUE = \"journalEntryUpsert/SET_TYPE_VALUE\";\nexport type SetTypeValue = Action<typeof SET_TYPE_VALUE,{upsertId:string,\n  type:JournalEntryType}>;\n\nexport const SET_TYPE_ERROR = \"journalEntryUpsert/SET_TYPE_ERROR\";\nexport type SetTypeError = SetErrorAction<typeof SET_TYPE_ERROR>;\n\nexport const CLEAR_TYPE_ERROR = \"journalEntryUpsert/CLEAR_TYPE_ERROR\";\nexport type ClearTypeError = ClearAction<typeof CLEAR_TYPE_ERROR>;\n\n// Category\nexport const SET_CAT_INPUT = \"journalEntryUpsert/SET_CAT_INPUT\";\nexport type SetCatInput = SetInputAction<typeof SET_CAT_INPUT>;\n\nexport const CLEAR_CAT_INPUT = \"journalEntryUpsert/CLEAR_CAT_INPUT\";\nexport type ClearCatInput = ClearAction<typeof CLEAR_CAT_INPUT>;\n\nexport const SET_CAT_VALUE = \"journalEntryUpsert/SET_CAT_VALUE\";\nexport type SetCatValue = SetValueAction<typeof SET_CAT_VALUE, string>;\n\nexport const CLEAR_CAT_VALUE = \"journalEntryUpsert/CLEAR_CAT_VALUE\";\nexport type ClearCatValue = ClearAction<typeof CLEAR_CAT_VALUE>;\n\nexport const SET_CAT_ERROR = \"journalEntryUpsert/SET_CAT_ERROR\";\nexport type SetCatError = SetErrorAction<typeof SET_CAT_ERROR>;\n\nexport const CLEAR_CAT_ERROR = \"journalEntryUpsert/CLEAR_CAT_ERROR\";\nexport type ClearCatError = ClearAction<typeof CLEAR_CAT_ERROR>;\n\nexport const SET_CAT_OPEN = \"journalEntryUpsert/SET_CAT_OPEN\";\nexport type SetCatOpen = \n  Action<typeof SET_CAT_OPEN, {upsertId:string, open:boolean}>;\n\n// Source\nexport const SET_SRC_TYPE = \"journalEntryUpsert/SET_SRC_TYPE\";\nexport type SetSrcType =\n  Action<typeof SET_SRC_TYPE,{upsertId:string, srcType:JournalEntrySourceType}>;\nexport const CLEAR_SRC_TYPE = \"journalEntryUpsert/CLEAR_SRC_TYPE\";\nexport type ClearSrcType = Action<typeof CLEAR_SRC_TYPE,{upsertId:string}>;\n\nexport const SET_SRC_INPUT = \"journalEntryUpsert/SET_SRC_INPUT\";\nexport type SetSrcInput = SetInputAction<typeof SET_SRC_INPUT>;\n\nexport const CLEAR_SRC_INPUT = \"journalEntryUpsert/CLEAR_SRC_INPUT\";\nexport type ClearSrcInput = ClearAction<typeof CLEAR_SRC_INPUT>;\n\nexport const SET_SRC_VALUE = \"journalEntryUpsert/SET_SRC_VALUE\";\nexport type SetSrcValue = SetValueAction<typeof SET_SRC_VALUE, \n  JournalEntrySourceInput>;\n\nexport const CLEAR_SRC_VALUE = \"journalEntryUpsert/CLEAR_SRC_VALUE\";\nexport type ClearSrcValue = ClearAction<typeof CLEAR_SRC_VALUE>;\n\nexport const SET_SRC_ERROR = \"journalEntryUpsert/SET_SRC_ERROR\";\nexport type SetSrcError = SetErrorAction<typeof SET_SRC_ERROR>;\n\nexport const CLEAR_SRC_ERROR = \"journalEntryUpsert/CLEAR_SRC_ERROR\";\nexport type ClearSrcError = ClearAction<typeof CLEAR_SRC_ERROR>;\n\nexport const SET_SRC_OPEN = \"journalEntryUpsert/SET_SRC_OPEN\";\nexport type SetSrcOpen = \n  Action<typeof SET_SRC_OPEN, {upsertId:string, open:boolean}>;\n\n// Payment Method\nexport const SET_PAY_METHOD_VALUE = \"journalEntryUpsert/SET_PAY_METHOD_VALUE\";\nexport type SetPayMethodValue = \n  SetValueAction<typeof SET_PAY_METHOD_VALUE, string>;\nexport const CLEAR_PAY_METHOD_VALUE = \n  \"journalEntryUpsert/CLEAR_PAY_METHOD_VALUE\";\nexport type ClearPayMethodValue = ClearAction<typeof CLEAR_PAY_METHOD_VALUE>;\n\nexport const SET_PAY_METHOD_ERROR = \"journalEntryUpsert/SET_PAY_METHOD_ERROR\";\nexport type SetPayMethodError = SetErrorAction<typeof SET_PAY_METHOD_ERROR>;\nexport const CLEAR_PAY_METHOD_ERROR \n  = \"journalEntryUpsert/CLEAR_PAY_METHOD_ERROR\";\nexport type ClearPayMethodError = ClearAction<typeof CLEAR_PAY_METHOD_ERROR>;\n\n// Description\nexport const SET_DSCRPT_VALUE = \"journalEntryUpsert/SET_DSCRPT_VALUE\";\nexport type SetDscrptValue = SetValueAction<typeof SET_DSCRPT_VALUE, \n  string>;\n\nexport const CLEAR_DSCRPT_VALUE = \"journalEntryUpsert/CLEAR_DSCRPT_VALUE\";\nexport type ClearDscrptValue = ClearAction<typeof CLEAR_DSCRPT_VALUE>;\n\n// Total\nexport const SET_TOTAL_INPUT = \"journalEntryUpsert/SET_TOTAL_INPUT\";\nexport type SetTotalInput = SetInputAction<typeof SET_TOTAL_INPUT>;\n\nexport const CLEAR_TOTAL_INPUT = \"journalEntryUpsert/CLEAR_TOTAL_INPUT\";\nexport type ClearTotalInput = ClearAction<typeof CLEAR_TOTAL_INPUT>;\n\nexport const SET_TOTAL_VALUE = \"journalEntryUpsert/SET_TOTAL_VALUE\";\nexport type SetTotalValue = SetValueAction<typeof SET_TOTAL_VALUE, \n  RationalInput>;\n\nexport const CLEAR_TOTAL_VALUE = \"journalEntryUpsert/CLEAR_TOTAL_VALUE\";\nexport type ClearTotalValue = ClearAction<typeof CLEAR_TOTAL_VALUE>;\n\nexport const SET_TOTAL_ERROR = \"journalEntryUpsert/SET_TOTAL_ERROR\";\nexport type SetTotalError = SetErrorAction<typeof SET_TOTAL_ERROR>;\n\nexport const CLEAR_TOTAL_ERROR = \"journalEntryUpsert/CLEAR_TOTAL_ERROR\";\nexport type ClearTotalError = ClearAction<typeof CLEAR_TOTAL_ERROR>;\n\n// Reconciled\nexport const SET_RECONCILED_VALUE = \"journalEntryUpsert/SET_RECONCILED_VALUE\";\nexport type SetReconciledValue =\n  SetValueAction<typeof SET_RECONCILED_VALUE, boolean>;\n\nexport const CLEAR_RECONCILED_VALUE = \n  \"journalEntryUpsert/CLEAR_RECONCILED_VALUE\";\nexport type ClearReconciledValue = ClearAction<typeof CLEAR_RECONCILED_VALUE>;","\nexport class InputValue<T, Tnull> {\n  input = \"\";\n  value:T | Tnull;\n  error:Error | null = null;\n  constructor(nullValue:Tnull) {\n    this.value = nullValue;\n  }\n}\n\nexport const reduceOneById = <T, A>(state:T[], action:A, id:string,\n  idKey:keyof T, reducer:(state:T, action:A) => T):T[] =>\n{ \n  for(let i = 0, len = state.length; i < len; i++){\n    const entry = state[i];\n    if(entry[idKey as string] === id) {\n      const newEntry = reducer(entry, action);\n      if(newEntry !== entry) {\n        return [\n          ...state.slice(0, i),\n          newEntry,\n          ...state.slice(i + 1)\n        ];\n      } else {\n        return state;\n      }\n    }\n  }\n  return state;\n}","import {Action} from \"./types\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const CREATE = \"tableCells/CREATE\";\nexport type Create = Action<typeof CREATE, TableCellIni>;\n\nexport const SET_INDEX = \"tableCells/SET_INDEX\";\nexport type SetIndex =\n  Action<typeof SET_INDEX, {id:string, rowId:string, index:number}>;\nexport const SET_DEFAULT_INDEX = \"tableCells/SET_DEFAULT_INDEX\";\nexport type SetDefaultIndex =\n  Action<typeof SET_DEFAULT_INDEX, {id:string, rowId:string}>;\n\nexport const SET_NAME = \"tableCells/SET_NAME\";\nexport type SetName =\n  Action<typeof SET_NAME, {id:string, rowId:string, name:string}>;\nexport const SET_DEFAULT_NAME = \"tableCells/SET_DEFAULT_NAME\";\nexport type SetDefaultName =\n  Action<typeof SET_DEFAULT_NAME, {id:string, rowId:string}>;\n\nexport const SET_WIDTH = \"tableCells/SET_WIDTH\";\nexport type SetWidth =\n  Action<typeof SET_WIDTH, {id:string, rowId:string, width:number}>;\nexport const SET_DEFAULT_WIDTH = \"tableCells/SET_DEFAULT_WIDTH\";\nexport type SetDefaultWidth =\n  Action<typeof SET_DEFAULT_WIDTH, {id:string, rowId:string}>;\n\nexport const COLLAPSE = \"tableCells/COLLAPSE\";\nexport type Collapse = Action<typeof COLLAPSE, {id:string, rowId:string}>;\nexport const EXPAND = \"tableCells/EXPAND\";\nexport type Expand = Action<typeof EXPAND, {id:string, rowId:string}>;\n\nexport const HIDE = \"tableCells/HIDE\";\nexport type Hide = Action<typeof HIDE, {id:string, rowId:string}>;\nexport const SHOW = \"tableCells/SHOW\";\nexport type Show = Action<typeof SHOW, {id:string, rowId:string}>;\n\nexport const RESTORE_DEFAULTS = \"tableCells/RESTORE_DEFAULTS\";\nexport type RestoreDefaults =\n  Action<typeof RESTORE_DEFAULTS, {id:string, rowId:string}>;","import isEqual from \"lodash.isequal\";\n\nimport {CREATE, Create, SET_INDEX, SetIndex, SET_DEFAULT_INDEX, SetDefaultIndex,\n SET_NAME, SetName, SET_DEFAULT_NAME, SetDefaultName, SET_WIDTH, SetWidth,\n SET_DEFAULT_WIDTH, SetDefaultWidth, COLLAPSE, Collapse, EXPAND, Expand,\n HIDE, Hide, SHOW, Show, RESTORE_DEFAULTS,\n RestoreDefaults,\n} from \"../actionTypes/tableRow\";\nimport { TableRow } from \"@material-ui/core\";\n\ntype Actions = Create | SetIndex | SetDefaultIndex | SetName | SetDefaultName |\n  SetWidth | SetDefaultWidth | Collapse | Expand | Hide | Show |\n  RestoreDefaults;\n\nexport interface TableCellIni {\n  rowId:string;\n  id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed?:boolean;\n  hidden?:boolean;\n}\nexport class TableCell {\n  \n  readonly ini:Readonly<TableCellIni>;\n  readonly rowId:string;\n  readonly id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed:boolean;\n  hidden:boolean;\n  \n  constructor(ini:TableCellIni) {\n    this.ini = {...ini} as const;\n    this.rowId = ini.rowId\n    this.id = ini.id;\n    this.index = ini.index;\n    this.name = ini.name;\n    this.width = ini.width;\n    this.collapsed = ini?.collapsed ?? false;\n    this.hidden = ini?.hidden ?? false;\n  }\n\n}\n\nexport const tableCell = (state:TableCell, action:Actions):TableCell => {\n  \n  switch(action.type) {\n    case SET_INDEX:\n      return state.index === action.payload.index ?\n        state : {...state, index:action.payload.index};\n    case SET_DEFAULT_INDEX:\n      return state.index === state.ini.index ?\n        state : {...state, index:state.ini.index};\n    case SET_NAME:\n      return state.name === action.payload.name ?\n        state : {...state, name:action.payload.name};\n    case SET_DEFAULT_NAME:\n      return state.name === state.ini.name ?\n        state : {...state, name:state.ini.name};\n    case SET_WIDTH:\n      return state.width === action.payload.width ?\n        state : {...state, width:action.payload.width};\n    case SET_DEFAULT_WIDTH:\n      return state.width === state.ini.width ?\n        state : {...state, width:state.ini.width};\n    case COLLAPSE:\n      return state.collapsed === true ? state : {...state, collapsed:true};\n    case EXPAND:\n      return state.collapsed === false ? state : {...state, collapsed:false};\n    case HIDE:\n      return state.hidden === true ? state : {...state, hidden:true};\n    case SHOW:\n      return state.hidden === false ? state : {...state, hidden:false};\n    case RESTORE_DEFAULTS:{\n      const defaultState = new TableCell(state.ini);\n      return isEqual(state, defaultState) ? state : defaultState;\n    }\n    default:\n      return state;\n  }\n  \n}\n\ninterface TableRow {\n  [cellId:string]:TableCell;\n}\n\n\nexport const iterateCellByIndex = function*(row:TableRow) {\n\n  const unIndexedCells:TableCell[] = [];\n  const indexedCells = new Map<number, TableCell>();\n\n  let nextIndex = 0;\n  for(const key in row) {\n    \n    if(row.hasOwnProperty(key)) {\n      \n      const cell = row[key];\n      const {index = null} = cell;\n      \n      if(index === null) {\n      \n        continue;\n      \n      } else if(nextIndex === index) {\n        \n        yield cell;\n        \n        while(indexedCells.has(++nextIndex)) {\n        \n          yield indexedCells.get(nextIndex) as TableCell;\n        \n        }\n      \n      } else if(index > 0) {\n      \n        indexedCells.set(index, cell);\n      \n      } else {\n\n        unIndexedCells.push(cell);\n\n      }\n\n    }\n  \n  }\n\n  return unIndexedCells;\n\n}\n\nexport const tableRow = (state:TableRow = {}, action:Actions):TableRow =>\n{\n  switch(action.type) {\n    case CREATE:\n      return action.payload.id in state \n        ? state : {...state, [action.payload.id]:new TableCell(action.payload)};\n    case SET_INDEX:{\n      \n      const curIndex = state[action.payload.id].index;\n      const newIndex = action.payload.index;\n      \n      if(curIndex === newIndex) {\n      \n        return state;\n      \n      } else if(curIndex < newIndex) {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > newIndex) {\n            break;\n          } else if(row.index < curIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index - 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      } else {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > curIndex) {\n            break;\n          } else if(row.index < newIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] = tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index + 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      }\n\n    }\n    case SET_DEFAULT_INDEX:{\n\n      const newState = {} as TableRow;\n\n      for(const row of iterateCellByIndex(state)) {\n\n        newState[row.id] = tableCell(row, action);\n\n      }\n\n      return {...state, ...newState};\n\n    }\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:\n      if(action.payload.id in state) {\n        const curCell = state[action.payload.id];\n        const newCell = tableCell(curCell, action);\n        return newCell === curCell ? \n          state : {...state, [action.payload.id]:newCell};\n      }\n      return state;\n    default:\n      return state;\n  }\n}\n\ninterface TableRows {\n  [rowId:string]:TableRow;\n}\n\nexport const tableRows = (state:TableRows = {}, action:Actions)\n  :TableRows =>\n{\n\n  switch(action.type) {\n    case CREATE:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return {...state, [rowId]:tableRow(undefined, action)};\n    }\n    case SET_INDEX:\n    case SET_DEFAULT_INDEX:\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\n\nexport const CREATE_PAB = \"journal/CREATE_PAB\";\nexport type CreatePAB = Action<typeof CREATE_PAB, {pabId:string}>;\n\nexport const OPEN_PAB = \"journal/OPEN_PAB\";\nexport type OpenPAB = Action<typeof OPEN_PAB, {pabId:string}>;\n\nexport const CLOSE_PAB = \"journal/CLOSE_PAB\";\nexport type ClosePAB = Action<typeof CLOSE_PAB, {pabId:string}>;","import {combineReducers} from \"redux\";\n\nimport {CREATE_PAB, CreatePAB, OPEN_PAB, OpenPAB, CLOSE_PAB, ClosePAB\n} from \"../actionTypes/journal\";\n\ntype Actions = CreatePAB | OpenPAB | ClosePAB;\n\nconst pab = (state = {open:false}, action:Actions) => {\n\n  switch(action.type) {\n    case OPEN_PAB:\n      return state.open === true ? state : {...state, open:true};\n    case CLOSE_PAB:\n      return state.open === false ? state : {...state, open:false};\n    default:\n    return state;\n  }\n\n}\n\nexport type PAB = ReturnType<typeof pab>;\n\ninterface PABs {\n  [key:string]:PAB\n}\n\nexport const pabs = (state:PABs = {}, action:Actions) => {\n\n  switch(action.type) {\n    case CREATE_PAB:\n      // Create ONLY once\n      if(action.payload.pabId in state) {\n        return state;\n      }\n      return {...state, [action.payload.pabId]:pab(undefined, action)}\n    case OPEN_PAB:\n    case CLOSE_PAB:\n      if(action.payload.pabId in state) {\n        const {pabId} = action.payload;\n        const curPAB = state[pabId];\n        const newPAB = pab(curPAB, action);\n        return curPAB === newPAB ? state : {...state, [pabId]:newPAB}\n      }\n      return state;\n    default:\n      return state;\n\n  }\n\n}\n\nexport const journal = combineReducers({\n  pabs\n});\n\nexport type Journal = typeof journal;","import {combineReducers} from \"redux\";\n\nimport {journalEntryUpserts} from \"./journalEntryUpserts\";\nimport {tableRows} from \"./tableRows\";\nimport {journal} from \"./journal\";\n\nconst root = combineReducers({\n  journal,\n  journalEntryUpserts,\n  tableRows\n});\nexport default root;\n\nexport type Root = ReturnType<typeof root>;","import { configureStore } from \"@reduxjs/toolkit\";\n// import { createStore, applyMiddleware } from \"redux\";\n// import { composeWithDevTools } from \"redux-devtools-extension\";\n// import thunk from \"redux-thunk\";\n\nimport root from \"./reducers/root\";\n\n// const store = createStore(root, composeWithDevTools(\n//   applyMiddleware(thunk)\n// ));\n\nconst store = configureStore({\n  reducer: root,\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","import React, { Fragment } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport client from \"./apollo/apollo\";\nimport Routes from \"./Routes\";\nimport store from \"./redux/store\";\n\nexport default function App() {\n  return (\n    <Fragment>\n      <CssBaseline />\n      <Provider store={store}>\n        <ApolloProvider client={client}>\n          <Router>\n            {/* <Box\n            position=\"fixed\"\n            top={0}\n            left={0}\n            height=\"100vh\"\n            width=\"100vw\"\n            overflow=\"hidden\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <Routes/>\n          </Box> */}\n            <Routes />\n          </Router>\n        </ApolloProvider>\n      </Provider>\n    </Fragment>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n    \nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}