(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{146:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5189:function(e,t,n){e.exports=n(5213)},5213:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(23),i=n.n(o),l=n(17),u=n(37),c=n(5292),d=n(5293),s=n(62),p=n(75),m=n(7),v=n(130),f=n(146),y=new v.b({introspectionQueryResultData:f}),b=new v.a({fragmentMatcher:y,addTypename:!1});b.writeData({data:Object(m.a)({},{paginate:{skip:0,limit:1e3},sortBy:[],upsertTransactionLocal:null,lc_journalEntryUpserts:[]})});var E=b,j=n(11),h=n(12),O=n.n(h);function g(){var e=Object(j.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return g=function(){return e},e}var w,_=[O()(g())],x={},S=n(166),C=n(148),D=n(31),T=n(149),I=n(85),R=new S.a({uri:"/graphql",credentials:"same-origin"}),U=new C.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),k=D.a.from([Object(T.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),D.a.split((function(e){var t=e.query,n=Object(I.a)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),U,R)]),A=new p.a({link:k,cache:E,typeDefs:_,resolvers:x}),P=n(74),M=n(19),N=n(5285),B=n(150),F=n(5263),L=n(5264),V=n(5261),J=(n(140),n(5207)),$=J(window.location.hostname,J.DNS),q=n(42),G=n(151),z=n(152),W=n(29),Y=n(97),Q=n.n(Y),H="journalEntryUpsert/CREATE",X="journalEntryUpsert/CANCEL",K="journalEntryUpsert/CLEAR",Z="journalEntryUpsert/SUBMIT",ee="journalEntryUpsert/SET_SUBMIT_ERROR",te="journalEntryUpsert/CLEAR_SUBMIT_ERROR",ne="journalEntryUpsert/SET_DATE_INPUT",ae="journalEntryUpsert/CLEAR_DATE_INPUT",re="journalEntryUpsert/SET_DATE_VALUE",oe="journalEntryUpsert/CLEAR_DATE_VALUE",ie="journalEntryUpsert/SET_DATE_ERROR",le="journalEntryUpsert/CLEAR_DATE_ERROR",ue="journalEntryUpsert/SET_DEPT_INPUT",ce="journalEntryUpsert/CLEAR_DEPT_INPUT",de="journalEntryUpsert/SET_DEPT_VALUE",se="journalEntryUpsert/CLEAR_DEPT_VALUE",pe="journalEntryUpsert/SET_DEPT_ERROR",me="journalEntryUpsert/CLEAR_DEPT_ERROR",ve="journalEntryUpsert/SET_DEPT_OPEN",fe="journalEntryUpsert/SET_TYPE_VALUE",ye="journalEntryUpsert/SET_TYPE_ERROR",be="journalEntryUpsert/CLEAR_TYPE_ERROR",Ee="journalEntryUpsert/SET_CAT_INPUT",je="journalEntryUpsert/CLEAR_CAT_INPUT",he="journalEntryUpsert/SET_CAT_VALUE",Oe="journalEntryUpsert/CLEAR_CAT_VALUE",ge="journalEntryUpsert/SET_CAT_ERROR",we="journalEntryUpsert/CLEAR_CAT_ERROR",_e="journalEntryUpsert/SET_CAT_OPEN",xe="journalEntryUpsert/SET_SRC_TYPE",Se="journalEntryUpsert/SET_SRC_INPUT",Ce="journalEntryUpsert/CLEAR_SRC_INPUT",De="journalEntryUpsert/SET_SRC_VALUE",Te="journalEntryUpsert/CLEAR_SRC_VALUE",Ie="journalEntryUpsert/SET_SRC_ERROR",Re="journalEntryUpsert/CLEAR_SRC_ERROR",Ue="journalEntryUpsert/SET_SRC_OPEN",ke="journalEntryUpsert/SET_PAY_METHOD_VALUE",Ae="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Pe="journalEntryUpsert/SET_PAY_METHOD_ERROR",Me="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Ne="journalEntryUpsert/SET_DSCRPT_VALUE",Be="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Fe="journalEntryUpsert/SET_TOTAL_INPUT",Le="journalEntryUpsert/CLEAR_TOTAL_INPUT",Ve="journalEntryUpsert/SET_TOTAL_VALUE",Je="journalEntryUpsert/CLEAR_TOTAL_VALUE",$e="journalEntryUpsert/SET_TOTAL_ERROR",qe="journalEntryUpsert/CLEAR_TOTAL_ERROR",Ge="journalEntryUpsert/SET_RECONCILED_VALUE",ze="journalEntryUpsert/CLEAR_RECONCILED_VALUE",We=n(104),Ye=function e(t){Object(We.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=t},Qe=function(e,t,n,a,r){for(var o=0,i=e.length;o<i;o++){var l=e[o];if(l[a]===n){var u=r(l,t);return u!==l?[].concat(Object(W.a)(e.slice(0,o)),[u],Object(W.a)(e.slice(o+1))):e}}return e},He=Object(q.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===H?t.payload.entryId||null:e},type:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case fe:return t.value===n.payload.type?t:Object(m.a)({},t,{value:n.payload.type});case ye:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case be:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},date:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye(null),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ne:var r=a.payload.input.trimStart();return n.input===r?n:Object(m.a)({},n,{input:r});case ae:return""===n.input?n:Object(m.a)({},n,{input:""});case re:return(null===(e=n.value)||void 0===e?void 0:e.getTime())===a.payload.value.getTime()?n:Object(m.a)({},n,{value:a.payload.value});case oe:return n.value?Object(m.a)({},n,{value:null}):n;case ie:return(null===(t=n.error)||void 0===t?void 0:t.message)===a.payload.error.message?n:Object(m.a)({},n,{error:a.payload.error});case le:return n.error?Object(m.a)({},n,{error:null}):n;default:return n}},department:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ye(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case H:return n.payload.fromDept?Object(m.a)({},t,{value:n.payload.fromDept}):t;case ue:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case ce:return""===t.input?t:Object(m.a)({},t,{input:""});case de:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case se:return t.value?Object(m.a)({},t,{value:null}):t;case pe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case me:return t.error?Object(m.a)({},t,{error:null}):t;case ve:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},category:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ye(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ee:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case je:return""===t.input?t:Object(m.a)({},t,{input:""});case he:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case Oe:return t.value?Object(m.a)({},t,{value:null}):t;case ge:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case we:return t.error?Object(m.a)({},t,{error:null}):t;case _e:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===xe?t.payload.srcType:e},source:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ye(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Se:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case Ce:return""===t.input?t:Object(m.a)({},t,{input:""});case De:return Q()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case Te:return t.value?Object(m.a)({},t,{value:null}):t;case Ie:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Re:return t.error?Object(m.a)({},t,{error:null}):t;case Ue:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},paymentMethod:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ye(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ke:return n.payload.value&&t.value!==n.payload.value?Object(m.a)({},t,{value:n.payload.value}):t;case Ae:return null===t.value?t:Object(m.a)({},t,{value:null});case Pe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Me:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:var n=t.payload.value.trimStart();return n&&e.value!==n?Object(m.a)({},e,{value:n}):e;case Be:return null===e.value?e:Object(m.a)({},e,{value:null});default:return e}},total:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Fe:return t.input===n.payload.input?t:Object(m.a)({},t,{input:n.payload.input});case Le:return""===t.input?t:Object(m.a)({},t,{input:""});case Ve:return Q()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case Je:return null===t.value?t:Object(m.a)({},t,{value:null});case $e:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case qe:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ye(!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ge:return e.value===t.payload.value?e:Object(m.a)({},e,{value:t.payload.value});case ze:return!1===e.value?e:Object(m.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(w||(w={}));var Xe=Object(q.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===H?t.payload.upsertId:e},values:He,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===H&&t.payload.fromDept?t.payload.fromDept:e},submit:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:w.NotSubmitted,error:null},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Z:return t.status===n.payload.status?t:Object(m.a)({},t,{status:n.payload.status});case ee:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case te:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}}}),Ke=n(54),Ze=n(15),et=n.n(Ze),tt="tableCells/SET_INDEX",nt="tableCells/SET_DEFAULT_INDEX",at="tableCells/SET_NAME",rt="tableCells/SET_DEFAULT_NAME",ot="tableCells/SET_WIDTH",it="tableCells/SET_DEFAULT_WIDTH",lt="tableCells/COLLAPSE",ut="tableCells/EXPAND",ct="tableCells/HIDE",dt="tableCells/SHOW",st="tableCells/RESTORE_DEFAULTS",pt=function e(t){var n,a;Object(We.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(m.a)({},t),this.rowId=t.rowId,this.id=t.id,this.index=t.index,this.name=t.name,this.width=t.width,this.collapsed=null!==(n=null===t||void 0===t?void 0:t.collapsed)&&void 0!==n&&n,this.hidden=null!==(a=null===t||void 0===t?void 0:t.hidden)&&void 0!==a&&a},mt=function(e,t){switch(t.type){case tt:return e.index===t.payload.index?e:Object(m.a)({},e,{index:t.payload.index});case nt:return e.index===e.ini.index?e:Object(m.a)({},e,{index:e.ini.index});case at:return e.name===t.payload.name?e:Object(m.a)({},e,{name:t.payload.name});case rt:return e.name===e.ini.name?e:Object(m.a)({},e,{name:e.ini.name});case ot:return e.width===t.payload.width?e:Object(m.a)({},e,{width:t.payload.width});case it:return e.width===e.ini.width?e:Object(m.a)({},e,{width:e.ini.width});case lt:return!0===e.collapsed?e:Object(m.a)({},e,{collapsed:!0});case ut:return!1===e.collapsed?e:Object(m.a)({},e,{collapsed:!1});case ct:return!0===e.hidden?e:Object(m.a)({},e,{hidden:!0});case dt:return!1===e.hidden?e:Object(m.a)({},e,{hidden:!1});case st:var n=new pt(e.ini);return Q()(e,n)?e:n;default:return e}},vt=et.a.mark((function e(t){var n,a,r,o,i,l,u;return et.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=new Map,r=0,e.t0=et.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(o=e.t1.value,!t.hasOwnProperty(o)){e.next=24;break}if(i=t[o],l=i.index,null!==(u=void 0===l?null:l)){e.next=13;break}return e.abrupt("continue",4);case 13:if(r!==u){e.next=23;break}return e.next=16,i;case 16:if(!a.has(++r)){e.next=21;break}return e.next=19,a.get(r);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?a.set(u,i):n.push(i);case 24:e.next=4;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})),ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":return t.payload.id in e?e:Object(m.a)({},e,Object(Ke.a)({},t.payload.id,new pt(t.payload)));case tt:var n=e[t.payload.id].index,a=t.payload.index;if(n===a)return e;if(n<a){var r={},o=!0,i=!1,l=void 0;try{for(var u,c=vt(e)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(d.index>a)break;d.index<n||(d.index===n?r[d.id]=mt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:a})})):r[d.id]=mt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:d.index-1})})))}}catch(D){i=!0,l=D}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return Object(m.a)({},e,{},r)}var s={},p=!0,v=!1,f=void 0;try{for(var y,b=vt(e)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var E=y.value;if(E.index>n)break;E.index<a||(E.index===n?s[E.id]=mt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:a})})):s[E.id]=mt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:E.index+1})})))}}catch(D){v=!0,f=D}finally{try{p||null==b.return||b.return()}finally{if(v)throw f}}return Object(m.a)({},e,{},s);case nt:var j={},h=!0,O=!1,g=void 0;try{for(var w,_=vt(e)[Symbol.iterator]();!(h=(w=_.next()).done);h=!0){var x=w.value;j[x.id]=mt(x,t)}}catch(D){O=!0,g=D}finally{try{h||null==_.return||_.return()}finally{if(O)throw g}}return Object(m.a)({},e,{},j);case at:case rt:case ot:case it:case lt:case ut:case ct:case dt:case st:if(t.payload.id in e){var S=e[t.payload.id],C=mt(S,t);return C===S?e:Object(m.a)({},e,Object(Ke.a)({},t.payload.id,C))}return e;default:return e}},yt="journal/OPEN_PAB",bt="journal/CLOSE_PAB",Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case yt:return!0===e.open?e:Object(m.a)({},e,{open:!0});case bt:return!1===e.open?e:Object(m.a)({},e,{open:!1});default:return e}},jt=Object(q.combineReducers)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journal/CREATE_PAB":return t.payload.pabId in e?e:Object(m.a)({},e,Object(Ke.a)({},t.payload.pabId,Et(void 0,t)));case yt:case bt:if(t.payload.pabId in e){var n=t.payload.pabId,a=e[n],r=Et(a,t);return a===r?e:Object(m.a)({},e,Object(Ke.a)({},n,r))}return e;default:return e}}}),ht=Object(q.combineReducers)({journal:jt,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return[].concat(Object(W.a)(e),[Xe(void 0,t)]);case X:case K:for(var n=t.payload.upsertId,a=0,r=e.length;a<r;a++)if(e[a].id===n)return[].concat(Object(W.a)(e.slice(0,a)),Object(W.a)(e.slice(a+1)));return e;case fe:case ye:case be:case ne:case ae:case re:case oe:case ie:case le:case ue:case de:case pe:case ve:case ce:case se:case me:case Ee:case je:case he:case Oe:case ge:case we:case _e:case xe:case Se:case Ce:case De:case Te:case Ie:case Re:case Ue:case ke:case Ae:case Ne:case Be:case Fe:case Le:case Ve:case Je:case $e:case qe:case Z:case ee:case te:case Pe:case Me:case Ge:case ze:return Qe(e,t,t.payload.upsertId,"id",Xe);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":var n=t.payload.rowId;if(n in e){var a=e[n],r=ft(a,t);return a===r?e:Object(m.a)({},e,Object(Ke.a)({},n,r))}return Object(m.a)({},e,Object(Ke.a)({},n,ft(void 0,t)));case tt:case nt:case at:case rt:case ot:case it:case lt:case ut:case ct:case dt:case st:var o=t.payload.rowId;if(o in e){var i=e[o],l=ft(i,t);return i===l?e:Object(m.a)({},e,Object(Ke.a)({},o,l))}return e;default:return e}}}),Ot=Object(q.createStore)(ht,Object(G.composeWithDevTools)(Object(q.applyMiddleware)(z.a))),gt=function(e){return{type:"tableCells/CREATE",payload:e}},wt=J("Journal",$),_t=J("journal/date",$);Ot.dispatch(gt({rowId:wt,id:_t,index:1,name:"Date",width:185}));var xt=J("journal/department",$);Ot.dispatch(gt({rowId:wt,id:xt,index:7,name:"Department",width:380}));var St=J("journal/category",$);Ot.dispatch(gt({rowId:wt,id:St,index:3,name:"Category",width:380}));var Ct=J("journal/source",$);Ot.dispatch(gt({rowId:wt,id:Ct,index:4,name:"Source",width:380}));var Dt=J("journal/paymentMethod",$);Ot.dispatch(gt({rowId:wt,id:Dt,index:5,name:"Payment Method",width:175}));var Tt=J("journal/description",$);Ot.dispatch(gt({rowId:wt,id:Tt,index:6,name:"Description",width:380}));var It=J("journal/total",$);Ot.dispatch(gt({rowId:wt,id:It,index:2,name:"Total",width:130}));var Rt=J("journal/reconciled",$);Ot.dispatch(gt({rowId:wt,id:Rt,index:0,name:"Reconciled",width:105}));var Ut=function(e,t){if(t in e.tableRows){var n=e.tableRows[t];return Object(W.a)(vt(n))}return[]},kt=function(e,t,n){return t in e.tableRows&&n in e.tableRows[t]?e.tableRows[t][n]:null},At=function(e){var t=Object(l.e)((function(e){return Ut(e,wt)}),l.c),n=Object(a.useMemo)((function(){return t.map((function(e,t){var n=e.name,a=e.width,o=e.index;return r.a.createElement(d.a,{key:"".concat(n,"_").concat(t),minWidth:a,flexBasis:a,flexGrow:a,order:o,clone:!0},r.a.createElement(V.a,{component:"div",children:n}))}))}),[t]);return r.a.createElement(F.a,{component:"div"},r.a.createElement(d.a,{display:"flex !important",flexDirection:"row",justifyContent:"flex-start",clone:!0},r.a.createElement(L.a,{component:"div"},n)))},Pt=n(25),Mt=n(5268),Nt=n(167),Bt=n(5267),Ft=n(5266),Lt=n(5300),Vt=n(116),Jt=n(114),$t=n(58),qt=n.n($t),Gt=function(e){var t=e.entryDate,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,_t)})),o=qt()(t);return r.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},o.format("MMM DD, YYYY")))},zt=n(5297),Wt=function(e){var t=e.department,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,xt)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},Object(zt.a)(t.name)))},Yt=function(e){var t=e.category,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,St)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},Object(zt.a)(t.name)))},Qt=function(e){var t=e.source,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,Ct)})),o="";switch(t.__typename){case"Person":o="".concat(t.name.first," ").concat(t.name.last);break;case"Business":o=t.bizName;break;case"Department":o=t.deptName}return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},o))},Ht=function(e){var t=e.paymentMethod,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,Dt)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},Object(zt.a)(t.method)))},Xt=function(e){var t=e.description,n=e.textColor,a=Object(l.e)((function(e){return kt(e,wt,Tt)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},t))},Kt=n(76),Zt=n.n(Kt),en=n(80),tn=n.n(en),nn=function(e){var t=e.total,n=t.num,a=t.den,o=e.textColor,i=new tn.a({n:n,d:a}),u=Object(l.e)((function(e){return kt(e,wt,It)}));return r.a.createElement(d.a,{className:o,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:u.width,flexBasis:u.width,flexGrow:u.width,order:u.index>-1?u.index:void 0,clone:!0},r.a.createElement(V.a,{component:"div"},Zt()(i.toString()).format("$0,0.00")))},an=n(156),rn=n.n(an),on=n(5296);function ln(){var e=Object(j.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ln=function(){return e},e}function un(){var e=Object(j.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return un=function(){return e},e}function cn(){var e=Object(j.a)(['\n  query JournalEntries_1($where:JournalEntiresWhereInput!) \n  {\n    journalEntries(where:$where)\n      @connection(key:"JournalEntries_1", filter:["where"]) \n    {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return cn=function(){return e},e}function dn(){var e=Object(j.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n"]);return dn=function(){return e},e}var sn=O()(dn()),pn=O()(cn(),sn),mn=O()(un(),sn),vn=O()(ln(),sn);function fn(){var e=Object(j.a)(["\n  mutation Reconcile_1($id:ID!) {\n    journalEntryUpdate(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return fn=function(){return e},e}var yn,bn,En,jn,hn,On,gn,wn=O()(fn(),sn),_n=function(e){var t=e.reconciled,n=e.textColor,o=e.mode,i=e.entryId,u=e.removeReconciled,c=Object(a.useState)(!1),s=Object(M.a)(c,2),p=s[0],m=s[1],v=Object(Pt.b)(wn),f=Object(M.a)(v,1)[0],y=Object(l.e)((function(e){return kt(e,wt,Rt)})),b=Object(a.useCallback)((function(e){return et.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,et.a.awrap(f({variables:{id:i}}));case 6:u(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),m(!1);case 12:case"end":return e.stop()}}),null,null,[[3,9]])}),[m,f,i,u,p]),E={checked:p,name:"reconciled",onChange:b,inputProps:Object(a.useMemo)((function(){return{type:"checkbox"}}),[])};return r.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:y.width,flexBasis:y.width,flexGrow:y.width,order:y.index>-1?y.index:void 0,display:"flex !important",justifyContent:"center",alignItems:"center",clone:!0},r.a.createElement(V.a,{component:"div"},t?r.a.createElement(rn.a,null):o===Cn.Reconcile?r.a.createElement(on.a,E):null))};!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(yn||(yn={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(bn||(bn={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(En||(En={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(jn||(jn={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(hn||(hn={})),function(e){e.Update="UPDATE",e.Add="ADD"}(On||(On={})),function(e){e.Asc="ASC",e.Desc="DESC"}(gn||(gn={}));var xn={dispatchId:null,dispatchQueue:new Map,ms:5};function Sn(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Object(l.d)(),r=Object(a.useMemo)((function(){return e?xn:{dispatchId:null,dispatchQueue:new Map,ms:t}}),[e,t]),o=Object(a.useCallback)((function(e){n((function(t){var n,a=r.dispatchQueue;null===r.dispatchId&&(r.dispatchId=setTimeout((function(){r.dispatchId=null,Object(l.b)((function(){var e=!0,t=!1,n=void 0;try{for(var r,o=a.values()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,l=Object(M.a)(i,2),u=l[0];(0,l[1])(u)}}catch(c){t=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}})),a.clear()}),r.ms));var o="function"===typeof e?Symbol():null===(n=e)||void 0===n?void 0:n.type;a.set(o,[e,t])}))}),[r,n]);return o}var Cn,Dn=Object(Ft.a)((function(e){return Object(Lt.a)({positive:{color:Vt.a[900]},negative:{color:Jt.a[900]}})})),Tn=function(e){var t=Dn(),n=Sn(),o=Object(Pt.a)(),i=e.journalEntry,l=void 0===i?null:i,u=e.style,c=e.deptId,s=e.mode,p=e.updateEntry,m=e.removeReconciled,v=Object(a.useCallback)((function(e){l&&p(l.id)}),[l,n,c,o,p]);if(null===l){var f=r.a.createElement(Bt.a,{variant:"rect",height:20});return r.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},r.a.createElement(L.a,{component:"div"},r.a.createElement(d.a,{flexGrow:1,clone:!0},r.a.createElement(V.a,{component:"div",children:f}))))}var y=l.category.type===jn.Credit?t.positive:t.negative;return r.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},r.a.createElement(L.a,{onDoubleClick:v,component:"div",hover:!0},r.a.createElement(Gt,{textColor:y,entryDate:l.date}),r.a.createElement(Wt,{textColor:y,department:l.department}),r.a.createElement(Yt,{textColor:y,category:l.category}),r.a.createElement(Qt,{textColor:y,source:l.source}),r.a.createElement(Ht,{textColor:y,paymentMethod:l.paymentMethod}),r.a.createElement(Xt,{textColor:y,description:l.description}),r.a.createElement(nn,{textColor:y,total:l.total}),r.a.createElement(_n,{removeReconciled:m,entryId:l.id,mode:s,textColor:y,reconciled:l.reconciled})))};!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(Cn||(Cn={}));var In=function(e){var t,n=e.height,o=e.deptId,i=e.mode,u=e.width,c=e.updateEntry,s=Object(a.useMemo)((function(){return o?{where:{department:{eq:o}}}:void 0}),[o]),p=Object(l.e)((function(e){return Ut(e,wt)}),l.c),v=Object(a.useMemo)((function(){var e=p.reduce((function(e,t){return e+t.width}),0);return Math.max(e,u)}),[p,u]),f=Object(Pt.c)(pn,{variables:s}),y=f.error,b=f.data,E=f.updateQuery,j=f.fetchMore,h=f.subscribeToMore,O=Object(Pt.a)();Object(a.useEffect)((function(){var e=function(){try{return O.readQuery({query:pn,variables:s})}catch(y){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();j({variables:s?Object(m.a)({},s,{where:Object(m.a)({},(null===s||void 0===s?void 0:s.where)||{},{lastUpdate:{gt:t}})}):{where:{lastUpdate:{gt:t}}},updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(W.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(W.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var n=h({document:mn,updateQuery:function(e,t){var n,a,r=t.subscriptionData,i=null===r||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.journalEntryAdded;return!i||i.id!==o&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==o}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(W.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(W.a)([null===r||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.journalEntryAdded]||!1))})}}),a=h({document:vn,updateQuery:function(e,t){var n,a=t.subscriptionData,r=null===a||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.journalEntryUpdated;return r&&O.writeFragment({id:"JournalEntry:".concat(r.id),fragment:sn,data:r}),e}});return function(){n(),a()}}),[s,j,O,h,o]);var g=Object(a.useCallback)((function(e){i!==Cn.View&&E((function(t){for(var n=t.journalEntries||[],a=0,r=n.length;a<r;a++)if(n[a].id===e)return Object(m.a)({},t,{journalEntries:[].concat(Object(W.a)(n.slice(0,a)),Object(W.a)(n.slice(a+1)))});return t}))}),[i,E]),w=Object(a.useMemo)((function(){var e=(null===b||void 0===b?void 0:b.journalEntries)||[];return i===Cn.Reconcile?e.filter((function(e){return!e.reconciled&&!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})):e.filter((function(e){return!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}))}),[b,i]),_=null!==(t=w.length)&&void 0!==t?t:500,x=Object(a.useCallback)((function(e){var t=e.index,n=e.style,a=w[t];return r.a.createElement(Tn,{mode:i,style:n,journalEntry:a,removeReconciled:g,updateEntry:c})}),[w,i,g,c]),S=Object(a.useCallback)((function(e){var t,n;return null!==(t=null===(n=w[e])||void 0===n?void 0:n.id)&&void 0!==t?t:e}),[w]);return y?r.a.createElement("div",null,y.message):r.a.createElement(d.a,{height:n,display:"block",clone:!0},r.a.createElement(Mt.a,{component:"div"},r.a.createElement(d.a,{display:"flex",clone:!0},r.a.createElement(Nt.a,{itemKey:S,height:n,width:v,itemCount:_,itemSize:53,overscanCount:10},x))))},Rn=n(28),Un=n(56),kn=n(83),An=n(5276),Pn=n(5298),Mn=n(5280),Nn=n(5272),Bn=n(5273),Fn=n(5274),Ln=n(5281),Vn=n(5282),Jn=n(5283),$n=n(5284),qn=n(5303),Gn=n(5269),zn=n(125),Wn=n(5270),Yn=n(5217),Qn=n(5271),Hn=n(5218),Xn=Symbol(),Kn=function(e){if((null!==e&&void 0!==e?e:Xn)===Xn)return"Type Required"},Zn=function(e){var t=e.label,n=void 0!==t&&t,o=Object(Rn.c)().isSubmitting,i=Object(Rn.b)({name:"type",validate:Kn}),l=Object(M.a)(i,3),u=l[0],c=l[1],s=l[2],p=c.error,v=c.touched,f=s.setValue,y=s.setTouched,b=Object(a.useMemo)((function(){return Object(m.a)({size:"small",exclusive:!0,disabled:o},u,{onChange:function(e,t){return et.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==t&&void 0!==t?t:Xn)!==Xn){e.next=2;break}return e.abrupt("return");case 2:return f(t),e.next=5,et.a.awrap(new Promise((function(e){return setTimeout(e,0)})));case 5:y(!0);case 6:case"end":return e.stop()}}))}})}),[u,o,f,y]),E=Object(a.useMemo)((function(){return r.a.createElement(d.a,{pl:1,clone:!0},r.a.createElement(qn.a,Object.assign({},e,b),r.a.createElement(Gn.a,{value:jn.Credit},r.a.createElement(Wn.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(zn.b,null))),r.a.createElement(Gn.a,{value:jn.Debit},r.a.createElement(Wn.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(zn.a,null)))))}),[b,e]);return n?r.a.createElement(Yn.a,null,r.a.createElement(Qn.a,Object.assign({},e,{labelPlacement:"boolean"===typeof n?void 0:n,control:E,label:"Type"})),v&&!!p&&r.a.createElement(Hn.a,{error:!0},p)):r.a.createElement(Yn.a,null,E,!!p&&r.a.createElement(Hn.a,{error:!0},p))},ea=n(38),ta=n(5294),na=n(160),aa={inputMode:"numeric"},ra={tabIndex:-1},oa=function(e){return e?e.isValid()?void 0:"Invalid Date":"Date is Required"},ia=function(e){var t=e.variant,n=void 0===t?"filled":t,o=e.autoFocus,i=void 0!==o&&o,l=Object(a.useRef)(!1),u=Object(Rn.c)().isSubmitting,c=Object(Rn.b)({name:"date",validate:oa}),d=Object(M.a)(c,3),s=d[0],p=d[1],v=d[2],f=(s.value,p.error),y=p.touched,b=v.setValue,E=v.setTouched,j=Object(a.useMemo)((function(){return{autoFocus:i}}),[i]),h=Object(a.useCallback)((function(){return setTimeout((function(){l.current||E(!0)}),0)}),[E,l]),O=Object(a.useCallback)((function(){return l.current=!0}),[l]),g=Object(a.useCallback)((function(){l.current=!1,h()}),[l,h]),w=Object(a.useCallback)((function(e){return b(e?qt.a.min([e,qt()()]):e)}),[b]),_=Object(a.useMemo)((function(){return Object(m.a)({},s,{value:s.value,disabled:u,error:y&&!!f,helperText:y?f:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:n,variant:"inline",format:"MM/DD/YYYY",margin:"none",label:"Date",initialFocusedDate:s.value||qt()(),autoOk:!0,InputProps:j,inputProps:aa,placeholder:"mm/dd/yyyy",KeyboardButtonProps:ra,onBlur:h,onOpen:O,onClose:g,onChange:w})}),[h,f,n,j,u,s,O,g,w,y]);return r.a.createElement(ea.a,{utils:na.a},r.a.createElement(ta.a,Object.assign({},e,_)))},la=n(39),ua=n(5295),ca=n(5301),da=n(5277),sa=n(5279);function pa(){var e=Object(j.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    method\n    active\n  }\n"]);return pa=function(){return e},e}function ma(){var e=Object(j.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return ma=function(){return e},e}function va(){var e=Object(j.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return va=function(){return e},e}function fa(){var e=Object(j.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return fa=function(){return e},e}function ya(){var e=Object(j.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n"]);return ya=function(){return e},e}function ba(){var e=Object(j.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return ba=function(){return e},e}var Ea=O()(ba()),ja=O()(ya()),ha=O()(fa()),Oa=O()(va()),ga=O()(ma(),Oa),wa=O()(pa());function _a(){var e=Object(j.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return _a=function(){return e},e}var xa=O()(_a(),Ea),Sa=function(e){return e.name},Ca=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(la.a)(i,["key"]);return r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(ca.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"medium"},u))," ",!o&&r.a.createElement(sa.a,{fontSize:"small"}))}))},Da=function(e){var t=Object(Pt.c)(xa,{variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),n=t.loading,o=t.error,i=t.data,l=(null===i||void 0===i?void 0:i.deptOpts)||[],u=Object(a.useState)(!1),c=Object(M.a)(u,2),d=c[0],s=c[1],p=Object(a.useState)(""),v=Object(M.a)(p,2),f=v[0],y=v[1],b=Object(a.useCallback)((function(e){return e?l.some((function(t){var n=t.parent;return"Department"===n.__typename&&n.id===e.id}))?"Sub-department Required":void 0:"Department Required"}),[l]),E=Object(Rn.b)({name:"department",validate:b}),j=Object(M.a)(E,3),h=j[0],O=j[1],g=j[2],w=h.value,_=h.onBlur,x=O.error,S=O.touched,C=g.setValue,D=Object(a.useMemo)((function(){return new Map(l.reduce((function(e,t){return e.push([t.id,t]),e}),[]))}),[l]),T=Object(a.useMemo)((function(){if(!w)return[];for(var e=[w],t=w.parent,n=t.__typename,a=t.id;"Business"!==n&&D.has(a);){var r=D.get(a);e.unshift(r);var o=r.parent;n=o.__typename,a=o.id}return e}),[w,D]),I=Object(a.useMemo)((function(){var e,t=null===(e=T[T.length-1])||void 0===e?void 0:e.id;return l.filter((function(e){return t?e.parent.id===t:"Business"===e.parent.__typename}))}),[l,T]),R=Object(a.useMemo)((function(){return T.length>0&&0===I.length}),[T,I]),U=Object(a.useCallback)((function(t){return r.a.createElement(da.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:S&&!!x,helperText:S?x:void 0,name:"department",label:"Department",disabled:R}))}),[e,S,x,R]),k=Object(a.useCallback)((function(e){return s(!0)}),[s]),A=Object(a.useCallback)((function(e){s(!1),_(e)}),[s,_]),P=Object(a.useCallback)((function(e,t){if(t)if(Array.isArray(t)){var n=t.length;C(0===n?null:t[n-1])}else C(t);else C(null)}),[C]),N=Object(a.useCallback)((function(e,t,n){y((t||"").trimStart())}),[y]),B=Object(a.useMemo)((function(){return Object(m.a)({},h,{open:d&&I.length>0,onFocus:k,onBlur:A,options:I,renderTags:Ca,forcePopupIcon:!1,disabled:n,value:T,renderInput:U,loading:n,autoSelect:!0,multiple:!0,getOptionLabel:Sa,onChange:P,onInputChange:N,inputValue:R?"":f,name:"department"})}),[R,f,N,P,T,n,U,h,d,k,A,I]);return o?r.a.createElement("pre",null,JSON.stringify(o,null,2)):r.a.createElement(ua.a,B)};function Ta(){var e=Object(j.a)(["\n  query CatEntryOpts {\n    catOpts: journalEntryCategories {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return Ta=function(){return e},e}var Ia=O()(Ta(),ja),Ra=function(e){return e.name},Ua=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(la.a)(i,["key"]);return r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(ca.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"medium"},u))," ",!o&&r.a.createElement(sa.a,{fontSize:"small"}))}))},ka=function(e){var t=e.entryType,n=Object(la.a)(e,["entryType"]),o=Object(Pt.c)(Ia),i=o.loading,l=o.error,u=o.data,c=(null===u||void 0===u?void 0:u.catOpts)||[],d=Object(a.useState)(!1),s=Object(M.a)(d,2),p=s[0],v=s[1],f=Object(a.useState)(""),y=Object(M.a)(f,2),b=y[0],E=y[1],j=Object(a.useCallback)((function(e){return e?c.some((function(t){var n=t.parent;return(null===n||void 0===n?void 0:n.id)===e.id}))?"Sub-category Required":void 0:"Category Required"}),[c]),h=Object(Rn.b)({name:"category",validate:j}),O=Object(M.a)(h,3),g=O[0],w=O[1],_=O[2],x=g.value,S=g.onBlur,C=w.error,D=w.touched,T=_.setValue;Object(a.useEffect)((function(){null!==x&&null!==t&&t!==x.type&&T(null)}),[t,x,T]);var I=Object(a.useMemo)((function(){return new Map(c.reduce((function(e,t){return e.push([t.id,t]),e}),[]))}),[c]),R=Object(a.useMemo)((function(){var e;if(!x)return[];for(var t=[x],n=null===(e=x.parent)||void 0===e?void 0:e.id;n&&I.has(n);){var a,r=I.get(n);t.unshift(r),n=null===(a=r.parent)||void 0===a?void 0:a.id}return t}),[x,I]),U=Object(a.useMemo)((function(){var e,n=null===(e=R[R.length-1])||void 0===e?void 0:e.id;return null===t?[]:n?c.filter((function(e){var a;return(null===(a=e.parent)||void 0===a?void 0:a.id)===n&&e.type===t})):c.filter((function(e){return!e.parent&&e.type===t}))}),[c,R,t]),k=Object(a.useMemo)((function(){return R.length>0&&0===U.length}),[R,U]),A=Object(a.useCallback)((function(t){return r.a.createElement(da.a,Object.assign({},n,{variant:e.variant||"filled"},t,{error:D&&!!C,helperText:D?C:void 0,name:"category",label:"Category",disabled:k}))}),[e,n,D,C,k]),P=Object(a.useCallback)((function(e){return v(!0)}),[v]),N=Object(a.useCallback)((function(e){v(!1),S(e)}),[v,S]),B=Object(a.useCallback)((function(e,t){if(t)if(Array.isArray(t)){var n=t.length;T(0===n?null:t[n-1])}else T(t);else T(null)}),[T]),F=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),E(t)}),[E]),L=Object(a.useMemo)((function(){return Object(m.a)({},g,{open:p&&U.length>0,onFocus:P,onBlur:N,options:U,renderTags:Ua,forcePopupIcon:!1,disabled:i,value:R,renderInput:A,loading:i,autoSelect:!0,multiple:!0,getOptionLabel:Ra,onInputChange:F,inputValue:k?"":b,onChange:B,name:"category"})}),[k,B,F,b,R,i,A,g,p,P,N,U]);return l?r.a.createElement("pre",null,JSON.stringify(l,null,2)):r.a.createElement(ua.a,L)},Aa=n(112),Pa=n(126);function Ma(){var e=Object(j.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Ma=function(){return e},e}var Na=O()(Ma(),ha,ga,Oa),Ba=function(e){switch(e){case En.Business:case En.Department:case En.Person:break;default:return"string"===typeof e}return!1},Fa=function(e){switch(e){case En.Business:return"Vendor";case En.Department:return"Department";case En.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},La=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(la.a)(i,["key"]);return Ba(e)?e:r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(ca.a,Object.assign({color:o?"primary":"default",variant:o?"default":"outlined",label:Fa(e),size:"medium"},u,{disabled:!o}))," ",!o&&r.a.createElement(sa.a,{fontSize:"small"}))}))},Va=function(e,t){var n=t.inputValue,a=new RegExp("(^|\\s)".concat(n),"i");return e.filter((function(e){return a.test(Fa(e))}))},Ja=function(e){var t,n=e.value,a=null!==(t=n[0])&&void 0!==t?t:null,r=n.length>1?n[n.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(Ba(r)&&a===En.Person){var o=Object(Aa.parseName)(r);if(!o.firstName.trim())return"First Name Required";if(!o.lastName.trim())return"Last Name Required"}},$a=function(e){var t,n=Object(a.useState)(!1),o=Object(M.a)(n,2),i=o[0],l=o[1],u=Object(Rn.b)({name:"source",validate:Ja}),c=Object(M.a)(u,3),d=c[0],s=c[1],p=c[2],v=d.value,f=v.value,y=v.inputValue,b=d.onBlur,E=s.error,j=s.touched,h=p.setValue,O=null!==(t=f[0])&&void 0!==t?t:null,g=f.length>1?f[f.length-1]:null,w=Object(a.useRef)(""),_=Object(Pt.c)(Na,{skip:!w.current&&!f[1],variables:{name:w.current,isBiz:O!==En.Person}}),x=_.loading,S=_.error,C=_.data,D=Object(a.useMemo)((function(){var e=new Map,t=!0,n=!1,a=void 0;try{for(var r,o=((null===C||void 0===C?void 0:C.businesses)||[])[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value,l=!0,u=!1,c=void 0;try{for(var d,s=i.departments[Symbol.iterator]();!(l=(d=s.next()).done);l=!0){var p=d.value;e.set(p.id,p)}}catch(m){u=!0,c=m}finally{try{l||null==s.return||s.return()}finally{if(u)throw c}}}}catch(m){n=!0,a=m}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}),[C]),T=Object(a.useMemo)((function(){if(null===O)return[En.Business,En.Person];if(O===En.Person)return null===g&&(null===C||void 0===C?void 0:C.people)||[];if(!g)return(null===C||void 0===C?void 0:C.businesses)||[];if("string"===typeof g)return[];var e=[],t=!0,n=!1,a=void 0;try{for(var r,o=D.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.parent.__typename===g.__typename&&i.parent.id===g.id&&e.push(i)}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}),[O,C,D,g]),I=Object(a.useMemo)((function(){return null!==O&&null===g}),[O,g]),R=Object(a.useMemo)((function(){return f.length>0&&0===T.length&&!I}),[f,T,I]),U=Object(a.useMemo)((function(){return null===O?"Source Type":O===En.Person?"Person Name":1===f.length?"Vendor":2===f.length&&T.length>0?"Department":T.length>0?"Sub-Department":"Vendor"}),[f,T,O]),k=Object(a.useCallback)((function(t){return r.a.createElement(da.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:j&&!!E,helperText:j?E:void 0,name:"source",label:U}))}),[e,j,E,U]),A=Object(a.useCallback)((function(e){return l(!0)}),[l]),P=Object(a.useCallback)((function(e){l(!1),e.persist(),setTimeout((function(){return b(e)}),0)}),[l,b]),N=Object(a.useCallback)((function(e,t){var n=t.length-1,a=t[n];if(Ba(a)){var r=[],o=!0,i=!1,l=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d&&(Pa.checkName(d)&&(d=Pa(d)),r.push(d))}}catch(p){i=!0,l=p}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}var s=r.join(" ").trim();t[n]=s.charAt(0).toUpperCase()+s.substring(1)}h({inputValue:y,value:t})}),[h,y]),B=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),R||h({inputValue:t,value:f}),null!==O&&null===g&&t&&(w.current=t[0].toLowerCase())}),[h,O,g,f,R,w]),F=Object(a.useMemo)((function(){return Object(m.a)({},d,{inputValue:R?"":y,open:i&&T.length>0,onFocus:A,onBlur:P,options:T,renderTags:La,forcePopupIcon:!1,freeSolo:I,value:f,renderInput:k,loading:x,autoSelect:!0,multiple:!0,getOptionLabel:Fa,onInputChange:B,onChange:N,filterOptions:Va,name:"source"})}),[R,I,y,B,N,f,x,k,d,i,A,P,T]);return S?r.a.createElement("pre",null,JSON.stringify(S,null,2)):r.a.createElement(ua.a,F)},qa=n(5299),Ga=n(5224),za=n(5222);function Wa(){var e=Object(j.a)(["\n  query PayMethodEntryOpts {\n    paymentMethods {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return Wa=function(){return e},e}var Ya=O()(Wa(),wa),Qa=function(e){if(!e)return"Method Required"},Ha=function(e){var t=e.variant,n=void 0===t?"filled":t,o=e.autoFocus,i=void 0!==o&&o,l=Object(la.a)(e,["variant","autoFocus"]),u=Object(Pt.c)(Ya),c=u.loading,d=u.error,s=u.data,p=Object(Rn.b)({name:"paymentMethod",validate:Qa}),m=Object(M.a)(p,2),v=m[0],f=m[1],y=f.error,b=f.touched,E=!!d||b&&!!y,j=Object(a.useMemo)((function(){return((null===s||void 0===s?void 0:s.paymentMethods)||[]).map((function(e){var t=e.id,n=e.method;return r.a.createElement(qa.a,{value:t,key:t,children:"".concat(n[0].toUpperCase()).concat(n.substr(1))})}))}),[s]);return c?r.a.createElement(Bt.a,{variant:"rect",height:56}):d?r.a.createElement("pre",null,JSON.stringify(d,null,2)):r.a.createElement(Yn.a,Object.assign({},l,{required:!0,disabled:c,error:E,variant:n}),r.a.createElement(Ga.a,null,"Method"),r.a.createElement(za.a,Object.assign({},v,{autoFocus:i,children:j})),E&&r.a.createElement(Hn.a,{children:y}))},Xa=function(e){var t=e.autoFocus,n=void 0!==t&&t,o=e.variant,i=void 0===o?"filled":o,l=Object(la.a)(e,["autoFocus","variant"]),u=Object(Rn.b)({name:"description"}),c=Object(M.a)(u,1)[0],d=Object(a.useMemo)((function(){return{type:"text",autoFocus:n}}),[n]);return r.a.createElement(da.a,Object.assign({},l,c,{variant:i,label:"Description",name:"description",InputProps:d}))},Ka=n(5278),Za=function(e){if(""===e)return"Total Required";var t="string"===typeof e?Number.parseFloat(e):e;return Number.isNaN(t)?"Invalid Number":0===t?"Cannot be 0":t<.01?"Invalid Total":void 0},er={min:"0.00",step:"0.01"},tr=function(e){var t=e.autoFocus,n=void 0!==t&&t,o=e.variant,i=void 0===o?"filled":o,l=Object(la.a)(e,["autoFocus","variant"]),u=Object(Rn.b)({name:"total",validate:Za}),c=Object(M.a)(u,2),d=c[0],s=c[1],p=s.error,m=s.touched,v=Object(a.useMemo)((function(){return{type:"number",autoFocus:n,startAdornment:r.a.createElement(Ka.a,{position:"start"},"$")}}),[n]);return r.a.createElement(da.a,Object.assign({},l,d,{error:m&&!!p,helperText:m?p:"",placeholder:"0.00",label:"Total",name:"total",required:!0,variant:i,inputProps:er,InputProps:v}))},nr={type:"checkbox"},ar=function(e){var t=e.label,n=Object(la.a)(e,["label"]),a=Object(Rn.b)({name:"reconciled",type:"checkbox"}),o=Object(M.a)(a,1)[0];return t?r.a.createElement(Qn.a,Object.assign({},n,o,{label:"Reconcile",control:r.a.createElement(on.a,{inputProps:nr})})):r.a.createElement(on.a,Object.assign({},n,o,{inputProps:nr}))};function rr(){var e=Object(j.a)(["\n  mutation UpsertEntryDelete($id: ID!) {\n    journalEntryDelete(id: $id) {\n      __typename\n      id\n      deleted\n    }\n  }\n"]);return rr=function(){return e},e}var or=O()(rr()),ir=function(e){var t=e.open,n=e.isUpdate,o=e.entryId,i=e.setOpen,l=e.formikProps,u=e.loading,c=Object(Pt.b)(or),s=Object(M.a)(c,1)[0],p=l.isSubmitting,m=l.status,v=m.submitted,f=void 0!==v&&v,y=m.errors,b=y.general,E=y.submission,j=null!==l.values.type,h=l.submitForm,O=l.resetForm,g=l.setSubmitting,w=l.setStatus,_=Object(Un.a)(),x=Object(a.useMemo)((function(){if(b)return r.a.createElement(d.a,{color:"error.main",clone:!0},r.a.createElement("span",null,"General Error"));if(u)return"Loading";var e=n?"Update":"Add",t="";return t=j?l.values.type===jn.Credit?"".concat(e," Credit"):"".concat(e," Debit"):"".concat(e," Entry"),E?r.a.createElement(d.a,{color:"error.main",clone:!0},r.a.createElement("span",null,"".concat(t,": Submission Error"))):p?"".concat(t,": Submitting"):t}),[p,j,l,n,u,b,E]),S=u||p||!!b||f,C=Object(a.useMemo)((function(){if(f)return r.a.createElement(kn.a,{color:"primary",variant:"h3"},"Success!");if(b){var e="string"===typeof b;return r.a.createElement(d.a,{width:"100%"},r.a.createElement(kn.a,{color:"error",variant:"body1"},e?b:b.message),!e&&r.a.createElement("pre",null,JSON.stringify(b,null,2)))}if(u||p)return r.a.createElement(An.a,null);if(j){var t="".concat(_.spacing(1),"px !important");return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{margin:t,clone:!0},r.a.createElement(Zn,{style:{margin:_.spacing(1)},label:"start"})),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(ia,{autoFocus:!0})),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(Da,null)),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(ka,{entryType:l.values.type})),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement($a,null)),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(Ha,null)),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(Xa,null)),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(tr,null)),r.a.createElement(d.a,{padding:2},r.a.createElement(ar,{label:!0})),!!E&&r.a.createElement(d.a,{width:"100%"},r.a.createElement(d.a,{marginTop:t,clone:!0},r.a.createElement(kn.a,{variant:"body1",color:"error"},"string"===typeof E?E:E.message))))}return r.a.createElement(d.a,{marginLeft:"0px !important",clone:!0},r.a.createElement(Zn,{label:"top"}))}),[f,j,u,b,E,p,_,l.values.type]),D=Object(a.useCallback)((function(e){return h().then((function(){return i(!0)}))}),[h,i]),T=Object(a.useCallback)((function(e){i(!1),O()}),[i,O]),I=Object(a.useCallback)((function(e){var t,n;return et.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,et.a.awrap(s({variables:{id:o}}));case 4:return t={submitted:!0,errors:{}},g(!1),w(t),e.next=9,et.a.awrap(new Promise((function(e){return setTimeout(e,750)})));case 9:O({values:hr()}),i(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),n={errors:{submission:"message"in e.t0?e.t0:JSON.stringify(e.t0,null,2)}},w(n),g(!1);case 18:case"end":return e.stop()}}),null,null,[[0,13]])}),[s,o,i,O,w,g]);return r.a.createElement(Pn.a,{fullWidth:!0,maxWidth:"lg",open:t,PaperProps:{component:"form",onSubmit:l.handleSubmit}},r.a.createElement(Mn.a,{children:x}),r.a.createElement(d.a,{display:"flex",alignItems:"flex-start",justifyContent:"center",flexWrap:"wrap",clone:!0},r.a.createElement(Nn.a,{dividers:!0,children:C})),r.a.createElement(Bn.a,null,n&&r.a.createElement(Fn.a,{disabled:S,size:"medium",color:"default",variant:"outlined",startIcon:r.a.createElement(Ln.a,null),onClick:I},"Delete"),r.a.createElement(Fn.a,{disabled:S,size:"medium",color:"secondary",variant:"outlined",type:"submit",startIcon:r.a.createElement(Vn.a,null)},n?"Update":"Add"),!n&&r.a.createElement(Fn.a,{disabled:S,size:"medium",color:"secondary",variant:"outlined",onClick:D,startIcon:r.a.createElement(Jn.a,null)},"Add & New"),r.a.createElement(Fn.a,{disabled:p||f,size:"medium",color:"default",variant:"outlined",startIcon:r.a.createElement($n.a,null),onClick:T},"Cancel")))};function lr(){var e=Object(j.a)(["\n  mutation UpsertEntryUpdate($id: ID!, $fields: JournalEntryUpdateFields!) {\n    journalEntryUpdate(id: $id, fields: $fields) {\n      __typename\n      id\n    }\n  }\n"]);return lr=function(){return e},e}function ur(){var e=Object(j.a)(["\n  mutation UpsertEntryAdd($fields: JournalEntryAddFields!) {\n    journalEntryAdd(fields: $fields) {\n      __typename\n      id\n    }\n  }\n"]);return ur=function(){return e},e}function cr(){var e=Object(j.a)(["\n  mutation UpsertEntryAddBusiness($fields: BusinessAddFields!) {\n    addBusiness(fields: $fields) {\n      ...SrcEntryBizOptFragment\n    }\n  }\n  ","\n"]);return cr=function(){return e},e}function dr(){var e=Object(j.a)(["\n  mutation UpsertEntryAddPerson($fields: PersonAddFields!) {\n    addPerson(fields: $fields) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n"]);return dr=function(){return e},e}var sr=O()(dr(),ha),pr=O()(cr(),ga),mr=O()(ur()),vr=O()(lr()),fr=function(e){switch(e.__typename){case"Business":return En.Business;case"Person":return En.Person;case"Department":return En.Department}},yr=function(e,t,n){var a,r,o,i,l,u,c,d,s;return et.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if("string"!==typeof(a=e[e.length-1])){p.next=23;break}if((r=e[0])!==En.Person){p.next=15;break}return i=Object(Aa.parseName)(a),p.next=7,et.a.awrap(n.mutate({mutation:sr,variables:{fields:{name:{first:i.firstName,last:i.lastName}}}}));case 7:if(l=p.sent,null===(o=l.data)||void 0===o?void 0:o.addPerson.id){p.next=10;break}throw new Error("Something went wrong. Server did not respond with new person id.");case 10:return u={inputValue:"",value:[r,l.data.addPerson]},t.setFieldValue("source",u,!1),p.abrupt("return",{sourceType:En.Person,id:l.data.addPerson.id});case 15:return p.next=17,et.a.awrap(n.mutate({mutation:pr,variables:{fields:{name:a}}}));case 17:if(d=p.sent,null===(c=d.data)||void 0===c?void 0:c.addBusiness.id){p.next=20;break}throw new Error("Something went wrong. Server did not respond with new business id.");case 20:return s={inputValue:"",value:[r,d.data.addBusiness]},t.setFieldValue("source",s,!1),p.abrupt("return",{sourceType:En.Business,id:d.data.addBusiness.id});case 23:return p.abrupt("return",{sourceType:fr(a),id:a.id});case 24:case"end":return p.stop()}}))};function br(){var e=Object(j.a)(["\n  query EntryUpdateValues($id: ID!) {\n    journalEntry(id: $id) {\n      ...EntryUpdateValueFragment\n    }\n  }\n  fragment EntryUpdateValueFragment on JournalEntry {\n    id\n    __typename\n    type\n    date\n    department {\n      ...DeptEntryOptFragment\n    }\n    category {\n      ...CatEntryOptFragment\n    }\n    source {\n      ...SrcEntryPersonOptFragment\n      ...SrcEntryBizOptFragment\n      ... on Department {\n        ancestors {\n          ... on Department {\n            id\n            __typename\n          }\n          ...SrcEntryBizOptFragment\n        }\n      }\n    }\n    paymentMethod {\n      ...PayMethodEntryOptFragment\n    }\n    description\n    total {\n      num\n      den\n    }\n    reconciled\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return br=function(){return e},e}var Er,jr=O()(br(),Ea,ja,ha,ga,Oa,wa),hr=function(){return{type:null,date:null,department:null,category:null,source:{inputValue:"",value:[]},paymentMethod:"",description:"",total:"",reconciled:!1}},Or=function(e){var t=e.entryId,n=e.open,o=e.setOpen,i=!!t,l=Object(Pt.c)(jr,{skip:!i,variables:{id:t||""}}),u=l.loading,c=l.error,d=l.data,s=l.client,p=Object(a.useMemo)((function(){if(i){var e,t,n,a,r,o,l=null===d||void 0===d?void 0:d.journalEntry,u=[],c=null===l||void 0===l?void 0:l.source;switch(null===c||void 0===c?void 0:c.__typename){case"Person":u.push(En.Person,c);break;case"Business":u.push(En.Business,c);break;case"Department":u.push(En.Business);var s=[],p=!0,m=!1,v=void 0;try{for(var f,y=c.ancestors[Symbol.iterator]();!(p=(f=y.next()).done);p=!0){var b=f.value;"Business"===b.__typename?u.push(b):s.push(b.id)}}catch(C){m=!0,v=C}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}var E=u[1];if(s.length>0){var j=[],h=!0,O=!1,g=void 0;try{for(var w,_=E.departments[Symbol.iterator]();!(h=(w=_.next()).done);h=!0){var x=w.value;if(-1!==s.indexOf(x.id)&&j.push(x)===s.length)break}}catch(C){O=!0,g=C}finally{try{h||null==_.return||_.return()}finally{if(O)throw g}}j.sort((function(e,t){return e.id===t.parent.id||E.id||e.parent.id?-1:t.id===e.parent.id?1:0})),u.push.apply(u,j)}}var S=l?l.total.num/l.total.den:"";return{type:null!==(e=null===l||void 0===l?void 0:l.type)&&void 0!==e?e:null,date:qt()(null===l||void 0===l?void 0:l.date),department:null!==(t=null===l||void 0===l?void 0:l.department)&&void 0!==t?t:null,category:null!==(n=null===l||void 0===l?void 0:l.category)&&void 0!==n?n:null,source:{inputValue:"",value:u},paymentMethod:null!==(a=null===l||void 0===l?void 0:l.paymentMethod.id)&&void 0!==a?a:"",description:null!==(r=null===l||void 0===l?void 0:l.description)&&void 0!==r?r:"",total:S,reconciled:null!==(o=null===l||void 0===l?void 0:l.reconciled)&&void 0!==o&&o}}return hr()}),[i,d]),m=Object(a.useMemo)((function(){return{submitted:!1,errors:{general:c}}}),[c]),v=Object(a.useCallback)((function(e,n){return function(e){var t,n,a,r,o,i,l,u,c,d,s,p,m,v,f,y,b,E,j,h,O,g,w,_,x,S,C,D,T;return et.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.values,n=e.formikHelpers,a=e.setOpen,r=e.client,o=e.initialValues,i=e.entryId,I.prev=1,l=t.type,u=t.date,c=t.department.id,d=t.category.id,I.next=8,et.a.awrap(yr(t.source.value,n,r));case 8:if(s=I.sent,p=t.paymentMethod,m=t.description,v=t.total,f=t.reconciled,!i){I.next=33;break}if(E={},o.type!==l&&(E.type=l),u.isSame(o.date)||(E.date=u.toISOString()),c!==(null===(y=o.department)||void 0===y?void 0:y.id)&&(E.department=c),d!==(null===(b=o.category)||void 0===b?void 0:b.id)&&(E.category=d),function(){var e=o.source.value,t=e[e.length-1],n=fr(t);return t.id!==s.id||n!==s.sourceType}()&&(E.source=s),p!==o.paymentMethod&&(E.paymentMethod=p),m&&m!==o.description&&(E.description=m),v!==o.total&&(j=new tn.a(("string"===typeof v?Number.parseFloat(v):v).toFixed(2)),h=j.n,O=j.d,E.total={num:h,den:O}),f!==o.reconciled&&(E.reconciled=f),0!==Object.keys(E).length){I.next=28;break}return g={errors:{submission:"No changes detected."}},n.setStatus(g),I.abrupt("return");case 28:return I.next=30,et.a.awrap(r.mutate({mutation:vr,variables:{id:i,fields:E}}));case 30:I.sent,I.next=39;break;case 33:return w=new tn.a(("string"===typeof v?Number.parseFloat(v):v).toFixed(2)),_=w.n,x=w.d,S={num:_,den:x},C=u.toISOString(),I.next=38,et.a.awrap(r.mutate({mutation:mr,variables:{fields:{type:l,date:C,department:c,category:d,source:s,paymentMethod:p,description:m,total:S,reconciled:f}}}));case 38:I.sent;case 39:return D={submitted:!0,errors:{}},n.setStatus(D),I.next=43,et.a.awrap(new Promise((function(e){return setTimeout(e,750)})));case 43:a(!1),n.resetForm({values:hr()}),I.next=51;break;case 47:I.prev=47,I.t0=I.catch(1),T={errors:{submission:I.t0}},n.setStatus(T);case 51:case"end":return I.stop()}}),null,null,[[1,47]])}({values:e,formikHelpers:n,setOpen:o,client:s,initialValues:p,entryId:t})}),[t,p,o,s]),f=Object(a.useCallback)((function(e){return r.a.createElement(ir,{open:n,isUpdate:i,entryId:t,setOpen:o,loading:u,formikProps:e})}),[i,t,o,n,u]);return r.a.createElement(Rn.a,{initialValues:p,onSubmit:v,children:f,initialStatus:m,enableReinitialize:!0})},gr=n(5286),wr=(J("Journal",$),function(e){var t=e.deptId,n=e.mode,o=Object(Un.a)(),i=Object(a.useState)(!1),l=Object(M.a)(i,2),u=l[0],c=l[1],s=Object(a.useState)(void 0),p=Object(M.a)(s,2),m=p[0],v=p[1],f=(Object(a.useCallback)((function(){c(!1),v(void 0)}),[v,c]),Object(a.useCallback)((function(e){v(e),c(!0)}),[v,c])),y=Object(a.useCallback)((function(){c(!0),v(void 0)}),[v,c]),b=Object(a.useCallback)((function(e){var a=e.width,o=e.height;return r.a.createElement(In,{updateEntry:f,mode:n,deptId:t,width:a,height:o})}),[t,n,f]);return r.a.createElement(d.a,{style:{overflowX:"auto"},width:"100%",overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"flex-start",flexDirection:"column",clone:!0},r.a.createElement("form",null,r.a.createElement(d.a,{width:"100%",flexGrow:1,display:"flex !important",justifyContent:"flex-start",flexDirection:"column",clone:!0},r.a.createElement(N.a,{component:"div"},r.a.createElement(At,null),r.a.createElement(d.a,{flexGrow:1},r.a.createElement(B.a,{children:b})),n===Cn.View&&r.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},r.a.createElement(gr.a,{disabled:u,size:"large",color:"secondary","aria-label":"add entry",children:r.a.createElement(Vn.a,null),onClick:y})))),r.a.createElement(Or,{open:u,setOpen:c,entryId:m})))}),_r=n(5287),xr=n(5291),Sr=n(161),Cr=n.n(Sr),Dr=n(163),Tr=n.n(Dr),Ir=n(165),Rr=n.n(Ir),Ur=n(164),kr=n.n(Ur),Ar=n(5288),Pr=n(5289),Mr=n(5290),Nr=n(115),Br=n(113),Fr=(n(127),function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=e.journalEntryUpserts[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===t)return l}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return null});!function(e){e[e.Add=0]="Add",e[e.Update=1]="Update"}(Er||(Er={}));var Lr=function(e,t){var n,a;return null!==(n=null===(a=Fr(e,t))||void 0===a?void 0:a.submit.status)&&void 0!==n?n:null},Vr=function(e,t){var n;return(null===(n=Fr(e,t))||void 0===n?void 0:n.values.category.value)||null};function Jr(){var e=Object(j.a)(["\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n"]);return Jr=function(){return e},e}function $r(){var e=Object(j.a)(["\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n"]);return $r=function(){return e},e}function qr(){var e=Object(j.a)(["\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n"]);return qr=function(){return e},e}function Gr(){var e=Object(j.a)(["\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    journalEntryUpdate(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Gr=function(){return e},e}function zr(){var e=Object(j.a)(["\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    journalEntryAdd(fields:$fields) {\n      __typename\n      id\n    }\n  }\n"]);return zr=function(){return e},e}function Wr(){var e=Object(j.a)(["\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n"]);return Wr=function(){return e},e}function Yr(){var e=Object(j.a)(["\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n"]);return Yr=function(){return e},e}O()(Yr()),O()(Wr()),O()(zr()),O()(Gr(),sn);var Qr=O()(qr()),Hr=function(e,t,n){return function(a,r){var o,i,u,c,d;return et.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=r(),i=Vr(o,e),u=!1,null===i){s.next=15;break}return s.prev=4,s.next=7,et.a.awrap(n.query({query:Qr,variables:{id:i}}));case 7:c=s.sent,d=c.data,d.journalEntryCategory.type!==t&&(u=!0),s.next=15;break;case 13:s.prev=13,s.t0=s.catch(4);case 15:u?Object(l.b)((function(){a(eo(e)),a({type:fe,payload:{upsertId:e,type:t}})})):a({type:fe,payload:{upsertId:e,type:t}});case 16:case"end":return s.stop()}}),null,null,[[4,13]])}},Xr=function(e,t){return{type:re,payload:{upsertId:e,value:t}}},Kr=function(e,t){return{type:de,payload:{upsertId:e,value:t}}},Zr=(O()($r()),O()(Jr()),function(e,t){return{type:he,payload:{upsertId:e,value:t}}}),eo=function(e){return{type:Oe,payload:{upsertId:e}}},to=function(e,t){return{type:xe,payload:{upsertId:e,srcType:t}}},no=function(e,t){return{type:De,payload:{upsertId:e,value:t}}},ao=function(e,t){return{type:ke,payload:{upsertId:e,value:t}}},ro=function(e,t){return{type:Ne,payload:{upsertId:e,value:t}}},oo=function(e,t){var n=Number.parseFloat(t);if(Number.isNaN(n))return lo(e,new TypeError("Invalid Number."));for(var a="",r=0,o=t.length;r<o;r++){var i=t[r];"."===i?(a+=i,o=Math.min(o,r+3)):Number.isNaN(Number.parseInt(i))||(a+=i)}return{type:Fe,payload:{upsertId:e,input:a}}},io=function(e,t){var n=new tn.a(t.toFixed(2)),a=n.n,r=n.d;return{type:Ve,payload:{upsertId:e,value:{num:a,den:r}}}},lo=function(e,t){return{type:$e,payload:{upsertId:e,error:t}}},uo=function(e,t){return{type:Ge,payload:{upsertId:e,value:t}}};function co(){var e=Object(j.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return co=function(){return e},e}function so(){var e=Object(j.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return so=function(){return e},e}function po(){var e=Object(j.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return po=function(){return e},e}function mo(){var e=Object(j.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n    }\n    lastUpdate\n    deleted\n  }\n"]);return mo=function(){return e},e}function vo(){var e=Object(j.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return vo=function(){return e},e}var fo=O()(vo()),yo=O()(mo()),bo=O()(po(),fo,yo),Eo=O()(so(),yo),jo=O()(co(),yo),ho=J("DashboardJournalEntry",$),Oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?Vt.a[t]:e<.9?Nr.a[t]:Jt.a[t]},go=function(e){var t=e.spentPercentage,n=e.height;return r.a.createElement(d.a,{height:n,bgcolor:Oo(t),display:"flex",justifyContent:"flex-start"},r.a.createElement(d.a,{height:"100%",width:"".concat(100*t,"%"),bgcolor:Br.a[400]}))},wo=function(e){var t,n=e.deptId,o=Object(a.useState)(!1),i=Object(M.a)(o,2),u=i[0],c=i[1],p=Object(a.useMemo)((function(){return{deptId:n,where:{department:{eq:n},deleted:!1}}}),[n]),v=Object(Pt.c)(bo,{variables:p}),f=v.loading,y=v.error,b=v.data,E=v.subscribeToMore,j=v.fetchMore,h=Object(Pt.a)();Object(a.useEffect)((function(){var e=function(){try{return h.readQuery({query:bo,variables:p})}catch(y){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();j({variables:Object(m.a)({},p,{where:Object(m.a)({},(null===p||void 0===p?void 0:p.where)||{},{lastUpdate:{gt:t}})}),updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(W.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(W.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var a=E({document:Eo,updateQuery:function(e,t){var a,r,o=t.subscriptionData,i=null===o||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.journalEntryAdded;return!i||i.id!==n&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==n}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(W.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(W.a)([null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.journalEntryAdded]||!1))})}}),r=E({document:jo,updateQuery:function(e,t){var n,a=t.subscriptionData,r=null===a||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.journalEntryUpdated;return r&&h.writeFragment({id:"JournalEntry:".concat(r.id),fragment:yo,data:r}),e}});return function(){a(),r()}}),[p,j,h,E,n]);var O=Object(a.useMemo)((function(){return((null===b||void 0===b?void 0:b.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[b]),g=(null===b||void 0===b?void 0:null===(t=b.department)||void 0===t?void 0:t.name)||"";Object(a.useEffect)((function(){document.title=g}),[g]);var w=Sn(),_=(Object(a.useCallback)((function(e){w(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var r=a(),o=Lr(r,e),i=t.entryId,u=(t.fromDept,t.client);if(null===o)if(i){if(!u)throw Error("client required for update");var c=u.readFragment({id:"JournalEntry:".concat(i),fragment:sn});if(!c)return;var d=c.date,s=c.type,p=c.department.id,m=c.category.id,v=c.description,f=c.paymentMethod.id,y=c.source,b=y.__typename,E=y.id,j=c.total,h=j.num,O=j.den,g=c.reconciled,w="Person"===b?En.Person:En.Business,_={sourceType:"Person"===b?En.Person:"Business"===b?En.Business:En.Department,id:E};n({type:H,payload:{upsertId:e,entryId:i,fromDept:t.fromDept}}),Object(l.b)((function(){n(Xr(e,new Date(d))),n(Hr(e,s,u)),n(to(e,w)),n(Kr(e,p)),n(Zr(e,m)),v&&n(ro(e,v)),n(ao(e,f)),n(no(e,_)),n(io(e,h/O)),n(oo(e,(h/O).toString())),n(uo(e,g))}))}else n({type:H,payload:{upsertId:e,fromDept:t.fromDept}})}}(ho,{fromDept:n}))}),[w,n]),(null===b||void 0===b?void 0:b.department)||null),x=Object(a.useMemo)((function(){var e=new Map,t=0;if(_){var n=function(){if(_.budget){var e=_.budget.amount;return e.num/e.den}return null}();e.set(_.id,{name:_.name,spent:0,budget:n});var a=!0,r=!1,o=void 0;try{for(var i,l=_.descendants[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var u=i.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;t+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(w){r=!0,o=w}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}}var p=0,m=!0,v=!1,f=void 0;try{for(var y,b=O[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var E=y.value,j=e.get(E.department.id),h=E.total.num/E.total.den;E.type===jn.Credit?(p-=h,j.spent-=h):(p+=h,j.spent+=h)}}catch(w){v=!0,f=w}finally{try{m||null==b.return||b.return()}finally{if(v)throw f}}var g=function(){if(null===_||void 0===_?void 0:_.budget){var e,n=(null===_||void 0===_?void 0:null===(e=_.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return n.num/n.den}return t}();return{totalRemaining:Zt()(g-p).format("$0,0.00"),budget:Zt()(g).format("$0,0.00"),spentToBudgetRatio:p/g,deptReport:e}}),[O,_]),S=x.totalRemaining,C=x.budget,D=x.spentToBudgetRatio,T=x.deptReport,I=Object(a.useMemo)((function(){var e=[],t=!0,n=!1,a=void 0;try{for(var o,i=function(){var t=o.value,n=(u=Object(M.a)(t,2))[0],a=(c=u[1]).budget,i=c.spent,l=c.name;if(n===(null===_||void 0===_?void 0:_.id))return"continue";var s=r.a.createElement(_r.a,{key:n,item:!0,xs:12,md:4,lg:3},r.a.createElement(Ar.a,null,r.a.createElement(Pr.a,{titleTypographyProps:{noWrap:!0},title:l}),r.a.createElement(Mr.a,null,function(){if(null===a)return r.a.createElement(d.a,{color:i>0?Jt.a[900]:Vt.a[900],clone:!0},r.a.createElement(kn.a,{variant:"h6"},"Spent: ".concat(Zt()(Math.abs(i)).format("$0,0.00"))));var e=a-i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{color:Oo(i/a,900),clone:!0},r.a.createElement(kn.a,{variant:"h6"},"".concat(Zt()(e).format("$0,0.00")," Remaining"))),r.a.createElement(kn.a,{variant:"body1"},"of ".concat(Zt()(a).format("$0,0.00"))),r.a.createElement(go,{spentPercentage:i/a,height:5}))}())));e.push(s)},l=T[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var u,c;i()}}catch(s){n=!0,a=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}return e}),[T,_]),R=Object(a.useCallback)((function(e){return c(!0)}),[c]);return f?r.a.createElement("p",null,"Loading..."):y?(console.error(y),r.a.createElement("p",null,y.message)):r.a.createElement(d.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(xr.a,null,r.a.createElement(d.a,{padding:8},r.a.createElement(_r.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(_r.a,{item:!0},r.a.createElement(Fn.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(Cr.a,null),children:"New Entry",onClick:R})),r.a.createElement(_r.a,{item:!0},r.a.createElement(Fn.a,{component:s.b,to:"/journal/".concat(n,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Tr.a,null),children:"Reconcile"})),r.a.createElement(_r.a,{item:!0},r.a.createElement(Fn.a,{variant:"contained",startIcon:r.a.createElement(kr.a,null),children:"Reports"})),r.a.createElement(_r.a,{item:!0},r.a.createElement(Fn.a,{component:s.b,to:"/journal/".concat(n),variant:"contained",startIcon:r.a.createElement(Rr.a,null),children:"Journal"})))),r.a.createElement(d.a,{flexGrow:1,overflow:"auto"},r.a.createElement(_r.a,{justify:"center",container:!0,spacing:2},r.a.createElement(_r.a,{item:!0,xs:12},r.a.createElement(kn.a,{align:"center",variant:"h3"},g),r.a.createElement(d.a,{color:Oo(D)},r.a.createElement(kn.a,{align:"center",variant:"h4"},"".concat(S," Remaining"))),r.a.createElement(kn.a,{align:"center",variant:"subtitle1"},"of ".concat(C)),r.a.createElement(go,{spentPercentage:D,height:10})),I)),r.a.createElement(Or,{open:u,setOpen:c})))};function _o(){var e=Object(j.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return _o=function(){return e},e}var xo=O()(_o()),So=function(e){var t=Object(Pt.c)(xo),n=t.loading,o=t.error,i=t.data,l=Object(a.useState)(null),u=Object(M.a)(l,2),c=u[0],p=u[1],m=(null===i||void 0===i?void 0:i.departments)||[],v=Object(a.useMemo)((function(){var e=[],t=new Set,n=!0,a=!1,r=void 0;try{for(var o,i=m[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;"Business"===l.parent.__typename&&e.push(l),l.virtualRoot&&t.add(l.id)}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:t}}),[m]),f=v.rootDepts,y=v.virtualRoots,b=Object(a.useMemo)((function(){var e=[];if(c&&y.has(c)){var t=!0,n=!1,a=void 0;try{for(var r,o=m[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.parent.id===c&&e.push(i)}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}return e}),[y,c,m]);Object(a.useEffect)((function(){document.title="Select Department"}));var E=Object(a.useCallback)((function(e){var t;p((null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||null)}),[p]);if(n)return r.a.createElement("p",null,"Loading...");if(o)return r.a.createElement("p",null,o.message);var j=b.length>0;return r.a.createElement(d.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(xr.a,null,r.a.createElement(d.a,{padding:4,clone:!0},r.a.createElement(kn.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(d.a,{minWidth:"250px !important",clone:!0},r.a.createElement(Yn.a,{variant:"filled"},r.a.createElement(Ga.a,null,"Department"),r.a.createElement(za.a,{value:c,onChange:E,autoWidth:!0},f.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete t.component,delete t.to),r.a.createElement(qa.a,t)}))))),j&&r.a.createElement(d.a,{pt:2},r.a.createElement(d.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(Yn.a,{variant:"filled"},r.a.createElement(Ga.a,null,"Sub Department"),r.a.createElement(za.a,{autoWidth:!0},b.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(qa.a,t)}))))))))},Co=function(e){var t=Object(P.f)().id;return t?r.a.createElement(wo,{deptId:t}):r.a.createElement("div",null,"Error: No Dept ID!")},Do=function(e){var t=Object(P.f)().id;return r.a.createElement(wr,{mode:Cn.View,deptId:t})},To=function(e){var t=Object(P.f)().id;return r.a.createElement(wr,{mode:Cn.Reconcile,deptId:t})},Io=function(e){return r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:So}),r.a.createElement(P.a,{exact:!0,path:"/department/:id",component:Co}),r.a.createElement(P.a,{exact:!0,path:"/journal",component:wr}),r.a.createElement(P.a,{exact:!0,path:"/journal/:id",component:Do}),r.a.createElement(P.a,{exact:!0,path:"/journal/:id/reconcile",component:To}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(l.a,{store:Ot},r.a.createElement(u.a,{client:A},r.a.createElement(s.a,null,r.a.createElement(d.a,{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},r.a.createElement(Io,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5189,1,2]]]);
//# sourceMappingURL=main.cdfde374.chunk.js.map