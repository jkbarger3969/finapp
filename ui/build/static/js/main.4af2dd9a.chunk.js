(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{145:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},4986:function(e,t,n){e.exports=n(5012)},5012:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(23),i=n.n(o),l=n(9),u=n(32),c=n(5087),d=n(5088),s=n(56),p=n(70),m=n(8),v=n(124),f=n(145),y=new v.b({introspectionQueryResultData:f}),b=new v.a({fragmentMatcher:y,addTypename:!1});b.writeData({data:Object(m.a)({},{paginate:{skip:0,limit:1e3},sortBy:[],upsertTransactionLocal:null,lc_journalEntryUpserts:[]})});var E=b,h=n(18),g=n(19),j=n.n(g);function O(){var e=Object(h.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return O=function(){return e},e}var w,I=[j()(O())],x={},C=n(165),_=n(147),S=n(28),T=n(148),D=n(81),U=new C.a({uri:"/graphql",credentials:"same-origin"}),R=new _.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),k=S.a.from([Object(T.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,r=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r))})),n&&console.log("[Network error]: ".concat(n))})),S.a.split((function(e){var t=e.query,n=Object(D.a)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),R,U)]),A=new p.a({link:k,cache:E,typeDefs:I,resolvers:x}),B=n(69),N=n(5081),P=n(149),M=n(5057),L=n(5058),F=n(5055),q=(n(138),n(5006)),J=q(window.location.hostname,q.DNS),$=n(37),W=n(150),V=n(151),z=n(34),G=n(47),H=n.n(G),Y="journalEntryUpsert/CREATE",Q="journalEntryUpsert/CANCEL",X="journalEntryUpsert/CLEAR",K="journalEntryUpsert/SUBMIT",Z="journalEntryUpsert/SET_SUBMIT_ERROR",ee="journalEntryUpsert/CLEAR_SUBMIT_ERROR",te="journalEntryUpsert/SET_DATE_INPUT",ne="journalEntryUpsert/CLEAR_DATE_INPUT",re="journalEntryUpsert/SET_DATE_VALUE",ae="journalEntryUpsert/CLEAR_DATE_VALUE",oe="journalEntryUpsert/SET_DATE_ERROR",ie="journalEntryUpsert/CLEAR_DATE_ERROR",le="journalEntryUpsert/SET_DEPT_INPUT",ue="journalEntryUpsert/CLEAR_DEPT_INPUT",ce="journalEntryUpsert/SET_DEPT_VALUE",de="journalEntryUpsert/CLEAR_DEPT_VALUE",se="journalEntryUpsert/SET_DEPT_ERROR",pe="journalEntryUpsert/CLEAR_DEPT_ERROR",me="journalEntryUpsert/SET_DEPT_OPEN",ve="journalEntryUpsert/SET_TYPE_VALUE",fe="journalEntryUpsert/SET_TYPE_ERROR",ye="journalEntryUpsert/CLEAR_TYPE_ERROR",be="journalEntryUpsert/SET_CAT_INPUT",Ee="journalEntryUpsert/CLEAR_CAT_INPUT",he="journalEntryUpsert/SET_CAT_VALUE",ge="journalEntryUpsert/CLEAR_CAT_VALUE",je="journalEntryUpsert/SET_CAT_ERROR",Oe="journalEntryUpsert/CLEAR_CAT_ERROR",we="journalEntryUpsert/SET_CAT_OPEN",Ie="journalEntryUpsert/SET_SRC_TYPE",xe="journalEntryUpsert/SET_SRC_INPUT",Ce="journalEntryUpsert/CLEAR_SRC_INPUT",_e="journalEntryUpsert/SET_SRC_VALUE",Se="journalEntryUpsert/CLEAR_SRC_VALUE",Te="journalEntryUpsert/SET_SRC_ERROR",De="journalEntryUpsert/CLEAR_SRC_ERROR",Ue="journalEntryUpsert/SET_SRC_OPEN",Re="journalEntryUpsert/SET_PAY_METHOD_VALUE",ke="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Ae="journalEntryUpsert/SET_PAY_METHOD_ERROR",Be="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Ne="journalEntryUpsert/SET_DSCRPT_VALUE",Pe="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Me="journalEntryUpsert/SET_TOTAL_INPUT",Le="journalEntryUpsert/CLEAR_TOTAL_INPUT",Fe="journalEntryUpsert/SET_TOTAL_VALUE",qe="journalEntryUpsert/CLEAR_TOTAL_VALUE",Je="journalEntryUpsert/SET_TOTAL_ERROR",$e="journalEntryUpsert/CLEAR_TOTAL_ERROR",We="journalEntryUpsert/SET_RECONCILED_VALUE",Ve="journalEntryUpsert/CLEAR_RECONCILED_VALUE",ze=n(97),Ge=function e(t){Object(ze.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=t},He=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;o++){var l=e[o];if(l[r]===n){var u=a(l,t);return u!==l?[].concat(Object(z.a)(e.slice(0,o)),[u],Object(z.a)(e.slice(o+1))):e}}return e},Ye=Object($.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===Y?t.payload.entryId||null:e},type:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ve:return t.value===n.payload.type?t:Object(m.a)({},t,{value:n.payload.type});case fe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case ye:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},date:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),r=arguments.length>1?arguments[1]:void 0;switch(r.type){case te:var a=r.payload.input.trimStart();return n.input===a?n:Object(m.a)({},n,{input:a});case ne:return""===n.input?n:Object(m.a)({},n,{input:""});case re:return(null===(e=n.value)||void 0===e?void 0:e.getTime())===r.payload.value.getTime()?n:Object(m.a)({},n,{value:r.payload.value});case ae:return n.value?Object(m.a)({},n,{value:null}):n;case oe:return(null===(t=n.error)||void 0===t?void 0:t.message)===r.payload.error.message?n:Object(m.a)({},n,{error:r.payload.error});case ie:return n.error?Object(m.a)({},n,{error:null}):n;default:return n}},department:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Y:return n.payload.fromDept?Object(m.a)({},t,{value:n.payload.fromDept}):t;case le:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case ue:return""===t.input?t:Object(m.a)({},t,{input:""});case ce:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case de:return t.value?Object(m.a)({},t,{value:null}):t;case se:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case pe:return t.error?Object(m.a)({},t,{error:null}):t;case me:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},category:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case be:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case Ee:return""===t.input?t:Object(m.a)({},t,{input:""});case he:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case ge:return t.value?Object(m.a)({},t,{value:null}):t;case je:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Oe:return t.error?Object(m.a)({},t,{error:null}):t;case we:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===Ie?t.payload.srcType:e},source:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case xe:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case Ce:return""===t.input?t:Object(m.a)({},t,{input:""});case _e:return H()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case Se:return t.value?Object(m.a)({},t,{value:null}):t;case Te:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case De:return t.error?Object(m.a)({},t,{error:null}):t;case Ue:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},paymentMethod:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Re:return n.payload.value&&t.value!==n.payload.value?Object(m.a)({},t,{value:n.payload.value}):t;case ke:return null===t.value?t:Object(m.a)({},t,{value:null});case Ae:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Be:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ne:var n=t.payload.value.trimStart();return n&&e.value!==n?Object(m.a)({},e,{value:n}):e;case Pe:return null===e.value?e:Object(m.a)({},e,{value:null});default:return e}},total:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Me:return t.input===n.payload.input?t:Object(m.a)({},t,{input:n.payload.input});case Le:return""===t.input?t:Object(m.a)({},t,{input:""});case Fe:return H()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case qe:return null===t.value?t:Object(m.a)({},t,{value:null});case Je:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case $e:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:return e.value===t.payload.value?e:Object(m.a)({},e,{value:t.payload.value});case Ve:return!1===e.value?e:Object(m.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(w||(w={}));var Qe=Object($.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===Y?t.payload.upsertId:e},values:Ye,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===Y&&t.payload.fromDept?t.payload.fromDept:e},submit:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:w.NotSubmitted,error:null},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case K:return t.status===n.payload.status?t:Object(m.a)({},t,{status:n.payload.status});case Z:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case ee:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}}}),Xe=n(48),Ke=n(20),Ze=n.n(Ke),et="tableCells/SET_INDEX",tt="tableCells/SET_DEFAULT_INDEX",nt="tableCells/SET_NAME",rt="tableCells/SET_DEFAULT_NAME",at="tableCells/SET_WIDTH",ot="tableCells/SET_DEFAULT_WIDTH",it="tableCells/COLLAPSE",lt="tableCells/EXPAND",ut="tableCells/HIDE",ct="tableCells/SHOW",dt="tableCells/RESTORE_DEFAULTS",st=function e(t){var n,r;Object(ze.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(m.a)({},t),this.rowId=t.rowId,this.id=t.id,this.index=t.index,this.name=t.name,this.width=t.width,this.collapsed=null!==(n=null===t||void 0===t?void 0:t.collapsed)&&void 0!==n&&n,this.hidden=null!==(r=null===t||void 0===t?void 0:t.hidden)&&void 0!==r&&r},pt=function(e,t){switch(t.type){case et:return e.index===t.payload.index?e:Object(m.a)({},e,{index:t.payload.index});case tt:return e.index===e.ini.index?e:Object(m.a)({},e,{index:e.ini.index});case nt:return e.name===t.payload.name?e:Object(m.a)({},e,{name:t.payload.name});case rt:return e.name===e.ini.name?e:Object(m.a)({},e,{name:e.ini.name});case at:return e.width===t.payload.width?e:Object(m.a)({},e,{width:t.payload.width});case ot:return e.width===e.ini.width?e:Object(m.a)({},e,{width:e.ini.width});case it:return!0===e.collapsed?e:Object(m.a)({},e,{collapsed:!0});case lt:return!1===e.collapsed?e:Object(m.a)({},e,{collapsed:!1});case ut:return!0===e.hidden?e:Object(m.a)({},e,{hidden:!0});case ct:return!1===e.hidden?e:Object(m.a)({},e,{hidden:!1});case dt:var n=new st(e.ini);return H()(e,n)?e:n;default:return e}},mt=Ze.a.mark((function e(t){var n,r,a,o,i,l,u;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=new Map,a=0,e.t0=Ze.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(o=e.t1.value,!t.hasOwnProperty(o)){e.next=24;break}if(i=t[o],l=i.index,null!==(u=void 0===l?null:l)){e.next=13;break}return e.abrupt("continue",4);case 13:if(a!==u){e.next=23;break}return e.next=16,i;case 16:if(!r.has(++a)){e.next=21;break}return e.next=19,r.get(a);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?r.set(u,i):n.push(i);case 24:e.next=4;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":return t.payload.id in e?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.id,new st(t.payload)));case et:var n=e[t.payload.id].index,r=t.payload.index;if(n===r)return e;if(n<r){var a={},o=!0,i=!1,l=void 0;try{for(var u,c=mt(e)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(d.index>r)break;d.index<n||(d.index===n?a[d.id]=pt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:r})})):a[d.id]=pt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:d.index-1})})))}}catch(S){i=!0,l=S}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return Object(m.a)({},e,{},a)}var s={},p=!0,v=!1,f=void 0;try{for(var y,b=mt(e)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var E=y.value;if(E.index>n)break;E.index<r||(E.index===n?s[E.id]=pt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:r})})):s[E.id]=pt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:E.index+1})})))}}catch(S){v=!0,f=S}finally{try{p||null==b.return||b.return()}finally{if(v)throw f}}return Object(m.a)({},e,{},s);case tt:var h={},g=!0,j=!1,O=void 0;try{for(var w,I=mt(e)[Symbol.iterator]();!(g=(w=I.next()).done);g=!0){var x=w.value;h[x.id]=pt(x,t)}}catch(S){j=!0,O=S}finally{try{g||null==I.return||I.return()}finally{if(j)throw O}}return Object(m.a)({},e,{},h);case nt:case rt:case at:case ot:case it:case lt:case ut:case ct:case dt:if(t.payload.id in e){var C=e[t.payload.id],_=pt(C,t);return _===C?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.id,_))}return e;default:return e}},ft="journal/OPEN_PAB",yt="journal/CLOSE_PAB",bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return!0===e.open?e:Object(m.a)({},e,{open:!0});case yt:return!1===e.open?e:Object(m.a)({},e,{open:!1});default:return e}},Et=Object($.combineReducers)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journal/CREATE_PAB":return t.payload.pabId in e?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.pabId,bt(void 0,t)));case ft:case yt:if(t.payload.pabId in e){var n=t.payload.pabId,r=e[n],a=bt(r,t);return r===a?e:Object(m.a)({},e,Object(Xe.a)({},n,a))}return e;default:return e}}}),ht=Object($.combineReducers)({journal:Et,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return[].concat(Object(z.a)(e),[Qe(void 0,t)]);case Q:case X:for(var n=t.payload.upsertId,r=0,a=e.length;r<a;r++)if(e[r].id===n)return[].concat(Object(z.a)(e.slice(0,r)),Object(z.a)(e.slice(r+1)));return e;case ve:case fe:case ye:case te:case ne:case re:case ae:case oe:case ie:case le:case ce:case se:case me:case ue:case de:case pe:case be:case Ee:case he:case ge:case je:case Oe:case we:case Ie:case xe:case Ce:case _e:case Se:case Te:case De:case Ue:case Re:case ke:case Ne:case Pe:case Me:case Le:case Fe:case qe:case Je:case $e:case K:case Z:case ee:case Ae:case Be:case We:case Ve:return He(e,t,t.payload.upsertId,"id",Qe);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":var n=t.payload.rowId;if(n in e){var r=e[n],a=vt(r,t);return r===a?e:Object(m.a)({},e,Object(Xe.a)({},n,a))}return Object(m.a)({},e,Object(Xe.a)({},n,vt(void 0,t)));case et:case tt:case nt:case rt:case at:case ot:case it:case lt:case ut:case ct:case dt:var o=t.payload.rowId;if(o in e){var i=e[o],l=vt(i,t);return i===l?e:Object(m.a)({},e,Object(Xe.a)({},o,l))}return e;default:return e}}}),gt=Object($.createStore)(ht,Object(W.composeWithDevTools)(Object($.applyMiddleware)(V.a))),jt=function(e){return{type:"tableCells/CREATE",payload:e}},Ot=q("Journal",J),wt=q("journal/date",J);gt.dispatch(jt({rowId:Ot,id:wt,index:1,name:"Date",width:185}));var It=q("journal/department",J);gt.dispatch(jt({rowId:Ot,id:It,index:7,name:"Department",width:380}));var xt=q("journal/category",J);gt.dispatch(jt({rowId:Ot,id:xt,index:3,name:"Category",width:380}));var Ct=q("journal/source",J);gt.dispatch(jt({rowId:Ot,id:Ct,index:4,name:"Source",width:380}));var _t=q("journal/paymentMethod",J);gt.dispatch(jt({rowId:Ot,id:_t,index:5,name:"Payment Method",width:175}));var St=q("journal/description",J);gt.dispatch(jt({rowId:Ot,id:St,index:6,name:"Description",width:380}));var Tt=q("journal/total",J);gt.dispatch(jt({rowId:Ot,id:Tt,index:2,name:"Total",width:130}));var Dt=q("journal/reconciled",J);gt.dispatch(jt({rowId:Ot,id:Dt,index:0,name:"Reconciled",width:105}));var Ut=function(e,t){if(t in e.tableRows){var n=e.tableRows[t];return Object(z.a)(mt(n))}return[]},Rt=function(e,t,n){return t in e.tableRows&&n in e.tableRows[t]?e.tableRows[t][n]:null},kt=function(e){var t=Object(l.e)((function(e){return Ut(e,Ot)}),l.c),n=Object(r.useMemo)((function(){return t.map((function(e,t){var n=e.name,r=e.width,o=e.index;return a.a.createElement(d.a,{key:"".concat(n,"_").concat(t),minWidth:r,flexBasis:r,flexGrow:r,order:o,clone:!0},a.a.createElement(F.a,{component:"div",children:n}))}))}),[t]);return a.a.createElement(M.a,{component:"div"},a.a.createElement(d.a,{display:"flex !important",flexDirection:"row",justifyContent:"flex-start",clone:!0},a.a.createElement(L.a,{component:"div"},n)))},At=n(21),Bt=n(5062),Nt=n(166),Pt=n(155),Mt=n(5060),Lt=n(5061),Ft=n(157),qt=n(5095),Jt=n(106),$t=n(105),Wt=n(75),Vt=n.n(Wt),zt=function(e){var t=e.entryDate,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,wt)})),o=Vt()(t);return a.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},o.format("MMM DD, YYYY")))},Gt=n(5092),Ht=function(e){var t=e.department,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,It)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},Object(Gt.a)(t.name)))},Yt=function(e){var t=e.category,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,xt)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},Object(Gt.a)(t.name)))},Qt=function(e){var t=e.source,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,Ct)})),o="";switch(t.__typename){case"Person":o="".concat(t.name.first," ").concat(t.name.last);break;case"Business":o=t.bizName;break;case"Department":o=t.deptName}return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},o))},Xt=function(e){var t=e.paymentMethod,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,_t)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},Object(Gt.a)(t.method)))},Kt=function(e){var t=e.description,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,Ot,St)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},t))},Zt=n(71),en=n.n(Zt),tn=n(100),nn=n.n(tn),rn=function(e){var t=e.total,n=t.num,r=t.den,o=e.textColor,i=new nn.a({n:n,d:r}),u=Object(l.e)((function(e){return Rt(e,Ot,Tt)}));return a.a.createElement(d.a,{className:o,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:u.width,flexBasis:u.width,flexGrow:u.width,order:u.index>-1?u.index:void 0,clone:!0},a.a.createElement(F.a,{component:"div"},en()(i.toString()).format("$0,0.00")))},an=n(57),on=n(156),ln=n.n(on),un=n(5091);function cn(){var e=Object(h.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return cn=function(){return e},e}function dn(){var e=Object(h.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return dn=function(){return e},e}function sn(){var e=Object(h.a)(['\n  query JournalEntries_1($paginate:PaginateInput!, \n    $sortBy:[JournalEntriesSortByInput!]!, $filterBy:JournalEntiresFilterInput) \n  {\n    journalEntries(paginate:$paginate, sortBy:$sortBy, filterBy:$filterBy)\n      @connection(key:"JournalEntries_1", filter:["sortBy", "filterBy"]) \n    {\n      totalCount\n      entries {\n        ...JournalEntry_1Fragment\n      }\n    }\n  }\n  ',"\n"]);return sn=function(){return e},e}function pn(){var e=Object(h.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    reconciled\n  }\n"]);return pn=function(){return e},e}var mn=j()(pn()),vn=j()(sn(),mn),fn=j()(dn(),mn),yn=j()(cn(),mn);function bn(){var e=Object(h.a)(["\n  mutation Reconcile_1($id:ID!) {\n    updateJournalEntry(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return bn=function(){return e},e}var En,hn,gn,jn,On,wn,In,xn,Cn,_n=j()(bn(),mn),Sn=function(e){var t=e.reconciled,n=e.textColor,o=e.mode,i=e.entryId,u=e.removeReconciled,c=Object(r.useState)(!1),s=Object(an.a)(c,2),p=s[0],m=s[1],v=Object(At.b)(_n),f=Object(an.a)(v,1)[0],y=Object(l.e)((function(e){return Rt(e,Ot,Dt)})),b=Object(r.useCallback)((function(e){return Ze.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,Ze.a.awrap(f({variables:{id:i}}));case 6:u(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),m(!1);case 12:case"end":return e.stop()}}),null,null,[[3,9]])}),[m,f,i,u,p]),E={checked:p,name:"reconciled",onChange:b,inputProps:Object(r.useMemo)((function(){return{type:"checkbox"}}),[])};return a.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:y.width,flexBasis:y.width,flexGrow:y.width,order:y.index>-1?y.index:void 0,display:"flex !important",justifyContent:"center",alignItems:"center",clone:!0},a.a.createElement(F.a,{component:"div"},t?a.a.createElement(ln.a,null):o===ua.Reconcile?a.a.createElement(un.a,E):null))};!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(En||(En={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(hn||(hn={})),function(e){e.Reconciled="RECONCILED",e.NotReconciled="NOT_RECONCILED"}(gn||(gn={})),function(e){e.Department="DEPARTMENT",e.Type="TYPE",e.Category="CATEGORY",e.PaymentMethod="PAYMENT_METHOD",e.Total="TOTAL",e.Date="DATE",e.Source="SOURCE"}(jn||(jn={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(On||(On={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(wn||(wn={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(In||(In={})),function(e){e.Update="UPDATE",e.Add="ADD"}(xn||(xn={})),function(e){e.Asc="ASC",e.Desc="DESC"}(Cn||(Cn={}));var Tn,Dn=n(120),Un=function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=e.journalEntryUpserts[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===t)return l}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return null};!function(e){e[e.Add=0]="Add",e[e.Update=1]="Update"}(Tn||(Tn={}));var Rn=function(e,t){var n,r=null===(n=Un(e,t))||void 0===n?void 0:n.values.id;return void 0===r?null:null===r?Tn.Add:Tn.Update},kn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.id)||null},An=function(e,t){var n,r;return null!==(n=null===(r=Un(e,t))||void 0===r?void 0:r.submit.status)&&void 0!==n?n:null},Bn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.type.value)||null},Nn=function(e,t){var n;return!(null===(n=Un(e,t))||void 0===n?void 0:n.values.id)},Pn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.department.input)||""},Mn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.department.value)||null},Ln=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.department.error)||null},Fn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.department.open)||!1},qn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.category.input)||""},Jn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.category.value)||null},$n=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.category.error)||null},Wn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.category.open)||!1},Vn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.date.value)||null},zn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.date.error)||null},Gn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.paymentMethod.value)||""},Hn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.paymentMethod.error)||null},Yn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.srcType)||null},Qn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.source.input)||""},Xn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.source.value)||null},Kn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.source.open)||!1},Zn=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.source.error)||null},er=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.total.input)||""},tr=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.total.value)||null},nr=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.total.error)||null},rr=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.description.value)||null},ar=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.reconciled.value)||!1};function or(){var e=Object(h.a)(["\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n"]);return or=function(){return e},e}function ir(){var e=Object(h.a)(["\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n"]);return ir=function(){return e},e}function lr(){var e=Object(h.a)(["\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n"]);return lr=function(){return e},e}function ur(){var e=Object(h.a)(["\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    updateJournalEntry(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ur=function(){return e},e}function cr(){var e=Object(h.a)(["\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    addJournalEntry(fields:$fields) {\n      __typename\n      id\n    }\n  }\n"]);return cr=function(){return e},e}function dr(){var e=Object(h.a)(["\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n"]);return dr=function(){return e},e}function sr(){var e=Object(h.a)(["\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n"]);return sr=function(){return e},e}var pr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var a=r(),o=An(a,e),i=t.entryId,u=(t.fromDept,t.client);if(null===o)if(i){if(!u)throw Error("client required for update");var c=u.readFragment({id:"JournalEntry:".concat(i),fragment:mn});if(!c)return;var d=c.date,s=c.type,p=c.department.id,m=c.category.id,v=c.description,f=c.paymentMethod.id,y=c.source,b=y.__typename,E=y.id,h=c.total,g=h.num,j=h.den,O=c.reconciled,w="Person"===b?On.Person:On.Business,I={sourceType:"Person"===b?On.Person:"Business"===b?On.Business:On.Department,id:E};n({type:Y,payload:{upsertId:e,entryId:i,fromDept:t.fromDept}}),Object(l.b)((function(){n(_r(e,new Date(d))),n(Cr(e,s,u)),n(Jr(e,w)),n(Rr(e,p)),n(Mr(e,m)),v&&n(Zr(e,v)),n(Xr(e,f)),n(Vr(e,I)),n(ta(e,g/j)),n(ea(e,(g/j).toString())),n(oa(e,O))}))}else n({type:Y,payload:{upsertId:e,fromDept:t.fromDept}})}},mr=function(e){return function(t,n){var r=n(),a=An(r,e);null!==a&&a!==w.Submitting&&t({type:Q,payload:{upsertId:e}})}},vr=function(e){return function(t,n){var r=n(),a=An(r,e);null!==a&&a!==w.Submitting&&t({type:X,payload:{upsertId:e}})}},fr=function(e,t){return function(n,r){var a,o,i,l=arguments;return Ze.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:for(a=l.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=l[i];return u.next=3,Ze.a.awrap(Dr(e).apply(void 0,[n,r].concat(o)));case 3:return u.next=5,Ze.a.awrap(Nr(e,t).apply(void 0,[n,r].concat(o)));case 5:return u.next=7,Ze.a.awrap(qr(e).apply(void 0,[n,r].concat(o)));case 7:return u.next=9,Ze.a.awrap(Qr(e).apply(void 0,[n,r].concat(o)));case 9:return u.next=11,Ze.a.awrap(Kr(e).apply(void 0,[n,r].concat(o)));case 11:return u.next=13,Ze.a.awrap(aa(e).apply(void 0,[n,r].concat(o)));case 13:case"end":return u.stop()}}))}},yr=j()(sr()),br=j()(dr()),Er=j()(cr()),hr=j()(ur(),mn),gr=function(e,t){return function(n,r){var a=r(),o=An(a,e);null!==o&&o===w.NotSubmitted&&(n(wr(e,w.Submitting)),n(Or(e,t)))}},jr=function(e,t){return function(n,r){var a,o,i,u,c,d,s,p;return Ze.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(a=r(),o=Yn(a,e),i=Qn(a,e),o!==On.Person){m.next=22;break}return u=Object(Dn.parseFullName)(i),m.prev=5,m.next=8,Ze.a.awrap(t.mutate({mutation:yr,variables:{fields:{name:{first:u.first,last:u.last}}}}));case 8:if(d=m.sent,null===(c=d.data)||void 0===c?void 0:c.addPerson.id){m.next=11;break}throw new Error("Something went wrong. Server did not respond with new person id.");case 11:return Object(l.b)((function(){n(Wr(e)),n(Vr(e,{sourceType:On.Person,id:d.data.addPerson.id}))})),m.next=14,Ze.a.awrap(Promise.resolve());case 14:n(Or(e,t)),m.next=20;break;case 17:m.prev=17,m.t0=m.catch(5),Object(l.b)((function(){n(Ir(e,new Error((null===m.t0||void 0===m.t0?void 0:m.t0.message)||"".concat(m.t0)))),n(wr(e,w.NotSubmitted))}));case 20:m.next=37;break;case 22:return m.prev=22,m.next=25,Ze.a.awrap(t.mutate({mutation:br,variables:{fields:{name:i}}}));case 25:if(p=m.sent,null===(s=p.data)||void 0===s?void 0:s.addBusiness.id){m.next=28;break}throw new Error("Something went wrong. Server did not respond with new business id.");case 28:return n(Vr(e,{sourceType:On.Business,id:p.data.addBusiness.id})),m.next=31,Ze.a.awrap(Promise.resolve());case 31:n(Or(e,t)),m.next=37;break;case 34:m.prev=34,m.t1=m.catch(22),Object(l.b)((function(){n(Ir(e,new Error((null===m.t1||void 0===m.t1?void 0:m.t1.message)||"".concat(m.t1)))),n(wr(e,w.NotSubmitted))}));case 37:return m.abrupt("return");case 38:case"end":return m.stop()}}),null,null,[[5,17],[22,34]])}},Or=function(e,t){return function(n,r){var a,o,i,u,c,d,s,p,m,v,f,y,b,E,h,g,j,O,I,x,C,_,S,T,D,U,R,k,A,B,N,P,M,L,F,q,J,$,W,V,z,G,H,Y,Q,X,K,Z,ee=arguments;return Ze.a.async((function(te){for(;;)switch(te.prev=te.next){case 0:for(a=r(),o=ee.length,i=new Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=ee[u];return te.next=4,Ze.a.awrap(fr(e,t).apply(void 0,[n,r].concat(i)));case 4:return te.next=6,Ze.a.awrap(Promise.resolve());case 6:if(c=Rn(a,e),d=zn(a,e),s=Ln(a,e),p=$n(a,e),m=Zn(a,e),v=Hn(a,e),f=nr(a,e),!(d||s||p||m||v||f)){te.next=16;break}return Object(l.b)((function(){n(Ir(e,new Error("Invalid submission, please check fields"))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 16:if(c!==Tn.Add){te.next=59;break}if(E=zn(a,e),h=Ln(a,e),g=$n(a,e),j=Zn(a,e),O=Hn(a,e),I=nr(a,e),!(E||h||g||j||O||I)){te.next=26;break}return Object(l.b)((function(){n(Ir(e,new Error("Invalid submission, please check fields"))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 26:if(x=Xn(a,e)){te.next=30;break}return n(jr(e,t)),te.abrupt("return");case 30:if(C=Vn(a,e),_=Bn(a,e),S=Mn(a,e),T=Jn(a,e),D=Gn(a,e),U=null!==(y=rr(a,e))&&void 0!==y?y:void 0,R=tr(a,e),k=null!==(b=ar(a,e))&&void 0!==b?b:void 0,C&&S&&T&&D&&R&&null!==_){te.next=41;break}return Object(l.b)((function(){n(Ir(e,new Error("Something went wrong, field values:\n              type:".concat(_,"\n              date:").concat(C,"\n              department:").concat(S,"\n              source:").concat(x,"\n              category:").concat(T,"\n              paymentMethod:").concat(D,"\n              total:").concat(R,"\n            ")))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 41:return te.prev=41,te.next=44,Ze.a.awrap(t.mutate({mutation:Er,variables:{fields:{date:C.toISOString(),type:_,department:S,source:x,category:T,paymentMethod:D,description:U,total:R,reconciled:k}}}));case 44:if(B=te.sent,null===(A=B.data)||void 0===A?void 0:A.addJournalEntry.id){te.next=47;break}throw new Error("Something went wrong. Server did not respond with journal entry id.");case 47:return n(wr(e,w.Submitted)),te.next=50,Ze.a.awrap(new Promise((function(e){return setTimeout(e,300)})));case 50:n(vr(e)),te.next=57;break;case 53:return te.prev=53,te.t0=te.catch(41),Object(l.b)((function(){n(Ir(e,new Error((null===te.t0||void 0===te.t0?void 0:te.t0.message)||"".concat(te.t0)))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 57:te.next=111;break;case 59:if(!Qn(a,e).trim()){te.next=63;break}return n(jr(e,t)),te.abrupt("return");case 63:if(M=kn(a,e),L=Vn(a,e),F=Xn(a,e),q=Bn(a,e),J=Mn(a,e),$=Jn(a,e),W=Gn(a,e),V=null!==(N=rr(a,e))&&void 0!==N?N:void 0,z=tr(a,e),G=null!==(P=ar(a,e))&&void 0!==P?P:void 0,H=t.readFragment({id:"JournalEntry:".concat(M),fragment:mn})){te.next=77;break}return Object(l.b)((function(){n(Ir(e,new Error("Something went wrong."))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 77:if(Q={id:M,fields:Y={}},X=0,L&&L.toISOString()!==H.date&&(X++,Y.date=L.toISOString()),q&&q!==H.type&&(X++,Y.type=q),J&&J!==H.department.id&&(X++,Y.department=J),F&&F.id!==H.source.id&&(X++,Y.source=F),$&&$!==H.category.id&&(X++,Y.category=$),W&&W!==H.paymentMethod.id&&(X++,Y.paymentMethod=W),V!==H.description&&(X++,Y.description=V),z&&z.num/z.den!==H.total.num/H.total.den&&(X++,Y.total=z),void 0!==G&&G!==H.reconciled&&(X++,Y.reconciled=G),0!==X){te.next=95;break}return n(wr(e,w.NotSubmitted)),te.next=93,Ze.a.awrap(Promise.resolve());case 93:return n(mr(e)),te.abrupt("return");case 95:return te.prev=95,te.next=98,Ze.a.awrap(t.mutate({mutation:hr,variables:Q}));case 98:if(Z=te.sent,null===(K=Z.data)||void 0===K?void 0:K.updateJournalEntry.id){te.next=101;break}throw new Error("Something went wrong.");case 101:return n(wr(e,w.Submitted)),te.next=104,Ze.a.awrap(new Promise((function(e){return setTimeout(e,300)})));case 104:n(vr(e)),te.next=111;break;case 107:return te.prev=107,te.t1=te.catch(95),Object(l.b)((function(){n(Ir(e,new Error((null===te.t1||void 0===te.t1?void 0:te.t1.message)||"".concat(te.t1)))),n(wr(e,w.NotSubmitted))})),te.abrupt("return");case 111:case"end":return te.stop()}}),null,null,[[41,53],[95,107]])}},wr=function(e,t){return{type:K,payload:{upsertId:e,status:t}}},Ir=function(e,t){return{type:Z,payload:{upsertId:e,error:t}}},xr=j()(lr()),Cr=function(e,t,n){return function(r,a){var o,i,u,c,d;return Ze.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=a(),i=Jn(o,e),u=!1,null===i){s.next=15;break}return s.prev=4,s.next=7,Ze.a.awrap(n.query({query:xr,variables:{id:i}}));case 7:c=s.sent,d=c.data,d.journalEntryCategory.type!==t&&(u=!0),s.next=15;break;case 13:s.prev=13,s.t0=s.catch(4);case 15:u?Object(l.b)((function(){r(Lr(e)),r({type:ve,payload:{upsertId:e,type:t}})})):r({type:ve,payload:{upsertId:e,type:t}});case 16:case"end":return s.stop()}}),null,null,[[4,13]])}},_r=function(e,t){return{type:re,payload:{upsertId:e,value:t}}},Sr=function(e,t){return{type:oe,payload:{upsertId:e,error:t}}},Tr=function(e){return{type:ie,payload:{upsertId:e}}},Dr=function(e){return function(t,n){var r=n(),a=Vn(r,e),o=zn(r,e),i=Rn(r,e);a?Number.isNaN(a.getTime())?t(Sr(e,new Error("Invalid date."))):o&&t(Tr(e)):i===Tn.Add?t(Sr(e,new Error("Date is required."))):o&&t(Tr(e))}},Ur=function(e){return{type:ue,payload:{upsertId:e}}},Rr=function(e,t){return{type:ce,payload:{upsertId:e,value:t}}},kr=function(e,t){return{type:se,payload:{upsertId:e,error:t}}},Ar=function(e){return{type:pe,payload:{upsertId:e}}},Br=function(e,t){return{type:me,payload:{upsertId:e,open:t}}},Nr=(j()(ir()),function(e,t){return function(t,n){var r,a,o;return Ze.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:r=n(),a=Mn(r,e),o=Ln(r,e),Rn(r,e)===Tn.Add?a||t(kr(e,new Error("Department is required."))):o&&t(Ar(e));case 5:case"end":return i.stop()}}))}}),Pr=(j()(or()),function(e){return{type:Ee,payload:{upsertId:e}}}),Mr=function(e,t){return{type:he,payload:{upsertId:e,value:t}}},Lr=function(e){return{type:ge,payload:{upsertId:e}}},Fr=function(e,t){return{type:we,payload:{upsertId:e,open:t}}},qr=function(e){return function(t,n){var r=n(),a=Jn(r,e),o=$n(r,e);Rn(r,e)!==Tn.Add||a?o&&t(function(e){return{type:Oe,payload:{upsertId:e}}}(e)):t(function(e,t){return{type:je,payload:{upsertId:e,error:t}}}(e,new Error("Category is required.")))}},Jr=function(e,t){return{type:Ie,payload:{upsertId:e,srcType:t}}},$r=function(e,t){return{type:xe,payload:{upsertId:e,input:t}}},Wr=function(e){return{type:Ce,payload:{upsertId:e}}},Vr=function(e,t){return{type:_e,payload:{upsertId:e,value:t}}},zr=function(e){return{type:Se,payload:{upsertId:e}}},Gr=function(e,t){return{type:Te,payload:{upsertId:e,error:t}}},Hr=function(e){return{type:De,payload:{upsertId:e}}},Yr=function(e,t){return{type:Ue,payload:{upsertId:e,open:t}}},Qr=function(e){return function(t,n){var r=n(),a=Xn(r,e),o=Zn(r,e);if(a)o&&t(Hr(e));else{var i=Yn(r,e),l=Qn(r,e),u=Rn(r,e);if(l){if(i!==On.Person)return void(o&&t(Hr(e)));var c=Object(Dn.parseFullName)(l);c.first.trim()?c.last.trim()?o&&t(Hr(e)):t(Gr(e,new Error("Last name is required."))):t(Gr(e,new Error("First name is required.")))}else u===Tn.Add?t(Gr(e,new Error("Source is required."))):o&&t(Hr(e))}}},Xr=function(e,t){return{type:Re,payload:{upsertId:e,value:t}}},Kr=function(e){return function(t,n){var r=n(),a=Gn(r,e),o=Hn(r,e);Rn(r,e)!==Tn.Add||a?o&&t(function(e){return{type:Be,payload:{upsertId:e}}}(e)):t(function(e,t){return{type:Ae,payload:{upsertId:e,error:t}}}(e,new Error("Payment Method is required.")))}},Zr=function(e,t){return{type:Ne,payload:{upsertId:e,value:t}}},ea=function(e,t){var n=Number.parseFloat(t);if(Number.isNaN(n))return na(e,new TypeError("Invalid Number."));for(var r="",a=0,o=t.length;a<o;a++){var i=t[a];"."===i?(r+=i,o=Math.min(o,a+3)):Number.isNaN(Number.parseInt(i))||(r+=i)}return{type:Me,payload:{upsertId:e,input:r}}},ta=function(e,t){var n=new nn.a(t.toFixed(2)),r=n.n,a=n.d;return{type:Fe,payload:{upsertId:e,value:{num:r,den:a}}}},na=function(e,t){return{type:Je,payload:{upsertId:e,error:t}}},ra=function(e){return{type:$e,payload:{upsertId:e}}},aa=function(e){return function(t,n){var r=n(),a=tr(r,e),o=nr(r,e);Rn(r,e)===Tn.Add?a?a.num/a.den===0?t(na(e,new Error("Total cannot be 0."))):o&&t(ra(e)):t(na(e,new Error("Total is required."))):o&&t(ra(e))}},oa=function(e,t){return{type:We,payload:{upsertId:e,value:t}}},ia={dispatchId:null,dispatchQueue:new Map,ms:5};function la(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Object(l.d)(),a=Object(r.useMemo)((function(){return e?ia:{dispatchId:null,dispatchQueue:new Map,ms:t}}),[e,t]),o=Object(r.useCallback)((function(e){n((function(t){var n,r=a.dispatchQueue;null===a.dispatchId&&(a.dispatchId=setTimeout((function(){a.dispatchId=null,Object(l.b)((function(){var e=!0,t=!1,n=void 0;try{for(var a,o=r.values()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value,l=Object(an.a)(i,2),u=l[0];(0,l[1])(u)}}catch(c){t=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}})),r.clear()}),a.ms));var o="function"===typeof e?Symbol():null===(n=e)||void 0===n?void 0:n.type;r.set(o,[e,t])}))}),[a,n]);return o}var ua,ca=Object(Ft.a)((function(e){return Object(qt.a)({positive:{color:Jt.a[900]},negative:{color:$t.a[900]}})})),da=function(e){var t=ca(),n=la(),o=Object(At.a)(),i=e.journalEntry,l=void 0===i?null:i,u=e.style,c=e.deptId,s=e.mode,p=e.removeReconciled,m=Object(r.useCallback)((function(e){l&&n(pr(zo,{entryId:l.id,fromDept:c,client:o}))}),[l,n,c,o]);if(null===l){var v=a.a.createElement(Mt.a,{variant:"rect",height:20});return a.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},a.a.createElement(L.a,{component:"div"},a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:1},a.a.createElement(F.a,{component:"div",children:v})),a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:3},a.a.createElement(F.a,{component:"div",children:v})),a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:2},a.a.createElement(F.a,{component:"div",children:v})),a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:3},a.a.createElement(F.a,{component:"div",children:v})),a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:2},a.a.createElement(F.a,{component:"div",children:v})),a.a.createElement(Lt.a,{item:!0,container:!0,direction:"column",xs:1},a.a.createElement(F.a,{component:"div",children:v}))))}var f=l.category.type===wn.Credit?t.positive:t.negative;return a.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},a.a.createElement(L.a,{onDoubleClick:m,component:"div",hover:!0},a.a.createElement(zt,{textColor:f,entryDate:l.date}),a.a.createElement(Ht,{textColor:f,department:l.department}),a.a.createElement(Yt,{textColor:f,category:l.category}),a.a.createElement(Qt,{textColor:f,source:l.source}),a.a.createElement(Xt,{textColor:f,paymentMethod:l.paymentMethod}),a.a.createElement(Kt,{textColor:f,description:l.description}),a.a.createElement(rn,{textColor:f,total:l.total}),a.a.createElement(Sn,{removeReconciled:p,entryId:l.id,mode:s,textColor:f,reconciled:l.reconciled})))};!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(ua||(ua={}));var sa=new Set,pa=!1,ma={paginate:{skip:0,limit:50},sortBy:[{column:jn.Date,direction:Cn.Desc}]},va=function(e){var t,n,o,i=e.height,u=e.deptId,c=e.mode,s="".concat(u,"_").concat(c),p=Object(r.useMemo)((function(){var e=c===ua.Reconcile?gn.NotReconciled:void 0;return u?Object(m.a)({},ma,{filterBy:{department:{eq:u},reconciled:e}}):Object(m.a)({},ma)}),[u,c]),v=Object(l.e)((function(e){return Ut(e,Ot)}),l.c),f=Object(r.useMemo)((function(){return v.reduce((function(e,t){return e+t.width}),0)}),[v]),y=Math.max(f,e.width),b=Object(At.c)(vn,{variables:p}),E=b.error,h=b.data,g=b.fetchMore,j=b.updateQuery,O=Object(r.useCallback)((function(e){c!==ua.View&&j((function(t){for(var n=t.journalEntries.entries,r=0,a=n.length;r<a;r++)if(n[r].id===e)return Object(m.a)({},t,{journalEntries:Object(m.a)({},t.journalEntries,{totalCount:t.journalEntries.totalCount-1,entries:[].concat(Object(z.a)(n.slice(0,r)),Object(z.a)(n.slice(r+1)))})});return t}))}),[c,j]),w=Object(At.a)();sa.has(s)||(sa.add(s),w.subscribe({query:fn}).subscribe({next:function(e){var t=e.data;if(!(!(null===t||void 0===t?void 0:t.journalEntryAdded)||c===ua.Reconcile&&t.journalEntryAdded.reconciled||u&&t.journalEntryAdded.department.id!==u)){var n=w.readQuery({query:vn,variables:p}),r=Object(m.a)({},n||{},{journalEntries:Object(m.a)({},(null===n||void 0===n?void 0:n.journalEntries)||{},{totalCount:((null===n||void 0===n?void 0:n.journalEntries.totalCount)||0)+1,entries:[t.journalEntryAdded].concat(Object(z.a)((null===n||void 0===n?void 0:n.journalEntries.entries)||[]))})});w.writeQuery({query:vn,variables:p,data:r})}}})),pa||(pa=!0,w.subscribe({query:yn}).subscribe({next:function(e){var t=e.data;console.log(t),t&&w.writeFragment({id:"JournalEntry:".concat(t.journalEntryUpdated.id),fragment:mn,data:t.journalEntryUpdated})}}));var I=(null===h||void 0===h?void 0:null===(t=h.journalEntries)||void 0===t?void 0:t.entries)||[],x=null!==(n=null===h||void 0===h?void 0:null===(o=h.journalEntries)||void 0===o?void 0:o.totalCount)&&void 0!==n?n:500,C=Object(r.useCallback)((function(e){return e in I}),[I]),_=Object(r.useCallback)((function(e,t){return Ze.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ze.a.awrap(g({variables:{paginate:{skip:e,limit:t-e+1}},updateQuery:function(t,n){var r,a,o=n.fetchMoreResult,i=void 0===o?null:o,l=(null===i||void 0===i?void 0:null===(r=i.journalEntries)||void 0===r?void 0:r.entries)||[],u=Object(z.a)((null===t||void 0===t?void 0:null===(a=t.journalEntries)||void 0===a?void 0:a.entries)||[]);return u.splice.apply(u,[e,l.length].concat(Object(z.a)(l))),Object(m.a)({},t||{},{},i||{},{journalEntries:Object(m.a)({},(null===t||void 0===t?void 0:t.journalEntries)||{},{},(null===i||void 0===i?void 0:i.journalEntries)||{},{entries:u})})}}));case 2:case"end":return n.stop()}}))}),[g]),S=Object(r.useCallback)((function(e){var t=e.index,n=e.style,r=I[t],o=r?r.id:t;return a.a.createElement(da,{mode:c,style:n,key:o,journalEntry:r,removeReconciled:O})}),[I,c,O]),T=Object(r.useCallback)((function(e){var t=e.onItemsRendered,n=e.ref;return a.a.createElement(d.a,{display:"flex",clone:!0},a.a.createElement(Nt.a,{onItemsRendered:t,ref:n,height:i,width:y,itemCount:x,itemSize:function(){return 53},overscanCount:10},S))}),[i,y,S,x]);return E?a.a.createElement("div",null,E.message):a.a.createElement(d.a,{height:i,display:"block",clone:!0},a.a.createElement(Bt.a,{component:"div"},a.a.createElement(Pt.a,{isItemLoaded:C,itemCount:x,minimumBatchSize:50,loadMoreItems:_,children:T})))},fa=n(5076),ya=n(5077),ba=n(5078),Ea=n(5065),ha=n(5093),ga=n(5064),ja=n(5063),Oa=n(5075),wa=n(5074),Ia=n(33),xa=n(5089),Ca=n(158),_a={inputMode:"numeric"},Sa=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=Object(l.d)(),d=Object(l.e)((function(e){var n=zn(e,t);return{disabled:null===Bn(e,t),date:Vn(e,t),required:Nn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.date,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useMemo)((function(){return p?Vt()(p):null}),[p]),b=Object(r.useCallback)((function(){c(Dr(t))}),[t,c]),E=Object(r.useCallback)((function(e){(null===e||void 0===e?void 0:e.isValid())?(c(_r(t,e.toDate())),v&&b()):c({type:ae,payload:{upsertId:t}})}),[t,c,v,b]),h={disabled:s,error:v,helperText:f,required:m,onBlur:b,onClose:b,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:u,variant:"inline",format:"MM/DD/YYYY",margin:"none",label:"Date",initialFocusedDate:y||Vt()(),value:y,onChange:E,autoOk:!0,InputProps:Object(r.useMemo)((function(){return{autoFocus:o}}),[o]),inputProps:_a,placeholder:"mm/dd/yyyy"};return a.a.createElement(Ia.a,{utils:Ca.a},a.a.createElement(xa.a,h))},Ta=n(5068),Da=n(5069),Ua={min:"0"},Ra=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=la(),d=Object(l.e)((function(e){var n=nr(e,t);return{disabled:null===Bn(e,t),totalInput:er(e,t),required:Nn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.totalInput,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useCallback)((function(){c(aa(t))}),[c,t]),b={disabled:s,value:p,variant:u,required:m,helperText:f,label:"Total",name:"total",placeholder:"0.00",onChange:Object(r.useCallback)((function(e){var n=e.target.value||"";n?(c(ea(t,n)),c(ta(t,1*n)),v&&y()):(c({type:Le,payload:{upsertId:t}}),c(function(e){return{type:qe,payload:{upsertId:e}}}(t)))}),[c,y,v,t]),inputProps:Ua,error:v,InputProps:Object(r.useMemo)((function(){return{type:"number",autoFocus:o,onBlur:y,startAdornment:a.a.createElement(Da.a,{position:"start"},"$")}}),[o,y])};return a.a.createElement(Ta.a,b)},ka=n(5096),Aa=n(5090),Ba=n(84),Na=n.n(Ba);function Pa(){var e=Object(h.a)(["\n  query DeptInputOpts_1($fromParent:ID) {\n    deptOpts: departments(fromParent:$fromParent) {\n      ...DeptInputOptsDept_1Fragment\n    }\n  }\n  fragment DeptInputOptsDept_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n"]);return Pa=function(){return e},e}var Ma=j()(Pa()),La=function(e){return e},Fa=function(e){return e.name},qa=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(ka.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"small"},t({index:r})))," ",!o&&a.a.createElement(Na.a,{fontSize:"small"}))}))},Ja=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=Object(At.a)(),d=la(),s=Object(r.useCallback)((function(){d(Nr(t,c))}),[d,t,c]),p=Object(r.useCallback)((function(){d(Br(t,!1)),s()}),[t,d,s]),m=Object(r.useCallback)((function(){return d(Br(t,!0))}),[t,d]),v=Object(r.useCallback)((function(){d(Br(t,!1)),s()}),[t,d,s]),f=Object(r.useCallback)((function(){return d(Br(t,!0))}),[t,d]),y=Object(l.e)((function(e){var n=Mn(e,t),r=Ln(e,t);return{disabled:null===Bn(e,t),deptInput:Pn(e,t),dept:n,required:Nn(e,t),open:Fn(e,t),hasError:!!r,errorMsg:(null===r||void 0===r?void 0:r.message)||null}}),H.a),b=y.disabled,E=y.deptInput,h=y.dept,g=y.required,j=y.open,O=y.hasError,w=y.errorMsg,I=(Object(l.e)((function(e){return function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.fromDept)||null}(e,t)})),Object(At.c)(Ma,{variables:{fromParent:"5dc4b09bcf96e166daaa0090"}})),x=I.loading,C=I.error,_=I.data,S=(null===_||void 0===_?void 0:_.deptOpts)||[],T=Object(r.useMemo)((function(){return function(e,t){if(e){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===e)return l}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}return null}(h,S)}),[h,S]),D=Object(r.useMemo)((function(){if(!E)return h?S.filter((function(e){return e.parent.id===h})):S;var e=new RegExp("(^|\\s)".concat(E),"i");return h?S.filter((function(t){return t.parent.id===h&&e.test(t.name)})):S.filter((function(t){return e.test(t.name)}))}),[h,E,S]),U=D.length>0,R=Object(r.useMemo)((function(){if(!T)return null;for(var e=[T],t=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=S[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(e.parent.id===i.id)return i}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},n=t(T);n;)e.unshift(n),n=t(n);return 1===e.length?U?e:e[0]:e}),[S,T,U]),k=Array.isArray(R),A=Object(r.useCallback)((function(e,n){if(n&&(n=Array.isArray(n)?n[n.length-1]:n))return d(Rr(t,n.id)),d(Ur(t)),void(O&&s());d({type:de,payload:{upsertId:t}})}),[t,d,O,s]),B=Object(r.useCallback)((function(e,n){d(n?{type:le,payload:{upsertId:t,input:n}}:Ur(t))}),[d,t]),N={required:g,autoFocus:o,fullWidth:!0,label:"Department",variant:u,error:O,helperText:w},P=Object(r.useCallback)((function(e){return a.a.createElement(Ta.a,Object.assign({},N,e))}),[N]),M={disabled:b,loading:x,multiple:k,autoComplete:!0,disableCloseOnSelect:!0,getOptionLabel:Fa,filterOptions:La,open:j,renderInput:P,options:D,onChange:A,onInputChange:B,value:R,inputValue:E};return C?(console.error(C),a.a.createElement("p",null,C.message)):(T?Array.isArray(R)&&1!==R.length?U?(M.autoHighlight=!0,M.onBlur=p,M.onFocus=m,M.onClose=v,M.onOpen=f,M.options=D,M.renderTags=qa):(M.onBlur=s,M.disabled=!0,M.inputValue="",M.open=!1,M.renderTags=qa):U?(M.autoHighlight=!0,M.onBlur=p,M.onFocus=m,M.onClose=v,M.onOpen=f,M.options=D,M.renderTags=qa):(M.onBlur=s,M.inputValue=T.name,M.open=!1):(M.autoHighlight=!0,M.autoSelect=!0,M.onBlur=p,M.onFocus=m,M.onClose=v,M.onOpen=f),a.a.createElement(Aa.a,M))};function $a(){var e=Object(h.a)(["\n  query CatInputOpts_1 {\n    catOpts: journalEntryCategories {\n      ...CatInputOptsCat_1Fragment\n    }\n  }\n  fragment CatInputOptsCat_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n"]);return $a=function(){return e},e}var Wa=j()($a()),Va=function(e){return"string"===typeof e?e===wn.Credit?"Credit":"Debit":e.name},za=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(ka.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:Va(e),size:"small"},t({index:r})))," ",!o&&a.a.createElement(Na.a,{fontSize:"small"}))}))},Ga=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=la(),d=Object(r.useCallback)((function(){c(qr(t))}),[c,t]),s=Object(r.useCallback)((function(){c(Fr(t,!1)),d()}),[t,c,d]),p=Object(r.useCallback)((function(){return c(Fr(t,!0))}),[t,c]),m=Object(r.useCallback)((function(){c(Fr(t,!1)),d()}),[t,c,d]),v=Object(r.useCallback)((function(){return c(Fr(t,!0))}),[t,c]),f=Object(l.e)((function(e){var n=$n(e,t);return{disabled:null===Bn(e,t),type:Bn(e,t),catId:Jn(e,t),catInput:qn(e,t),required:Nn(e,t),open:Wn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),H.a),y=f.disabled,b=f.type,E=f.catId,h=f.catInput,g=f.required,j=f.open,O=f.hasError,w=f.errorMsg,I=Object(At.c)(Wa),x=I.loading,C=I.error,_=I.data,S=(null===_||void 0===_?void 0:_.catOpts)||[],T=Object(r.useMemo)((function(){if(null===b)return[];var e=[];if(E){var t=new Map,n=E,r=!0,a=!1,o=void 0;try{for(var i,l=S[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;if(u.id!==n)t.set(u.id,u);else{var c;for(e.unshift(u),n=(null===(c=u.parent)||void 0===c?void 0:c.id)||null;n&&t.has(n);){var d,s=t.get(n);e.unshift(s),n=(null===(d=s.parent)||void 0===d?void 0:d.id)||null}if(!n)break}}}catch(p){a=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}return e}),[b,S,E]),D=Object(r.useMemo)((function(){return null===b?[]:null===E?S.filter((function(e){return!e.parent&&e.type===b})):S.filter((function(e){var t;return(null===(t=e.parent)||void 0===t?void 0:t.id)===E&&e.type===b}))}),[S,E,b]),U=Object(r.useCallback)((function(e){var t=h.trimStart().split(" ").join("\\s");if(!t)return e;var n=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return"string"===typeof e?n.test(e):n.test(e.name)}))}),[h]),R=D.length>0,k=Object(r.useCallback)((function(e,n){if(c(Pr(t)),n&&0!==(null===n||void 0===n?void 0:n.length)){var r=Array.isArray(n)?n[n.length-1]:n;c(Mr(t,r.id)),d()}else c(Lr(t))}),[c,t,d]),A=Object(r.useCallback)((function(e,n){c(n?{type:be,payload:{upsertId:t,input:n}}:Pr(t))}),[c,t]),B={required:g,autoFocus:o,fullWidth:!0,label:"Category",variant:u,error:O,helperText:w},N=Object(r.useCallback)((function(e){return a.a.createElement(Ta.a,Object.assign({},B,e))}),[B]),P={disabled:y,loading:x,multiple:!0,autoComplete:!0,autoSelect:!0,autoHighlight:!0,disableCloseOnSelect:!0,getOptionLabel:Va,filterOptions:U,open:j,renderInput:N,options:D,onChange:k,onInputChange:A,value:T,inputValue:h,renderTags:za};return C?(console.error(C),a.a.createElement("p",null,C.message)):(R?(P.onBlur=s,P.onFocus=p,P.onClose=m,P.onOpen=v):(P.onBlur=d,P.disabled=!0,P.inputValue="",P.open=!1),a.a.createElement(Aa.a,P))},Ha=n(5072),Ya=n(5097),Qa=n(5070),Xa=n(5071),Ka=Object(Ft.a)((function(e){return Object(qt.a)({sourceToggle:{marginRight:e.spacing(1)},sourceInput:{flexGrow:1},sourceIcon:{marginRight:e.spacing(1),marginLeft:e.spacing(1)}})})),Za={value:On.Business},eo={value:On.Person},to=function(e){var t=e.entryUpsertId,n=Ka(),o=Object(l.e)((function(e){return{disabled:null===Bn(e,t),value:Yn(e,t),srcInput:Qn(e,t),isSrcSet:!!Xn(e,t),hasError:!!Zn(e,t)}}),l.c),i=o.disabled,u=o.value,c=o.srcInput,s=o.isSrcSet,p=o.hasError,m=Object(l.d)(),v=p?"error":void 0,f=Object(r.useCallback)((function(e,n){m(Jr(t,n))}),[m,t]);if(s||c)return u===On.Person?a.a.createElement(Qa.a,{className:n.sourceIcon,color:v}):a.a.createElement(Xa.a,{className:n.sourceIcon,color:v});var y={className:n.sourceToggle,size:"small",exclusive:!0,onChange:f,value:u};return a.a.createElement(d.a,{py:1,clone:!0},a.a.createElement(Ya.a,y,a.a.createElement(Ha.a,Object.assign({disabled:i},Za),a.a.createElement(Xa.a,{color:v})),a.a.createElement(Ha.a,Object.assign({disabled:i},eo),a.a.createElement(Qa.a,{color:v}))))};function no(){var e=Object(h.a)(["\n  query BusinessSrcOptsInput_1($searchByName:String!, $deptId:ID!, $bizId:ID!,\n    $withBizOpt:Boolean!, $withDeptAncestors:Boolean!, $withBizOpts:Boolean!)\n  {\n    bizOpt: business(id: $bizId) @include(if:$withBizOpt) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n    deptAncestors: department(id: $deptId) @include(if:$withDeptAncestors) {\n      __typename\n      id\n      ancestors {\n        ...BusinessSrcBizOpts_1Fragment\n        ...BusinessSrcDeptOpts_1Fragment\n      }\n    }\n    bizOpts: businesses(searchByName:$searchByName) @include(if:$withBizOpts) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n  }\n  ","\n"]);return no=function(){return e},e}function ro(){var e=Object(h.a)(["\n  fragment BusinessSrcBizOpts_1Fragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    deptOpts: departments {\n      ...BusinessSrcDeptOpts_1Fragment\n    }\n  }\n  ","\n"]);return ro=function(){return e},e}function ao(){var e=Object(h.a)(["\n  fragment BusinessSrcDeptOpts_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n"]);return ao=function(){return e},e}var oo=j()(ao()),io=j()(ro(),oo),lo=j()(no(),io),uo=function(e){return e.name},co=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(ka.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"small"},t({index:r})))," ",!o&&a.a.createElement(Na.a,{fontSize:"small"}))}))},so=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=e.variant,i=Object(At.a)(),u=la(),c=Object(l.e)((function(e){var n=Xn(e,t),r=Zn(e,t);return{upsertType:Rn(e,t),disabled:null===Bn(e,t),srcInput:Qn(e,t),type:Bn(e,t),src:n,isSrcSet:!!n,required:Nn(e,t),open:Kn(e,t),hasError:!!r,errorMsg:(null===r||void 0===r?void 0:r.message)||null}}),H.a),d=c.disabled,s=c.srcInput,p=c.type,m=c.src,v=c.isSrcSet,f=c.required,y=c.open,b=c.hasError,E=c.errorMsg,h=c.upsertType,g=Object(r.useCallback)((function(){u(Qr(t))}),[u,t]),j=Object(r.useCallback)((function(){u(Yr(t,!1)),g()}),[t,u,g]),O=Object(r.useCallback)((function(){return u(Yr(t,!0))}),[t,u]),w=Object(r.useCallback)((function(){return u(Yr(t,!1))}),[t,u]),I=Object(r.useCallback)((function(){return u(Yr(t,!0))}),[t,u]),x=Object(r.useRef)("");v||(x.current=s.substr(0,1).toLowerCase());var C=Object(At.c)(lo,{skip:!x.current&&h!==Tn.Update,variables:{searchByName:x.current,deptId:(null===m||void 0===m?void 0:m.id)||"",bizId:(null===m||void 0===m?void 0:m.id)||"",withBizOpts:h===Tn.Add||!v,withBizOpt:h===Tn.Update&&(null===m||void 0===m?void 0:m.sourceType)===On.Business,withDeptAncestors:h===Tn.Update&&(null===m||void 0===m?void 0:m.sourceType)===On.Department}}),_=C.loading,S=C.error,T=C.data,D=Object(r.useMemo)((function(){return m&&T?m.sourceType===On.Business?i.readFragment({id:"Business:".concat(m.id),fragment:io,fragmentName:"BusinessSrcBizOpts_1Fragment"})||null:i.readFragment({id:"Department:".concat(m.id),fragment:oo})||null:null}),[m,i,T]),U=Object(r.useMemo)((function(){if(!D)return[];for(var e=[D],t=function(e){return"Business"===e.__typename?null:"Business"===e.parent.__typename?i.readFragment({id:"Business:".concat(e.parent.id),fragment:io,fragmentName:"BusinessSrcBizOpts_1Fragment"})||null:i.readFragment({id:"Department:".concat(e.parent.id),fragment:oo})||null},n=t(D);n;)e.unshift(n),n=t(n);return e}),[D,i]),R=Object(r.useMemo)((function(){if(!U||!D)return(null===T||void 0===T?void 0:T.bizOpts)||[];var e=U[0];return((null===e||void 0===e?void 0:e.deptOpts)||[]).filter((function(e){return e.parent.id===D.id}))}),[D,U,T]),k=R.length>0,A=Object(r.useMemo)((function(){return U.length>1?U:1!==U.length||k?null:U[0]}),[U,k]),B=Array.isArray(A),N=Object(r.useMemo)((function(){return{required:f,autoFocus:n,fullWidth:!0,variant:o,label:B?"Business > Departments...":"Business",error:b,helperText:null===p?"Select a Category to unlock.":E}}),[f,n,o,B,b,E,p]),P=Object(r.useCallback)((function(e){return a.a.createElement(Ta.a,Object.assign({},N,e))}),[N]),M=Object(r.useCallback)((function(e,n){if(n){var r=Array.isArray(n)?n[n.length-1]:n;u(Vr(t,{sourceType:"Business"===r.__typename?On.Business:On.Department,id:r.id})),u(Wr(t)),b&&g()}else u(zr(t))}),[t,u,b,g]),L=Object(r.useCallback)((function(e,n){u(n?$r(t,n):Wr(t))}),[u,t]),F=Object(r.useCallback)((function(e){var t=s.trimStart().split(" ").join("\\s");if(""===t)return e;var n=new RegExp("\\s*".concat(t),"i");return e.filter((function(e){return n.test(e.name)}))}),[s]),q={loading:_,disabled:!p||d,multiple:B,open:y,options:R,autoHighlight:!0,disableCloseOnSelect:!0,getOptionLabel:uo,filterOptions:F,renderInput:P,onChange:M,onInputChange:L,value:A,inputValue:s};return S?(console.error(S),a.a.createElement("p",null,S.message)):(D?Array.isArray(A)&&1!==A.length?0===R.length?(q.disabled=!0,q.inputValue="",q.open=!1,q.renderTags=co):(q.autoHighlight=!0,q.renderTags=co,q.onBlur=j,q.onFocus=O,q.onClose=w,q.onOpen=I):0===R.length?(q.inputValue=D.name,q.open=!1):(q.renderTags=co,q.onBlur=j,q.onFocus=O,q.onClose=w,q.onOpen=I):(q.multiple=!1,q.freeSolo=!0,q.onBlur=j,q.onFocus=O,q.onClose=w,q.onOpen=I),a.a.createElement(Aa.a,q))};function po(){var e=Object(h.a)(["\n  query PeopleSrcOpts_1($searchByName:PersonNameInput!) {\n    people(searchByName:$searchByName){\n      ...PersonSrcOpt_1Fragment\n    }\n  }\n  ","\n"]);return po=function(){return e},e}function mo(){var e=Object(h.a)(["\n  fragment PersonSrcOpt_1Fragment on Person {\n    __typename\n    id\n    name {\n      first\n      last\n    }\n  }\n"]);return mo=function(){return e},e}var vo=j()(mo()),fo=j()(po(),vo),yo=Object(Ft.a)((function(e){return Object(qt.a)({fixHeight:{maxHeight:56}})})),bo=function(e){return e},Eo=function(e){return"".concat(e.name.first," ").concat(e.name.last)},ho=function(e){var t=yo(),n=la(),o=Object(At.a)(),i=e.entryUpsertId,u=e.autoFocus,c=e.variant,d=Object(l.e)((function(e){var t=Xn(e,i),n=Zn(e,i);return{disabled:null===Bn(e,i),src:t,srcInput:Qn(e,i),isSrcSet:!!t,freeSolo:!t,required:Nn(e,i),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.src,m=d.srcInput,v=d.isSrcSet,f=d.required,y=d.freeSolo,b=d.hasError,E=d.errorMsg,h=Object(r.useRef)("");v||(h.current=m.substr(0,1).toLowerCase());var g=Object(At.c)(fo,{skip:!h.current,variables:{searchByName:{first:h.current,last:h.current}}}),j=g.loading,O=g.error,w=g.data,I=Object(r.useMemo)((function(){var e=(null===w||void 0===w?void 0:w.people)||[];if(!v||!m)return e;var t=new RegExp("(^|\\s)".concat(m),"i");return e.filter((function(e){return t.test("".concat(e.name.first," ").concat(e.name.last))}))}),[m,w,v]),x=p?o.readFragment({id:"Person:".concat(p.id),fragment:vo}):null,C=v?"".concat(null===x||void 0===x?void 0:x.name.first," ").concat(null===x||void 0===x?void 0:x.name.last):m,_=Object(r.useCallback)((function(){n(Qr(i))}),[n,i]),S=Object(r.useCallback)((function(e,t){(t=t||null)?(n(Vr(i,{sourceType:On.Person,id:t.id})),b&&_()):n(zr(i))}),[n,i,b,_]),T=Object(r.useCallback)((function(e,t){n(t?$r(i,t):Wr(i))}),[n,i]),D={required:f,onBlur:_,autoFocus:u,label:"Name",fullWidth:!0,variant:c,error:b,helperText:E},U=Object(r.useCallback)((function(e){var n=null===e||void 0===e?void 0:e.InputProps;if(n){var r=(null===n||void 0===n?void 0:n.className)||"";n.className="".concat(r," ").concat(t.fixHeight)}else e.InputProps={className:t.fixHeight};return a.a.createElement(Ta.a,Object.assign({},D,e))}),[t,D]);if(O)return console.error(O),a.a.createElement("p",null,(null===O||void 0===O?void 0:O.message)||"".concat(O));var R={disabled:s,loading:j,autoHighlight:!0,autoSelect:!1,autoComplete:!0,freeSolo:y,options:I,inputValue:C,value:x,onChange:S,onInputChange:T,renderInput:U,filterOptions:bo,getOptionLabel:Eo};return a.a.createElement(Aa.a,R)},go=Object(Ft.a)((function(e){return Object(qt.a)({sourceInput:{flexGrow:1}})})),jo=function(e){var t=go(),n=e.entryUpsertId,r=e.autoFocus,o=void 0!==r&&r,i=e.variant,u=void 0===i?"filled":i,c=Object(l.e)((function(e){return Yn(e,n)}));return a.a.createElement(d.a,{display:"flex",flexWrap:"nowrap",alignItems:"center"},a.a.createElement(Lt.a,{item:!0},a.a.createElement(to,{entryUpsertId:n})),a.a.createElement(Lt.a,{item:!0,className:t.sourceInput},c?c===On.Person?a.a.createElement(ho,{entryUpsertId:n,autoFocus:o,variant:u}):a.a.createElement(so,{entryUpsertId:n,autoFocus:o,variant:u}):a.a.createElement(Ta.a,{fullWidth:!0,disabled:!0,variant:u,label:"Source"})))},Oo=n(5017),wo=n(5023),Io=n(5018),xo=n(5021),Co=n(5094);function _o(){var e=Object(h.a)(["\n  query PayMethodInput_1 {\n    paymentMethods {\n      __typename\n      id\n      method\n      active\n    }\n  }\n"]);return _o=function(){return e},e}var So=j()(_o()),To=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=la(),d=Object(l.e)((function(e){var n=Hn(e,t);return{disabled:null===Bn(e,t),required:Nn(e,t),value:Gn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.value,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useCallback)((function(){c(Kr(t))}),[c,t]),b=Object(At.c)(So),E=b.loading,h=b.error,g=b.data,j=Object(r.useMemo)((function(){return((null===g||void 0===g?void 0:g.paymentMethods)||[]).filter((function(e){return e.active}))}),[g]),O=Object(r.useMemo)((function(){return{disabled:s,required:m,fullWidth:!0,variant:u,error:v}}),[m,u,v,s]),w=Object(r.useCallback)((function(e){var n,r=(null===e||void 0===e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)||null;r?(c(Xr(t,r)),v&&y()):c({type:ke,payload:{upsertId:t}})}),[c,t,v,y]),I=Object(r.useMemo)((function(){return j.map((function(e){var t=e.id,n=e.method;return a.a.createElement(Co.a,{value:t,key:t,children:"".concat(n[0].toUpperCase()).concat(n.substr(1))})}))}),[j]);if(E)return a.a.createElement(Mt.a,{variant:"rect",height:56});if(h)return console.error(h),a.a.createElement("p",null,null===h||void 0===h?void 0:h.message);var x={autoFocus:o,children:I,onChange:w,value:p};return a.a.createElement(Oo.a,O,a.a.createElement(wo.a,null,"Method"),a.a.createElement(xo.a,x),v&&a.a.createElement(Io.a,null,f))},Do=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=la(),d=Object(l.e)((function(e){return{disabled:null===Bn(e,t),description:rr(e,t)||""}})),s=d.description,p={disabled:d.disabled,fullWidth:!0,value:s,variant:u,required:!1,label:"Description",name:"description",onChange:Object(r.useCallback)((function(e){var n=e.target.value||"";c(n?Zr(t,n):{type:Pe,payload:{upsertId:t}})}),[c,t]),InputProps:Object(r.useMemo)((function(){return{type:"text",autoFocus:o}}),[o])};return a.a.createElement(Ta.a,p)},Uo=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=la(),u=Object(l.e)((function(e){return{checked:ar(e,t),disabled:null===Bn(e,t)}})),c=u.checked,d={disabled:u.disabled,checked:c,required:!1,name:"reconciled",onChange:Object(r.useCallback)((function(e){var n=e.target.checked;i(n?oa(t,n):{type:Ve,payload:{upsertId:t}})}),[i,t]),inputProps:Object(r.useMemo)((function(){return{type:"checkbox",autoFocus:o}}),[o])};return a.a.createElement(un.a,d)},Ro=n(5073),ko=n(121),Ao={value:wn.Credit},Bo={value:wn.Debit},No=function(e){var t=e.entryUpsertId,n=Object(At.a)(),o=Object(l.e)((function(e){var n=function(e,t){var n;return(null===(n=Un(e,t))||void 0===n?void 0:n.values.type.error)||null}(e,t);return{value:Bn(e,t),typeError:n,hasError:!!n}})),i=o.value,u=(o.typeError,o.hasError),c=la(),s=u?"error":null===i?"secondary":void 0,p={size:"small",exclusive:!0,onChange:Object(r.useCallback)((function(e,r){c(Cr(t,r,n))}),[c,t,n]),value:i},m=a.a.createElement(d.a,{pl:1,clone:!0},a.a.createElement(Ya.a,p,a.a.createElement(Ro.a,{arrow:!0,placement:"top",title:"Credit"},a.a.createElement(Ha.a,Object.assign({selected:i===wn.Credit},Ao),a.a.createElement(ko.b,{color:s}))),a.a.createElement(Ro.a,{arrow:!0,placement:"top",title:"Debit"},a.a.createElement(Ha.a,Object.assign({selected:i===wn.Debit},Bo),a.a.createElement(ko.a,{color:s})))));return a.a.createElement(wa.a,{color:null===i?"secondary":"default",labelPlacement:"start",control:m,label:"Type"})},Po=function(e){var t=e.entryUpsertId,n=(e.fromDept,Object(At.a)()),o=la(),i=Object(r.useCallback)((function(e){o(mr(t))}),[o,t]),u=Object(r.useCallback)((function(e){o(gr(t,n))}),[o,t,n]),c=Object(l.e)((function(e){return{open:Rn(e,t)===Tn.Add,typeIsSet:null!==Bn(e,t)}})),s=c.open,p=c.typeIsSet;return a.a.createElement(ha.a,{maxWidth:"lg",open:s},a.a.createElement("form",null,a.a.createElement(Oa.a,null,"Add Entry"),a.a.createElement(d.a,{justifyContent:"center",display:"flex",flexWrap:"wrap",clone:!0},a.a.createElement(ja.a,{dividers:!0},a.a.createElement(d.a,{padding:2},a.a.createElement(No,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Sa,{autoFocus:!0,entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ja,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ga,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(jo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:400},a.a.createElement(Do,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:175},a.a.createElement(To,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Ra,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:120},a.a.createElement(wa.a,{control:a.a.createElement(Uo,{entryUpsertId:t}),label:"Reconcile"})))),a.a.createElement(ga.a,null,a.a.createElement(Ea.a,{disabled:!p,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(fa.a,null),onClick:u},"Submit"),a.a.createElement(Ea.a,{disabled:!p,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(ya.a,null)},"Submit/New"),a.a.createElement(Ea.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(ba.a,null),onClick:i},"Cancel"))))},Mo=n(5079),Lo=function(e){var t=e.entryUpsertId,n=(e.fromDept,Object(At.a)()),o=la(),i=Object(r.useCallback)((function(e){o(mr(t))}),[o,t]),u=Object(r.useCallback)((function(e){o(gr(t,n))}),[o,t,n]),c=Object(r.useCallback)((function(e){console.log("Delete ",t)}),[o,t,n]),s=Object(l.e)((function(e){return{open:Rn(e,t)===Tn.Update,typeIsSet:null!==Bn(e,t)}})),p=s.open,m=s.typeIsSet;return a.a.createElement(ha.a,{maxWidth:"lg",open:p},a.a.createElement("form",null,a.a.createElement(Oa.a,null,"Update Entry"),a.a.createElement(d.a,{justifyContent:"center",display:"flex",flexWrap:"wrap",clone:!0},a.a.createElement(ja.a,{dividers:!0},a.a.createElement(d.a,{padding:2},a.a.createElement(No,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Sa,{autoFocus:!0,entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ja,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ga,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(jo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:400},a.a.createElement(Do,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:175},a.a.createElement(To,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Ra,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:120},a.a.createElement(wa.a,{control:a.a.createElement(Uo,{entryUpsertId:t}),label:"Reconcile"})))),a.a.createElement(ga.a,null,a.a.createElement(d.a,{width:"100%",display:"flex",justifyContent:"space-between"},a.a.createElement(Ea.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(Mo.a,null),onClick:c},"Delete"),a.a.createElement("div",null,a.a.createElement(Ea.a,{disabled:!m,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(fa.a,null),onClick:u},"Update"),a.a.createElement(Ea.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(ba.a,null),onClick:i},"Cancel"))))))},Fo=n(5080),qo=n(50),Jo=n(5067),$o=function(e,t){return t in e.journal.pabs&&e.journal.pabs[t].open},Wo=q("Journal_PAB",J);gt.dispatch({type:"journal/CREATE_PAB",payload:{pabId:Wo}});var Vo=function(e){var t=e.entryUpsertId,n=e.fromDept,o=(Object(At.a)(),Object(qo.a)()),i=la(),u=(Object(r.useCallback)((function(e){return i(function(e){return{type:ft,payload:{pabId:e}}}(Wo))}),[i]),Object(r.useCallback)((function(e){return i(function(e){return{type:yt,payload:{pabId:e}}}(Wo))}),[i]),Object(l.e)((function(e){return{upsertType:Rn(e,t),submitStatus:An(e,t),isOpen:$o(e,Wo)}}))),c=u.upsertType,s=u.submitStatus;u.isOpen;return s===w.Submitting?a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Fo.a,{disabled:!0,size:"large",color:"secondary","aria-label":"submitting",children:a.a.createElement(Jo.a,{color:"secondary"})})):s===w.NotSubmitted&&null!==c?a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Fo.a,{disabled:!0,size:"large",color:"secondary","aria-label":"add entry",children:a.a.createElement(fa.a,null)})):a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Fo.a,{size:"large",color:"secondary","aria-label":"add entry",children:a.a.createElement(fa.a,null),onClick:function(){return i(pr(t,{fromDept:n}))}}))},zo=q("Journal",J),Go=function(e){var t=e.deptId,n=e.mode,o=Object(r.useCallback)((function(e){var r=e.width,o=e.height;return a.a.createElement(va,{mode:n,deptId:t,width:r,height:o})}),[t,n]);return a.a.createElement(d.a,{style:{overflowX:"auto"},width:"100%",overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"flex-start",flexDirection:"column",clone:!0},a.a.createElement("form",null,a.a.createElement(d.a,{width:"100%",flexGrow:1,display:"flex !important",justifyContent:"flex-start",flexDirection:"column",clone:!0},a.a.createElement(N.a,{component:"div"},a.a.createElement(kt,null),a.a.createElement(d.a,{flexGrow:1},a.a.createElement(P.a,{children:o})),n===ua.View&&a.a.createElement(Vo,{fromDept:t,entryUpsertId:zo}))),a.a.createElement(Lo,{fromDept:t,entryUpsertId:zo}),a.a.createElement(Po,{fromDept:t,entryUpsertId:zo})))},Ho=n(5086),Yo=n(78),Qo=n(160),Xo=n.n(Qo),Ko=n(162),Zo=n.n(Ko),ei=n(164),ti=n.n(ei),ni=n(163),ri=n.n(ni),ai=n(5083),oi=n(5084),ii=n(5085),li=n(5082),ui=n(104);function ci(){var e=Object(h.a)(["\n  query GetReportData($deptId:ID!) {\n    department(id:$deptId) {\n      ...GetReportDataDeptFragment\n      descendants {\n        ...GetReportDataDeptFragment\n      }\n    }\n    journalEntries(filterBy:{department:{eq:$deptId}}) {\n      entries {\n        ...GetReportDataEntryFragment\n      }\n    }\n  }\n  fragment GetReportDataDeptFragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n  fragment GetReportDataEntryFragment on JournalEntry {\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n    }\n  }\n"]);return ci=function(){return e},e}var di=j()(ci()),si=q("DashboardJournalEntry",J),pi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?Jt.a[t]:e<.9?li.a[t]:$t.a[t]},mi=function(e){var t=e.spentPercentage,n=e.height;return a.a.createElement(d.a,{height:n,bgcolor:pi(t),display:"flex",justifyContent:"flex-start"},a.a.createElement(d.a,{height:"100%",width:"".concat(100*t,"%"),bgcolor:ui.a[400]}))},vi=function(e){var t,n=e.deptId,o=Object(At.c)(di,{variables:{deptId:n}}),i=o.loading,l=o.error,u=o.data,c=(null===u||void 0===u?void 0:u.journalEntries.entries)||[],p=(null===u||void 0===u?void 0:null===(t=u.department)||void 0===t?void 0:t.name)||"";new Map;Object(r.useEffect)((function(){document.title=p}),[p]);var m=la(),v=Object(r.useCallback)((function(e){m(pr(si,{fromDept:n}))}),[m,n]),f=(null===u||void 0===u?void 0:u.department)||null,y=Object(r.useMemo)((function(){var e=new Map,t=0;if(f){var n=function(){if(f.budget){var e=f.budget.amount;return e.num/e.den}return null}();e.set(f.id,{name:f.name,spent:0,budget:n});var r=!0,a=!1,o=void 0;try{for(var i,l=f.descendants[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;t+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(p){a=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}return{deptReport:e,subDeptBudgetAg:t}}),[f]),b=y.deptReport,E=y.subDeptBudgetAg,h=Object(r.useMemo)((function(){var e=0,t=!0,n=!1,r=void 0;try{for(var a,o=c[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value,l=b.get(i.department.id),u=i.total.num/i.total.den;i.type===wn.Credit?(e-=u,l.spent-=u):(e+=u,l.spent+=u)}}catch(s){n=!0,r=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}var d=function(){if(null===f||void 0===f?void 0:f.budget){var e,t=(null===f||void 0===f?void 0:null===(e=f.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return t.num/t.den}return E}();return{totalRemaining:en()(d-e).format("$0,0.00"),budget:en()(d).format("$0,0.00"),spentToBudgetRatio:e/d}}),[c,b,E,f]),g=h.totalRemaining,j=h.budget,O=h.spentToBudgetRatio,w=Object(r.useMemo)((function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t=o.value,n=(u=Object(an.a)(t,2))[0],r=(c=u[1]).budget,i=c.spent,l=c.name;if(n===(null===f||void 0===f?void 0:f.id))return"continue";var s=a.a.createElement(Lt.a,{key:n,item:!0,xs:12,md:4,lg:3},a.a.createElement(ai.a,null,a.a.createElement(oi.a,{titleTypographyProps:{noWrap:!0},title:l}),a.a.createElement(ii.a,null,function(){if(null===r)return a.a.createElement(d.a,{color:i>0?$t.a[900]:Jt.a[900],clone:!0},a.a.createElement(Yo.a,{variant:"h6"},"Spent: ".concat(en()(Math.abs(i)).format("$0,0.00"))));var e=r-i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{color:pi(i/r,900),clone:!0},a.a.createElement(Yo.a,{variant:"h6"},"".concat(en()(e).format("$0,0.00")," Remaining"))),a.a.createElement(Yo.a,{variant:"body1"},"of ".concat(en()(r).format("$0,0.00"))),a.a.createElement(mi,{spentPercentage:i/r,height:5}))}())));e.push(s)},l=b[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var u,c;i()}}catch(s){n=!0,r=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}return e}),[b,f]);return i?a.a.createElement("p",null,"Loading..."):l?(console.error(l),a.a.createElement("p",null,l.message)):a.a.createElement(d.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},a.a.createElement(Ho.a,null,a.a.createElement(d.a,{padding:8},a.a.createElement(Lt.a,{container:!0,alignItems:"center",justify:"center",spacing:4},a.a.createElement(Lt.a,{item:!0},a.a.createElement(Ea.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(Xo.a,null),children:"New Entry",onClick:v})),a.a.createElement(Lt.a,{item:!0},a.a.createElement(Ea.a,{component:s.b,to:"/journal/".concat(n,"/reconcile"),variant:"contained",startIcon:a.a.createElement(Zo.a,null),children:"Reconcile"})),a.a.createElement(Lt.a,{item:!0},a.a.createElement(Ea.a,{variant:"contained",startIcon:a.a.createElement(ri.a,null),children:"Reports"})),a.a.createElement(Lt.a,{item:!0},a.a.createElement(Ea.a,{component:s.b,to:"/journal/".concat(n),variant:"contained",startIcon:a.a.createElement(ti.a,null),children:"Journal"})))),a.a.createElement(d.a,{flexGrow:1,overflow:"auto"},a.a.createElement(Lt.a,{justify:"center",container:!0,spacing:2},a.a.createElement(Lt.a,{item:!0,xs:12},a.a.createElement(Yo.a,{align:"center",variant:"h3"},p),a.a.createElement(d.a,{color:pi(O)},a.a.createElement(Yo.a,{align:"center",variant:"h4"},"".concat(g," Remaining"))),a.a.createElement(Yo.a,{align:"center",variant:"subtitle1"},"of ".concat(j)),a.a.createElement(mi,{spentPercentage:O,height:10})),w)),a.a.createElement(Po,{entryUpsertId:si,fromDept:n}),";"))};function fi(){var e=Object(h.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return fi=function(){return e},e}var yi=j()(fi()),bi=function(e){var t=Object(At.c)(yi),n=t.loading,o=t.error,i=t.data,l=Object(r.useState)(null),u=Object(an.a)(l,2),c=u[0],p=u[1],m=(null===i||void 0===i?void 0:i.departments)||[],v=Object(r.useMemo)((function(){var e=[],t=new Set,n=!0,r=!1,a=void 0;try{for(var o,i=m[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;"Business"===l.parent.__typename&&e.push(l),l.virtualRoot&&t.add(l.id)}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{rootDepts:e,virtualRoots:t}}),[m]),f=v.rootDepts,y=v.virtualRoots,b=Object(r.useMemo)((function(){var e=[];if(c&&y.has(c)){var t=!0,n=!1,r=void 0;try{for(var a,o=m[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i.parent.id===c&&e.push(i)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}return e}),[y,c,m]);Object(r.useEffect)((function(){document.title="Select Department"}));var E=Object(r.useCallback)((function(e){var t;p((null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||null)}),[p]);if(n)return a.a.createElement("p",null,"Loading...");if(o)return a.a.createElement("p",null,o.message);var h=b.length>0;return a.a.createElement(d.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},a.a.createElement(Ho.a,null,a.a.createElement(d.a,{padding:4,clone:!0},a.a.createElement(Yo.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),a.a.createElement(d.a,{minWidth:"250px !important",clone:!0},a.a.createElement(Oo.a,{variant:"filled"},a.a.createElement(wo.a,null,"Department"),a.a.createElement(xo.a,{value:c,onChange:E,autoWidth:!0},f.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete t.component,delete t.to),a.a.createElement(Co.a,t)}))))),h&&a.a.createElement(d.a,{pt:2},a.a.createElement(d.a,{pt:2,minWidth:"250px !important",clone:!0},a.a.createElement(Oo.a,{variant:"filled"},a.a.createElement(wo.a,null,"Sub Department"),a.a.createElement(xo.a,{autoWidth:!0},b.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return a.a.createElement(Co.a,t)}))))))))},Ei=function(e){var t=Object(B.f)().id;return t?a.a.createElement(vi,{deptId:t}):a.a.createElement("div",null,"Error: No Dept ID!")},hi=function(e){var t=Object(B.f)().id;return a.a.createElement(Go,{mode:ua.View,deptId:t})},gi=function(e){var t=Object(B.f)().id;return a.a.createElement(Go,{mode:ua.Reconcile,deptId:t})},ji=function(e){return a.a.createElement(B.c,null,a.a.createElement(B.a,{exact:!0,path:"/",component:bi}),a.a.createElement(B.a,{exact:!0,path:"/department/:id",component:Ei}),a.a.createElement(B.a,{exact:!0,path:"/journal",component:Go}),a.a.createElement(B.a,{exact:!0,path:"/journal/:id",component:hi}),a.a.createElement(B.a,{exact:!0,path:"/journal/:id/reconcile",component:gi}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement((function(){return a.a.createElement(r.Fragment,null,a.a.createElement(c.a,null),a.a.createElement(l.a,{store:gt},a.a.createElement(u.a,{client:A},a.a.createElement(s.a,null,a.a.createElement(d.a,{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},a.a.createElement(ji,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[4986,1,2]]]);
//# sourceMappingURL=main.4af2dd9a.chunk.js.map