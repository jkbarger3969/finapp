(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{144:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},4985:function(e,t,n){e.exports=n(5011)},5011:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(23),i=n.n(o),l=n(9),u=n(33),c=n(5086),d=n(5087),s=n(57),p=n(70),m=n(8),v=n(124),f=n(144),y=new v.b({introspectionQueryResultData:f}),b=new v.a({fragmentMatcher:y,addTypename:!1});b.writeData({data:Object(m.a)({},{paginate:{skip:0,limit:1e3},sortBy:[],upsertTransactionLocal:null,lc_journalEntryUpserts:[]})});var E=b,h=n(16),j=n(17),O=n.n(j);function g(){var e=Object(h.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return g=function(){return e},e}var w,I=[O()(g())],_={},x=n(163),C=n(146),S=n(29),D=n(147),T=n(81),U=new x.a({uri:"/graphql",credentials:"same-origin"}),R=new C.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),A=S.a.from([Object(D.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,r=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r))})),n&&console.log("[Network error]: ".concat(n))})),S.a.split((function(e){var t=e.query,n=Object(T.a)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),R,U)]),k=new p.a({link:A,cache:E,typeDefs:I,resolvers:_}),B=n(69),M=n(5080),N=n(148),P=n(5056),F=n(5057),L=n(5054),q=(n(137),n(5005)),J=q(window.location.hostname,q.DNS),W=n(37),$=n(149),z=n(150),V=n(28),G=n(47),H=n.n(G),Y="journalEntryUpsert/CREATE",Q="journalEntryUpsert/CANCEL",X="journalEntryUpsert/CLEAR",K="journalEntryUpsert/SUBMIT",Z="journalEntryUpsert/SET_SUBMIT_ERROR",ee="journalEntryUpsert/CLEAR_SUBMIT_ERROR",te="journalEntryUpsert/SET_DATE_INPUT",ne="journalEntryUpsert/CLEAR_DATE_INPUT",re="journalEntryUpsert/SET_DATE_VALUE",ae="journalEntryUpsert/CLEAR_DATE_VALUE",oe="journalEntryUpsert/SET_DATE_ERROR",ie="journalEntryUpsert/CLEAR_DATE_ERROR",le="journalEntryUpsert/SET_DEPT_INPUT",ue="journalEntryUpsert/CLEAR_DEPT_INPUT",ce="journalEntryUpsert/SET_DEPT_VALUE",de="journalEntryUpsert/CLEAR_DEPT_VALUE",se="journalEntryUpsert/SET_DEPT_ERROR",pe="journalEntryUpsert/CLEAR_DEPT_ERROR",me="journalEntryUpsert/SET_DEPT_OPEN",ve="journalEntryUpsert/SET_TYPE_VALUE",fe="journalEntryUpsert/SET_TYPE_ERROR",ye="journalEntryUpsert/CLEAR_TYPE_ERROR",be="journalEntryUpsert/SET_CAT_INPUT",Ee="journalEntryUpsert/CLEAR_CAT_INPUT",he="journalEntryUpsert/SET_CAT_VALUE",je="journalEntryUpsert/CLEAR_CAT_VALUE",Oe="journalEntryUpsert/SET_CAT_ERROR",ge="journalEntryUpsert/CLEAR_CAT_ERROR",we="journalEntryUpsert/SET_CAT_OPEN",Ie="journalEntryUpsert/SET_SRC_TYPE",_e="journalEntryUpsert/SET_SRC_INPUT",xe="journalEntryUpsert/CLEAR_SRC_INPUT",Ce="journalEntryUpsert/SET_SRC_VALUE",Se="journalEntryUpsert/CLEAR_SRC_VALUE",De="journalEntryUpsert/SET_SRC_ERROR",Te="journalEntryUpsert/CLEAR_SRC_ERROR",Ue="journalEntryUpsert/SET_SRC_OPEN",Re="journalEntryUpsert/SET_PAY_METHOD_VALUE",Ae="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",ke="journalEntryUpsert/SET_PAY_METHOD_ERROR",Be="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Me="journalEntryUpsert/SET_DSCRPT_VALUE",Ne="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Pe="journalEntryUpsert/SET_TOTAL_INPUT",Fe="journalEntryUpsert/CLEAR_TOTAL_INPUT",Le="journalEntryUpsert/SET_TOTAL_VALUE",qe="journalEntryUpsert/CLEAR_TOTAL_VALUE",Je="journalEntryUpsert/SET_TOTAL_ERROR",We="journalEntryUpsert/CLEAR_TOTAL_ERROR",$e="journalEntryUpsert/SET_RECONCILED_VALUE",ze="journalEntryUpsert/CLEAR_RECONCILED_VALUE",Ve=n(97),Ge=function e(t){Object(Ve.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=t},He=function(e,t,n,r,a){for(var o=0,i=e.length;o<i;o++){var l=e[o];if(l[r]===n){var u=a(l,t);return u!==l?[].concat(Object(V.a)(e.slice(0,o)),[u],Object(V.a)(e.slice(o+1))):e}}return e},Ye=Object(W.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===Y?t.payload.entryId||null:e},type:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ve:return t.value===n.payload.type?t:Object(m.a)({},t,{value:n.payload.type});case fe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case ye:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},date:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),r=arguments.length>1?arguments[1]:void 0;switch(r.type){case te:var a=r.payload.input.trimStart();return n.input===a?n:Object(m.a)({},n,{input:a});case ne:return""===n.input?n:Object(m.a)({},n,{input:""});case re:return(null===(e=n.value)||void 0===e?void 0:e.getTime())===r.payload.value.getTime()?n:Object(m.a)({},n,{value:r.payload.value});case ae:return n.value?Object(m.a)({},n,{value:null}):n;case oe:return(null===(t=n.error)||void 0===t?void 0:t.message)===r.payload.error.message?n:Object(m.a)({},n,{error:r.payload.error});case ie:return n.error?Object(m.a)({},n,{error:null}):n;default:return n}},department:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Y:return n.payload.fromDept?Object(m.a)({},t,{value:n.payload.fromDept}):t;case le:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case ue:return""===t.input?t:Object(m.a)({},t,{input:""});case ce:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case de:return t.value?Object(m.a)({},t,{value:null}):t;case se:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case pe:return t.error?Object(m.a)({},t,{error:null}):t;case me:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},category:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case be:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case Ee:return""===t.input?t:Object(m.a)({},t,{input:""});case he:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case je:return t.value?Object(m.a)({},t,{value:null}):t;case Oe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case ge:return t.error?Object(m.a)({},t,{error:null}):t;case we:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===Ie?t.payload.srcType:e},source:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case _e:var r=n.payload.input.trimStart();return t.input===r?t:Object(m.a)({},t,{input:r});case xe:return""===t.input?t:Object(m.a)({},t,{input:""});case Ce:return H()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case Se:return t.value?Object(m.a)({},t,{value:null}):t;case De:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Te:return t.error?Object(m.a)({},t,{error:null}):t;case Ue:var a=n.payload.open;return a===t.open?t:Object(m.a)({},t,{open:a});default:return t}},paymentMethod:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ge(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Re:return n.payload.value&&t.value!==n.payload.value?Object(m.a)({},t,{value:n.payload.value}):t;case Ae:return null===t.value?t:Object(m.a)({},t,{value:null});case ke:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Be:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:var n=t.payload.value.trimStart();return n&&e.value!==n?Object(m.a)({},e,{value:n}):e;case Ne:return null===e.value?e:Object(m.a)({},e,{value:null});default:return e}},total:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Pe:return t.input===n.payload.input?t:Object(m.a)({},t,{input:n.payload.input});case Fe:return""===t.input?t:Object(m.a)({},t,{input:""});case Le:return H()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case qe:return null===t.value?t:Object(m.a)({},t,{value:null});case Je:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case We:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ge(!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $e:return e.value===t.payload.value?e:Object(m.a)({},e,{value:t.payload.value});case ze:return!1===e.value?e:Object(m.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(w||(w={}));var Qe=Object(W.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===Y?t.payload.upsertId:e},values:Ye,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===Y&&t.payload.fromDept?t.payload.fromDept:e},submit:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:w.NotSubmitted,error:null},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case K:return t.status===n.payload.status?t:Object(m.a)({},t,{status:n.payload.status});case Z:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case ee:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}}}),Xe=n(49),Ke=n(21),Ze=n.n(Ke),et="tableCells/SET_INDEX",tt="tableCells/SET_DEFAULT_INDEX",nt="tableCells/SET_NAME",rt="tableCells/SET_DEFAULT_NAME",at="tableCells/SET_WIDTH",ot="tableCells/SET_DEFAULT_WIDTH",it="tableCells/COLLAPSE",lt="tableCells/EXPAND",ut="tableCells/HIDE",ct="tableCells/SHOW",dt="tableCells/RESTORE_DEFAULTS",st=function e(t){var n,r;Object(Ve.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(m.a)({},t),this.rowId=t.rowId,this.id=t.id,this.index=t.index,this.name=t.name,this.width=t.width,this.collapsed=null!==(n=null===t||void 0===t?void 0:t.collapsed)&&void 0!==n&&n,this.hidden=null!==(r=null===t||void 0===t?void 0:t.hidden)&&void 0!==r&&r},pt=function(e,t){switch(t.type){case et:return e.index===t.payload.index?e:Object(m.a)({},e,{index:t.payload.index});case tt:return e.index===e.ini.index?e:Object(m.a)({},e,{index:e.ini.index});case nt:return e.name===t.payload.name?e:Object(m.a)({},e,{name:t.payload.name});case rt:return e.name===e.ini.name?e:Object(m.a)({},e,{name:e.ini.name});case at:return e.width===t.payload.width?e:Object(m.a)({},e,{width:t.payload.width});case ot:return e.width===e.ini.width?e:Object(m.a)({},e,{width:e.ini.width});case it:return!0===e.collapsed?e:Object(m.a)({},e,{collapsed:!0});case lt:return!1===e.collapsed?e:Object(m.a)({},e,{collapsed:!1});case ut:return!0===e.hidden?e:Object(m.a)({},e,{hidden:!0});case ct:return!1===e.hidden?e:Object(m.a)({},e,{hidden:!1});case dt:var n=new st(e.ini);return H()(e,n)?e:n;default:return e}},mt=Ze.a.mark((function e(t){var n,r,a,o,i,l,u;return Ze.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=new Map,a=0,e.t0=Ze.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(o=e.t1.value,!t.hasOwnProperty(o)){e.next=24;break}if(i=t[o],l=i.index,null!==(u=void 0===l?null:l)){e.next=13;break}return e.abrupt("continue",4);case 13:if(a!==u){e.next=23;break}return e.next=16,i;case 16:if(!r.has(++a)){e.next=21;break}return e.next=19,r.get(a);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?r.set(u,i):n.push(i);case 24:e.next=4;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})),vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":return t.payload.id in e?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.id,new st(t.payload)));case et:var n=e[t.payload.id].index,r=t.payload.index;if(n===r)return e;if(n<r){var a={},o=!0,i=!1,l=void 0;try{for(var u,c=mt(e)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(d.index>r)break;d.index<n||(d.index===n?a[d.id]=pt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:r})})):a[d.id]=pt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:d.index-1})})))}}catch(S){i=!0,l=S}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return Object(m.a)({},e,{},a)}var s={},p=!0,v=!1,f=void 0;try{for(var y,b=mt(e)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var E=y.value;if(E.index>n)break;E.index<r||(E.index===n?s[E.id]=pt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:r})})):s[E.id]=pt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:E.index+1})})))}}catch(S){v=!0,f=S}finally{try{p||null==b.return||b.return()}finally{if(v)throw f}}return Object(m.a)({},e,{},s);case tt:var h={},j=!0,O=!1,g=void 0;try{for(var w,I=mt(e)[Symbol.iterator]();!(j=(w=I.next()).done);j=!0){var _=w.value;h[_.id]=pt(_,t)}}catch(S){O=!0,g=S}finally{try{j||null==I.return||I.return()}finally{if(O)throw g}}return Object(m.a)({},e,{},h);case nt:case rt:case at:case ot:case it:case lt:case ut:case ct:case dt:if(t.payload.id in e){var x=e[t.payload.id],C=pt(x,t);return C===x?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.id,C))}return e;default:return e}},ft="journal/OPEN_PAB",yt="journal/CLOSE_PAB",bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ft:return!0===e.open?e:Object(m.a)({},e,{open:!0});case yt:return!1===e.open?e:Object(m.a)({},e,{open:!1});default:return e}},Et=Object(W.combineReducers)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journal/CREATE_PAB":return t.payload.pabId in e?e:Object(m.a)({},e,Object(Xe.a)({},t.payload.pabId,bt(void 0,t)));case ft:case yt:if(t.payload.pabId in e){var n=t.payload.pabId,r=e[n],a=bt(r,t);return r===a?e:Object(m.a)({},e,Object(Xe.a)({},n,a))}return e;default:return e}}}),ht=Object(W.combineReducers)({journal:Et,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return[].concat(Object(V.a)(e),[Qe(void 0,t)]);case Q:case X:for(var n=t.payload.upsertId,r=0,a=e.length;r<a;r++)if(e[r].id===n)return[].concat(Object(V.a)(e.slice(0,r)),Object(V.a)(e.slice(r+1)));return e;case ve:case fe:case ye:case te:case ne:case re:case ae:case oe:case ie:case le:case ce:case se:case me:case ue:case de:case pe:case be:case Ee:case he:case je:case Oe:case ge:case we:case Ie:case _e:case xe:case Ce:case Se:case De:case Te:case Ue:case Re:case Ae:case Me:case Ne:case Pe:case Fe:case Le:case qe:case Je:case We:case K:case Z:case ee:case ke:case Be:case $e:case ze:return He(e,t,t.payload.upsertId,"id",Qe);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":var n=t.payload.rowId;if(n in e){var r=e[n],a=vt(r,t);return r===a?e:Object(m.a)({},e,Object(Xe.a)({},n,a))}return Object(m.a)({},e,Object(Xe.a)({},n,vt(void 0,t)));case et:case tt:case nt:case rt:case at:case ot:case it:case lt:case ut:case ct:case dt:var o=t.payload.rowId;if(o in e){var i=e[o],l=vt(i,t);return i===l?e:Object(m.a)({},e,Object(Xe.a)({},o,l))}return e;default:return e}}}),jt=Object(W.createStore)(ht,Object($.composeWithDevTools)(Object(W.applyMiddleware)(z.a))),Ot=function(e){return{type:"tableCells/CREATE",payload:e}},gt=q("Journal",J),wt=q("journal/date",J);jt.dispatch(Ot({rowId:gt,id:wt,index:1,name:"Date",width:185}));var It=q("journal/department",J);jt.dispatch(Ot({rowId:gt,id:It,index:7,name:"Department",width:380}));var _t=q("journal/category",J);jt.dispatch(Ot({rowId:gt,id:_t,index:3,name:"Category",width:380}));var xt=q("journal/source",J);jt.dispatch(Ot({rowId:gt,id:xt,index:4,name:"Source",width:380}));var Ct=q("journal/paymentMethod",J);jt.dispatch(Ot({rowId:gt,id:Ct,index:5,name:"Payment Method",width:175}));var St=q("journal/description",J);jt.dispatch(Ot({rowId:gt,id:St,index:6,name:"Description",width:380}));var Dt=q("journal/total",J);jt.dispatch(Ot({rowId:gt,id:Dt,index:2,name:"Total",width:130}));var Tt=q("journal/reconciled",J);jt.dispatch(Ot({rowId:gt,id:Tt,index:0,name:"Reconciled",width:105}));var Ut=function(e,t){if(t in e.tableRows){var n=e.tableRows[t];return Object(V.a)(mt(n))}return[]},Rt=function(e,t,n){return t in e.tableRows&&n in e.tableRows[t]?e.tableRows[t][n]:null},At=function(e){var t=Object(l.e)((function(e){return Ut(e,gt)}),l.c),n=Object(r.useMemo)((function(){return t.map((function(e,t){var n=e.name,r=e.width,o=e.index;return a.a.createElement(d.a,{key:"".concat(n,"_").concat(t),minWidth:r,flexBasis:r,flexGrow:r,order:o,clone:!0},a.a.createElement(L.a,{component:"div",children:n}))}))}),[t]);return a.a.createElement(P.a,{component:"div"},a.a.createElement(d.a,{display:"flex !important",flexDirection:"row",justifyContent:"flex-start",clone:!0},a.a.createElement(F.a,{component:"div"},n)))},kt=n(19),Bt=n(5060),Mt=n(164),Nt=n(5059),Pt=n(155),Ft=n(5094),Lt=n(106),qt=n(105),Jt=n(75),Wt=n.n(Jt),$t=function(e){var t=e.entryDate,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,wt)})),o=Wt()(t);return a.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},o.format("MMM DD, YYYY")))},zt=n(5091),Vt=function(e){var t=e.department,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,It)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},Object(zt.a)(t.name)))},Gt=function(e){var t=e.category,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,_t)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},Object(zt.a)(t.name)))},Ht=function(e){var t=e.source,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,xt)})),o="";switch(t.__typename){case"Person":o="".concat(t.name.first," ").concat(t.name.last);break;case"Business":o=t.bizName;break;case"Department":o=t.deptName}return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},o))},Yt=function(e){var t=e.paymentMethod,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,Ct)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},Object(zt.a)(t.method)))},Qt=function(e){var t=e.description,n=e.textColor,r=Object(l.e)((function(e){return Rt(e,gt,St)}));return a.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:r.width,flexBasis:r.width,flexGrow:r.width,order:r.index>-1?r.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},t))},Xt=n(71),Kt=n.n(Xt),Zt=n(100),en=n.n(Zt),tn=function(e){var t=e.total,n=t.num,r=t.den,o=e.textColor,i=new en.a({n:n,d:r}),u=Object(l.e)((function(e){return Rt(e,gt,Dt)}));return a.a.createElement(d.a,{className:o,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:u.width,flexBasis:u.width,flexGrow:u.width,order:u.index>-1?u.index:void 0,clone:!0},a.a.createElement(L.a,{component:"div"},Kt()(i.toString()).format("$0,0.00")))},nn=n(48),rn=n(154),an=n.n(rn),on=n(5090);function ln(){var e=Object(h.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ln=function(){return e},e}function un(){var e=Object(h.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return un=function(){return e},e}function cn(){var e=Object(h.a)(['\n  query JournalEntries_1($where:JournalEntiresWhereInput!) \n  {\n    journalEntries(where:$where)\n      @connection(key:"JournalEntries_1", filter:["where"]) \n    {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return cn=function(){return e},e}function dn(){var e=Object(h.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n"]);return dn=function(){return e},e}var sn=O()(dn()),pn=O()(cn(),sn),mn=O()(un(),sn),vn=O()(ln(),sn);function fn(){var e=Object(h.a)(["\n  mutation Reconcile_1($id:ID!) {\n    journalEntryUpdate(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return fn=function(){return e},e}var yn,bn,En,hn,jn,On,gn,wn=O()(fn(),sn),In=function(e){var t=e.reconciled,n=e.textColor,o=e.mode,i=e.entryId,u=e.removeReconciled,c=Object(r.useState)(!1),s=Object(nn.a)(c,2),p=s[0],m=s[1],v=Object(kt.c)(wn),f=Object(nn.a)(v,1)[0],y=Object(l.e)((function(e){return Rt(e,gt,Tt)})),b=Object(r.useCallback)((function(e){return Ze.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,Ze.a.awrap(f({variables:{id:i}}));case 6:u(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),m(!1);case 12:case"end":return e.stop()}}),null,null,[[3,9]])}),[m,f,i,u,p]),E={checked:p,name:"reconciled",onChange:b,inputProps:Object(r.useMemo)((function(){return{type:"checkbox"}}),[])};return a.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:y.width,flexBasis:y.width,flexGrow:y.width,order:y.index>-1?y.index:void 0,display:"flex !important",justifyContent:"center",alignItems:"center",clone:!0},a.a.createElement(L.a,{component:"div"},t?a.a.createElement(an.a,null):o===aa.Reconcile?a.a.createElement(on.a,E):null))};!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(yn||(yn={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(bn||(bn={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(En||(En={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(hn||(hn={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(jn||(jn={})),function(e){e.Update="UPDATE",e.Add="ADD"}(On||(On={})),function(e){e.Asc="ASC",e.Desc="DESC"}(gn||(gn={}));var _n,xn=n(120),Cn=function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=e.journalEntryUpserts[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===t)return l}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return null};!function(e){e[e.Add=0]="Add",e[e.Update=1]="Update"}(_n||(_n={}));var Sn=function(e,t){var n,r=null===(n=Cn(e,t))||void 0===n?void 0:n.values.id;return void 0===r?null:null===r?_n.Add:_n.Update},Dn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.id)||null},Tn=function(e,t){var n,r;return null!==(n=null===(r=Cn(e,t))||void 0===r?void 0:r.submit.status)&&void 0!==n?n:null},Un=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.type.value)||null},Rn=function(e,t){var n;return!(null===(n=Cn(e,t))||void 0===n?void 0:n.values.id)},An=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.department.input)||""},kn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.department.value)||null},Bn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.department.error)||null},Mn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.department.open)||!1},Nn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.category.input)||""},Pn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.category.value)||null},Fn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.category.error)||null},Ln=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.category.open)||!1},qn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.date.value)||null},Jn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.date.error)||null},Wn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.paymentMethod.value)||""},$n=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.paymentMethod.error)||null},zn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.srcType)||null},Vn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.source.input)||""},Gn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.source.value)||null},Hn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.source.open)||!1},Yn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.source.error)||null},Qn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.total.input)||""},Xn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.total.value)||null},Kn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.total.error)||null},Zn=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.description.value)||null},er=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.reconciled.value)||!1};function tr(){var e=Object(h.a)(["\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n"]);return tr=function(){return e},e}function nr(){var e=Object(h.a)(["\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n"]);return nr=function(){return e},e}function rr(){var e=Object(h.a)(["\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n"]);return rr=function(){return e},e}function ar(){var e=Object(h.a)(["\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    journalEntryUpdate(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ar=function(){return e},e}function or(){var e=Object(h.a)(["\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    journalEntryAdd(fields:$fields) {\n      __typename\n      id\n    }\n  }\n"]);return or=function(){return e},e}function ir(){var e=Object(h.a)(["\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n"]);return ir=function(){return e},e}function lr(){var e=Object(h.a)(["\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n"]);return lr=function(){return e},e}var ur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,r){var a=r(),o=Tn(a,e),i=t.entryId,u=(t.fromDept,t.client);if(null===o)if(i){if(!u)throw Error("client required for update");var c=u.readFragment({id:"JournalEntry:".concat(i),fragment:sn});if(!c)return;var d=c.date,s=c.type,p=c.department.id,m=c.category.id,v=c.description,f=c.paymentMethod.id,y=c.source,b=y.__typename,E=y.id,h=c.total,j=h.num,O=h.den,g=c.reconciled,w="Person"===b?En.Person:En.Business,I={sourceType:"Person"===b?En.Person:"Business"===b?En.Business:En.Department,id:E};n({type:Y,payload:{upsertId:e,entryId:i,fromDept:t.fromDept}}),Object(l.b)((function(){n(wr(e,new Date(d))),n(gr(e,s,u)),n(Pr(e,w)),n(Sr(e,p)),n(kr(e,m)),v&&n(Yr(e,v)),n(Gr(e,f)),n(qr(e,I)),n(Xr(e,j/O)),n(Qr(e,(j/O).toString())),n(ta(e,g))}))}else n({type:Y,payload:{upsertId:e,fromDept:t.fromDept}})}},cr=function(e){return function(t,n){var r=n(),a=Tn(r,e);null!==a&&a!==w.Submitting&&t({type:Q,payload:{upsertId:e}})}},dr=function(e){return function(t,n){var r=n(),a=Tn(r,e);null!==a&&a!==w.Submitting&&t({type:X,payload:{upsertId:e}})}},sr=function(e,t){return function(n,r){var a,o,i,l=arguments;return Ze.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:for(a=l.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=l[i];return u.next=3,Ze.a.awrap(xr(e).apply(void 0,[n,r].concat(o)));case 3:return u.next=5,Ze.a.awrap(Rr(e,t).apply(void 0,[n,r].concat(o)));case 5:return u.next=7,Ze.a.awrap(Nr(e).apply(void 0,[n,r].concat(o)));case 7:return u.next=9,Ze.a.awrap(Vr(e).apply(void 0,[n,r].concat(o)));case 9:return u.next=11,Ze.a.awrap(Hr(e).apply(void 0,[n,r].concat(o)));case 11:return u.next=13,Ze.a.awrap(ea(e).apply(void 0,[n,r].concat(o)));case 13:case"end":return u.stop()}}))}},pr=O()(lr()),mr=O()(ir()),vr=O()(or()),fr=O()(ar(),sn),yr=function(e,t){return function(n,r){var a=r(),o=Tn(a,e);null!==o&&o===w.NotSubmitted&&(n(hr(e,w.Submitting)),n(Er(e,t)))}},br=function(e,t){return function(n,r){var a,o,i,u,c,d,s,p;return Ze.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(a=r(),o=zn(a,e),i=Vn(a,e),o!==En.Person){m.next=22;break}return u=Object(xn.parseFullName)(i),m.prev=5,m.next=8,Ze.a.awrap(t.mutate({mutation:pr,variables:{fields:{name:{first:u.first,last:u.last}}}}));case 8:if(d=m.sent,null===(c=d.data)||void 0===c?void 0:c.addPerson.id){m.next=11;break}throw new Error("Something went wrong. Server did not respond with new person id.");case 11:return Object(l.b)((function(){n(Lr(e)),n(qr(e,{sourceType:En.Person,id:d.data.addPerson.id}))})),m.next=14,Ze.a.awrap(Promise.resolve());case 14:n(Er(e,t)),m.next=20;break;case 17:m.prev=17,m.t0=m.catch(5),Object(l.b)((function(){n(jr(e,new Error((null===m.t0||void 0===m.t0?void 0:m.t0.message)||"".concat(m.t0)))),n(hr(e,w.NotSubmitted))}));case 20:m.next=37;break;case 22:return m.prev=22,m.next=25,Ze.a.awrap(t.mutate({mutation:mr,variables:{fields:{name:i}}}));case 25:if(p=m.sent,null===(s=p.data)||void 0===s?void 0:s.addBusiness.id){m.next=28;break}throw new Error("Something went wrong. Server did not respond with new business id.");case 28:return n(qr(e,{sourceType:En.Business,id:p.data.addBusiness.id})),m.next=31,Ze.a.awrap(Promise.resolve());case 31:n(Er(e,t)),m.next=37;break;case 34:m.prev=34,m.t1=m.catch(22),Object(l.b)((function(){n(jr(e,new Error((null===m.t1||void 0===m.t1?void 0:m.t1.message)||"".concat(m.t1)))),n(hr(e,w.NotSubmitted))}));case 37:return m.abrupt("return");case 38:case"end":return m.stop()}}),null,null,[[5,17],[22,34]])}},Er=function(e,t){return function(n,r){var a,o,i,u,c,d,s,p,m,v,f,y,b,E,h,j,O,g,I,_,x,C,S,D,T,U,R,A,k,B,M,N,P,F,L,q,J,W,$,z,V,G,H,Y,Q,X,K,Z,ee=arguments;return Ze.a.async((function(te){for(;;)switch(te.prev=te.next){case 0:for(a=r(),o=ee.length,i=new Array(o>2?o-2:0),u=2;u<o;u++)i[u-2]=ee[u];return te.next=4,Ze.a.awrap(sr(e,t).apply(void 0,[n,r].concat(i)));case 4:return te.next=6,Ze.a.awrap(Promise.resolve());case 6:if(c=Sn(a,e),d=Jn(a,e),s=Bn(a,e),p=Fn(a,e),m=Yn(a,e),v=$n(a,e),f=Kn(a,e),!(d||s||p||m||v||f)){te.next=16;break}return Object(l.b)((function(){n(jr(e,new Error("Invalid submission, please check fields"))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 16:if(c!==_n.Add){te.next=59;break}if(E=Jn(a,e),h=Bn(a,e),j=Fn(a,e),O=Yn(a,e),g=$n(a,e),I=Kn(a,e),!(E||h||j||O||g||I)){te.next=26;break}return Object(l.b)((function(){n(jr(e,new Error("Invalid submission, please check fields"))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 26:if(_=Gn(a,e)){te.next=30;break}return n(br(e,t)),te.abrupt("return");case 30:if(x=qn(a,e),C=Un(a,e),S=kn(a,e),D=Pn(a,e),T=Wn(a,e),U=null!==(y=Zn(a,e))&&void 0!==y?y:void 0,R=Xn(a,e),A=null!==(b=er(a,e))&&void 0!==b?b:void 0,x&&S&&D&&T&&R&&null!==C){te.next=41;break}return Object(l.b)((function(){n(jr(e,new Error("Something went wrong, field values:\n              type:".concat(C,"\n              date:").concat(x,"\n              department:").concat(S,"\n              source:").concat(_,"\n              category:").concat(D,"\n              paymentMethod:").concat(T,"\n              total:").concat(R,"\n            ")))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 41:return te.prev=41,te.next=44,Ze.a.awrap(t.mutate({mutation:vr,variables:{fields:{date:x.toISOString(),type:C,department:S,source:_,category:D,paymentMethod:T,description:U,total:R,reconciled:A}}}));case 44:if(B=te.sent,null===(k=B.data)||void 0===k?void 0:k.journalEntryAdd.id){te.next=47;break}throw new Error("Something went wrong. Server did not respond with journal entry id.");case 47:return n(hr(e,w.Submitted)),te.next=50,Ze.a.awrap(new Promise((function(e){return setTimeout(e,300)})));case 50:n(dr(e)),te.next=57;break;case 53:return te.prev=53,te.t0=te.catch(41),Object(l.b)((function(){n(jr(e,new Error((null===te.t0||void 0===te.t0?void 0:te.t0.message)||"".concat(te.t0)))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 57:te.next=111;break;case 59:if(!Vn(a,e).trim()){te.next=63;break}return n(br(e,t)),te.abrupt("return");case 63:if(P=Dn(a,e),F=qn(a,e),L=Gn(a,e),q=Un(a,e),J=kn(a,e),W=Pn(a,e),$=Wn(a,e),z=null!==(M=Zn(a,e))&&void 0!==M?M:void 0,V=Xn(a,e),G=null!==(N=er(a,e))&&void 0!==N?N:void 0,H=t.readFragment({id:"JournalEntry:".concat(P),fragment:sn})){te.next=77;break}return Object(l.b)((function(){n(jr(e,new Error("Something went wrong."))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 77:if(Q={id:P,fields:Y={}},X=0,F&&F.toISOString()!==H.date&&(X++,Y.date=F.toISOString()),q&&q!==H.type&&(X++,Y.type=q),J&&J!==H.department.id&&(X++,Y.department=J),L&&L.id!==H.source.id&&(X++,Y.source=L),W&&W!==H.category.id&&(X++,Y.category=W),$&&$!==H.paymentMethod.id&&(X++,Y.paymentMethod=$),z!==H.description&&(X++,Y.description=z),V&&V.num/V.den!==H.total.num/H.total.den&&(X++,Y.total=V),void 0!==G&&G!==H.reconciled&&(X++,Y.reconciled=G),0!==X){te.next=95;break}return n(hr(e,w.NotSubmitted)),te.next=93,Ze.a.awrap(Promise.resolve());case 93:return n(cr(e)),te.abrupt("return");case 95:return te.prev=95,te.next=98,Ze.a.awrap(t.mutate({mutation:fr,variables:Q}));case 98:if(Z=te.sent,null===(K=Z.data)||void 0===K?void 0:K.journalEntryUpdate.id){te.next=101;break}throw new Error("Something went wrong.");case 101:return n(hr(e,w.Submitted)),te.next=104,Ze.a.awrap(new Promise((function(e){return setTimeout(e,300)})));case 104:n(dr(e)),te.next=111;break;case 107:return te.prev=107,te.t1=te.catch(95),Object(l.b)((function(){n(jr(e,new Error((null===te.t1||void 0===te.t1?void 0:te.t1.message)||"".concat(te.t1)))),n(hr(e,w.NotSubmitted))})),te.abrupt("return");case 111:case"end":return te.stop()}}),null,null,[[41,53],[95,107]])}},hr=function(e,t){return{type:K,payload:{upsertId:e,status:t}}},jr=function(e,t){return{type:Z,payload:{upsertId:e,error:t}}},Or=O()(rr()),gr=function(e,t,n){return function(r,a){var o,i,u,c,d;return Ze.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=a(),i=Pn(o,e),u=!1,null===i){s.next=15;break}return s.prev=4,s.next=7,Ze.a.awrap(n.query({query:Or,variables:{id:i}}));case 7:c=s.sent,d=c.data,d.journalEntryCategory.type!==t&&(u=!0),s.next=15;break;case 13:s.prev=13,s.t0=s.catch(4);case 15:u?Object(l.b)((function(){r(Br(e)),r({type:ve,payload:{upsertId:e,type:t}})})):r({type:ve,payload:{upsertId:e,type:t}});case 16:case"end":return s.stop()}}),null,null,[[4,13]])}},wr=function(e,t){return{type:re,payload:{upsertId:e,value:t}}},Ir=function(e,t){return{type:oe,payload:{upsertId:e,error:t}}},_r=function(e){return{type:ie,payload:{upsertId:e}}},xr=function(e){return function(t,n){var r=n(),a=qn(r,e),o=Jn(r,e),i=Sn(r,e);a?Number.isNaN(a.getTime())?t(Ir(e,new Error("Invalid date."))):o&&t(_r(e)):i===_n.Add?t(Ir(e,new Error("Date is required."))):o&&t(_r(e))}},Cr=function(e){return{type:ue,payload:{upsertId:e}}},Sr=function(e,t){return{type:ce,payload:{upsertId:e,value:t}}},Dr=function(e,t){return{type:se,payload:{upsertId:e,error:t}}},Tr=function(e){return{type:pe,payload:{upsertId:e}}},Ur=function(e,t){return{type:me,payload:{upsertId:e,open:t}}},Rr=(O()(nr()),function(e,t){return function(t,n){var r,a,o;return Ze.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:r=n(),a=kn(r,e),o=Bn(r,e),Sn(r,e)===_n.Add?a||t(Dr(e,new Error("Department is required."))):o&&t(Tr(e));case 5:case"end":return i.stop()}}))}}),Ar=(O()(tr()),function(e){return{type:Ee,payload:{upsertId:e}}}),kr=function(e,t){return{type:he,payload:{upsertId:e,value:t}}},Br=function(e){return{type:je,payload:{upsertId:e}}},Mr=function(e,t){return{type:we,payload:{upsertId:e,open:t}}},Nr=function(e){return function(t,n){var r=n(),a=Pn(r,e),o=Fn(r,e);Sn(r,e)!==_n.Add||a?o&&t(function(e){return{type:ge,payload:{upsertId:e}}}(e)):t(function(e,t){return{type:Oe,payload:{upsertId:e,error:t}}}(e,new Error("Category is required.")))}},Pr=function(e,t){return{type:Ie,payload:{upsertId:e,srcType:t}}},Fr=function(e,t){return{type:_e,payload:{upsertId:e,input:t}}},Lr=function(e){return{type:xe,payload:{upsertId:e}}},qr=function(e,t){return{type:Ce,payload:{upsertId:e,value:t}}},Jr=function(e){return{type:Se,payload:{upsertId:e}}},Wr=function(e,t){return{type:De,payload:{upsertId:e,error:t}}},$r=function(e){return{type:Te,payload:{upsertId:e}}},zr=function(e,t){return{type:Ue,payload:{upsertId:e,open:t}}},Vr=function(e){return function(t,n){var r=n(),a=Gn(r,e),o=Yn(r,e);if(a)o&&t($r(e));else{var i=zn(r,e),l=Vn(r,e),u=Sn(r,e);if(l){if(i!==En.Person)return void(o&&t($r(e)));var c=Object(xn.parseFullName)(l);c.first.trim()?c.last.trim()?o&&t($r(e)):t(Wr(e,new Error("Last name is required."))):t(Wr(e,new Error("First name is required.")))}else u===_n.Add?t(Wr(e,new Error("Source is required."))):o&&t($r(e))}}},Gr=function(e,t){return{type:Re,payload:{upsertId:e,value:t}}},Hr=function(e){return function(t,n){var r=n(),a=Wn(r,e),o=$n(r,e);Sn(r,e)!==_n.Add||a?o&&t(function(e){return{type:Be,payload:{upsertId:e}}}(e)):t(function(e,t){return{type:ke,payload:{upsertId:e,error:t}}}(e,new Error("Payment Method is required.")))}},Yr=function(e,t){return{type:Me,payload:{upsertId:e,value:t}}},Qr=function(e,t){var n=Number.parseFloat(t);if(Number.isNaN(n))return Kr(e,new TypeError("Invalid Number."));for(var r="",a=0,o=t.length;a<o;a++){var i=t[a];"."===i?(r+=i,o=Math.min(o,a+3)):Number.isNaN(Number.parseInt(i))||(r+=i)}return{type:Pe,payload:{upsertId:e,input:r}}},Xr=function(e,t){var n=new en.a(t.toFixed(2)),r=n.n,a=n.d;return{type:Le,payload:{upsertId:e,value:{num:r,den:a}}}},Kr=function(e,t){return{type:Je,payload:{upsertId:e,error:t}}},Zr=function(e){return{type:We,payload:{upsertId:e}}},ea=function(e){return function(t,n){var r=n(),a=Xn(r,e),o=Kn(r,e);Sn(r,e)===_n.Add?a?a.num/a.den===0?t(Kr(e,new Error("Total cannot be 0."))):o&&t(Zr(e)):t(Kr(e,new Error("Total is required."))):o&&t(Zr(e))}},ta=function(e,t){return{type:$e,payload:{upsertId:e,value:t}}},na={dispatchId:null,dispatchQueue:new Map,ms:5};function ra(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Object(l.d)(),a=Object(r.useMemo)((function(){return e?na:{dispatchId:null,dispatchQueue:new Map,ms:t}}),[e,t]),o=Object(r.useCallback)((function(e){n((function(t){var n,r=a.dispatchQueue;null===a.dispatchId&&(a.dispatchId=setTimeout((function(){a.dispatchId=null,Object(l.b)((function(){var e=!0,t=!1,n=void 0;try{for(var a,o=r.values()[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value,l=Object(nn.a)(i,2),u=l[0];(0,l[1])(u)}}catch(c){t=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}})),r.clear()}),a.ms));var o="function"===typeof e?Symbol():null===(n=e)||void 0===n?void 0:n.type;r.set(o,[e,t])}))}),[a,n]);return o}var aa,oa=Object(Pt.a)((function(e){return Object(Ft.a)({positive:{color:Lt.a[900]},negative:{color:qt.a[900]}})})),ia=function(e){var t=oa(),n=ra(),o=Object(kt.a)(),i=e.journalEntry,l=void 0===i?null:i,u=e.style,c=e.deptId,s=e.mode,p=e.removeReconciled,m=Object(r.useCallback)((function(e){l&&n(ur(Jo,{entryId:l.id,fromDept:c,client:o}))}),[l,n,c,o]);if(null===l){var v=a.a.createElement(Nt.a,{variant:"rect",height:20});return a.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},a.a.createElement(F.a,{component:"div"},a.a.createElement(d.a,{flexGrow:1,clone:!0},a.a.createElement(L.a,{component:"div",children:v}))))}var f=l.category.type===hn.Credit?t.positive:t.negative;return a.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},a.a.createElement(F.a,{onDoubleClick:m,component:"div",hover:!0},a.a.createElement($t,{textColor:f,entryDate:l.date}),a.a.createElement(Vt,{textColor:f,department:l.department}),a.a.createElement(Gt,{textColor:f,category:l.category}),a.a.createElement(Ht,{textColor:f,source:l.source}),a.a.createElement(Yt,{textColor:f,paymentMethod:l.paymentMethod}),a.a.createElement(Qt,{textColor:f,description:l.description}),a.a.createElement(tn,{textColor:f,total:l.total}),a.a.createElement(In,{removeReconciled:p,entryId:l.id,mode:s,textColor:f,reconciled:l.reconciled})))};!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(aa||(aa={}));var la=function(e){var t,n=e.height,o=e.deptId,i=e.mode,u=e.width,c=Object(r.useMemo)((function(){return o?{where:{department:{eq:o}}}:void 0}),[o]),s=Object(l.e)((function(e){return Ut(e,gt)}),l.c),p=Object(r.useMemo)((function(){var e=s.reduce((function(e,t){return e+t.width}),0);return Math.max(e,u)}),[s,u]),v=Object(kt.d)(pn,{variables:c}),f=v.error,y=v.data,b=v.updateQuery,E=v.fetchMore,h=v.subscribeToMore,j=Object(kt.a)();Object(r.useEffect)((function(){var e=function(){try{return j.readQuery({query:pn,variables:c})}catch(f){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();E({variables:c?Object(m.a)({},c,{where:Object(m.a)({},(null===c||void 0===c?void 0:c.where)||{},{lastUpdate:{gt:t}})}):{where:{lastUpdate:{gt:t}}},updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(V.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(V.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var n=h({document:mn,updateQuery:function(e,t){var n,r,a=t.subscriptionData,i=null===a||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.journalEntryAdded;return!i||i.id!==o&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==o}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(V.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(V.a)([null===a||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.journalEntryAdded]||!1))})}}),r=h({document:vn,updateQuery:function(e,t){var n,r=t.subscriptionData,a=null===r||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.journalEntryUpdated;return a&&j.writeFragment({id:"JournalEntry:".concat(a.id),fragment:sn,data:a}),e}});return function(){n(),r()}}),[c,E,j,h,o]);var O=Object(r.useCallback)((function(e){i!==aa.View&&b((function(t){for(var n=t.journalEntries||[],r=0,a=n.length;r<a;r++)if(n[r].id===e)return Object(m.a)({},t,{journalEntries:[].concat(Object(V.a)(n.slice(0,r)),Object(V.a)(n.slice(r+1)))});return t}))}),[i,b]),g=Object(r.useMemo)((function(){var e=(null===y||void 0===y?void 0:y.journalEntries)||[];return i===aa.Reconcile?e.filter((function(e){return!e.reconciled&&!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})):e.filter((function(e){return!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}))}),[y,i]),w=null!==(t=g.length)&&void 0!==t?t:500,I=Object(r.useCallback)((function(e){var t=e.index,n=e.style,r=g[t];return a.a.createElement(ia,{mode:i,style:n,journalEntry:r,removeReconciled:O})}),[g,i,O]),_=Object(r.useCallback)((function(e){var t,n;return null!==(t=null===(n=g[e])||void 0===n?void 0:n.id)&&void 0!==t?t:e}),[g]);return f?a.a.createElement("div",null,f.message):a.a.createElement(d.a,{height:n,display:"block",clone:!0},a.a.createElement(Bt.a,{component:"div"},a.a.createElement(d.a,{display:"flex",clone:!0},a.a.createElement(Mt.a,{itemKey:_,height:n,width:p,itemCount:w,itemSize:53,overscanCount:10},I))))},ua=n(5075),ca=n(5076),da=n(5077),sa=n(5063),pa=n(5092),ma=n(5062),va=n(5061),fa=n(5074),ya=n(5073),ba=n(34),Ea=n(5088),ha=n(156),ja={inputMode:"numeric"},Oa=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=Object(l.d)(),d=Object(l.e)((function(e){var n=Jn(e,t);return{disabled:null===Un(e,t),date:qn(e,t),required:Rn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.date,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useMemo)((function(){return p?Wt()(p):null}),[p]),b=Object(r.useCallback)((function(){c(xr(t))}),[t,c]),E=Object(r.useCallback)((function(e){(null===e||void 0===e?void 0:e.isValid())?(c(wr(t,e.toDate())),v&&b()):c({type:ae,payload:{upsertId:t}})}),[t,c,v,b]),h={disabled:s,error:v,helperText:f,required:m,onBlur:b,onClose:b,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:u,variant:"inline",format:"MM/DD/YYYY",margin:"none",label:"Date",initialFocusedDate:y||Wt()(),value:y,onChange:E,autoOk:!0,InputProps:Object(r.useMemo)((function(){return{autoFocus:o}}),[o]),inputProps:ja,placeholder:"mm/dd/yyyy"};return a.a.createElement(ba.a,{utils:ha.a},a.a.createElement(Ea.a,h))},ga=n(5066),wa=n(5067),Ia={min:"0"},_a=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=ra(),d=Object(l.e)((function(e){var n=Kn(e,t);return{disabled:null===Un(e,t),totalInput:Qn(e,t),required:Rn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.totalInput,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useCallback)((function(){c(ea(t))}),[c,t]),b={disabled:s,value:p,variant:u,required:m,helperText:f,label:"Total",name:"total",placeholder:"0.00",onChange:Object(r.useCallback)((function(e){var n=e.target.value||"";n?(c(Qr(t,n)),c(Xr(t,1*n)),v&&y()):(c({type:Fe,payload:{upsertId:t}}),c(function(e){return{type:qe,payload:{upsertId:e}}}(t)))}),[c,y,v,t]),inputProps:Ia,error:v,InputProps:Object(r.useMemo)((function(){return{type:"number",autoFocus:o,onBlur:y,startAdornment:a.a.createElement(wa.a,{position:"start"},"$")}}),[o,y])};return a.a.createElement(ga.a,b)},xa=n(5095),Ca=n(5089),Sa=n(84),Da=n.n(Sa);function Ta(){var e=Object(h.a)(["\n  query DeptInputOpts_1($fromParent:ID) {\n    deptOpts: departments(fromParent:$fromParent) {\n      ...DeptInputOptsDept_1Fragment\n    }\n  }\n  fragment DeptInputOptsDept_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n"]);return Ta=function(){return e},e}var Ua=O()(Ta()),Ra=function(e){return e},Aa=function(e){return e.name},ka=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(xa.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"small"},t({index:r})))," ",!o&&a.a.createElement(Da.a,{fontSize:"small"}))}))},Ba=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=Object(kt.a)(),d=ra(),s=Object(r.useCallback)((function(){d(Rr(t,c))}),[d,t,c]),p=Object(r.useCallback)((function(){d(Ur(t,!1)),s()}),[t,d,s]),m=Object(r.useCallback)((function(){return d(Ur(t,!0))}),[t,d]),v=Object(r.useCallback)((function(){d(Ur(t,!1)),s()}),[t,d,s]),f=Object(r.useCallback)((function(){return d(Ur(t,!0))}),[t,d]),y=Object(l.e)((function(e){var n=kn(e,t),r=Bn(e,t);return{disabled:null===Un(e,t),deptInput:An(e,t),dept:n,required:Rn(e,t),open:Mn(e,t),hasError:!!r,errorMsg:(null===r||void 0===r?void 0:r.message)||null}}),H.a),b=y.disabled,E=y.deptInput,h=y.dept,j=y.required,O=y.open,g=y.hasError,w=y.errorMsg,I=(Object(l.e)((function(e){return function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.fromDept)||null}(e,t)})),Object(kt.d)(Ua,{variables:{fromParent:"5dc4b09bcf96e166daaa0090"}})),_=I.loading,x=I.error,C=I.data,S=(null===C||void 0===C?void 0:C.deptOpts)||[],D=Object(r.useMemo)((function(){return function(e,t){if(e){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===e)return l}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}}return null}(h,S)}),[h,S]),T=Object(r.useMemo)((function(){if(!E)return h?S.filter((function(e){return e.parent.id===h})):S;var e=new RegExp("(^|\\s)".concat(E),"i");return h?S.filter((function(t){return t.parent.id===h&&e.test(t.name)})):S.filter((function(t){return e.test(t.name)}))}),[h,E,S]),U=T.length>0,R=Object(r.useMemo)((function(){if(!D)return null;for(var e=[D],t=function(e){var t=!0,n=!1,r=void 0;try{for(var a,o=S[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;if(e.parent.id===i.id)return i}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},n=t(D);n;)e.unshift(n),n=t(n);return 1===e.length?U?e:e[0]:e}),[S,D,U]),A=Array.isArray(R),k=Object(r.useCallback)((function(e,n){if(n&&(n=Array.isArray(n)?n[n.length-1]:n))return d(Sr(t,n.id)),d(Cr(t)),void(g&&s());d({type:de,payload:{upsertId:t}})}),[t,d,g,s]),B=Object(r.useCallback)((function(e,n){d(n?{type:le,payload:{upsertId:t,input:n}}:Cr(t))}),[d,t]),M={required:j,autoFocus:o,fullWidth:!0,label:"Department",variant:u,error:g,helperText:w},N=Object(r.useCallback)((function(e){return a.a.createElement(ga.a,Object.assign({},M,e))}),[M]),P={disabled:b,loading:_,multiple:A,autoComplete:!0,disableCloseOnSelect:!0,getOptionLabel:Aa,filterOptions:Ra,open:O,renderInput:N,options:T,onChange:k,onInputChange:B,value:R,inputValue:E};return x?(console.error(x),a.a.createElement("p",null,x.message)):(D?Array.isArray(R)&&1!==R.length?U?(P.autoHighlight=!0,P.onBlur=p,P.onFocus=m,P.onClose=v,P.onOpen=f,P.options=T,P.renderTags=ka):(P.onBlur=s,P.disabled=!0,P.inputValue="",P.open=!1,P.renderTags=ka):U?(P.autoHighlight=!0,P.onBlur=p,P.onFocus=m,P.onClose=v,P.onOpen=f,P.options=T,P.renderTags=ka):(P.onBlur=s,P.inputValue=D.name,P.open=!1):(P.autoHighlight=!0,P.autoSelect=!0,P.onBlur=p,P.onFocus=m,P.onClose=v,P.onOpen=f),a.a.createElement(Ca.a,P))};function Ma(){var e=Object(h.a)(["\n  query CatInputOpts_1 {\n    catOpts: journalEntryCategories {\n      ...CatInputOptsCat_1Fragment\n    }\n  }\n  fragment CatInputOptsCat_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n"]);return Ma=function(){return e},e}var Na=O()(Ma()),Pa=function(e){return"string"===typeof e?e===hn.Credit?"Credit":"Debit":e.name},Fa=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(xa.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:Pa(e),size:"small"},t({index:r})))," ",!o&&a.a.createElement(Da.a,{fontSize:"small"}))}))},La=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=ra(),d=Object(r.useCallback)((function(){c(Nr(t))}),[c,t]),s=Object(r.useCallback)((function(){c(Mr(t,!1)),d()}),[t,c,d]),p=Object(r.useCallback)((function(){return c(Mr(t,!0))}),[t,c]),m=Object(r.useCallback)((function(){c(Mr(t,!1)),d()}),[t,c,d]),v=Object(r.useCallback)((function(){return c(Mr(t,!0))}),[t,c]),f=Object(l.e)((function(e){var n=Fn(e,t);return{disabled:null===Un(e,t),type:Un(e,t),catId:Pn(e,t),catInput:Nn(e,t),required:Rn(e,t),open:Ln(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),H.a),y=f.disabled,b=f.type,E=f.catId,h=f.catInput,j=f.required,O=f.open,g=f.hasError,w=f.errorMsg,I=Object(kt.d)(Na),_=I.loading,x=I.error,C=I.data,S=(null===C||void 0===C?void 0:C.catOpts)||[],D=Object(r.useMemo)((function(){if(null===b)return[];var e=[];if(E){var t=new Map,n=E,r=!0,a=!1,o=void 0;try{for(var i,l=S[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value;if(u.id!==n)t.set(u.id,u);else{var c;for(e.unshift(u),n=(null===(c=u.parent)||void 0===c?void 0:c.id)||null;n&&t.has(n);){var d,s=t.get(n);e.unshift(s),n=(null===(d=s.parent)||void 0===d?void 0:d.id)||null}if(!n)break}}}catch(p){a=!0,o=p}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}return e}),[b,S,E]),T=Object(r.useMemo)((function(){return null===b?[]:null===E?S.filter((function(e){return!e.parent&&e.type===b})):S.filter((function(e){var t;return(null===(t=e.parent)||void 0===t?void 0:t.id)===E&&e.type===b}))}),[S,E,b]),U=Object(r.useCallback)((function(e){var t=h.trimStart().split(" ").join("\\s");if(!t)return e;var n=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return"string"===typeof e?n.test(e):n.test(e.name)}))}),[h]),R=T.length>0,A=Object(r.useCallback)((function(e,n){if(c(Ar(t)),n&&0!==(null===n||void 0===n?void 0:n.length)){var r=Array.isArray(n)?n[n.length-1]:n;c(kr(t,r.id)),d()}else c(Br(t))}),[c,t,d]),k=Object(r.useCallback)((function(e,n){c(n?{type:be,payload:{upsertId:t,input:n}}:Ar(t))}),[c,t]),B={required:j,autoFocus:o,fullWidth:!0,label:"Category",variant:u,error:g,helperText:w},M=Object(r.useCallback)((function(e){return a.a.createElement(ga.a,Object.assign({},B,e))}),[B]),N={disabled:y,loading:_,multiple:!0,autoComplete:!0,autoSelect:!0,autoHighlight:!0,disableCloseOnSelect:!0,getOptionLabel:Pa,filterOptions:U,open:O,renderInput:M,options:T,onChange:A,onInputChange:k,value:D,inputValue:h,renderTags:Fa};return x?(console.error(x),a.a.createElement("p",null,x.message)):(R?(N.onBlur=s,N.onFocus=p,N.onClose=m,N.onOpen=v):(N.onBlur=d,N.disabled=!0,N.inputValue="",N.open=!1),a.a.createElement(Ca.a,N))},qa=n(5071),Ja=n(5070),Wa=n(5096),$a=n(5068),za=n(5069),Va=Object(Pt.a)((function(e){return Object(Ft.a)({sourceToggle:{marginRight:e.spacing(1)},sourceInput:{flexGrow:1},sourceIcon:{marginRight:e.spacing(1),marginLeft:e.spacing(1)}})})),Ga={value:En.Business},Ha={value:En.Person},Ya=function(e){var t=e.entryUpsertId,n=Va(),o=Object(l.e)((function(e){return{disabled:null===Un(e,t),value:zn(e,t),srcInput:Vn(e,t),isSrcSet:!!Gn(e,t),hasError:!!Yn(e,t)}}),l.c),i=o.disabled,u=o.value,c=o.srcInput,s=o.isSrcSet,p=o.hasError,m=Object(l.d)(),v=p?"error":void 0,f=Object(r.useCallback)((function(e,n){m(Pr(t,n))}),[m,t]);if(s||c)return u===En.Person?a.a.createElement($a.a,{className:n.sourceIcon,color:v}):a.a.createElement(za.a,{className:n.sourceIcon,color:v});var y={className:n.sourceToggle,size:"small",exclusive:!0,onChange:f,value:u};return a.a.createElement(d.a,{py:1,clone:!0},a.a.createElement(Wa.a,y,a.a.createElement(Ja.a,Object.assign({disabled:i},Ga),a.a.createElement(za.a,{color:v})),a.a.createElement(Ja.a,Object.assign({disabled:i},Ha),a.a.createElement($a.a,{color:v}))))};function Qa(){var e=Object(h.a)(["\n  query BizSrcInsureBizData($id:ID!) {\n    business(id:$id) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n  }\n  ","\n"]);return Qa=function(){return e},e}function Xa(){var e=Object(h.a)(["\n  query BusinessSrcOptsInput_1($searchByName:String!, $deptId:ID!, $bizId:ID!,\n    $withBizOpt:Boolean!, $withDeptAncestors:Boolean!, $withBizOpts:Boolean!)\n  {\n    bizOpt: business(id: $bizId) @include(if:$withBizOpt) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n    deptAncestors: department(id: $deptId) @include(if:$withDeptAncestors) {\n      __typename\n      id\n      ancestors {\n        ...BusinessSrcBizOpts_1Fragment\n        ...BusinessSrcDeptOpts_1Fragment\n      }\n    }\n    bizOpts: businesses(searchByName:$searchByName) @include(if:$withBizOpts) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n  }\n  ","\n"]);return Xa=function(){return e},e}function Ka(){var e=Object(h.a)(["\n  fragment BusinessSrcBizOpts_1Fragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    deptOpts: departments {\n      ...BusinessSrcDeptOpts_1Fragment\n    }\n  }\n  ","\n"]);return Ka=function(){return e},e}function Za(){var e=Object(h.a)(["\n  fragment BusinessSrcDeptOpts_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n"]);return Za=function(){return e},e}var eo=O()(Za()),to=O()(Ka(),eo),no=O()(Xa(),to),ro=O()(Qa(),to),ao=function(e){return e.name},oo=function(e,t){var n=e.length-1;return e.map((function(e,r){var o=n===r;return a.a.createElement(d.a,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},a.a.createElement(xa.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"small"},t({index:r})))," ",!o&&a.a.createElement(Da.a,{fontSize:"small"}))}))},io=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=e.variant,i=Object(kt.a)(),u=ra(),c=Object(kt.b)(ro),d=Object(nn.a)(c,2),s=d[0],p=d[1].loading,m=Object(l.e)((function(e){var n=Gn(e,t),r=Yn(e,t);return{upsertType:Sn(e,t),disabled:null===Un(e,t),srcInput:Vn(e,t),type:Un(e,t),src:n,isSrcSet:!!n,required:Rn(e,t),open:Hn(e,t),hasError:!!r,errorMsg:(null===r||void 0===r?void 0:r.message)||null}}),H.a),v=m.disabled,f=m.srcInput,y=m.type,b=m.src,E=m.isSrcSet,h=m.required,j=m.open,O=m.hasError,g=m.errorMsg,w=m.upsertType,I=Object(r.useCallback)((function(){u(Vr(t))}),[u,t]),_=Object(r.useCallback)((function(){u(zr(t,!1)),I()}),[t,u,I]),x=Object(r.useCallback)((function(){return u(zr(t,!0))}),[t,u]),C=Object(r.useCallback)((function(){return u(zr(t,!1))}),[t,u]),S=Object(r.useCallback)((function(){return u(zr(t,!0))}),[t,u]),D=Object(r.useRef)("");E||(D.current=f.substr(0,1).toLowerCase());var T=Object(kt.d)(no,{skip:!D.current&&w!==_n.Update,variables:{searchByName:D.current,deptId:(null===b||void 0===b?void 0:b.id)||"",bizId:(null===b||void 0===b?void 0:b.id)||"",withBizOpts:w===_n.Add||!E,withBizOpt:w===_n.Update&&(null===b||void 0===b?void 0:b.sourceType)===En.Business,withDeptAncestors:w===_n.Update&&(null===b||void 0===b?void 0:b.sourceType)===En.Department}}),U=T.loading,R=T.error,A=T.data,k=Object(r.useMemo)((function(){if(!b||!A)return null;if(b.sourceType===En.Business)try{return i.readFragment({id:"Business:".concat(b.id),fragment:to,fragmentName:"BusinessSrcBizOpts_1Fragment"},!0)||null}catch(R){return s({variables:{id:b.id}}),null}return i.readFragment({id:"Department:".concat(b.id),fragment:eo})||null}),[b,i,A,s]),B=Object(r.useMemo)((function(){if(!k)return[];for(var e=[k],t=function(e){return"Business"===e.__typename?null:"Business"===e.parent.__typename?i.readFragment({id:"Business:".concat(e.parent.id),fragment:to,fragmentName:"BusinessSrcBizOpts_1Fragment"})||null:i.readFragment({id:"Department:".concat(e.parent.id),fragment:eo})||null},n=t(k);n;)e.unshift(n),n=t(n);return e}),[k,i]),M=Object(r.useMemo)((function(){if(!B||!k)return(null===A||void 0===A?void 0:A.bizOpts)||[];var e=B[0];return((null===e||void 0===e?void 0:e.deptOpts)||[]).filter((function(e){return e.parent.id===k.id}))}),[k,B,A]),N=M.length>0,P=Object(r.useMemo)((function(){return B.length>1?B:1!==B.length||N?null:B[0]}),[B,N]),F=Array.isArray(P),L=Object(r.useMemo)((function(){return{required:h,autoFocus:n,fullWidth:!0,variant:o,label:F?"Business > Departments...":"Business",error:O,helperText:null===y?"Select a Category to unlock.":g}}),[h,n,o,F,O,g,y]),q=Object(r.useCallback)((function(e){return a.a.createElement(ga.a,Object.assign({},L,e))}),[L]),J=Object(r.useCallback)((function(e,n){if(n){var r=Array.isArray(n)?n[n.length-1]:n;u(qr(t,{sourceType:"Business"===r.__typename?En.Business:En.Department,id:r.id})),u(Lr(t)),O&&I()}else u(Jr(t))}),[t,u,O,I]),W=Object(r.useCallback)((function(e,n){u(n?Fr(t,n):Lr(t))}),[u,t]),$=Object(r.useCallback)((function(e){var t=f.trimStart().split(" ").join("\\s");if(""===t)return e;var n=new RegExp("\\s*".concat(t),"i");return e.filter((function(e){return n.test(e.name)}))}),[f]),z={loading:U||p,disabled:!y||v||p,multiple:F,open:j,options:M,autoHighlight:!0,disableCloseOnSelect:!0,getOptionLabel:ao,filterOptions:$,renderInput:q,onChange:J,onInputChange:W,value:P,inputValue:f};return R?(console.error(R),a.a.createElement("p",null,R.message)):(k?Array.isArray(P)&&1!==P.length?0===M.length?(z.disabled=!0,z.inputValue="",z.open=!1,z.renderTags=oo):(z.autoHighlight=!0,z.renderTags=oo,z.onBlur=_,z.onFocus=x,z.onClose=C,z.onOpen=S):0===M.length?(z.inputValue=k.name,z.open=!1):(z.renderTags=oo,z.onBlur=_,z.onFocus=x,z.onClose=C,z.onOpen=S):(z.multiple=!1,z.freeSolo=!0,z.onBlur=_,z.onFocus=x,z.onClose=C,z.onOpen=S),a.a.createElement(Ca.a,z))};function lo(){var e=Object(h.a)(["\n  query PeopleSrcOpts_1($searchByName:PersonNameInput!) {\n    people(searchByName:$searchByName){\n      ...PersonSrcOpt_1Fragment\n    }\n  }\n  ","\n"]);return lo=function(){return e},e}function uo(){var e=Object(h.a)(["\n  fragment PersonSrcOpt_1Fragment on Person {\n    __typename\n    id\n    name {\n      first\n      last\n    }\n  }\n"]);return uo=function(){return e},e}var co=O()(uo()),so=O()(lo(),co),po=Object(Pt.a)((function(e){return Object(Ft.a)({fixHeight:{maxHeight:56}})})),mo=function(e){return e},vo=function(e){return"".concat(e.name.first," ").concat(e.name.last)},fo=function(e){var t=po(),n=ra(),o=Object(kt.a)(),i=e.entryUpsertId,u=e.autoFocus,c=e.variant,d=Object(l.e)((function(e){var t=Gn(e,i),n=Yn(e,i);return{disabled:null===Un(e,i),src:t,srcInput:Vn(e,i),isSrcSet:!!t,freeSolo:!t,required:Rn(e,i),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.src,m=d.srcInput,v=d.isSrcSet,f=d.required,y=d.freeSolo,b=d.hasError,E=d.errorMsg,h=Object(r.useRef)("");v||(h.current=m.substr(0,1).toLowerCase());var j=Object(kt.d)(so,{skip:!h.current,variables:{searchByName:{first:h.current,last:h.current}}}),O=j.loading,g=j.error,w=j.data,I=Object(r.useMemo)((function(){var e=(null===w||void 0===w?void 0:w.people)||[];if(!v||!m)return e;var t=new RegExp("(^|\\s)".concat(m),"i");return e.filter((function(e){return t.test("".concat(e.name.first," ").concat(e.name.last))}))}),[m,w,v]),_=p?o.readFragment({id:"Person:".concat(p.id),fragment:co}):null,x=v?"".concat(null===_||void 0===_?void 0:_.name.first," ").concat(null===_||void 0===_?void 0:_.name.last):m,C=Object(r.useCallback)((function(){n(Vr(i))}),[n,i]),S=Object(r.useCallback)((function(e,t){(t=t||null)?(n(qr(i,{sourceType:En.Person,id:t.id})),b&&C()):n(Jr(i))}),[n,i,b,C]),D=Object(r.useCallback)((function(e,t){n(t?Fr(i,t):Lr(i))}),[n,i]),T={required:f,onBlur:C,autoFocus:u,label:"Name",fullWidth:!0,variant:c,error:b,helperText:E},U=Object(r.useCallback)((function(e){var n=null===e||void 0===e?void 0:e.InputProps;if(n){var r=(null===n||void 0===n?void 0:n.className)||"";n.className="".concat(r," ").concat(t.fixHeight)}else e.InputProps={className:t.fixHeight};return a.a.createElement(ga.a,Object.assign({},T,e))}),[t,T]);if(g)return console.error(g),a.a.createElement("p",null,(null===g||void 0===g?void 0:g.message)||"".concat(g));var R={disabled:s,loading:O,autoHighlight:!0,autoSelect:!1,autoComplete:!0,freeSolo:y,options:I,inputValue:x,value:_,onChange:S,onInputChange:D,renderInput:U,filterOptions:mo,getOptionLabel:vo};return a.a.createElement(Ca.a,R)},yo=Object(Pt.a)((function(e){return Object(Ft.a)({sourceInput:{flexGrow:1}})})),bo=function(e){var t=yo(),n=e.entryUpsertId,r=e.autoFocus,o=void 0!==r&&r,i=e.variant,u=void 0===i?"filled":i,c=Object(l.e)((function(e){return zn(e,n)}));return a.a.createElement(d.a,{display:"flex",flexWrap:"nowrap",alignItems:"center"},a.a.createElement(qa.a,{item:!0},a.a.createElement(Ya,{entryUpsertId:n})),a.a.createElement(qa.a,{item:!0,className:t.sourceInput},c?c===En.Person?a.a.createElement(fo,{entryUpsertId:n,autoFocus:o,variant:u}):a.a.createElement(io,{entryUpsertId:n,autoFocus:o,variant:u}):a.a.createElement(ga.a,{fullWidth:!0,disabled:!0,variant:u,label:"Source"})))},Eo=n(5016),ho=n(5022),jo=n(5017),Oo=n(5020),go=n(5093);function wo(){var e=Object(h.a)(["\n  query PayMethodInput_1 {\n    paymentMethods {\n      __typename\n      id\n      method\n      active\n    }\n  }\n"]);return wo=function(){return e},e}var Io=O()(wo()),_o=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=ra(),d=Object(l.e)((function(e){var n=$n(e,t);return{disabled:null===Un(e,t),required:Rn(e,t),value:Wn(e,t),hasError:!!n,errorMsg:(null===n||void 0===n?void 0:n.message)||null}}),l.c),s=d.disabled,p=d.value,m=d.required,v=d.hasError,f=d.errorMsg,y=Object(r.useCallback)((function(){c(Hr(t))}),[c,t]),b=Object(kt.d)(Io),E=b.loading,h=b.error,j=b.data,O=Object(r.useMemo)((function(){return((null===j||void 0===j?void 0:j.paymentMethods)||[]).filter((function(e){return e.active}))}),[j]),g=Object(r.useMemo)((function(){return{disabled:s,required:m,fullWidth:!0,variant:u,error:v}}),[m,u,v,s]),w=Object(r.useCallback)((function(e){var n,r=(null===e||void 0===e?void 0:null===(n=e.target)||void 0===n?void 0:n.value)||null;r?(c(Gr(t,r)),v&&y()):c({type:Ae,payload:{upsertId:t}})}),[c,t,v,y]),I=Object(r.useMemo)((function(){return O.map((function(e){var t=e.id,n=e.method;return a.a.createElement(go.a,{value:t,key:t,children:"".concat(n[0].toUpperCase()).concat(n.substr(1))})}))}),[O]);if(E)return a.a.createElement(Nt.a,{variant:"rect",height:56});if(h)return console.error(h),a.a.createElement("p",null,null===h||void 0===h?void 0:h.message);var _={autoFocus:o,children:I,onChange:w,value:p};return a.a.createElement(Eo.a,g,a.a.createElement(ho.a,null,"Method"),a.a.createElement(Oo.a,_),v&&a.a.createElement(jo.a,null,f))},xo=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=e.variant,u=void 0===i?"filled":i,c=ra(),d=Object(l.e)((function(e){return{disabled:null===Un(e,t),description:Zn(e,t)||""}})),s=d.description,p={disabled:d.disabled,fullWidth:!0,value:s,variant:u,required:!1,label:"Description",name:"description",onChange:Object(r.useCallback)((function(e){var n=e.target.value||"";c(n?Yr(t,n):{type:Ne,payload:{upsertId:t}})}),[c,t]),InputProps:Object(r.useMemo)((function(){return{type:"text",autoFocus:o}}),[o])};return a.a.createElement(ga.a,p)},Co=function(e){var t=e.entryUpsertId,n=e.autoFocus,o=void 0!==n&&n,i=ra(),u=Object(l.e)((function(e){return{checked:er(e,t),disabled:null===Un(e,t)}})),c=u.checked,d={disabled:u.disabled,checked:c,required:!1,name:"reconciled",onChange:Object(r.useCallback)((function(e){var n=e.target.checked;i(n?ta(t,n):{type:ze,payload:{upsertId:t}})}),[i,t]),inputProps:Object(r.useMemo)((function(){return{type:"checkbox",autoFocus:o}}),[o])};return a.a.createElement(on.a,d)},So=n(5072),Do=n(121),To={value:hn.Credit},Uo={value:hn.Debit},Ro=function(e){var t=e.entryUpsertId,n=Object(kt.a)(),o=Object(l.e)((function(e){var n=function(e,t){var n;return(null===(n=Cn(e,t))||void 0===n?void 0:n.values.type.error)||null}(e,t);return{value:Un(e,t),typeError:n,hasError:!!n}})),i=o.value,u=(o.typeError,o.hasError),c=ra(),s=u?"error":null===i?"secondary":void 0,p={size:"small",exclusive:!0,onChange:Object(r.useCallback)((function(e,r){c(gr(t,r,n))}),[c,t,n]),value:i},m=a.a.createElement(d.a,{pl:1,clone:!0},a.a.createElement(Wa.a,p,a.a.createElement(So.a,{arrow:!0,placement:"top",title:"Credit"},a.a.createElement(Ja.a,Object.assign({selected:i===hn.Credit},To),a.a.createElement(Do.b,{color:s}))),a.a.createElement(So.a,{arrow:!0,placement:"top",title:"Debit"},a.a.createElement(Ja.a,Object.assign({selected:i===hn.Debit},Uo),a.a.createElement(Do.a,{color:s})))));return a.a.createElement(ya.a,{color:null===i?"secondary":"default",labelPlacement:"start",control:m,label:"Type"})},Ao=function(e){var t=e.entryUpsertId,n=(e.fromDept,Object(kt.a)()),o=ra(),i=Object(r.useCallback)((function(e){o(cr(t))}),[o,t]),u=Object(r.useCallback)((function(e){o(yr(t,n))}),[o,t,n]),c=Object(l.e)((function(e){return{open:Sn(e,t)===_n.Add,typeIsSet:null!==Un(e,t)}})),s=c.open,p=c.typeIsSet;return a.a.createElement(pa.a,{maxWidth:"lg",open:s},a.a.createElement("form",null,a.a.createElement(fa.a,null,"Add Entry"),a.a.createElement(d.a,{justifyContent:"center",display:"flex",flexWrap:"wrap",clone:!0},a.a.createElement(va.a,{dividers:!0},a.a.createElement(d.a,{padding:2},a.a.createElement(Ro,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Oa,{autoFocus:!0,entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ba,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(La,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(bo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:400},a.a.createElement(xo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:175},a.a.createElement(_o,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(_a,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:120},a.a.createElement(ya.a,{control:a.a.createElement(Co,{entryUpsertId:t}),label:"Reconcile"})))),a.a.createElement(ma.a,null,a.a.createElement(sa.a,{disabled:!p,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(ua.a,null),onClick:u},"Submit"),a.a.createElement(sa.a,{disabled:!p,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(ca.a,null)},"Submit/New"),a.a.createElement(sa.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(da.a,null),onClick:i},"Cancel"))))},ko=n(5078),Bo=function(e){var t=e.entryUpsertId,n=(e.fromDept,Object(kt.a)()),o=ra(),i=Object(r.useCallback)((function(e){o(cr(t))}),[o,t]),u=Object(r.useCallback)((function(e){o(yr(t,n))}),[o,t,n]),c=Object(r.useCallback)((function(e){console.log("Delete ",t)}),[o,t,n]),s=Object(l.e)((function(e){return{open:Sn(e,t)===_n.Update,typeIsSet:null!==Un(e,t)}})),p=s.open,m=s.typeIsSet;return a.a.createElement(pa.a,{maxWidth:"lg",open:p},a.a.createElement("form",null,a.a.createElement(fa.a,null,"Update Entry"),a.a.createElement(d.a,{justifyContent:"center",display:"flex",flexWrap:"wrap",clone:!0},a.a.createElement(va.a,{dividers:!0},a.a.createElement(d.a,{padding:2},a.a.createElement(Ro,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(Oa,{autoFocus:!0,entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(Ba,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(La,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:380},a.a.createElement(bo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:400},a.a.createElement(xo,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:175},a.a.createElement(_o,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:150},a.a.createElement(_a,{entryUpsertId:t})),a.a.createElement(d.a,{padding:2,minWidth:120},a.a.createElement(ya.a,{control:a.a.createElement(Co,{entryUpsertId:t}),label:"Reconcile"})))),a.a.createElement(ma.a,null,a.a.createElement(d.a,{width:"100%",display:"flex",justifyContent:"space-between"},a.a.createElement(sa.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(ko.a,null),onClick:c},"Delete"),a.a.createElement("div",null,a.a.createElement(sa.a,{disabled:!m,size:"medium",color:"secondary",variant:"outlined",startIcon:a.a.createElement(ua.a,null),onClick:u},"Update"),a.a.createElement(sa.a,{size:"medium",color:"default",variant:"outlined",startIcon:a.a.createElement(da.a,null),onClick:i},"Cancel"))))))},Mo=n(5079),No=n(51),Po=n(5065),Fo=function(e,t){return t in e.journal.pabs&&e.journal.pabs[t].open},Lo=q("Journal_PAB",J);jt.dispatch({type:"journal/CREATE_PAB",payload:{pabId:Lo}});var qo=function(e){var t=e.entryUpsertId,n=e.fromDept,o=(Object(kt.a)(),Object(No.a)()),i=ra(),u=(Object(r.useCallback)((function(e){return i(function(e){return{type:ft,payload:{pabId:e}}}(Lo))}),[i]),Object(r.useCallback)((function(e){return i(function(e){return{type:yt,payload:{pabId:e}}}(Lo))}),[i]),Object(l.e)((function(e){return{upsertType:Sn(e,t),submitStatus:Tn(e,t),isOpen:Fo(e,Lo)}}))),c=u.upsertType,s=u.submitStatus;u.isOpen;return s===w.Submitting?a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Mo.a,{disabled:!0,size:"large",color:"secondary","aria-label":"submitting",children:a.a.createElement(Po.a,{color:"secondary"})})):s===w.NotSubmitted&&null!==c?a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Mo.a,{disabled:!0,size:"large",color:"secondary","aria-label":"add entry",children:a.a.createElement(ua.a,null)})):a.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},a.a.createElement(Mo.a,{size:"large",color:"secondary","aria-label":"add entry",children:a.a.createElement(ua.a,null),onClick:function(){return i(ur(t,{fromDept:n}))}}))},Jo=q("Journal",J),Wo=function(e){var t=e.deptId,n=e.mode,o=Object(r.useCallback)((function(e){var r=e.width,o=e.height;return a.a.createElement(la,{mode:n,deptId:t,width:r,height:o})}),[t,n]);return a.a.createElement(d.a,{style:{overflowX:"auto"},width:"100%",overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"flex-start",flexDirection:"column",clone:!0},a.a.createElement("form",null,a.a.createElement(d.a,{width:"100%",flexGrow:1,display:"flex !important",justifyContent:"flex-start",flexDirection:"column",clone:!0},a.a.createElement(M.a,{component:"div"},a.a.createElement(At,null),a.a.createElement(d.a,{flexGrow:1},a.a.createElement(N.a,{children:o})),n===aa.View&&a.a.createElement(qo,{fromDept:t,entryUpsertId:Jo}))),a.a.createElement(Bo,{fromDept:t,entryUpsertId:Jo}),a.a.createElement(Ao,{fromDept:t,entryUpsertId:Jo})))},$o=n(5085),zo=n(78),Vo=n(158),Go=n.n(Vo),Ho=n(160),Yo=n.n(Ho),Qo=n(162),Xo=n.n(Qo),Ko=n(161),Zo=n.n(Ko),ei=n(5082),ti=n(5083),ni=n(5084),ri=n(5081),ai=n(104);function oi(){var e=Object(h.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return oi=function(){return e},e}function ii(){var e=Object(h.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return ii=function(){return e},e}function li(){var e=Object(h.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return li=function(){return e},e}function ui(){var e=Object(h.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n    }\n    lastUpdate\n    deleted\n  }\n"]);return ui=function(){return e},e}function ci(){var e=Object(h.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return ci=function(){return e},e}var di=O()(ci()),si=O()(ui()),pi=O()(li(),di,si),mi=O()(ii(),si),vi=O()(oi(),si),fi=q("DashboardJournalEntry",J),yi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?Lt.a[t]:e<.9?ri.a[t]:qt.a[t]},bi=function(e){var t=e.spentPercentage,n=e.height;return a.a.createElement(d.a,{height:n,bgcolor:yi(t),display:"flex",justifyContent:"flex-start"},a.a.createElement(d.a,{height:"100%",width:"".concat(100*t,"%"),bgcolor:ai.a[400]}))},Ei=function(e){var t,n=e.deptId,o=Object(r.useMemo)((function(){return{deptId:n,where:{department:{eq:n},deleted:!1}}}),[n]),i=Object(kt.d)(pi,{variables:o}),l=i.loading,u=i.error,c=i.data,p=i.subscribeToMore,v=i.fetchMore,f=Object(kt.a)();Object(r.useEffect)((function(){var e=function(){try{return f.readQuery({query:pi,variables:o})}catch(u){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();v({variables:Object(m.a)({},o,{where:Object(m.a)({},(null===o||void 0===o?void 0:o.where)||{},{lastUpdate:{gt:t}})}),updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(V.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(V.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var r=p({document:mi,updateQuery:function(e,t){var r,a,o=t.subscriptionData,i=null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.journalEntryAdded;return!i||i.id!==n&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==n}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(V.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(V.a)([null===o||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.journalEntryAdded]||!1))})}}),a=p({document:vi,updateQuery:function(e,t){var n,r=t.subscriptionData,a=null===r||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.journalEntryUpdated;return a&&f.writeFragment({id:"JournalEntry:".concat(a.id),fragment:si,data:a}),e}});return function(){r(),a()}}),[o,v,f,p,n]);var y=Object(r.useMemo)((function(){return((null===c||void 0===c?void 0:c.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[c]),b=(null===c||void 0===c?void 0:null===(t=c.department)||void 0===t?void 0:t.name)||"";Object(r.useEffect)((function(){document.title=b}),[b]);var E=ra(),h=Object(r.useCallback)((function(e){E(ur(fi,{fromDept:n}))}),[E,n]),j=(null===c||void 0===c?void 0:c.department)||null,O=Object(r.useMemo)((function(){var e=new Map,t=0;if(j){var n=function(){if(j.budget){var e=j.budget.amount;return e.num/e.den}return null}();e.set(j.id,{name:j.name,spent:0,budget:n});var r=!0,a=!1,o=void 0;try{for(var i,l=j.descendants[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var u=i.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;t+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(I){a=!0,o=I}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}var p=0,m=!0,v=!1,f=void 0;try{for(var b,E=y[Symbol.iterator]();!(m=(b=E.next()).done);m=!0){var h=b.value,O=e.get(h.department.id),g=h.total.num/h.total.den;h.type===hn.Credit?(p-=g,O.spent-=g):(p+=g,O.spent+=g)}}catch(I){v=!0,f=I}finally{try{m||null==E.return||E.return()}finally{if(v)throw f}}var w=function(){if(null===j||void 0===j?void 0:j.budget){var e,n=(null===j||void 0===j?void 0:null===(e=j.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return n.num/n.den}return t}();return{totalRemaining:Kt()(w-p).format("$0,0.00"),budget:Kt()(w).format("$0,0.00"),spentToBudgetRatio:p/w,deptReport:e}}),[y,j]),g=O.totalRemaining,w=O.budget,I=O.spentToBudgetRatio,_=O.deptReport,x=Object(r.useMemo)((function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=function(){var t=o.value,n=(u=Object(nn.a)(t,2))[0],r=(c=u[1]).budget,i=c.spent,l=c.name;if(n===(null===j||void 0===j?void 0:j.id))return"continue";var s=a.a.createElement(qa.a,{key:n,item:!0,xs:12,md:4,lg:3},a.a.createElement(ei.a,null,a.a.createElement(ti.a,{titleTypographyProps:{noWrap:!0},title:l}),a.a.createElement(ni.a,null,function(){if(null===r)return a.a.createElement(d.a,{color:i>0?qt.a[900]:Lt.a[900],clone:!0},a.a.createElement(zo.a,{variant:"h6"},"Spent: ".concat(Kt()(Math.abs(i)).format("$0,0.00"))));var e=r-i;return a.a.createElement(a.a.Fragment,null,a.a.createElement(d.a,{color:yi(i/r,900),clone:!0},a.a.createElement(zo.a,{variant:"h6"},"".concat(Kt()(e).format("$0,0.00")," Remaining"))),a.a.createElement(zo.a,{variant:"body1"},"of ".concat(Kt()(r).format("$0,0.00"))),a.a.createElement(bi,{spentPercentage:i/r,height:5}))}())));e.push(s)},l=_[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var u,c;i()}}catch(s){n=!0,r=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw r}}return e}),[_,j]);return l?a.a.createElement("p",null,"Loading..."):u?(console.error(u),a.a.createElement("p",null,u.message)):a.a.createElement(d.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},a.a.createElement($o.a,null,a.a.createElement(d.a,{padding:8},a.a.createElement(qa.a,{container:!0,alignItems:"center",justify:"center",spacing:4},a.a.createElement(qa.a,{item:!0},a.a.createElement(sa.a,{variant:"contained",color:"secondary",startIcon:a.a.createElement(Go.a,null),children:"New Entry",onClick:h})),a.a.createElement(qa.a,{item:!0},a.a.createElement(sa.a,{component:s.b,to:"/journal/".concat(n,"/reconcile"),variant:"contained",startIcon:a.a.createElement(Yo.a,null),children:"Reconcile"})),a.a.createElement(qa.a,{item:!0},a.a.createElement(sa.a,{variant:"contained",startIcon:a.a.createElement(Zo.a,null),children:"Reports"})),a.a.createElement(qa.a,{item:!0},a.a.createElement(sa.a,{component:s.b,to:"/journal/".concat(n),variant:"contained",startIcon:a.a.createElement(Xo.a,null),children:"Journal"})))),a.a.createElement(d.a,{flexGrow:1,overflow:"auto"},a.a.createElement(qa.a,{justify:"center",container:!0,spacing:2},a.a.createElement(qa.a,{item:!0,xs:12},a.a.createElement(zo.a,{align:"center",variant:"h3"},b),a.a.createElement(d.a,{color:yi(I)},a.a.createElement(zo.a,{align:"center",variant:"h4"},"".concat(g," Remaining"))),a.a.createElement(zo.a,{align:"center",variant:"subtitle1"},"of ".concat(w)),a.a.createElement(bi,{spentPercentage:I,height:10})),x)),a.a.createElement(Ao,{entryUpsertId:fi,fromDept:n})))};function hi(){var e=Object(h.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return hi=function(){return e},e}var ji=O()(hi()),Oi=function(e){var t=Object(kt.d)(ji),n=t.loading,o=t.error,i=t.data,l=Object(r.useState)(null),u=Object(nn.a)(l,2),c=u[0],p=u[1],m=(null===i||void 0===i?void 0:i.departments)||[],v=Object(r.useMemo)((function(){var e=[],t=new Set,n=!0,r=!1,a=void 0;try{for(var o,i=m[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;"Business"===l.parent.__typename&&e.push(l),l.virtualRoot&&t.add(l.id)}}catch(u){r=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return{rootDepts:e,virtualRoots:t}}),[m]),f=v.rootDepts,y=v.virtualRoots,b=Object(r.useMemo)((function(){var e=[];if(c&&y.has(c)){var t=!0,n=!1,r=void 0;try{for(var a,o=m[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var i=a.value;i.parent.id===c&&e.push(i)}}catch(l){n=!0,r=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}return e}),[y,c,m]);Object(r.useEffect)((function(){document.title="Select Department"}));var E=Object(r.useCallback)((function(e){var t;p((null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||null)}),[p]);if(n)return a.a.createElement("p",null,"Loading...");if(o)return a.a.createElement("p",null,o.message);var h=b.length>0;return a.a.createElement(d.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},a.a.createElement($o.a,null,a.a.createElement(d.a,{padding:4,clone:!0},a.a.createElement(zo.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),a.a.createElement(d.a,{minWidth:"250px !important",clone:!0},a.a.createElement(Eo.a,{variant:"filled"},a.a.createElement(ho.a,null,"Department"),a.a.createElement(Oo.a,{value:c,onChange:E,autoWidth:!0},f.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete t.component,delete t.to),a.a.createElement(go.a,t)}))))),h&&a.a.createElement(d.a,{pt:2},a.a.createElement(d.a,{pt:2,minWidth:"250px !important",clone:!0},a.a.createElement(Eo.a,{variant:"filled"},a.a.createElement(ho.a,null,"Sub Department"),a.a.createElement(Oo.a,{autoWidth:!0},b.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return a.a.createElement(go.a,t)}))))))))},gi=function(e){var t=Object(B.f)().id;return t?a.a.createElement(Ei,{deptId:t}):a.a.createElement("div",null,"Error: No Dept ID!")},wi=function(e){var t=Object(B.f)().id;return a.a.createElement(Wo,{mode:aa.View,deptId:t})},Ii=function(e){var t=Object(B.f)().id;return a.a.createElement(Wo,{mode:aa.Reconcile,deptId:t})},_i=function(e){return a.a.createElement(B.c,null,a.a.createElement(B.a,{exact:!0,path:"/",component:Oi}),a.a.createElement(B.a,{exact:!0,path:"/department/:id",component:gi}),a.a.createElement(B.a,{exact:!0,path:"/journal",component:Wo}),a.a.createElement(B.a,{exact:!0,path:"/journal/:id",component:wi}),a.a.createElement(B.a,{exact:!0,path:"/journal/:id/reconcile",component:Ii}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement((function(){return a.a.createElement(r.Fragment,null,a.a.createElement(c.a,null),a.a.createElement(l.a,{store:jt},a.a.createElement(u.a,{client:k},a.a.createElement(s.a,null,a.a.createElement(d.a,{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},a.a.createElement(_i,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[4985,1,2]]]);
//# sourceMappingURL=main.c46bb640.chunk.js.map