{"version":3,"sources":["apollo/inMemoryCache.ts","apollo/localStateInI.ts","apollo/schema/upsertJournalEntry.gql.ts","redux/reducers/journalEntryUpserts.ts","apollo/typeDefs.ts","apollo/resolvers.ts","apollo/link.ts","apollo/apollo.ts","utils/uuid.ts","redux/actionTypes/journalEntryUpsert.ts","redux/reducers/utils.ts","redux/actionTypes/tableRow.ts","redux/reducers/tableRows.ts","redux/actionTypes/journal.ts","redux/reducers/journal.ts","redux/reducers/root.ts","redux/store.ts","redux/actions/tableRow.ts","components/Journal/Table/Cells/cellsReduxIni.ts","redux/selectors/tableRows.ts","components/Journal/Table/Header.tsx","components/Journal/Table/Cells/TransactionDate.tsx","components/Journal/Table/Cells/Department.tsx","components/Journal/Table/Cells/Category.tsx","components/Journal/Table/Cells/Source.tsx","components/Journal/Table/Cells/PaymentMethod.tsx","components/Journal/Table/Cells/Description.tsx","components/Journal/Table/Cells/Total.tsx","components/Journal/Table/JournalEntries.gql.ts","components/Journal/Table/Cells/Reconciled.tsx","apollo/graphTypes.ts","redux/hooks.ts","components/Journal/Table/Entry.tsx","components/Journal/Table/Body.tsx","components/Journal/Upsert/EntryFields/Type.tsx","components/Journal/Upsert/EntryFields/DateEntry.tsx","components/Journal/Upsert/upsertEntry.gql.ts","components/Journal/Upsert/EntryFields/Department.tsx","components/Journal/Upsert/EntryFields/Category.tsx","components/Journal/Upsert/EntryFields/Source.tsx","components/Journal/Upsert/EntryFields/PaymentMethod.tsx","components/Journal/Upsert/EntryFields/Description.tsx","components/Journal/Upsert/EntryFields/Total.tsx","components/Journal/Upsert/EntryFields/Reconcile.tsx","components/Journal/Upsert/UpsertDialog.tsx","components/Journal/Upsert/submit.ts","components/Journal/Upsert/UpsertEntry.tsx","redux/selectors/journalEntryUpsert.ts","redux/actions/journalEntryUpsert.ts","components/Dashboard/ReportData.gql.ts","components/Dashboard/Dashboard.tsx","components/Journal/Table/Journal.tsx","components/TopNav.tsx","Routes.tsx","serviceWorker.js","index.js","App.tsx"],"names":["fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","inMemoryCache","InMemoryCache","addTypename","writeData","data","paginate","skip","limit","sortBy","upsertTransactionLocal","lc_journalEntryUpserts","gql","SubmitStatus","resolvers","batchHttpLink","BatchHttpLink","uri","credentials","wsLink","WebSocketLink","window","location","host","options","reconnect","link","ApolloLink","from","onError","graphQLErrors","networkError","forEach","message","locations","path","console","error","log","split","query","def","getMainDefinition","kind","operation","ApolloClient","cache","typeDefs","uuid","require","namespace","hostname","DNS","CREATE","CANCEL","CLEAR","SET_SUBMIT_STATUS","SET_SUBMIT_ERROR","CLEAR_SUBMIT_ERROR","SET_DATE_INPUT","CLEAR_DATE_INPUT","SET_DATE_VALUE","CLEAR_DATE_VALUE","SET_DATE_ERROR","CLEAR_DATE_ERROR","SET_DEPT_INPUT","CLEAR_DEPT_INPUT","SET_DEPT_VALUE","CLEAR_DEPT_VALUE","SET_DEPT_ERROR","CLEAR_DEPT_ERROR","SET_DEPT_OPEN","SET_TYPE_VALUE","SET_TYPE_ERROR","CLEAR_TYPE_ERROR","SET_CAT_INPUT","CLEAR_CAT_INPUT","SET_CAT_VALUE","CLEAR_CAT_VALUE","SET_CAT_ERROR","CLEAR_CAT_ERROR","SET_CAT_OPEN","SET_SRC_TYPE","SET_SRC_INPUT","CLEAR_SRC_INPUT","SET_SRC_VALUE","CLEAR_SRC_VALUE","SET_SRC_ERROR","CLEAR_SRC_ERROR","SET_SRC_OPEN","SET_PAY_METHOD_VALUE","CLEAR_PAY_METHOD_VALUE","SET_PAY_METHOD_ERROR","CLEAR_PAY_METHOD_ERROR","SET_DSCRPT_VALUE","CLEAR_DSCRPT_VALUE","SET_TOTAL_INPUT","CLEAR_TOTAL_INPUT","SET_TOTAL_VALUE","CLEAR_TOTAL_VALUE","SET_TOTAL_ERROR","CLEAR_TOTAL_ERROR","SET_RECONCILED_VALUE","CLEAR_RECONCILED_VALUE","InputValue","nullValue","input","value","this","reduceOneById","state","action","id","idKey","reducer","i","len","length","entry","newEntry","slice","values","combineReducers","type","payload","entryId","date","trimStart","getTime","department","Object","assign","open","fromDept","category","srcType","source","isEqual","paymentMethod","description","total","reconciled","journalEntryUpsert","upsertId","submit","status","NotSubmitted","SET_INDEX","SET_DEFAULT_INDEX","SET_NAME","SET_DEFAULT_NAME","SET_WIDTH","SET_DEFAULT_WIDTH","COLLAPSE","EXPAND","HIDE","SHOW","RESTORE_DEFAULTS","TableCell","ini","rowId","index","name","width","collapsed","hidden","tableCell","defaultState","iterateCellByIndex","row","unIndexedCells","indexedCells","Map","nextIndex","key","hasOwnProperty","cell","has","get","set","push","tableRow","curIndex","newIndex","newState","curCell","newCell","OPEN_PAB","CLOSE_PAB","pab","journal","pabs","pabId","undefined","curPAB","newPAB","root","journalEntryUpserts","tableRows","curRow","newRow","store","createStore","composeWithDevTools","applyMiddleware","thunk","create","ROW_ID","DATE_ID","dispatch","DEPT_ID","CATEGORY_ID","SRC_ID","PAY_METHOD_ID","DSCRPT_ID","TOTAL_ID","RECONCILED_ID","getIndexedCells","getCell","cellId","Header","props","cellFormats","useSelector","shallowEqual","cells","useMemo","map","Box","minWidth","flexBasis","flexGrow","order","clone","component","children","TableHead","display","flexDirection","justifyContent","TableRow","TransactionDate","entryDate","textColor","cellFormat","moment","className","textOverflow","whiteSpace","overflow","format","Department","capitalCase","Category","Source","sourceName","__typename","first","last","bizName","deptName","PaymentMethod","method","Description","Total","n","num","d","den","faction","Fraction","numeral","toString","JOURNAL_ENTRY_FRAGMENT","JOURNAL_ENTRIES","JOURNAL_ENTRY_ADDED_SUB","JOURNAL_ENTRY_UPDATED_SUB","CacheControlScope","FilterType","JournalEntrySourceType","JournalEntryType","Lc_JournalEntryUpsertSubmitStatus","Lc_JournalEntryUpsertType","SortDirection","RECONCILE","Reconciled","mode","removeReconciled","useState","checked","setChecked","useMutation","mutate","onChange","useCallback","event","a","async","variables","checkboxProps","inputProps","alignItems","JournalMode","Reconcile","Checkbox","globalDebounceDispatchState","dispatchId","dispatchQueue","ms","useDebounceDispatch","global","useDispatch","debounceDispatchState","debouchDispatch","setTimeout","batch","clear","Symbol","styles","makeStyles","theme","createStyles","positive","color","green","negative","red","Entry","classes","client","useApolloClient","journalEntry","style","deptId","updateEntry","onDoubleClick","skeleton","Skeleton","variant","height","Credit","hover","Body","parentWidth","where","eq","reduce","Math","max","useQuery","updateQuery","fetchMore","subscribeToMore","useEffect","cacheResults","readQuery","journalEntries","gt","Date","lastUpdate","toISOString","prev","fetchMoreResult","addUnSub","document","subscriptionData","journalEntryAdded","ancestors","every","dept","updateUnSub","journalEntryUpdated","writeFragment","fragment","View","entries","filter","deleted","sort","b","iteCount","entryRow","itemKey","TableBody","itemCount","itemSize","overscanCount","NULLISH","validate","Type","label","isSubmitting","useFormikContext","useField","field","meta","helpers","touched","setValue","setTouched","toggleButtonGroupProps","size","exclusive","disabled","Promise","resolve","control","pl","ToggleButtonGroup","ToggleButton","Tooltip","arrow","placement","title","Debit","FormControl","FormControlLabel","labelPlacement","FormHelperText","inputMode","keyboardButtonProps","tabIndex","isValid","DateField","inputVariant","autoFocus","calOpen","useRef","InputProps","onBlur","current","onOpen","onClose","min","dataPickerProps","helperText","animateYearScrolling","disableToolbar","disableFuture","margin","initialFocusedDate","autoOk","placeholder","KeyboardButtonProps","utils","MomentUtils","DEPT_ENTRY_OPT_FRAGMENT","CAT_ENTRY_OPT_FRAGMENT","SRC_ENTRY_PERSON_OPT_FRAGMENT","SRC_ENTRY_DEPT_OPT_FRAGMENT","SRC_ENTRY_BIZ_OPT_FRAGMENT","PAY_METHOD_ENTRY_OPT_FRAGMENT","DEPT_OPTS_QUERY","getOptionLabel","opt","renderTags","getTagProps","lastIndex","isLastIndex","Chip","ChevronRight","fontSize","fromParent","loading","gqlError","depts","deptOpts","hasFocus","setHasFocus","inputValue","setInputValue","some","parent","deptValue","onBlurField","idDeptMap","idDepts","parentDept","unshift","disableTextInput","renderInput","params","TextField","onFocus","Array","isArray","onInputChange","reason","autoCompleteProps","forcePopupIcon","autoSelect","multiple","JSON","stringify","Autocomplete","CAT_OPTS_QUERY","entryType","fowardProps","categories","catOpts","catValue","idCatMap","idCats","cat","parentCat","catId","SRC_ENTRY_OPTS_QUERY","isFreeSoloOpt","Business","Person","personName","filterOptions","regex","RegExp","test","srcValue","parsedName","parseName","firstName","trim","lastName","fieldValue","searchedName","isBiz","businesses","bizOpt","departments","deptOpt","people","freeSolo","persist","srcValueIndex","formattedSrcStrs","str","namecase","formattedStr","join","charAt","toUpperCase","substring","toLowerCase","PAY_METHOD_ENTRY_OPTS","formControlProps","hasError","paymentMethods","MenuItem","substr","required","InputLabel","Select","textFieldProps","Number","parseFloat","isNaN","step","startAdornment","InputAdornment","position","customProps","DELETE_JOURNAL_ENTRY","UpsertDialog","isUpdate","setOpen","formikProps","deleteEntry","submitted","errors","generalError","general","submissionError","submission","isTypeSet","submitForm","resetForm","setSubmitting","setStatus","useTheme","dialogContent","Typography","errorIsString","CircularProgress","entryMargin","spacing","Fragment","DateEntry","padding","marginTop","marginLeft","onClickAddAndNew","then","onClickCancel","onClickDelete","createInitialValues","Dialog","fullWidth","maxWidth","PaperProps","onSubmit","handleSubmit","DialogTitle","flexWrap","DialogContent","dividers","DialogActions","Button","startIcon","Delete","onClick","Add","Queue","Cancel","ADD_PERSON","ADD_BUSINESS","ADD_JOURNAL_ENTRY","UPDATE_JOURNAL_ENTRY","getSourceType","sourceValue","getSource","formikHelpers","sourceType","mutation","fields","result","addPerson","Error","newSourceField","setFieldValue","addBusiness","UpsertType","ENTRY_UPDATE_VALUES","initialValues","UpsertEntry","initialValuesOverride","sourceVal","src","ancestorDeptQueue","ancestor","bizAncestor","ancestorDepts","indexOf","initialStatus","args","dateField","totalField","isSame","toFixed","keys","enableReinitialize","getEntry","getSubmitStatus","getCatValue","CATEGORY_TYPE_VALIDATION","setType","getState","selectors","clearCat","journalEntryCategory","clearCatValue","upsertActions","setDateValue","setDeptValue","setCatValue","setSrcType","setSrcValue","setPayMethodValue","setDscrptValue","setTotalInput","inputNum","setTotalError","TypeError","formattedInput","char","parseInt","setTotalValue","setReconciledValue","GET_REPORT_DATA_DEPT_FRAGMENT","GET_REPORT_DATA_ENTRY_FRAGMENT","GET_REPORT_DATA","ADD_ENTRY_ID","colorMeter","percentSpent","shade","orange","BudgetMeter","spentPercentage","bgcolor","grey","DEPT_FOR_UPSERT_ADD","Dashboard","addEntryOpen","setAddEntryOpen","deptForUpsertAdd","submitStatus","readFragment","payMethodId","srcTypeName","srcId","deptReport","subDeptBudgetAg","budget","amount","spent","descendants","subDept","subBudgetDec","deptReportObj","entryTotal","budgetDec","totalRemaining","spentToBudgetRatio","subDeptCards","card","Grid","item","xs","md","lg","Card","CardHeader","titleTypographyProps","noWrap","CardContent","abs","onClickAddEntry","Container","container","justify","Link","to","align","Journal","upsertOpen","setUpsertOpen","updateEntryId","setUpdateEntryId","addEntry","autoSizerChildren","overflowX","Table","bottom","right","Fab","aria-label","DEPTS_FOR_NAV","TopNav","rootDepts","virtualRoots","Set","virtualRoot","add","subDepts","target","showSubDepts","autoWidth","pt","DashBoardRender","useParams","JournalViewRender","JournalReconcileRender","Routes","exact","Boolean","match","ReactDOM","render","CssBaseline","top","left","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.9ef0a44b.chunk.js","sourcesContent":["import { InMemoryCache, IntrospectionFragmentMatcher } \n  from 'apollo-cache-inmemory';\n\nimport localState from './localStateInI';\nimport introspectionQueryResultData from './fragmentTypes.json';\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData\n});\n\nconst inMemoryCache = new InMemoryCache({fragmentMatcher, addTypename:false});\n\ninMemoryCache.writeData({data:{...localState}});\n\nexport default inMemoryCache;","export default {\n  paginate:{\n    skip:0,\n    limit:1000\n  },\n  sortBy:[],\n  upsertTransactionLocal:null,\n  lc_journalEntryUpserts:[]\n};","import gql from 'graphql-tag';\n\nexport default gql`\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n`;","import {combineReducers} from \"redux\";\nimport * as _ from  \"lodash\"; \nimport isEqual from \"lodash.isequal\";\n\nimport {JournalEntrySourceType, JournalEntrySourceInput, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {\n  \n  Create, CREATE, Cancel, CANCEL, Clear, CLEAR,\n\n  SET_SUBMIT_STATUS, SetSubmitStatus, SET_SUBMIT_ERROR, SetSubmitError, \n  CLEAR_SUBMIT_ERROR, ClearSubmitError,\n\n  SET_TYPE_VALUE, SetTypeValue, SET_TYPE_ERROR,SetTypeError,\n  CLEAR_TYPE_ERROR, ClearTypeError,\n  \n  SetDateInput, SET_DATE_INPUT, ClearDateInput, CLEAR_DATE_INPUT,\n  SetDateValue, SET_DATE_VALUE, ClearDateValue, CLEAR_DATE_VALUE,\n  SetDateError, SET_DATE_ERROR, ClearDateError, CLEAR_DATE_ERROR,\n  \n  SetDeptInput, SET_DEPT_INPUT, ClearDeptInput, CLEAR_DEPT_INPUT,\n  SetDeptValue, SET_DEPT_VALUE, ClearDeptValue, CLEAR_DEPT_VALUE,\n  SetDeptError, SET_DEPT_ERROR, ClearDeptError, CLEAR_DEPT_ERROR,\n  SetDeptOpen , SET_DEPT_OPEN,\n\n  SET_CAT_INPUT, SetCatInput, CLEAR_CAT_INPUT, ClearCatInput, SET_CAT_VALUE,\n  SetCatValue, CLEAR_CAT_VALUE, ClearCatValue, SET_CAT_ERROR, SetCatError,\n  CLEAR_CAT_ERROR, ClearCatError, SET_CAT_OPEN, SetCatOpen,\n  \n  SetSrcType, SET_SRC_TYPE,\n  SetSrcInput, SET_SRC_INPUT, ClearSrcInput, CLEAR_SRC_INPUT,\n  SetSrcValue, SET_SRC_VALUE, ClearSrcValue, CLEAR_SRC_VALUE,\n  SetSrcError, SET_SRC_ERROR, ClearSrcError, CLEAR_SRC_ERROR,\n  SetSrcOpen , SET_SRC_OPEN,\n\n  SetPayMethodValue, SET_PAY_METHOD_VALUE, ClearPayMethodValue, \n  CLEAR_PAY_METHOD_VALUE, SET_PAY_METHOD_ERROR, SetPayMethodError,\n  CLEAR_PAY_METHOD_ERROR, ClearPayMethodError,\n\n  SET_DSCRPT_VALUE, SetDscrptValue, CLEAR_DSCRPT_VALUE, ClearDscrptValue,\n\n  SET_TOTAL_INPUT, SetTotalInput, CLEAR_TOTAL_INPUT, ClearTotalInput,\n  SET_TOTAL_VALUE, SetTotalValue, CLEAR_TOTAL_VALUE, ClearTotalValue,\n  SET_TOTAL_ERROR, SetTotalError, CLEAR_TOTAL_ERROR, ClearTotalError,\n\n  SET_RECONCILED_VALUE, SetReconciledValue,\n  CLEAR_RECONCILED_VALUE, ClearReconciledValue\n\n} from \"../actionTypes/journalEntryUpsert\";\nimport {InputValue, reduceOneById} from \"./utils\";\n\ntype Actions = Create | Cancel | Clear |\n  SetSrcInput | SetDateInput |  ClearDateInput | SetDateValue | ClearDateValue |\n  SetDateError | ClearDateError | SetSrcInput | ClearSrcInput | SetSrcValue |\n  ClearSrcValue | SetSrcError | ClearSrcError | SetSrcOpen | SetDeptInput |\n  ClearDeptInput | SetDeptValue | ClearDeptValue | SetDeptError |\n  ClearDeptError | SetDeptOpen | SetPayMethodValue | ClearPayMethodValue |\n  SetTotalInput | ClearTotalInput | SetTotalValue | ClearTotalValue |\n  SetTotalError | ClearTotalError | SetSubmitStatus | SetSubmitError | \n  ClearSubmitError | SetSrcType | SetPayMethodError | ClearPayMethodError |\n  SetDscrptValue | ClearDscrptValue | SetReconciledValue |\n  ClearReconciledValue | SetCatInput | ClearCatInput | SetCatValue |\n  ClearCatValue | SetCatError | ClearCatError | SetCatOpen | SetTypeValue |\n  SetTypeError | ClearTypeError;\n\n\nconst type = (state = new InputValue<JournalEntryType, null>(null)\n  , action:Actions):InputValue<JournalEntryType, null>  =>\n{\n\n  switch(action.type) {\n    case SET_TYPE_VALUE:\n      return state.value === action.payload.type ?\n        state : {...state, value:action.payload.type};\n    case SET_TYPE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TYPE_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\nconst date = (state = new InputValue<Date, null>(null), action:Actions)\n  :InputValue<Date, null> => \n{\n\n  switch(action.type) {\n    case SET_DATE_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DATE_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DATE_VALUE:\n      return state.value?.getTime() === action.payload.value.getTime() ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DATE_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DATE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DATE_ERROR:\n      return state.error ? {...state, error:null} : state;\n    default:\n      return state;\n  }\n\n}\n\nconst department = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case CREATE:\n      if(action.payload.fromDept) {\n        return {...state, value:action.payload.fromDept};\n      }\n      return state;\n    case SET_DEPT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DEPT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DEPT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DEPT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DEPT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DEPT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_DEPT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\n\nconst category = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_CAT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_CAT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_CAT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_CAT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_CAT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_CAT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_CAT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\nconst source = (state = Object.assign(\n  new InputValue<JournalEntrySourceInput, null>(null),{open:false}),\n  action:Actions):InputValue<JournalEntrySourceInput, null> & {open:boolean} => \n{\n\n  switch(action.type) {\n    case SET_SRC_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_SRC_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_SRC_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_SRC_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_SRC_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SRC_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_SRC_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n\n}\n\nconst paymentMethod = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_PAY_METHOD_VALUE:\n      return action.payload.value && state.value !== action.payload.value ?\n        {...state, value:action.payload.value} : state;\n    case CLEAR_PAY_METHOD_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_PAY_METHOD_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_PAY_METHOD_ERROR:\n        return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst description = (state = new InputValue<string, null>(null), \n  action:Actions ):InputValue<string, null> => \n{\n\n  switch(action.type) {\n    case SET_DSCRPT_VALUE:{\n      const value = action.payload.value.trimStart();\n      return !value || state.value === value ? state : {...state, value};\n    }\n    case CLEAR_DSCRPT_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst total = (state = new InputValue<RationalInput, null>(null), \n  action:Actions ):InputValue<RationalInput, null> => \n{\n\n  switch(action.type) {\n    case SET_TOTAL_INPUT:\n      return state.input === action.payload.input ?\n        state : {...state, input:action.payload.input};\n    case CLEAR_TOTAL_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_TOTAL_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_TOTAL_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_TOTAL_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TOTAL_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst reconciled = (state = new InputValue<boolean, false>(false), \n  action:Actions ):InputValue<boolean, false> => \n{\n\n  switch(action.type) {\n    case SET_RECONCILED_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_RECONCILED_VALUE:\n      return state.value === false ? state : {...state, value:false};\n    default:\n      return state;\n  }\n  \n}\n\nconst values = combineReducers({\n  id:(state:string | null = null, action:Actions) => action.type === CREATE ?\n    (action.payload.entryId || null) : state,\n  type,\n  date,\n  department,\n  category,\n  srcType:(state:JournalEntrySourceType | null = null, action:Actions) => \n    action.type === SET_SRC_TYPE ? action.payload.srcType : state,\n  source,\n  paymentMethod,\n  description,\n  total,\n  reconciled\n});\n\nexport enum SubmitStatus {\n  NotSubmitted,\n  Submitting,\n  Submitted,\n}\n\nconst submit = (state = {\n    status:SubmitStatus.NotSubmitted,\n    error:null as null | Error,\n  }, action:Actions) => \n{\n\n  switch(action.type) {\n    case SET_SUBMIT_STATUS:\n      return state.status === action.payload.status \n        ? state : {...state, status:action.payload.status};\n    case SET_SUBMIT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SUBMIT_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\n\nconst journalEntryUpsert = combineReducers({\n  id:(state:string = \"\", action:Actions) => \n    action.type === CREATE ? action.payload.upsertId : state,\n  values,\n  fromDept:(state:string = \"\", action:Actions):string => {\n    if(action.type === CREATE && action.payload.fromDept) {\n      return action.payload.fromDept;\n    }\n    return state;\n  },\n  submit\n});\n\nexport type JournalEntryUpsert = ReturnType<typeof journalEntryUpsert>;\n\nexport const journalEntryUpserts = (state:JournalEntryUpsert[] = [],\n  action:Actions):JournalEntryUpsert[] => \n{\n\n  switch(action.type) {\n    \n    case CREATE:\n      return [...state, journalEntryUpsert(undefined, action)];\n    case CANCEL:\n    case CLEAR:{\n      const id = action.payload.upsertId;\n      for(let i = 0, len = state.length; i < len; i++){\n        if(state[i].id === id){\n          return [\n            ...state.slice(0, i),\n            ...state.slice(i + 1)\n          ];\n        }\n      }\n      return state;\n    }\n    \n    case SET_TYPE_VALUE:\n    case SET_TYPE_ERROR:\n    case CLEAR_TYPE_ERROR:\n    case SET_DATE_INPUT:\n    case CLEAR_DATE_INPUT:\n    case SET_DATE_VALUE:\n    case CLEAR_DATE_VALUE:\n    case SET_DATE_ERROR:\n    case CLEAR_DATE_ERROR:\n    case SET_DEPT_INPUT:\n    case SET_DEPT_VALUE:\n    case SET_DEPT_ERROR:\n    case SET_DEPT_OPEN:\n    case CLEAR_DEPT_INPUT:\n    case CLEAR_DEPT_VALUE:\n    case CLEAR_DEPT_ERROR:\n    case SET_CAT_INPUT:\n    case CLEAR_CAT_INPUT:\n    case SET_CAT_VALUE:\n    case CLEAR_CAT_VALUE:\n    case SET_CAT_ERROR:\n    case CLEAR_CAT_ERROR:\n    case SET_CAT_OPEN:\n    case SET_SRC_TYPE:\n    case SET_SRC_INPUT:\n    case CLEAR_SRC_INPUT:\n    case SET_SRC_VALUE:\n    case CLEAR_SRC_VALUE:\n    case SET_SRC_ERROR:\n    case CLEAR_SRC_ERROR:\n    case SET_SRC_OPEN:\n    case SET_PAY_METHOD_VALUE:\n    case CLEAR_PAY_METHOD_VALUE:\n    case SET_DSCRPT_VALUE:\n    case CLEAR_DSCRPT_VALUE:\n    case SET_TOTAL_INPUT:\n    case CLEAR_TOTAL_INPUT:\n    case SET_TOTAL_VALUE:\n    case CLEAR_TOTAL_VALUE:\n    case SET_TOTAL_ERROR:\n    case CLEAR_TOTAL_ERROR:\n    case SET_SUBMIT_STATUS:\n    case SET_SUBMIT_ERROR:\n    case CLEAR_SUBMIT_ERROR:\n    case SET_PAY_METHOD_ERROR:\n    case CLEAR_PAY_METHOD_ERROR:\n    case SET_RECONCILED_VALUE:\n    case CLEAR_RECONCILED_VALUE:\n      return reduceOneById(state, action, \n        action.payload.upsertId, \"id\", journalEntryUpsert);\n    default:\n      return state;\n  }\n\n}","\nimport {DocumentNode} from 'graphql';\n\nimport upsertJournalEntry from './schema/upsertJournalEntry.gql';\n\nexport default <DocumentNode[]>[\n  upsertJournalEntry\n];","import {Resolvers} from \"apollo-client\";\n\nconst resolvers:Resolvers = {};\n\nexport default resolvers;","import { BatchHttpLink } from 'apollo-link-batch-http';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { ApolloLink } from 'apollo-link';\nimport { onError } from 'apollo-link-error';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst batchHttpLink = new BatchHttpLink({\n  uri: '/graphql',\n  credentials: 'same-origin',\n});\n\nconst wsLink = new WebSocketLink({\n  uri: `ws://${window.location.host}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\nconst link = ApolloLink.from([\n  onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n      graphQLErrors.forEach(({ message, locations, path }) =>\n        console.error(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      );\n    if (networkError) console.log(`[Network error]: ${networkError}`);\n  }),\n  ApolloLink.split(({query}) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition'\n      && def.operation === 'subscription';\n  },wsLink, batchHttpLink)\n\n]);\n\nexport default link;","import { ApolloClient } from 'apollo-client';\n\nimport cache from './inMemoryCache';\nimport typeDefs from './typeDefs';\nimport resolvers from './resolvers';\nimport link from './link';\n\nexport default new ApolloClient({\n  link,\n  cache,\n  typeDefs,\n  resolvers\n});","import {v4 as randUUID} from 'uuid';\nconst uuid = require('uuid/v5');\nconst namespace = uuid(window.location.hostname, uuid.DNS);\nexport {namespace, uuid, randUUID};","import {Action} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\n\ntype SetInputAction<A> = Action<A, {upsertId:string, input:string}>;\ntype SetValueAction<A, T> = Action<A, {upsertId:string, value:T}>;\ntype SetErrorAction<A> = Action<A, {upsertId:string, error:Error}>;\ntype ClearAction<A> = Action<A, {upsertId:string}>;\n\n// Upsert Life cycle\nexport const CREATE = \"journalEntryUpsert/CREATE\";\nexport type Create = Action<typeof CREATE, {upsertId:string, entryId?:string,\n  fromDept?:string}>;\n\nexport const CANCEL = \"journalEntryUpsert/CANCEL\";\nexport type Cancel = Action<typeof CANCEL, {upsertId:string}>;\n\nexport const CLEAR = \"journalEntryUpsert/CLEAR\";\nexport type Clear = ClearAction<typeof CLEAR>;\n\n// Submit\nexport const SET_SUBMIT_STATUS = \"journalEntryUpsert/SUBMIT\";\nexport type SetSubmitStatus = \n  Action<typeof SET_SUBMIT_STATUS, {upsertId:string, status:SubmitStatus}>;\n\nexport const SET_SUBMIT_ERROR = \"journalEntryUpsert/SET_SUBMIT_ERROR\";\nexport type SetSubmitError = \n  Action<typeof SET_SUBMIT_ERROR, {upsertId:string, error:Error}>;\n\nexport const CLEAR_SUBMIT_ERROR = \"journalEntryUpsert/CLEAR_SUBMIT_ERROR\";\nexport type ClearSubmitError = \n  Action<typeof CLEAR_SUBMIT_ERROR, {upsertId:string}>;\n\n// Date\nexport const SET_DATE_INPUT = \"journalEntryUpsert/SET_DATE_INPUT\";\nexport type SetDateInput = SetInputAction<typeof SET_DATE_INPUT>;\n\nexport const CLEAR_DATE_INPUT = \"journalEntryUpsert/CLEAR_DATE_INPUT\";\nexport type ClearDateInput = ClearAction<typeof CLEAR_DATE_INPUT>;\n\nexport const SET_DATE_VALUE = \"journalEntryUpsert/SET_DATE_VALUE\";\nexport type SetDateValue = SetValueAction<typeof SET_DATE_VALUE, Date>;\n\nexport const CLEAR_DATE_VALUE = \"journalEntryUpsert/CLEAR_DATE_VALUE\";\nexport type ClearDateValue = ClearAction<typeof CLEAR_DATE_VALUE>;\n\nexport const SET_DATE_ERROR = \"journalEntryUpsert/SET_DATE_ERROR\";\nexport type SetDateError = SetErrorAction<typeof SET_DATE_ERROR>;\n\nexport const CLEAR_DATE_ERROR = \"journalEntryUpsert/CLEAR_DATE_ERROR\";\nexport type ClearDateError = ClearAction<typeof CLEAR_DATE_ERROR>;\n\n// Department\nexport const SET_DEPT_INPUT = \"journalEntryUpsert/SET_DEPT_INPUT\";\nexport type SetDeptInput = SetInputAction<typeof SET_DEPT_INPUT>;\n\nexport const CLEAR_DEPT_INPUT = \"journalEntryUpsert/CLEAR_DEPT_INPUT\";\nexport type ClearDeptInput = ClearAction<typeof CLEAR_DEPT_INPUT>;\n\nexport const SET_DEPT_VALUE = \"journalEntryUpsert/SET_DEPT_VALUE\";\nexport type SetDeptValue = SetValueAction<typeof SET_DEPT_VALUE, string>;\n\nexport const CLEAR_DEPT_VALUE = \"journalEntryUpsert/CLEAR_DEPT_VALUE\";\nexport type ClearDeptValue = ClearAction<typeof CLEAR_DEPT_VALUE>;\n\nexport const SET_DEPT_ERROR = \"journalEntryUpsert/SET_DEPT_ERROR\";\nexport type SetDeptError = SetErrorAction<typeof SET_DEPT_ERROR>;\n\nexport const CLEAR_DEPT_ERROR = \"journalEntryUpsert/CLEAR_DEPT_ERROR\";\nexport type ClearDeptError = ClearAction<typeof CLEAR_DEPT_ERROR>;\n\nexport const SET_DEPT_OPEN = \"journalEntryUpsert/SET_DEPT_OPEN\";\nexport type SetDeptOpen = \n  Action<typeof SET_DEPT_OPEN, {upsertId:string, open:boolean}>;\n\n// Type\nexport const SET_TYPE_VALUE = \"journalEntryUpsert/SET_TYPE_VALUE\";\nexport type SetTypeValue = Action<typeof SET_TYPE_VALUE,{upsertId:string,\n  type:JournalEntryType}>;\n\nexport const SET_TYPE_ERROR = \"journalEntryUpsert/SET_TYPE_ERROR\";\nexport type SetTypeError = SetErrorAction<typeof SET_TYPE_ERROR>;\n\nexport const CLEAR_TYPE_ERROR = \"journalEntryUpsert/CLEAR_TYPE_ERROR\";\nexport type ClearTypeError = ClearAction<typeof CLEAR_TYPE_ERROR>;\n\n// Category\nexport const SET_CAT_INPUT = \"journalEntryUpsert/SET_CAT_INPUT\";\nexport type SetCatInput = SetInputAction<typeof SET_CAT_INPUT>;\n\nexport const CLEAR_CAT_INPUT = \"journalEntryUpsert/CLEAR_CAT_INPUT\";\nexport type ClearCatInput = ClearAction<typeof CLEAR_CAT_INPUT>;\n\nexport const SET_CAT_VALUE = \"journalEntryUpsert/SET_CAT_VALUE\";\nexport type SetCatValue = SetValueAction<typeof SET_CAT_VALUE, string>;\n\nexport const CLEAR_CAT_VALUE = \"journalEntryUpsert/CLEAR_CAT_VALUE\";\nexport type ClearCatValue = ClearAction<typeof CLEAR_CAT_VALUE>;\n\nexport const SET_CAT_ERROR = \"journalEntryUpsert/SET_CAT_ERROR\";\nexport type SetCatError = SetErrorAction<typeof SET_CAT_ERROR>;\n\nexport const CLEAR_CAT_ERROR = \"journalEntryUpsert/CLEAR_CAT_ERROR\";\nexport type ClearCatError = ClearAction<typeof CLEAR_CAT_ERROR>;\n\nexport const SET_CAT_OPEN = \"journalEntryUpsert/SET_CAT_OPEN\";\nexport type SetCatOpen = \n  Action<typeof SET_CAT_OPEN, {upsertId:string, open:boolean}>;\n\n// Source\nexport const SET_SRC_TYPE = \"journalEntryUpsert/SET_SRC_TYPE\";\nexport type SetSrcType =\n  Action<typeof SET_SRC_TYPE,{upsertId:string, srcType:JournalEntrySourceType}>;\nexport const CLEAR_SRC_TYPE = \"journalEntryUpsert/CLEAR_SRC_TYPE\";\nexport type ClearSrcType = Action<typeof CLEAR_SRC_TYPE,{upsertId:string}>;\n\nexport const SET_SRC_INPUT = \"journalEntryUpsert/SET_SRC_INPUT\";\nexport type SetSrcInput = SetInputAction<typeof SET_SRC_INPUT>;\n\nexport const CLEAR_SRC_INPUT = \"journalEntryUpsert/CLEAR_SRC_INPUT\";\nexport type ClearSrcInput = ClearAction<typeof CLEAR_SRC_INPUT>;\n\nexport const SET_SRC_VALUE = \"journalEntryUpsert/SET_SRC_VALUE\";\nexport type SetSrcValue = SetValueAction<typeof SET_SRC_VALUE, \n  JournalEntrySourceInput>;\n\nexport const CLEAR_SRC_VALUE = \"journalEntryUpsert/CLEAR_SRC_VALUE\";\nexport type ClearSrcValue = ClearAction<typeof CLEAR_SRC_VALUE>;\n\nexport const SET_SRC_ERROR = \"journalEntryUpsert/SET_SRC_ERROR\";\nexport type SetSrcError = SetErrorAction<typeof SET_SRC_ERROR>;\n\nexport const CLEAR_SRC_ERROR = \"journalEntryUpsert/CLEAR_SRC_ERROR\";\nexport type ClearSrcError = ClearAction<typeof CLEAR_SRC_ERROR>;\n\nexport const SET_SRC_OPEN = \"journalEntryUpsert/SET_SRC_OPEN\";\nexport type SetSrcOpen = \n  Action<typeof SET_SRC_OPEN, {upsertId:string, open:boolean}>;\n\n// Payment Method\nexport const SET_PAY_METHOD_VALUE = \"journalEntryUpsert/SET_PAY_METHOD_VALUE\";\nexport type SetPayMethodValue = \n  SetValueAction<typeof SET_PAY_METHOD_VALUE, string>;\nexport const CLEAR_PAY_METHOD_VALUE = \n  \"journalEntryUpsert/CLEAR_PAY_METHOD_VALUE\";\nexport type ClearPayMethodValue = ClearAction<typeof CLEAR_PAY_METHOD_VALUE>;\n\nexport const SET_PAY_METHOD_ERROR = \"journalEntryUpsert/SET_PAY_METHOD_ERROR\";\nexport type SetPayMethodError = SetErrorAction<typeof SET_PAY_METHOD_ERROR>;\nexport const CLEAR_PAY_METHOD_ERROR \n  = \"journalEntryUpsert/CLEAR_PAY_METHOD_ERROR\";\nexport type ClearPayMethodError = ClearAction<typeof CLEAR_PAY_METHOD_ERROR>;\n\n// Description\nexport const SET_DSCRPT_VALUE = \"journalEntryUpsert/SET_DSCRPT_VALUE\";\nexport type SetDscrptValue = SetValueAction<typeof SET_DSCRPT_VALUE, \n  string>;\n\nexport const CLEAR_DSCRPT_VALUE = \"journalEntryUpsert/CLEAR_DSCRPT_VALUE\";\nexport type ClearDscrptValue = ClearAction<typeof CLEAR_DSCRPT_VALUE>;\n\n// Total\nexport const SET_TOTAL_INPUT = \"journalEntryUpsert/SET_TOTAL_INPUT\";\nexport type SetTotalInput = SetInputAction<typeof SET_TOTAL_INPUT>;\n\nexport const CLEAR_TOTAL_INPUT = \"journalEntryUpsert/CLEAR_TOTAL_INPUT\";\nexport type ClearTotalInput = ClearAction<typeof CLEAR_TOTAL_INPUT>;\n\nexport const SET_TOTAL_VALUE = \"journalEntryUpsert/SET_TOTAL_VALUE\";\nexport type SetTotalValue = SetValueAction<typeof SET_TOTAL_VALUE, \n  RationalInput>;\n\nexport const CLEAR_TOTAL_VALUE = \"journalEntryUpsert/CLEAR_TOTAL_VALUE\";\nexport type ClearTotalValue = ClearAction<typeof CLEAR_TOTAL_VALUE>;\n\nexport const SET_TOTAL_ERROR = \"journalEntryUpsert/SET_TOTAL_ERROR\";\nexport type SetTotalError = SetErrorAction<typeof SET_TOTAL_ERROR>;\n\nexport const CLEAR_TOTAL_ERROR = \"journalEntryUpsert/CLEAR_TOTAL_ERROR\";\nexport type ClearTotalError = ClearAction<typeof CLEAR_TOTAL_ERROR>;\n\n// Reconciled\nexport const SET_RECONCILED_VALUE = \"journalEntryUpsert/SET_RECONCILED_VALUE\";\nexport type SetReconciledValue =\n  SetValueAction<typeof SET_RECONCILED_VALUE, boolean>;\n\nexport const CLEAR_RECONCILED_VALUE = \n  \"journalEntryUpsert/CLEAR_RECONCILED_VALUE\";\nexport type ClearReconciledValue = ClearAction<typeof CLEAR_RECONCILED_VALUE>;","\nexport class InputValue<T, Tnull> {\n  input = \"\";\n  value:T | Tnull;\n  error:Error | null = null;\n  constructor(nullValue:Tnull) {\n    this.value = nullValue;\n  }\n}\n\nexport const reduceOneById = <T, A>(state:T[], action:A, id:string,\n  idKey:keyof T, reducer:(state:T, action:A) => T):T[] =>\n{ \n  for(let i = 0, len = state.length; i < len; i++){\n    const entry = state[i];\n    if(entry[idKey as string] === id) {\n      const newEntry = reducer(entry, action);\n      if(newEntry !== entry) {\n        return [\n          ...state.slice(0, i),\n          newEntry,\n          ...state.slice(i + 1)\n        ];\n      } else {\n        return state;\n      }\n    }\n  }\n  return state;\n}","import {Action} from \"./types\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const CREATE = \"tableCells/CREATE\";\nexport type Create = Action<typeof CREATE, TableCellIni>;\n\nexport const SET_INDEX = \"tableCells/SET_INDEX\";\nexport type SetIndex =\n  Action<typeof SET_INDEX, {id:string, rowId:string, index:number}>;\nexport const SET_DEFAULT_INDEX = \"tableCells/SET_DEFAULT_INDEX\";\nexport type SetDefaultIndex =\n  Action<typeof SET_DEFAULT_INDEX, {id:string, rowId:string}>;\n\nexport const SET_NAME = \"tableCells/SET_NAME\";\nexport type SetName =\n  Action<typeof SET_NAME, {id:string, rowId:string, name:string}>;\nexport const SET_DEFAULT_NAME = \"tableCells/SET_DEFAULT_NAME\";\nexport type SetDefaultName =\n  Action<typeof SET_DEFAULT_NAME, {id:string, rowId:string}>;\n\nexport const SET_WIDTH = \"tableCells/SET_WIDTH\";\nexport type SetWidth =\n  Action<typeof SET_WIDTH, {id:string, rowId:string, width:number}>;\nexport const SET_DEFAULT_WIDTH = \"tableCells/SET_DEFAULT_WIDTH\";\nexport type SetDefaultWidth =\n  Action<typeof SET_DEFAULT_WIDTH, {id:string, rowId:string}>;\n\nexport const COLLAPSE = \"tableCells/COLLAPSE\";\nexport type Collapse = Action<typeof COLLAPSE, {id:string, rowId:string}>;\nexport const EXPAND = \"tableCells/EXPAND\";\nexport type Expand = Action<typeof EXPAND, {id:string, rowId:string}>;\n\nexport const HIDE = \"tableCells/HIDE\";\nexport type Hide = Action<typeof HIDE, {id:string, rowId:string}>;\nexport const SHOW = \"tableCells/SHOW\";\nexport type Show = Action<typeof SHOW, {id:string, rowId:string}>;\n\nexport const RESTORE_DEFAULTS = \"tableCells/RESTORE_DEFAULTS\";\nexport type RestoreDefaults =\n  Action<typeof RESTORE_DEFAULTS, {id:string, rowId:string}>;","import isEqual from \"lodash.isequal\";\n\nimport {CREATE, Create, SET_INDEX, SetIndex, SET_DEFAULT_INDEX, SetDefaultIndex,\n SET_NAME, SetName, SET_DEFAULT_NAME, SetDefaultName, SET_WIDTH, SetWidth,\n SET_DEFAULT_WIDTH, SetDefaultWidth, COLLAPSE, Collapse, EXPAND, Expand,\n HIDE, Hide, SHOW, Show, RESTORE_DEFAULTS,\n RestoreDefaults,\n} from \"../actionTypes/tableRow\";\nimport { TableRow } from \"@material-ui/core\";\n\ntype Actions = Create | SetIndex | SetDefaultIndex | SetName | SetDefaultName |\n  SetWidth | SetDefaultWidth | Collapse | Expand | Hide | Show |\n  RestoreDefaults;\n\nexport interface TableCellIni {\n  rowId:string;\n  id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed?:boolean;\n  hidden?:boolean;\n}\nexport class TableCell {\n  \n  readonly ini:Readonly<TableCellIni>;\n  readonly rowId:string;\n  readonly id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed:boolean;\n  hidden:boolean;\n  \n  constructor(ini:TableCellIni) {\n    this.ini = {...ini} as const;\n    this.rowId = ini.rowId\n    this.id = ini.id;\n    this.index = ini.index;\n    this.name = ini.name;\n    this.width = ini.width;\n    this.collapsed = ini?.collapsed ?? false;\n    this.hidden = ini?.hidden ?? false;\n  }\n\n}\n\nexport const tableCell = (state:TableCell, action:Actions):TableCell => {\n  \n  switch(action.type) {\n    case SET_INDEX:\n      return state.index === action.payload.index ?\n        state : {...state, index:action.payload.index};\n    case SET_DEFAULT_INDEX:\n      return state.index === state.ini.index ?\n        state : {...state, index:state.ini.index};\n    case SET_NAME:\n      return state.name === action.payload.name ?\n        state : {...state, name:action.payload.name};\n    case SET_DEFAULT_NAME:\n      return state.name === state.ini.name ?\n        state : {...state, name:state.ini.name};\n    case SET_WIDTH:\n      return state.width === action.payload.width ?\n        state : {...state, width:action.payload.width};\n    case SET_DEFAULT_WIDTH:\n      return state.width === state.ini.width ?\n        state : {...state, width:state.ini.width};\n    case COLLAPSE:\n      return state.collapsed === true ? state : {...state, collapsed:true};\n    case EXPAND:\n      return state.collapsed === false ? state : {...state, collapsed:false};\n    case HIDE:\n      return state.hidden === true ? state : {...state, hidden:true};\n    case SHOW:\n      return state.hidden === false ? state : {...state, hidden:false};\n    case RESTORE_DEFAULTS:{\n      const defaultState = new TableCell(state.ini);\n      return isEqual(state, defaultState) ? state : defaultState;\n    }\n    default:\n      return state;\n  }\n  \n}\n\ninterface TableRow {\n  [cellId:string]:TableCell;\n}\n\n\nexport const iterateCellByIndex = function*(row:TableRow) {\n\n  const unIndexedCells:TableCell[] = [];\n  const indexedCells = new Map<number, TableCell>();\n\n  let nextIndex = 0;\n  for(const key in row) {\n    \n    if(row.hasOwnProperty(key)) {\n      \n      const cell = row[key];\n      const {index = null} = cell;\n      \n      if(index === null) {\n      \n        continue;\n      \n      } else if(nextIndex === index) {\n        \n        yield cell;\n        \n        while(indexedCells.has(++nextIndex)) {\n        \n          yield indexedCells.get(nextIndex) as TableCell;\n        \n        }\n      \n      } else if(index > 0) {\n      \n        indexedCells.set(index, cell);\n      \n      } else {\n\n        unIndexedCells.push(cell);\n\n      }\n\n    }\n  \n  }\n\n  return unIndexedCells;\n\n}\n\nexport const tableRow = (state:TableRow = {}, action:Actions):TableRow =>\n{\n  switch(action.type) {\n    case CREATE:\n      return action.payload.id in state \n        ? state : {...state, [action.payload.id]:new TableCell(action.payload)};\n    case SET_INDEX:{\n      \n      const curIndex = state[action.payload.id].index;\n      const newIndex = action.payload.index;\n      \n      if(curIndex === newIndex) {\n      \n        return state;\n      \n      } else if(curIndex < newIndex) {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > newIndex) {\n            break;\n          } else if(row.index < curIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index - 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      } else {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > curIndex) {\n            break;\n          } else if(row.index < newIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] = tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index + 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      }\n\n    }\n    case SET_DEFAULT_INDEX:{\n\n      const newState = {} as TableRow;\n\n      for(const row of iterateCellByIndex(state)) {\n\n        newState[row.id] = tableCell(row, action);\n\n      }\n\n      return {...state, ...newState};\n\n    }\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:\n      if(action.payload.id in state) {\n        const curCell = state[action.payload.id];\n        const newCell = tableCell(curCell, action);\n        return newCell === curCell ? \n          state : {...state, [action.payload.id]:newCell};\n      }\n      return state;\n    default:\n      return state;\n  }\n}\n\ninterface TableRows {\n  [rowId:string]:TableRow;\n}\n\nexport const tableRows = (state:TableRows = {}, action:Actions)\n  :TableRows =>\n{\n\n  switch(action.type) {\n    case CREATE:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return {...state, [rowId]:tableRow(undefined, action)};\n    }\n    case SET_INDEX:\n    case SET_DEFAULT_INDEX:\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\n\nexport const CREATE_PAB = \"journal/CREATE_PAB\";\nexport type CreatePAB = Action<typeof CREATE_PAB, {pabId:string}>;\n\nexport const OPEN_PAB = \"journal/OPEN_PAB\";\nexport type OpenPAB = Action<typeof OPEN_PAB, {pabId:string}>;\n\nexport const CLOSE_PAB = \"journal/CLOSE_PAB\";\nexport type ClosePAB = Action<typeof CLOSE_PAB, {pabId:string}>;","import {combineReducers} from \"redux\";\n\nimport {CREATE_PAB, CreatePAB, OPEN_PAB, OpenPAB, CLOSE_PAB, ClosePAB\n} from \"../actionTypes/journal\";\n\ntype Actions = CreatePAB | OpenPAB | ClosePAB;\n\nconst pab = (state = {open:false}, action:Actions) => {\n\n  switch(action.type) {\n    case OPEN_PAB:\n      return state.open === true ? state : {...state, open:true};\n    case CLOSE_PAB:\n      return state.open === false ? state : {...state, open:false};\n    default:\n    return state;\n  }\n\n}\n\nexport type PAB = ReturnType<typeof pab>;\n\ninterface PABs {\n  [key:string]:PAB\n}\n\nexport const pabs = (state:PABs = {}, action:Actions) => {\n\n  switch(action.type) {\n    case CREATE_PAB:\n      // Create ONLY once\n      if(action.payload.pabId in state) {\n        return state;\n      }\n      return {...state, [action.payload.pabId]:pab(undefined, action)}\n    case OPEN_PAB:\n    case CLOSE_PAB:\n      if(action.payload.pabId in state) {\n        const {pabId} = action.payload;\n        const curPAB = state[pabId];\n        const newPAB = pab(curPAB, action);\n        return curPAB === newPAB ? state : {...state, [pabId]:newPAB}\n      }\n      return state;\n    default:\n      return state;\n\n  }\n\n}\n\nexport const journal = combineReducers({\n  pabs\n});\n\nexport type Journal = typeof journal;","import {combineReducers} from \"redux\";\n\nimport {journalEntryUpserts} from \"./journalEntryUpserts\";\nimport {tableRows} from \"./tableRows\";\nimport {journal} from \"./journal\";\n\nconst root = combineReducers({\n  journal,\n  journalEntryUpserts,\n  tableRows\n});\nexport default root;\n\nexport type Root = ReturnType<typeof root>;","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\n\nimport root from \"./reducers/root\";\n\nconst store = createStore(root, composeWithDevTools(\n  applyMiddleware(thunk)\n));\n\nexport type AppDispatch = typeof store.dispatch \nexport default store;\n","import * as actions from \"../actionTypes/tableRow\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const create = (ini:TableCellIni):actions.Create => ({\n  type:actions.CREATE,\n  payload:ini\n});\n\nexport const setIndex = (id:string, rowId:string, index:number)\n  :actions.SetIndex => ({\n    type:actions.SET_INDEX,\n    payload:{id, rowId, index}\n  });\n\nexport const setDefaultIndex = (id:string, rowId:string)\n  :actions.SetDefaultIndex => ({\n    type:actions.SET_DEFAULT_INDEX,\n    payload:{id, rowId}\n  });\n\nexport const setName = (id:string, rowId:string, name:string)\n  :actions.SetName => ({\n    type:actions.SET_NAME,\n    payload:{id, rowId, name}\n  });\n\nexport const setDefaultName = (id:string, rowId:string)\n  :actions.SetDefaultName => ({\n    type:actions.SET_DEFAULT_NAME,\n    payload:{id, rowId}\n  });\n\nexport const setWidth = (id:string, rowId:string, width:number)\n  :actions.SetWidth => ({\n    type:actions.SET_WIDTH,\n    payload:{id, rowId, width}\n  });\n\nexport const setDefaultWidth = (id:string, rowId:string)\n  :actions.SetDefaultWidth => ({\n    type:actions.SET_DEFAULT_WIDTH,\n    payload:{id, rowId}\n  });\n\nexport const collapse = (id:string, rowId:string)\n  :actions.Collapse => ({\n    type:actions.COLLAPSE,\n    payload:{id, rowId}\n  });\n\nexport const expand = (id:string, rowId:string)\n  :actions.Expand => ({\n    type:actions.EXPAND,\n    payload:{id, rowId}\n  });\n\nexport const show = (id:string, rowId:string)\n  :actions.Show => ({\n    type:actions.SHOW,\n    payload:{id, rowId}\n  });\n\nexport const hide = (id:string, rowId:string)\n  :actions.Hide => ({\n    type:actions.HIDE,\n    payload:{id, rowId}\n  });\n\nexport const restoreDefaults = (id:string, rowId:string)\n  :actions.RestoreDefaults => ({\n    type:actions.RESTORE_DEFAULTS,\n    payload:{id, rowId}\n  });","import {namespace, uuid} from \"../../../../utils/uuid\";\nimport store from \"../../../../redux/store\";\nimport {create} from \"../../../../redux/actions/tableRow\";\n\nexport const ROW_ID = uuid(\"Journal\", namespace);\n\nexport const DATE_ID = uuid(\"journal/date\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DATE_ID,\n  index:1,\n  name:\"Date\",\n  width:185\n}));\n\nexport const DEPT_ID = uuid(\"journal/department\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DEPT_ID,\n  index:7,\n  name:\"Department\",\n  width:380\n}));\n\nexport const CATEGORY_ID = uuid(\"journal/category\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:CATEGORY_ID,\n  index:3,\n  name:\"Category\",\n  width:380\n}));\n\nexport const SRC_ID = uuid(\"journal/source\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:SRC_ID,\n  index:4,\n  name:\"Source\",\n  width:380\n}));\n\nexport const PAY_METHOD_ID = uuid(\"journal/paymentMethod\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:PAY_METHOD_ID,\n  index:5,\n  name:\"Payment Method\",\n  width:175\n}));\n\nexport const DSCRPT_ID = uuid(\"journal/description\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DSCRPT_ID,\n  index:6,\n  name:\"Description\",\n  width:380\n}));\n\nexport const TOTAL_ID = uuid(\"journal/total\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:TOTAL_ID,\n  index:2,\n  name:\"Total\",\n  width:130\n}));\n\nexport const RECONCILED_ID = uuid(\"journal/reconciled\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:RECONCILED_ID,\n  index:0,\n  name:\"Reconciled\",\n  width:105\n}));\n","import {Root} from \"../reducers/root\";\nimport {TableCell, iterateCellByIndex} from \"../reducers/tableRows\";\n\nexport const getIndexedCells = (state:Root, rowId:string)\n  :TableCell[] => \n{\n\n  if(rowId in state.tableRows) {\n    \n    const row = state.tableRows[rowId];\n    \n    return [...iterateCellByIndex(row)];\n\n  }\n\n  return [];\n\n}\n\nexport const getUnIndexedCells = (state:Root, rowId:string)\n  :TableCell[] => \n{\n\n  if(rowId in state.tableRows) {\n  \n    const row = state.tableRows[rowId];\n\n    const iter = iterateCellByIndex(row);\n    while(true) {\n      const result = iter.next();\n      if(result.done) {\n        return result.value;\n      }\n    }\n  \n  }\n\n  return [];\n\n}\n\nexport const getCells = (state:Root, rowId:string):TableCell[] => {\n\n  const cells:TableCell[] = [];\n\n  if(rowId in state.tableRows) {\n  \n    const row = state.tableRows[rowId];\n\n    const iter = iterateCellByIndex(row);\n    let result = iter.next();\n    while(!result.done) {\n      cells.push(result.value);\n      result = iter.next();\n    }\n    cells.push(...result.value);\n  }\n\n  return cells;\n\n}\n\nexport const getCell = (state:Root, rowId:string, cellId:string)\n  :TableCell | null =>\n{\n  if(rowId in state.tableRows && cellId in state.tableRows[rowId]) {\n    return state.tableRows[rowId][cellId];\n  }\n  return null;\n\n}","import React, {useMemo} from 'react';\nimport {useSelector, shallowEqual} from \"react-redux\";\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\n\nimport {ROW_ID} from \"./Cells/cellsReduxIni\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../redux/reducers/tableRows\";\nimport {getIndexedCells} from \"../../../redux/selectors/tableRows\";\n\n\nconst Header = function(props) {\n\n  const cellFormats = useSelector<Root,CellFormat[]>((state) => \n      getIndexedCells(state, ROW_ID), shallowEqual);\n\n  const cells = useMemo(()=>cellFormats.map(({name, width, index}, i)=><Box\n    key={`${name}_${i}`}\n    minWidth={width}\n    flexBasis={width}\n    flexGrow={width}\n    order={index}\n    clone\n  >\n    <TableCell\n      component='div'\n      children={name}\n    />\n  </Box>),[cellFormats]);\n\n  return <TableHead component='div'>\n    <Box\n      display=\"flex !important\"\n      flexDirection=\"row\"\n      justifyContent=\"flex-start\"\n      clone\n    >\n      <TableRow  component='div'>\n        {cells}\n      </TableRow>\n    </Box>\n  </TableHead>;\n\n}\n\nexport default Header;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport moment from 'moment';\n\n\nimport {ROW_ID, DATE_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface TransactionDateProps {\n  entryDate:string;\n  textColor:string;\n}\n\nconst TransactionDate = function(props:TransactionDateProps) {\n\n  const {entryDate, textColor} = props;\n\n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DATE_ID) as CellFormat);\n\n  const date = moment(entryDate);\n  \n  return <Box \n    className={textColor}\n    // display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{date.format('MMM DD, YYYY')}</TableCell>\n  </Box>;\n\n}\n\nexport default TransactionDate;","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\nimport {capitalCase} from \"change-case\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, DEPT_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface DepartmentProps {\n  department:JournalEntryFragment[\"department\"];\n  textColor:string\n}\n\nconst Department = function(props:DepartmentProps) {\n\n  const {department, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DEPT_ID) as CellFormat);\n    \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{capitalCase(department.name)}</TableCell>\n  </Box>;\n\n}\n\nexport default Department;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport {capitalCase} from 'change-case';\n\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, CATEGORY_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface CategoryProps {\n  category:JournalEntryFragment['category'];\n  textColor:string;\n}\n\nconst Category = function(props:CategoryProps) {\n\n  const {category, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, CATEGORY_ID) as CellFormat);\n  \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{capitalCase(category.name)}</TableCell>\n  </Box>;\n\n}\n\nexport default Category;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from \"@material-ui/core/Box\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, SRC_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface SourceProps {\n  source:JournalEntryFragment['source'];\n  textColor:string;\n}\n\nconst Source = function(props:SourceProps) {\n\n  const {source, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, SRC_ID) as CellFormat);\n\n  let sourceName = '';\n  switch(source.__typename) {\n    case \"Person\":\n      sourceName = `${source.name.first} ${source.name.last}`;\n      break;\n    case \"Business\":\n        sourceName = source.bizName;\n        break;\n    case \"Department\":\n      sourceName = source.deptName;\n      break;\n  }\n\n  return<Box \n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{sourceName}</TableCell>\n  </Box>;\n\n}\n\nexport default Source;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from \"@material-ui/core/Box\";\nimport {capitalCase} from 'change-case';\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, PAY_METHOD_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface PaymentMethodProps {\n  paymentMethod:JournalEntryFragment['paymentMethod'];\n  textColor:string;\n}\n\nconst PaymentMethod = function(props:PaymentMethodProps) {\n\n  const {paymentMethod, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, PAY_METHOD_ID) as CellFormat);\n  \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n     <TableCell component='div'>{capitalCase(paymentMethod.method)}</TableCell>\n  </Box>;\n  \n}\n\nexport default PaymentMethod;","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, DSCRPT_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface DescriptionProps {\n  description:JournalEntryFragment[\"description\"];\n  textColor:string\n}\n\nconst Description = function(props:DescriptionProps) {\n\n  const {description, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DSCRPT_ID) as CellFormat);\n\n \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{description}</TableCell>\n  </Box>\n\n}\n\nexport default Description;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport numeral from 'numeral';\nimport Fraction from 'fraction.js';\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, TOTAL_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface TotalProps {\n  total:JournalEntryFragment['total'];\n  textColor:string;\n}\n\nconst Total = function(props:TotalProps) {\n\n  const {total:{num:n, den:d}, textColor} = props;\n  const faction = new Fraction({n, d});\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, TOTAL_ID) as CellFormat);\n  \n  return <Box \n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{\n      numeral(faction.toString()).format('$0,0.00')\n    }</TableCell>\n  </Box>;\n\n}\n\nexport default Total;","import gql from 'graphql-tag';\n\nexport const JOURNAL_ENTRY_FRAGMENT = gql`\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n`;\n\nexport const JOURNAL_ENTRIES = gql`\n  query JournalEntries_1($where:JournalEntiresWhereInput!) \n  {\n    journalEntries(where:$where)\n      @connection(key:\"JournalEntries_1\", filter:[\"where\"]) \n    {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;","import React, {useCallback, useMemo, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useMutation} from \"@apollo/react-hooks\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport DoneIcon from '@material-ui/icons/Done';\nimport Checkbox, {CheckboxProps} from '@material-ui/core/Checkbox';\nimport gql from \"graphql-tag\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, RECONCILED_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\nimport {JournalMode} from \"../Body\";\nimport {JOURNAL_ENTRY_FRAGMENT} from \"../JournalEntries.gql\";\n\n\nconst RECONCILE = gql`\n  mutation Reconcile_1($id:ID!) {\n    journalEntryUpdate(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport interface ReconciledProps {\n  reconciled:JournalEntryFragment[\"reconciled\"];\n  entryId:string;\n  textColor:string;\n  mode:JournalMode;\n  removeReconciled:(id:string)=>void;\n}\n\nconst Reconciled = function(props:ReconciledProps) {\n\n  const {reconciled, textColor, mode, entryId, removeReconciled} = props;\n\n  const [checked, setChecked] = useState(false);\n\n  const [mutate] =  useMutation(RECONCILE);\n\n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, RECONCILED_ID) as CellFormat);\n\n\n  const onChange = useCallback(async (event?)=>{\n    if(checked) {\n      return;\n    }\n    setChecked(true);\n    try{\n      await mutate({variables:{id:entryId}});\n      removeReconciled(entryId);\n    } catch(error) {\n      setChecked(false);\n    }\n\n  }, [setChecked, mutate, entryId, removeReconciled, checked]);\n\n\n  const checkboxProps:CheckboxProps = {\n    checked,\n    name:\"reconciled\",\n    onChange,\n    inputProps:useMemo(() => ({\n      type:\"checkbox\",\n    }),[]),\n  }\n  \n  return <Box\n    className={textColor}\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    display=\"flex !important\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    clone\n  >\n    <TableCell component=\"div\">{(()=>{\n      if(reconciled) {\n        return  <DoneIcon />;\n      } else if(mode === JournalMode.Reconcile) {\n        return <Checkbox {...checkboxProps} />;\n      }\n      return null;\n    })()}</TableCell>\n  </Box>;\n\n}\n\nexport default Reconciled;","import { GraphQLResolveInfo, GraphQLScalarType, GraphQLScalarTypeConfig } from 'graphql';\nimport { Context } from './types';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type RequireFields<T, K extends keyof T> = { [X in Exclude<keyof T, K>]?: T[X] } & { [P in K]-?: NonNullable<T[P]> };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string,\n  String: string,\n  Boolean: boolean,\n  Int: number,\n  Float: number,\n  /** The `Upload` scalar type represents a file upload. */\n  Upload: any,\n};\n\n\nexport type Budget = {\n   __typename?: 'Budget',\n  id: Scalars['ID'],\n  amount: Rational,\n  owner: BudgetOwner,\n};\n\nexport type BudgetOwner = Department | Business;\n\nexport type Business = {\n   __typename?: 'Business',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  budget?: Maybe<Budget>,\n  departments: Array<Department>,\n  vendor?: Maybe<Vendor>,\n};\n\nexport type BusinessAddFields = {\n  name: Scalars['String'],\n};\n\nexport type ByIdFilter = {\n  eq?: Maybe<Scalars['ID']>,\n};\n\nexport enum CacheControlScope {\n  Public = 'PUBLIC',\n  Private = 'PRIVATE'\n}\n\nexport type Department = {\n   __typename?: 'Department',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  code?: Maybe<Scalars['String']>,\n  budget?: Maybe<Budget>,\n  business: Business,\n  parent: DepartmentAncestor,\n  ancestors: Array<DepartmentAncestor>,\n  descendants: Array<Department>,\n  virtualRoot?: Maybe<Scalars['Boolean']>,\n};\n\nexport type DepartmentAddFields = {\n  name: Scalars['String'],\n};\n\nexport type DepartmentAncestor = Department | Business;\n\nexport enum FilterType {\n  Include = 'INCLUDE',\n  Exclude = 'EXCLUDE'\n}\n\nexport type JournalEntiresWhereInput = {\n  department?: Maybe<JournalEntriesWhereDepartment>,\n  reconciled?: Maybe<Scalars['Boolean']>,\n  deleted?: Maybe<Scalars['Boolean']>,\n  lastUpdate?: Maybe<JournalEntriesWhereLastUpdate>,\n  or?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>,\n  and?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>,\n};\n\nexport type JournalEntriesRes = {\n   __typename?: 'JournalEntriesRes',\n  totalCount: Scalars['Int'],\n  entries: Array<JournalEntry>,\n};\n\nexport type JournalEntriesWhereDepartment = {\n  eq?: Maybe<Scalars['ID']>,\n  ne?: Maybe<Scalars['ID']>,\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>,\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>,\n  includeDescendants?: Maybe<Scalars['Boolean']>,\n};\n\nexport type JournalEntriesWhereLastUpdate = {\n  gt?: Maybe<Scalars['String']>,\n  lt?: Maybe<Scalars['String']>,\n  gte?: Maybe<Scalars['String']>,\n  lte?: Maybe<Scalars['String']>,\n};\n\nexport type JournalEntry = {\n   __typename?: 'JournalEntry',\n  id: Scalars['ID'],\n  type: JournalEntryType,\n  date: Scalars['String'],\n  department: Department,\n  category: JournalEntryCategory,\n  paymentMethod: PaymentMethod,\n  description?: Maybe<Scalars['String']>,\n  total: Rational,\n  source: JournalEntrySource,\n  reconciled: Scalars['Boolean'],\n  lastUpdate: Scalars['String'],\n  deleted: Scalars['Boolean'],\n};\n\nexport type JournalEntryAddedRes = {\n   __typename?: 'JournalEntryAddedRes',\n  totalCount: Scalars['Int'],\n  index: Scalars['Int'],\n  entry: JournalEntry,\n};\n\nexport type JournalEntryAddFields = {\n  date: Scalars['String'],\n  department: Scalars['ID'],\n  type: JournalEntryType,\n  category: Scalars['ID'],\n  paymentMethod: Scalars['ID'],\n  description?: Maybe<Scalars['String']>,\n  total: RationalInput,\n  source: JournalEntrySourceInput,\n  reconciled?: Maybe<Scalars['Boolean']>,\n};\n\nexport type JournalEntryCategory = {\n   __typename?: 'JournalEntryCategory',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  type: JournalEntryType,\n  parent?: Maybe<JournalEntryCategory>,\n  ancestors: Array<JournalEntryCategory>,\n};\n\nexport type JournalEntrySource = Person | Business | Department;\n\nexport type JournalEntrySourceInput = {\n  sourceType: JournalEntrySourceType,\n  id: Scalars['ID'],\n};\n\nexport enum JournalEntrySourceType {\n  Business = 'BUSINESS',\n  Department = 'DEPARTMENT',\n  Person = 'PERSON'\n}\n\nexport enum JournalEntryType {\n  Credit = 'CREDIT',\n  Debit = 'DEBIT'\n}\n\nexport type JournalEntryUpdateFields = {\n  date?: Maybe<Scalars['String']>,\n  department?: Maybe<Scalars['ID']>,\n  type?: Maybe<JournalEntryType>,\n  category?: Maybe<Scalars['ID']>,\n  paymentMethod?: Maybe<Scalars['ID']>,\n  description?: Maybe<Scalars['String']>,\n  total?: Maybe<RationalInput>,\n  source?: Maybe<JournalEntrySourceInput>,\n  reconciled?: Maybe<Scalars['Boolean']>,\n};\n\nexport type Lc_JournalEntryUpsert = {\n   __typename?: 'LC_JournalEntryUpsert',\n  id: Scalars['ID'],\n  valid: Scalars['Boolean'],\n  type: Lc_JournalEntryUpsertType,\n  submitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  submitError?: Maybe<Scalars['String']>,\n  inputValues: Lc_JournalEntryUpsertInputValues,\n  inputErrors: Lc_JournalEntryUpsertInputErrors,\n  fields: Lc_JournalEntryUpsertFields,\n};\n\nexport type Lc_JournalEntryUpsertFields = {\n   __typename?: 'LC_JournalEntryUpsertFields',\n  id?: Maybe<Scalars['ID']>,\n  date?: Maybe<Scalars['String']>,\n  department: Array<Scalars['ID']>,\n  type?: Maybe<Scalars['ID']>,\n  paymentMethod?: Maybe<Scalars['ID']>,\n  total?: Maybe<Rational>,\n  source: Array<Lc_JournalEntryUpsertSource>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrors = {\n   __typename?: 'LC_JournalEntryUpsertInputErrors',\n  dateError?: Maybe<Scalars['String']>,\n  deptError?: Maybe<Scalars['String']>,\n  typeError?: Maybe<Scalars['String']>,\n  payMethodError?: Maybe<Scalars['String']>,\n  totalError?: Maybe<Scalars['String']>,\n  srcError?: Maybe<Scalars['String']>,\n};\n\nexport type Lc_JournalEntryUpsertInputValues = {\n   __typename?: 'LC_JournalEntryUpsertInputValues',\n  deptInput?: Maybe<Scalars['String']>,\n  totalInput?: Maybe<Scalars['String']>,\n  srcInput?: Maybe<Scalars['String']>,\n  srcType?: Maybe<JournalEntrySourceType>,\n};\n\nexport type Lc_JournalEntryUpsertSource = {\n   __typename?: 'LC_JournalEntryUpsertSource',\n  sourceType: JournalEntrySourceType,\n  id: Scalars['ID'],\n};\n\nexport enum Lc_JournalEntryUpsertSubmitStatus {\n  NotSubmitted = 'NOT_SUBMITTED',\n  Submitting = 'SUBMITTING',\n  Submitted = 'SUBMITTED'\n}\n\nexport enum Lc_JournalEntryUpsertType {\n  Update = 'UPDATE',\n  Add = 'ADD'\n}\n\nexport type Mutation = {\n   __typename?: 'Mutation',\n  addBusiness: Business,\n  journalEntryUpdate: JournalEntry,\n  journalEntryAdd: JournalEntry,\n  journalEntryDelete: JournalEntry,\n  addPerson: Person,\n};\n\n\nexport type MutationAddBusinessArgs = {\n  fields: BusinessAddFields\n};\n\n\nexport type MutationJournalEntryUpdateArgs = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type MutationJournalEntryAddArgs = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type MutationJournalEntryDeleteArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type MutationAddPersonArgs = {\n  fields: PersonAddFields\n};\n\nexport type PaginateInput = {\n  skip: Scalars['Int'],\n  limit: Scalars['Int'],\n};\n\nexport type PaymentMethod = {\n   __typename?: 'PaymentMethod',\n  id: Scalars['ID'],\n  active: Scalars['Boolean'],\n  method: Scalars['String'],\n  parent?: Maybe<PaymentMethod>,\n  ancestors: Array<PaymentMethod>,\n};\n\nexport type Person = {\n   __typename?: 'Person',\n  id: Scalars['ID'],\n  name: PersonName,\n};\n\nexport type PersonAddFields = {\n  name: PersonNameInput,\n};\n\nexport type PersonName = {\n   __typename?: 'PersonName',\n  first: Scalars['String'],\n  last: Scalars['String'],\n};\n\nexport type PersonNameInput = {\n  first: Scalars['String'],\n  last: Scalars['String'],\n};\n\nexport type Query = {\n   __typename?: 'Query',\n  lc_journalEntryUpserts: Array<Lc_JournalEntryUpsert>,\n  budgets: Array<Budget>,\n  budget: Budget,\n  businesses: Array<Business>,\n  business: Business,\n  departments: Array<Department>,\n  department?: Maybe<Department>,\n  journalEntries: Array<JournalEntry>,\n  journalEntry?: Maybe<JournalEntry>,\n  journalEntryCategories: Array<JournalEntryCategory>,\n  journalEntryCategory: JournalEntryCategory,\n  journalEntrySources: Array<JournalEntrySource>,\n  paymentMethods: Array<PaymentMethod>,\n  people: Array<Person>,\n};\n\n\nexport type QueryBudgetArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryBusinessesArgs = {\n  searchByName?: Maybe<Scalars['String']>\n};\n\n\nexport type QueryBusinessArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryDepartmentsArgs = {\n  fromParent?: Maybe<Scalars['ID']>,\n  searchByName?: Maybe<Scalars['String']>\n};\n\n\nexport type QueryDepartmentArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryJournalEntriesArgs = {\n  where?: Maybe<JournalEntiresWhereInput>\n};\n\n\nexport type QueryJournalEntryArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryJournalEntryCategoryArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryJournalEntrySourcesArgs = {\n  searchByName: Scalars['String']\n};\n\n\nexport type QueryPeopleArgs = {\n  searchByName?: Maybe<PersonNameInput>\n};\n\nexport type Rational = {\n   __typename?: 'Rational',\n  num: Scalars['Int'],\n  den: Scalars['Int'],\n};\n\nexport type RationalInput = {\n  num: Scalars['Int'],\n  den: Scalars['Int'],\n};\n\nexport enum SortDirection {\n  Asc = 'ASC',\n  Desc = 'DESC'\n}\n\nexport type Subscription = {\n   __typename?: 'Subscription',\n  journalEntryAdded: JournalEntry,\n  journalEntryUpdated: JournalEntry,\n};\n\n\nexport type User = {\n   __typename?: 'User',\n  id: Scalars['ID'],\n  user: Person,\n};\n\nexport type Vendor = {\n   __typename?: 'Vendor',\n  approved: Scalars['Boolean'],\n  vendorId?: Maybe<Scalars['ID']>,\n};\n\nexport type DeptForUpsertAddQueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type DeptForUpsertAddQuery = { __typename?: 'Query', department: Maybe<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type GetReportDataDept_1Fragment = { __typename: 'Department', id: string, name: string, budget: Maybe<{ __typename: 'Budget', id: string, amount: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type GetReportDataEntry_1Fragment = { __typename: 'JournalEntry', id: string, type: JournalEntryType, lastUpdate: string, deleted: boolean, category: { __typename: 'JournalEntryCategory', id: string, name: string }, total: { __typename?: 'Rational', num: number, den: number }, department: { __typename: 'Department', id: string, ancestors: Array<{ __typename: 'Department', id: string } | { __typename: 'Business', id: string }> } };\n\nexport type GetReportDataQueryVariables = {\n  deptId: Scalars['ID'],\n  where: JournalEntiresWhereInput\n};\n\n\nexport type GetReportDataQuery = { __typename?: 'Query', department: Maybe<(\n    { __typename?: 'Department', descendants: Array<(\n      { __typename?: 'Department' }\n      & GetReportDataDept_1Fragment\n    )> }\n    & GetReportDataDept_1Fragment\n  )>, journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_2SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_2Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_2SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_2Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type Reconcile_1MutationVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type Reconcile_1Mutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntry_1Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, description: Maybe<string>, deleted: boolean, lastUpdate: string, reconciled: boolean, department: { __typename: 'Department', id: string, name: string, ancestors: Array<{ __typename: 'Department', id: string, deptName: string } | { __typename: 'Business', id: string, bizName: string }> }, category: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType, name: string }, paymentMethod: { __typename: 'PaymentMethod', id: string, method: string }, source: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } | { __typename: 'Business', id: string, bizName: string } | { __typename: 'Department', id: string, deptName: string }, total: { __typename?: 'Rational', num: number, den: number } };\n\nexport type JournalEntries_1QueryVariables = {\n  where: JournalEntiresWhereInput\n};\n\n\nexport type JournalEntries_1Query = { __typename?: 'Query', journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_1SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_1Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_1SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_1Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type DeleteEntry_1MutationVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type DeleteEntry_1Mutation = { __typename?: 'Mutation', journalEntryDelete: { __typename: 'JournalEntry', id: string, deleted: boolean } };\n\nexport type CatEntryOptsQueryVariables = {};\n\n\nexport type CatEntryOptsQuery = { __typename?: 'Query', catOpts: Array<(\n    { __typename?: 'JournalEntryCategory' }\n    & CatEntryOptFragment\n  )> };\n\nexport type DeptEntryOptsQueryVariables = {\n  fromParent?: Maybe<Scalars['ID']>\n};\n\n\nexport type DeptEntryOptsQuery = { __typename?: 'Query', deptOpts: Array<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type PayMethodEntryOptsQueryVariables = {};\n\n\nexport type PayMethodEntryOptsQuery = { __typename?: 'Query', paymentMethods: Array<(\n    { __typename?: 'PaymentMethod' }\n    & PayMethodEntryOptFragment\n  )> };\n\nexport type SrcEntryOptsQueryVariables = {\n  name: Scalars['String'],\n  isBiz: Scalars['Boolean']\n};\n\n\nexport type SrcEntryOptsQuery = { __typename?: 'Query', businesses: Array<(\n    { __typename?: 'Business' }\n    & SrcEntryBizOptFragment\n  )>, people: Array<(\n    { __typename?: 'Person' }\n    & SrcEntryPersonOptFragment\n  )> };\n\nexport type UpsertEntryDeleteMutationVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type UpsertEntryDeleteMutation = { __typename?: 'Mutation', journalEntryDelete: { __typename: 'JournalEntry', id: string, deleted: boolean } };\n\nexport type EntryUpdateValuesQueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type EntryUpdateValuesQuery = { __typename?: 'Query', journalEntry: Maybe<(\n    { __typename?: 'JournalEntry' }\n    & EntryUpdateValueFragment\n  )> };\n\nexport type EntryUpdateValueFragment = { __typename: 'JournalEntry', id: string, type: JournalEntryType, date: string, description: Maybe<string>, reconciled: boolean, department: (\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  ), category: (\n    { __typename?: 'JournalEntryCategory' }\n    & CatEntryOptFragment\n  ), source: (\n    { __typename?: 'Person' }\n    & SrcEntryPersonOptFragment\n  ) | (\n    { __typename?: 'Business' }\n    & SrcEntryBizOptFragment\n  ) | { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | (\n      { __typename?: 'Business' }\n      & SrcEntryBizOptFragment\n    )> }, paymentMethod: (\n    { __typename?: 'PaymentMethod' }\n    & PayMethodEntryOptFragment\n  ), total: { __typename?: 'Rational', num: number, den: number } };\n\nexport type UpsertEntryAddPersonMutationVariables = {\n  fields: PersonAddFields\n};\n\n\nexport type UpsertEntryAddPersonMutation = { __typename?: 'Mutation', addPerson: (\n    { __typename?: 'Person' }\n    & SrcEntryPersonOptFragment\n  ) };\n\nexport type UpsertEntryAddBusinessMutationVariables = {\n  fields: BusinessAddFields\n};\n\n\nexport type UpsertEntryAddBusinessMutation = { __typename?: 'Mutation', addBusiness: (\n    { __typename?: 'Business' }\n    & SrcEntryBizOptFragment\n  ) };\n\nexport type UpsertEntryAddMutationVariables = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type UpsertEntryAddMutation = { __typename?: 'Mutation', journalEntryAdd: { __typename: 'JournalEntry', id: string } };\n\nexport type UpsertEntryUpdateMutationVariables = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type UpsertEntryUpdateMutation = { __typename?: 'Mutation', journalEntryUpdate: { __typename: 'JournalEntry', id: string } };\n\nexport type DeptEntryOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type CatEntryOptFragment = { __typename: 'JournalEntryCategory', id: string, name: string, type: JournalEntryType, parent: Maybe<{ __typename?: 'JournalEntryCategory', id: string }> };\n\nexport type SrcEntryPersonOptFragment = { __typename: 'Person', id: string, personName: { __typename?: 'PersonName', first: string, last: string } };\n\nexport type SrcEntryDeptOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type SrcEntryBizOptFragment = { __typename: 'Business', id: string, name: string, vendor: Maybe<{ __typename?: 'Vendor', approved: boolean, vendorId: Maybe<string> }>, departments: Array<(\n    { __typename?: 'Department' }\n    & SrcEntryDeptOptFragment\n  )> };\n\nexport type PayMethodEntryOptFragment = { __typename: 'PaymentMethod', id: string, method: string, active: boolean };\n\nexport type CatInputOpts_1QueryVariables = {};\n\n\nexport type CatInputOpts_1Query = { __typename?: 'Query', catOpts: Array<(\n    { __typename?: 'JournalEntryCategory' }\n    & CatInputOptsCat_1Fragment\n  )> };\n\nexport type CatInputOptsCat_1Fragment = { __typename: 'JournalEntryCategory', id: string, name: string, type: JournalEntryType, parent: Maybe<{ __typename?: 'JournalEntryCategory', id: string }> };\n\nexport type DeptInputOpts_1QueryVariables = {\n  fromParent?: Maybe<Scalars['ID']>\n};\n\n\nexport type DeptInputOpts_1Query = { __typename?: 'Query', deptOpts: Array<(\n    { __typename?: 'Department' }\n    & DeptInputOptsDept_1Fragment\n  )> };\n\nexport type DeptInputOptsDept_1Fragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type Lc_JournalEntryUpsert_1Fragment = { __typename: 'LC_JournalEntryUpsert', id: string, valid: boolean, type: Lc_JournalEntryUpsertType, submitStatus: Lc_JournalEntryUpsertSubmitStatus, submitError: Maybe<string>, inputValues: { __typename?: 'LC_JournalEntryUpsertInputValues', deptInput: Maybe<string>, totalInput: Maybe<string>, srcInput: Maybe<string>, srcType: Maybe<JournalEntrySourceType> }, inputErrors: { __typename?: 'LC_JournalEntryUpsertInputErrors', dateError: Maybe<string>, deptError: Maybe<string>, typeError: Maybe<string>, payMethodError: Maybe<string>, totalError: Maybe<string>, srcError: Maybe<string> }, fields: { __typename?: 'LC_JournalEntryUpsertFields', id: Maybe<string>, date: Maybe<string>, department: Array<string>, type: Maybe<string>, paymentMethod: Maybe<string>, total: Maybe<{ __typename?: 'Rational', num: number, den: number }>, source: Array<{ __typename?: 'LC_JournalEntryUpsertSource', sourceType: JournalEntrySourceType, id: string }> } };\n\nexport type Lc_JournalEntryUpserts_1QueryVariables = {};\n\n\nexport type Lc_JournalEntryUpserts_1Query = { __typename?: 'Query', lc_journalEntryUpserts: Array<(\n    { __typename?: 'LC_JournalEntryUpsert' }\n    & Lc_JournalEntryUpsert_1Fragment\n  )> };\n\nexport type AddJournalEntry_1MutationVariables = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type AddJournalEntry_1Mutation = { __typename?: 'Mutation', journalEntryAdd: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_1MutationVariables = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type UpdateJournalEntry_1Mutation = { __typename?: 'Mutation', journalEntryUpdate: { __typename: 'JournalEntry', id: string } };\n\nexport type PayMethodInput_1QueryVariables = {};\n\n\nexport type PayMethodInput_1Query = { __typename?: 'Query', paymentMethods: Array<{ __typename: 'PaymentMethod', id: string, method: string, active: boolean }> };\n\nexport type BusinessSrcDeptOpts_1Fragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type BusinessSrcBizOpts_1Fragment = { __typename: 'Business', id: string, name: string, vendor: Maybe<{ __typename?: 'Vendor', approved: boolean, vendorId: Maybe<string> }>, deptOpts: Array<(\n    { __typename?: 'Department' }\n    & BusinessSrcDeptOpts_1Fragment\n  )> };\n\nexport type BusinessSrcOptsInput_1QueryVariables = {\n  searchByName: Scalars['String'],\n  deptId: Scalars['ID'],\n  bizId: Scalars['ID'],\n  withBizOpt: Scalars['Boolean'],\n  withDeptAncestors: Scalars['Boolean'],\n  withBizOpts: Scalars['Boolean']\n};\n\n\nexport type BusinessSrcOptsInput_1Query = { __typename?: 'Query', bizOpt: (\n    { __typename?: 'Business' }\n    & BusinessSrcBizOpts_1Fragment\n  ), deptAncestors: Maybe<{ __typename: 'Department', id: string, ancestors: Array<(\n      { __typename?: 'Department' }\n      & BusinessSrcDeptOpts_1Fragment\n    ) | (\n      { __typename?: 'Business' }\n      & BusinessSrcBizOpts_1Fragment\n    )> }>, bizOpts: Array<(\n    { __typename?: 'Business' }\n    & BusinessSrcBizOpts_1Fragment\n  )> };\n\nexport type BizSrcInsureBizDataQueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type BizSrcInsureBizDataQuery = { __typename?: 'Query', business: (\n    { __typename?: 'Business' }\n    & BusinessSrcBizOpts_1Fragment\n  ) };\n\nexport type PersonSrcOpt_1Fragment = { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } };\n\nexport type PeopleSrcOpts_1QueryVariables = {\n  searchByName: PersonNameInput\n};\n\n\nexport type PeopleSrcOpts_1Query = { __typename?: 'Query', people: Array<(\n    { __typename?: 'Person' }\n    & PersonSrcOpt_1Fragment\n  )> };\n\nexport type DeptsForNav_1QueryVariables = {};\n\n\nexport type DeptsForNav_1Query = { __typename?: 'Query', departments: Array<{ __typename: 'Department', id: string, name: string, virtualRoot: Maybe<boolean>, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } }> };\n\nexport type AddPerson_1MutationVariables = {\n  fields: PersonAddFields\n};\n\n\nexport type AddPerson_1Mutation = { __typename?: 'Mutation', addPerson: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } };\n\nexport type AddBusiness_1MutationVariables = {\n  fields: BusinessAddFields\n};\n\n\nexport type AddBusiness_1Mutation = { __typename?: 'Mutation', addBusiness: { __typename: 'Business', id: string, name: string } };\n\nexport type AddJournalEntry_2MutationVariables = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type AddJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryAdd: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_2MutationVariables = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type UpdateJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CategoryTypeValidation_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type CategoryTypeValidation_1Query = { __typename?: 'Query', journalEntryCategory: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType } };\n\nexport type ValidateDeptIsLeaf_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type ValidateDeptIsLeaf_1Query = { __typename?: 'Query', department: Maybe<{ __typename: 'Department', id: string, descendants: Array<{ __typename: 'Department', id: string }> }> };\n\nexport type CheckValidVendor_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type CheckValidVendor_1Query = { __typename?: 'Query', business: { __typename: 'Business', id: string, vendor: Maybe<{ __typename?: 'Vendor', approved: boolean }> } };\n\n\n\nexport type ResolverTypeWrapper<T> = Promise<T> | T;\n\nexport type ResolverFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Promise<TResult> | TResult;\n\nexport type Resolver<TResult, TParent = {}, TContext = {}, TArgs = {}> = ResolverFn<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionSubscribeFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => AsyncIterator<TResult> | Promise<AsyncIterator<TResult>>;\n\nexport type SubscriptionResolveFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\nexport interface SubscriptionSubscriberObject<TResult, TKey extends string, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<{ [key in TKey]: TResult }, TParent, TContext, TArgs>;\n  resolve?: SubscriptionResolveFn<TResult, { [key in TKey]: TResult }, TContext, TArgs>;\n}\n\nexport interface SubscriptionResolverObject<TResult, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<any, TParent, TContext, TArgs>;\n  resolve: SubscriptionResolveFn<TResult, any, TContext, TArgs>;\n}\n\nexport type SubscriptionObject<TResult, TKey extends string, TParent, TContext, TArgs> =\n  | SubscriptionSubscriberObject<TResult, TKey, TParent, TContext, TArgs>\n  | SubscriptionResolverObject<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionResolver<TResult, TKey extends string, TParent = {}, TContext = {}, TArgs = {}> =\n  | ((...args: any[]) => SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>)\n  | SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>;\n\nexport type TypeResolveFn<TTypes, TParent = {}, TContext = {}> = (\n  parent: TParent,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Maybe<TTypes>;\n\nexport type NextResolverFn<T> = () => Promise<T>;\n\nexport type DirectiveResolverFn<TResult = {}, TParent = {}, TContext = {}, TArgs = {}> = (\n  next: NextResolverFn<TResult>,\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\n/** Mapping between all available schema types and the resolvers types */\nexport type ResolversTypes = {\n  Query: ResolverTypeWrapper<{}>,\n  LC_JournalEntryUpsert: ResolverTypeWrapper<Lc_JournalEntryUpsert>,\n  ID: ResolverTypeWrapper<Scalars['ID']>,\n  Boolean: ResolverTypeWrapper<Scalars['Boolean']>,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  String: ResolverTypeWrapper<Scalars['String']>,\n  LC_JournalEntryUpsertInputValues: ResolverTypeWrapper<Lc_JournalEntryUpsertInputValues>,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: ResolverTypeWrapper<Lc_JournalEntryUpsertInputErrors>,\n  LC_JournalEntryUpsertFields: ResolverTypeWrapper<Lc_JournalEntryUpsertFields>,\n  Rational: ResolverTypeWrapper<Rational>,\n  Int: ResolverTypeWrapper<Scalars['Int']>,\n  LC_JournalEntryUpsertSource: ResolverTypeWrapper<Lc_JournalEntryUpsertSource>,\n  Budget: ResolverTypeWrapper<Omit<Budget, 'owner'> & { owner: ResolversTypes['BudgetOwner'] }>,\n  BudgetOwner: ResolversTypes['Department'] | ResolversTypes['Business'],\n  Department: ResolverTypeWrapper<Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversTypes['DepartmentAncestor'], ancestors: Array<ResolversTypes['DepartmentAncestor']> }>,\n  Business: ResolverTypeWrapper<Business>,\n  Vendor: ResolverTypeWrapper<Vendor>,\n  DepartmentAncestor: ResolversTypes['Department'] | ResolversTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: ResolverTypeWrapper<Omit<JournalEntry, 'source'> & { source: ResolversTypes['JournalEntrySource'] }>,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: ResolverTypeWrapper<JournalEntryCategory>,\n  PaymentMethod: ResolverTypeWrapper<PaymentMethod>,\n  JournalEntrySource: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  Person: ResolverTypeWrapper<Person>,\n  PersonName: ResolverTypeWrapper<PersonName>,\n  PersonNameInput: PersonNameInput,\n  Mutation: ResolverTypeWrapper<{}>,\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  JournalEntryAddFields: JournalEntryAddFields,\n  PersonAddFields: PersonAddFields,\n  Subscription: ResolverTypeWrapper<{}>,\n  ByIdFilter: ByIdFilter,\n  CacheControlScope: CacheControlScope,\n  DepartmentAddFields: DepartmentAddFields,\n  FilterType: FilterType,\n  JournalEntriesRes: ResolverTypeWrapper<JournalEntriesRes>,\n  JournalEntryAddedRes: ResolverTypeWrapper<JournalEntryAddedRes>,\n  PaginateInput: PaginateInput,\n  SortDirection: SortDirection,\n  Upload: ResolverTypeWrapper<Scalars['Upload']>,\n  User: ResolverTypeWrapper<User>,\n};\n\n/** Mapping between all available schema types and the resolvers parents */\nexport type ResolversParentTypes = {\n  Query: {},\n  LC_JournalEntryUpsert: Lc_JournalEntryUpsert,\n  ID: Scalars['ID'],\n  Boolean: Scalars['Boolean'],\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  String: Scalars['String'],\n  LC_JournalEntryUpsertInputValues: Lc_JournalEntryUpsertInputValues,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: Lc_JournalEntryUpsertInputErrors,\n  LC_JournalEntryUpsertFields: Lc_JournalEntryUpsertFields,\n  Rational: Rational,\n  Int: Scalars['Int'],\n  LC_JournalEntryUpsertSource: Lc_JournalEntryUpsertSource,\n  Budget: Omit<Budget, 'owner'> & { owner: ResolversParentTypes['BudgetOwner'] },\n  BudgetOwner: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  Department: Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversParentTypes['DepartmentAncestor'], ancestors: Array<ResolversParentTypes['DepartmentAncestor']> },\n  Business: Business,\n  Vendor: Vendor,\n  DepartmentAncestor: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: Omit<JournalEntry, 'source'> & { source: ResolversParentTypes['JournalEntrySource'] },\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: JournalEntryCategory,\n  PaymentMethod: PaymentMethod,\n  JournalEntrySource: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  Person: Person,\n  PersonName: PersonName,\n  PersonNameInput: PersonNameInput,\n  Mutation: {},\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  JournalEntryAddFields: JournalEntryAddFields,\n  PersonAddFields: PersonAddFields,\n  Subscription: {},\n  ByIdFilter: ByIdFilter,\n  CacheControlScope: CacheControlScope,\n  DepartmentAddFields: DepartmentAddFields,\n  FilterType: FilterType,\n  JournalEntriesRes: JournalEntriesRes,\n  JournalEntryAddedRes: JournalEntryAddedRes,\n  PaginateInput: PaginateInput,\n  SortDirection: SortDirection,\n  Upload: Scalars['Upload'],\n  User: User,\n};\n\nexport type CacheControlDirectiveResolver<Result, Parent, ContextType = Context, Args = {   maxAge?: Maybe<Maybe<Scalars['Int']>>,\n  scope?: Maybe<Maybe<CacheControlScope>> }> = DirectiveResolverFn<Result, Parent, ContextType, Args>;\n\nexport type BudgetResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Budget'] = ResolversParentTypes['Budget']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  amount?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  owner?: Resolver<ResolversTypes['BudgetOwner'], ParentType, ContextType>,\n};\n\nexport type BudgetOwnerResolvers<ContextType = Context, ParentType extends ResolversParentTypes['BudgetOwner'] = ResolversParentTypes['BudgetOwner']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type BusinessResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Business'] = ResolversParentTypes['Business']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  vendor?: Resolver<Maybe<ResolversTypes['Vendor']>, ParentType, ContextType>,\n};\n\nexport type DepartmentResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Department'] = ResolversParentTypes['Department']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  code?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType>,\n  parent?: Resolver<ResolversTypes['DepartmentAncestor'], ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['DepartmentAncestor']>, ParentType, ContextType>,\n  descendants?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  virtualRoot?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n};\n\nexport type DepartmentAncestorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['DepartmentAncestor'] = ResolversParentTypes['DepartmentAncestor']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type JournalEntriesResResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntriesRes'] = ResolversParentTypes['JournalEntriesRes']> = {\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  entries?: Resolver<Array<ResolversTypes['JournalEntry']>, ParentType, ContextType>,\n};\n\nexport type JournalEntryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntry'] = ResolversParentTypes['JournalEntry']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  department?: Resolver<ResolversTypes['Department'], ParentType, ContextType>,\n  category?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  source?: Resolver<ResolversTypes['JournalEntrySource'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastUpdate?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  deleted?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n};\n\nexport type JournalEntryAddedResResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryAddedRes'] = ResolversParentTypes['JournalEntryAddedRes']> = {\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  index?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  entry?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType>,\n};\n\nexport type JournalEntryCategoryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryCategory'] = ResolversParentTypes['JournalEntryCategory']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n};\n\nexport type JournalEntrySourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntrySource'] = ResolversParentTypes['JournalEntrySource']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type Lc_JournalEntryUpsertResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsert'] = ResolversParentTypes['LC_JournalEntryUpsert']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  valid?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['LC_JournalEntryUpsertType'], ParentType, ContextType>,\n  submitStatus?: Resolver<ResolversTypes['LC_JournalEntryUpsertSubmitStatus'], ParentType, ContextType>,\n  submitError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  inputValues?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputValues'], ParentType, ContextType>,\n  inputErrors?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputErrors'], ParentType, ContextType>,\n  fields?: Resolver<ResolversTypes['LC_JournalEntryUpsertFields'], ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertFieldsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertFields'] = ResolversParentTypes['LC_JournalEntryUpsertFields']> = {\n  id?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  date?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  department?: Resolver<Array<ResolversTypes['ID']>, ParentType, ContextType>,\n  type?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  total?: Resolver<Maybe<ResolversTypes['Rational']>, ParentType, ContextType>,\n  source?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsertSource']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrorsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputErrors'] = ResolversParentTypes['LC_JournalEntryUpsertInputErrors']> = {\n  dateError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  deptError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  typeError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  payMethodError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertInputValuesResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputValues'] = ResolversParentTypes['LC_JournalEntryUpsertInputValues']> = {\n  deptInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcType?: Resolver<Maybe<ResolversTypes['JournalEntrySourceType']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertSourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertSource'] = ResolversParentTypes['LC_JournalEntryUpsertSource']> = {\n  sourceType?: Resolver<ResolversTypes['JournalEntrySourceType'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n};\n\nexport type MutationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Mutation'] = ResolversParentTypes['Mutation']> = {\n  addBusiness?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<MutationAddBusinessArgs, 'fields'>>,\n  journalEntryUpdate?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryUpdateArgs, 'id' | 'fields'>>,\n  journalEntryAdd?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryAddArgs, 'fields'>>,\n  journalEntryDelete?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryDeleteArgs, 'id'>>,\n  addPerson?: Resolver<ResolversTypes['Person'], ParentType, ContextType, RequireFields<MutationAddPersonArgs, 'fields'>>,\n};\n\nexport type PaymentMethodResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethod'] = ResolversParentTypes['PaymentMethod']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  active?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  method?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n};\n\nexport type PersonResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Person'] = ResolversParentTypes['Person']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['PersonName'], ParentType, ContextType>,\n};\n\nexport type PersonNameResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PersonName'] = ResolversParentTypes['PersonName']> = {\n  first?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  last?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type QueryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Query'] = ResolversParentTypes['Query']> = {\n  lc_journalEntryUpserts?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsert']>, ParentType, ContextType>,\n  budgets?: Resolver<Array<ResolversTypes['Budget']>, ParentType, ContextType>,\n  budget?: Resolver<ResolversTypes['Budget'], ParentType, ContextType, RequireFields<QueryBudgetArgs, 'id'>>,\n  businesses?: Resolver<Array<ResolversTypes['Business']>, ParentType, ContextType, QueryBusinessesArgs>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<QueryBusinessArgs, 'id'>>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType, QueryDepartmentsArgs>,\n  department?: Resolver<Maybe<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentArgs, 'id'>>,\n  journalEntries?: Resolver<Array<ResolversTypes['JournalEntry']>, ParentType, ContextType, QueryJournalEntriesArgs>,\n  journalEntry?: Resolver<Maybe<ResolversTypes['JournalEntry']>, ParentType, ContextType, RequireFields<QueryJournalEntryArgs, 'id'>>,\n  journalEntryCategories?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  journalEntryCategory?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType, RequireFields<QueryJournalEntryCategoryArgs, 'id'>>,\n  journalEntrySources?: Resolver<Array<ResolversTypes['JournalEntrySource']>, ParentType, ContextType, RequireFields<QueryJournalEntrySourcesArgs, 'searchByName'>>,\n  paymentMethods?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  people?: Resolver<Array<ResolversTypes['Person']>, ParentType, ContextType, QueryPeopleArgs>,\n};\n\nexport type RationalResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Rational'] = ResolversParentTypes['Rational']> = {\n  num?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  den?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type SubscriptionResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Subscription'] = ResolversParentTypes['Subscription']> = {\n  journalEntryAdded?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryAdded\", ParentType, ContextType>,\n  journalEntryUpdated?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpdated\", ParentType, ContextType>,\n};\n\nexport interface UploadScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Upload'], any> {\n  name: 'Upload'\n}\n\nexport type UserResolvers<ContextType = Context, ParentType extends ResolversParentTypes['User'] = ResolversParentTypes['User']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  user?: Resolver<ResolversTypes['Person'], ParentType, ContextType>,\n};\n\nexport type VendorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Vendor'] = ResolversParentTypes['Vendor']> = {\n  approved?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  vendorId?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n};\n\nexport type Resolvers<ContextType = Context> = {\n  Budget?: BudgetResolvers<ContextType>,\n  BudgetOwner?: BudgetOwnerResolvers,\n  Business?: BusinessResolvers<ContextType>,\n  Department?: DepartmentResolvers<ContextType>,\n  DepartmentAncestor?: DepartmentAncestorResolvers,\n  JournalEntriesRes?: JournalEntriesResResolvers<ContextType>,\n  JournalEntry?: JournalEntryResolvers<ContextType>,\n  JournalEntryAddedRes?: JournalEntryAddedResResolvers<ContextType>,\n  JournalEntryCategory?: JournalEntryCategoryResolvers<ContextType>,\n  JournalEntrySource?: JournalEntrySourceResolvers,\n  LC_JournalEntryUpsert?: Lc_JournalEntryUpsertResolvers<ContextType>,\n  LC_JournalEntryUpsertFields?: Lc_JournalEntryUpsertFieldsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputErrors?: Lc_JournalEntryUpsertInputErrorsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputValues?: Lc_JournalEntryUpsertInputValuesResolvers<ContextType>,\n  LC_JournalEntryUpsertSource?: Lc_JournalEntryUpsertSourceResolvers<ContextType>,\n  Mutation?: MutationResolvers<ContextType>,\n  PaymentMethod?: PaymentMethodResolvers<ContextType>,\n  Person?: PersonResolvers<ContextType>,\n  PersonName?: PersonNameResolvers<ContextType>,\n  Query?: QueryResolvers<ContextType>,\n  Rational?: RationalResolvers<ContextType>,\n  Subscription?: SubscriptionResolvers<ContextType>,\n  Upload?: GraphQLScalarType,\n  User?: UserResolvers<ContextType>,\n  Vendor?: VendorResolvers<ContextType>,\n};\n\n\n/**\n * @deprecated\n * Use \"Resolvers\" root object instead. If you wish to get \"IResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IResolvers<ContextType = Context> = Resolvers<ContextType>;\nexport type DirectiveResolvers<ContextType = Context> = {\n  cacheControl?: CacheControlDirectiveResolver<any, any, ContextType>,\n};\n\n\n/**\n* @deprecated\n* Use \"DirectiveResolvers\" root object instead. If you wish to get \"IDirectiveResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IDirectiveResolvers<ContextType = Context> = DirectiveResolvers<ContextType>;","import {useCallback, useMemo} from \"react\";\nimport {Action} from \"redux\";\nimport {useDispatch, batch} from \"react-redux\";\nimport {ThunkAction, ThunkDispatch} from \"redux-thunk\";\n\nimport {Thunk} from \"./actions/types\";\n\nexport const useBatchDispatch = () => {\n\n  const dispatch = useDispatch();\n\n  const batchDispatch = useCallback(<Actions extends Action[]>(\n    batchActions:Actions) => \n  {\n    \n    const thunk:ThunkAction<void, any, any, Action> = (dispatch) => {\n      \n      batch(()=>{\n        for(const action of batchActions) {\n          dispatch(action);\n        }\n      });\n  \n    }\n    \n    dispatch(thunk);\n\n  },[dispatch]);\n  \n  return batchDispatch;\n\n}\n\nexport type DebounceA = Action<any> | Thunk<any, any>;\n\nconst globalDebounceDispatchState = {\n  dispatchId:null as ReturnType<typeof setTimeout> | null,\n  dispatchQueue:new Map<string | symbol,\n    [DebounceA, ThunkDispatch<any, any, any>]>(),\n  ms:5\n};\n\nexport function useDebounceDispatch(global:true):\n  <A extends DebounceA>(action: A) => void;\nexport function useDebounceDispatch(global:false, ms:number):\n  <A extends DebounceA>(action: A) => void;\n  export function useDebounceDispatch(global?:boolean, ms?:number):\n  <A extends DebounceA>(action: A) => void;\nexport function useDebounceDispatch(global:boolean = true, ms = 5){\n\n  const dispatch = useDispatch();\n\n  const debounceDispatchState = useMemo(() => {\n    return global ? globalDebounceDispatchState : {\n      dispatchId:null as ReturnType<typeof setTimeout> | null,\n      dispatchQueue:new Map<string | symbol,\n        [DebounceA, ThunkDispatch<any, any, any>]>(),\n      ms\n    }\n  },[global, ms]);\n\n  const debouchDispatch = useCallback(<A extends DebounceA>(action:A) => {\n\n    const thunk:ThunkAction<void, any, any, any> = (dispatch) => {\n      \n      const {dispatchQueue} = debounceDispatchState;\n\n      if(debounceDispatchState.dispatchId === null) {\n        \n        debounceDispatchState.dispatchId = setTimeout(() => {\n  \n          debounceDispatchState.dispatchId = null;\n          \n          batch(()=>{\n            for(const [action, dispatch] of dispatchQueue.values()) {\n              dispatch(action);\n            }\n          });\n          \n          dispatchQueue.clear();\n  \n        }, debounceDispatchState.ms);\n      \n      }\n      \n      const key = typeof action === \"function\" ? Symbol() : \n        (action as any)?.type as string;\n\n      dispatchQueue.set(key, [action, dispatch]); \n\n    }\n\n    dispatch(thunk);\n\n  },[debounceDispatchState, dispatch]);\n\n  return debouchDispatch;\n\n}","import React, { useCallback } from \"react\";\nimport { useApolloClient } from \"@apollo/react-hooks\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\nimport { TableCell } from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport { Theme } from \"@material-ui/core/styles\";\nimport { red, green } from \"@material-ui/core/colors\";\n\nimport { randUUID } from \"../../../utils/uuid\";\nimport TransactionDate from \"./Cells/TransactionDate\";\nimport Department from \"./Cells/Department\";\n// import Type from \"./Cells/Type\";\nimport Category from \"./Cells/Category\";\nimport Source from \"./Cells/Source\";\nimport PaymentMethod from \"./Cells/PaymentMethod\";\nimport Description from \"./Cells/Description\";\nimport Total from \"./Cells/Total\";\nimport Reconciled from \"./Cells/Reconciled\";\nimport { JournalEntryType } from \"../../../apollo/graphTypes\";\nimport { create } from \"../../../redux/actions/journalEntryUpsert\";\nimport { useDebounceDispatch as useDispatch } from \"../../../redux/hooks\";\nimport { entryUpsertId } from \"./Journal\";\nimport { JournalMode } from \"./Body\";\n\nconst styles = makeStyles((theme: Theme) =>\n  createStyles({\n    positive: {\n      color: green[900]\n    },\n    negative: {\n      color: red[900]\n    }\n  })\n);\n\ntype JournalEntryFragment = any;\n\nexport interface EntryProps {\n  journalEntry?: JournalEntryFragment | null;\n  deptId?: string;\n  mode: JournalMode;\n  style: React.CSSProperties;\n  updateEntry: (entryId: string) => void;\n  removeReconciled: (id: string) => void;\n}\n\nexport const EntrySkeleton = function() {\n  const skeleton = <Skeleton variant=\"rect\" height={48} />;\n\n  return (\n    <TableRow key={randUUID()}>\n      <TableCell children={skeleton} />\n      <TableCell children={skeleton} />\n      <TableCell children={skeleton} />\n      <TableCell children={skeleton} />\n      <TableCell children={skeleton} />\n      <TableCell children={skeleton} />\n    </TableRow>\n  );\n};\n\nconst Entry = function(props: EntryProps) {\n  const classes = styles();\n\n  const dispatch = useDispatch();\n\n  const client = useApolloClient();\n\n  const {\n    journalEntry = null,\n    style,\n    deptId,\n    mode,\n    updateEntry,\n    removeReconciled\n  } = props;\n\n  const onDoubleClick = useCallback(\n    event => {\n      if (journalEntry) {\n        updateEntry(journalEntry.id);\n        // dispatch(create(entryUpsertId, {\n        //   entryId:journalEntry.id,\n        //   fromDept:deptId,\n        //   client\n        // }));\n      }\n    },\n    [journalEntry, dispatch, deptId, client, updateEntry]\n  );\n\n  if (journalEntry === null) {\n    const skeleton = <Skeleton variant=\"rect\" height={20} />;\n\n    return (\n      <Box style={style} display=\"flex !important\" clone>\n        <TableRow component=\"div\">\n          <Box flexGrow={1} clone>\n            <TableCell component=\"div\" children={skeleton} />\n          </Box>\n        </TableRow>\n      </Box>\n    );\n  }\n\n  const textColor =\n    journalEntry.category.type === JournalEntryType.Credit\n      ? classes.positive\n      : classes.negative;\n\n  return (\n    <Box style={style} display=\"flex !important\" clone>\n      <TableRow onDoubleClick={onDoubleClick} component=\"div\" hover>\n        <TransactionDate textColor={textColor} entryDate={journalEntry.date} />\n        <Department\n          textColor={textColor}\n          department={journalEntry.department}\n        />\n        <Category textColor={textColor} category={journalEntry.category} />\n        <Source textColor={textColor} source={journalEntry.source} />\n        <PaymentMethod\n          textColor={textColor}\n          paymentMethod={journalEntry.paymentMethod}\n        />\n        <Description\n          textColor={textColor}\n          description={journalEntry.description}\n        />\n        <Total textColor={textColor} total={journalEntry.total} />\n        <Reconciled\n          removeReconciled={removeReconciled}\n          entryId={journalEntry.id}\n          mode={mode}\n          textColor={textColor}\n          reconciled={journalEntry.reconciled}\n        />\n      </TableRow>\n    </Box>\n  );\n};\n\nexport default Entry;\n","import React, { useCallback, useMemo, useEffect } from \"react\";\nimport { useSelector, shallowEqual } from \"react-redux\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport Box from \"@material-ui/core/Box\";\nimport { FixedSizeList as List, FixedSizeListProps } from \"react-window\";\n\nimport Entry from \"./Entry\";\nimport {\n  JOURNAL_ENTRIES,\n  JOURNAL_ENTRY_ADDED_SUB,\n  JOURNAL_ENTRY_UPDATED_SUB,\n  JOURNAL_ENTRY_FRAGMENT\n} from \"./JournalEntries.gql\";\nimport { ROW_ID } from \"./Cells/cellsReduxIni\";\nimport { Root } from \"../../../redux/reducers/root\";\nimport { TableCell as CellFormat } from \"../../../redux/reducers/tableRows\";\nimport { getIndexedCells } from \"../../../redux/selectors/tableRows\";\nimport {\n  JournalEntries_1Query as JournalEntriesQuery,\n  JournalEntries_1QueryVariables as JournalEntriesQueryVars,\n  JournalEntryAdded_1Subscription as JournalEntryAdded,\n  JournalEntryUpdated_1Subscription as JournalEntryUpdated,\n  JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../apollo/graphTypes\";\n\nexport enum JournalMode {\n  View,\n  Reconcile\n}\n\nexport interface BodyProps {\n  deptId?: string;\n  mode: JournalMode;\n  height: number;\n  width: number;\n  updateEntry: (entryId: string) => void;\n}\n\nconst Body = function(props: BodyProps) {\n  const { height, deptId, mode, width: parentWidth, updateEntry } = props;\n\n  const variables = useMemo<JournalEntriesQueryVars | undefined>(() => {\n    return deptId\n      ? {\n          where: { department: { eq: deptId } }\n        }\n      : undefined;\n  }, [deptId]);\n\n  const cellFormats = useSelector<Root, CellFormat[]>(\n    state => getIndexedCells(state, ROW_ID),\n    shallowEqual\n  );\n\n  const width = useMemo(() => {\n    const minWidth = cellFormats.reduce((minWidth, cellFormat) => {\n      return minWidth + cellFormat.width;\n    }, 0);\n\n    return Math.max(minWidth, parentWidth);\n  }, [cellFormats, parentWidth]);\n\n  const { error, data, updateQuery, fetchMore, subscribeToMore } = useQuery<\n    JournalEntriesQuery,\n    JournalEntriesQueryVars\n  >(JOURNAL_ENTRIES, {\n    variables\n  });\n\n  const client = useApolloClient();\n\n  useEffect(() => {\n    // Check if query has been cache already\n    const cacheResults = (() => {\n      try {\n        return client.readQuery<JournalEntriesQuery, JournalEntriesQueryVars>({\n          query: JOURNAL_ENTRIES,\n          variables\n        });\n      } catch (error) {\n        return null;\n      }\n    })();\n\n    // Request updated for any changes since last cache\n    if (cacheResults?.journalEntries) {\n      const gt = cacheResults.journalEntries\n        .reduce((date, entry) => {\n          const entryDate = new Date(entry.lastUpdate);\n          return entryDate > date ? entryDate : date;\n        }, new Date(0))\n        .toISOString();\n\n      fetchMore({\n        variables: variables\n          ? {\n              ...variables,\n              where: {\n                ...(variables?.where || {}),\n                lastUpdate: { gt }\n              }\n            }\n          : {\n              where: {\n                lastUpdate: { gt }\n              }\n            },\n        updateQuery: (prev, { fetchMoreResult }) => ({\n          ...(prev || {}),\n          ...(fetchMoreResult || {}),\n          journalEntries: [\n            ...(prev?.journalEntries || []),\n            ...(fetchMoreResult?.journalEntries || [])\n          ]\n        })\n      });\n    }\n\n    // Subscribe to entry additions\n    const addUnSub = subscribeToMore<JournalEntryAdded>({\n      document: JOURNAL_ENTRY_ADDED_SUB,\n      updateQuery: (prev, { subscriptionData }) => {\n        const journalEntryAdded = subscriptionData?.data?.journalEntryAdded;\n\n        if (\n          !journalEntryAdded ||\n          (journalEntryAdded.id !== deptId &&\n            journalEntryAdded.department.ancestors.every(\n              dept => dept.__typename === \"Business\" || dept.id !== deptId\n            ))\n        ) {\n          return prev;\n        }\n\n        return {\n          ...(prev || {}),\n          journalEntries: [\n            ...(prev?.journalEntries || []),\n            ...([subscriptionData?.data?.journalEntryAdded] || [])\n          ]\n        };\n      }\n    });\n\n    // Subscribe to updates\n    const updateUnSub = subscribeToMore<JournalEntryUpdated>({\n      document: JOURNAL_ENTRY_UPDATED_SUB,\n      updateQuery: (prev, { subscriptionData }) => {\n        const journalEntryUpdated = subscriptionData?.data?.journalEntryUpdated;\n\n        if (journalEntryUpdated) {\n          client.writeFragment<JournalEntryFragment>({\n            id: `JournalEntry:${journalEntryUpdated.id}`,\n            fragment: JOURNAL_ENTRY_FRAGMENT,\n            data: journalEntryUpdated\n          });\n        }\n\n        return prev;\n      }\n    });\n\n    return () => {\n      addUnSub();\n      updateUnSub();\n    };\n  }, [variables, fetchMore, client, subscribeToMore, deptId]);\n\n  const removeReconciled = useCallback(\n    (id: string) => {\n      if (mode === JournalMode.View) {\n        return;\n      }\n\n      updateQuery(prev => {\n        const entries = prev.journalEntries || [];\n\n        for (let i = 0, len = entries.length; i < len; i++) {\n          if (entries[i].id === id) {\n            return {\n              ...prev,\n              journalEntries: [...entries.slice(0, i), ...entries.slice(i + 1)]\n            };\n          }\n        }\n\n        return prev;\n      });\n    },\n    [mode, updateQuery]\n  );\n\n  const entries = useMemo(() => {\n    const entries = data?.journalEntries || [];\n\n    if (mode === JournalMode.Reconcile) {\n      return entries\n        .filter(entry => !entry.reconciled && !entry.deleted)\n        .sort(\n          (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()\n        );\n    }\n\n    return entries\n      .filter(entry => !entry.deleted)\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n  }, [data, mode]);\n\n  const iteCount = entries.length ?? 500;\n\n  const entryRow = useCallback(\n    ({ index, style }: { index: number; style: React.CSSProperties }) => {\n      const entry = entries[index];\n      return (\n        <Entry\n          mode={mode}\n          style={style}\n          journalEntry={entry}\n          removeReconciled={removeReconciled}\n          updateEntry={updateEntry}\n        />\n      );\n    },\n    [entries, mode, removeReconciled, updateEntry]\n  );\n\n  const itemKey = useCallback<NonNullable<FixedSizeListProps[\"itemKey\"]>>(\n    index => entries[index]?.id ?? index,\n    [entries]\n  );\n\n  if (error) {\n    return <div>{error.message}</div>;\n  }\n\n  return (\n    <Box height={height} display=\"block\" clone>\n      <TableBody component=\"div\">\n        <Box display=\"flex\" clone>\n          <List\n            itemKey={itemKey}\n            height={height}\n            width={width}\n            itemCount={iteCount}\n            itemSize={53}\n            overscanCount={10}\n          >\n            {entryRow}\n          </List>\n        </Box>\n      </TableBody>\n    </Box>\n  );\n};\n\nexport default Body;\n","import React, { useMemo } from \"react\";\nimport { useField, useFormikContext } from \"formik\";\nimport ToggleButtonGroup, {\n  ToggleButtonGroupProps\n} from \"@material-ui/lab/ToggleButtonGroup\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport { BankPlus, BankMinus } from \"mdi-material-ui\";\nimport {\n  Tooltip,\n  Box,\n  FormControlLabel,\n  FormControlLabelProps,\n  FormControl,\n  FormHelperText\n} from \"@material-ui/core\";\nimport { JournalEntryType } from \"../../../../apollo/graphTypes\";\nimport { Values } from \"../UpsertEntry\";\n\nconst NULLISH: unique symbol = Symbol();\n\nconst validate = (value: Values[\"type\"]) => {\n  if (((value ?? NULLISH) as any) === NULLISH) {\n    return \"Type Required\";\n  }\n};\n\nconst Type = function(\n  props: {\n    label?: boolean | FormControlLabelProps[\"labelPlacement\"];\n  } & ToggleButtonGroupProps\n) {\n  const { label = false } = props;\n\n  const { isSubmitting } = useFormikContext();\n\n  const [field, meta, helpers] = useField<JournalEntryType | null>({\n    name: \"type\",\n    validate\n  });\n\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const toggleButtonGroupProps: ToggleButtonGroupProps = useMemo(\n    () => ({\n      size: \"small\",\n      exclusive: true,\n      disabled: isSubmitting,\n      ...field,\n      onChange: async (event, value: JournalEntryType) => {\n        if (((value ?? NULLISH) as any) === NULLISH) {\n          return;\n        }\n\n        setValue(value);\n        await new Promise(resolve => setTimeout(resolve, 0)); //Avoid pres\n        setTouched(true);\n      }\n    }),\n    [field, isSubmitting, setValue, setTouched]\n  );\n\n  const control = useMemo(\n    () => (\n      <Box pl={1} clone>\n        <ToggleButtonGroup {...(props as any)} {...toggleButtonGroupProps}>\n          <ToggleButton value={JournalEntryType.Credit}>\n            <Tooltip arrow placement=\"top\" title=\"Credit\">\n              <BankPlus />\n            </Tooltip>\n          </ToggleButton>\n          <ToggleButton value={JournalEntryType.Debit}>\n            <Tooltip arrow placement=\"top\" title=\"Debit\">\n              <BankMinus />\n            </Tooltip>\n          </ToggleButton>\n        </ToggleButtonGroup>\n      </Box>\n    ),\n    [toggleButtonGroupProps, props]\n  );\n\n  if (label) {\n    return (\n      <FormControl>\n        <FormControlLabel\n          {...(props as any)}\n          labelPlacement={typeof label === \"boolean\" ? undefined : label}\n          control={control}\n          label=\"Type\"\n        />\n        {touched && !!error && <FormHelperText error>{error}</FormHelperText>}\n      </FormControl>\n    );\n  }\n\n  return (\n    <FormControl>\n      {control}\n      {!!error && <FormHelperText error>{error}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nexport default Type;\n","import React, { useMemo, useCallback, useRef } from \"react\";\nimport {\n  KeyboardDatePicker,\n  KeyboardDatePickerProps,\n  MuiPickersUtilsProvider\n} from \"@material-ui/pickers\";\nimport MomentUtils from \"@date-io/moment\";\nimport { useField, useFormikContext } from \"formik\";\nimport moment, { Moment } from \"moment\";\nimport { TextFieldProps } from \"@material-ui/core\";\n\nconst inputProps = {\n  inputMode: \"numeric\"\n} as const;\n\nconst keyboardButtonProps = {\n  tabIndex: -1\n} as const;\n\nconst validate = (value: Moment | null): string | undefined => {\n  if (value) {\n    if (!value.isValid()) {\n      return \"Invalid Date\";\n    }\n  } else {\n    return \"Date is Required\";\n  }\n};\n\nconst DateField = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    autoFocus?: boolean;\n  } & TextFieldProps\n) => {\n  const { variant: inputVariant = \"filled\", autoFocus = false } = props;\n\n  const calOpen = useRef(false);\n\n  const { isSubmitting } = useFormikContext();\n\n  const [field, meta, helpers] = useField<Moment | null>({\n    name: \"date\",\n    validate\n  });\n\n  const { value } = field;\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const InputProps = useMemo(\n    () => ({\n      autoFocus\n    }),\n    [autoFocus]\n  );\n\n  const onBlur = useCallback(\n    () =>\n      setTimeout(() => {\n        if (calOpen.current) {\n          return;\n        }\n        setTouched(true);\n      }, 0),\n    [setTouched, calOpen]\n  );\n\n  const onOpen = useCallback(() => (calOpen.current = true), [calOpen]);\n\n  const onClose = useCallback(() => {\n    calOpen.current = false;\n    onBlur();\n  }, [calOpen, onBlur]);\n\n  const onChange = useCallback(\n    (date: Moment | null) =>\n      setValue(date ? moment.min([date, moment()]) : date),\n    [setValue]\n  );\n\n  const dataPickerProps: KeyboardDatePickerProps = useMemo(\n    () => ({\n      ...field,\n      value: field.value,\n      disabled: isSubmitting,\n      error: touched && !!error,\n      helperText: touched ? error : undefined,\n      animateYearScrolling: true,\n      disableToolbar: true,\n      disableFuture: true,\n      inputVariant,\n      variant: \"inline\",\n      format: \"MM/DD/YYYY\",\n      margin: \"none\",\n      label: \"Date\",\n      initialFocusedDate: field.value || moment(),\n      autoOk: true,\n      InputProps,\n      inputProps,\n      placeholder: \"mm/dd/yyyy\",\n      KeyboardButtonProps: keyboardButtonProps,\n      onBlur,\n      onOpen,\n      onClose,\n      onChange\n    }),\n    [\n      onBlur,\n      error,\n      inputVariant,\n      InputProps,\n      isSubmitting,\n      field,\n      onOpen,\n      onClose,\n      onChange,\n      touched\n    ]\n  );\n\n  return (\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      <KeyboardDatePicker {...(props as any)} {...dataPickerProps} />\n    </MuiPickersUtilsProvider>\n  );\n};\n\nexport default DateField;\n","import gql from \"graphql-tag\";\n\nexport const DEPT_ENTRY_OPT_FRAGMENT = gql`\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n`;\n\nexport const CAT_ENTRY_OPT_FRAGMENT = gql`\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n`;\n\nexport const SRC_ENTRY_PERSON_OPT_FRAGMENT = gql`\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n`;\n\nexport const SRC_ENTRY_DEPT_OPT_FRAGMENT = gql`\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n`;\n\nexport const SRC_ENTRY_BIZ_OPT_FRAGMENT = gql`\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport const PAY_METHOD_ENTRY_OPT_FRAGMENT = gql`\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    method\n    active\n  }\n`;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport {\n  DeptEntryOptFragment as DeptValue,\n  DeptEntryOptsQuery,\n  DeptEntryOptsQueryVariables as DeptEntryOptsQueryVars\n} from \"../../../../apollo/graphTypes\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\n\nconst DEPT_OPTS_QUERY = gql`\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst businessId = \"5dc4b09bcf96e166daaa0090\";\n\ntype AutocompleteProps = AutocompletePropsRaw<DeptValue> &\n  UseAutocompleteMultipleProps<DeptValue>;\n\nconst getOptionLabel = (opt: DeptValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: DeptValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          disabled={!isLastIndex}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\nexport type DepartmentProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Department = function(props: DepartmentProps) {\n  const { loading, error: gqlError, data } = useQuery<\n    DeptEntryOptsQuery,\n    DeptEntryOptsQueryVars\n  >(DEPT_OPTS_QUERY, { variables: { fromParent: businessId } });\n\n  const depts = data?.deptOpts || [];\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  // Input must be controlled to stop input when leaf option is selected.\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const validate = useCallback(\n    (value: DeptValue | null) => {\n      if (!value) {\n        return \"Department Required\";\n      } else if (\n        depts.some(\n          ({ parent }) =>\n            parent.__typename === \"Department\" && parent.id === value.id\n        )\n      ) {\n        return \"Sub-department Required\";\n      }\n    },\n    [depts]\n  );\n\n  const [field, meta, helpers] = useField<DeptValue | null>({\n    name: \"department\",\n    validate\n  });\n\n  const { value: deptValue, onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const idDeptMap = useMemo(\n    () =>\n      new Map(\n        depts.reduce((idDepts, dept) => {\n          idDepts.push([dept.id, dept]);\n          return idDepts;\n        }, [] as [string, DeptValue][])\n      ),\n    [depts]\n  );\n\n  const value = useMemo(() => {\n    if (!deptValue) {\n      return [];\n    }\n\n    const value: DeptValue[] = [deptValue];\n\n    let { __typename, id } = deptValue.parent;\n\n    while (__typename !== \"Business\" && idDeptMap.has(id)) {\n      const parentDept = idDeptMap.get(id) as DeptValue;\n      value.unshift(parentDept);\n      ({ __typename, id } = parentDept.parent);\n    }\n\n    return value;\n  }, [deptValue, idDeptMap]);\n\n  const options = useMemo(() => {\n    const deptId = value[value.length - 1]?.id;\n    return depts.filter(opt =>\n      deptId ? opt.parent.id === deptId : opt.parent.__typename === \"Business\"\n    );\n  }, [depts, value]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0;\n  }, [value, options]);\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={touched ? error : undefined}\n          name=\"department\"\n          label=\"Department\"\n          disabled={disableTextInput}\n        />\n      );\n    },\n    [props, touched, error, disableTextInput]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    event => {\n      setHasFocus(false);\n      onBlurField(event);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      if (!value) {\n        setValue(null);\n      } else if (Array.isArray(value)) {\n        const len = value.length;\n        setValue(len === 0 ? null : value[len - 1]);\n      } else {\n        setValue(value);\n      }\n    },\n    [setValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, value: string, reason) => {\n      setInputValue((value || \"\").trimStart());\n    },\n    [setInputValue]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled: loading,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onChange,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      name: \"department\"\n    };\n  }, [\n    disableTextInput,\n    inputValue,\n    onInputChange,\n    onChange,\n    value,\n    loading,\n    renderInput,\n    field,\n    hasFocus,\n    onFocus,\n    onBlur,\n    options\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Department;\n","import React, { useCallback, useMemo, useState, useEffect } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport { CAT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  CatEntryOptsQuery,\n  CatEntryOptFragment as CatValue,\n  JournalEntryType\n} from \"../../../../apollo/graphTypes\";\n\nconst CAT_OPTS_QUERY = gql`\n  query CatEntryOpts {\n    catOpts: journalEntryCategories {\n      ...CatEntryOptFragment\n    }\n  }\n  ${CAT_ENTRY_OPT_FRAGMENT}\n`;\n\ntype AutocompleteProps = AutocompletePropsRaw<CatValue> &\n  UseAutocompleteMultipleProps<CatValue>;\n\nconst getOptionLabel = (opt: CatValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: CatValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          disabled={!isLastIndex}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nexport type CategoryProps = {\n  entryType: JournalEntryType | null;\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Category = function(props: CategoryProps) {\n  const { entryType, ...fowardProps } = props;\n\n  const { loading, error: gqlError, data } = useQuery<CatEntryOptsQuery>(\n    CAT_OPTS_QUERY\n  );\n\n  const categories = data?.catOpts || [];\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  // Input must be controlled to stop input when leaf option is selected.\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const validate = useCallback(\n    (value: CatValue | null) => {\n      if (!value) {\n        return \"Category Required\";\n      } else if (categories.some(({ parent }) => parent?.id === value.id)) {\n        return \"Sub-category Required\";\n      }\n    },\n    [categories]\n  );\n\n  const [field, meta, helpers] = useField<CatValue | null>({\n    name: \"category\",\n    validate\n  });\n\n  const { value: catValue, onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  // Reset category value if type changes\n  useEffect(() => {\n    if (\n      catValue !== null &&\n      entryType !== null &&\n      entryType !== catValue.type\n    ) {\n      setValue(null);\n    }\n  }, [entryType, catValue, setValue]);\n\n  const idCatMap = useMemo(\n    () =>\n      new Map(\n        categories.reduce((idCats, cat) => {\n          idCats.push([cat.id, cat]);\n          return idCats;\n        }, [] as [string, CatValue][])\n      ),\n    [categories]\n  );\n\n  const value = useMemo(() => {\n    if (!catValue) {\n      return [];\n    }\n\n    const value: CatValue[] = [catValue];\n\n    let id = catValue.parent?.id;\n\n    while (id && idCatMap.has(id)) {\n      const parentCat = idCatMap.get(id) as CatValue;\n      value.unshift(parentCat);\n      id = parentCat.parent?.id;\n    }\n\n    return value;\n  }, [catValue, idCatMap]);\n\n  const options = useMemo(() => {\n    const catId = value[value.length - 1]?.id;\n    if (entryType === null) {\n      return [];\n    } else if (catId) {\n      return categories.filter(\n        opt => opt.parent?.id === catId && opt.type === entryType\n      );\n    } else {\n      return categories.filter(opt => !opt.parent && opt.type === entryType);\n    }\n  }, [categories, value, entryType]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0;\n  }, [value, options]);\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(fowardProps as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={touched ? error : undefined}\n          name=\"category\"\n          label=\"Category\"\n          disabled={disableTextInput}\n        />\n      );\n    },\n    [props, fowardProps, touched, error, disableTextInput]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    event => {\n      setHasFocus(false);\n      onBlurField(event);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      if (!value) {\n        setValue(null);\n      } else if (Array.isArray(value)) {\n        const len = value.length;\n        setValue(len === 0 ? null : value[len - 1]);\n      } else {\n        setValue(value);\n      }\n    },\n    [setValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, value: string, reason) => {\n      value = (value || \"\").trimStart();\n      setInputValue(value);\n    },\n    [setInputValue]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled: loading,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      onChange,\n      name: \"category\"\n    };\n  }, [\n    disableTextInput,\n    onChange,\n    onInputChange,\n    inputValue,\n    value,\n    loading,\n    renderInput,\n    field,\n    hasFocus,\n    onFocus,\n    onBlur,\n    options\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Category;\n","import React, { useCallback, useMemo, useState, useRef } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\nimport { parseName } from \"humanparser\";\nimport * as namecase from \"namecase\";\nimport gql from \"graphql-tag\";\n\nimport {\n  JournalEntrySourceType,\n  SrcEntryOptsQuery,\n  SrcEntryOptsQueryVariables as SrcEntryOptsQueryVars,\n  SrcEntryBizOptFragment as BizOpt,\n  SrcEntryDeptOptFragment as DeptOpt,\n  SrcEntryPersonOptFragment as PersonOpt\n} from \"../../../../apollo/graphTypes\";\nimport { Values } from \"../UpsertEntry\";\nimport {\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT\n} from \"../upsertEntry.gql\";\n\nconst SRC_ENTRY_OPTS_QUERY = gql`\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport type SourceProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nexport type SrcObjectValue = BizOpt | DeptOpt | PersonOpt;\nexport type SourceValue = SrcObjectValue | string;\nexport type Value = SourceValue | JournalEntrySourceType;\ntype Options = Value[];\n\ntype AutocompleteProps = AutocompletePropsRaw<Value> &\n  UseAutocompleteMultipleProps<Value>;\n\nexport const isFreeSoloOpt = (opt: Value) => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n    case JournalEntrySourceType.Department:\n    case JournalEntrySourceType.Person:\n      break;\n    default:\n      return typeof opt === \"string\";\n  }\n  return false;\n};\n\nconst getOptionLabel: AutocompleteProps[\"getOptionLabel\"] = (opt): string => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n      return \"Vendor\";\n    case JournalEntrySourceType.Department:\n      return \"Department\";\n    case JournalEntrySourceType.Person:\n      return \"Person\";\n    default:\n      if (typeof opt === \"string\") {\n        return opt;\n      }\n  }\n\n  if (opt.__typename === \"Person\") {\n    return `${opt.personName.first} ${opt.personName.last}`;\n  }\n\n  return opt.name;\n};\n\nconst renderTags: AutocompleteProps[\"renderTags\"] = (values, getTagProps) => {\n  const lastIndex = values.length - 1;\n  return values.map((value: Value, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    if (isFreeSoloOpt(value)) {\n      return value;\n    }\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={getOptionLabel(value)}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nconst filterOptions: AutocompleteProps[\"filterOptions\"] = (\n  options,\n  { inputValue }\n) => {\n  const regex = new RegExp(`(^|\\\\s)${inputValue}`, \"i\");\n  return options.filter(opt => regex.test(getOptionLabel(opt)));\n};\nconst validate = ({ value }: Values[\"source\"]) => {\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  if (srcType === null || srcValue === null || srcValue === \"\") {\n    return \"Source Required\";\n  } else if (\n    isFreeSoloOpt(srcValue) &&\n    srcType === JournalEntrySourceType.Person\n  ) {\n    // Validate Free Solo Person name\n    const parsedName = parseName(srcValue as string);\n    if (!parsedName.firstName.trim()) {\n      return \"First Name Required\";\n    } else if (!parsedName.lastName.trim()) {\n      return \"Last Name Required\";\n    }\n  }\n};\n\nconst Source = function(props: SourceProps) {\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const [field, meta, helpers] = useField<Values[\"source\"]>({\n    name: \"source\",\n    validate\n  });\n\n  const { value: fieldValue } = field;\n  const { value, inputValue } = fieldValue;\n  const { onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  const searchedName = useRef(\"\");\n\n  const { loading, error: gqlError, data } = useQuery<\n    SrcEntryOptsQuery,\n    SrcEntryOptsQueryVars\n  >(SRC_ENTRY_OPTS_QUERY, {\n    skip: !searchedName.current && !value[1],\n    variables: {\n      name: searchedName.current,\n      isBiz: srcType !== JournalEntrySourceType.Person\n    }\n  });\n\n  const idDeptMap = useMemo(() => {\n    const idDeptMap = new Map<string, DeptOpt>();\n    for (const bizOpt of data?.businesses || []) {\n      for (const deptOpt of bizOpt.departments) {\n        idDeptMap.set(deptOpt.id, deptOpt);\n      }\n    }\n    return idDeptMap;\n  }, [data]);\n\n  const options = useMemo<Options>(() => {\n    if (srcType === null) {\n      return [JournalEntrySourceType.Business, JournalEntrySourceType.Person];\n      // Person ONLY person options\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return srcValue === null ? data?.people || [] : [];\n      // Only Business options\n    } else if (!srcValue) {\n      return data?.businesses || [];\n      // Free solo no options\n    } else if (typeof srcValue === \"string\") {\n      return [] as Options;\n    }\n\n    const options: DeptOpt[] = [];\n\n    for (const deptOpt of idDeptMap.values()) {\n      if (\n        deptOpt.parent.__typename === srcValue.__typename &&\n        deptOpt.parent.id === srcValue.id\n      ) {\n        options.push(deptOpt);\n      }\n    }\n\n    return options;\n  }, [srcType, data, idDeptMap, srcValue]);\n\n  const freeSolo = useMemo(() => {\n    return srcType !== null && srcValue === null;\n  }, [srcType, srcValue]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0 && !freeSolo;\n  }, [value, options, freeSolo]);\n\n  const label = useMemo(() => {\n    if (srcType === null) {\n      return \"Source Type\";\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return \"Person Name\";\n    } else if (value.length === 1) {\n      return \"Vendor\";\n    } else if (value.length === 2 && options.length > 0) {\n      return \"Department\";\n    } else if (options.length > 0) {\n      return \"Sub-Department\";\n    }\n\n    return \"Vendor\";\n  }, [value, options, srcType]);\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={touched ? error : undefined}\n          name=\"source\"\n          label={label}\n        />\n      );\n    },\n    [props, touched, error, label]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback<NonNullable<AutocompleteProps[\"onBlur\"]>>(\n    event => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      const srcValueIndex = value.length - 1;\n      const srcValue = value[srcValueIndex];\n      if (isFreeSoloOpt(srcValue)) {\n        const formattedSrcStrs: string[] = [];\n\n        for (let str of (srcValue as string).split(\" \")) {\n          if (str) {\n            if (namecase.checkName(str)) {\n              str = namecase(str);\n            }\n\n            formattedSrcStrs.push(str);\n          }\n        }\n\n        const formattedStr = formattedSrcStrs.join(\" \").trim();\n\n        value[srcValueIndex] =\n          formattedStr.charAt(0).toUpperCase() + formattedStr.substring(1);\n      }\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n\n      if (!disableTextInput) {\n        setValue({ inputValue, value });\n      }\n\n      if (srcType !== null && srcValue === null && inputValue) {\n        searchedName.current = inputValue[0].toLowerCase();\n      }\n    },\n    [setValue, srcType, srcValue, value, disableTextInput, searchedName]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      freeSolo,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      onChange,\n      filterOptions,\n      name: \"source\"\n    };\n  }, [\n    disableTextInput,\n    freeSolo,\n    inputValue,\n    onInputChange,\n    onChange,\n    value,\n    loading,\n    renderInput,\n    field,\n    hasFocus,\n    onFocus,\n    onBlur,\n    options\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Source;\n","import React, { useMemo } from \"react\";\nimport {\n  FormControl,\n  InputLabel,\n  Select,\n  FormHelperText,\n  FormControlProps,\n  MenuItem,\n  MenuItemProps\n} from \"@material-ui/core\";\nimport gql from \"graphql-tag\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { useField } from \"formik\";\n\nimport { PAY_METHOD_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport { Values } from \"../UpsertEntry\";\n\nconst PAY_METHOD_ENTRY_OPTS = gql`\n  query PayMethodEntryOpts {\n    paymentMethods {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nconst validate = (value: string) => {\n  if (!value) {\n    return \"Method Required\";\n  }\n};\n\nconst PaymentMethod = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    autoFocus?: boolean;\n  } & Omit<FormControlProps, \"required\" | \"disabled\" | \"error\" | \"variant\">\n) => {\n  const { variant = \"filled\", autoFocus = false, ...formControlProps } = props;\n\n  const { loading, error: gqlError, data } = useQuery(PAY_METHOD_ENTRY_OPTS);\n\n  const [field, meta] = useField<Values[\"paymentMethod\"]>({\n    name: \"paymentMethod\",\n    validate\n  });\n\n  const { error, touched } = meta;\n\n  const hasError = !!gqlError || (touched && !!error);\n\n  const children = useMemo(\n    () =>\n      (data?.paymentMethods || []).map(({ id, method }) => (\n        <MenuItem\n          {...(({\n            value: id,\n            key: id,\n            children: `${method[0].toUpperCase()}${method.substr(1)}`\n          } as MenuItemProps) as any)}\n        />\n      )),\n    [data]\n  );\n\n  if (loading) {\n    return <Skeleton variant=\"rect\" height={56} />;\n  } else if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return (\n    <FormControl\n      {...formControlProps}\n      required\n      disabled={loading}\n      error={hasError}\n      variant={variant}\n    >\n      <InputLabel>Method</InputLabel>\n      <Select {...field} autoFocus={autoFocus} children={children} />\n      {hasError && <FormHelperText children={error} />}\n    </FormControl>\n  );\n};\n\nexport default PaymentMethod;\n","import React, { useMemo } from \"react\";\nimport { TextField, TextFieldProps } from \"@material-ui/core\";\nimport { useField } from \"formik\";\n\nconst Description = (\n  props: {\n    autoFocus?: boolean;\n    variant?: \"filled\" | \"outlined\";\n  } & Omit<\n    TextFieldProps,\n    | \"variant\"\n    | \"label\"\n    | \"name\"\n    | \"InputProps\"\n    | \"autoFocus\"\n    | \"onChange\"\n    | \"onBlur\"\n    | \"onFocus\"\n  >\n) => {\n  const { autoFocus = false, variant = \"filled\", ...textFieldProps } = props;\n\n  const [field] = useField<string>({\n    name: \"description\"\n  });\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"text\",\n      autoFocus\n    }),\n    [autoFocus]\n  );\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      variant={variant as any}\n      label={\"Description\"}\n      name={\"description\"}\n      InputProps={InputProps}\n    />\n  );\n};\n\nexport default Description;\n","import React, { useMemo } from \"react\";\nimport { TextField, TextFieldProps, InputAdornment } from \"@material-ui/core\";\nimport { useField } from \"formik\";\n\nconst validate = (value: string | number) => {\n  if (value === \"\") {\n    return \"Total Required\";\n  }\n\n  const num = typeof value === \"string\" ? Number.parseFloat(value) : value;\n\n  if (Number.isNaN(num)) {\n    return \"Invalid Number\";\n  } else if (num === 0) {\n    return \"Cannot be 0\";\n  } else if (num < 0.01) {\n    return \"Invalid Total\";\n  }\n};\n\nconst inputProps = {\n  min: \"0.00\",\n  step: \"0.01\"\n} as const;\n\nconst Total = (\n  props: {\n    autoFocus?: boolean;\n    variant?: \"filled\" | \"outlined\";\n  } & Omit<\n    TextFieldProps,\n    | \"required\"\n    | \"variant\"\n    | \"label\"\n    | \"name\"\n    | \"InputProps\"\n    | \"autoFocus\"\n    | \"onChange\"\n    | \"onBlur\"\n    | \"onFocus\"\n    | \"placeholder\"\n    | \"helperText\"\n    | \"error\"\n  >\n) => {\n  const { autoFocus = false, variant = \"filled\", ...textFieldProps } = props;\n\n  const [field, meta] = useField<string>({\n    name: \"total\",\n    validate\n  });\n\n  const { error, touched } = meta;\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"number\",\n      autoFocus,\n      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>\n    }),\n    [autoFocus]\n  );\n\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      error={touched && !!error}\n      helperText={touched ? error : \"\"}\n      placeholder={\"0.00\"}\n      label={\"Total\"}\n      name={\"total\"}\n      required\n      variant={variant as any}\n      inputProps={inputProps}\n      InputProps={InputProps}\n    />\n  );\n};\n\nexport default Total;\n","import React from \"react\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  FormControlLabelProps,\n  CheckboxProps\n} from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\n\nimport { Values } from \"../UpsertEntry\";\n\nconst inputProps = {\n  type: \"checkbox\"\n} as const;\n\nconst Reconcile = (\n  props:\n    | ({ label: true } & Partial<\n        Omit<\n          FormControlLabelProps,\n          | \"control\"\n          | \"checked\"\n          | \"label\"\n          | keyof FieldInputProps<Values[\"reconciled\"]>\n        >\n      >)\n    | ({ label?: false } & Partial<\n        Omit<\n          CheckboxProps,\n          \"inputProps\" | \"checked\" | keyof FieldInputProps<Values[\"reconciled\"]>\n        >\n      >)\n) => {\n  const { label, ...customProps } = props;\n\n  const [field] = useField<boolean>({\n    name: \"reconciled\",\n    type: \"checkbox\"\n  });\n\n  if (label) {\n    return (\n      <FormControlLabel\n        {...customProps}\n        {...(field as any)}\n        label=\"Reconcile\"\n        control={<Checkbox inputProps={inputProps} />}\n      />\n    );\n  }\n\n  return (\n    <Checkbox {...(customProps as any)} {...field} inputProps={inputProps} />\n  );\n};\n\nexport default Reconcile;\n","import React, { useMemo, useCallback } from \"react\";\nimport {\n  Dialog,\n  PaperProps,\n  DialogTitle,\n  Box,\n  DialogContent,\n  DialogActions,\n  Button,\n  useTheme,\n  CircularProgress,\n  Typography\n} from \"@material-ui/core\";\nimport { Delete, Cancel, Add, Queue } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { JournalEntryType } from \"../../../apollo/graphTypes\";\nimport { FormikProps, Status, createInitialValues } from \"./UpsertEntry\";\nimport Type from \"./EntryFields/Type\";\nimport DateEntry from \"./EntryFields/DateEntry\";\nimport Department from \"./EntryFields/Department\";\nimport Category from \"./EntryFields/Category\";\nimport Source from \"./EntryFields/Source\";\nimport PaymentMethod from \"./EntryFields/PaymentMethod\";\nimport Description from \"./EntryFields/Description\";\nimport Total from \"./EntryFields/Total\";\nimport Reconcile from \"./EntryFields/Reconcile\";\nimport { entryUpsertId } from \"../Table/Journal\";\n\nconst DELETE_JOURNAL_ENTRY = gql`\n  mutation UpsertEntryDelete($id: ID!) {\n    journalEntryDelete(id: $id) {\n      __typename\n      id\n      deleted\n    }\n  }\n`;\n\nconst UpsertDialog = (props: {\n  open: boolean;\n  isUpdate: boolean;\n  entryId?: string;\n  setOpen: (open: boolean) => void;\n  formikProps: FormikProps;\n  loading: boolean;\n}) => {\n  const { open, isUpdate, entryId, setOpen, formikProps, loading } = props;\n\n  const [deleteEntry] = useMutation(DELETE_JOURNAL_ENTRY);\n\n  const { isSubmitting } = formikProps;\n  const {\n    submitted = false,\n    errors: { general: generalError, submission: submissionError }\n  } = formikProps.status;\n  const isTypeSet = formikProps.values.type !== null;\n  const { submitForm, resetForm, setSubmitting, setStatus } = formikProps;\n\n  const theme = useTheme();\n\n  const title = useMemo(() => {\n    if (generalError) {\n      return (\n        <Box color=\"error.main\" clone>\n          <span>General Error</span>\n        </Box>\n      );\n    } else if (loading) {\n      return \"Loading\";\n    }\n\n    const type = isUpdate ? \"Update\" : \"Add\";\n    let title = \"\";\n    if (!isTypeSet) {\n      title = `${type} Entry`;\n    } else if (formikProps.values.type === JournalEntryType.Credit) {\n      title = `${type} Credit`;\n    } else {\n      title = `${type} Debit`;\n    }\n\n    if (submissionError) {\n      return (\n        <Box color=\"error.main\" clone>\n          <span>{`${title}: Submission Error`}</span>\n        </Box>\n      );\n    } else if (isSubmitting) {\n      return `${title}: Submitting`;\n    }\n\n    return title;\n  }, [\n    isSubmitting,\n    isTypeSet,\n    formikProps,\n    isUpdate,\n    loading,\n    generalError,\n    submissionError\n  ]);\n\n  const disabled = loading || isSubmitting || !!generalError || submitted;\n\n  const dialogContent = useMemo(() => {\n    if (submitted) {\n      return (\n        <Typography color=\"primary\" variant=\"h3\">\n          Success!\n        </Typography>\n      );\n    }\n\n    if (generalError) {\n      const errorIsString = typeof generalError === \"string\";\n\n      return (\n        <Box width=\"100%\">\n          <Typography color=\"error\" variant=\"body1\">\n            {errorIsString ? generalError : (generalError as Error).message}\n          </Typography>\n          {!errorIsString && <pre>{JSON.stringify(generalError, null, 2)}</pre>}\n        </Box>\n      );\n    }\n\n    if (loading || isSubmitting) {\n      return <CircularProgress />;\n    }\n\n    if (isTypeSet) {\n      const entryMargin = `${theme.spacing(1)}px !important`;\n      return (\n        <React.Fragment>\n          <Box margin={entryMargin} clone>\n            <Type style={{ margin: theme.spacing(1) }} label=\"start\" />\n          </Box>\n          <Box margin={entryMargin} width={175} clone>\n            <DateEntry autoFocus />\n          </Box>\n          <Box margin={entryMargin} width={350} clone>\n            <Department />\n          </Box>\n          <Box margin={entryMargin} width={350} clone>\n            <Category entryType={formikProps.values.type} />\n          </Box>\n          <Box margin={entryMargin} width={350} clone>\n            <Source />\n          </Box>\n          <Box margin={entryMargin} width={175} clone>\n            <PaymentMethod />\n          </Box>\n          <Box margin={entryMargin} width={350} clone>\n            <Description />\n          </Box>\n          <Box margin={entryMargin} width={175} clone>\n            <Total />\n          </Box>\n          <Box padding={2}>\n            <Reconcile label />\n          </Box>\n          {!!submissionError && (\n            <Box width=\"100%\">\n              <Box marginTop={entryMargin} clone>\n                <Typography variant=\"body1\" color=\"error\">\n                  {typeof submissionError === \"string\"\n                    ? submissionError\n                    : submissionError.message}\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </React.Fragment>\n      );\n    } else {\n      const entryMargin = `0px !important`;\n      return (\n        <Box marginLeft={entryMargin} clone>\n          <Type label=\"top\" />\n        </Box>\n      );\n    }\n  }, [\n    submitted,\n    isTypeSet,\n    loading,\n    generalError,\n    submissionError,\n    isSubmitting,\n    theme,\n    formikProps.values.type\n  ]);\n\n  const onClickAddAndNew = useCallback(\n    (event?) => submitForm().then(() => setOpen(true)),\n    [submitForm, setOpen]\n  );\n\n  const onClickCancel = useCallback(\n    (event?) => {\n      setOpen(false);\n      resetForm();\n    },\n    [setOpen, resetForm]\n  );\n\n  const onClickDelete = useCallback(\n    async (event?) => {\n      try {\n        setSubmitting(true);\n        await deleteEntry({ variables: { id: entryId } });\n        const status: Status = {\n          submitted: true,\n          errors: {}\n        };\n        setSubmitting(false);\n        setStatus(status);\n        await new Promise(resolve => setTimeout(resolve, 750));\n        resetForm({ values: createInitialValues() });\n        setOpen(false);\n      } catch (error) {\n        const status: Status = {\n          errors: {\n            submission:\n              \"message\" in error ? error : JSON.stringify(error, null, 2)\n          }\n        };\n        setStatus(status);\n        setSubmitting(false);\n      }\n    },\n    [deleteEntry, entryId, setOpen, resetForm, setStatus, setSubmitting]\n  );\n\n  return (\n    <Dialog\n      fullWidth\n      maxWidth=\"lg\"\n      open={open}\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: formikProps.handleSubmit\n        } as PaperProps & { onSubmit: typeof formikProps.handleSubmit }\n      }\n    >\n      <DialogTitle children={title} />\n      <Box\n        display=\"flex\"\n        alignItems=\"flex-start\"\n        justifyContent=\"center\"\n        flexWrap=\"wrap\"\n        clone\n      >\n        <DialogContent dividers children={dialogContent} />\n      </Box>\n\n      <DialogActions>\n        {isUpdate && (\n          <Button\n            disabled={disabled}\n            size=\"medium\"\n            color=\"default\"\n            variant=\"outlined\"\n            startIcon={<Delete />}\n            onClick={onClickDelete}\n          >\n            Delete\n          </Button>\n        )}\n        <Button\n          disabled={disabled}\n          size=\"medium\"\n          color=\"secondary\"\n          variant=\"outlined\"\n          type=\"submit\"\n          startIcon={<Add />}\n        >\n          {isUpdate ? \"Update\" : \"Add\"}\n        </Button>\n        {!isUpdate && (\n          <Button\n            disabled={disabled}\n            size=\"medium\"\n            color=\"secondary\"\n            variant=\"outlined\"\n            onClick={onClickAddAndNew}\n            startIcon={<Queue />}\n          >\n            Add & New\n          </Button>\n        )}\n        <Button\n          disabled={isSubmitting || submitted}\n          size=\"medium\"\n          color=\"default\"\n          variant=\"outlined\"\n          startIcon={<Cancel />}\n          onClick={onClickCancel}\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n      {/* <pre style={{ height: 100, overflow: \"auto\" }}>\n        {JSON.stringify(formikProps, null, 2)}\n      </pre> */}\n    </Dialog>\n  );\n};\n\nexport default UpsertDialog;\n","import gql from \"graphql-tag\";\nimport Fraction from \"fraction.js\";\nimport { FormikHelpers } from \"formik\";\nimport ApolloClient from \"apollo-client\";\nimport { parseName } from \"humanparser\";\n\nimport { Values, Status, createInitialValues } from \"./UpsertEntry\";\nimport {\n  JournalEntrySourceInput,\n  JournalEntrySourceType,\n  UpsertEntryAddPersonMutation as AddPerson,\n  UpsertEntryAddPersonMutationVariables as AddPersonVars,\n  UpsertEntryAddBusinessMutation as AddBusiness,\n  UpsertEntryAddBusinessMutationVariables as AddBusinessVars,\n  UpsertEntryAddMutation as AddEntry,\n  UpsertEntryAddMutationVariables as AddEntryVars,\n  UpsertEntryUpdateMutation as UpdateEntry,\n  UpsertEntryUpdateMutationVariables as UpdateEntryVars,\n  JournalEntryUpdateFields\n} from \"../../../apollo/graphTypes\";\nimport { SourceValue, SrcObjectValue } from \"./EntryFields/Source\";\nimport {\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT\n} from \"./upsertEntry.gql\";\n\nconst ADD_PERSON = gql`\n  mutation UpsertEntryAddPerson($fields: PersonAddFields!) {\n    addPerson(fields: $fields) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n`;\n\nconst ADD_BUSINESS = gql`\n  mutation UpsertEntryAddBusiness($fields: BusinessAddFields!) {\n    addBusiness(fields: $fields) {\n      ...SrcEntryBizOptFragment\n    }\n  }\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n`;\n\nconst ADD_JOURNAL_ENTRY = gql`\n  mutation UpsertEntryAdd($fields: JournalEntryAddFields!) {\n    journalEntryAdd(fields: $fields) {\n      __typename\n      id\n    }\n  }\n`;\n\nconst UPDATE_JOURNAL_ENTRY = gql`\n  mutation UpsertEntryUpdate($id: ID!, $fields: JournalEntryUpdateFields!) {\n    journalEntryUpdate(id: $id, fields: $fields) {\n      __typename\n      id\n    }\n  }\n`;\n\nconst getSourceType = (sourceValue: SrcObjectValue): JournalEntrySourceType => {\n  switch (sourceValue.__typename) {\n    case \"Business\":\n      return JournalEntrySourceType.Business;\n    case \"Person\":\n      return JournalEntrySourceType.Person;\n    case \"Department\":\n      return JournalEntrySourceType.Department;\n  }\n};\n\nconst getSource = async (\n  value: Values[\"source\"][\"value\"],\n  formikHelpers: FormikHelpers<Values>,\n  client: ApolloClient<any>\n): Promise<JournalEntrySourceInput> => {\n  const sourceValue = value[value.length - 1] as SourceValue;\n\n  // Free Solo\n  if (typeof sourceValue === \"string\") {\n    const sourceType = value[0] as JournalEntrySourceType;\n    if (sourceType === JournalEntrySourceType.Person) {\n      const parsedName = parseName(sourceValue);\n\n      const result = await client.mutate<AddPerson, AddPersonVars>({\n        mutation: ADD_PERSON,\n        variables: {\n          fields: {\n            name: {\n              first: parsedName.firstName,\n              last: parsedName.lastName\n            }\n          }\n        }\n      });\n\n      if (!result.data?.addPerson.id) {\n        throw new Error(\n          \"Something went wrong. Server did not respond with new person id.\"\n        );\n      }\n\n      const newSourceField: Values[\"source\"] = {\n        inputValue: \"\",\n        value: [sourceType, result.data.addPerson]\n      };\n\n      formikHelpers.setFieldValue(\"source\", newSourceField, false);\n\n      return {\n        sourceType: JournalEntrySourceType.Person,\n        id: result.data.addPerson.id\n      };\n    } else {\n      const result = await client.mutate<AddBusiness, AddBusinessVars>({\n        mutation: ADD_BUSINESS,\n        variables: {\n          fields: {\n            name: sourceValue\n          }\n        }\n      });\n\n      if (!result.data?.addBusiness.id) {\n        throw new Error(\n          \"Something went wrong. Server did not respond with new business id.\"\n        );\n      }\n\n      const newSourceField: Values[\"source\"] = {\n        inputValue: \"\",\n        value: [sourceType, result.data.addBusiness]\n      };\n\n      formikHelpers.setFieldValue(\"source\", newSourceField, false);\n\n      return {\n        sourceType: JournalEntrySourceType.Business,\n        id: result.data.addBusiness.id\n      };\n    }\n  }\n\n  return {\n    sourceType: getSourceType(sourceValue),\n    id: sourceValue.id\n  };\n};\n\nexport default async (args: {\n  values: Values;\n  formikHelpers: FormikHelpers<Values>;\n  setOpen: (open: boolean) => void;\n  client: ApolloClient<any>;\n  initialValues: Values;\n  entryId?: string;\n}) => {\n  const {\n    values,\n    formikHelpers,\n    setOpen,\n    client,\n    initialValues,\n    entryId\n  } = args;\n\n  try {\n    // Get field values from values\n    const type = values.type as NonNullable<Values[\"type\"]>;\n    const dateField = values.date as NonNullable<Values[\"date\"]>;\n    const department = (values.department as NonNullable<Values[\"department\"]>)\n      .id;\n    const category = (values.category as NonNullable<Values[\"category\"]>).id;\n    const source = await getSource(\n      (values.source as NonNullable<Values[\"source\"]>).value,\n      formikHelpers,\n      client\n    );\n    const paymentMethod = values.paymentMethod as NonNullable<\n      Values[\"paymentMethod\"]\n    >;\n    const description = values.description as NonNullable<\n      Values[\"description\"]\n    >;\n    const totalField = values.total as NonNullable<Values[\"total\"]>;\n    const reconciled = values.reconciled;\n\n    // Update\n    if (entryId) {\n      const fields = {} as JournalEntryUpdateFields;\n\n      // Capture fields that have changed\n      if (initialValues.type !== type) {\n        fields.type = type;\n      }\n\n      if (\n        !dateField.isSame(\n          initialValues.date as NonNullable<typeof initialValues.date>\n        )\n      ) {\n        fields.date = dateField.toISOString();\n      }\n\n      if (department !== initialValues.department?.id) {\n        fields.department = department;\n      }\n\n      if (category !== initialValues.category?.id) {\n        fields.category = category;\n      }\n\n      if (\n        (() => {\n          const value = initialValues.source.value as SrcObjectValue[];\n\n          const sourceValue = value[value.length - 1];\n          const sourceType = getSourceType(sourceValue);\n\n          return (\n            sourceValue.id !== source.id || sourceType !== source.sourceType\n          );\n        })()\n      ) {\n        fields.source = source;\n      }\n\n      if (paymentMethod !== initialValues.paymentMethod) {\n        fields.paymentMethod = paymentMethod;\n      }\n\n      if (description && description !== initialValues.description) {\n        fields.description = description;\n      }\n\n      if (totalField !== initialValues.total) {\n        const { n: num, d: den } = new Fraction(\n          (typeof totalField === \"string\"\n            ? Number.parseFloat(totalField)\n            : totalField\n          ).toFixed(2)\n        );\n        fields.total = { num, den };\n      }\n\n      if (reconciled !== initialValues.reconciled) {\n        fields.reconciled = reconciled;\n      }\n\n      if (Object.keys(fields).length === 0) {\n        const status: Status = {\n          errors: {\n            submission: \"No changes detected.\"\n          }\n        };\n\n        formikHelpers.setStatus(status);\n\n        return;\n      }\n\n      const result = await client.mutate<UpdateEntry, UpdateEntryVars>({\n        mutation: UPDATE_JOURNAL_ENTRY,\n        variables: {\n          id: entryId,\n          fields\n        }\n      });\n\n      // Add\n    } else {\n      const { n: num, d: den } = new Fraction(\n        (typeof totalField === \"string\"\n          ? Number.parseFloat(totalField)\n          : totalField\n        ).toFixed(2)\n      );\n      const total = { num, den };\n      const date = dateField.toISOString();\n\n      const result = await client.mutate<AddEntry, AddEntryVars>({\n        mutation: ADD_JOURNAL_ENTRY,\n        variables: {\n          fields: {\n            type,\n            date,\n            department,\n            category,\n            source,\n            paymentMethod,\n            description,\n            total,\n            reconciled\n          }\n        }\n      });\n    }\n\n    // Success!\n    const status: Status = {\n      submitted: true,\n      errors: {}\n    };\n    formikHelpers.setStatus(status);\n    await new Promise(resolve => setTimeout(resolve, 750));\n    setOpen(false);\n    formikHelpers.resetForm({ values: createInitialValues() });\n  } catch (error) {\n    const status: Status = {\n      errors: {\n        submission: error\n      }\n    };\n\n    formikHelpers.setStatus(status);\n  }\n};\n","import React, { useCallback, useMemo } from \"react\";\nimport {\n  Formik,\n  FormikProps as NativeFormikProps,\n  FormikHelpers\n} from \"formik\";\nimport moment, { Moment } from \"moment\";\nimport gql from \"graphql-tag\";\nimport {\n  DeptEntryOptFragment as DeptValue,\n  JournalEntryType,\n  CatEntryOptFragment as CatValue,\n  SrcEntryBizOptFragment,\n  SrcEntryDeptOptFragment\n} from \"../../../apollo/graphTypes\";\nimport UpsertDialog from \"./UpsertDialog\";\nimport { Value as SrcValue } from \"./EntryFields/Source\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { ApolloError } from \"apollo-client\";\n\nimport {\n  DEPT_ENTRY_OPT_FRAGMENT,\n  CAT_ENTRY_OPT_FRAGMENT,\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT,\n  PAY_METHOD_ENTRY_OPT_FRAGMENT\n} from \"./upsertEntry.gql\";\nimport {\n  EntryUpdateValuesQuery,\n  EntryUpdateValuesQueryVariables,\n  JournalEntrySourceType\n} from \"../../../apollo/graphTypes\";\nimport submit from \"./submit\";\n\nconst ENTRY_UPDATE_VALUES = gql`\n  query EntryUpdateValues($id: ID!) {\n    journalEntry(id: $id) {\n      ...EntryUpdateValueFragment\n    }\n  }\n  fragment EntryUpdateValueFragment on JournalEntry {\n    id\n    __typename\n    type\n    date\n    department {\n      ...DeptEntryOptFragment\n    }\n    category {\n      ...CatEntryOptFragment\n    }\n    source {\n      ...SrcEntryPersonOptFragment\n      ...SrcEntryBizOptFragment\n      ... on Department {\n        ancestors {\n          ... on Department {\n            id\n            __typename\n          }\n          ...SrcEntryBizOptFragment\n        }\n      }\n    }\n    paymentMethod {\n      ...PayMethodEntryOptFragment\n    }\n    description\n    total {\n      num\n      den\n    }\n    reconciled\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n  ${CAT_ENTRY_OPT_FRAGMENT}\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nexport interface Values {\n  type: JournalEntryType | null;\n  date: Moment | null;\n  department: DeptValue | null;\n  category: CatValue | null;\n  source: {\n    inputValue: string;\n    value: SrcValue[];\n  };\n  paymentMethod: string;\n  description: string;\n  total: string | number;\n  reconciled: boolean;\n}\n\nexport interface UpsertEntryProps {\n  entryId?: string;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  initialValues?: Partial<Values>;\n}\n\nexport const createInitialValues = (\n  initialValues: Partial<Values> = {}\n): Values => ({\n  type: null,\n  date: null,\n  department: null,\n  category: null,\n  source: {\n    inputValue: \"\",\n    value: []\n  },\n  paymentMethod: \"\",\n  description: \"\",\n  total: \"\",\n  reconciled: false,\n  ...initialValues\n});\n\nexport interface Status {\n  submitted?: boolean;\n  errors: {\n    submission?: Error | ApolloError | string;\n    general?: Error | ApolloError | string;\n  };\n}\n\nexport type FormikProps = Omit<NativeFormikProps<Values>, \"status\"> & {\n  status: Status;\n};\n\nconst UpsertEntry = function(props: UpsertEntryProps) {\n  const {\n    entryId,\n    open,\n    setOpen,\n    initialValues: initialValuesOverride = {}\n  } = props;\n  const isUpdate = !!entryId;\n\n  const { loading, error: gqlError, data, client } = useQuery<\n    EntryUpdateValuesQuery,\n    EntryUpdateValuesQueryVariables\n  >(ENTRY_UPDATE_VALUES, {\n    skip: !isUpdate,\n    variables: { id: entryId || \"\" }\n  });\n\n  const initialValues = useMemo<Values>(() => {\n    if (isUpdate) {\n      const journalEntry = data?.journalEntry;\n\n      const sourceVal: Values[\"source\"][\"value\"] = [];\n\n      const src = journalEntry?.source;\n\n      switch (src?.__typename) {\n        case \"Person\":\n          sourceVal.push(JournalEntrySourceType.Person, src);\n          break;\n        case \"Business\":\n          sourceVal.push(JournalEntrySourceType.Business, src);\n          break;\n        case \"Department\":\n          sourceVal.push(JournalEntrySourceType.Business);\n          const ancestorDeptQueue: string[] = [];\n          for (const ancestor of src.ancestors) {\n            if (ancestor.__typename === \"Business\") {\n              sourceVal.push(ancestor);\n            } else {\n              ancestorDeptQueue.push(ancestor.id);\n            }\n          }\n\n          const bizAncestor = sourceVal[1] as SrcEntryBizOptFragment;\n\n          if (ancestorDeptQueue.length > 0) {\n            const ancestorDepts: SrcEntryDeptOptFragment[] = [];\n            for (const dept of bizAncestor.departments) {\n              const index = ancestorDeptQueue.indexOf(dept.id);\n\n              if (index === -1) {\n                continue;\n              }\n\n              // Be lazy about finding depts\n              if (ancestorDepts.push(dept) === ancestorDeptQueue.length) {\n                break;\n              }\n            }\n\n            // Ensure order\n            ancestorDepts.sort((a, b) => {\n              if (a.id === b.parent.id || bizAncestor.id || a.parent.id) {\n                return -1;\n              } else if (b.id === a.parent.id) {\n                return 1;\n              } else {\n                return 0;\n              }\n            });\n\n            sourceVal.push(...ancestorDepts);\n          }\n      }\n\n      const total = journalEntry\n        ? journalEntry.total.num / journalEntry.total.den\n        : \"\";\n\n      return {\n        type: journalEntry?.type ?? null,\n        date: moment(journalEntry?.date),\n        department: journalEntry?.department ?? null,\n        category: journalEntry?.category ?? null,\n        source: {\n          inputValue: \"\",\n          value: sourceVal\n        },\n        paymentMethod: journalEntry?.paymentMethod.id ?? \"\",\n        description: journalEntry?.description ?? \"\",\n        total,\n        reconciled: journalEntry?.reconciled ?? false\n      };\n    }\n\n    return createInitialValues(initialValuesOverride);\n  }, [isUpdate, data, initialValuesOverride]);\n\n  const initialStatus = useMemo<Status>(\n    () => ({\n      submitted: false,\n      errors: {\n        general: gqlError\n      }\n    }),\n    [gqlError]\n  );\n\n  const onSubmit = useCallback(\n    (values: Values, formikHelpers: FormikHelpers<Values>) =>\n      submit({\n        values,\n        formikHelpers,\n        setOpen,\n        client,\n        initialValues,\n        entryId\n      }),\n    [entryId, initialValues, setOpen, client]\n  );\n\n  const children = useCallback(\n    (formikProps: FormikProps) => {\n      return (\n        <UpsertDialog\n          open={open}\n          isUpdate={isUpdate}\n          entryId={entryId}\n          setOpen={setOpen}\n          loading={loading}\n          formikProps={formikProps}\n        />\n      );\n    },\n    [isUpdate, entryId, setOpen, open, loading]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues}\n      onSubmit={onSubmit}\n      children={children}\n      initialStatus={initialStatus}\n      enableReinitialize\n    />\n  );\n};\n\nexport default UpsertEntry;\n","import {Root} from \"../reducers/root\";\nimport {JournalEntryUpsert, SubmitStatus\n} from \"../reducers/journalEntryUpserts\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\n\nconst getEntry = (state:Root, upsertId:string):JournalEntryUpsert | null => {\n  for(const entry of state.journalEntryUpserts) {\n    if(entry.id === upsertId) {\n      return entry;\n    }\n  }\n  return null;\n}\n\nexport enum UpsertType {\n  Add,\n  Update\n}\n\nexport const getUpsertType = (state:Root, upsertId:string):UpsertType | null =>\n{\n  const id = getEntry(state, upsertId)?.values.id;\n  if(id === undefined) {\n    return null;\n  } else if(id === null) {\n    return UpsertType.Add;\n  } else {\n    return UpsertType.Update;\n  }\n}\n\nexport const getUpdateId = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.values.id || null;\n}\n\nexport const getSubmitStatus = (state:Root, upsertId:string)\n  :SubmitStatus | null => \n{\n  return getEntry(state, upsertId)?.submit.status ?? null;\n}\n\nexport const getSubmitError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.submit.error || null;\n}\n\nexport const getType = (state:Root, upsertId:string):JournalEntryType | null =>\n{\n  return getEntry(state, upsertId)?.values.type.value || null;\n}\n\nexport const getTypeError = (state:Root, upsertId:string):Error | null =>\n{\n  return getEntry(state, upsertId)?.values.type.error || null;\n}\n\nexport const isRequired = (state:Root, upsertId:string):boolean => {\n  return !(getEntry(state, upsertId)?.values.id);\n}\n\nexport const getDeptInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.department.input || \"\";\n}\n\nexport const getFromDept = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.fromDept || null;\n}\n\nexport const getDept = (state:Root, upsertId:string)\n  :string | null => \n{\n  return getEntry(state, upsertId)?.values.department.value || null;\n}\n\nexport const getDeptError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.department.error || null;\n}\n\nexport const isDeptOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.department.open || false;\n}\n\n// export const getCatType = (state:Root, upsertId:string)\n//   :JournalEntryType | null => \n// {\n//   return getEntry(state, upsertId)?.values.catType || null;\n// }\n\nexport const getCatInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.category.input || \"\";\n}\n\nexport const getCatValue = (state:Root, upsertId:string)\n  :string | null => \n{\n  return getEntry(state, upsertId)?.values.category.value || null;\n}\n\nexport const getCatError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.category.error || null;\n}\n\nexport const isCatOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.category.open || false;\n}\n\nexport const getDate = (state:Root, upsertId:string):Date | null => {\n  return getEntry(state, upsertId)?.values.date.value || null;\n}\n\nexport const getDateError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.date.error || null;\n}\n\nexport const getPayMethod = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.paymentMethod.value || \"\";\n}\n\nexport const getPayMethodError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.paymentMethod.error || null;\n}\n\nexport const getSrcType = (state:Root, upsertId:string)\n  :JournalEntrySourceType | null => \n{\n  return getEntry(state, upsertId)?.values.srcType || null;\n}\n\nexport const getSrcInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.source.input || \"\";\n}\n\nexport const getSrc = (state:Root, upsertId:string)\n  :JournalEntrySourceInput | null => \n{\n  return getEntry(state, upsertId)?.values.source.value || null;\n}\n\nexport const isSrcOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.source.open || false;\n}\n\nexport const getSrcError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.source.error || null;\n}\n\nexport const getTotalInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.total.input || \"\";\n}\n\nexport const getTotalValue = (state:Root, upsertId:string)\n  :RationalInput | null => \n{\n  return getEntry(state, upsertId)?.values.total.value || null;\n}\n\nexport const getTotalError = (state:Root, upsertId:string)\n  :Error | null => \n{\n  return getEntry(state, upsertId)?.values.total.error || null;\n}\n\nexport const getDscrptValue = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.values.description.value || null;\n}\n\nexport const getReconciledValue = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.reconciled.value || false;\n}","import Fraction from 'fraction.js';\nimport { ApolloClient } from \"apollo-client\";\nimport {batch} from \"react-redux\";\nimport {parseFullName} from \"parse-full-name\";\nimport gql from \"graphql-tag\";\n\nimport {Thunk} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType,\n  JournalEntryType,\n  AddPerson_1Mutation as AddPerson,\n  AddPerson_1MutationVariables as AddPersonVars,\n  AddJournalEntry_2Mutation as AddJournalEntry,\n  AddJournalEntry_2MutationVariables as AddJournalEntryVars,\n  UpdateJournalEntry_2Mutation as UpdateJournalEntry,\n  UpdateJournalEntry_2MutationVariables as UpdateJournalEntryVars,\n  AddBusiness_1Mutation as AddBusiness,\n  AddBusiness_1MutationVariables as AddBusinessVars,\n  CheckValidVendor_1Query as CheckValidVendor,\n  CheckValidVendor_1QueryVariables as CheckValidVendorVars,\n  CategoryTypeValidation_1Query as CategoryTypeValidationQuery,\n  CategoryTypeValidation_1QueryVariables as CategoryTypeValidationQueryVars,\n  ValidateDeptIsLeaf_1Query as ValidateDeptIsLeafQuery,\n  ValidateDeptIsLeaf_1QueryVariables as ValidateDeptIsLeafQueryVars,\n  JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\nimport * as upsertActions from \"../actionTypes/journalEntryUpsert\";\nimport * as selectors from \"../selectors/journalEntryUpsert\";\nimport {JOURNAL_ENTRY_FRAGMENT\n} from \"../../components/Journal/Table/JournalEntries.gql\"\n\n// Upsert Life cycle\nexport const create = (upsertId:string,\n  args:{entryId?:string, fromDept?:string, client?:ApolloClient<any>} = {})\n  :Thunk<upsertActions.Create | upsertActions.SetDateValue |\n      upsertActions.SetDeptValue | upsertActions.SetCatValue |\n      upsertActions.SetDscrptValue | upsertActions.SetSrcValue |\n      upsertActions.SetPayMethodValue | upsertActions.SetTotalValue |\n      upsertActions.SetReconciledValue | upsertActions.SetTypeValue |\n      upsertActions.SetTotalInput | upsertActions.SetTotalError |\n      upsertActions.SetSrcType\n    > => (dispatch, getState) => \n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  const {entryId, fromDept, client} = args;\n\n  if(submitStatus !== null) {\n    return;\n  } else if(entryId) {\n\n    if(!client) {\n      // TODO: update types to handle this dep\n      throw Error(\"client required for update\");\n    }\n    \n    const entry = client.readFragment<JournalEntryFragment>({\n      id:`JournalEntry:${entryId}`,\n      fragment:JOURNAL_ENTRY_FRAGMENT\n    });\n\n    if(!entry) {\n      // TODO: implement generic error handler.\n      return;\n    }\n\n    const {\n      date,\n      type,\n      department:{id:deptId},\n      category:{id:catId},\n      description,\n      paymentMethod:{id:payMethodId},\n      source:{\n        __typename:srcTypeName,\n        id:srcId\n      },\n      total:{num, den},\n      reconciled\n    } = entry;\n\n\n    const srcType = srcTypeName === \"Person\" ? JournalEntrySourceType.Person :\n      JournalEntrySourceType.Business;\n    \n    const src:JournalEntrySourceInput = {\n      sourceType:(()=>{\n        if(srcTypeName === \"Person\") {\n          return JournalEntrySourceType.Person;\n        } else if(srcTypeName === \"Business\") {\n          return JournalEntrySourceType.Business;\n        } else {\n          return JournalEntrySourceType.Department;\n        }\n      })(),\n      id:srcId\n    }\n\n    dispatch({\n      type:upsertActions.CREATE,\n      payload:{upsertId, entryId, fromDept:args.fromDept}\n    });\n\n    batch(()=>{\n      dispatch(setDateValue(upsertId, new Date(date as string)));\n      dispatch(setType(upsertId, type, client));\n      dispatch(setSrcType(upsertId,srcType))\n      dispatch(setDeptValue(upsertId, deptId));\n      dispatch(setCatValue(upsertId, catId));\n      if(description) {\n        dispatch(setDscrptValue(upsertId, description as string));\n      }\n      dispatch(setPayMethodValue(upsertId, payMethodId));\n      dispatch(setSrcValue(upsertId, src));\n      dispatch(setTotalValue(upsertId, num/den));\n      dispatch(setTotalInput(upsertId, (num/den).toString()));\n      dispatch(setReconciledValue(upsertId, reconciled));\n\n    });\n\n\n  } else {\n    \n    dispatch({\n      type:upsertActions.CREATE,\n      payload:{upsertId, fromDept:args.fromDept}\n    });\n\n  }\n\n\n}\n\nexport const cancel = (upsertId:string)\n  :Thunk<upsertActions.Cancel> => (dispatch, getState) => \n{\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus === SubmitStatus.Submitting) {\n    return;\n  }\n\n  dispatch({\n    type:upsertActions.CANCEL,\n    payload:{upsertId}\n  });\n  \n} \n\nexport const clear = (upsertId:string)\n  :Thunk<upsertActions.Clear> => (dispatch, getState) => \n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus === SubmitStatus.Submitting) {\n    return;\n  }\n\n  dispatch({\n    type:upsertActions.CLEAR,\n    payload:{upsertId}\n  });\n\n} \n\n// Submit\nexport const validateAll = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<any> => async (dispatch, getState, ...args) => \n{\n    await validateDate(upsertId)(dispatch, getState, ...args)\n    await validateDept(upsertId, client)(dispatch, getState, ...args)\n    await validateCat(upsertId)(dispatch, getState, ...args)\n    await validateSrc(upsertId)(dispatch, getState, ...args)\n    await validatePayMethod(upsertId)(dispatch, getState, ...args)\n    await validateTotal(upsertId)(dispatch, getState, ...args)\n  \n}\n\nconst ADD_PERSON = gql`\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n`;\n\nconst ADD_BUSINESS = gql`\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n`;\n\nconst ADD_JOURNAL_ENTRY = gql`\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    journalEntryAdd(fields:$fields) {\n      __typename\n      id\n    }\n  }\n`;\n\nconst UPDATE_JOURNAL_ENTRY = gql`\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    journalEntryUpdate(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const submit = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSubmitStatus> => (dispatch, getState) =>\n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus !== SubmitStatus.NotSubmitted) {\n    return;\n  }\n\n  dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitting));\n\n  dispatch(_submit_(upsertId, client));\n\n}\n\nconst creatNewSrc = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSrcValue | upsertActions.SetSubmitError |\n     upsertActions.SetSubmitStatus | upsertActions.ClearSrcInput,\n     Promise<void>> =>  async (dispatch, getState) =>\n{\n\n  const state = getState();\n\n  const srcType = selectors.getSrcType(state, upsertId);\n  const srcInput = selectors.getSrcInput(state, upsertId);\n\n  if(srcType === JournalEntrySourceType.Person) {\n\n    const parsedName = parseFullName(srcInput);\n\n    try {\n\n      const result = await client.mutate<AddPerson, AddPersonVars>({\n        mutation:ADD_PERSON,\n        variables:{\n          fields:{\n            name:{\n              first:parsedName.first,\n              last:parsedName.last\n            }\n          }\n        }\n      });\n\n      if(!result.data?.addPerson.id) {\n        \n        throw new Error(\"Something went wrong. Server did not respond with new person id.\");\n\n      }\n      \n      batch(()=>{\n        \n        dispatch(clearSrcInput(upsertId));\n        dispatch(setSrcValue(upsertId, {\n          sourceType:JournalEntrySourceType.Person,\n          id:(result.data as AddPerson).addPerson.id\n        }));\n\n      });\n      \n      await Promise.resolve();\n\n      dispatch(_submit_(upsertId, client));\n      \n    } catch(error) {\n      \n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(error?.message || `${error}`)));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n\n    }\n\n  } else {\n    \n    try {\n\n      const result = await client.mutate<AddBusiness, AddBusinessVars>({\n        mutation:ADD_BUSINESS,\n        variables:{\n          fields:{\n            name:srcInput\n          }\n        }\n      });\n\n      if(!result.data?.addBusiness.id) {\n        \n        throw new Error(\"Something went wrong. Server did not respond with new business id.\");\n\n      }\n\n      dispatch(setSrcValue(upsertId, {\n        sourceType:JournalEntrySourceType.Business,\n        id:result.data.addBusiness.id\n      }));\n      \n      await Promise.resolve();\n\n      dispatch(_submit_(upsertId, client));\n\n    } catch(error) {\n\n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(error?.message || `${error}`)));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n\n    }\n\n  }\n\n  return;\n\n}\n\nexport const _submit_ = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSubmitStatus | upsertActions.SetSubmitError |\n  upsertActions.SetSrcValue, Promise<void>> => \n{\n  return async (dispatch, getState, ...args) => {\n\n    const state = getState();\n\n    \n    // Run field validations\n    await validateAll(upsertId, client)(dispatch, getState, ...args); \n   \n    \n    // Wait for all validation actions to update state\n    await Promise.resolve();\n    \n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    const dateError = selectors.getDateError(state, upsertId);\n    const deptError = selectors.getDeptError(state, upsertId);\n    const catError = selectors.getCatError(state, upsertId);\n    const srcError = selectors.getSrcError(state, upsertId);\n    const payMethodError = selectors.getPayMethodError(state, upsertId);\n    const totalError = selectors.getTotalError(state, upsertId);\n\n    if(dateError || deptError || catError || srcError || payMethodError\n      || totalError)\n    {\n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(\"Invalid submission, please check fields\")));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n      return;\n    }\n\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      const dateError = selectors.getDateError(state, upsertId);\n      const deptError = selectors.getDeptError(state, upsertId);\n      const catError = selectors.getCatError(state, upsertId);\n      const srcError = selectors.getSrcError(state, upsertId);\n      const payMethodError = selectors.getPayMethodError(state, upsertId);\n      const totalError = selectors.getTotalError(state, upsertId);\n\n      if(dateError || deptError || catError || srcError || payMethodError\n        || totalError)\n      {\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(\"Invalid submission, please check fields\")));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n      }\n\n      const source = selectors.getSrc(state, upsertId);\n      \n      if(!source) {\n        \n        dispatch(creatNewSrc(upsertId, client));\n        \n        return;\n      \n      }\n\n      const date = selectors.getDate(state, upsertId);\n      const type = selectors.getType(state, upsertId) as JournalEntryType;\n      const department = selectors.getDept(state, upsertId);\n      const category = selectors.getCatValue(state, upsertId);\n      const paymentMethod = selectors.getPayMethod(state, upsertId);\n      const description = \n        selectors.getDscrptValue(state, upsertId) ?? undefined;\n      const total = selectors.getTotalValue(state, upsertId);\n      const reconciled = \n        selectors.getReconciledValue(state, upsertId) ?? undefined;\n\n      if(!(date && department && category && paymentMethod && total\n        && type !== null)) \n      {\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(`Something went wrong, field values:\n              type:${type}\n              date:${date}\n              department:${department}\n              source:${source}\n              category:${category}\n              paymentMethod:${paymentMethod}\n              total:${total}\n            `)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n      }\n\n      try {\n\n        const result = await client\n          .mutate<AddJournalEntry, AddJournalEntryVars>({\n            mutation:ADD_JOURNAL_ENTRY,\n            variables:{\n              fields:{\n                date:date.toISOString(),\n                type,\n                department,\n                source,\n                category,\n                paymentMethod,\n                description,\n                total,\n                reconciled\n              }\n            }\n          });\n\n          if(!result.data?.journalEntryAdd.id) {\n            throw new Error(\"Something went wrong. Server did not respond with journal entry id.\");\n          }\n\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitted));\n\n          // Allow for any animation triggers for status submitted\n          await new Promise((r)=>setTimeout(r, 300));\n\n          // Clear upsert on success\n          dispatch(clear(upsertId));\n\n      } catch(error) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(error?.message || `${error}`)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n\n        return;\n\n      }\n\n    } else {\n\n\n      const srcInput = selectors.getSrcInput(state, upsertId);\n\n      if(srcInput.trim()) {\n\n        dispatch(creatNewSrc(upsertId, client));\n        \n        return;\n\n      }\n\n      const id = selectors.getUpdateId(state, upsertId);\n      const date = selectors.getDate(state, upsertId);\n      const source = selectors.getSrc(state, upsertId);\n      const type = selectors.getType(state, upsertId) as JournalEntryType;\n      const department = selectors.getDept(state, upsertId);\n      const category = selectors.getCatValue(state, upsertId);\n      const paymentMethod = selectors.getPayMethod(state, upsertId);\n      const description = \n        selectors.getDscrptValue(state, upsertId) ?? undefined;\n      const total = selectors.getTotalValue(state, upsertId);\n      const reconciled = \n        selectors.getReconciledValue(state, upsertId) ?? undefined;\n\n      const entry = client.readFragment<JournalEntryFragment>({\n        id:`JournalEntry:${id}`,\n        fragment:JOURNAL_ENTRY_FRAGMENT\n      });\n\n      if(!entry) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(\"Something went wrong.\")));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n\n      }\n\n      const fields = {} as UpdateJournalEntryVars[\"fields\"];\n      const variables = {id, fields} as UpdateJournalEntryVars;\n\n      let updates = 0;\n\n      if(date && date.toISOString() !== entry.date) {\n        updates++;\n        fields.date = date.toISOString();\n      }\n\n      if(type && type !== entry.type) {\n        updates++;\n        fields.type = type;\n      }\n\n      if(department && department !== entry.department.id) {\n        updates++;\n        fields.department = department;\n      }\n      \n      if(source && source.id !== entry.source.id) {\n        updates++;\n        fields.source = source;\n      }\n\n      if(category && category !== entry.category.id) {\n        updates++;\n        fields.category = category;\n      }\n\n      if(paymentMethod && paymentMethod !== entry.paymentMethod.id) {\n        updates++;\n        fields.paymentMethod = paymentMethod;\n      }\n\n      if(description !== entry.description) {\n        updates++;\n        fields.description = description;\n      }\n\n      if(total && (total.num/total.den) !== (entry.total.num/entry.total.den)) {\n        updates++;\n        fields.total = total;\n      }\n\n      if(reconciled !== undefined && reconciled !== entry.reconciled) {\n        updates++;\n        fields.reconciled = reconciled;\n      }\n\n      // NO updates\n      if(updates === 0) {\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        await Promise.resolve();\n        dispatch(cancel(upsertId));\n        return;\n      }\n\n      try {\n\n        const result = await client\n          .mutate<UpdateJournalEntry, UpdateJournalEntryVars>({\n            mutation:UPDATE_JOURNAL_ENTRY,\n            variables\n          });\n\n          if(!result.data?.journalEntryUpdate.id) {\n            throw new Error(\"Something went wrong.\");\n          }\n\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitted));\n\n          // Allow for any animation triggers for status submitted\n          await new Promise((r)=>setTimeout(r, 300));\n\n          // Clear upsert on success\n          dispatch(clear(upsertId));\n\n      } catch(error) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(error?.message || `${error}`)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n\n        return;\n\n      }\n\n    }\n\n  }\n}\n\nexport const setSubmitStatus = (upsertId:string, status:SubmitStatus)\n  :upsertActions.SetSubmitStatus => ({\n    type:upsertActions.SET_SUBMIT_STATUS,\n    payload:{upsertId, status}\n  });\n\nexport const setSubmitError = (upsertId:string, error:Error)\n  :upsertActions.SetSubmitError => ({\n    type:upsertActions.SET_SUBMIT_ERROR,\n    payload:{upsertId, error}\n  });\n\n// Type\nconst CATEGORY_TYPE_VALIDATION = gql`\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n`;\nexport const setType = (upsertId:string, type:JournalEntryType,\n  client:ApolloClient<any>):Thunk<upsertActions.SetTypeValue |\n    upsertActions.ClearCatValue> => async (dispatch, getState) =>\n{\n\n  const state = getState();\n\n  const cat = selectors.getCatValue(state, upsertId);\n\n  let clearCat = false;\n\n  if(cat !== null) {\n\n    try {\n\n      const {data} = await client.query<CategoryTypeValidationQuery,\n        CategoryTypeValidationQueryVars>({\n          query:CATEGORY_TYPE_VALIDATION,\n          variables:{id:cat}\n        });\n      \n      const curType = data.journalEntryCategory.type;\n\n      if(curType !== type) {\n        clearCat = true;\n      }\n\n    } catch (error) {\n\n      // TODO:  Implement generic error handler\n\n    }\n    \n  }\n  \n  if(clearCat) {\n\n    batch(() => {\n      dispatch(clearCatValue(upsertId));\n      dispatch({\n        type:upsertActions.SET_TYPE_VALUE,\n        payload:{upsertId, type}\n      });\n    });\n  \n  } else {\n    \n    dispatch({\n      type:upsertActions.SET_TYPE_VALUE,\n      payload:{upsertId, type}\n    });\n\n  }\n\n\n}\nexport const setTypeError = (upsertId:string, error:Error)\n  :upsertActions.SetTypeError => ({\n    type:upsertActions.SET_TYPE_ERROR,\n    payload:{upsertId, error}\n  });\nexport const clearTypeError = (upsertId:string)\n  :upsertActions.ClearTypeError => ({\n    type:upsertActions.CLEAR_TYPE_ERROR,\n    payload:{upsertId}\n  });\n\n// Date\nexport const setDateInput = (upsertId:string, input:string):\n  upsertActions.SetDateInput => ({\n    type:upsertActions.SET_DATE_INPUT,\n    payload:{upsertId, input}\n  });\n\nexport const clearDateInput = (upsertId:string):upsertActions.ClearDateInput =>\n  ({\n    type:upsertActions.CLEAR_DATE_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setDateValue = (upsertId:string, value:Date):\n  upsertActions.SetDateValue => ({\n    type:upsertActions.SET_DATE_VALUE,\n    payload:{upsertId, value}\n  });\n\nexport const clearDateValue = (upsertId:string):upsertActions.ClearDateValue =>\n  ({\n    type:upsertActions.CLEAR_DATE_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setDateError = (upsertId:string, error:Error):\n  upsertActions.SetDateError => ({\n    type:upsertActions.SET_DATE_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearDateError = (upsertId:string):upsertActions.ClearDateError =>\n  ({\n    type:upsertActions.CLEAR_DATE_ERROR,\n    payload:{upsertId}\n  });\n\nexport const validateDate = (upsertId:string)\n  :Thunk<upsertActions.SetDateError | upsertActions.ClearDateError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const date = selectors.getDate(state, upsertId);\n    const dateError = selectors.getDateError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Check for valid date\n    if(date) {\n      \n      if(Number.isNaN(date.getTime())) {\n        \n        dispatch(setDateError(upsertId, new Error(\"Invalid date.\")));\n      \n      } else if(dateError) {\n        \n        dispatch(clearDateError(upsertId));\n      \n      }\n\n    // Required\n    } else if(upsertType === selectors.UpsertType.Add) {\n      \n      dispatch(setDateError(upsertId, new Error(\"Date is required.\")));\n    \n    // Clear errors\n    } else if(dateError) {\n      \n      dispatch(clearDateError(upsertId));\n\n    }\n\n}\n\n// Department\nexport const setDeptInput = (upsertId:string, input:string)\n  :upsertActions.SetDeptInput => ({\n      type:upsertActions.SET_DEPT_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearDeptInput = (upsertId:string)\n  :upsertActions.ClearDeptInput => ({\n    type:upsertActions.CLEAR_DEPT_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setDeptValue = (upsertId:string, value:string)\n  :upsertActions.SetDeptValue => ({\n      type:upsertActions.SET_DEPT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearDeptValue = (upsertId:string)\n  :upsertActions.ClearDeptValue => ({\n    type:upsertActions.CLEAR_DEPT_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setDeptError = (upsertId:string, error:Error):\n  upsertActions.SetDeptError => ({\n    type:upsertActions.SET_DEPT_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearDeptError = (upsertId:string)\n  :upsertActions.ClearDeptError => ({\n    type:upsertActions.CLEAR_DEPT_ERROR,\n    payload:{upsertId}\n  });\n\nexport const setDeptOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetDeptOpen => ({\n    type:upsertActions.SET_DEPT_OPEN,\n    payload:{upsertId, open}\n  });\nconst VALIDATE_DEPT_LEAF = gql`\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n`;\nexport const validateDept = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetDeptError | upsertActions.ClearDeptError> => \n  async (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const dept = selectors.getDept(state, upsertId);\n    const deptError = selectors.getDeptError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      if(dept) {\n\n\n      } else {\n\n        dispatch(setDeptError(upsertId, new Error(\"Department is required.\")));\n\n      } \n\n    // Clear errors\n    } else if(deptError) {\n      \n      dispatch(clearDeptError(upsertId));\n\n    }\n\n}\n\nconst BUSINESS_VENDOR_CHECK = gql`\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n`\n\n// Category\nexport const setCatInput = (upsertId:string, input:string)\n  :upsertActions.SetCatInput => ({\n      type:upsertActions.SET_CAT_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearCatInput = (upsertId:string)\n  :upsertActions.ClearCatInput => ({\n    type:upsertActions.CLEAR_CAT_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setCatValue = (upsertId:string, value:string)\n  :upsertActions.SetCatValue => ({\n      type:upsertActions.SET_CAT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearCatValue = (upsertId:string)\n  :upsertActions.ClearCatValue => ({\n    type:upsertActions.CLEAR_CAT_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setCatError = (upsertId:string, error:Error):\n  upsertActions.SetCatError => ({\n    type:upsertActions.SET_CAT_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearCatError = (upsertId:string)\n  :upsertActions.ClearCatError => ({\n    type:upsertActions.CLEAR_CAT_ERROR,\n    payload:{upsertId}\n  });\n\nexport const setCatOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetCatOpen => ({\n    type:upsertActions.SET_CAT_OPEN,\n    payload:{upsertId, open}\n  });\n\nexport const validateCat = (upsertId:string)\n  :Thunk<upsertActions.SetCatError | upsertActions.ClearCatError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const cat = selectors.getCatValue(state, upsertId);\n    const catError = selectors.getCatError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add && !cat) {\n      \n      dispatch(setCatError(upsertId, new Error(\"Category is required.\")));\n    \n    // Clear errors\n    } else if(catError) {\n      \n      dispatch(clearCatError(upsertId));\n\n    }\n\n}\n\n// Source\nexport const setSrcType = (upsertId:string, srcType:JournalEntrySourceType)\n  :upsertActions.SetSrcType => ({\n    type:upsertActions.SET_SRC_TYPE,\n    payload:{upsertId, srcType}\n  });\n\nexport const clearSrcType = (upsertId:string):upsertActions.ClearSrcType => ({\n  type:upsertActions.CLEAR_SRC_TYPE,\n  payload:{upsertId}\n});\n\nexport const setSrcInput = (upsertId:string, input:string)\n  :upsertActions.SetSrcInput => ({\n      type:upsertActions.SET_SRC_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearSrcInput = (upsertId:string)\n  :upsertActions.ClearSrcInput => ({\n    type:upsertActions.CLEAR_SRC_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setSrcValue = (upsertId:string, value:JournalEntrySourceInput)\n  :upsertActions.SetSrcValue => ({\n      type:upsertActions.SET_SRC_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearSrcValue = (upsertId:string)\n  :upsertActions.ClearSrcValue => ({\n    type:upsertActions.CLEAR_SRC_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setSrcError = (upsertId:string, error:Error):\n  upsertActions.SetSrcError => ({\n    type:upsertActions.SET_SRC_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearSrcError = (upsertId:string):upsertActions.ClearSrcError => ({\n  type:upsertActions.CLEAR_SRC_ERROR,\n  payload:{upsertId}\n});\n\nexport const setSrcOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetSrcOpen => ({\n    type:upsertActions.SET_SRC_OPEN,\n    payload:{upsertId, open}\n  });\nexport const validateSrc = (upsertId:string)\n  :Thunk<upsertActions.SetSrcError | upsertActions.ClearSrcError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const src = selectors.getSrc(state, upsertId);\n    const srcError = selectors.getSrcError(state, upsertId);\n\n    if(src) {\n      if(srcError) {\n        dispatch(clearSrcError(upsertId));\n      }\n      return;\n    }\n    \n    const srcType = selectors.getSrcType(state, upsertId);\n    const srcInput = selectors.getSrcInput(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    if(srcInput) {\n      \n      if(srcType !== JournalEntrySourceType.Person) {\n        if(srcError) {\n          dispatch(clearSrcError(upsertId));\n        }\n        return;\n      }\n\n      // Validate name\n      const parsedName = parseFullName(srcInput);\n\n      if(!parsedName.first.trim()) {\n        dispatch(setSrcError(upsertId, new Error(\"First name is required.\")));\n      } else if(!parsedName.last.trim()) {\n        dispatch(setSrcError(upsertId, new Error(\"Last name is required.\")));\n      } else if(srcError){\n        dispatch(clearSrcError(upsertId));\n      }\n\n    // Required\n    } else if(upsertType === selectors.UpsertType.Add) {\n    \n      dispatch(setSrcError(upsertId, new Error(\"Source is required.\")));\n    \n    // Clear errors\n    } else if(srcError) {\n        \n      dispatch(clearSrcError(upsertId));\n\n    }\n      \n\n}\n// Payment Method\nexport const setPayMethodValue = (upsertId:string, value:string)\n  :upsertActions.SetPayMethodValue => ({\n    type:upsertActions.SET_PAY_METHOD_VALUE,\n    payload:{upsertId, value}\n  });\nexport const clearPayMethodValue = (upsertId:string):upsertActions.ClearPayMethodValue => \n({\n  type:upsertActions.CLEAR_PAY_METHOD_VALUE,\n  payload:{upsertId}\n});\nexport const setPayMethodError = (upsertId:string, error:Error):\n  upsertActions.SetPayMethodError => ({\n    type:upsertActions.SET_PAY_METHOD_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearPayMethodError = (upsertId:string)\n  :upsertActions.ClearPayMethodError => ({\n    type:upsertActions.CLEAR_PAY_METHOD_ERROR,\n    payload:{upsertId}\n  });\nexport const validatePayMethod = (upsertId:string)\n  :Thunk<upsertActions.SetPayMethodError | upsertActions.ClearPayMethodError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const payMethod = selectors.getPayMethod(state, upsertId);\n    const payMethodError = selectors.getPayMethodError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add && !payMethod) {\n      \n      dispatch(setPayMethodError(upsertId, \n        new Error(\"Payment Method is required.\")));\n    \n    // Clear errors\n    } else if(payMethodError) {\n      \n      dispatch(clearPayMethodError(upsertId));\n\n    }\n\n}\n\n// Description\nexport const setDscrptValue = (upsertId:string, value:string)\n  :upsertActions.SetDscrptValue => ({\n      type:upsertActions.SET_DSCRPT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearDscrptValue = (upsertId:string)\n  :upsertActions.ClearDscrptValue => ({\n    type:upsertActions.CLEAR_DSCRPT_VALUE,\n    payload:{upsertId}\n  });\n\n// Total\nexport const setTotalInput = (upsertId:string, input:string)\n  :upsertActions.SetTotalInput | upsertActions.SetTotalError =>\n{\n\n  const inputNum = Number.parseFloat(input);\n\n  if(Number.isNaN(inputNum)){\n    return setTotalError(upsertId, new TypeError(`Invalid Number.`));\n  }\n\n  let formattedInput = \"\";\n  for(let i = 0, len = input.length; i < len; i++) {\n    const char = input[i];\n    if(char === \".\") {\n      formattedInput += char;\n      len = Math.min(len, i + 3);\n    } else if(!Number.isNaN(Number.parseInt(char))) {\n      formattedInput += char;\n    }\n  }\n\n  return {\n    type:upsertActions.SET_TOTAL_INPUT,\n    payload:{ upsertId, input:formattedInput}\n  };\n\n}\n\nexport const clearTotalInput = (upsertId:string)\n  :upsertActions.ClearTotalInput => ({\n    type:upsertActions.CLEAR_TOTAL_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setTotalValue = (upsertId:string, total:number)\n  : upsertActions.SetTotalValue => \n{\n  \n  // Convert to rational\n  const {n:num, d:den} = new Fraction(total.toFixed(2));\n  const value = {num, den};\n\n  return {\n    type:upsertActions.SET_TOTAL_VALUE,\n    payload:{ upsertId, value}\n  };\n\n}\n\nexport const clearTotalValue = (upsertId:string)\n  :upsertActions.ClearTotalValue => ({\n    type:upsertActions.CLEAR_TOTAL_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setTotalError = (upsertId:string, error:Error):\n  upsertActions.SetTotalError => ({\n    type:upsertActions.SET_TOTAL_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearTotalError = (upsertId:string)\n  :upsertActions.ClearTotalError => ({\n    type:upsertActions.CLEAR_TOTAL_ERROR,\n    payload:{upsertId}\n  });\n\nexport const validateTotal = (upsertId:string)\n  :Thunk<upsertActions.SetTotalError | upsertActions.ClearTotalError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const total = selectors.getTotalValue(state, upsertId);\n    const totalError = selectors.getTotalError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      if(total) {\n\n        if(total.num/total.den === 0) {\n          dispatch(setTotalError(upsertId, new Error(\"Total cannot be 0.\")));\n        } else if(totalError) {\n          dispatch(clearTotalError(upsertId));\n        }\n\n      } else {\n\n        dispatch(setTotalError(upsertId, new Error(\"Total is required.\")));\n      \n      }\n\n    \n    // Clear errors\n    } else if(totalError) {\n      \n      dispatch(clearTotalError(upsertId));\n\n    }\n\n}\n\n// Reconciled\nexport const setReconciledValue = (upsertId:string, value:boolean)\n  :upsertActions.SetReconciledValue => ({\n      type:upsertActions.SET_RECONCILED_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearReconciledValue = (upsertId:string)\n  :upsertActions.ClearReconciledValue => ({\n    type:upsertActions.CLEAR_RECONCILED_VALUE,\n    payload:{upsertId}\n  });","import gql from 'graphql-tag';\n\nexport const GET_REPORT_DATA_DEPT_FRAGMENT = gql`\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n`;\n\nexport const GET_REPORT_DATA_ENTRY_FRAGMENT = gql`\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n    }\n    lastUpdate\n    deleted\n  }\n`;\n\nexport const GET_REPORT_DATA = gql`\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_DEPT_FRAGMENT},\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport { Link } from \"react-router-dom\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport TableChartIcon from \"@material-ui/icons/TableChart\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport numeral from \"numeral\";\nimport { red, green, orange, grey } from \"@material-ui/core/colors\";\nimport gql from \"graphql-tag\";\n\nimport { uuid, namespace } from \"../../utils/uuid\";\nimport { useDebounceDispatch as useDispatch } from \"../../redux/hooks\";\nimport { create } from \"../../redux/actions/journalEntryUpsert\";\nimport {\n  GetReportDataQuery,\n  GetReportDataQueryVariables,\n  JournalEntryType,\n  JournalEntryAdded_2Subscription as JournalEntryAdded,\n  JournalEntryUpdated_2Subscription as JournalEntryUpdated,\n  GetReportDataEntry_1Fragment as JournalEntryFragment,\n  DeptForUpsertAddQuery as DeptForUpsertAdd,\n  DeptForUpsertAddQueryVariables as DeptForUpsertAddVars\n} from \"../../apollo/graphTypes\";\nimport {\n  GET_REPORT_DATA,\n  JOURNAL_ENTRY_ADDED_SUB,\n  JOURNAL_ENTRY_UPDATED_SUB,\n  GET_REPORT_DATA_ENTRY_FRAGMENT\n} from \"./ReportData.gql\";\nimport UpsertEntry, { Values } from \"../Journal/Upsert/UpsertEntry\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../Journal/Upsert/upsertEntry.gql\";\n\nconst ADD_ENTRY_ID = uuid(\"DashboardJournalEntry\", namespace);\n\nconst colorMeter = (percentSpent: number, shade = 800) => {\n  if (percentSpent < 0.75) {\n    return green[shade];\n  } else if (percentSpent < 0.9) {\n    return orange[shade];\n  } else {\n    return red[shade];\n  }\n};\n\nconst BudgetMeter = (props: { spentPercentage: number; height: number }) => {\n  const { spentPercentage, height } = props;\n\n  return (\n    <Box\n      height={height}\n      bgcolor={colorMeter(spentPercentage)}\n      display=\"flex\"\n      justifyContent=\"flex-start\"\n    >\n      <Box\n        height=\"100%\"\n        width={`${100 * spentPercentage}%`}\n        bgcolor={grey[400]}\n      />\n    </Box>\n  );\n};\n\ninterface DeptReportObj {\n  name: string;\n  spent: number;\n  budget: number | null;\n}\n\nexport const DEPT_FOR_UPSERT_ADD = gql`\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst Dashboard = function(props: { deptId: string }) {\n  const { deptId } = props;\n\n  const [addEntryOpen, setAddEntryOpen] = useState(false);\n\n  const variables = useMemo(\n    () => ({\n      deptId,\n      where: {\n        department: { eq: deptId },\n        deleted: false\n      }\n    }),\n    [deptId]\n  );\n\n  const { loading, error, data, subscribeToMore, fetchMore } = useQuery<\n    GetReportDataQuery,\n    GetReportDataQueryVariables\n  >(GET_REPORT_DATA, {\n    variables\n  });\n\n  const { data: deptForUpsertAdd } = useQuery<\n    DeptForUpsertAdd,\n    DeptForUpsertAddVars\n  >(DEPT_FOR_UPSERT_ADD, { skip: !deptId, variables: { id: deptId } });\n\n  const client = useApolloClient();\n\n  useEffect(() => {\n    // Check if query has been cache already\n    const cacheResults = (() => {\n      try {\n        return client.readQuery<\n          GetReportDataQuery,\n          GetReportDataQueryVariables\n        >({\n          query: GET_REPORT_DATA,\n          variables\n        });\n      } catch (error) {\n        return null;\n      }\n    })();\n\n    // Request updated for any changes since last cache\n    if (cacheResults?.journalEntries) {\n      const gt = cacheResults.journalEntries\n        .reduce((date, entry) => {\n          const entryDate = new Date(entry.lastUpdate);\n          return entryDate > date ? entryDate : date;\n        }, new Date(0))\n        .toISOString();\n\n      fetchMore<keyof typeof variables>({\n        variables: {\n          ...variables,\n          where: {\n            ...(variables?.where || {}),\n            lastUpdate: { gt }\n          }\n        },\n        updateQuery: (prev, { fetchMoreResult }) => ({\n          ...(prev || {}),\n          ...(fetchMoreResult || {}),\n          journalEntries: [\n            ...(prev?.journalEntries || []),\n            ...(fetchMoreResult?.journalEntries || [])\n          ]\n        })\n      });\n    }\n\n    // Subscribe to entry additions\n    const addUnSub = subscribeToMore<JournalEntryAdded>({\n      document: JOURNAL_ENTRY_ADDED_SUB,\n      updateQuery: (prev, { subscriptionData }) => {\n        const journalEntryAdded = subscriptionData?.data?.journalEntryAdded;\n\n        if (\n          !journalEntryAdded ||\n          (journalEntryAdded.id !== deptId &&\n            journalEntryAdded.department.ancestors.every(\n              dept => dept.__typename === \"Business\" || dept.id !== deptId\n            ))\n        ) {\n          return prev;\n        }\n\n        return {\n          ...(prev || {}),\n          journalEntries: [\n            ...(prev?.journalEntries || []),\n            ...([subscriptionData?.data?.journalEntryAdded] || [])\n          ]\n        };\n      }\n    });\n    // Subscribe to updates\n    const updateUnSub = subscribeToMore<JournalEntryUpdated>({\n      document: JOURNAL_ENTRY_UPDATED_SUB,\n      updateQuery: (prev, { subscriptionData }) => {\n        const journalEntryUpdated = subscriptionData?.data?.journalEntryUpdated;\n\n        if (journalEntryUpdated) {\n          client.writeFragment<JournalEntryFragment>({\n            id: `JournalEntry:${journalEntryUpdated.id}`,\n            fragment: GET_REPORT_DATA_ENTRY_FRAGMENT,\n            data: journalEntryUpdated\n          });\n        }\n\n        return prev;\n      }\n    });\n\n    return () => {\n      addUnSub();\n      updateUnSub();\n    };\n  }, [variables, fetchMore, client, subscribeToMore, deptId]);\n\n  const entries = useMemo(() => {\n    return (data?.journalEntries || []).filter(entry => !entry.deleted);\n  }, [data]);\n  const deptName = data?.department?.name || \"\";\n\n  useEffect(() => {\n    document.title = deptName;\n  }, [deptName]);\n\n  const dispatch = useDispatch();\n\n  const onClickNewEntry = useCallback(\n    (event?) => {\n      dispatch(create(ADD_ENTRY_ID, { fromDept: deptId }));\n    },\n    [dispatch, deptId]\n  );\n\n  const department = data?.department || null;\n\n  const {\n    totalRemaining,\n    budget,\n    spentToBudgetRatio,\n    deptReport\n  } = useMemo(() => {\n    // Generate department report objects\n    const deptReport = new Map<string, DeptReportObj>();\n    let subDeptBudgetAg = 0;\n\n    if (department) {\n      const budget = (() => {\n        if (department.budget) {\n          const { num, den } = department.budget.amount;\n          return num / den;\n        }\n        return null;\n      })();\n\n      deptReport.set(department.id, {\n        name: department.name,\n        spent: 0,\n        budget\n      });\n\n      for (const subDept of department.descendants) {\n        let budget: null | number = null;\n\n        if (subDept.budget) {\n          const { num, den } = subDept.budget.amount;\n          const subBudgetDec = num / den;\n          subDeptBudgetAg += subBudgetDec;\n          budget = subBudgetDec;\n        }\n\n        deptReport.set(subDept.id, {\n          name: subDept.name,\n          spent: 0,\n          budget\n        });\n      }\n    }\n\n    // Calculating aggregate depts and credits\n    let spent = 0;\n    for (const entry of entries) {\n      const deptReportObj = deptReport.get(\n        entry.department.id\n      ) as DeptReportObj;\n\n      const entryTotal = entry.total.num / entry.total.den;\n\n      if (entry.type === JournalEntryType.Credit) {\n        spent -= entryTotal;\n        deptReportObj.spent -= entryTotal;\n      } else {\n        spent += entryTotal;\n\n        deptReportObj.spent += entryTotal;\n      }\n    }\n\n    // Format values\n    const budgetDec = (() => {\n      if (department?.budget) {\n        const { num, den } = department?.budget?.amount || { num: 0, den: 1 };\n        return num / den;\n      }\n\n      return subDeptBudgetAg;\n    })();\n\n    const totalRemaining = numeral(budgetDec - spent).format(\"$0,0.00\");\n    const budget = numeral(budgetDec).format(\"$0,0.00\");\n    const spentToBudgetRatio = spent / budgetDec;\n\n    return {\n      totalRemaining,\n      budget,\n      spentToBudgetRatio,\n      deptReport\n    };\n  }, [entries, department]);\n\n  const subDeptCards = useMemo(() => {\n    const subDeptCards: JSX.Element[] = [];\n\n    for (const [id, { budget, spent, name }] of deptReport) {\n      // Do not include root department\n      if (id === department?.id) {\n        continue;\n      }\n\n      const card = (\n        <Grid key={id} item xs={12} md={4} lg={3}>\n          <Card>\n            <CardHeader\n              titleTypographyProps={{\n                noWrap: true\n              }}\n              title={name}\n            />\n            <CardContent>\n              {(() => {\n                if (budget === null) {\n                  return (\n                    <Box color={spent > 0 ? red[900] : green[900]} clone>\n                      <Typography variant=\"h6\">\n                        {`Spent: ${numeral(Math.abs(spent)).format(\"$0,0.00\")}`}\n                      </Typography>\n                    </Box>\n                  );\n                }\n\n                const totalRemaining = budget - spent;\n\n                return (\n                  <React.Fragment>\n                    <Box color={colorMeter(spent / budget, 900)} clone>\n                      <Typography variant=\"h6\">{`${numeral(\n                        totalRemaining\n                      ).format(\"$0,0.00\")} Remaining`}</Typography>\n                    </Box>\n                    <Typography variant=\"body1\">{`of ${numeral(budget).format(\n                      \"$0,0.00\"\n                    )}`}</Typography>\n                    <BudgetMeter spentPercentage={spent / budget} height={5} />\n                  </React.Fragment>\n                );\n              })()}\n            </CardContent>\n          </Card>\n        </Grid>\n      );\n\n      subDeptCards.push(card);\n    }\n\n    return subDeptCards;\n  }, [deptReport, department]);\n\n  const onClickAddEntry = useCallback((event?) => setAddEntryOpen(true), [\n    setAddEntryOpen\n  ]);\n\n  const initialValues = useMemo<Partial<Values> | undefined>(\n    () =>\n      deptForUpsertAdd?.department\n        ? {\n            department: deptForUpsertAdd.department\n          }\n        : undefined,\n    [deptForUpsertAdd]\n  );\n\n  if (loading) {\n    return <p>Loading...</p>;\n  } else if (error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" overflow=\"hidden\" clone>\n      <Container>\n        <Box padding={8}>\n          <Grid container alignItems=\"center\" justify=\"center\" spacing={4}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                startIcon={<AddIcon />}\n                children={\"New Entry\"}\n                onClick={onClickAddEntry}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}/reconcile`}\n                variant=\"contained\"\n                startIcon={<DoneAllIcon />}\n                children={\"Reconcile\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                startIcon={<AssessmentIcon />}\n                children={\"Reports\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}`}\n                variant=\"contained\"\n                startIcon={<TableChartIcon />}\n                children={\"Journal\"}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n        <Box flexGrow={1} overflow=\"auto\">\n          <Grid justify=\"center\" container spacing={2}>\n            <Grid item xs={12}>\n              <Typography align=\"center\" variant=\"h3\">\n                {deptName}\n              </Typography>\n              <Box color={colorMeter(spentToBudgetRatio)}>\n                <Typography align=\"center\" variant=\"h4\">\n                  {`${totalRemaining} Remaining`}\n                </Typography>\n              </Box>\n              <Typography align=\"center\" variant=\"subtitle1\">\n                {`of ${budget}`}\n              </Typography>\n              <BudgetMeter spentPercentage={spentToBudgetRatio} height={10} />\n            </Grid>\n            {subDeptCards}\n          </Grid>\n        </Box>\n        <UpsertEntry\n          initialValues={initialValues}\n          open={addEntryOpen}\n          setOpen={setAddEntryOpen}\n        />\n      </Container>\n    </Box>\n  );\n};\n\nexport default Dashboard;\n","import React, { useCallback, useState, useMemo } from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport Box from \"@material-ui/core/Box\";\nimport AutoSizer, { Size } from \"react-virtualized-auto-sizer\";\nimport { Fab, useTheme } from \"@material-ui/core\";\nimport { Add } from \"@material-ui/icons\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport Header from \"./Header\";\nimport Body, { JournalMode } from \"./Body\";\nimport UpsertEntry, { Values } from \"../Upsert/UpsertEntry\";\nimport { uuid, namespace } from \"../../../utils/uuid\";\nimport { DEPT_FOR_UPSERT_ADD } from \"../../Dashboard/Dashboard\";\nimport {\n  DeptForUpsertAddQuery as DeptForUpsertAdd,\n  DeptForUpsertAddQueryVariables as DeptForUpsertAddVars\n} from \"../../../apollo/graphTypes\";\n\nexport const entryUpsertId = uuid(\"Journal\", namespace);\n\nconst Journal = function(props: { deptId?: string; mode: JournalMode }) {\n  const { deptId, mode } = props;\n\n  const theme = useTheme();\n\n  const [upsertOpen, setUpsertOpen] = useState(false);\n  const [updateEntryId, setUpdateEntryId] = useState<undefined | string>(\n    undefined\n  );\n\n  const { data: deptForUpsertAdd } = useQuery<\n    DeptForUpsertAdd,\n    DeptForUpsertAddVars\n  >(DEPT_FOR_UPSERT_ADD, {\n    skip: !deptId,\n    variables: { id: deptId as string }\n  });\n\n  const initialValues = useMemo<Partial<Values> | undefined>(\n    () =>\n      deptForUpsertAdd?.department\n        ? {\n            department: deptForUpsertAdd.department\n          }\n        : undefined,\n    [deptForUpsertAdd]\n  );\n\n  const closeUpsert = useCallback(() => {\n    setUpsertOpen(false);\n    setUpdateEntryId(undefined);\n  }, [setUpdateEntryId, setUpsertOpen]);\n\n  const updateEntry = useCallback(\n    (entryId: string) => {\n      setUpdateEntryId(entryId);\n      setUpsertOpen(true);\n    },\n    [setUpdateEntryId, setUpsertOpen]\n  );\n\n  const addEntry = useCallback(() => {\n    setUpsertOpen(true);\n    setUpdateEntryId(undefined);\n  }, [setUpdateEntryId, setUpsertOpen]);\n\n  const autoSizerChildren = useCallback(\n    ({ width, height }: Size) => {\n      return (\n        <Body\n          updateEntry={updateEntry}\n          mode={mode}\n          deptId={deptId}\n          width={width}\n          height={height}\n        />\n      );\n    },\n    [deptId, mode, updateEntry]\n  );\n\n  return (\n    <Box\n      style={{ overflowX: \"auto\" }}\n      width=\"100%\"\n      overflow=\"hidden\"\n      flexGrow={1}\n      display=\"flex\"\n      justifyContent=\"flex-start\"\n      flexDirection=\"column\"\n      clone\n    >\n      <form>\n        <Box\n          width=\"100%\"\n          flexGrow={1}\n          display=\"flex !important\" // Override display:table from child Table\n          justifyContent=\"flex-start\"\n          flexDirection=\"column\"\n          clone\n        >\n          <Table component=\"div\">\n            <Header />\n            <Box flexGrow={1}>\n              <AutoSizer children={autoSizerChildren} />\n            </Box>\n            {mode === JournalMode.View && (\n              <Box\n                position=\"fixed !important\"\n                bottom={theme.spacing(2)}\n                right={theme.spacing(2)}\n                clone\n              >\n                <Fab\n                  disabled={upsertOpen}\n                  size=\"large\"\n                  color=\"secondary\"\n                  aria-label=\"add entry\"\n                  children={<Add />}\n                  onClick={addEntry}\n                />\n              </Box>\n            )}\n          </Table>\n        </Box>\n        <UpsertEntry\n          initialValues={initialValues}\n          open={upsertOpen}\n          setOpen={setUpsertOpen}\n          entryId={updateEntryId}\n        />\n      </form>\n    </Box>\n  );\n};\n\nexport default Journal;\n","import React, {useCallback, useEffect, useState, useMemo} from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport {DeptsForNav_1Query as DeptsForNavQuery} from \"../apollo/graphTypes\";\n\nconst DEPTS_FOR_NAV = gql`\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n`;\n\nconst TopNav = function(props) {\n\n  const {loading, error, data} = useQuery<DeptsForNavQuery>(DEPTS_FOR_NAV);\n\n  const [value, setValue] = useState<string | null>(null);\n\n  const depts = (data?.departments || []);\n\n  type Department = typeof depts[0];\n\n  const {rootDepts, virtualRoots} = useMemo(() => {\n    \n    const rootDepts:Department[] = [];\n    const virtualRoots = new Set<string>();\n\n    for(const dept of depts) {\n      \n      if(dept.parent.__typename === \"Business\") {\n        rootDepts.push(dept);\n      }\n\n      if(dept.virtualRoot) {\n        virtualRoots.add(dept.id);\n      }\n\n    }\n\n    return {rootDepts, virtualRoots};\n\n  },[depts]);\n\n  const subDepts =  useMemo(() => {\n\n    const subDepts:Department[] = [];\n\n    if(value && virtualRoots.has(value)) {\n      \n      for(const dept of depts) {\n  \n        if(dept.parent.id === value) {\n  \n          subDepts.push(dept);\n  \n        }\n  \n      }\n\n    }\n\n    return subDepts;\n\n  }, [virtualRoots, value, depts]);\n\n  useEffect(() => { document.title = \"Select Department\"; });\n\n  const onChange = useCallback((event?) => {\n    setValue(event?.target?.value || null);\n  },[setValue]);\n  \n  if(loading) {\n    return <p>Loading...</p>;\n  } else if(error) {\n    return <p>{error.message}</p>;\n  }\n\n\n  const showSubDepts = subDepts.length > 0;\n\n  return <Box\n    flexGrow={1}\n    display=\"flex\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    flexDirection=\"column\"\n    clone\n  >\n    <Container>\n      <Box padding={4} clone>\n        <Typography align=\"center\" color=\"primary\" variant=\"h3\">\n          Select Department\n        </Typography>\n      </Box>\n      <Box minWidth=\"250px !important\" clone>\n        <FormControl variant=\"filled\">\n          <InputLabel>Department</InputLabel>\n          <Select\n            value={value} \n            onChange={onChange}\n            autoWidth\n          >{rootDepts.map((dept) => {\n            \n            const props = {\n              component:Link,\n              to:`/department/${dept.id}`,\n              key:dept.id,\n              value:dept.id,\n              children:dept.name\n            }  as any;\n\n            if(dept.virtualRoot) {\n              delete props.component;\n              delete props.to;\n            }\n\n            return <MenuItem {...props}/>;\n          \n          })}</Select>\n        </FormControl>\n      </Box>\n      {showSubDepts &&\n        <Box pt={2}>\n          <Box pt={2} minWidth=\"250px !important\" clone>\n            <FormControl variant=\"filled\">\n              <InputLabel>Sub Department</InputLabel>\n              <Select autoWidth>{subDepts.map((dept) => {\n                  const props = {\n                    component:Link,\n                    to:`/department/${dept.id}`,\n                    key:dept.id,\n                    value:dept.id,\n                    children:dept.name\n                  }  as any;\n      \n                  return <MenuItem {...props}/>;\n              })}</Select>\n            </FormControl>\n        </Box>\n      </Box>}\n        \n    </Container>\n   </Box>;\n\n}\n\nexport default TopNav;","import React from \"react\";\nimport {Route, Switch, useParams} from \"react-router-dom\";\n\n\nimport Journal from \"./components/Journal/Table/Journal\";\nimport {JournalMode} from \"./components/Journal/Table/Body\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\nimport TopNav from \"./components/TopNav\";\n\nconst DashBoardRender = (props) => {\n  const {id} = useParams();\n  return id ? <Dashboard deptId={id} /> : <div>Error: No Dept ID!</div>;\n}\n\nconst JournalViewRender = (props) => {\n  const {id} = useParams();\n  return  <Journal mode={JournalMode.View} deptId={id} />;\n}\n\nconst JournalReconcileRender = (props) => {\n  const {id} = useParams();\n  return  <Journal mode={JournalMode.Reconcile} deptId={id} />;\n}\n\nconst Routes = (props) => {\n\n  return <Switch>\n      <Route exact path=\"/\" component={TopNav}/>\n      <Route exact path=\"/department/:id\" component={DashBoardRender}/>\n      <Route exact path=\"/journal\" component={Journal}/>\n      <Route exact path=\"/journal/:id\" component={JournalViewRender}/>\n      <Route\n        exact\n        path=\"/journal/:id/reconcile\"\n        component={JournalReconcileRender}\n      />\n    </Switch>;\n\n}\n\nexport default Routes;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n    \nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n","import React, {Fragment} from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nimport client from \"./apollo/apollo\";\nimport Routes from \"./Routes\";\nimport store from \"./redux/store\";\n\nexport default function App() {\n  return <Fragment>\n    <CssBaseline />\n    <Provider store={store}>\n      <ApolloProvider client={client}>\n        <Router>\n          <Box\n            position=\"fixed\"\n            top={0}\n            left={0}\n            height=\"100vh\"\n            width=\"100vw\"\n            overflow=\"hidden\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <Routes/>\n          </Box>\n\n        </Router>\n      </ApolloProvider>\n    </Provider>\n  </Fragment>;\n    \n}\n"],"sourceRoot":""}