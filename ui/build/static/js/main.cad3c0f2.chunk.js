(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{408:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"PaymentMethodAuthorizedEntity","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5673:function(e,t,n){e.exports=n(5779)},5779:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(32),o=n.n(l),i=n(77),u=n(5817),c=n(124),d=n(139),s=n(314),m=n(408),p=new s.b({introspectionQueryResultData:m}),f=new s.a({fragmentMatcher:p,addTypename:!0}),b=n(17),v=n(18),y=n.n(v);function E(){var e=Object(b.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return E=function(){return e},e}var O,h,j,g,C,R,M,k,_=[y()(E())],w={},I=n(429),S=n(410),x=n(64),A=n(412),T=n(162),D=new I.a({uri:"/graphql",credentials:"same-origin"}),F=new S.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),$=x.a.from([Object(A.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),x.a.split((function(e){var t=e.query,n=Object(T.a)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),F,D)]),P=new d.a({link:$,cache:f,typeDefs:_,resolvers:w}),N=n(138),L=n(38),q=n(51),U=n(10),B=n(20),J=n.n(B),W=n(52),V=n(179),G=n.n(V),z=n(26),K=n(65),X=n.n(K),Q=n(5852),H=n(420),Y=n(5848),Z=n(5849),ee=n(5844),te=n(5827),ne=n(5845),ae=n(301),re=n(373),le=n(374),oe=n(370),ie=n(66),ue=n(172),ce=n(169),de=n(39),se=n(428),me=n(180),pe=n(21),fe=n.n(pe),be=(n(5778),n(177));function ve(){var e=Object(b.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ve=function(){return e},e}function ye(){var e=Object(b.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ye=function(){return e},e}function Ee(){var e=Object(b.a)(['\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: "JournalEntries_1", filter: ["where"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(b.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    description\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      n\n      d\n      s\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    items {\n      ...JournalEntryItem_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Oe=function(){return e},e}function he(){var e=Object(b.a)(["\n  fragment JournalEntryItem_1Fragment on JournalEntryItem {\n    __typename\n    id\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    total {\n      n\n      d\n      s\n    }\n    units\n    description\n    lastUpdate\n    deleted\n  }\n  ","\n  ","\n"]);return he=function(){return e},e}function je(){var e=Object(b.a)(["\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      n\n      d\n      s\n    }\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n  ","\n"]);return je=function(){return e},e}function ge(){var e=Object(b.a)(["\n  fragment JournalEntryDept_1Fragment on Department {\n    __typename\n    id\n    name\n    ancestors {\n      __typename\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n  }\n"]);return ge=function(){return e},e}function Ce(){var e=Object(b.a)(["\n  fragment JournalEntryCategory_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    type\n    name\n  }\n"]);return Ce=function(){return e},e}function Re(){var e=Object(b.a)(["\n  fragment JournalEntryPayMethod_1Fragment on PaymentMethod {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Re=function(){return e},e}!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(O||(O={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(h||(h={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(j||(j={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(g||(g={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(C||(C={})),function(e){e.Update="UPDATE",e.Add="ADD"}(R||(R={})),function(e){e.Pos="POS",e.Neg="NEG"}(M||(M={})),function(e){e.Asc="ASC",e.Desc="DESC"}(k||(k={}));var Me=y()(Re()),ke=y()(Ce()),_e=y()(ge()),we=y()(je(),Me),Ie=y()(he(),ke,_e),Se=y()(Oe(),Me,_e,ke,we,Ie),xe=y()(Ee(),Se),Ae=(y()(ye(),Se),y()(ve(),Se),"5dc46d0af74afb2c2805bd54"),Te=n(5822),De=n(5823),Fe=n(5824),$e=n(5825),Pe=n(5826),Ne=n(5828),Le=n(5829),qe=n(5830),Ue=n(5831),Be=n(5832),Je=n(5833),We=n(5834),Ve=n(5835),Ge=n(5836),ze={Add:Object(a.forwardRef)((function(e,t){return r.a.createElement(Te.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return r.a.createElement(De.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return r.a.createElement(Fe.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return r.a.createElement($e.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return r.a.createElement(Pe.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,t){return r.a.createElement(te.a,Object.assign({},e,{ref:t}))})),Export:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return r.a.createElement(Le.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(qe.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ue.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(Pe.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return r.a.createElement(Be.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return r.a.createElement(Fe.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return r.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return r.a.createElement(We.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ve.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return r.a.createElement(Ge.a,Object.assign({},e,{ref:t}))}))},Ke=n(27),Xe=n(33),Qe=n(5793),He=n(5819),Ye=n(5818),Ze=n(5795),et=n(5810),tt=n(5796),nt=n(154),at=n(5840),rt=n(5841);function lt(){var e=Object(b.a)(["\n  mutation AddEntryRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return lt=function(){return e},e}var ot,it=y()(lt(),we),ut=function(){var e=Object(L.a)(J.a.mark((function e(t,n,a){var r,l,o,i,u,c;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=a.paymentMethod.value[a.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:a.paymentMethod.value[a.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),i=o.paymentMethod,u=o.paymentMethodAdd,c={id:n,fields:{date:a.date.value,description:(null===(r=a.description)||void 0===r?void 0:r.trim())?a.description.trim():null,paymentMethod:i,total:a.total.value,reconciled:null!==(l=a.reconciled)&&void 0!==l?l:null},paymentMethodAdd:u},e.next=4,t.mutate({mutation:it,variables:c});case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ct=n(43),dt=n(299),st=n(148),mt=n(174),pt=n(5837),ft=n(5838),bt=n(5839),vt=function(e){return function(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return{inputValue:t,value:e.apply(void 0,[t].concat(a))}}};!function(e){e[e.NOTIFICATION=0]="NOTIFICATION",e[e.ERROR=1]="ERROR",e[e.FATAL_ERROR=2]="FATAL_ERROR"}(ot||(ot={}));var yt=function(){var e=Object(Ke.c)(),t=e.setStatus,n=e.status,r=Object(a.useCallback)((function(e){n?e&&!Object.keys(e).some((function(t){return e[t]!==n[t]}))||t(e):e&&t(e)}),[t,n]);return[null!==n&&void 0!==n?n:null,r]},Et={inputMode:"numeric"},Ot={tabIndex:-1},ht=vt((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=t[1];return a&&Object(mt.a)(a)?Object(pt.a)(a):r||""})),jt=function(e){var t,n,l,o=e.variant,i=void 0===o?"filled":o,u=e.autoFocus,c=void 0!==u&&u,d=e.disabled,s=void 0!==d&&d,m=e.maxDate,p=void 0===m?new Date:m,f=e.minDate,b=Object(Ke.c)().isSubmitting,v=Object(a.useCallback)((function(e){var t=((null===e||void 0===e?void 0:e.value)||"").trim();if(!t)return"Date is Required";var n=Object(ft.a)(t);return Object(mt.a)(n)?f&&n<f?"Cannot be before ".concat(Object(se.a)(f,"MM/dd/yyyy")):p<n?"Cannot be after ".concat(Object(se.a)(p,"MM/dd/yyyy")):void 0:"Invalid Date"}),[f,p]),y=Object(Ke.b)({name:"date",validate:v}),E=Object(U.a)(y,3),O=E[0],h=E[1],j=E[2],g=null!==(t=null===(n=O.value)||void 0===n?void 0:n.inputValue)&&void 0!==t?t:null,C=h.error,R=h.touched,M=j.setValue,k=j.setTouched,_=null===(l=h.initialValue)||void 0===l?void 0:l.inputValue,w=Object(a.useMemo)((function(){return _&&Object(mt.a)(_)?_:new Date}),[_]),I=Object(a.useMemo)((function(){return{autoFocus:c}}),[c]),S=Object(a.useRef)(!1),x=Object(a.useCallback)((function(){return setTimeout((function(){S.current||k(!0)}),0)}),[k,S]),A=Object(a.useCallback)((function(){return S.current=!0}),[S]),T=Object(a.useCallback)((function(){S.current=!1,x()}),[S,x]),D=Object(a.useCallback)((function(e,t){M(ht(e&&Object(mt.a)(e)?Object(bt.a)([new Date,e]):e,t))}),[M]),F=yt(),$=Object(U.a)(F,1)[0],P=Object(a.useMemo)((function(){return Object(W.a)({},O,{disabled:b||s||(null===$||void 0===$?void 0:$.type)===ot.FATAL_ERROR,value:g,error:R&&!!C,helperText:R?C:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:i,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date",initialFocusedDate:w,autoOk:!0,InputProps:I,inputProps:Et,placeholder:"mm/dd/yyyy",KeyboardButtonProps:Ot,onBlur:x,onOpen:A,onClose:T,onChange:D})}),[g,w,x,C,i,I,b,O,A,T,D,R,s,$]);return r.a.createElement(ct.a,{utils:st.default},r.a.createElement(dt.b,Object.assign({maxDate:p},e,P)))},gt=n(45),Ct=n(258),Rt=function(e){var t,n=e.autoFocus,l=void 0!==n&&n,o=e.disabled,i=void 0!==o&&o,u=e.variant,c=void 0===u?"filled":u,d=Object(gt.a)(e,["autoFocus","disabled","variant"]),s=Object(Ke.b)({name:"description"}),m=Object(U.a)(s,3),p=m[0],f=m[2].setValue,b=Object(a.useCallback)((function(e){var t,n;f((null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.trimLeft())||null)}),[f]),v=Object(a.useMemo)((function(){return{type:"text",autoFocus:l}}),[l]),y=yt(),E=Object(U.a)(y,1)[0];return r.a.createElement(Ct.a,Object.assign({},d,p,{disabled:i||(null===E||void 0===E?void 0:E.type)===ot.FATAL_ERROR,onChange:b,value:null!==(t=p.value)&&void 0!==t?t:"",variant:c,label:"Description",name:"description",InputProps:v}))},Mt=n(306),kt=function(e){return{n:Math.abs(e.n),d:Math.abs(e.d),s:-1===e.s?M.Neg:M.Pos}},_t=function(e){return new fe.a({n:e.s===M.Neg?-Math.abs(e.n):Math.abs(e.n),d:Math.abs(e.d)})},wt={min:"0.00",step:"0.01"},It=vt((function(e){return"string"!==typeof e||e.trim()?kt(new fe.a(e).round(2)):kt(new fe.a(0))})),St=function(e){var t,n,l=e.autoFocus,o=void 0!==l&&l,i=e.disabled,u=void 0!==i&&i,c=e.variant,d=void 0===c?"filled":c,s=e.maxTotal,m=void 0===s?new fe.a(Number.MAX_SAFE_INTEGER):s,p=e.minTotal,f=void 0===p?new fe.a(0):p,b=Object(gt.a)(e,["autoFocus","disabled","variant","maxTotal","minTotal"]),v=new fe.a(1,100).compare(f)>0?new fe.a(1,100):f,y=Object(a.useCallback)((function(e){var t,n;if(!e||null===(t=null===(n=e.inputValue)||void 0===n?void 0:n.trim())||void 0===t||!t)return"Total Required";var a=_t(e.value);return Number.isNaN(Number.parseInt(e.inputValue))?"Invalid Number":a.compare(m)>0?"Cannot be greater than ".concat(X()(m.valueOf()).format("$0,0.00")):0===a.compare(new fe.a(0))?"Cannot be 0":a.compare(v)<0?"Cannot be less than ".concat(X()(v.valueOf()).format("$0,0.00")):void 0}),[v,m]),E=Object(Ke.b)({name:"total",validate:y}),O=Object(U.a)(E,3),h=O[0],j=O[1],g=O[2].setValue,C=null!==(t=null===(n=h.value)||void 0===n?void 0:n.inputValue)&&void 0!==t?t:"",R=j.error,M=j.touched,k=Object(a.useMemo)((function(){return{type:"number",autoFocus:o,startAdornment:r.a.createElement(Mt.a,{position:"start"},"$")}}),[o]),_=Object(a.useCallback)((function(e){var t,n;g(It((null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.value)||void 0===n?void 0:n.toString())||""))}),[g]),w=Object(a.useMemo)((function(){var e=new fe.a(Number.MAX_SAFE_INTEGER),t=new fe.a(1,100);return M&&R?R:0!==m.compare(e)&&v.compare(t)>0?"Max ".concat(X()(m.valueOf()).format("$0,0.00")," & Min ").concat(X()(v.valueOf()).format("$0,0.00")):0!==m.compare(e)?"Max ".concat(X()(m.valueOf()).format("$0,0.00")):v.compare(t)>0?"Min ".concat(X()(v.valueOf()).format("$0,0.00")):""}),[M,R,m,v]),I=yt(),S=Object(U.a)(I,1)[0];return r.a.createElement(Ct.a,Object.assign({},b,h,{disabled:u||(null===S||void 0===S?void 0:S.type)===ot.FATAL_ERROR,type:"number",value:C,error:M&&!!R,helperText:w,placeholder:"0.00",label:"Total",name:"total",required:!0,variant:d,inputProps:wt,InputProps:k,onChange:_}))},xt=n(388),At=n(403),Tt={type:"checkbox"},Dt=function(e){var t,n=e.label,a=e.disabled,l=void 0!==a&&a,o=Object(gt.a)(e,["label","disabled"]),i=Object(Ke.b)({name:"reconciled",type:"checkbox"}),u=Object(U.a)(i,1)[0],c=null!==(t=u.value)&&void 0!==t&&t,d=yt(),s=Object(U.a)(d,1)[0];return n?r.a.createElement(xt.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===ot.FATAL_ERROR,label:"Reconcile",control:r.a.createElement(At.a,{inputProps:Tt})})):r.a.createElement(At.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===ot.FATAL_ERROR,inputProps:Tt}))},Ft=n(406);function $t(){var e=Object(b.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return $t=function(){return e},e}function Pt(){var e=Object(b.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return Pt=function(){return e},e}function Nt(){var e=Object(b.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      ... on Business {\n        __typename\n        id\n      }\n      ... on Department {\n        __typename\n        id\n      }\n    }\n  }\n"]);return Nt=function(){return e},e}function Lt(){var e=Object(b.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return Lt=function(){return e},e}function qt(){var e=Object(b.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return qt=function(){return e},e}function Ut(){var e=Object(b.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return Ut=function(){return e},e}var Bt=y()(Ut()),Jt=y()(qt()),Wt=y()(Lt()),Vt=y()(Nt()),Gt=y()(Pt(),Vt),zt=y()($t()),Kt=n(5851);function Xt(){var e=Object(b.a)(["\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return Xt=function(){return e},e}var Qt=y()(Xt(),zt),Ht=function(e){var t,n,a=null!==(t=null===e||void 0===e?void 0:e.value)&&void 0!==t?t:[],r=a.length,l=a[r-1],o=a[r-2];if(void 0===l)return"Method Required";if("string"===typeof l){if((null===o||void 0===o?void 0:o.id)===Ae&&!(null!==(n=l.match(/[0-9]/g))&&void 0!==n?n:[]).join(""))return"Check # Required"}else if(l.id===Ae)return"Check # Required"},Yt=function(e){return"string"===typeof e?e:e.name},Zt=function(e,t){var n=e.length-1;return e.map((function(a,l){var o,i,u=n===l,c=t({index:l}),d=c.key,s=Object(gt.a)(c,["key"]),m=e[l-1],p="string"===typeof a;switch(null===m||void 0===m?void 0:m.id){case Ae:o="CK-"+(p?a:a.name);break;default:o=Yt(a)}if(u){if(!p)switch(a.id){case Ae:i=r.a.createElement("span",null,"CK-")}}else i=r.a.createElement(Pe.a,{fontSize:"small"});return r.a.createElement(ae.a,{key:d,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Ft.a,Object.assign({color:u?"primary":"default",variant:u?"default":"outlined",label:o,size:"medium"},s,{disabled:!u}))," ",i)}))},en=function(e){var t,n,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(gt.a)(e,["disabled"]),s=Object(a.useState)(!1),m=Object(U.a)(s,2),p=m[0],f=m[1],b=Object(Ke.b)({name:"paymentMethod",validate:Ht}),v=Object(U.a)(b,3),y=v[0],E=v[1],O=v[2],h=y.onBlur,j=null!==(t=null===(n=y.value)||void 0===n?void 0:n.value)&&void 0!==t?t:[],g=null!==(l=null===(o=y.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",C=E.error,R=E.touched,M=O.setValue,k=null!==(i=j[j.length-1])&&void 0!==i?i:null,_=Object(a.useMemo)((function(){return null===k?{where:{hasParent:!1}}:{where:{parent:{eq:k.id}}}}),[k]),w=yt(),I=Object(U.a)(w,2),S=I[0],x=I[1],A=Object(a.useCallback)((function(e){x({msg:e.message,type:ot.FATAL_ERROR})}),[x]),T=Object(z.c)(Qt,{skip:"string"===typeof k,variables:_,onError:A}),D=T.loading,F=T.error,$=T.data,P=Object(a.useMemo)((function(){return(null===$||void 0===$?void 0:$.paymentMethods)&&"string"!==typeof k&&(null===k||void 0===k?void 0:k.id)!==Ae?$.paymentMethods:[]}),[$,k]),N=P.length>0,L=Object(a.useMemo)((function(){var e;return(null===(e=k)||void 0===e?void 0:e.id)===Ae}),[k]),q=Object(a.useMemo)((function(){return!N&&!L}),[N,L]),B=Object(a.useMemo)((function(){var e;return"string"===typeof k||(null===(e=k)||void 0===e?void 0:e.id)===Ae?"Check #":"Payment Method"}),[k]),J=Object(a.useMemo)((function(){var e;return(null===(e=k)||void 0===e?void 0:e.id)===Ae?{type:"number"}:{}}),[k]),V=Object(a.useMemo)((function(){var e;return(null===(e=k)||void 0===e?void 0:e.id)===Ae?{min:"0",step:"1"}:{}}),[k]),G=Object(a.useCallback)((function(e){var t,n;e.InputProps=Object(W.a)({},null!==(t=e.InputProps)&&void 0!==t?t:{},{},J),e.inputProps=Object(W.a)({},null!==(n=e.inputProps)&&void 0!==n?n:{},{},V);var a=F?F.message:R?C:void 0;return r.a.createElement(Ct.a,Object.assign({},d,e,{variant:d.variant||"filled",error:R&&!!C||!!F,helperText:a,name:"paymentMethod",label:B}))}),[d,R,F,C,B,J,V]),K=Object(a.useCallback)((function(e){return f(!0)}),[f]),X=Object(a.useCallback)((function(e){f(!1),e.persist(),setTimeout((function(){h(e)}),0)}),[f,h]),Q=Object(a.useCallback)((function(e,t){M({inputValue:g,value:t})}),[M,g]),H=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),q||M({inputValue:t,value:j})}),[M,j,q]),Y=Object(a.useMemo)((function(){return{value:j,disabled:!!F||D||(null===S||void 0===S?void 0:S.type)===ot.FATAL_ERROR||c,multiple:!0,options:P,renderInput:G,renderTags:Zt,freeSolo:L,getOptionLabel:Yt,onChange:Q,onInputChange:H,inputValue:q?"":g,onFocus:K,onBlur:X,open:p&&N&&(null===S||void 0===S?void 0:S.type)!==ot.FATAL_ERROR,loading:D,autoSelect:!0,name:"paymentMethod"}}),[P,j,G,L,Q,H,g,q,K,X,p,N,D,F,c,S]);return r.a.createElement(Kt.a,Y)},tn=n(367),nn=n(196),an=function(e){var t=Object(Xe.a)(),n=e.opacity,a=void 0===n?.62:n,l=Object(gt.a)(e,["opacity"]);return r.a.createElement(ae.a,Object.assign({},l,{overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:Object(nn.fade)(t.palette.background.paper,a)}))},rn=function(e){return r.a.createElement(an,Object.assign({},e,{children:r.a.createElement(tn.a,null)}))};function ln(){var e=Object(b.a)(["\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      n\n      d\n      s\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n"]);return ln=function(){return e},e}var on=y()(ln());function un(){var e=Object(b.a)(["\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ","\n"]);return un=function(){return e},e}var cn=y()(un(),on),dn=Symbol(),sn=function(e){var t,n,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=e.handleSubmit,m=Object(Ke.c)(),p=m.resetForm,f=m.isSubmitting,b=m.isValid,v=yt(),y=Object(U.a)(v,2),E=y[0],O=y[1],h=Object(a.useCallback)((function(e){return O({msg:e.message,type:ot.FATAL_ERROR})}),[O]),j=Object(z.c)(cn,{skip:!i,variables:{id:i},onError:h}),C=j.loading,R=j.error,M=j.data,k=null===M||void 0===M||null===(t=M.journalEntry)||void 0===t?void 0:t.total,_=(null===M||void 0===M||null===(n=M.journalEntry)||void 0===n?void 0:n.refunds)||[],w=Object(a.useMemo)((function(){if(k){var e=_.reduce((function(e,t){var n=t.deleted,a=t.total;return n?e:e.add(_t(a))}),new fe.a(0));return _t(k).sub(e)}return new fe.a(Number.MAX_SAFE_INTEGER)}),[k,_]),I=null===M||void 0===M||null===(l=M.journalEntry)||void 0===l?void 0:l.date,S=Object(a.useMemo)((function(){return I?new Date(I):void 0}),[I]),x=Object(a.useCallback)((function(){d(),p(),O(null)}),[p,d,O]),A=Object(a.useMemo)((function(){return!E||E.type!==ot.FATAL_ERROR&&E.type!==ot.ERROR?[null,null]:[E.msg,E.type===ot.FATAL_ERROR]}),[E]),T=Object(U.a)(A,2),D=T[0],F=T[1],$=null===M||void 0===M||null===(o=M.journalEntry)||void 0===o?void 0:o.type,P=Object(a.useMemo)((function(){var e=C||R||(null!==$&&void 0!==$?$:dn)===dn?"Refund":"".concat($===g.Credit?"Give":"Add"," Refund");return F?"Fatal Error":C?"Loading ".concat(e,"..."):f?"Submitting ".concat(e):e}),[C,R,$,F,f]),N=Object(Xe.a)();return r.a.createElement(Qe.a,{open:u,onClose:c,onExited:x,disableBackdropClick:f,disableEscapeKeyDown:f,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:s}},r.a.createElement(He.a,{style:D?{color:N.palette.error.main}:void 0},P),r.a.createElement(ae.a,{position:"relative"},(C||f)&&!D&&r.a.createElement(rn,{zIndex:"modal"}),!!D&&F&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},D)),r.a.createElement(Ze.a,{dividers:!0},!!D&&!F&&r.a.createElement(Ye.a,{color:"error"},D),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(jt,{minDate:S,disabled:C||f,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Rt,{disabled:C||f,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(en,{disabled:C||f,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(St,{disabled:C||f,fullWidth:!0,maxTotal:w})),r.a.createElement(et.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(Dt,{disabled:C||f,label:!0}))))),r.a.createElement(tt.a,null,!F&&r.a.createElement(nt.a,{disabled:C||f||!b,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(nt.a,{disabled:C||f,color:F?"primary":"default",startIcon:!F&&r.a.createElement(rt.a,null),onClick:c},F?"Ok":"Cancel")))},mn=function(e){var t=e.entryId,n=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(z.a)(),c=Object(a.useCallback)(function(){var e=Object(L.a)(J.a.mark((function e(n,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,ut(u,t||"",n,a);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:ot.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[u,t,l]),d=Object(a.useCallback)((function(e){return r.a.createElement(sn,{entryId:t,open:n,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[t,n,l,o]);return r.a.createElement(Ke.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})},pn=n(418);function fn(){var e=Object(b.a)(["\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return fn=function(){return e},e}var bn=y()(fn(),we),vn=function(){var e=Object(L.a)(J.a.mark((function e(t,n,a,r){var l,o,i,u,c,d,s,m,p,f,b;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(pn.a)(n.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.description!==n.description?null!==(l=null===(o=r.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:"":null,c=0===_t(r.total.value).compare(_t(n.total.value))?null:r.total.value,d=r.reconciled===n.reconciled?null:r.reconciled,s=function(){var e=n.paymentMethod.value[n.paymentMethod.value.length-1],t=r.paymentMethod.value.slice(-2).reverse(),a=Object(U.a)(t,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Ae?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),m=s.paymentMethod,p=s.paymentMethodAdd,f=s.paymentMethodUpdate,b={id:a,fields:{date:i,description:u,total:c,reconciled:d,paymentMethod:m},paymentMethodAdd:p,paymentMethodUpdate:f},e.next=8,t.mutate({mutation:bn,variables:b});case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();function yn(){var e=Object(b.a)(["\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        n\n        d\n        s\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n"]);return yn=function(){return e},e}var En=y()(yn(),on,zt),On=function(e){var t=e.refundId,n=e.open,l=e.onClose,o=e.onExited,i=e.journalEntry,u=e.loading,c=e.handleSubmit,d=Object(Ke.c)(),s=d.resetForm,m=d.isSubmitting,p=d.isValid,f=yt(),b=Object(U.a)(f,2),v=b[0],y=b[1],E=null===i||void 0===i?void 0:i.total,O=(null===i||void 0===i?void 0:i.refunds)||[],h=Object(a.useMemo)((function(){if(E){var e=O.reduce((function(e,n){var a=n.id,r=n.deleted,l=n.total;return r||a===t?e:e.add(_t(l))}),new fe.a(0));return _t(E).sub(e)}return new fe.a(Number.MAX_SAFE_INTEGER)}),[E,O,t]),j=null===i||void 0===i?void 0:i.date,g=Object(a.useMemo)((function(){return j?new Date(j):void 0}),[j]),C=Object(a.useCallback)((function(){o(),s(),y(null)}),[s,o,y]),R=Object(a.useMemo)((function(){return!v||v.type!==ot.FATAL_ERROR&&v.type!==ot.ERROR?[null,null]:[v.msg,v.type===ot.FATAL_ERROR]}),[v]),M=Object(U.a)(R,2),k=M[0],_=M[1],w=Object(a.useMemo)((function(){var e="Refund Update";return _?"Fatal Error":u?"Loading ".concat(e,"..."):m?"Submitting ".concat(e):e}),[u,_,m]),I=Object(Xe.a)();return r.a.createElement(Qe.a,{open:n,onClose:l,onExited:C,disableBackdropClick:m,disableEscapeKeyDown:m,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:c}},r.a.createElement(He.a,{style:k?{color:I.palette.error.main}:void 0},w),r.a.createElement(ae.a,{position:"relative"},(u||m)&&!k&&r.a.createElement(rn,{zIndex:"modal"}),!!k&&_&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},k)),r.a.createElement(Ze.a,{dividers:!0},!!k&&!_&&r.a.createElement(Ye.a,{color:"error"},k),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(jt,{minDate:g,disabled:u||m||!!_,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Rt,{disabled:u||m||!!_,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(en,{disabled:u||m||!!_,fullWidth:!0})),r.a.createElement(et.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(St,{disabled:u||m||!!_,fullWidth:!0,maxTotal:h})),r.a.createElement(et.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(Dt,{disabled:u||m||!!_,label:!0}))))),r.a.createElement(tt.a,null,!_&&r.a.createElement(nt.a,{disabled:u||m||!p,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(nt.a,{disabled:u||m||!!_,color:_?"primary":"default",startIcon:!_&&r.a.createElement(rt.a,null),onClick:l},_?"Ok":"Cancel")))},hn=function(e){var t=e.entryId,n=e.refundId,l=e.open,o=e.onClose,i=e.onExited,u=Object(z.c)(En,{skip:!t,variables:{entryId:t,refundId:n}}),c=u.loading,d=u.error,s=u.data,m=Object(a.useMemo)((function(){return d?{msg:d.message,type:ot.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntryRefund,f=Object(a.useMemo)((function(){var e;return p?{date:{inputValue:new Date(p.date),value:p.date},paymentMethod:function(){var e=p.paymentMethod,t=e.ancestors,n=Object(gt.a)(e,["ancestors"]),a=Object(q.a)(t).sort((function(e,t){var n,a;return e.id===(null===(n=t.parent)||void 0===n?void 0:n.id)?-1:t.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(n),{inputValue:"",value:a}}(),total:{inputValue:_t(p.total).round(2).toString(),value:p.total},reconciled:p.reconciled,description:null!==(e=p.description)&&void 0!==e?e:null}:{}}),[p]),b=Object(z.a)(),v=Object(a.useCallback)(function(){var e=Object(L.a)(J.a.mark((function e(t,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for refund "'.concat(n,'".'),type:ot.FATAL_ERROR}),e.abrupt("return");case 5:if(n){e.next=8;break}return a.setStatus({msg:"No refund ID.",type:ot.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,vn(b,f,n,t,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:ot.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,f,o,n]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(On,{entryId:t,refundId:n,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,t,c,o,i,l,n]);return r.a.createElement(Ke.a,{initialValues:null!==f&&void 0!==f?f:{},initialStatus:m,enableReinitialize:!0,onSubmit:v,children:y})},jn=n(5843),gn=n(178);function Cn(){var e=Object(b.a)(["\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Cn=function(){return e},e}var Rn=y()(Cn(),Se),Mn=function(){var e=Object(L.a)(J.a.mark((function e(t,n){var a,r,l,o,i,u,c,d,s,m;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e=n.paymentMethod.value[n.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:n.paymentMethod.value[n.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),o=l.paymentMethod,i=l.paymentMethodAdd,u=function(){var e=n.source.value[0],t=n.source.value[n.source.value.length-1];if("string"===typeof t){if(e===j.Person){var a=Object(gn.parseName)(t);return{source:{sourceType:j.Person,id:""},businessAdd:null,personAdd:{name:{first:a.firstName,last:a.lastName}}}}return{source:{sourceType:j.Business,id:""},businessAdd:{name:t},personAdd:null}}return{source:{sourceType:function(){switch(t.__typename){case"Business":return j.Business;case"Department":return j.Department;case"Person":return j.Person}}(),id:t.id},personAdd:null,businessAdd:null}}(),c=u.source,d=u.personAdd,s=u.businessAdd,m={fields:{date:n.date.value,department:n.department.id,type:n.type,category:n.category.value[n.category.value.length-1].id,description:(null===(a=n.description)||void 0===a?void 0:a.trim())||null,total:n.total.value,reconciled:null!==(r=n.reconciled)&&void 0!==r?r:null,paymentMethod:o,source:c},paymentMethodAdd:i,personAdd:d,businessAdd:s},e.next=5,t.mutate({mutation:Rn,variables:m});case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function kn(){var e=Object(b.a)(["\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return kn=function(){return e},e}var _n=y()(kn(),Jt),wn=function(e){return e.name},In=function(e,t){var n=e.length-1;return e.map((function(e,a){var l=n===a,o=t({index:a}),i=o.key,u=Object(gt.a)(o,["key"]);return r.a.createElement(ae.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Ft.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(Pe.a,{fontSize:"small"}))}))},Sn=Symbol(),xn=function(e){var t,n,l,o,i,u,c=Object(Ke.c)(),d=e.disabled,s=void 0!==d&&d,m=e.required,p=e.entryType,f=Object(gt.a)(e,["entryType"]),b=(null===(t=c.values)||void 0===t||null===(n=t.category)||void 0===n?void 0:n.value)||[],v=(null===(l=c.values)||void 0===l||null===(o=l.category)||void 0===o?void 0:o.inputValue.trimLeft())||"",y=null!==(i=null!==p&&void 0!==p?p:null===(u=c.values)||void 0===u?void 0:u.type)&&void 0!==i?i:null,E=b[b.length-1],O=Object(a.useMemo)((function(){return(null===E||void 0===E?void 0:E.id)?{where:{parent:{eq:E.id},type:{eq:y}}}:{where:{hasParent:!1,type:{eq:y}}}}),[E,y]),h=yt(),j=Object(U.a)(h,2),g=j[0],C=j[1],R=Object(a.useCallback)((function(e){C({msg:e.message,type:ot.FATAL_ERROR})}),[C]),M=Object(z.c)(_n,{skip:(null!==y&&void 0!==y?y:Sn)===Sn,variables:O,onCompleted:function(){return setTimeout((function(){return c.validateField("category")}),0)},onError:R}),k=M.loading,_=M.error,w=M.data,I=null===w||void 0===w?void 0:w.catOpts,S=Object(a.useMemo)((function(){return I||[]}),[I]),x=Object(a.useCallback)((function(e){var t=(null===e||void 0===e?void 0:e.value)||[];return t[t.length-1]||null?S.length>0?"Sub-category Required":void 0:m?"Category Required":void 0}),[S,m]),A=Object(Ke.b)({name:"category",validate:x}),T=Object(U.a)(A,3),D=T[0],F=T[1],$=T[2],P=D.onBlur,N=F.error,L=F.touched,q=$.setValue;Object(a.useEffect)((function(){E&&y!==E.type&&q({inputValue:"",value:[]})}),[y,E,q]);var B=Object(a.useMemo)((function(){return N&&L?N:(null!==y&&void 0!==y?y:Sn)===Sn?"Category requires entry type.":_?_.message:""}),[y,N,L,_]),J=Object(a.useMemo)((function(){return k||(null===g||void 0===g?void 0:g.type)===ot.FATAL_ERROR||(null!==y&&void 0!==y?y:Sn)===Sn||s||b.length>0&&0===S.length}),[s,y,g,k,S.length,b.length]),V=Object(a.useCallback)((function(e){return r.a.createElement(Ct.a,Object.assign({},f,{variant:f.variant||"filled"},e,{error:L&&!!N||!!_,disabled:J,helperText:B,name:"category",label:"Category"}))}),[f,L,N,_,J,B]),G=Object(a.useState)(!1),K=Object(U.a)(G,2),X=K[0],Q=K[1],H=Object(a.useCallback)((function(e){return Q(!0)}),[Q]),Y=Object(a.useCallback)((function(e){Q(!1),e.persist(),setTimeout((function(){P(e)}),0)}),[Q,P]),Z=Object(a.useCallback)((function(e,t){q({inputValue:v,value:t})}),[q,v]),ee=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),q({inputValue:t,value:b})}),[q,b]),te=Object(a.useMemo)((function(){return Object(W.a)({},D,{open:X&&S.length>0,onFocus:H,onBlur:Y,options:S,renderTags:In,forcePopupIcon:!1,disabled:J,value:b,renderInput:V,loading:k,autoSelect:!0,multiple:!0,getOptionLabel:wn,onInputChange:ee,inputValue:v,onChange:Z,name:"category"})}),[D,X,S,H,Y,k,J,b,V,ee,v,Z]);return r.a.createElement(Kt.a,te)};function An(){var e=Object(b.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return An=function(){return e},e}var Tn=y()(An(),Bt),Dn=function(e){return e.name},Fn=function(e,t){var n=e.length-1;return e.map((function(e,a){var l=n===a,o=t({index:a}),i=o.key,u=Object(gt.a)(o,["key"]);return r.a.createElement(ae.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Ft.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(Pe.a,{fontSize:"small"}))}))},$n=function(e){var t=e.disabled,n=void 0!==t&&t,l=e.required,o=yt(),i=Object(U.a)(o,2),u=i[0],c=i[1],d=Object(a.useCallback)((function(e){c({msg:e.message,type:ot.FATAL_ERROR})}),[c]),s=Object(z.c)(Tn,{onError:d,variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),m=s.loading,p=s.error,f=s.data,b=(null===f||void 0===f?void 0:f.deptOpts)||[],v=Object(a.useState)(!1),y=Object(U.a)(v,2),E=y[0],O=y[1],h=Object(a.useState)(""),j=Object(U.a)(h,2),g=j[0],C=j[1],R=Object(a.useCallback)((function(e){return e?b.some((function(t){var n=t.parent;return"Department"===n.__typename&&n.id===e.id}))?"Sub-department Required":void 0:l?"Department Required":void 0}),[b,l]),M=Object(Ke.b)({name:"department",validate:R}),k=Object(U.a)(M,3),_=k[0],w=k[1],I=k[2],S=_.value,x=_.onBlur,A=w.error,T=w.touched,D=I.setValue,F=Object(a.useMemo)((function(){return new Map(b.reduce((function(e,t){return e.push([t.id,t]),e}),[]))}),[b]),$=Object(a.useMemo)((function(){if(!S)return[];for(var e=[S],t=S.parent,n=t.__typename,a=t.id;"Business"!==n&&F.has(a);){var r=F.get(a);e.unshift(r);var l=r.parent;n=l.__typename,a=l.id}return e}),[S,F]),P=Object(a.useMemo)((function(){var e,t=null===(e=$[$.length-1])||void 0===e?void 0:e.id;return b.filter((function(e){return t?e.parent.id===t:"Business"===e.parent.__typename}))}),[b,$]),N=Object(a.useMemo)((function(){return $.length>0&&0===P.length}),[$,P]),L=Object(a.useMemo)((function(){return A&&T?A:p?p.message:""}),[A,T,p]),q=Object(a.useMemo)((function(){return m||N||(null===u||void 0===u?void 0:u.type)===ot.FATAL_ERROR||n}),[N,n,u,m]),B=Object(a.useCallback)((function(t){return r.a.createElement(Ct.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:T&&!!A,helperText:L,name:"department",label:"Department",disabled:q}))}),[e,T,A,L,q]),J=Object(a.useCallback)((function(e){return O(!0)}),[O]),V=Object(a.useCallback)((function(e){O(!1),x(e)}),[O,x]),G=Object(a.useCallback)((function(e,t){if(t)if(Array.isArray(t)){var n=t.length;D(0===n?null:t[n-1])}else D(t);else D(null)}),[D]),K=Object(a.useCallback)((function(e,t,n){C((t||"").trimStart())}),[C]),X=Object(a.useMemo)((function(){return Object(W.a)({},_,{open:E&&P.length>0,onFocus:J,onBlur:V,options:P,renderTags:Fn,forcePopupIcon:!1,disabled:q,value:$,renderInput:B,loading:m,autoSelect:!0,multiple:!0,getOptionLabel:Dn,onChange:G,onInputChange:K,inputValue:N?"":g,name:"department"})}),[_,E,P,J,V,N,q,$,B,m,G,K,g]);return p?r.a.createElement("pre",null,JSON.stringify(p,null,2)):r.a.createElement(Kt.a,X)},Pn=n(311);function Nn(){var e=Object(b.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Nn=function(){return e},e}var Ln=y()(Nn(),Wt,Gt,Vt),qn=function(e){switch(e){case j.Business:case j.Department:case j.Person:break;default:return"string"===typeof e}return!1},Un=function(e){switch(e){case j.Business:return"Vendor";case j.Department:return"Department";case j.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},Bn=function(e,t){var n=e.length-1;return e.map((function(e,a){var l=n===a,o=t({index:a}),i=o.key,u=Object(gt.a)(o,["key"]);return qn(e)?e:r.a.createElement(ae.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Ft.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:Un(e),size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(Pe.a,{fontSize:"small"}))}))},Jn=function(e,t){var n=t.inputValue,a=new RegExp("(^|\\s)".concat(n),"i");return e.filter((function(e){return a.test(Un(e))}))},Wn=function(e){var t,n=(null===e||void 0===e?void 0:e.value)||[],a=null!==(t=n[0])&&void 0!==t?t:null,r=n.length>1?n[n.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(qn(r)&&a===j.Person){var l=Object(gn.parseName)(r);if(!l.firstName.trim())return"First Name Required";if(!l.lastName.trim())return"Last Name Required"}},Vn=function(e){var t,n,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(a.useState)(!1),s=Object(U.a)(d,2),m=s[0],p=s[1],f=Object(Ke.b)({name:"source",validate:Wn}),b=Object(U.a)(f,3),v=b[0],y=b[1],E=b[2],O=v.onBlur,h=null!==(t=null===(n=v.value)||void 0===n?void 0:n.value)&&void 0!==t?t:[],g=null!==(l=null===(o=v.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",C=y.error,R=y.touched,M=E.setValue,k=null!==(i=h[0])&&void 0!==i?i:null,_=h.length>1?h[h.length-1]:null,w=Object(a.useRef)(""),I=yt(),S=Object(U.a)(I,2),x=S[0],A=S[1],T=Object(a.useCallback)((function(e){A({msg:e.message,type:ot.FATAL_ERROR})}),[A]),D=Object(z.c)(Ln,{skip:!w.current&&!h[1],variables:{name:w.current,isBiz:k!==j.Person},onError:T}),F=D.loading,$=D.error,P=D.data,N=Object(a.useMemo)((function(){var e=new Map,t=!0,n=!1,a=void 0;try{for(var r,l=((null===P||void 0===P?void 0:P.businesses)||[])[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value,i=!0,u=!1,c=void 0;try{for(var d,s=o.departments[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var m=d.value;e.set(m.id,m)}}catch(p){u=!0,c=p}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}}}catch(p){n=!0,a=p}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}return e}),[P]),L=Object(a.useMemo)((function(){if(null===k)return[j.Business,j.Person];if(k===j.Person)return null===_&&(null===P||void 0===P?void 0:P.people)||[];if(!_)return(null===P||void 0===P?void 0:P.businesses)||[];if("string"===typeof _)return[];var e=[],t=!0,n=!1,a=void 0;try{for(var r,l=N.values()[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value;o.parent.__typename===_.__typename&&o.parent.id===_.id&&e.push(o)}}catch(i){n=!0,a=i}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}return e}),[k,P,N,_]),q=Object(a.useMemo)((function(){return null!==k&&null===_}),[k,_]),B=Object(a.useMemo)((function(){return h.length>0&&0===L.length&&!q}),[h,L,q]),J=Object(a.useMemo)((function(){return null===k?"Source Type":k===j.Person?"Person Name":1===h.length?"Vendor":2===h.length&&L.length>0?"Department":L.length>0?"Sub-Department":"Vendor"}),[h,L,k]),V=Object(a.useMemo)((function(){return c||B||(null===x||void 0===x?void 0:x.type)===ot.FATAL_ERROR}),[B,c,x]),G=Object(a.useCallback)((function(t){var n,a,l;_&&"string"!==typeof _&&"Person"!==_.__typename&&0===L.length&&(t=Object(W.a)({},t,{inputProps:Object(W.a)({},(null===(n=t)||void 0===n?void 0:n.inputProps)||{},{style:Object(W.a)({},(null===(a=t)||void 0===a||null===(l=a.inputProps)||void 0===l?void 0:l.style)||{},{display:"none"})})}));return r.a.createElement(Ct.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:R&&!!C,helperText:R?C:void 0,name:"source",label:J,disabled:V}))}),[_,L.length,e,R,C,J,V]),K=Object(a.useCallback)((function(e){return p(!0)}),[p]),X=Object(a.useCallback)((function(e){p(!1),e.persist(),setTimeout((function(){return O(e)}),0)}),[p,O]),Q=Object(a.useCallback)((function(e,t){var n=t.length-1,a=t[n];if(qn(a)){var r=[],l=!0,o=!1,i=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;d&&(Pn.checkName(d)&&(d=Pn(d)),r.push(d))}}catch(m){o=!0,i=m}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}var s=r.join(" ").trim();t[n]=s.charAt(0).toUpperCase()+s.substring(1)}M({inputValue:g,value:t})}),[M,g]),H=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),B||M({inputValue:t,value:h}),null!==k&&null===_&&t&&(w.current=t[0].toLowerCase())}),[M,k,_,h,B,w]),Y=Object(a.useMemo)((function(){return Object(W.a)({},v,{inputValue:B?"":g,open:m&&L.length>0,onFocus:K,onBlur:X,options:L,renderTags:Bn,forcePopupIcon:!1,freeSolo:q,value:h,renderInput:G,loading:F,autoSelect:!0,multiple:!0,getOptionLabel:Un,onInputChange:H,onChange:Q,filterOptions:Jn,name:"source",disabled:V})}),[v,B,g,m,L,K,X,q,h,G,F,H,Q,V]);return $?r.a.createElement("pre",null,JSON.stringify($,null,2)):r.a.createElement(Kt.a,Y)},Gn=n(5854),zn=n(5842),Kn=n(372),Xn=n(304),Qn=n(5791),Hn=Symbol(),Yn=function(e){if((null!==e&&void 0!==e?e:Hn)===Hn)return"Type Required"},Zn=function(e){var t=e.disabled,n=void 0!==t&&t,l=yt(),o=Object(U.a)(l,1)[0],i=e.label,u=void 0!==i&&i,c=Object(Ke.c)().isSubmitting,d=Object(Ke.b)({name:"type",validate:Yn}),s=Object(U.a)(d,3),m=s[0],p=s[1],f=s[2],b=p.error,v=p.touched,y=f.setValue,E=f.setTouched,O=Object(a.useMemo)((function(){return Object(W.a)({size:"small",exclusive:!0,disabled:c},m,{onChange:function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==n&&void 0!==n?n:Hn)!==Hn){e.next=2;break}return e.abrupt("return");case 2:return y(n),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:E(!0);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()})}),[m,c,y,E]),h=c||n||(null===o||void 0===o?void 0:o.type)===ot.FATAL_ERROR,j=Object(a.useMemo)((function(){return r.a.createElement(ae.a,{pl:1,clone:!0},r.a.createElement(Gn.a,Object.assign({},e,O),r.a.createElement(zn.a,{disabled:h,value:g.Credit},r.a.createElement(Kn.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(de.b,null))),r.a.createElement(zn.a,{disabled:h,value:g.Debit},r.a.createElement(Kn.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(de.a,null)))))}),[e,O,h]);return u?r.a.createElement(Xn.a,null,r.a.createElement(xt.a,Object.assign({},e,{labelPlacement:"boolean"===typeof u?void 0:u,control:j,label:"Type"})),v&&!!b&&r.a.createElement(Qn.a,{error:!0},b)):r.a.createElement(Xn.a,null,j,!!b&&r.a.createElement(Qn.a,{error:!0},b))};function ea(){var e=Object(b.a)(["\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return ea=function(){return e},e}var ta={item:!0,lg:4,sm:6,xs:12},na=y()(ea(),Bt),aa=function(e){var t=e.open,n=e.onClose,l=e.loading,o=Object(Ke.c)(),i=o.resetForm,u=o.isSubmitting,c=o.isValid,d=o.submitForm,s=yt(),m=Object(U.a)(s,2),p=m[0],f=m[1],b=Object(a.useMemo)((function(){return!p||p.type!==ot.FATAL_ERROR&&p.type!==ot.ERROR?[null,null]:[p.msg,p.type===ot.FATAL_ERROR]}),[p]),v=Object(U.a)(b,2),y=v[0],E=v[1],O=Object(a.useCallback)((function(){i(),f(null)}),[i,f]),h=Object(a.useMemo)((function(){return E?"Fatal Error":u?"Submitting Add Entry...":l?"Loading Add Entry...":"Add Entry"}),[E,u,l]),j=Object(Xe.a)(),g=Object(a.useCallback)(Object(L.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),e.next=4,d();case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f({msg:null!==(t=e.t0.message)&&void 0!==t?t:"".concat(e.t0),type:ot.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,n,f]),C=Object(a.useCallback)(Object(L.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(null),e.next=4,d();case 4:i(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f({msg:null!==(t=e.t0.message)&&void 0!==t?t:"".concat(e.t0),type:ot.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,i,f]),R=Object(a.useCallback)((function(e){return e.preventDefault()}),[]);return r.a.createElement(Qe.a,{open:t,onClose:n,onExited:O,disableBackdropClick:u,disableEscapeKeyDown:u,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:R}},r.a.createElement(He.a,{style:y?{color:j.palette.error.main}:void 0},h),r.a.createElement(ae.a,{position:"relative"},(u||l)&&!y&&r.a.createElement(rn,{zIndex:"modal"}),!!y&&E&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},y)),r.a.createElement(Ze.a,{dividers:!0},!!y&&!E&&r.a.createElement(Ye.a,{color:"error"},y),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,Object.assign({},ta,{justify:"center",container:!0}),r.a.createElement(Zn,{style:{margin:j.spacing(1)},label:"start",disabled:l||u||!!E})),r.a.createElement(et.a,ta,r.a.createElement(jt,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(et.a,ta,r.a.createElement(Vn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(et.a,ta,r.a.createElement(xn,{disabled:l||u||!!E,fullWidth:!0,required:!0})),r.a.createElement(et.a,ta,r.a.createElement($n,{disabled:l||u||!!E,fullWidth:!0,required:!0})),r.a.createElement(et.a,ta,r.a.createElement(Rt,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(et.a,ta,r.a.createElement(en,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(et.a,ta,r.a.createElement(St,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(et.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},ta),r.a.createElement(Dt,{disabled:l||u||!!E,label:!0}))))),r.a.createElement(tt.a,null,!E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{onClick:g,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(nt.a,{onClick:C,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(jn.a,null),variant:"outlined"},"Add & New")),r.a.createElement(nt.a,{disabled:u,color:E?"primary":"default",startIcon:!E&&r.a.createElement(rt.a,null),onClick:n},E?"Ok":"Cancel")))},ra=function(e){var t=e.open,n=e.onClose,l=e.deptId,o=Object(z.c)(na,{skip:!l,variables:{id:l}}),i=o.loading,u=o.error,c=o.data,d=null===c||void 0===c?void 0:c.department,s=Object(a.useMemo)((function(){return d?{department:d}:{}}),[d]),m=Object(a.useMemo)((function(){return u?{msg:u.message,type:ot.FATAL_ERROR}:null}),[u]),p=Object(z.a)(),f=Object(a.useCallback)((function(e,t){return Mn(p,e,t)}),[p]),b=Object(a.useCallback)((function(e){return r.a.createElement(aa,{open:t,onClose:n,loading:i})}),[t,n,i]);return r.a.createElement(Ke.a,{initialValues:s,initialStatus:m,enableReinitialize:!0,onSubmit:f,children:b})};function la(){var e=Object(b.a)(["\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return la=function(){return e},e}Symbol();var oa=y()(la(),Se),ia=function(){var e=Object(L.a)(J.a.mark((function e(t,n,a,r){var l,o,i,u,c,d,s,m,p,f,b,v,y,E,O,h,g;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,t,a,l,o=null!==(e=null===(t=r.category.value[r.category.value.length-1])||void 0===t?void 0:t.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=n.category.value[n.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),i=Object(pn.a)(n.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.department.id===n.department.id?null:r.department.id,c=(null===(l=r.description)||void 0===l?void 0:l.trim())&&r.description!==n.description?r.description.trim():null,d=0===_t(r.total.value).compare(_t(n.total.value))?null:r.total.value,s=r.type===n.type?null:r.type,m=r.reconciled===n.reconciled?null:r.reconciled,p=function(){var e=n.paymentMethod.value[n.paymentMethod.value.length-1],t=r.paymentMethod.value.slice(-2).reverse(),a=Object(U.a)(t,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Ae?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),f=p.paymentMethod,b=p.paymentMethodAdd,v=p.paymentMethodUpdate,y=function(){var e=r.source.value[0],t=r.source.value[r.source.value.length-1],a=n.source.value[0],l=n.source.value[n.source.value.length-1];if("string"===typeof t){if(e===j.Person){var o=Object(gn.parseName)(t);return{source:{sourceType:j.Person,id:""},businessAdd:null,personAdd:{name:{first:o.firstName,last:o.lastName}}}}return{source:{sourceType:j.Business,id:""},businessAdd:{name:t},personAdd:null}}return e===a&&t.id===l.id?{source:null,businessAdd:null,personAdd:null}:{source:{sourceType:function(){switch(t.__typename){case"Business":return j.Business;case"Department":return j.Department;case"Person":return j.Person}}(),id:t.id},personAdd:null,businessAdd:null}}(),E=y.source,O=y.personAdd,h=y.businessAdd,g={id:a,fields:{category:o,date:i,department:u,description:c,total:d,type:s,source:E,reconciled:m,paymentMethod:f},paymentMethodAdd:b,paymentMethodUpdate:v,personAdd:O,businessAdd:h},console.log(g),e.next=13,t.mutate({mutation:oa,variables:g});case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();function ua(){var e=Object(b.a)(["\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ...SrcEntryDeptOptFragment\n        ... on Department {\n          ancestors {\n            ...SrcEntryDeptOptFragment\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        n\n        d\n        s\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          n\n          d\n          s\n        }\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return ua=function(){return e},e}var ca=y()(ua(),Bt,Jt,Wt,Gt,Vt,zt),da=new Date(864e13),sa={item:!0,lg:4,sm:6,xs:12},ma=function(e){var t=e.open,n=e.onClose,l=e.onExited,o=e.journalEntry,i=e.loading,u=e.handleSubmit,c=Object(Ke.c)(),d=c.resetForm,s=c.isSubmitting,m=c.isValid,p=yt(),f=Object(U.a)(p,2),b=f[0],v=f[1],y=(null===o||void 0===o?void 0:o.refunds)||[],E=Object(a.useMemo)((function(){return y.reduce((function(e,t){var n=Object(U.a)(e,2),a=n[0],r=n[1],l=(t.id,t.deleted),o=t.total,i=t.date;return[l?a:a.add(_t(o)),l?r:Object(bt.a)([r,new Date(i)])]}),[new fe.a(0),da])}),[y]),O=Object(U.a)(E,2),h=O[0],j=O[1],g=Object(a.useCallback)((function(){l(),d(),v(null)}),[d,l,v]),C=Object(a.useMemo)((function(){return!b||b.type!==ot.FATAL_ERROR&&b.type!==ot.ERROR?[null,null]:[b.msg,b.type===ot.FATAL_ERROR]}),[b]),R=Object(U.a)(C,2),M=R[0],k=R[1],_=Object(a.useMemo)((function(){var e="Entry Update";return k?"Fatal Error":i?"Loading ".concat(e,"..."):s?"Submitting ".concat(e):e}),[i,k,s]),w=Object(Xe.a)();return r.a.createElement(Qe.a,{open:t,onClose:n,onExited:g,fullWidth:!0,disableBackdropClick:s,disableEscapeKeyDown:s,maxWidth:"lg",PaperProps:{component:"form",onSubmit:u}},r.a.createElement(He.a,{style:M?{color:w.palette.error.main}:void 0},_),r.a.createElement(ae.a,{position:"relative"},(s||i)&&!M&&r.a.createElement(rn,{zIndex:"modal"}),!!M&&k&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},M)),r.a.createElement(Ze.a,{dividers:!0},!!M&&!k&&r.a.createElement(Ye.a,{color:"error"},M),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,Object.assign({},sa,{justify:"center",container:!0}),r.a.createElement(Zn,{style:{margin:w.spacing(1)},label:"start",disabled:s||i||!!k})),r.a.createElement(et.a,sa,r.a.createElement(jt,{disabled:s||i||!!k,maxDate:j===da?void 0:j,fullWidth:!0})),r.a.createElement(et.a,sa,r.a.createElement(Vn,{disabled:s||i||!!k,fullWidth:!0})),r.a.createElement(et.a,sa,r.a.createElement(xn,{disabled:s||i||!!k,fullWidth:!0,required:!0})),r.a.createElement(et.a,sa,r.a.createElement($n,{disabled:s||i||!!k,fullWidth:!0,required:!0})),r.a.createElement(et.a,sa,r.a.createElement(Rt,{disabled:s||i||!!k,fullWidth:!0})),r.a.createElement(et.a,sa,r.a.createElement(en,{disabled:s||i||!!k,fullWidth:!0})),r.a.createElement(et.a,sa,r.a.createElement(St,{disabled:s||i||!!k,minTotal:h,fullWidth:!0})),r.a.createElement(et.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},sa),r.a.createElement(Dt,{disabled:s||i||!!k,label:!0}))))),r.a.createElement(tt.a,null,!k&&r.a.createElement(nt.a,{disabled:s||!m||i,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(nt.a,{disabled:s,color:k?"primary":"default",startIcon:!k&&r.a.createElement(rt.a,null),onClick:n},k?"Ok":"Cancel")))},pa=function(e){var t,n=e.entryId,l=e.open,o=e.onClose,i=e.onExited,u=Object(z.c)(ca,{skip:!n,variables:{id:n}}),c=u.loading,d=u.error,s=u.data;d&&(console.log(n,ca),console.error(d));var m=Object(a.useMemo)((function(){return d?{msg:d.message,type:ot.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntry,f=Object(a.useMemo)((function(){var e;if(!p)return{};var t={inputValue:new Date(p.date),value:p.date},n=function(){var e=p.category,t=e.ancestors,n=Object(gt.a)(e,["ancestors"]),a=Object(q.a)(t).sort((function(e,t){var n,a;return e.id===(null===(n=t.parent)||void 0===n?void 0:n.id)?-1:t.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(n),{inputValue:"",value:a}}(),a=function(){var e=p.paymentMethod,t=e.ancestors,n=Object(gt.a)(e,["ancestors"]),a=Object(q.a)(t).sort((function(e,t){var n,a;return e.id===(null===(n=t.parent)||void 0===n?void 0:n.id)?-1:t.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(n),{inputValue:"",value:a}}(),r={inputValue:_t(p.total).round(2).toString(),value:p.total};return{date:t,category:n,paymentMethod:a,department:p.department,total:r,reconciled:p.reconciled,description:null!==(e=p.description)&&void 0!==e?e:null,type:p.type,source:function(){var e=[],t=null===p||void 0===p?void 0:p.source;switch(null===t||void 0===t?void 0:t.__typename){case"Person":e.push(j.Person,t);break;case"Business":e.push(j.Business,t);break;case"Department":e.push(j.Business);var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=t.ancestors[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;"Business"===u.__typename?e.push(u):n.push(u.id)}}catch(E){r=!0,l=E}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}var c=e[1];if(n.length>0){var d=[],s=!0,m=!1,f=void 0;try{for(var b,v=c.departments[Symbol.iterator]();!(s=(b=v.next()).done);s=!0){var y=b.value;if(-1!==n.indexOf(y.id)&&d.push(y)===n.length)break}}catch(E){m=!0,f=E}finally{try{s||null==v.return||v.return()}finally{if(m)throw f}}d.sort((function(e,t){return e.id===t.parent.id||c.id||e.parent.id?-1:t.id===e.parent.id?1:0})),e.push.apply(e,d.concat([t]))}}return{inputValue:"",value:e}}()}}),[p]),b=Object(z.a)(),v=Object(a.useCallback)(function(){var e=Object(L.a)(J.a.mark((function e(t,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,ia(b,f,n,t,a);case 4:o(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:ot.ERROR});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,f,n,o]),y=Object(a.useCallback)((function(e){return r.a.createElement(ma,{open:l,onClose:o,onExited:i,loading:c,journalEntry:null!==p&&void 0!==p?p:null,handleSubmit:e.handleSubmit})}),[l,o,i,c,p]);return r.a.createElement(Ke.a,{initialValues:f,initialStatus:m,journalEntry:null!==(t=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==t?t:null,loading:c,onSubmit:v,enableReinitialize:!0,children:y})};function fa(){var e=Object(b.a)(["\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return fa=function(){return e},e}var ba=y()(fa(),Se),va=function(e){var t=e.entryId,n=e.onClose,l=Object(z.b)(ba),o=Object(U.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:t}}).then((function(){return n()}))}),[t,i,n]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Entry...":"Delete Entry"}),[s,c]),f=Object(Xe.a)();return r.a.createElement(Qe.a,{open:!!t,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:n},r.a.createElement(He.a,{style:s?{color:f.palette.error.main}:void 0},p),r.a.createElement(ae.a,{position:"relative"},c&&r.a.createElement(rn,{zIndex:"modal"}),r.a.createElement(Ze.a,null,s&&r.a.createElement(Ye.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(Ye.a,null,"Are you sure you want to delete this entry?"))),r.a.createElement(tt.a,null,!s&&r.a.createElement(nt.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(nt.a,{disabled:c,startIcon:!s&&r.a.createElement(rt.a,null),onClick:n},s?"Close":"Cancel")))};function ya(){var e=Object(b.a)(["\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ya=function(){return e},e}var Ea=y()(ya(),Se),Oa=function(e){var t=e.refundId,n=e.onClose,l=Object(z.b)(Ea),o=Object(U.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:t}}).then((function(){return n()}))}),[t,i,n]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Refund...":"Delete Refund"}),[s,c]),f=Object(Xe.a)();return r.a.createElement(Qe.a,{open:!!t,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:n},r.a.createElement(He.a,{style:s?{color:f.palette.error.main}:void 0},p),r.a.createElement(ae.a,{position:"relative"},c&&r.a.createElement(rn,{zIndex:"modal"}),r.a.createElement(Ze.a,null,s&&r.a.createElement(Ye.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(Ye.a,null,"Are you sure you want to delete this refund?"))),r.a.createElement(tt.a,null,!s&&r.a.createElement(nt.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(nt.a,{disabled:c,startIcon:!s&&r.a.createElement(rt.a,null),onClick:n},s?"Close":"Cancel")))},ha=n(5820);function ja(){var e=Object(b.a)(["\n  mutation AddEntryItem($id: ID!, $fields: JournalEntryAddItemFields!) {\n    journalEntryAddItem(id: $id, fields: $fields) {\n      journalEntry {\n        ...JournalEntry_1Fragment\n      }\n    }\n  }\n  ","\n"]);return ja=function(){return e},e}var ga=y()(ja(),Se),Ca=function(){var e=Object(L.a)(J.a.mark((function e(t,n,a){var r,l,o,i,u;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e,t,n,r=(null===(e=a.category)||void 0===e?void 0:e.value)||[];return null!==(t=null===(n=r[r.length-1])||void 0===n?void 0:n.id)&&void 0!==t?t:null}(),o=function(){var e;return(null===(e=a.department)||void 0===e?void 0:e.id)||null}(),i=a.units,u={id:n,fields:{units:i,category:l,department:o,description:(null===(r=a.description)||void 0===r?void 0:r.trim())||null,total:a.total.value}},e.next=6,t.mutate({mutation:ga,variables:u});case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Ra={min:"1",step:"1",type:"number"},Ma=Symbol(),ka=function(e){var t,n=e.autoFocus,l=void 0!==n&&n,o=e.disabled,i=void 0!==o&&o,u=e.variant,c=void 0===u?"filled":u,d=Object(gt.a)(e,["autoFocus","disabled","variant"]),s=Object(a.useCallback)((function(e){var t;return(null!==(t=e=e||null)&&void 0!==t?t:Ma)===Ma?"Units Required":0===e?"Cannot be 0":e<0?"Units must be 1 or greater":void 0}),[]),m=Object(Ke.b)({name:"units",validate:s}),p=Object(U.a)(m,3),f=p[0],b=p[1],v=p[2].setValue,y=null!==(t=f.value)&&void 0!==t?t:"",E=b.error,O=b.touched,h=yt(),j=Object(U.a)(h,1)[0],g=Object(a.useMemo)((function(){return{type:"number",autoFocus:l}}),[l]),C=Object(a.useCallback)((function(e){var t,n=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||0;v(Math.max("number"===typeof n?n:Number.parseInt(n),0))}),[v]);return r.a.createElement(Ct.a,Object.assign({},d,f,{disabled:i||(null===j||void 0===j?void 0:j.type)===ot.FATAL_ERROR,type:"number",value:y,error:O&&!!E,helperText:O&&E?E:void 0,placeholder:"1",label:"Units",name:"units",required:!0,variant:c,inputProps:Ra,InputProps:g,onChange:C}))};function _a(){var e=Object(b.a)(["\n  fragment JournalEntry_3Fragment on JournalEntry {\n    __typename\n    id\n    type\n    total {\n      n\n      d\n      s\n    }\n    items {\n      id\n      __typename\n      deleted\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n"]);return _a=function(){return e},e}var wa=y()(_a());function Ia(){var e=Object(b.a)(["\n  query GetEntryItemState_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_3Fragment\n    }\n  }\n  ","\n"]);return Ia=function(){return e},e}var Sa=y()(Ia(),wa),xa={item:!0,lg:4,sm:6,xs:12},Aa=function(e){var t,n,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=Object(Ke.c)(),m=s.resetForm,p=s.isSubmitting,f=s.isValid,b=s.submitForm,v=yt(),y=Object(U.a)(v,2),E=y[0],O=y[1],h=Object(a.useCallback)((function(e){return O({msg:e.message,type:ot.FATAL_ERROR})}),[O]),j=Object(z.c)(Sa,{skip:!i,variables:{id:i},onError:h}),g=j.loading,C=j.data,R=null!==(t=null===C||void 0===C||null===(n=C.journalEntry)||void 0===n?void 0:n.type)&&void 0!==t?t:null,M=null===C||void 0===C||null===(l=C.journalEntry)||void 0===l?void 0:l.total,k=(null===C||void 0===C||null===(o=C.journalEntry)||void 0===o?void 0:o.items)||[],_=Object(a.useMemo)((function(){if(M){var e=k.reduce((function(e,t){var n=t.deleted,a=t.total;return n?e:e.add(_t(a))}),new fe.a(0));return _t(M).sub(e)}return new fe.a(Number.MAX_SAFE_INTEGER)}),[M,k]),w=Object(a.useCallback)((function(){d(),m(),O(null)}),[m,d,O]),I=Object(a.useMemo)((function(){return!E||E.type!==ot.FATAL_ERROR&&E.type!==ot.ERROR?[null,null]:[E.msg,E.type===ot.FATAL_ERROR]}),[E]),S=Object(U.a)(I,2),x=S[0],A=S[1],T=Object(a.useMemo)((function(){return A?"Fatal Error":g?"Loading ".concat("Add Item","..."):p?"Submitting ".concat("Add Item"):"Add Item"}),[g,A,p]),D=Object(Xe.a)(),F=Object(a.useCallback)(Object(L.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(null),e.next=4,b();case 4:c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O({msg:null!==(t=e.t0.message)&&void 0!==t?t:"".concat(e.t0),type:ot.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,c,O]),$=Object(a.useCallback)(Object(L.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(null),e.next=4,b();case 4:m(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O({msg:null!==(t=e.t0.message)&&void 0!==t?t:"".concat(e.t0),type:ot.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,m,O]),P=Object(a.useCallback)((function(e){return e.preventDefault()}),[]);return r.a.createElement(Qe.a,{open:u,onClose:c,onExited:w,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:P}},r.a.createElement(He.a,{style:x?{color:D.palette.error.main}:void 0},T),r.a.createElement(ae.a,{position:"relative"},(g||p)&&!x&&r.a.createElement(rn,{zIndex:"modal"}),!!x&&A&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},x)),r.a.createElement(Ze.a,{dividers:!0},!!x&&!A&&r.a.createElement(Ye.a,{color:"error"},x),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,xa,r.a.createElement(St,{disabled:g||p,fullWidth:!0,maxTotal:_})),r.a.createElement(et.a,xa,r.a.createElement(ka,{disabled:g||p,fullWidth:!0})),r.a.createElement(et.a,xa,r.a.createElement(Rt,{disabled:g||p,fullWidth:!0})),r.a.createElement(et.a,xa,r.a.createElement(xn,{disabled:g||p||!!A,entryType:R,fullWidth:!0})),r.a.createElement(et.a,xa,r.a.createElement($n,{disabled:g||p||!!A,fullWidth:!0}))))),r.a.createElement(tt.a,null,!A&&r.a.createElement(r.a.Fragment,null,r.a.createElement(nt.a,{onClick:F,disabled:g||p||!f,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(nt.a,{onClick:$,disabled:g||p||!f,type:"submit",startIcon:r.a.createElement(jn.a,null),variant:"outlined"},"Add & New")),r.a.createElement(nt.a,{disabled:g||p,color:A?"primary":"default",startIcon:!A&&r.a.createElement(rt.a,null),onClick:c},A?"Ok":"Cancel")))},Ta=function(e){var t=e.entryId,n=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(z.a)(),c=Object(a.useCallback)((function(e,n){return Ca(u,t||"",e,n)}),[u,t]),d=Object(a.useCallback)((function(e){return r.a.createElement(Aa,{entryId:t,open:n,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[t,n,l,o]);return r.a.createElement(Ke.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})};function Da(){var e=Object(b.a)(["\n  mutation UpdateEntryItem($id: ID!, $fields: JournalEntryUpdateItemFields!) {\n    journalEntryUpdateItem(id: $id, fields: $fields) {\n      journalEntryItem {\n        ...JournalEntryItem_1Fragment\n      }\n    }\n  }\n  ","\n"]);return Da=function(){return e},e}var Fa=y()(Da(),Ie),$a=function(){var e=Object(L.a)(J.a.mark((function e(t,n,a,r){var l,o,i,u,c,d,s,m,p,f,b;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=r.description!==n.description&&(null===(l=r.description)||void 0===l?void 0:l.trim())||null,s=(null===(o=r.department)||void 0===o?void 0:o.id)===(null===(i=n.department)||void 0===i?void 0:i.id)?null:null!==(u=null===(c=r.department)||void 0===c?void 0:c.id)&&void 0!==u?u:null,m=function(){var e,t,a,l,o=null!==(e=null===(t=r.category.value[r.category.value.length-1])||void 0===t?void 0:t.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=n.category.value[n.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),p=r.units===n.units?null:r.units,f=0===_t(r.total.value).compare(_t(n.total.value))?null:r.total.value,b={id:a,fields:{units:p,description:d,department:s,category:m,total:f}},e.next=8,t.mutate({mutation:Fa,variables:b});case 8:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();function Pa(){var e=Object(b.a)(["\n  query UpdateItemIniState($entryId: ID!, $itemId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_3Fragment\n    }\n    journalEntryItem(id: $itemId) {\n      __typename\n      id\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      description\n      units\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Pa=function(){return e},e}var Na=y()(Pa(),wa,Bt,Jt),La={item:!0,lg:4,sm:6,xs:12},qa=function(e){var t,n=e.itemId,l=e.open,o=e.onClose,i=e.onExited,u=e.journalEntry,c=e.loading,d=e.handleSubmit,s=Object(Ke.c)(),m=s.resetForm,p=s.isSubmitting,f=s.isValid,b=yt(),v=Object(U.a)(b,2),y=v[0],E=v[1],O=null!==(t=null===u||void 0===u?void 0:u.type)&&void 0!==t?t:null,h=null===u||void 0===u?void 0:u.total,j=(null===u||void 0===u?void 0:u.items)||[],g=Object(a.useMemo)((function(){if(h){var e=j.reduce((function(e,t){var a=t.id,r=t.deleted,l=t.total;return r||a===n?e:e.add(_t(l))}),new fe.a(0));return _t(h).sub(e)}return new fe.a(Number.MAX_SAFE_INTEGER)}),[h,j,n]),C=Object(a.useCallback)((function(){i(),m(),E(null)}),[m,i,E]),R=Object(a.useMemo)((function(){return!y||y.type!==ot.FATAL_ERROR&&y.type!==ot.ERROR?[null,null]:[y.msg,y.type===ot.FATAL_ERROR]}),[y]),M=Object(U.a)(R,2),k=M[0],_=M[1],w=Object(a.useMemo)((function(){var e="Item Update";return _?"Fatal Error":c?"Loading ".concat(e,"..."):p?"Submitting ".concat(e):e}),[c,_,p]),I=Object(Xe.a)();return r.a.createElement(Qe.a,{open:l,onClose:o,onExited:C,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:d}},r.a.createElement(He.a,{style:k?{color:I.palette.error.main}:void 0},w),r.a.createElement(ae.a,{position:"relative"},(c||p)&&!k&&r.a.createElement(rn,{zIndex:"modal"}),!!k&&_&&r.a.createElement(an,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Ye.a,{color:"error"},k)),r.a.createElement(Ze.a,{dividers:!0},!!k&&!_&&r.a.createElement(Ye.a,{color:"error"},k),r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,La,r.a.createElement(St,{disabled:c||p,fullWidth:!0,maxTotal:g})),r.a.createElement(et.a,La,r.a.createElement(ka,{disabled:c||p,fullWidth:!0})),r.a.createElement(et.a,La,r.a.createElement(Rt,{disabled:c||p,fullWidth:!0})),r.a.createElement(et.a,La,r.a.createElement(xn,{disabled:c||p||!!_,entryType:O,fullWidth:!0})),r.a.createElement(et.a,La,r.a.createElement($n,{disabled:c||p||!!_,fullWidth:!0}))))),r.a.createElement(tt.a,null,!_&&r.a.createElement(nt.a,{disabled:c||p||!f,type:"submit",startIcon:r.a.createElement(at.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(nt.a,{disabled:c||p||!!_,color:_?"primary":"default",startIcon:!_&&r.a.createElement(rt.a,null),onClick:o},_?"Ok":"Cancel")))},Ua=function(e){var t=e.entryId,n=e.itemId,l=e.open,o=e.onClose,i=e.onExited,u=Object(z.c)(Na,{skip:!t,variables:{entryId:t,itemId:n}}),c=u.loading,d=u.error,s=u.data,m=Object(a.useMemo)((function(){return d?{msg:d.message,type:ot.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntryItem,f=Object(a.useMemo)((function(){var e,t;if(!p)return{};var n={inputValue:_t(p.total).round(2).toString(),value:p.total},a=function(){if(!p.category)return{inputValue:"",value:[]};var e=p.category,t=e.ancestors,n=Object(gt.a)(e,["ancestors"]),a=Object(q.a)(t).sort((function(e,t){var n,a;return e.id===(null===(n=t.parent)||void 0===n?void 0:n.id)?-1:t.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(n),{inputValue:"",value:a}}(),r=null!==(e=p.department)&&void 0!==e?e:null,l=null!==(t=p.description)&&void 0!==t?t:null;return{total:n,units:p.units,category:a,department:r,description:l}}),[p]),b=Object(z.a)(),v=Object(a.useCallback)(function(){var e=Object(L.a)(J.a.mark((function e(t,a){var r;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for item "'.concat(n,'".'),type:ot.FATAL_ERROR}),e.abrupt("return");case 5:if(n){e.next=8;break}return a.setStatus({msg:"No item ID.",type:ot.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,$a(b,f,n,t,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:ot.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}(),[b,f,o,n]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(qa,{entryId:t,itemId:n,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,t,c,o,i,l,n]);return r.a.createElement(Ke.a,{initialValues:null!==f&&void 0!==f?f:{},initialStatus:m,enableReinitialize:!0,onSubmit:v,children:y})};function Ba(){var e=Object(b.a)(["\n  mutation DeleteItem($id: ID!) {\n    journalEntryDeleteItem(id: $id) {\n      journalEntryItem {\n        id\n        __typename\n        deleted\n      }\n    }\n  }\n"]);return Ba=function(){return e},e}var Ja,Wa=y()(Ba()),Va=function(e){var t=e.itemId,n=e.onClose,l=Object(z.b)(Wa),o=Object(U.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:t}}).then((function(){return n()}))}),[t,i,n]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Item...":"Delete Item"}),[s,c]),f=Object(Xe.a)();return r.a.createElement(Qe.a,{open:!!t,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:n},r.a.createElement(He.a,{style:s?{color:f.palette.error.main}:void 0},p),r.a.createElement(ae.a,{position:"relative"},c&&r.a.createElement(rn,{zIndex:"modal"}),r.a.createElement(Ze.a,null,s&&r.a.createElement(Ye.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(Ye.a,null,"Are you sure you want to delete this item?"))),r.a.createElement(tt.a,null,!s&&r.a.createElement(nt.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(nt.a,{disabled:c,startIcon:!s&&r.a.createElement(rt.a,null),onClick:n},s?"Close":"Cancel")))},Ga=function(e){var t,n,l=e.entry,o=l.items,i=l.category,u=l.description,c=l.department,d=l.id,s=Object(a.useState)(!1),m=Object(U.a)(s,2),p=m[0],f=m[1],b=Object(a.useState)(null),v=Object(U.a)(b,2),y=v[0],E=v[1],O=Object(a.useCallback)((function(){f(!1)}),[f]),h=Object(a.useCallback)((function(){E(null)}),[E]),j=Object(a.useState)(!1),g=Object(U.a)(j,2),C=g[0],R=g[1],M=Object(a.useState)(null),k=Object(U.a)(M,2),_=k[0],w=k[1],I=Object(a.useState)(null),S=Object(U.a)(I,2),x=S[0],A=S[1],T=Object(a.useCallback)((function(){A(null)}),[A]),D=Object(a.useCallback)((function(){R(!1)}),[R]),F=Object(a.useCallback)((function(){w(null)}),[w]),$=Object(a.useMemo)((function(){return[{icon:ee.a,tooltip:"Delete Item",onClick:function(e,t){return A(t.id)}},{icon:te.a,tooltip:"Edit Item",onClick:function(e,t){R(!0),w({entryId:d,itemId:t.id})}},{icon:function(e){return r.a.createElement(ne.a,e)},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Item",isFreeAction:!0,onClick:function(){f(!0),E(d)}}]}),[d]),P=Object(a.useMemo)((function(){return[{field:"total",title:"Total",render:function(e){var t=e.total;return X()(_t(t).valueOf()).format("$0,0.00")}},{field:"units",title:"Units"},{field:"description",title:"Description",render:function(e){var t;return(null===(t=e.description)||void 0===t?void 0:t.trim())||u}},{field:"category",title:"Category",render:function(e,t){var n,a,r=null!==(n=null===(a=e.category)||void 0===a?void 0:a.name)&&void 0!==n?n:i.name;return Object(Q.a)(r)}},{field:"department",title:"Department",render:function(e){var t,n,a=null!==(t=null===(n=e.department)||void 0===n?void 0:n.name)&&void 0!==t?t:c.name;return Object(Q.a)(a)}}]}),[i,u,c]),N=Object(a.useMemo)((function(){return{search:!1,emptyRowsWhenPaging:!1}}),[]),L=Object(a.useMemo)((function(){return o.filter((function(e){return!e.deleted}))}),[o]),q=Object(Xe.a)(),B=Object(a.useMemo)((function(){return{boxShadow:q.shadows[0]}}),[q.shadows]),J=Object(a.useMemo)((function(){return{backgroundColor:q.palette.primary.main}}),[q.palette.primary.main]);return r.a.createElement(ae.a,null,r.a.createElement(G.a,{title:"Items",actions:$,options:N,columns:P,icons:ze,data:L,style:B}),r.a.createElement(Ta,{entryId:y,open:p,onClose:O,onExited:h}),r.a.createElement(Ua,{entryId:null!==(t=null===_||void 0===_?void 0:_.entryId)&&void 0!==t?t:null,itemId:null!==(n=null===_||void 0===_?void 0:_.itemId)&&void 0!==n?n:null,open:C,onClose:D,onExited:F}),r.a.createElement(Va,{itemId:x,onClose:T}),r.a.createElement(ha.a,{style:J}))},za=n(307),Ka=n(371),Xa=function(e){var t=e.setFilter,n=Object(a.useState)("None"),l=Object(U.a)(n,2),o=l[0],i=l[1],u=Object(a.useCallback)((function(e){var n=e.target.value;switch(n){case"Reconciled":t({reconciled:{$eq:!0}});break;case"Unreconciled":t({reconciled:{$eq:!1}});break;case"None":t({})}i(n)}),[t,i]);return r.a.createElement(Kn.a,{title:"None"===o?"No Filter":o},r.a.createElement(za.a,{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),onChange:u,fullWidth:!0,value:"None"===o?"":o},r.a.createElement(Ka.a,{value:"None"},"None"),r.a.createElement(Ka.a,{value:"Reconciled"},"Reconciled"),r.a.createElement(Ka.a,{value:"Unreconciled"},"Unreconciled")))},Qa=n(386),Ha=n(251),Ya=function(e){var t=e.setFilter,n=e.options,l=Object(a.useState)([]),o=Object(U.a)(l,2),i=o[0],u=o[1],c=Object(a.useMemo)((function(){var e=[],t=new Map,a=!0,l=!1,o=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;t.set(d.id,d.name),e.push(r.a.createElement(Ka.a,{key:d.id,value:d.id},r.a.createElement(At.a,{checked:i.includes(d.id)}),r.a.createElement(Qa.a,{primary:d.name})))}}catch(s){l=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(l)throw o}}return[e,t]}),[n,i]),d=Object(U.a)(c,2),s=d[0],m=d[1],p=Object(a.useCallback)((function(e){return e.map((function(e){var t;return null!==(t=m.get(e))&&void 0!==t?t:""})).join(", ")}),[m]),f=Object(a.useCallback)((function(e){var n=e.target.value||[];0===n.length?t({}):t({"category.id":{$in:n}}),u(n)}),[t]);return r.a.createElement(Kn.a,{title:0===i.length?"No Filter":p(i)},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(za.a,{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),fullWidth:!0,multiple:!0,value:i,onChange:f,input:r.a.createElement(Ha.a,null),renderValue:p},s)))},Za=function(e){var t=e.setFilter,n=e.options,l=Object(a.useState)([]),o=Object(U.a)(l,2),i=o[0],u=o[1],c=Object(a.useMemo)((function(){var e=[],t=new Map,a=!0,l=!1,o=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;t.set(d.id,d.name),e.push(r.a.createElement(Ka.a,{key:d.id,value:d.id},r.a.createElement(At.a,{checked:i.includes(d.id)}),r.a.createElement(Qa.a,{primary:d.name})))}}catch(s){l=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(l)throw o}}return[e,t]}),[n,i]),d=Object(U.a)(c,2),s=d[0],m=d[1],p=Object(a.useCallback)((function(e){return e.map((function(e){var t;return null!==(t=m.get(e))&&void 0!==t?t:""})).join(", ")}),[m]),f=Object(a.useCallback)((function(e){var n=e.target.value||[];0===n.length?t({}):t({$or:[{"paymentMethod.id":{$in:n}},{"paymentMethod.parent.id":{$in:n}}]}),u(n)}),[t]);return r.a.createElement(Kn.a,{title:0===i.length?"No Filter":p(i)},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(za.a,{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),fullWidth:!0,multiple:!0,value:i,onChange:f,input:r.a.createElement(Ha.a,null),renderValue:p},s)))},er=function(e){var t=e.setFilter,n=e.options,l=Object(a.useState)([]),o=Object(U.a)(l,2),i=o[0],u=o[1],c=Object(a.useMemo)((function(){var e=[],t=new Map,a=!0,l=!1,o=void 0;try{for(var u,c=n[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var d=u.value;t.set(d.id,d.name),e.push(r.a.createElement(Ka.a,{key:d.id,value:d.id},r.a.createElement(At.a,{checked:i.includes(d.id)}),r.a.createElement(Qa.a,{primary:d.name})))}}catch(s){l=!0,o=s}finally{try{a||null==c.return||c.return()}finally{if(l)throw o}}return[e,t]}),[n,i]),d=Object(U.a)(c,2),s=d[0],m=d[1],p=Object(a.useCallback)((function(e){return e.map((function(e){var t;return null!==(t=m.get(e))&&void 0!==t?t:""})).join(", ")}),[m]),f=Object(a.useCallback)((function(e){var n=e.target.value||[];0===n.length?t({}):t({"department.id":{$in:n}}),u(n)}),[t]);return r.a.createElement(Kn.a,{title:0===i.length?"No Filter":p(i)},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(za.a,{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),fullWidth:!0,multiple:!0,value:i,onChange:f,input:r.a.createElement(Ha.a,null),renderValue:p},s)))},tr=function(e){var t=e.setFilter,n=e.options,l=Object(a.useState)([]),o=Object(U.a)(l,2),i=o[0],u=o[1],c=Object(a.useMemo)((function(){var e=[],t=new Map,a=!0,l=!1,o=void 0;try{for(var u,c=function(){var n=u.value,a=function(){switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}}(),l="".concat(n.__typename,"-").concat(n.id);t.set(l,a),e.push(r.a.createElement(Ka.a,{key:l,value:l},r.a.createElement(At.a,{checked:i.includes(l)}),r.a.createElement(Qa.a,{primary:a})))},d=n[Symbol.iterator]();!(a=(u=d.next()).done);a=!0)c()}catch(s){l=!0,o=s}finally{try{a||null==d.return||d.return()}finally{if(l)throw o}}return[e,t]}),[n,i]),d=Object(U.a)(c,2),s=d[0],m=d[1],p=Object(a.useCallback)((function(e){return e.map((function(e){var t;return null!==(t=m.get(e))&&void 0!==t?t:""})).join(", ")}),[m]),f=Object(a.useCallback)((function(e){var n=e.target.value||[];0===n.length?t({}):t({$or:n.map((function(e){var t=e.split("-"),n=Object(U.a)(t,2),a=n[0];return{"source.id":n[1],"source.__typename":a}}))}),u(n)}),[t]);return r.a.createElement(Kn.a,{title:0===i.length?"No Filter":p(i)},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(za.a,{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),fullWidth:!0,multiple:!0,value:i,onChange:f,input:r.a.createElement(Ha.a,null),renderValue:p},s)))},nr=n(164),ar=n(203),rr=n(432),lr=n(5847),or=n(204),ir=n(5846);!function(e){e[e.None=1]="None",e[e.Equal=2]="Equal",e[e.GreaterThan=3]="GreaterThan",e[e.LessThan=4]="LessThan",e[e.GreaterThanOrEqual=5]="GreaterThanOrEqual",e[e.LessThanOrEqual=6]="LessThanOrEqual"}(Ja||(Ja={}));var ur,cr=function(e,t){if(!e)return[void 0,void 0,[Ja.None]];switch(t){case Ja.None:case Ja.Equal:return[void 0,void 0,[Ja.None]];case Ja.GreaterThan:case Ja.GreaterThanOrEqual:return[Object(or.a)(e,1),void 0,[Ja.None,Ja.LessThan,Ja.LessThanOrEqual]];case Ja.LessThan:case Ja.LessThanOrEqual:return[void 0,Object(ir.a)(e,1),[Ja.None,Ja.GreaterThan,Ja.GreaterThanOrEqual]]}},dr=new Date(864e13),sr=new Date(-864e13),mr=function(e){var t=e.setFilter,n=Object(a.useState)(""),l=Object(U.a)(n,2),o=l[0],i=l[1],u=Object(a.useState)(Ja.Equal),c=Object(U.a)(u,2),d=c[0],s=c[1],m=Object(a.useState)(null),p=Object(U.a)(m,2),f=p[0],b=p[1],v=Object(a.useState)(Ja.None),y=Object(U.a)(v,2),E=y[0],O=y[1],h=Object(a.useState)(null),j=Object(U.a)(h,2),g=j[0],C=j[1],R=Object(a.useMemo)((function(){return cr(f,d)}),[f,d]),M=Object(U.a)(R,3),k=M[0],_=M[1],w=M[2],I=Object(a.useCallback)((function(e){if(0===e.length)return i(""),void t({});var n=[],a=[],r=!0,l=!1,o=void 0;try{for(var u,c=function(){var e=u.value,t=e.op,r=e.date,l=function(){switch(t){case Ja.Equal:return["$eq","="];case Ja.GreaterThan:return["$gt",">"];case Ja.GreaterThanOrEqual:return["$gte",">="];case Ja.LessThan:return["$lt","<"];case Ja.LessThanOrEqual:return["$lte","<="]}}(),o=Object(U.a)(l,2),i=o[0],c=o[1];n.push({date:Object(nr.a)({},i,Object(me.a)(r))}),a.push("".concat(c,"[").concat(Object(se.a)(r,"d/M/yy"),"]"))},d=e[Symbol.iterator]();!(r=(u=d.next()).done);r=!0)c()}catch(s){l=!0,o=s}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}i(a.join(" & ")),t({$and:n})}),[t]),S=Object(a.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:Ja.Equal;s(n);var a=cr(f,n),r=Object(U.a)(a,3)[2].includes(E);if(r||(O(Ja.None),C(null)),f){var l=[{op:n,date:f}];r&&E!==Ja.None&&E!==Ja.Equal&&g&&l.push({op:E,date:g}),I(l)}}),[f,g,E,I]),x=Object(a.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:Ja.None;O(n),n===Ja.None?(C(null),I(f?[{op:d,date:f}]:[])):g&&I([{op:d,date:f},{op:n,date:g}])}),[f,g,d,I]),A=Object(a.useCallback)((function(e,t){if(!e||Object(mt.a)(e))if(b(e),e){var n=[{op:d,date:e}];if(g){var a=cr(e,d),r=Object(U.a)(a,2),l=r[0],o=r[1];E!==Ja.None&&E!==Ja.Equal&&l&&g>=l||o&&g<=o?n.push({op:E,date:g}):(O(Ja.None),C(null))}I(n)}else I([]),O(Ja.None),C(null)}),[g,d,E,I]),T=Object(a.useCallback)((function(e,t){e&&!Object(mt.a)(e)||(C(e),e?I([{op:d,date:f},{op:E,date:e}]):(I(f?[{op:d,date:f}]:[]),C(null)))}),[f,d,E,I]),D=Object(a.useCallback)((function(e){e.stopPropagation(),s(Ja.Equal),b(null),O(Ja.None),C(null),I([])}),[I]),F=Object(a.useMemo)((function(){return{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),endAdornment:f?r.a.createElement(Mt.a,{position:"end"},r.a.createElement(ar.a,{onClick:D},r.a.createElement(Fe.a,null))):r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"end"},r.a.createElement(lr.a,null))}}),[f,D]),$=Object(a.useState)(null),P=Object(U.a)($,2),N=P[0],L=P[1],q=Object(a.useCallback)((function(e){L(e.currentTarget)}),[]),B=Object(a.useCallback)((function(e){L(null)}),[]);return r.a.createElement(ae.a,null,r.a.createElement(Kn.a,{title:o||"No Filter"},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(Ct.a,{fullWidth:!0,value:o,InputProps:F,onClick:q}))),r.a.createElement(rr.a,{onClose:B,open:!!N,anchorEl:N},r.a.createElement(ae.a,{maxWidth:350,margin:2,clone:!0},r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,{xs:12,item:!0},r.a.createElement(ae.a,{marginTop:1},r.a.createElement(za.a,{value:d,onChange:S},r.a.createElement(Ka.a,{value:Ja.Equal},r.a.createElement(de.e,null)),r.a.createElement(Ka.a,{value:Ja.GreaterThan},r.a.createElement(de.h,null)),r.a.createElement(Ka.a,{value:Ja.LessThan},r.a.createElement(de.j,null)),r.a.createElement(Ka.a,{value:Ja.GreaterThanOrEqual},r.a.createElement(de.i,null)),r.a.createElement(Ka.a,{value:Ja.LessThanOrEqual},r.a.createElement(de.k,null)))),r.a.createElement(ct.a,{utils:st.default},r.a.createElement(dt.b,{onChange:A,value:f,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",margin:"none",label:"Date",animateYearScrolling:!0,disableToolbar:!0,autoOk:!0,variant:"inline"}))),!!f&&d!==Ja.Equal&&r.a.createElement(et.a,{xs:12,item:!0},r.a.createElement(ae.a,{marginTop:1},r.a.createElement(za.a,{value:E,onChange:x},r.a.createElement(Ka.a,{value:Ja.None},"None"),r.a.createElement(Ka.a,{style:{display:"None"},value:Ja.Equal},r.a.createElement(de.e,null)),r.a.createElement(Ka.a,{style:w.includes(Ja.GreaterThan)?void 0:{display:"none"},disabled:!w.includes(Ja.GreaterThan),value:Ja.GreaterThan},r.a.createElement(de.h,null)),r.a.createElement(Ka.a,{style:w.includes(Ja.LessThan)?void 0:{display:"none"},disabled:!w.includes(Ja.LessThan),value:Ja.LessThan},r.a.createElement(de.j,null)),r.a.createElement(Ka.a,{style:w.includes(Ja.GreaterThanOrEqual)?void 0:{display:"none"},disabled:!w.includes(Ja.GreaterThanOrEqual),value:Ja.GreaterThanOrEqual},r.a.createElement(de.i,null)),r.a.createElement(Ka.a,{style:w.includes(Ja.LessThanOrEqual)?void 0:{display:"none"},disabled:!w.includes(Ja.LessThanOrEqual),value:Ja.LessThanOrEqual},r.a.createElement(de.k,null)))),r.a.createElement(ct.a,{utils:st.default},r.a.createElement(dt.b,{disabled:E===Ja.None,minDate:k||sr,maxDate:_||dr,onChange:T,value:g,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",margin:"none",label:"Date",animateYearScrolling:!0,disableToolbar:!0,autoOk:!0,variant:"inline"})))))))};!function(e){e[e.None=1]="None",e[e.Equal=2]="Equal",e[e.GreaterThan=3]="GreaterThan",e[e.LessThan=4]="LessThan",e[e.GreaterThanOrEqual=5]="GreaterThanOrEqual",e[e.LessThanOrEqual=6]="LessThanOrEqual"}(ur||(ur={}));var pr,fr=function(e,t){if(!e)return[void 0,void 0,[ur.None]];switch(t){case ur.None:case ur.Equal:return[void 0,void 0,[ur.None]];case ur.GreaterThan:case ur.GreaterThanOrEqual:return[e.add(new fe.a({n:1,d:100})),void 0,[ur.None,ur.LessThan,ur.LessThanOrEqual]];case ur.LessThan:case ur.LessThanOrEqual:return[void 0,e.sub(new fe.a({n:1,d:100})),[ur.None,ur.GreaterThan,ur.GreaterThanOrEqual]]}},br={type:"number",startAdornment:r.a.createElement(Mt.a,{position:"start"},"$")},vr=function(e){var t=e.setFilter,n=Object(a.useState)(""),l=Object(U.a)(n,2),o=l[0],i=l[1],u=Object(a.useState)(ur.Equal),c=Object(U.a)(u,2),d=c[0],s=c[1],m=Object(a.useState)(""),p=Object(U.a)(m,2),f=p[0],b=p[1],v=Object(a.useState)(ur.None),y=Object(U.a)(v,2),E=y[0],O=y[1],h=Object(a.useState)(""),j=Object(U.a)(h,2),g=j[0],C=j[1],R=Object(a.useMemo)((function(){return fr(f?new fe.a(f):null,d)}),[f,d]),M=Object(U.a)(R,3),k=M[0],_=M[1],w=M[2],I=Object(a.useMemo)((function(){return{min:k?k.toString():"0.00",max:_?_.toString():void 0,step:"0.01"}}),[k,_]),S=Object(a.useCallback)((function(e){if(0===e.length)return i(""),void t({});var n=[],a=[],r=!0,l=!1,o=void 0;try{for(var u,c=function(){var e=u.value,t=e.op,r=e.total,l=function(){switch(t){case ur.Equal:return["$eq","="];case ur.GreaterThan:return["$gt",">"];case ur.GreaterThanOrEqual:return["$gte",">="];case ur.LessThan:return["$lt","<"];case ur.LessThanOrEqual:return["$lte","<="]}}(),o=Object(U.a)(l,2),i=o[0],c=o[1];n.push({total:Object(nr.a)({},i,r)}),a.push("".concat(c,"[").concat(r,"]"))},d=e[Symbol.iterator]();!(r=(u=d.next()).done);r=!0)c()}catch(s){l=!0,o=s}finally{try{r||null==d.return||d.return()}finally{if(l)throw o}}i(a.join(" & ")),t({$and:n})}),[t]),x=Object(a.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:ur.Equal;s(n);var a=fr(f?new fe.a(f):null,n),r=Object(U.a)(a,3)[2].includes(E);if(r||(O(ur.None),C("")),f){var l=[{op:n,total:new fe.a(f).valueOf()}];if(r&&E!==ur.None&&E!==ur.Equal&&g){var o=new fe.a(g);l.push({op:E,total:o.valueOf()})}S(l)}}),[f,g,E,S]),A=Object(a.useCallback)((function(e){var t,n=null!==(t=e.target.value)&&void 0!==t?t:ur.None;if(O(n),n===ur.None)if(C(""),f){var a=new fe.a(f);S([{op:d,total:a.valueOf()}])}else S([]);else if(g){var r=new fe.a(f),l=new fe.a(g);S([{op:d,total:r.valueOf()},{op:n,total:l.valueOf()}])}}),[f,g,d,S]),T=Object(a.useCallback)((function(e){var t=e.target.value.trim();if(t){var n=new fe.a(t).round(2);i(n.toString()),b(t);var a=[{op:d,total:n.valueOf()}];if(g){var r=fr(n,d),l=Object(U.a)(r,2),o=l[0],u=l[1],c=new fe.a(g);E!==ur.None&&E!==ur.Equal&&o&&c.compare(o)>=0||u&&c.compare(u)<=0?a.push({op:E,total:c.valueOf()}):(O(ur.None),C(""))}S(a)}else i(t),S([]),O(ur.None),C("")}),[d,g,S,E]),D=Object(a.useCallback)((function(e){var t=e.target.value.trim();if(t){var n=new fe.a(f),a=new fe.a(t).round(2);C(t),S([{op:d,total:n.valueOf()},{op:E,total:a.valueOf()}])}else{if(f){var r=new fe.a(f);S([{op:d,total:r.valueOf()}])}else S([]);C("")}}),[f,d,E,S]),F=Object(a.useCallback)((function(e){e.stopPropagation(),s(ur.Equal),b(""),O(ur.None),C(""),S([])}),[S]),$=Object(a.useMemo)((function(){return{startAdornment:r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"start"},r.a.createElement(Le.a,null)),endAdornment:f?r.a.createElement(Mt.a,{position:"end"},r.a.createElement(ar.a,{onClick:F},r.a.createElement(Fe.a,null))):r.a.createElement(Mt.a,{disablePointerEvents:!0,position:"end"},r.a.createElement(lr.a,null))}}),[f,F]),P=Object(a.useState)(null),N=Object(U.a)(P,2),L=N[0],q=N[1],B=Object(a.useCallback)((function(e){q(e.currentTarget)}),[]),J=Object(a.useCallback)((function(e){q(null)}),[]);return r.a.createElement(ae.a,null,r.a.createElement(Kn.a,{title:o||"No Filter"},r.a.createElement(ae.a,{maxWidth:250},r.a.createElement(Ct.a,{fullWidth:!0,value:o,InputProps:$,onClick:B}))),r.a.createElement(rr.a,{onClose:J,open:!!L,anchorEl:L},r.a.createElement(ae.a,{maxWidth:350,margin:2,clone:!0},r.a.createElement(et.a,{container:!0,spacing:2},r.a.createElement(et.a,{xs:12,item:!0},r.a.createElement(za.a,{value:d,onChange:x},r.a.createElement(Ka.a,{value:ur.Equal},r.a.createElement(de.e,null)),r.a.createElement(Ka.a,{value:ur.GreaterThan},r.a.createElement(de.h,null)),r.a.createElement(Ka.a,{value:ur.LessThan},r.a.createElement(de.j,null)),r.a.createElement(Ka.a,{value:ur.GreaterThanOrEqual},r.a.createElement(de.i,null)),r.a.createElement(Ka.a,{value:ur.LessThanOrEqual},r.a.createElement(de.k,null))),r.a.createElement(ae.a,{marginTop:2},r.a.createElement(Ct.a,{placeholder:"0.00",label:"Total",type:"number",inputProps:I,InputProps:br,value:f,onChange:T}))),!!f&&d!==ur.Equal&&r.a.createElement(et.a,{xs:12,item:!0},r.a.createElement(za.a,{value:E,onChange:A},r.a.createElement(Ka.a,{value:ur.None},"None"),r.a.createElement(Ka.a,{style:{display:"None"},value:ur.Equal},r.a.createElement(de.e,null)),r.a.createElement(Ka.a,{style:w.includes(ur.GreaterThan)?void 0:{display:"none"},disabled:!w.includes(ur.GreaterThan),value:ur.GreaterThan},r.a.createElement(de.h,null)),r.a.createElement(Ka.a,{style:w.includes(ur.LessThan)?void 0:{display:"none"},disabled:!w.includes(ur.LessThan),value:ur.LessThan},r.a.createElement(de.j,null)),r.a.createElement(Ka.a,{style:w.includes(ur.GreaterThanOrEqual)?void 0:{display:"none"},disabled:!w.includes(ur.GreaterThanOrEqual),value:ur.GreaterThanOrEqual},r.a.createElement(de.i,null)),r.a.createElement(Ka.a,{style:w.includes(ur.LessThanOrEqual)?void 0:{display:"none"},disabled:!w.includes(ur.LessThanOrEqual),value:ur.LessThanOrEqual},r.a.createElement(de.k,null))),r.a.createElement(ae.a,{marginTop:2},r.a.createElement(Ct.a,{disabled:E===ur.None,placeholder:"0.00",label:"Total",type:"number",inputProps:I,InputProps:br,value:g,onChange:D})))))))},yr=n(8);function Er(){var e=Object(b.a)(["\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Er=function(){return e},e}function Or(){var e=Object(b.a)(["\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Or=function(){return e},e}function hr(){var e=Object(b.a)(["\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return hr=function(){return e},e}Object(yr.b)(yr.a.EXPRESSION,(function(e){return{$expressionCb:function(t,n,a){return n(t,a,e)}}})),Object(yr.b)(yr.a.QUERY,(function(e){return{$queryCb:function(t,n,a,r){return a(t,n,r,e)}}})),function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(pr||(pr={}));var jr=J.a.mark((function e(t){var n,a,r,l,o,i,u,c,d,s,m,p,f;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=!1,r=void 0,e.prev=3,l=t[Symbol.iterator]();case 5:if(n=(o=l.next()).done){e.next=39;break}return i=o.value,e.next=9,i;case 9:u=i.type===g.Credit?g.Debit:g.Credit,c=!0,d=!1,s=void 0,e.prev=13,m=i.refunds[Symbol.iterator]();case 15:if(c=(p=m.next()).done){e.next=22;break}return f=p.value,e.next=19,Object(W.a)({},i,{},f,{type:u,description:f.description||i.description,refunds:i.id});case 19:c=!0,e.next=15;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(13),d=!0,s=e.t0;case 28:e.prev=28,e.prev=29,c||null==m.return||m.return();case 31:if(e.prev=31,!d){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:n=!0,e.next=5;break;case 39:e.next=45;break;case 41:e.prev=41,e.t1=e.catch(3),a=!0,r=e.t1;case 45:e.prev=45,e.prev=46,n||null==l.return||l.return();case 48:if(e.prev=48,!a){e.next=51;break}throw r;case 51:return e.finish(48);case 52:return e.finish(45);case 53:case"end":return e.stop()}}),e,null,[[3,41,45,53],[13,24,28,36],[29,,31,35],[46,,48,52]])})),gr=(Symbol(),y()(hr(),Se)),Cr=y()(Or(),Se),Rr=y()(Er(),Se),Mr=function(e){var t,n,l=e.deptId,o=void 0===l?null:l,i=e.journalTitle,u=void 0===i?null:i,c=e.mode,d=Object(a.useState)(!1),s=Object(U.a)(d,2),m=s[0],p=s[1],f=Object(a.useCallback)((function(){p(!1)}),[p]),b=Object(a.useState)(!1),v=Object(U.a)(b,2),y=v[0],E=v[1],O=Object(a.useState)(null),h=Object(U.a)(O,2),j=h[0],C=h[1],R=Object(a.useCallback)((function(){E(!1)}),[E]),M=Object(a.useCallback)((function(){C(null)}),[C]),k=Object(a.useState)(null),_=Object(U.a)(k,2),w=_[0],I=_[1],S=Object(a.useCallback)((function(){I(null)}),[I]),x=Object(a.useState)(!1),A=Object(U.a)(x,2),T=A[0],D=A[1],F=Object(a.useState)(null),$=Object(U.a)(F,2),P=$[0],N=$[1],B=Object(a.useCallback)((function(){D(!1)}),[D]),K=Object(a.useCallback)((function(){N(null)}),[N]),pe=Object(a.useState)(!1),ve=Object(U.a)(pe,2),ye=ve[0],Ee=ve[1],Oe=Object(a.useState)(null),he=Object(U.a)(Oe,2),je=he[0],ge=he[1],Ce=Object(a.useCallback)((function(){Ee(!1)}),[Ee]),Re=Object(a.useCallback)((function(){ge(null)}),[ge]),Me=Object(a.useState)(null),ke=Object(U.a)(Me,2),_e=ke[0],we=ke[1],Ie=Object(a.useCallback)((function(){we(null)}),[we]),Se=Object(z.b)(Cr),Te=Object(U.a)(Se,2),De=Te[0],Fe=Te[1].loading,$e=Object(z.b)(Rr),Pe=Object(U.a)($e,2),Ne=Pe[0],Le=Pe[1].loading,qe=Object(a.useMemo)((function(){return o?{where:{department:{eq:o,matchDecedentTree:!0}}}:void 0}),[o]),Ue=Object(z.c)(xe,{variables:qe,fetchPolicy:"cache-and-network"}),Be=Ue.loading,Je=Ue.error,We=Ue.data,Ve=Ue.subscribeToMore,Ge=Be&&!(null===We||void 0===We?void 0:We.journalEntries);Object(a.useEffect)((function(){return Ve({document:gr,updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var a=n.data.journalEntryUpserted,r=a.department.ancestors;if(o&&a.department.id!==o&&r.every((function(e){return e.id!==o}))){var l=e.journalEntries.filter((function(e){return e.id!==a.id}));return l.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:l})}return e.journalEntries.some((function(e){return e.id===a.id}))?e:Object.assign({},e,{journalEntries:[a].concat(Object(q.a)(e.journalEntries))})}})}),[o,Ve]);var Ke=(null===We||void 0===We?void 0:We.journalEntries)||[],Xe=Object(a.useMemo)((function(){var e={category:new Map,paymentMethod:new Map,source:new Map,department:new Map},t=[],n=!0,a=!1,r=void 0;try{for(var l,o=jr(Ke)[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value;i.deleted||c===pr.Reconcile&&i.reconciled||(e.category.set(i.category.id,i.category),e.department.set(i.department.id,i.department),e.paymentMethod.set(i.paymentMethod.id,i.paymentMethod),e.source.set("".concat(i.source.__typename,"-").concat(i.source.id),i.source),t.push(i))}}catch(u){a=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return[t,{category:Object(q.a)(e.category.values()),department:Object(q.a)(e.department.values()),paymentMethod:Object(q.a)(e.paymentMethod.values()).filter((function(e){var t;return"5dc46d0af74afb2c2805bd54"!==(null===(t=e.parent)||void 0===t?void 0:t.id)})),source:Object(q.a)(e.source.values())}]}),[Ke,c]),Qe=Object(U.a)(Xe,2),He=Qe[0],Ye=Qe[1],Ze=Object(a.useMemo)((function(){return[{field:"reconciled",title:"Reconciled",render:function(e){return e.reconciled?r.a.createElement(Y.a,null):null},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(Xa,{setFilter:function(e){var a,r;return n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"0",e)}})},hidden:c===pr.Reconcile,filtering:!0},{field:"total",title:"Total",render:function(e){var t=e.total;return X()(_t(t).valueOf()).format("$0,0.00")},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(vr,{setFilter:function(e){var a,r;n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"1",e)}})}},{field:"date",title:"Date",render:function(e){var t=e.date;return Object(se.a)(new Date(t),"MMM dd, yyyy")},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(mr,{setFilter:function(e){var a,r;n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"2",e)}})},defaultSort:"desc"},{field:"category",title:"Category",render:function(e,t){var n="group"===t?e.name:e.category.name;return Object(Q.a)(n)},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(Ya,{options:Ye.category,setFilter:function(e){var a,r;return n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"3",e)}})}},{field:"source",title:"Source",render:function(e){var t=e.source;switch(t.__typename){case"Person":return"".concat(t.name.first," ").concat(t.name.last);case"Business":return t.bizName;case"Department":return t.deptName}},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(tr,{options:Ye.source,setFilter:function(e){var a,r;return n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"4",e)}})}},{field:"paymentMethod",title:"Payment Method",render:function(e){var t,n=e.paymentMethod;return(null===(t=n.parent)||void 0===t?void 0:t.id)===Ae?"CK-".concat(n.name):n.name},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(Za,{options:Ye.paymentMethod,setFilter:function(e){var a,r;return n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"5",e)}})}},{field:"description",title:"Description",render:function(e){return e.description},searchable:!1,filtering:!1,sorting:!1},{field:"department",title:"Department",render:function(e){var t=e.department;return Object(Q.a)(t.name)},searchable:!1,filterComponent:function(e){var t=e.columnDef,n=e.onFilterChanged;return r.a.createElement(er,{options:Ye.department,setFilter:function(e){var a,r;return n(null!==(a=null===(r=t.tableData)||void 0===r?void 0:r.id)&&void 0!==a?a:"5",e)}})}}]}),[Ye.category,Ye.department,Ye.paymentMethod,Ye.source,c]),et=Object(a.useMemo)((function(){return{toolbar:{searchTooltip:r.a.createElement(ae.a,{fontSize:12,component:"span"},'[abc] | [efg] = "abc" OR "efg"',r.a.createElement("br",null),'\'[abc] = EXACTLY "abc"',r.a.createElement("br",null),'![abc] = NOT "abc"',r.a.createElement("br",null),'^[abc] = STARTS WITH "abc"',r.a.createElement("br",null),'!^[abc] = DOES NOT START WITH "abc"',r.a.createElement("br",null),'[abc]$ = ENDS WITH "abc"',r.a.createElement("br",null),'![abc]$ = DOES NOT END WITH "abc"'),nRowsSelected:"Reconcile {0} Entry(s)"}}}),[]),tt=Object(a.useMemo)((function(){return{rowStyle:function(e){var t={};return t.color=e.type===g.Credit?ue.a[900]:ce.a[900],t},maxBodyHeight:"calc(100vh - 53px - 64px)",headerStyle:{position:"sticky",top:0},pageSize:25,pageSizeOptions:[25,50,100],showTitle:!!u,selection:c===pr.Reconcile,showSelectAllCheckbox:!1,debounceInterval:500,emptyRowsWhenPaging:!1,columnsButton:!0,filtering:!0,sorting:!0,thirdSortClick:!1}}),[u,c]),nt=Object(a.useMemo)((function(){return c===pr.Reconcile?[{icon:function(e){return r.a.createElement(Z.a,e)},tooltip:"Reconcile Selected",position:"toolbarOnSelect",iconProps:{color:"secondary",fontSize:"large"},onClick:function(){var e=Object(L.a)(J.a.mark((function e(t,n){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(n)?n:[n]).map(function(){var e=Object(L.a)(J.a.mark((function e(t){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.reconciled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"JournalEntryRefund"!==t.__typename){e.next=8;break}return e.next=6,Ne({variables:{id:t.id}});case 6:e.next=10;break;case 8:return e.next=10,De({variables:{id:t.id}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]:[function(e){var t=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Delete Entry",onClick:function(e,t){return I(t.id)}};case"JournalEntryRefund":return{tooltip:"Delete Refund",onClick:function(e,t){return we(t.id)}}}}(),n=t.tooltip,a=t.onClick;return{icon:ee.a,tooltip:n,onClick:a}},function(e){var t=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Edit Entry",onClick:function(e,t){E(!0),C(t.id)}};case"JournalEntryRefund":return{tooltip:"Edit Refund",onClick:function(e,t){Ee(!0),ge({entryId:t.refunds,refundId:t.id})}}}}(),n=t.tooltip,a=t.onClick;return{icon:te.a,tooltip:n,onClick:a}},function(e){if("JournalEntry"!==e.__typename)return null;var t=e.type===g.Credit;return{icon:function(e){return t?r.a.createElement(de.d,e):r.a.createElement(de.c,e)},tooltip:t?"Give Refund":"Add Refund",iconProps:{style:{color:t?ce.a[900]:ue.a[900]}},onClick:function(e,t){D(!0),N(t.id)}}},{icon:function(e){return r.a.createElement(ne.a,e)},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Entry",isFreeAction:!0,onClick:function(){p(!0)}}]}),[c,Ne,De,we,I]),at=Object(a.useMemo)((function(){return new Map}),[]),rt=Object(a.useMemo)((function(){return{Body:Je?function(e){return r.a.createElement(re.a,e,r.a.createElement(le.a,null,r.a.createElement(oe.a,{colSpan:Ze.length+(Array.isArray(nt)&&nt.length>0?1:0),align:"left"},r.a.createElement(ie.a,{align:"center",color:"error",variant:"h4"},"Error Loading Entries"),r.a.createElement(ie.a,{variant:"body1"},Je.message))))}:function(e){return r.a.createElement(V.MTableBody,e)},Row:function(e){var t=Object(W.a)({},e,{onToggleDetailPanel:function(t,n){at.has(e.data.id)?at.delete(e.data.id):at.set(e.data.id,n);for(var a=arguments.length,r=new Array(a>2?a-2:0),l=2;l<a;l++)r[l-2]=arguments[l];return e.onToggleDetailPanel.apply(e,[t,n].concat(r))}});return r.a.createElement(V.MTableBodyRow,t)}}}),[Je,Ze.length,nt,at]),lt=Object(a.useMemo)((function(){return[function(e){var t="JournalEntry"===e.__typename,n=!!t&&e.items.length>0;return{icon:function(e){return t?n?r.a.createElement(de.f,e):r.a.createElement(de.g,e):null},openIcon:function(e){return n?r.a.createElement(de.f,Object.assign({},e,{color:"primary"})):r.a.createElement(de.g,Object.assign({},e,{color:"primary"}))},disabled:!t,tooltip:t?"Itemize":void 0,render:function(e){return"JournalEntry"!==e.__typename?null:r.a.createElement(Ga,{entry:e})}}}]}),[]),ot=Object(a.useState)(new fe.a(0)),it=Object(U.a)(ot,2),ut=it[0],ct=it[1],dt=Object(a.useMemo)((function(){var e=ut.compare(new fe.a(0)),t=r.a.createElement(ae.a,{color:0===e?void 0:e>0?ue.a[900]:ce.a[900],component:"span"},X()(ut.valueOf()).format("$0,0.00"));return u?r.a.createElement(ie.a,{variant:"h6"},"".concat(u,": "),t):r.a.createElement(ie.a,{variant:"h6"},t)}),[ut,u]),st=Object(a.useRef)(null),mt=Object(a.useCallback)(function(){var e=Object(L.a)(J.a.mark((function e(t){var n,a,r,l,o,i,u,c,d,s,m,p,f,b,v,y,E,O,h,j,C,R,M,k,_,w;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.filters,r=t.page,l=t.pageSize,o=t.orderBy,i=t.orderDirection,u=null===(n=t.search)||void 0===n?void 0:n.trim(),c=u?new H.a(He,{keys:["date","total","description","department","category","paymentMethod","source"],threshold:.4,useExtendedSearch:!0,getFn:function(e,t){var n;switch(t){case"date":var a=new Date(e.date);return[e.date,Object(se.a)(a,"M/d/yy"),Object(se.a)(a,"MM/d/yy"),Object(se.a)(a,"M/d/yyyy"),Object(se.a)(a,"MM/d/yyyy"),Object(se.a)(a,"MMM dd, yyyy")];case"total":var r=_t(e.total).valueOf();return[X()(r).format("$0,0.00"),r.toFixed(2)];case"description":return(null===(n=e.description)||void 0===n?void 0:n.trim())||"";case"department":return e.department.name;case"category":return e.category.name;case"paymentMethod":return e.paymentMethod.name;case"source":switch(e.source.__typename){case"Person":return[e.source.name.first,e.source.name.last];case"Business":return e.source.bizName;case"Department":return e.source.deptName}break;default:return""}}}).search(u).map((function(e){return e.item})):He,d=[],s={$and:[]},!(a.length>0)){e.next=26;break}for(m=s.$and,p=!0,f=!1,b=void 0,e.prev=10,v=a[Symbol.iterator]();!(p=(y=v.next()).done);p=!0)E=y.value,Object.keys(E.value).length>0&&m.push(E.value);e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),f=!0,b=e.t0;case 18:e.prev=18,e.prev=19,p||null==v.return||v.return();case 21:if(e.prev=21,!f){e.next=24;break}throw b;case 24:return e.finish(21);case 25:return e.finish(18);case 26:if(s.$and.length>0&&d.push({$addFields:{_dateStr_:"$date",date:{$expressionCb:function(e){return Object(me.a)(new Date(e.date))}},_totalRational_:"$total",total:{$expressionCb:function(e){return _t(e.total).valueOf()}}}},{$match:s},{$addFields:{date:"$_dateStr_",total:"$_totalRational_"}},{$project:{_dateStr_:!1,_totalRational_:!1}}),O={data:[],raw:[]},!o){e.next=49;break}h=o.field,e.t1=h,e.next="date"===e.t1?33:"total"===e.t1?35:"reconciled"===e.t1?37:"department"===e.t1?39:"category"===e.t1?41:"paymentMethod"===e.t1?43:"source"===e.t1?45:47;break;case 33:return O.data.push({$addFields:{_sortBy_:{$toDate:"$date"}}}),e.abrupt("break",48);case 35:return O.data.push({$addFields:{_sortBy_:{$expressionCb:function(e){return _t(e.total).valueOf()}}}}),e.abrupt("break",48);case 37:return O.data.push({$addFields:{_sortBy_:"$reconciled"}}),e.abrupt("break",48);case 39:return O.data.push({$addFields:{_sortBy_:"$department.name"}}),e.abrupt("break",48);case 41:return O.data.push({$addFields:{_sortBy_:"$category.name"}}),e.abrupt("break",48);case 43:return O.data.push({$addFields:{_sortBy_:"$paymentMethod.name"}}),e.abrupt("break",48);case 45:return O.data.push({$addFields:{_sortBy_:{$cond:{if:{$eq:[{$ifNull:["$source.name.first",null]},null]},then:"$source.name",else:{$concat:["$source.name.first"," ","$source.name.last"]}}}}}),e.abrupt("break",48);case 47:O.data.push({$addFields:{_sortBy_:{$toDate:"$date"}}});case 48:O.data.push({$sort:{_sortBy_:"asc"===i?1:-1}},{$project:{_sortBy_:!1}});case 49:return O.data.push({$skip:r*l},{$limit:l}),d.push({$facet:O}),j=new be.a(d).run(c),C=Object(U.a)(j,1),R=C[0],M=R.data.map((function(e){return at.has(e.id)?Object(W.a)({},e,{tableData:{showDetailPanel:at.get(e.id)}}):e})),k=R.raw,function(){var e=new Map(at);at.clear();var t=!0,n=!1,a=void 0;try{for(var r,l=k[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value.id;e.has(o)&&at.set(o,e.get(o))}}catch(i){n=!0,a=i}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}}(),_=k.length,w=k.reduce((function(e,t){return t.type===g.Credit?e.add(_t(t.total)):e.sub(_t(t.total))}),new fe.a(0)),0!==ut.compare(w)&&ct(w),e.abrupt("return",{data:M,page:r,totalCount:_});case 59:case"end":return e.stop()}}),e,null,[[10,14,18,26],[19,,21,25]])})));return function(t){return e.apply(this,arguments)}}(),[ut,He,at]);return Object(a.useEffect)((function(){st.current&&st.current.onQueryChange(null)}),[st,He]),r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{icons:ze,isLoading:Ge||Fe||Le,columns:Ze,data:mt,options:tt,localization:et,actions:nt,components:rt,title:dt,detailPanel:lt,tableRef:st}),r.a.createElement(ra,{deptId:o,open:m,onClose:f}),r.a.createElement(pa,{entryId:j,open:y,onClose:R,onExited:M}),r.a.createElement(va,{entryId:w,onClose:S}),r.a.createElement(mn,{entryId:P,open:T,onClose:B,onExited:K}),r.a.createElement(hn,{entryId:null!==(t=null===je||void 0===je?void 0:je.entryId)&&void 0!==t?t:null,refundId:null!==(n=null===je||void 0===je?void 0:je.refundId)&&void 0!==n?n:null,open:ye,onClose:Ce,onExited:Re}),r.a.createElement(Oa,{refundId:_e,onClose:Ie}))},kr=n(5816),_r=n(423),wr=n.n(_r),Ir=n(425),Sr=n.n(Ir),xr=n(427),Ar=n.n(xr),Tr=n(426),Dr=n.n(Tr),Fr=n(5813),$r=n(5815),Pr=n(5814),Nr=n(170),Lr=n(166);function qr(){var e=Object(b.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return qr=function(){return e},e}function Ur(){var e=Object(b.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return Ur=function(){return e},e}function Br(){var e=Object(b.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return Br=function(){return e},e}function Jr(){var e=Object(b.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      n\n      d\n      s\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        n\n        d\n        s\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n"]);return Jr=function(){return e},e}function Wr(){var e=Object(b.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        n\n        d\n        s\n      }\n    }\n  }\n"]);return Wr=function(){return e},e}var Vr=y()(Wr()),Gr=y()(Jr()),zr=y()(Br(),Vr,Gr);y()(Ur(),Gr),y()(qr(),Gr);function Kr(){var e=Object(b.a)(["\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Kr=function(){return e},e}function Xr(){var e=Object(b.a)(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Xr=function(){return e},e}var Qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?ue.a[t]:e<.9?Nr.a[t]:ce.a[t]},Hr=function(e){var t=e.spentPercentage,n=e.height;return r.a.createElement(ae.a,{height:n,bgcolor:Qr(t),display:"flex",justifyContent:"flex-start"},r.a.createElement(ae.a,{height:"100%",width:"".concat(100*t,"%"),bgcolor:Lr.a[400]}))},Yr=(y()(Xr(),Bt),y()(Kr(),Gr)),Zr=function(e){var t,n=e.deptId,l=Object(a.useState)(!1),o=Object(U.a)(l,2),i=o[0],u=o[1],d=Object(a.useCallback)((function(){u(!1)}),[u]),s=Object(a.useMemo)((function(){return{deptId:n,where:{department:{eq:n,matchDecedentTree:!0},deleted:!1}}}),[n]),m=Object(z.c)(zr,{variables:s,fetchPolicy:"cache-and-network"}),p=m.loading,f=m.error,b=m.data,v=m.subscribeToMore,y=p&&!(null===b||void 0===b?void 0:b.journalEntries);Object(a.useEffect)((function(){return v({document:Yr,updateQuery:function(e,t){var a=t.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(n&&r.department.id!==n&&l.every((function(e){return e.id!==n}))){var o=e.journalEntries.filter((function(e){return e.id!==r.id}));return o.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:o})}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(Object(q.a)(e.journalEntries))})}})}),[n,v]);var E=Object(a.useMemo)((function(){return((null===b||void 0===b?void 0:b.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[b]),O=(null===b||void 0===b||null===(t=b.department)||void 0===t?void 0:t.name)||"";Object(a.useEffect)((function(){document.title=O}),[O]);var h=(null===b||void 0===b?void 0:b.department)||null,j=Object(a.useMemo)((function(){var e=new Map,t=new fe.a(0);if(h){var n=h.budget?_t(h.budget.amount):null;e.set(h.id,{name:h.name,spent:new fe.a(0),budget:n});var a=!0,r=!1,l=void 0;try{for(var o,i=h.descendants[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value,c=null;if(u.budget){var d=_t(u.budget.amount);t=t.add(d),c=d}e.set(u.id,{name:u.name,spent:new fe.a(0),budget:c})}}catch(S){r=!0,l=S}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}}var s=new fe.a(0),m=!0,p=!1,f=void 0;try{for(var b,v=E[Symbol.iterator]();!(m=(b=v.next()).done);m=!0){var y=b.value;if(!y.deleted){var O=e.get(y.department.id),j=_t(y.total),C=!0,R=!1,M=void 0;try{for(var k,_=y.refunds[Symbol.iterator]();!(C=(k=_.next()).done);C=!0){var w=k.value;w.deleted||(j=j.sub(_t(w.total)))}}catch(S){R=!0,M=S}finally{try{C||null==_.return||_.return()}finally{if(R)throw M}}y.type===g.Credit?(s=s.sub(j),O.spent=O.spent.sub(j)):(s=s.add(j),O.spent=O.spent.add(j))}}}catch(S){p=!0,f=S}finally{try{m||null==v.return||v.return()}finally{if(p)throw f}}var I=(null===h||void 0===h?void 0:h.budget)?_t(h.budget.amount):t;return{totalRemaining:X()(I.sub(s).valueOf()).format("$0,0.00"),budget:X()(I.valueOf()).format("$0,0.00"),spentToBudgetRatio:0===I.n?new fe.a(1):s.div(I),deptReport:e}}),[E,h]),C=j.totalRemaining,R=j.budget,M=j.spentToBudgetRatio,k=j.deptReport,_=Object(a.useMemo)((function(){var e=[],t=!0,n=!1,a=void 0;try{for(var l,o=function(){var t=Object(U.a)(l.value,2),n=t[0],a=t[1],o=a.budget,i=a.spent,u=a.name;if(n===(null===h||void 0===h?void 0:h.id))return"continue";var c=r.a.createElement(et.a,{key:n,item:!0,xs:12,md:4,lg:3},r.a.createElement(Fr.a,null,r.a.createElement($r.a,{titleTypographyProps:{noWrap:!0},title:u}),r.a.createElement(Pr.a,null,function(){if(null===o)return r.a.createElement(ae.a,{color:i.compare(new fe.a(0))>0?ce.a[900]:ue.a[900],clone:!0},r.a.createElement(ie.a,{variant:"h6"},"Spent: ".concat(X()(i.abs().valueOf()).format("$0,0.00"))));var e=o.sub(i);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{color:Qr(i.div(o).valueOf(),900),clone:!0},r.a.createElement(ie.a,{variant:"h6"},"".concat(X()(e.valueOf()).format("$0,0.00")," Remaining"))),r.a.createElement(ie.a,{variant:"body1"},"of ".concat(X()(o.valueOf()).format("$0,0.00"))),r.a.createElement(Hr,{spentPercentage:i.div(o).valueOf(),height:5}))}())));e.push(c)},i=k[Symbol.iterator]();!(t=(l=i.next()).done);t=!0)o()}catch(u){n=!0,a=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}return e}),[k,h]),w=Object(a.useCallback)((function(e){return u(!0)}),[u]);return y?r.a.createElement("p",null,"Loading..."):f?(console.error(f),r.a.createElement("p",null,f.message)):r.a.createElement(ae.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(kr.a,null,r.a.createElement(ae.a,{padding:8},r.a.createElement(et.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(et.a,{item:!0},r.a.createElement(nt.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(wr.a,null),children:"New Entry",onClick:w})),r.a.createElement(et.a,{item:!0},r.a.createElement(nt.a,{component:c.b,to:"/journal/".concat(n,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Sr.a,null),children:"Reconcile"})),r.a.createElement(et.a,{item:!0},r.a.createElement(nt.a,{variant:"contained",startIcon:r.a.createElement(Dr.a,null),children:"Reports"})),r.a.createElement(et.a,{item:!0},r.a.createElement(nt.a,{component:c.b,to:"/journal/".concat(n),variant:"contained",startIcon:r.a.createElement(Ar.a,null),children:"Journal"})))),r.a.createElement(ae.a,{flexGrow:1,overflow:"auto"},r.a.createElement(et.a,{justify:"center",container:!0,spacing:2},r.a.createElement(et.a,{item:!0,xs:12},r.a.createElement(ie.a,{align:"center",variant:"h3"},O),r.a.createElement(ae.a,{color:Qr(M.valueOf())},r.a.createElement(ie.a,{align:"center",variant:"h4"},"".concat(C," Remaining"))),r.a.createElement(ie.a,{align:"center",variant:"subtitle1"},"of ".concat(R)),r.a.createElement(Hr,{spentPercentage:M.valueOf(),height:10})),_)),r.a.createElement(ra,{deptId:n,open:i,onClose:d})))},el=n(305);function tl(){var e=Object(b.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return tl=function(){return e},e}var nl=y()(tl()),al=function(e){var t=Object(z.c)(nl),n=t.loading,l=t.error,o=t.data,i=Object(a.useState)(null),u=Object(U.a)(i,2),d=u[0],s=u[1],m=(null===o||void 0===o?void 0:o.departments)||[],p=Object(a.useMemo)((function(){var e=[],t=new Set,n=!0,a=!1,r=void 0;try{for(var l,o=m[Symbol.iterator]();!(n=(l=o.next()).done);n=!0){var i=l.value;"Business"===i.parent.__typename&&e.push(i),i.virtualRoot&&t.add(i.id)}}catch(u){a=!0,r=u}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:t}}),[m]),f=p.rootDepts,b=p.virtualRoots,v=Object(a.useMemo)((function(){var e=[];if(d&&b.has(d)){var t=!0,n=!1,a=void 0;try{for(var r,l=m[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){var o=r.value;o.parent.id===d&&e.push(o)}}catch(i){n=!0,a=i}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}}return e}),[b,d,m]);Object(a.useEffect)((function(){document.title="Select Department"}));var y=Object(a.useCallback)((function(e){var t;s((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||null)}),[s]);if(n)return r.a.createElement("p",null,"Loading...");if(l)return r.a.createElement("p",null,l.message);var E=v.length>0;return r.a.createElement(ae.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(kr.a,null,r.a.createElement(ae.a,{padding:4,clone:!0},r.a.createElement(ie.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(ae.a,{minWidth:"250px !important",clone:!0},r.a.createElement(Xn.a,{variant:"filled"},r.a.createElement(el.a,null,"Department"),r.a.createElement(za.a,{value:d,onChange:y,autoWidth:!0},f.map((function(e){var t={component:c.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete t.component,delete t.to),r.a.createElement(Ka.a,t)}))))),E&&r.a.createElement(ae.a,{pt:2},r.a.createElement(ae.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(Xn.a,{variant:"filled"},r.a.createElement(el.a,null,"Sub Department"),r.a.createElement(za.a,{autoWidth:!0},v.map((function(e){var t={component:c.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(Ka.a,t)}))))))))};function rl(){var e=Object(b.a)(["\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n"]);return rl=function(){return e},e}var ll=function(e){var t=Object(N.f)().id;return t?r.a.createElement(Zr,{deptId:t}):r.a.createElement("div",null,"Error: No Dept ID!")},ol=y()(rl()),il=function(e){var t,n=Object(N.f)().id,a=Object(z.c)(ol,{variables:{id:n}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(t=l.department)||void 0===t?void 0:t.name)?l.department.name:void 0;return r.a.createElement(Mr,{mode:pr.View,deptId:n,journalTitle:o})},ul=function(e){var t,n=Object(N.f)().id,a=Object(z.c)(ol,{variables:{id:n}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(t=l.department)||void 0===t?void 0:t.name)?"Reconcile ".concat(l.department.name):"Reconcile";return r.a.createElement(Mr,{mode:pr.Reconcile,deptId:n,journalTitle:o})},cl=function(e){return r.a.createElement(N.c,null,r.a.createElement(N.a,{exact:!0,path:"/",component:al}),r.a.createElement(N.a,{exact:!0,path:"/department/:id",component:ll}),r.a.createElement(N.a,{exact:!0,path:"/journal",component:Mr}),r.a.createElement(N.a,{exact:!0,path:"/journal/:id",component:il}),r.a.createElement(N.a,{exact:!0,path:"/journal/:id/reconcile",component:ul}))};function dl(){return r.a.createElement(a.Fragment,null,r.a.createElement(u.a,null),r.a.createElement(i.a,{client:P},r.a.createElement(c.a,null,r.a.createElement(cl,null))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(dl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5673,1,2]]]);
//# sourceMappingURL=main.cad3c0f2.chunk.js.map