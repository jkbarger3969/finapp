(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{146:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5189:function(e,t,n){e.exports=n(5213)},5213:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(24),i=n.n(o),l=n(17),u=n(37),c=n(5292),d=n(5293),s=n(62),p=n(75),m=n(7),v=n(130),f=n(146),y=new v.b({introspectionQueryResultData:f}),b=new v.a({fragmentMatcher:y,addTypename:!1});b.writeData({data:Object(m.a)({},{paginate:{skip:0,limit:1e3},sortBy:[],upsertTransactionLocal:null,lc_journalEntryUpserts:[]})});var E=b,j=n(10),h=n(11),O=n.n(h);function g(){var e=Object(j.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return g=function(){return e},e}var w,_=[O()(g())],x={},S=n(166),C=n(148),D=n(31),T=n(149),I=n(85),R=new S.a({uri:"/graphql",credentials:"same-origin"}),U=new C.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),k=D.a.from([Object(T.a)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))})),n&&console.log("[Network error]: ".concat(n))})),D.a.split((function(e){var t=e.query,n=Object(I.a)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),U,R)]),A=new p.a({link:k,cache:E,typeDefs:_,resolvers:x}),P=n(74),M=n(19),N=n(5290),B=n(150),F=n(56),L=n(5291),V=n(5282),J=n(23),$=n(5263),q=n(5264),G=n(5261),z=(n(140),n(5207)),W=z(window.location.hostname,z.DNS),Y=n(42),Q=n(151),H=n(152),X=n(29),K=n(97),Z=n.n(K),ee="journalEntryUpsert/CREATE",te="journalEntryUpsert/CANCEL",ne="journalEntryUpsert/CLEAR",ae="journalEntryUpsert/SUBMIT",re="journalEntryUpsert/SET_SUBMIT_ERROR",oe="journalEntryUpsert/CLEAR_SUBMIT_ERROR",ie="journalEntryUpsert/SET_DATE_INPUT",le="journalEntryUpsert/CLEAR_DATE_INPUT",ue="journalEntryUpsert/SET_DATE_VALUE",ce="journalEntryUpsert/CLEAR_DATE_VALUE",de="journalEntryUpsert/SET_DATE_ERROR",se="journalEntryUpsert/CLEAR_DATE_ERROR",pe="journalEntryUpsert/SET_DEPT_INPUT",me="journalEntryUpsert/CLEAR_DEPT_INPUT",ve="journalEntryUpsert/SET_DEPT_VALUE",fe="journalEntryUpsert/CLEAR_DEPT_VALUE",ye="journalEntryUpsert/SET_DEPT_ERROR",be="journalEntryUpsert/CLEAR_DEPT_ERROR",Ee="journalEntryUpsert/SET_DEPT_OPEN",je="journalEntryUpsert/SET_TYPE_VALUE",he="journalEntryUpsert/SET_TYPE_ERROR",Oe="journalEntryUpsert/CLEAR_TYPE_ERROR",ge="journalEntryUpsert/SET_CAT_INPUT",we="journalEntryUpsert/CLEAR_CAT_INPUT",_e="journalEntryUpsert/SET_CAT_VALUE",xe="journalEntryUpsert/CLEAR_CAT_VALUE",Se="journalEntryUpsert/SET_CAT_ERROR",Ce="journalEntryUpsert/CLEAR_CAT_ERROR",De="journalEntryUpsert/SET_CAT_OPEN",Te="journalEntryUpsert/SET_SRC_TYPE",Ie="journalEntryUpsert/SET_SRC_INPUT",Re="journalEntryUpsert/CLEAR_SRC_INPUT",Ue="journalEntryUpsert/SET_SRC_VALUE",ke="journalEntryUpsert/CLEAR_SRC_VALUE",Ae="journalEntryUpsert/SET_SRC_ERROR",Pe="journalEntryUpsert/CLEAR_SRC_ERROR",Me="journalEntryUpsert/SET_SRC_OPEN",Ne="journalEntryUpsert/SET_PAY_METHOD_VALUE",Be="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Fe="journalEntryUpsert/SET_PAY_METHOD_ERROR",Le="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Ve="journalEntryUpsert/SET_DSCRPT_VALUE",Je="journalEntryUpsert/CLEAR_DSCRPT_VALUE",$e="journalEntryUpsert/SET_TOTAL_INPUT",qe="journalEntryUpsert/CLEAR_TOTAL_INPUT",Ge="journalEntryUpsert/SET_TOTAL_VALUE",ze="journalEntryUpsert/CLEAR_TOTAL_VALUE",We="journalEntryUpsert/SET_TOTAL_ERROR",Ye="journalEntryUpsert/CLEAR_TOTAL_ERROR",Qe="journalEntryUpsert/SET_RECONCILED_VALUE",He="journalEntryUpsert/CLEAR_RECONCILED_VALUE",Xe=n(104),Ke=function e(t){Object(Xe.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=t},Ze=function(e,t,n,a,r){for(var o=0,i=e.length;o<i;o++){var l=e[o];if(l[a]===n){var u=r(l,t);return u!==l?[].concat(Object(X.a)(e.slice(0,o)),[u],Object(X.a)(e.slice(o+1))):e}}return e},et=Object(Y.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===ee?t.payload.entryId||null:e},type:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ke(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case je:return t.value===n.payload.type?t:Object(m.a)({},t,{value:n.payload.type});case he:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Oe:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},date:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ke(null),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case ie:var r=a.payload.input.trimStart();return n.input===r?n:Object(m.a)({},n,{input:r});case le:return""===n.input?n:Object(m.a)({},n,{input:""});case ue:return(null===(e=n.value)||void 0===e?void 0:e.getTime())===a.payload.value.getTime()?n:Object(m.a)({},n,{value:a.payload.value});case ce:return n.value?Object(m.a)({},n,{value:null}):n;case de:return(null===(t=n.error)||void 0===t?void 0:t.message)===a.payload.error.message?n:Object(m.a)({},n,{error:a.payload.error});case se:return n.error?Object(m.a)({},n,{error:null}):n;default:return n}},department:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ke(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ee:return n.payload.fromDept?Object(m.a)({},t,{value:n.payload.fromDept}):t;case pe:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case me:return""===t.input?t:Object(m.a)({},t,{input:""});case ve:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case fe:return t.value?Object(m.a)({},t,{value:null}):t;case ye:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case be:return t.error?Object(m.a)({},t,{error:null}):t;case Ee:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},category:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ke(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ge:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case we:return""===t.input?t:Object(m.a)({},t,{input:""});case _e:return t.value===n.payload.value?t:Object(m.a)({},t,{value:n.payload.value});case xe:return t.value?Object(m.a)({},t,{value:null}):t;case Se:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Ce:return t.error?Object(m.a)({},t,{error:null}):t;case De:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return t.type===Te?t.payload.srcType:e},source:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ke(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ie:var a=n.payload.input.trimStart();return t.input===a?t:Object(m.a)({},t,{input:a});case Re:return""===t.input?t:Object(m.a)({},t,{input:""});case Ue:return Z()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case ke:return t.value?Object(m.a)({},t,{value:null}):t;case Ae:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Pe:return t.error?Object(m.a)({},t,{error:null}):t;case Me:var r=n.payload.open;return r===t.open?t:Object(m.a)({},t,{open:r});default:return t}},paymentMethod:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ke(null),{open:!1}),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ne:return n.payload.value&&t.value!==n.payload.value?Object(m.a)({},t,{value:n.payload.value}):t;case Be:return null===t.value?t:Object(m.a)({},t,{value:null});case Fe:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Le:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ke(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:var n=t.payload.value.trimStart();return n&&e.value!==n?Object(m.a)({},e,{value:n}):e;case Je:return null===e.value?e:Object(m.a)({},e,{value:null});default:return e}},total:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ke(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case $e:return t.input===n.payload.input?t:Object(m.a)({},t,{input:n.payload.input});case qe:return""===t.input?t:Object(m.a)({},t,{input:""});case Ge:return Z()(t.value,n.payload.value)?t:Object(m.a)({},t,{value:n.payload.value});case ze:return null===t.value?t:Object(m.a)({},t,{value:null});case We:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case Ye:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ke(!1),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qe:return e.value===t.payload.value?e:Object(m.a)({},e,{value:t.payload.value});case He:return!1===e.value?e:Object(m.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(w||(w={}));var tt=Object(Y.combineReducers)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===ee?t.payload.upsertId:e},values:et,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===ee&&t.payload.fromDept?t.payload.fromDept:e},submit:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:w.NotSubmitted,error:null},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case ae:return t.status===n.payload.status?t:Object(m.a)({},t,{status:n.payload.status});case re:return(null===(e=t.error)||void 0===e?void 0:e.message)===n.payload.error.message?t:Object(m.a)({},t,{error:n.payload.error});case oe:return null===t.error?t:Object(m.a)({},t,{error:null});default:return t}}}),nt=n(54),at=n(15),rt=n.n(at),ot="tableCells/SET_INDEX",it="tableCells/SET_DEFAULT_INDEX",lt="tableCells/SET_NAME",ut="tableCells/SET_DEFAULT_NAME",ct="tableCells/SET_WIDTH",dt="tableCells/SET_DEFAULT_WIDTH",st="tableCells/COLLAPSE",pt="tableCells/EXPAND",mt="tableCells/HIDE",vt="tableCells/SHOW",ft="tableCells/RESTORE_DEFAULTS",yt=function e(t){var n,a;Object(Xe.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(m.a)({},t),this.rowId=t.rowId,this.id=t.id,this.index=t.index,this.name=t.name,this.width=t.width,this.collapsed=null!==(n=null===t||void 0===t?void 0:t.collapsed)&&void 0!==n&&n,this.hidden=null!==(a=null===t||void 0===t?void 0:t.hidden)&&void 0!==a&&a},bt=function(e,t){switch(t.type){case ot:return e.index===t.payload.index?e:Object(m.a)({},e,{index:t.payload.index});case it:return e.index===e.ini.index?e:Object(m.a)({},e,{index:e.ini.index});case lt:return e.name===t.payload.name?e:Object(m.a)({},e,{name:t.payload.name});case ut:return e.name===e.ini.name?e:Object(m.a)({},e,{name:e.ini.name});case ct:return e.width===t.payload.width?e:Object(m.a)({},e,{width:t.payload.width});case dt:return e.width===e.ini.width?e:Object(m.a)({},e,{width:e.ini.width});case st:return!0===e.collapsed?e:Object(m.a)({},e,{collapsed:!0});case pt:return!1===e.collapsed?e:Object(m.a)({},e,{collapsed:!1});case mt:return!0===e.hidden?e:Object(m.a)({},e,{hidden:!0});case vt:return!1===e.hidden?e:Object(m.a)({},e,{hidden:!1});case ft:var n=new yt(e.ini);return Z()(e,n)?e:n;default:return e}},Et=rt.a.mark((function e(t){var n,a,r,o,i,l,u;return rt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=new Map,r=0,e.t0=rt.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(o=e.t1.value,!t.hasOwnProperty(o)){e.next=24;break}if(i=t[o],l=i.index,null!==(u=void 0===l?null:l)){e.next=13;break}return e.abrupt("continue",4);case 13:if(r!==u){e.next=23;break}return e.next=16,i;case 16:if(!a.has(++r)){e.next=21;break}return e.next=19,a.get(r);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?a.set(u,i):n.push(i);case 24:e.next=4;break;case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e)})),jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":return t.payload.id in e?e:Object(m.a)({},e,Object(nt.a)({},t.payload.id,new yt(t.payload)));case ot:var n=e[t.payload.id].index,a=t.payload.index;if(n===a)return e;if(n<a){var r={},o=!0,i=!1,l=void 0;try{for(var u,c=Et(e)[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(d.index>a)break;d.index<n||(d.index===n?r[d.id]=bt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:a})})):r[d.id]=bt(d,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:d.index-1})})))}}catch(D){i=!0,l=D}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return Object(m.a)({},e,{},r)}var s={},p=!0,v=!1,f=void 0;try{for(var y,b=Et(e)[Symbol.iterator]();!(p=(y=b.next()).done);p=!0){var E=y.value;if(E.index>n)break;E.index<a||(E.index===n?s[E.id]=bt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:a})})):s[E.id]=bt(E,Object(m.a)({},t,{payload:Object(m.a)({},t.payload,{index:E.index+1})})))}}catch(D){v=!0,f=D}finally{try{p||null==b.return||b.return()}finally{if(v)throw f}}return Object(m.a)({},e,{},s);case it:var j={},h=!0,O=!1,g=void 0;try{for(var w,_=Et(e)[Symbol.iterator]();!(h=(w=_.next()).done);h=!0){var x=w.value;j[x.id]=bt(x,t)}}catch(D){O=!0,g=D}finally{try{h||null==_.return||_.return()}finally{if(O)throw g}}return Object(m.a)({},e,{},j);case lt:case ut:case ct:case dt:case st:case pt:case mt:case vt:case ft:if(t.payload.id in e){var S=e[t.payload.id],C=bt(S,t);return C===S?e:Object(m.a)({},e,Object(nt.a)({},t.payload.id,C))}return e;default:return e}},ht="journal/OPEN_PAB",Ot="journal/CLOSE_PAB",gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return!0===e.open?e:Object(m.a)({},e,{open:!0});case Ot:return!1===e.open?e:Object(m.a)({},e,{open:!1});default:return e}},wt=Object(Y.combineReducers)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journal/CREATE_PAB":return t.payload.pabId in e?e:Object(m.a)({},e,Object(nt.a)({},t.payload.pabId,gt(void 0,t)));case ht:case Ot:if(t.payload.pabId in e){var n=t.payload.pabId,a=e[n],r=gt(a,t);return a===r?e:Object(m.a)({},e,Object(nt.a)({},n,r))}return e;default:return e}}}),_t=Object(Y.combineReducers)({journal:wt,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return[].concat(Object(X.a)(e),[tt(void 0,t)]);case te:case ne:for(var n=t.payload.upsertId,a=0,r=e.length;a<r;a++)if(e[a].id===n)return[].concat(Object(X.a)(e.slice(0,a)),Object(X.a)(e.slice(a+1)));return e;case je:case he:case Oe:case ie:case le:case ue:case ce:case de:case se:case pe:case ve:case ye:case Ee:case me:case fe:case be:case ge:case we:case _e:case xe:case Se:case Ce:case De:case Te:case Ie:case Re:case Ue:case ke:case Ae:case Pe:case Me:case Ne:case Be:case Ve:case Je:case $e:case qe:case Ge:case ze:case We:case Ye:case ae:case re:case oe:case Fe:case Le:case Qe:case He:return Ze(e,t,t.payload.upsertId,"id",tt);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"tableCells/CREATE":var n=t.payload.rowId;if(n in e){var a=e[n],r=jt(a,t);return a===r?e:Object(m.a)({},e,Object(nt.a)({},n,r))}return Object(m.a)({},e,Object(nt.a)({},n,jt(void 0,t)));case ot:case it:case lt:case ut:case ct:case dt:case st:case pt:case mt:case vt:case ft:var o=t.payload.rowId;if(o in e){var i=e[o],l=jt(i,t);return i===l?e:Object(m.a)({},e,Object(nt.a)({},o,l))}return e;default:return e}}}),xt=Object(Y.createStore)(_t,Object(Q.composeWithDevTools)(Object(Y.applyMiddleware)(H.a))),St=function(e){return{type:"tableCells/CREATE",payload:e}},Ct=z("Journal",W),Dt=z("journal/date",W);xt.dispatch(St({rowId:Ct,id:Dt,index:1,name:"Date",width:185}));var Tt=z("journal/department",W);xt.dispatch(St({rowId:Ct,id:Tt,index:7,name:"Department",width:380}));var It=z("journal/category",W);xt.dispatch(St({rowId:Ct,id:It,index:3,name:"Category",width:380}));var Rt=z("journal/source",W);xt.dispatch(St({rowId:Ct,id:Rt,index:4,name:"Source",width:380}));var Ut=z("journal/paymentMethod",W);xt.dispatch(St({rowId:Ct,id:Ut,index:5,name:"Payment Method",width:175}));var kt=z("journal/description",W);xt.dispatch(St({rowId:Ct,id:kt,index:6,name:"Description",width:380}));var At=z("journal/total",W);xt.dispatch(St({rowId:Ct,id:At,index:2,name:"Total",width:130}));var Pt=z("journal/reconciled",W);xt.dispatch(St({rowId:Ct,id:Pt,index:0,name:"Reconciled",width:105}));var Mt=function(e,t){if(t in e.tableRows){var n=e.tableRows[t];return Object(X.a)(Et(n))}return[]},Nt=function(e,t,n){return t in e.tableRows&&n in e.tableRows[t]?e.tableRows[t][n]:null},Bt=function(e){var t=Object(l.e)((function(e){return Mt(e,Ct)}),l.c),n=Object(a.useMemo)((function(){return t.map((function(e,t){var n=e.name,a=e.width,o=e.index;return r.a.createElement(d.a,{key:"".concat(n,"_").concat(t),minWidth:a,flexBasis:a,flexGrow:a,order:o,clone:!0},r.a.createElement(G.a,{component:"div",children:n}))}))}),[t]);return r.a.createElement($.a,{component:"div"},r.a.createElement(d.a,{display:"flex !important",flexDirection:"row",justifyContent:"flex-start",clone:!0},r.a.createElement(q.a,{component:"div"},n)))},Ft=n(5268),Lt=n(167),Vt=n(5267),Jt=n(5266),$t=n(5300),qt=n(116),Gt=n(114),zt=n(58),Wt=n.n(zt),Yt=function(e){var t=e.entryDate,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,Dt)})),o=Wt()(t);return r.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},o.format("MMM DD, YYYY")))},Qt=n(5297),Ht=function(e){var t=e.department,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,Tt)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},Object(Qt.a)(t.name)))},Xt=function(e){var t=e.category,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,It)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},Object(Qt.a)(t.name)))},Kt=function(e){var t=e.source,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,Rt)})),o="";switch(t.__typename){case"Person":o="".concat(t.name.first," ").concat(t.name.last);break;case"Business":o=t.bizName;break;case"Department":o=t.deptName}return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},o))},Zt=function(e){var t=e.paymentMethod,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,Ut)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},Object(Qt.a)(t.method)))},en=function(e){var t=e.description,n=e.textColor,a=Object(l.e)((function(e){return Nt(e,Ct,kt)}));return r.a.createElement(d.a,{className:n,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:a.width,flexBasis:a.width,flexGrow:a.width,order:a.index>-1?a.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},t))},tn=n(76),nn=n.n(tn),an=n(80),rn=n.n(an),on=function(e){var t=e.total,n=t.num,a=t.den,o=e.textColor,i=new rn.a({n:n,d:a}),u=Object(l.e)((function(e){return Nt(e,Ct,At)}));return r.a.createElement(d.a,{className:o,display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:u.width,flexBasis:u.width,flexGrow:u.width,order:u.index>-1?u.index:void 0,clone:!0},r.a.createElement(G.a,{component:"div"},nn()(i.toString()).format("$0,0.00")))},ln=n(156),un=n.n(ln),cn=n(5296);function dn(){var e=Object(j.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return dn=function(){return e},e}function sn(){var e=Object(j.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return sn=function(){return e},e}function pn(){var e=Object(j.a)(['\n  query JournalEntries_1($where:JournalEntiresWhereInput!) \n  {\n    journalEntries(where:$where)\n      @connection(key:"JournalEntries_1", filter:["where"]) \n    {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return pn=function(){return e},e}function mn(){var e=Object(j.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n"]);return mn=function(){return e},e}var vn=O()(mn()),fn=O()(pn(),vn),yn=O()(sn(),vn),bn=O()(dn(),vn);function En(){var e=Object(j.a)(["\n  mutation Reconcile_1($id:ID!) {\n    journalEntryUpdate(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return En=function(){return e},e}var jn,hn,On,gn,wn,_n,xn,Sn=O()(En(),vn),Cn=function(e){var t=e.reconciled,n=e.textColor,o=e.mode,i=e.entryId,u=e.removeReconciled,c=Object(a.useState)(!1),s=Object(M.a)(c,2),p=s[0],m=s[1],v=Object(J.b)(Sn),f=Object(M.a)(v,1)[0],y=Object(l.e)((function(e){return Nt(e,Ct,Pt)})),b=Object(a.useCallback)((function(e){return rt.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,rt.a.awrap(f({variables:{id:i}}));case 6:u(i),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),m(!1);case 12:case"end":return e.stop()}}),null,null,[[3,9]])}),[m,f,i,u,p]),E={checked:p,name:"reconciled",onChange:b,inputProps:Object(a.useMemo)((function(){return{type:"checkbox"}}),[])};return r.a.createElement(d.a,{className:n,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",minWidth:y.width,flexBasis:y.width,flexGrow:y.width,order:y.index>-1?y.index:void 0,display:"flex !important",justifyContent:"center",alignItems:"center",clone:!0},r.a.createElement(G.a,{component:"div"},t?r.a.createElement(un.a,null):o===In.Reconcile?r.a.createElement(cn.a,E):null))};!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(jn||(jn={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(hn||(hn={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(On||(On={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(gn||(gn={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(wn||(wn={})),function(e){e.Update="UPDATE",e.Add="ADD"}(_n||(_n={})),function(e){e.Asc="ASC",e.Desc="DESC"}(xn||(xn={}));var Dn={dispatchId:null,dispatchQueue:new Map,ms:5};function Tn(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=Object(l.d)(),r=Object(a.useMemo)((function(){return e?Dn:{dispatchId:null,dispatchQueue:new Map,ms:t}}),[e,t]),o=Object(a.useCallback)((function(e){n((function(t){var n,a=r.dispatchQueue;null===r.dispatchId&&(r.dispatchId=setTimeout((function(){r.dispatchId=null,Object(l.b)((function(){var e=!0,t=!1,n=void 0;try{for(var r,o=a.values()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value,l=Object(M.a)(i,2),u=l[0];(0,l[1])(u)}}catch(c){t=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}})),a.clear()}),r.ms));var o="function"===typeof e?Symbol():null===(n=e)||void 0===n?void 0:n.type;a.set(o,[e,t])}))}),[r,n]);return o}var In,Rn=Object(Jt.a)((function(e){return Object($t.a)({positive:{color:qt.a[900]},negative:{color:Gt.a[900]}})})),Un=function(e){var t=Rn(),n=Tn(),o=Object(J.a)(),i=e.journalEntry,l=void 0===i?null:i,u=e.style,c=e.deptId,s=e.mode,p=e.updateEntry,m=e.removeReconciled,v=Object(a.useCallback)((function(e){l&&p(l.id)}),[l,n,c,o,p]);if(null===l){var f=r.a.createElement(Vt.a,{variant:"rect",height:20});return r.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},r.a.createElement(q.a,{component:"div"},r.a.createElement(d.a,{flexGrow:1,clone:!0},r.a.createElement(G.a,{component:"div",children:f}))))}var y=l.category.type===gn.Credit?t.positive:t.negative;return r.a.createElement(d.a,{style:u,display:"flex !important",clone:!0},r.a.createElement(q.a,{onDoubleClick:v,component:"div",hover:!0},r.a.createElement(Yt,{textColor:y,entryDate:l.date}),r.a.createElement(Ht,{textColor:y,department:l.department}),r.a.createElement(Xt,{textColor:y,category:l.category}),r.a.createElement(Kt,{textColor:y,source:l.source}),r.a.createElement(Zt,{textColor:y,paymentMethod:l.paymentMethod}),r.a.createElement(en,{textColor:y,description:l.description}),r.a.createElement(on,{textColor:y,total:l.total}),r.a.createElement(Cn,{removeReconciled:m,entryId:l.id,mode:s,textColor:y,reconciled:l.reconciled})))};!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(In||(In={}));var kn=function(e){var t,n=e.height,o=e.deptId,i=e.mode,u=e.width,c=e.updateEntry,s=Object(a.useMemo)((function(){return o?{where:{department:{eq:o}}}:void 0}),[o]),p=Object(l.e)((function(e){return Mt(e,Ct)}),l.c),v=Object(a.useMemo)((function(){var e=p.reduce((function(e,t){return e+t.width}),0);return Math.max(e,u)}),[p,u]),f=Object(J.c)(fn,{variables:s}),y=f.error,b=f.data,E=f.updateQuery,j=f.fetchMore,h=f.subscribeToMore,O=Object(J.a)();Object(a.useEffect)((function(){var e=function(){try{return O.readQuery({query:fn,variables:s})}catch(y){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();j({variables:s?Object(m.a)({},s,{where:Object(m.a)({},(null===s||void 0===s?void 0:s.where)||{},{lastUpdate:{gt:t}})}):{where:{lastUpdate:{gt:t}}},updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(X.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(X.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var n=h({document:yn,updateQuery:function(e,t){var n,a,r=t.subscriptionData,i=null===r||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:n.journalEntryAdded;return!i||i.id!==o&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==o}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(X.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(X.a)([null===r||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.journalEntryAdded]||!1))})}}),a=h({document:bn,updateQuery:function(e,t){var n,a=t.subscriptionData,r=null===a||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.journalEntryUpdated;return r&&O.writeFragment({id:"JournalEntry:".concat(r.id),fragment:vn,data:r}),e}});return function(){n(),a()}}),[s,j,O,h,o]);var g=Object(a.useCallback)((function(e){i!==In.View&&E((function(t){for(var n=t.journalEntries||[],a=0,r=n.length;a<r;a++)if(n[a].id===e)return Object(m.a)({},t,{journalEntries:[].concat(Object(X.a)(n.slice(0,a)),Object(X.a)(n.slice(a+1)))});return t}))}),[i,E]),w=Object(a.useMemo)((function(){var e=(null===b||void 0===b?void 0:b.journalEntries)||[];return i===In.Reconcile?e.filter((function(e){return!e.reconciled&&!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()})):e.filter((function(e){return!e.deleted})).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}))}),[b,i]),_=null!==(t=w.length)&&void 0!==t?t:500,x=Object(a.useCallback)((function(e){var t=e.index,n=e.style,a=w[t];return r.a.createElement(Un,{mode:i,style:n,journalEntry:a,removeReconciled:g,updateEntry:c})}),[w,i,g,c]),S=Object(a.useCallback)((function(e){var t,n;return null!==(t=null===(n=w[e])||void 0===n?void 0:n.id)&&void 0!==t?t:e}),[w]);return y?r.a.createElement("div",null,y.message):r.a.createElement(d.a,{height:n,display:"block",clone:!0},r.a.createElement(Ft.a,{component:"div"},r.a.createElement(d.a,{display:"flex",clone:!0},r.a.createElement(Lt.a,{itemKey:S,height:n,width:v,itemCount:_,itemSize:53,overscanCount:10},x))))},An=n(28),Pn=n(83),Mn=n(5276),Nn=n(5298),Bn=n(5280),Fn=n(5272),Ln=n(5273),Vn=n(5274),Jn=n(5281),$n=n(5283),qn=n(5284),Gn=n(5303),zn=n(5269),Wn=n(125),Yn=n(5270),Qn=n(5217),Hn=n(5271),Xn=n(5218),Kn=Symbol(),Zn=function(e){if((null!==e&&void 0!==e?e:Kn)===Kn)return"Type Required"},ea=function(e){var t=e.label,n=void 0!==t&&t,o=Object(An.c)().isSubmitting,i=Object(An.b)({name:"type",validate:Zn}),l=Object(M.a)(i,3),u=l[0],c=l[1],s=l[2],p=c.error,v=c.touched,f=s.setValue,y=s.setTouched,b=Object(a.useMemo)((function(){return Object(m.a)({size:"small",exclusive:!0,disabled:o},u,{onChange:function(e,t){return rt.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==t&&void 0!==t?t:Kn)!==Kn){e.next=2;break}return e.abrupt("return");case 2:return f(t),e.next=5,rt.a.awrap(new Promise((function(e){return setTimeout(e,0)})));case 5:y(!0);case 6:case"end":return e.stop()}}))}})}),[u,o,f,y]),E=Object(a.useMemo)((function(){return r.a.createElement(d.a,{pl:1,clone:!0},r.a.createElement(Gn.a,Object.assign({},e,b),r.a.createElement(zn.a,{value:gn.Credit},r.a.createElement(Yn.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(Wn.b,null))),r.a.createElement(zn.a,{value:gn.Debit},r.a.createElement(Yn.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(Wn.a,null)))))}),[b,e]);return n?r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,Object.assign({},e,{labelPlacement:"boolean"===typeof n?void 0:n,control:E,label:"Type"})),v&&!!p&&r.a.createElement(Xn.a,{error:!0},p)):r.a.createElement(Qn.a,null,E,!!p&&r.a.createElement(Xn.a,{error:!0},p))},ta=n(38),na=n(5294),aa=n(160),ra={inputMode:"numeric"},oa={tabIndex:-1},ia=function(e){return e?e.isValid()?void 0:"Invalid Date":"Date is Required"},la=function(e){var t=e.variant,n=void 0===t?"filled":t,o=e.autoFocus,i=void 0!==o&&o,l=Object(a.useRef)(!1),u=Object(An.c)().isSubmitting,c=Object(An.b)({name:"date",validate:ia}),d=Object(M.a)(c,3),s=d[0],p=d[1],v=d[2],f=(s.value,p.error),y=p.touched,b=v.setValue,E=v.setTouched,j=Object(a.useMemo)((function(){return{autoFocus:i}}),[i]),h=Object(a.useCallback)((function(){return setTimeout((function(){l.current||E(!0)}),0)}),[E,l]),O=Object(a.useCallback)((function(){return l.current=!0}),[l]),g=Object(a.useCallback)((function(){l.current=!1,h()}),[l,h]),w=Object(a.useCallback)((function(e){return b(e?Wt.a.min([e,Wt()()]):e)}),[b]),_=Object(a.useMemo)((function(){return Object(m.a)({},s,{value:s.value,disabled:u,error:y&&!!f,helperText:y?f:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:n,variant:"inline",format:"MM/DD/YYYY",margin:"none",label:"Date",initialFocusedDate:s.value||Wt()(),autoOk:!0,InputProps:j,inputProps:ra,placeholder:"mm/dd/yyyy",KeyboardButtonProps:oa,onBlur:h,onOpen:O,onClose:g,onChange:w})}),[h,f,n,j,u,s,O,g,w,y]);return r.a.createElement(ta.a,{utils:aa.a},r.a.createElement(na.a,Object.assign({},e,_)))},ua=n(39),ca=n(5295),da=n(5301),sa=n(5277),pa=n(5279);function ma(){var e=Object(j.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    method\n    active\n  }\n"]);return ma=function(){return e},e}function va(){var e=Object(j.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return va=function(){return e},e}function fa(){var e=Object(j.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return fa=function(){return e},e}function ya(){var e=Object(j.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return ya=function(){return e},e}function ba(){var e=Object(j.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n"]);return ba=function(){return e},e}function Ea(){var e=Object(j.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return Ea=function(){return e},e}var ja=O()(Ea()),ha=O()(ba()),Oa=O()(ya()),ga=O()(fa()),wa=O()(va(),ga),_a=O()(ma());function xa(){var e=Object(j.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return xa=function(){return e},e}var Sa=O()(xa(),ja),Ca=function(e){return e.name},Da=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(ua.a)(i,["key"]);return r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(da.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"medium"},u))," ",!o&&r.a.createElement(pa.a,{fontSize:"small"}))}))},Ta=function(e){var t=Object(J.c)(Sa,{variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),n=t.loading,o=t.error,i=t.data,l=(null===i||void 0===i?void 0:i.deptOpts)||[],u=Object(a.useState)(!1),c=Object(M.a)(u,2),d=c[0],s=c[1],p=Object(a.useState)(""),v=Object(M.a)(p,2),f=v[0],y=v[1],b=Object(a.useCallback)((function(e){return e?l.some((function(t){var n=t.parent;return"Department"===n.__typename&&n.id===e.id}))?"Sub-department Required":void 0:"Department Required"}),[l]),E=Object(An.b)({name:"department",validate:b}),j=Object(M.a)(E,3),h=j[0],O=j[1],g=j[2],w=h.value,_=h.onBlur,x=O.error,S=O.touched,C=g.setValue,D=Object(a.useMemo)((function(){return new Map(l.reduce((function(e,t){return e.push([t.id,t]),e}),[]))}),[l]),T=Object(a.useMemo)((function(){if(!w)return[];for(var e=[w],t=w.parent,n=t.__typename,a=t.id;"Business"!==n&&D.has(a);){var r=D.get(a);e.unshift(r);var o=r.parent;n=o.__typename,a=o.id}return e}),[w,D]),I=Object(a.useMemo)((function(){var e,t=null===(e=T[T.length-1])||void 0===e?void 0:e.id;return l.filter((function(e){return t?e.parent.id===t:"Business"===e.parent.__typename}))}),[l,T]),R=Object(a.useMemo)((function(){return T.length>0&&0===I.length}),[T,I]),U=Object(a.useCallback)((function(t){return r.a.createElement(sa.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:S&&!!x,helperText:S?x:void 0,name:"department",label:"Department",disabled:R}))}),[e,S,x,R]),k=Object(a.useCallback)((function(e){return s(!0)}),[s]),A=Object(a.useCallback)((function(e){s(!1),_(e)}),[s,_]),P=Object(a.useCallback)((function(e,t){if(t)if(Array.isArray(t)){var n=t.length;C(0===n?null:t[n-1])}else C(t);else C(null)}),[C]),N=Object(a.useCallback)((function(e,t,n){y((t||"").trimStart())}),[y]),B=Object(a.useMemo)((function(){return Object(m.a)({},h,{open:d&&I.length>0,onFocus:k,onBlur:A,options:I,renderTags:Da,forcePopupIcon:!1,disabled:n,value:T,renderInput:U,loading:n,autoSelect:!0,multiple:!0,getOptionLabel:Ca,onChange:P,onInputChange:N,inputValue:R?"":f,name:"department"})}),[R,f,N,P,T,n,U,h,d,k,A,I]);return o?r.a.createElement("pre",null,JSON.stringify(o,null,2)):r.a.createElement(ca.a,B)};function Ia(){var e=Object(j.a)(["\n  query CatEntryOpts {\n    catOpts: journalEntryCategories {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return Ia=function(){return e},e}var Ra=O()(Ia(),ha),Ua=function(e){return e.name},ka=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(ua.a)(i,["key"]);return r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(da.a,Object.assign({color:o?"primary":"default",disabled:!o,variant:o?"default":"outlined",label:e.name,size:"medium"},u))," ",!o&&r.a.createElement(pa.a,{fontSize:"small"}))}))},Aa=function(e){var t=e.entryType,n=Object(ua.a)(e,["entryType"]),o=Object(J.c)(Ra),i=o.loading,l=o.error,u=o.data,c=(null===u||void 0===u?void 0:u.catOpts)||[],d=Object(a.useState)(!1),s=Object(M.a)(d,2),p=s[0],v=s[1],f=Object(a.useState)(""),y=Object(M.a)(f,2),b=y[0],E=y[1],j=Object(a.useCallback)((function(e){return e?c.some((function(t){var n=t.parent;return(null===n||void 0===n?void 0:n.id)===e.id}))?"Sub-category Required":void 0:"Category Required"}),[c]),h=Object(An.b)({name:"category",validate:j}),O=Object(M.a)(h,3),g=O[0],w=O[1],_=O[2],x=g.value,S=g.onBlur,C=w.error,D=w.touched,T=_.setValue;Object(a.useEffect)((function(){null!==x&&null!==t&&t!==x.type&&T(null)}),[t,x,T]);var I=Object(a.useMemo)((function(){return new Map(c.reduce((function(e,t){return e.push([t.id,t]),e}),[]))}),[c]),R=Object(a.useMemo)((function(){var e;if(!x)return[];for(var t=[x],n=null===(e=x.parent)||void 0===e?void 0:e.id;n&&I.has(n);){var a,r=I.get(n);t.unshift(r),n=null===(a=r.parent)||void 0===a?void 0:a.id}return t}),[x,I]),U=Object(a.useMemo)((function(){var e,n=null===(e=R[R.length-1])||void 0===e?void 0:e.id;return null===t?[]:n?c.filter((function(e){var a;return(null===(a=e.parent)||void 0===a?void 0:a.id)===n&&e.type===t})):c.filter((function(e){return!e.parent&&e.type===t}))}),[c,R,t]),k=Object(a.useMemo)((function(){return R.length>0&&0===U.length}),[R,U]),A=Object(a.useCallback)((function(t){return r.a.createElement(sa.a,Object.assign({},n,{variant:e.variant||"filled"},t,{error:D&&!!C,helperText:D?C:void 0,name:"category",label:"Category",disabled:k}))}),[e,n,D,C,k]),P=Object(a.useCallback)((function(e){return v(!0)}),[v]),N=Object(a.useCallback)((function(e){v(!1),S(e)}),[v,S]),B=Object(a.useCallback)((function(e,t){if(t)if(Array.isArray(t)){var n=t.length;T(0===n?null:t[n-1])}else T(t);else T(null)}),[T]),F=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),E(t)}),[E]),L=Object(a.useMemo)((function(){return Object(m.a)({},g,{open:p&&U.length>0,onFocus:P,onBlur:N,options:U,renderTags:ka,forcePopupIcon:!1,disabled:i,value:R,renderInput:A,loading:i,autoSelect:!0,multiple:!0,getOptionLabel:Ua,onInputChange:F,inputValue:k?"":b,onChange:B,name:"category"})}),[k,B,F,b,R,i,A,g,p,P,N,U]);return l?r.a.createElement("pre",null,JSON.stringify(l,null,2)):r.a.createElement(ca.a,L)},Pa=n(112),Ma=n(126);function Na(){var e=Object(j.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Na=function(){return e},e}var Ba=O()(Na(),Oa,wa,ga),Fa=function(e){switch(e){case On.Business:case On.Department:case On.Person:break;default:return"string"===typeof e}return!1},La=function(e){switch(e){case On.Business:return"Vendor";case On.Department:return"Department";case On.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},Va=function(e,t){var n=e.length-1;return e.map((function(e,a){var o=n===a,i=t({index:a}),l=i.key,u=Object(ua.a)(i,["key"]);return Fa(e)?e:r.a.createElement(d.a,{key:l,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(da.a,Object.assign({color:o?"primary":"default",variant:o?"default":"outlined",label:La(e),size:"medium"},u,{disabled:!o}))," ",!o&&r.a.createElement(pa.a,{fontSize:"small"}))}))},Ja=function(e,t){var n=t.inputValue,a=new RegExp("(^|\\s)".concat(n),"i");return e.filter((function(e){return a.test(La(e))}))},$a=function(e){var t,n=e.value,a=null!==(t=n[0])&&void 0!==t?t:null,r=n.length>1?n[n.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(Fa(r)&&a===On.Person){var o=Object(Pa.parseName)(r);if(!o.firstName.trim())return"First Name Required";if(!o.lastName.trim())return"Last Name Required"}},qa=function(e){var t,n=Object(a.useState)(!1),o=Object(M.a)(n,2),i=o[0],l=o[1],u=Object(An.b)({name:"source",validate:$a}),c=Object(M.a)(u,3),d=c[0],s=c[1],p=c[2],v=d.value,f=v.value,y=v.inputValue,b=d.onBlur,E=s.error,j=s.touched,h=p.setValue,O=null!==(t=f[0])&&void 0!==t?t:null,g=f.length>1?f[f.length-1]:null,w=Object(a.useRef)(""),_=Object(J.c)(Ba,{skip:!w.current&&!f[1],variables:{name:w.current,isBiz:O!==On.Person}}),x=_.loading,S=_.error,C=_.data,D=Object(a.useMemo)((function(){var e=new Map,t=!0,n=!1,a=void 0;try{for(var r,o=((null===C||void 0===C?void 0:C.businesses)||[])[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value,l=!0,u=!1,c=void 0;try{for(var d,s=i.departments[Symbol.iterator]();!(l=(d=s.next()).done);l=!0){var p=d.value;e.set(p.id,p)}}catch(m){u=!0,c=m}finally{try{l||null==s.return||s.return()}finally{if(u)throw c}}}}catch(m){n=!0,a=m}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}),[C]),T=Object(a.useMemo)((function(){if(null===O)return[On.Business,On.Person];if(O===On.Person)return null===g&&(null===C||void 0===C?void 0:C.people)||[];if(!g)return(null===C||void 0===C?void 0:C.businesses)||[];if("string"===typeof g)return[];var e=[],t=!0,n=!1,a=void 0;try{for(var r,o=D.values()[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.parent.__typename===g.__typename&&i.parent.id===g.id&&e.push(i)}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}return e}),[O,C,D,g]),I=Object(a.useMemo)((function(){return null!==O&&null===g}),[O,g]),R=Object(a.useMemo)((function(){return f.length>0&&0===T.length&&!I}),[f,T,I]),U=Object(a.useMemo)((function(){return null===O?"Source Type":O===On.Person?"Person Name":1===f.length?"Vendor":2===f.length&&T.length>0?"Department":T.length>0?"Sub-Department":"Vendor"}),[f,T,O]),k=Object(a.useCallback)((function(t){return r.a.createElement(sa.a,Object.assign({},e,{variant:e.variant||"filled"},t,{error:j&&!!E,helperText:j?E:void 0,name:"source",label:U}))}),[e,j,E,U]),A=Object(a.useCallback)((function(e){return l(!0)}),[l]),P=Object(a.useCallback)((function(e){l(!1),e.persist(),setTimeout((function(){return b(e)}),0)}),[l,b]),N=Object(a.useCallback)((function(e,t){var n=t.length-1,a=t[n];if(Fa(a)){var r=[],o=!0,i=!1,l=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;d&&(Ma.checkName(d)&&(d=Ma(d)),r.push(d))}}catch(p){i=!0,l=p}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}var s=r.join(" ").trim();t[n]=s.charAt(0).toUpperCase()+s.substring(1)}h({inputValue:y,value:t})}),[h,y]),B=Object(a.useCallback)((function(e,t,n){t=(t||"").trimStart(),R||h({inputValue:t,value:f}),null!==O&&null===g&&t&&(w.current=t[0].toLowerCase())}),[h,O,g,f,R,w]),F=Object(a.useMemo)((function(){return Object(m.a)({},d,{inputValue:R?"":y,open:i&&T.length>0,onFocus:A,onBlur:P,options:T,renderTags:Va,forcePopupIcon:!1,freeSolo:I,value:f,renderInput:k,loading:x,autoSelect:!0,multiple:!0,getOptionLabel:La,onInputChange:B,onChange:N,filterOptions:Ja,name:"source"})}),[R,I,y,B,N,f,x,k,d,i,A,P,T]);return S?r.a.createElement("pre",null,JSON.stringify(S,null,2)):r.a.createElement(ca.a,F)},Ga=n(5299),za=n(5224),Wa=n(5222);function Ya(){var e=Object(j.a)(["\n  query PayMethodEntryOpts {\n    paymentMethods {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return Ya=function(){return e},e}var Qa=O()(Ya(),_a),Ha=function(e){if(!e)return"Method Required"},Xa=function(e){var t=e.variant,n=void 0===t?"filled":t,o=e.autoFocus,i=void 0!==o&&o,l=Object(ua.a)(e,["variant","autoFocus"]),u=Object(J.c)(Qa),c=u.loading,d=u.error,s=u.data,p=Object(An.b)({name:"paymentMethod",validate:Ha}),m=Object(M.a)(p,2),v=m[0],f=m[1],y=f.error,b=f.touched,E=!!d||b&&!!y,j=Object(a.useMemo)((function(){return((null===s||void 0===s?void 0:s.paymentMethods)||[]).map((function(e){var t=e.id,n=e.method;return r.a.createElement(Ga.a,{value:t,key:t,children:"".concat(n[0].toUpperCase()).concat(n.substr(1))})}))}),[s]);return c?r.a.createElement(Vt.a,{variant:"rect",height:56}):d?r.a.createElement("pre",null,JSON.stringify(d,null,2)):r.a.createElement(Qn.a,Object.assign({},l,{required:!0,disabled:c,error:E,variant:n}),r.a.createElement(za.a,null,"Method"),r.a.createElement(Wa.a,Object.assign({},v,{autoFocus:i,children:j})),E&&r.a.createElement(Xn.a,{children:y}))},Ka=function(e){var t=e.autoFocus,n=void 0!==t&&t,o=e.variant,i=void 0===o?"filled":o,l=Object(ua.a)(e,["autoFocus","variant"]),u=Object(An.b)({name:"description"}),c=Object(M.a)(u,1)[0],d=Object(a.useMemo)((function(){return{type:"text",autoFocus:n}}),[n]);return r.a.createElement(sa.a,Object.assign({},l,c,{variant:i,label:"Description",name:"description",InputProps:d}))},Za=n(5278),er=function(e){if(""===e)return"Total Required";var t="string"===typeof e?Number.parseFloat(e):e;return Number.isNaN(t)?"Invalid Number":0===t?"Cannot be 0":t<.01?"Invalid Total":void 0},tr={min:"0.00",step:"0.01"},nr=function(e){var t=e.autoFocus,n=void 0!==t&&t,o=e.variant,i=void 0===o?"filled":o,l=Object(ua.a)(e,["autoFocus","variant"]),u=Object(An.b)({name:"total",validate:er}),c=Object(M.a)(u,2),d=c[0],s=c[1],p=s.error,m=s.touched,v=Object(a.useMemo)((function(){return{type:"number",autoFocus:n,startAdornment:r.a.createElement(Za.a,{position:"start"},"$")}}),[n]);return r.a.createElement(sa.a,Object.assign({},l,d,{error:m&&!!p,helperText:m?p:"",placeholder:"0.00",label:"Total",name:"total",required:!0,variant:i,inputProps:tr,InputProps:v}))},ar={type:"checkbox"},rr=function(e){var t=e.label,n=Object(ua.a)(e,["label"]),a=Object(An.b)({name:"reconciled",type:"checkbox"}),o=Object(M.a)(a,1)[0];return t?r.a.createElement(Hn.a,Object.assign({},n,o,{label:"Reconcile",control:r.a.createElement(cn.a,{inputProps:ar})})):r.a.createElement(cn.a,Object.assign({},n,o,{inputProps:ar}))};function or(){var e=Object(j.a)(["\n  mutation UpsertEntryDelete($id: ID!) {\n    journalEntryDelete(id: $id) {\n      __typename\n      id\n      deleted\n    }\n  }\n"]);return or=function(){return e},e}var ir=O()(or()),lr=function(e){var t=e.open,n=e.isUpdate,o=e.entryId,i=e.setOpen,l=e.formikProps,u=e.loading,c=Object(J.b)(ir),s=Object(M.a)(c,1)[0],p=l.isSubmitting,m=l.status,v=m.submitted,f=void 0!==v&&v,y=m.errors,b=y.general,E=y.submission,j=null!==l.values.type,h=l.submitForm,O=l.resetForm,g=l.setSubmitting,w=l.setStatus,_=Object(F.a)(),x=Object(a.useMemo)((function(){if(b)return r.a.createElement(d.a,{color:"error.main",clone:!0},r.a.createElement("span",null,"General Error"));if(u)return"Loading";var e=n?"Update":"Add",t="";return t=j?l.values.type===gn.Credit?"".concat(e," Credit"):"".concat(e," Debit"):"".concat(e," Entry"),E?r.a.createElement(d.a,{color:"error.main",clone:!0},r.a.createElement("span",null,"".concat(t,": Submission Error"))):p?"".concat(t,": Submitting"):t}),[p,j,l,n,u,b,E]),S=u||p||!!b||f,C=Object(a.useMemo)((function(){if(f)return r.a.createElement(Pn.a,{color:"primary",variant:"h3"},"Success!");if(b){var e="string"===typeof b;return r.a.createElement(d.a,{width:"100%"},r.a.createElement(Pn.a,{color:"error",variant:"body1"},e?b:b.message),!e&&r.a.createElement("pre",null,JSON.stringify(b,null,2)))}if(u||p)return r.a.createElement(Mn.a,null);if(j){var t="".concat(_.spacing(1),"px !important");return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{margin:t,clone:!0},r.a.createElement(ea,{style:{margin:_.spacing(1)},label:"start"})),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(la,{autoFocus:!0})),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(Ta,null)),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(Aa,{entryType:l.values.type})),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(qa,null)),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(Xa,null)),r.a.createElement(d.a,{margin:t,width:350,clone:!0},r.a.createElement(Ka,null)),r.a.createElement(d.a,{margin:t,width:175,clone:!0},r.a.createElement(nr,null)),r.a.createElement(d.a,{padding:2},r.a.createElement(rr,{label:!0})),!!E&&r.a.createElement(d.a,{width:"100%"},r.a.createElement(d.a,{marginTop:t,clone:!0},r.a.createElement(Pn.a,{variant:"body1",color:"error"},"string"===typeof E?E:E.message))))}return r.a.createElement(d.a,{marginLeft:"0px !important",clone:!0},r.a.createElement(ea,{label:"top"}))}),[f,j,u,b,E,p,_,l.values.type]),D=Object(a.useCallback)((function(e){return h().then((function(){return i(!0)}))}),[h,i]),T=Object(a.useCallback)((function(e){i(!1),O()}),[i,O]),I=Object(a.useCallback)((function(e){var t,n;return rt.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,rt.a.awrap(s({variables:{id:o}}));case 4:return t={submitted:!0,errors:{}},g(!1),w(t),e.next=9,rt.a.awrap(new Promise((function(e){return setTimeout(e,750)})));case 9:O({values:Or()}),i(!1),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),n={errors:{submission:"message"in e.t0?e.t0:JSON.stringify(e.t0,null,2)}},w(n),g(!1);case 18:case"end":return e.stop()}}),null,null,[[0,13]])}),[s,o,i,O,w,g]);return r.a.createElement(Nn.a,{fullWidth:!0,maxWidth:"lg",open:t,PaperProps:{component:"form",onSubmit:l.handleSubmit}},r.a.createElement(Bn.a,{children:x}),r.a.createElement(d.a,{display:"flex",alignItems:"flex-start",justifyContent:"center",flexWrap:"wrap",clone:!0},r.a.createElement(Fn.a,{dividers:!0,children:C})),r.a.createElement(Ln.a,null,n&&r.a.createElement(Vn.a,{disabled:S,size:"medium",color:"default",variant:"outlined",startIcon:r.a.createElement(Jn.a,null),onClick:I},"Delete"),r.a.createElement(Vn.a,{disabled:S,size:"medium",color:"secondary",variant:"outlined",type:"submit",startIcon:r.a.createElement(V.a,null)},n?"Update":"Add"),!n&&r.a.createElement(Vn.a,{disabled:S,size:"medium",color:"secondary",variant:"outlined",onClick:D,startIcon:r.a.createElement($n.a,null)},"Add & New"),r.a.createElement(Vn.a,{disabled:p||f,size:"medium",color:"default",variant:"outlined",startIcon:r.a.createElement(qn.a,null),onClick:T},"Cancel")))};function ur(){var e=Object(j.a)(["\n  mutation UpsertEntryUpdate($id: ID!, $fields: JournalEntryUpdateFields!) {\n    journalEntryUpdate(id: $id, fields: $fields) {\n      __typename\n      id\n    }\n  }\n"]);return ur=function(){return e},e}function cr(){var e=Object(j.a)(["\n  mutation UpsertEntryAdd($fields: JournalEntryAddFields!) {\n    journalEntryAdd(fields: $fields) {\n      __typename\n      id\n    }\n  }\n"]);return cr=function(){return e},e}function dr(){var e=Object(j.a)(["\n  mutation UpsertEntryAddBusiness($fields: BusinessAddFields!) {\n    addBusiness(fields: $fields) {\n      ...SrcEntryBizOptFragment\n    }\n  }\n  ","\n"]);return dr=function(){return e},e}function sr(){var e=Object(j.a)(["\n  mutation UpsertEntryAddPerson($fields: PersonAddFields!) {\n    addPerson(fields: $fields) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n"]);return sr=function(){return e},e}var pr=O()(sr(),Oa),mr=O()(dr(),wa),vr=O()(cr()),fr=O()(ur()),yr=function(e){switch(e.__typename){case"Business":return On.Business;case"Person":return On.Person;case"Department":return On.Department}},br=function(e,t,n){var a,r,o,i,l,u,c,d,s;return rt.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if("string"!==typeof(a=e[e.length-1])){p.next=23;break}if((r=e[0])!==On.Person){p.next=15;break}return i=Object(Pa.parseName)(a),p.next=7,rt.a.awrap(n.mutate({mutation:pr,variables:{fields:{name:{first:i.firstName,last:i.lastName}}}}));case 7:if(l=p.sent,null===(o=l.data)||void 0===o?void 0:o.addPerson.id){p.next=10;break}throw new Error("Something went wrong. Server did not respond with new person id.");case 10:return u={inputValue:"",value:[r,l.data.addPerson]},t.setFieldValue("source",u,!1),p.abrupt("return",{sourceType:On.Person,id:l.data.addPerson.id});case 15:return p.next=17,rt.a.awrap(n.mutate({mutation:mr,variables:{fields:{name:a}}}));case 17:if(d=p.sent,null===(c=d.data)||void 0===c?void 0:c.addBusiness.id){p.next=20;break}throw new Error("Something went wrong. Server did not respond with new business id.");case 20:return s={inputValue:"",value:[r,d.data.addBusiness]},t.setFieldValue("source",s,!1),p.abrupt("return",{sourceType:On.Business,id:d.data.addBusiness.id});case 23:return p.abrupt("return",{sourceType:yr(a),id:a.id});case 24:case"end":return p.stop()}}))};function Er(){var e=Object(j.a)(["\n  query EntryUpdateValues($id: ID!) {\n    journalEntry(id: $id) {\n      ...EntryUpdateValueFragment\n    }\n  }\n  fragment EntryUpdateValueFragment on JournalEntry {\n    id\n    __typename\n    type\n    date\n    department {\n      ...DeptEntryOptFragment\n    }\n    category {\n      ...CatEntryOptFragment\n    }\n    source {\n      ...SrcEntryPersonOptFragment\n      ...SrcEntryBizOptFragment\n      ... on Department {\n        ancestors {\n          ... on Department {\n            id\n            __typename\n          }\n          ...SrcEntryBizOptFragment\n        }\n      }\n    }\n    paymentMethod {\n      ...PayMethodEntryOptFragment\n    }\n    description\n    total {\n      num\n      den\n    }\n    reconciled\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Er=function(){return e},e}var jr,hr=O()(Er(),ja,ha,Oa,wa,ga,_a),Or=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(m.a)({type:null,date:null,department:null,category:null,source:{inputValue:"",value:[]},paymentMethod:"",description:"",total:"",reconciled:!1},e)},gr=function(e){var t=e.entryId,n=e.open,o=e.setOpen,i=e.initialValues,l=void 0===i?{}:i,u=!!t,c=Object(J.c)(hr,{skip:!u,variables:{id:t||""}}),d=c.loading,s=c.error,p=c.data,m=c.client,v=Object(a.useMemo)((function(){if(u){var e,t,n,a,r,o,i=null===p||void 0===p?void 0:p.journalEntry,c=[],d=null===i||void 0===i?void 0:i.source;switch(null===d||void 0===d?void 0:d.__typename){case"Person":c.push(On.Person,d);break;case"Business":c.push(On.Business,d);break;case"Department":c.push(On.Business);var s=[],m=!0,v=!1,f=void 0;try{for(var y,b=d.ancestors[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var E=y.value;"Business"===E.__typename?c.push(E):s.push(E.id)}}catch(D){v=!0,f=D}finally{try{m||null==b.return||b.return()}finally{if(v)throw f}}var j=c[1];if(s.length>0){var h=[],O=!0,g=!1,w=void 0;try{for(var _,x=j.departments[Symbol.iterator]();!(O=(_=x.next()).done);O=!0){var S=_.value;if(-1!==s.indexOf(S.id)&&h.push(S)===s.length)break}}catch(D){g=!0,w=D}finally{try{O||null==x.return||x.return()}finally{if(g)throw w}}h.sort((function(e,t){return e.id===t.parent.id||j.id||e.parent.id?-1:t.id===e.parent.id?1:0})),c.push.apply(c,h)}}var C=i?i.total.num/i.total.den:"";return{type:null!==(e=null===i||void 0===i?void 0:i.type)&&void 0!==e?e:null,date:Wt()(null===i||void 0===i?void 0:i.date),department:null!==(t=null===i||void 0===i?void 0:i.department)&&void 0!==t?t:null,category:null!==(n=null===i||void 0===i?void 0:i.category)&&void 0!==n?n:null,source:{inputValue:"",value:c},paymentMethod:null!==(a=null===i||void 0===i?void 0:i.paymentMethod.id)&&void 0!==a?a:"",description:null!==(r=null===i||void 0===i?void 0:i.description)&&void 0!==r?r:"",total:C,reconciled:null!==(o=null===i||void 0===i?void 0:i.reconciled)&&void 0!==o&&o}}return Or(l)}),[u,p,l]),f=Object(a.useMemo)((function(){return{submitted:!1,errors:{general:s}}}),[s]),y=Object(a.useCallback)((function(e,n){return function(e){var t,n,a,r,o,i,l,u,c,d,s,p,m,v,f,y,b,E,j,h,O,g,w,_,x,S,C,D,T;return rt.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:return t=e.values,n=e.formikHelpers,a=e.setOpen,r=e.client,o=e.initialValues,i=e.entryId,I.prev=1,l=t.type,u=t.date,c=t.department.id,d=t.category.id,I.next=8,rt.a.awrap(br(t.source.value,n,r));case 8:if(s=I.sent,p=t.paymentMethod,m=t.description,v=t.total,f=t.reconciled,!i){I.next=33;break}if(E={},o.type!==l&&(E.type=l),u.isSame(o.date)||(E.date=u.toISOString()),c!==(null===(y=o.department)||void 0===y?void 0:y.id)&&(E.department=c),d!==(null===(b=o.category)||void 0===b?void 0:b.id)&&(E.category=d),function(){var e=o.source.value,t=e[e.length-1],n=yr(t);return t.id!==s.id||n!==s.sourceType}()&&(E.source=s),p!==o.paymentMethod&&(E.paymentMethod=p),m&&m!==o.description&&(E.description=m),v!==o.total&&(j=new rn.a(("string"===typeof v?Number.parseFloat(v):v).toFixed(2)),h=j.n,O=j.d,E.total={num:h,den:O}),f!==o.reconciled&&(E.reconciled=f),0!==Object.keys(E).length){I.next=28;break}return g={errors:{submission:"No changes detected."}},n.setStatus(g),I.abrupt("return");case 28:return I.next=30,rt.a.awrap(r.mutate({mutation:fr,variables:{id:i,fields:E}}));case 30:I.sent,I.next=39;break;case 33:return w=new rn.a(("string"===typeof v?Number.parseFloat(v):v).toFixed(2)),_=w.n,x=w.d,S={num:_,den:x},C=u.toISOString(),I.next=38,rt.a.awrap(r.mutate({mutation:vr,variables:{fields:{type:l,date:C,department:c,category:d,source:s,paymentMethod:p,description:m,total:S,reconciled:f}}}));case 38:I.sent;case 39:return D={submitted:!0,errors:{}},n.setStatus(D),I.next=43,rt.a.awrap(new Promise((function(e){return setTimeout(e,750)})));case 43:a(!1),n.resetForm({values:Or()}),I.next=51;break;case 47:I.prev=47,I.t0=I.catch(1),T={errors:{submission:I.t0}},n.setStatus(T);case 51:case"end":return I.stop()}}),null,null,[[1,47]])}({values:e,formikHelpers:n,setOpen:o,client:m,initialValues:v,entryId:t})}),[t,v,o,m]),b=Object(a.useCallback)((function(e){return r.a.createElement(lr,{open:n,isUpdate:u,entryId:t,setOpen:o,loading:d,formikProps:e})}),[u,t,o,n,d]);return r.a.createElement(An.a,{initialValues:v,onSubmit:y,children:b,initialStatus:f,enableReinitialize:!0})},wr=n(5285),_r=n(5289),xr=n(161),Sr=n.n(xr),Cr=n(163),Dr=n.n(Cr),Tr=n(165),Ir=n.n(Tr),Rr=n(164),Ur=n.n(Rr),kr=n(5286),Ar=n(5287),Pr=n(5288),Mr=n(115),Nr=n(113),Br=(n(127),function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=e.journalEntryUpserts[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;if(l.id===t)return l}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return null});!function(e){e[e.Add=0]="Add",e[e.Update=1]="Update"}(jr||(jr={}));var Fr=function(e,t){var n,a;return null!==(n=null===(a=Br(e,t))||void 0===a?void 0:a.submit.status)&&void 0!==n?n:null},Lr=function(e,t){var n;return(null===(n=Br(e,t))||void 0===n?void 0:n.values.category.value)||null};function Vr(){var e=Object(j.a)(["\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n"]);return Vr=function(){return e},e}function Jr(){var e=Object(j.a)(["\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n"]);return Jr=function(){return e},e}function $r(){var e=Object(j.a)(["\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n"]);return $r=function(){return e},e}function qr(){var e=Object(j.a)(["\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    journalEntryUpdate(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return qr=function(){return e},e}function Gr(){var e=Object(j.a)(["\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    journalEntryAdd(fields:$fields) {\n      __typename\n      id\n    }\n  }\n"]);return Gr=function(){return e},e}function zr(){var e=Object(j.a)(["\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n"]);return zr=function(){return e},e}function Wr(){var e=Object(j.a)(["\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n"]);return Wr=function(){return e},e}O()(Wr()),O()(zr()),O()(Gr()),O()(qr(),vn);var Yr=O()($r()),Qr=function(e,t,n){return function(a,r){var o,i,u,c,d;return rt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=r(),i=Lr(o,e),u=!1,null===i){s.next=15;break}return s.prev=4,s.next=7,rt.a.awrap(n.query({query:Yr,variables:{id:i}}));case 7:c=s.sent,d=c.data,d.journalEntryCategory.type!==t&&(u=!0),s.next=15;break;case 13:s.prev=13,s.t0=s.catch(4);case 15:u?Object(l.b)((function(){a(Zr(e)),a({type:je,payload:{upsertId:e,type:t}})})):a({type:je,payload:{upsertId:e,type:t}});case 16:case"end":return s.stop()}}),null,null,[[4,13]])}},Hr=function(e,t){return{type:ue,payload:{upsertId:e,value:t}}},Xr=function(e,t){return{type:ve,payload:{upsertId:e,value:t}}},Kr=(O()(Jr()),O()(Vr()),function(e,t){return{type:_e,payload:{upsertId:e,value:t}}}),Zr=function(e){return{type:xe,payload:{upsertId:e}}},eo=function(e,t){return{type:Te,payload:{upsertId:e,srcType:t}}},to=function(e,t){return{type:Ue,payload:{upsertId:e,value:t}}},no=function(e,t){return{type:Ne,payload:{upsertId:e,value:t}}},ao=function(e,t){return{type:Ve,payload:{upsertId:e,value:t}}},ro=function(e,t){var n=Number.parseFloat(t);if(Number.isNaN(n))return io(e,new TypeError("Invalid Number."));for(var a="",r=0,o=t.length;r<o;r++){var i=t[r];"."===i?(a+=i,o=Math.min(o,r+3)):Number.isNaN(Number.parseInt(i))||(a+=i)}return{type:$e,payload:{upsertId:e,input:a}}},oo=function(e,t){var n=new rn.a(t.toFixed(2)),a=n.n,r=n.d;return{type:Ge,payload:{upsertId:e,value:{num:a,den:r}}}},io=function(e,t){return{type:We,payload:{upsertId:e,error:t}}},lo=function(e,t){return{type:Qe,payload:{upsertId:e,value:t}}};function uo(){var e=Object(j.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return uo=function(){return e},e}function co(){var e=Object(j.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return co=function(){return e},e}function so(){var e=Object(j.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return so=function(){return e},e}function po(){var e=Object(j.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n    }\n    lastUpdate\n    deleted\n  }\n"]);return po=function(){return e},e}function mo(){var e=Object(j.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return mo=function(){return e},e}var vo=O()(mo()),fo=O()(po()),yo=O()(so(),vo,fo),bo=O()(co(),fo),Eo=O()(uo(),fo);function jo(){var e=Object(j.a)(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return jo=function(){return e},e}var ho=z("DashboardJournalEntry",W),Oo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?qt.a[t]:e<.9?Mr.a[t]:Gt.a[t]},go=function(e){var t=e.spentPercentage,n=e.height;return r.a.createElement(d.a,{height:n,bgcolor:Oo(t),display:"flex",justifyContent:"flex-start"},r.a.createElement(d.a,{height:"100%",width:"".concat(100*t,"%"),bgcolor:Nr.a[400]}))},wo=O()(jo(),ja),_o=function(e){var t,n=e.deptId,o=Object(a.useState)(!1),i=Object(M.a)(o,2),u=i[0],c=i[1],p=Object(a.useMemo)((function(){return{deptId:n,where:{department:{eq:n},deleted:!1}}}),[n]),v=Object(J.c)(yo,{variables:p}),f=v.loading,y=v.error,b=v.data,E=v.subscribeToMore,j=v.fetchMore,h=Object(J.c)(wo,{skip:!n,variables:{id:n}}).data,O=Object(J.a)();Object(a.useEffect)((function(){var e=function(){try{return O.readQuery({query:yo,variables:p})}catch(y){return null}}();if(null===e||void 0===e?void 0:e.journalEntries){var t=e.journalEntries.reduce((function(e,t){var n=new Date(t.lastUpdate);return n>e?n:e}),new Date(0)).toISOString();j({variables:Object(m.a)({},p,{where:Object(m.a)({},(null===p||void 0===p?void 0:p.where)||{},{lastUpdate:{gt:t}})}),updateQuery:function(e,t){var n=t.fetchMoreResult;return Object(m.a)({},e||{},{},n||{},{journalEntries:[].concat(Object(X.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(X.a)((null===n||void 0===n?void 0:n.journalEntries)||[]))})}})}var a=E({document:bo,updateQuery:function(e,t){var a,r,o=t.subscriptionData,i=null===o||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.journalEntryAdded;return!i||i.id!==n&&i.department.ancestors.every((function(e){return"Business"===e.__typename||e.id!==n}))?e:Object(m.a)({},e||{},{journalEntries:[].concat(Object(X.a)((null===e||void 0===e?void 0:e.journalEntries)||[]),Object(X.a)([null===o||void 0===o?void 0:null===(r=o.data)||void 0===r?void 0:r.journalEntryAdded]||!1))})}}),r=E({document:Eo,updateQuery:function(e,t){var n,a=t.subscriptionData,r=null===a||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.journalEntryUpdated;return r&&O.writeFragment({id:"JournalEntry:".concat(r.id),fragment:fo,data:r}),e}});return function(){a(),r()}}),[p,j,O,E,n]);var g=Object(a.useMemo)((function(){return((null===b||void 0===b?void 0:b.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[b]),w=(null===b||void 0===b?void 0:null===(t=b.department)||void 0===t?void 0:t.name)||"";Object(a.useEffect)((function(){document.title=w}),[w]);var _=Tn(),x=(Object(a.useCallback)((function(e){_(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n,a){var r=a(),o=Fr(r,e),i=t.entryId,u=(t.fromDept,t.client);if(null===o)if(i){if(!u)throw Error("client required for update");var c=u.readFragment({id:"JournalEntry:".concat(i),fragment:vn});if(!c)return;var d=c.date,s=c.type,p=c.department.id,m=c.category.id,v=c.description,f=c.paymentMethod.id,y=c.source,b=y.__typename,E=y.id,j=c.total,h=j.num,O=j.den,g=c.reconciled,w="Person"===b?On.Person:On.Business,_={sourceType:"Person"===b?On.Person:"Business"===b?On.Business:On.Department,id:E};n({type:ee,payload:{upsertId:e,entryId:i,fromDept:t.fromDept}}),Object(l.b)((function(){n(Hr(e,new Date(d))),n(Qr(e,s,u)),n(eo(e,w)),n(Xr(e,p)),n(Kr(e,m)),v&&n(ao(e,v)),n(no(e,f)),n(to(e,_)),n(oo(e,h/O)),n(ro(e,(h/O).toString())),n(lo(e,g))}))}else n({type:ee,payload:{upsertId:e,fromDept:t.fromDept}})}}(ho,{fromDept:n}))}),[_,n]),(null===b||void 0===b?void 0:b.department)||null),S=Object(a.useMemo)((function(){var e=new Map,t=0;if(x){var n=function(){if(x.budget){var e=x.budget.amount;return e.num/e.den}return null}();e.set(x.id,{name:x.name,spent:0,budget:n});var a=!0,r=!1,o=void 0;try{for(var i,l=x.descendants[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){var u=i.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;t+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(w){r=!0,o=w}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}}var p=0,m=!0,v=!1,f=void 0;try{for(var y,b=g[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var E=y.value,j=e.get(E.department.id),h=E.total.num/E.total.den;E.type===gn.Credit?(p-=h,j.spent-=h):(p+=h,j.spent+=h)}}catch(w){v=!0,f=w}finally{try{m||null==b.return||b.return()}finally{if(v)throw f}}var O=function(){if(null===x||void 0===x?void 0:x.budget){var e,n=(null===x||void 0===x?void 0:null===(e=x.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return n.num/n.den}return t}();return{totalRemaining:nn()(O-p).format("$0,0.00"),budget:nn()(O).format("$0,0.00"),spentToBudgetRatio:p/O,deptReport:e}}),[g,x]),C=S.totalRemaining,D=S.budget,T=S.spentToBudgetRatio,I=S.deptReport,R=Object(a.useMemo)((function(){var e=[],t=!0,n=!1,a=void 0;try{for(var o,i=function(){var t=o.value,n=(u=Object(M.a)(t,2))[0],a=(c=u[1]).budget,i=c.spent,l=c.name;if(n===(null===x||void 0===x?void 0:x.id))return"continue";var s=r.a.createElement(wr.a,{key:n,item:!0,xs:12,md:4,lg:3},r.a.createElement(kr.a,null,r.a.createElement(Ar.a,{titleTypographyProps:{noWrap:!0},title:l}),r.a.createElement(Pr.a,null,function(){if(null===a)return r.a.createElement(d.a,{color:i>0?Gt.a[900]:qt.a[900],clone:!0},r.a.createElement(Pn.a,{variant:"h6"},"Spent: ".concat(nn()(Math.abs(i)).format("$0,0.00"))));var e=a-i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{color:Oo(i/a,900),clone:!0},r.a.createElement(Pn.a,{variant:"h6"},"".concat(nn()(e).format("$0,0.00")," Remaining"))),r.a.createElement(Pn.a,{variant:"body1"},"of ".concat(nn()(a).format("$0,0.00"))),r.a.createElement(go,{spentPercentage:i/a,height:5}))}())));e.push(s)},l=I[Symbol.iterator]();!(t=(o=l.next()).done);t=!0){var u,c;i()}}catch(s){n=!0,a=s}finally{try{t||null==l.return||l.return()}finally{if(n)throw a}}return e}),[I,x]),U=Object(a.useCallback)((function(e){return c(!0)}),[c]),k=Object(a.useMemo)((function(){return(null===h||void 0===h?void 0:h.department)?{department:h.department}:void 0}),[h]);return f?r.a.createElement("p",null,"Loading..."):y?(console.error(y),r.a.createElement("p",null,y.message)):r.a.createElement(d.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(_r.a,null,r.a.createElement(d.a,{padding:8},r.a.createElement(wr.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(wr.a,{item:!0},r.a.createElement(Vn.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(Sr.a,null),children:"New Entry",onClick:U})),r.a.createElement(wr.a,{item:!0},r.a.createElement(Vn.a,{component:s.b,to:"/journal/".concat(n,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Dr.a,null),children:"Reconcile"})),r.a.createElement(wr.a,{item:!0},r.a.createElement(Vn.a,{variant:"contained",startIcon:r.a.createElement(Ur.a,null),children:"Reports"})),r.a.createElement(wr.a,{item:!0},r.a.createElement(Vn.a,{component:s.b,to:"/journal/".concat(n),variant:"contained",startIcon:r.a.createElement(Ir.a,null),children:"Journal"})))),r.a.createElement(d.a,{flexGrow:1,overflow:"auto"},r.a.createElement(wr.a,{justify:"center",container:!0,spacing:2},r.a.createElement(wr.a,{item:!0,xs:12},r.a.createElement(Pn.a,{align:"center",variant:"h3"},w),r.a.createElement(d.a,{color:Oo(T)},r.a.createElement(Pn.a,{align:"center",variant:"h4"},"".concat(C," Remaining"))),r.a.createElement(Pn.a,{align:"center",variant:"subtitle1"},"of ".concat(D)),r.a.createElement(go,{spentPercentage:T,height:10})),R)),r.a.createElement(gr,{initialValues:k,open:u,setOpen:c})))},xo=(z("Journal",W),function(e){var t=e.deptId,n=e.mode,o=Object(F.a)(),i=Object(a.useState)(!1),l=Object(M.a)(i,2),u=l[0],c=l[1],s=Object(a.useState)(void 0),p=Object(M.a)(s,2),m=p[0],v=p[1],f=Object(J.c)(wo,{skip:!t,variables:{id:t}}).data,y=Object(a.useMemo)((function(){return(null===f||void 0===f?void 0:f.department)?{department:f.department}:void 0}),[f]),b=(Object(a.useCallback)((function(){c(!1),v(void 0)}),[v,c]),Object(a.useCallback)((function(e){v(e),c(!0)}),[v,c])),E=Object(a.useCallback)((function(){c(!0),v(void 0)}),[v,c]),j=Object(a.useCallback)((function(e){var a=e.width,o=e.height;return r.a.createElement(kn,{updateEntry:b,mode:n,deptId:t,width:a,height:o})}),[t,n,b]);return r.a.createElement(d.a,{style:{overflowX:"auto"},width:"100%",overflow:"hidden",flexGrow:1,display:"flex",justifyContent:"flex-start",flexDirection:"column",clone:!0},r.a.createElement("form",null,r.a.createElement(d.a,{width:"100%",flexGrow:1,display:"flex !important",justifyContent:"flex-start",flexDirection:"column",clone:!0},r.a.createElement(N.a,{component:"div"},r.a.createElement(Bt,null),r.a.createElement(d.a,{flexGrow:1},r.a.createElement(B.a,{children:j})),n===In.View&&r.a.createElement(d.a,{position:"fixed !important",bottom:o.spacing(2),right:o.spacing(2),clone:!0},r.a.createElement(L.a,{disabled:u,size:"large",color:"secondary","aria-label":"add entry",children:r.a.createElement(V.a,null),onClick:E})))),r.a.createElement(gr,{initialValues:y,open:u,setOpen:c,entryId:m})))});function So(){var e=Object(j.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return So=function(){return e},e}var Co=O()(So()),Do=function(e){var t=Object(J.c)(Co),n=t.loading,o=t.error,i=t.data,l=Object(a.useState)(null),u=Object(M.a)(l,2),c=u[0],p=u[1],m=(null===i||void 0===i?void 0:i.departments)||[],v=Object(a.useMemo)((function(){var e=[],t=new Set,n=!0,a=!1,r=void 0;try{for(var o,i=m[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;"Business"===l.parent.__typename&&e.push(l),l.virtualRoot&&t.add(l.id)}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:t}}),[m]),f=v.rootDepts,y=v.virtualRoots,b=Object(a.useMemo)((function(){var e=[];if(c&&y.has(c)){var t=!0,n=!1,a=void 0;try{for(var r,o=m[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=r.value;i.parent.id===c&&e.push(i)}}catch(l){n=!0,a=l}finally{try{t||null==o.return||o.return()}finally{if(n)throw a}}}return e}),[y,c,m]);Object(a.useEffect)((function(){document.title="Select Department"}));var E=Object(a.useCallback)((function(e){var t;p((null===e||void 0===e?void 0:null===(t=e.target)||void 0===t?void 0:t.value)||null)}),[p]);if(n)return r.a.createElement("p",null,"Loading...");if(o)return r.a.createElement("p",null,o.message);var j=b.length>0;return r.a.createElement(d.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(_r.a,null,r.a.createElement(d.a,{padding:4,clone:!0},r.a.createElement(Pn.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(d.a,{minWidth:"250px !important",clone:!0},r.a.createElement(Qn.a,{variant:"filled"},r.a.createElement(za.a,null,"Department"),r.a.createElement(Wa.a,{value:c,onChange:E,autoWidth:!0},f.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete t.component,delete t.to),r.a.createElement(Ga.a,t)}))))),j&&r.a.createElement(d.a,{pt:2},r.a.createElement(d.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(Qn.a,{variant:"filled"},r.a.createElement(za.a,null,"Sub Department"),r.a.createElement(Wa.a,{autoWidth:!0},b.map((function(e){var t={component:s.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(Ga.a,t)}))))))))},To=function(e){var t=Object(P.f)().id;return t?r.a.createElement(_o,{deptId:t}):r.a.createElement("div",null,"Error: No Dept ID!")},Io=function(e){var t=Object(P.f)().id;return r.a.createElement(xo,{mode:In.View,deptId:t})},Ro=function(e){var t=Object(P.f)().id;return r.a.createElement(xo,{mode:In.Reconcile,deptId:t})},Uo=function(e){return r.a.createElement(P.c,null,r.a.createElement(P.a,{exact:!0,path:"/",component:Do}),r.a.createElement(P.a,{exact:!0,path:"/department/:id",component:To}),r.a.createElement(P.a,{exact:!0,path:"/journal",component:xo}),r.a.createElement(P.a,{exact:!0,path:"/journal/:id",component:Io}),r.a.createElement(P.a,{exact:!0,path:"/journal/:id/reconcile",component:Ro}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement((function(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(l.a,{store:xt},r.a.createElement(u.a,{client:A},r.a.createElement(s.a,null,r.a.createElement(d.a,{position:"fixed",top:0,left:0,height:"100vh",width:"100vw",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"},r.a.createElement(Uo,null))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5189,1,2]]]);
//# sourceMappingURL=main.9ef0a44b.chunk.js.map