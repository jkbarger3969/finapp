(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{399:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"PaymentMethodAuthorizedEntity","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5468:function(e,n,t){e.exports=t(5572)},5572:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(30),o=t.n(l),i=t(173),u=t(71),c=t(5611),d=t(118),s=t(132),m=t(307),p=t(399),v=new m.b({introspectionQueryResultData:p}),b=new m.a({fragmentMatcher:v,addTypename:!0}),f=t(16),y=t(17),E=t.n(y);function O(){var e=Object(f.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return O=function(){return e},e}var j,h,g,R,_,C,A,S=[E()(O())],I={},x=t(419),M=t(401),T=t(58),k=t(402),w=t(158),D=new x.a({uri:"/graphql",credentials:"same-origin"}),F=new M.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),U=T.a.from([Object(k.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),T.a.split((function(e){var n=e.query,t=Object(w.a)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),F,D)]),P=new s.a({link:U,cache:b,typeDefs:S,resolvers:I}),L=t(131),N=t(36),$=t(49),J=t(13),B=t(19),V=t.n(B),W=t(10),z=t(261),q=t.n(z),G=t(24),K=t(72),H=t.n(K),X=t(5643),Y=t(133),Q=t(5638),Z=t(5639),ee=t(5623),ne=t(5640),te=t(5624),ae=t(5625),re=t(5626),le=t(5627),oe=t(5618),ie=t(5628),ue=t(5629),ce=t(5630),de=t(5631),se=t(5632),me=t(5633),pe=t(5634),ve=t(5635),be=t(5636),fe=t(5637),ye=t(292),Ee=t(366),Oe=t(367),je=t(363),he=t(59),ge=t(167),Re=t(164),_e=t(381),Ce=t(382),Ae=t(148),Se=t(418);function Ie(){var e=Object(f.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Ie=function(){return e},e}function xe(){var e=Object(f.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return xe=function(){return e},e}function Me(){var e=Object(f.a)(['\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: "JournalEntries_1", filter: ["where"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return Me=function(){return e},e}function Te(){var e=Object(f.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    description\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    items {\n      ...JournalEntryItem_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Te=function(){return e},e}function ke(){var e=Object(f.a)(["\n  fragment JournalEntryItem_1Fragment on JournalEntryItem {\n    __typename\n    id\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    total {\n      num\n      den\n    }\n    description\n    lastUpdate\n    deleted\n  }\n  ","\n  ","\n"]);return ke=function(){return e},e}function we(){var e=Object(f.a)(["\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      num\n      den\n    }\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n  ","\n"]);return we=function(){return e},e}function De(){var e=Object(f.a)(["\n  fragment JournalEntryDept_1Fragment on Department {\n    __typename\n    id\n    name\n    ancestors {\n      __typename\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n  }\n"]);return De=function(){return e},e}function Fe(){var e=Object(f.a)(["\n  fragment JournalEntryCategory_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    type\n    name\n  }\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(f.a)(["\n  fragment JournalEntryPayMethod_1Fragment on PaymentMethod {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Ue=function(){return e},e}!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(j||(j={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(h||(h={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(g||(g={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(R||(R={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(_||(_={})),function(e){e.Update="UPDATE",e.Add="ADD"}(C||(C={})),function(e){e.Asc="ASC",e.Desc="DESC"}(A||(A={}));var Pe=E()(Ue()),Le=E()(Fe()),Ne=E()(De()),$e=E()(we(),Pe),Je=E()(ke(),Le,Ne),Be=E()(Te(),Pe,Ne,Le,$e,Je),Ve=E()(Me(),Be),We=(E()(xe(),Be),E()(Ie(),Be),"5dc46d0af74afb2c2805bd54"),ze=t(27),qe=t(31),Ge=t(5586),Ke=t(5613),He=t(5612),Xe=t(5588),Ye=t(5604),Qe=t(5589),Ze=t(147),en=t(5619),nn=t(5620);function tn(){var e=Object(f.a)(["\n  mutation AddEntryRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return tn=function(){return e},e}var an,rn=E()(tn(),$e),ln=function(){var e=Object(N.a)(V.a.mark((function e(n,t,a){var r,l,o,i,u,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=a.paymentMethod.value[a.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:a.paymentMethod.value[a.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),i=o.paymentMethod,u=o.paymentMethodAdd,c={id:t,fields:{date:a.date.value,description:(null===(r=a.description)||void 0===r?void 0:r.trim())?a.description.trim():null,paymentMethod:i,total:a.total.value,reconciled:null!==(l=a.reconciled)&&void 0!==l?l:null},paymentMethodAdd:u},e.next=4,n.mutate({mutation:rn,variables:c});case 4:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),on=t(39),un=t(291),cn=t(232),dn=t(169),sn=t(5615),mn=t(5616),pn=t(5617),vn=function(e){return function(n){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return{inputValue:n,value:e.apply(void 0,[n].concat(a))}}};!function(e){e[e.NOTIFICATION=0]="NOTIFICATION",e[e.ERROR=1]="ERROR",e[e.FATAL_ERROR=2]="FATAL_ERROR"}(an||(an={}));var bn=function(){var e=Object(ze.c)(),n=e.setStatus,t=e.status,r=Object(a.useCallback)((function(e){t?e&&!Object.keys(e).some((function(n){return e[n]!==t[n]}))||n(e):e&&n(e)}),[n,t]);return[null!==t&&void 0!==t?t:null,r]},fn={inputMode:"numeric"},yn={tabIndex:-1},En=vn((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0],r=n[1];return a&&Object(dn.a)(a)?Object(sn.a)(a):r||""})),On=function(e){var n,t,l,o=e.variant,i=void 0===o?"filled":o,u=e.autoFocus,c=void 0!==u&&u,d=e.disabled,s=void 0!==d&&d,m=e.maxDate,p=void 0===m?new Date:m,v=e.minDate,b=Object(ze.c)().isSubmitting,f=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.value)||"").trim();if(!n)return"Date is Required";var t=Object(mn.a)(n);return Object(dn.a)(t)?v&&t<v?"Cannot be before ".concat(Object(Se.a)(v,"MM/dd/yyyy")):p<t?"Cannot be after ".concat(Object(Se.a)(p,"MM/dd/yyyy")):void 0:"Invalid Date"}),[v,p]),y=Object(ze.b)({name:"date",validate:f}),E=Object(J.a)(y,3),O=E[0],j=E[1],h=E[2],g=null!==(n=null===(t=O.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:null,R=j.error,_=j.touched,C=h.setValue,A=h.setTouched,S=null===(l=j.initialValue)||void 0===l?void 0:l.inputValue,I=Object(a.useMemo)((function(){return S&&Object(dn.a)(S)?S:new Date}),[S]),x=Object(a.useMemo)((function(){return{autoFocus:c}}),[c]),M=Object(a.useRef)(!1),T=Object(a.useCallback)((function(){return setTimeout((function(){M.current||A(!0)}),0)}),[A,M]),k=Object(a.useCallback)((function(){return M.current=!0}),[M]),w=Object(a.useCallback)((function(){M.current=!1,T()}),[M,T]),D=Object(a.useCallback)((function(e,n){C(En(e&&Object(dn.a)(e)?Object(pn.a)([new Date,e]):e,n))}),[C]),F=bn(),U=Object(J.a)(F,1)[0],P=Object(a.useMemo)((function(){return Object(W.a)({},O,{disabled:b||s||(null===U||void 0===U?void 0:U.type)===an.FATAL_ERROR,value:g,error:_&&!!R,helperText:_?R:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:i,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date",initialFocusedDate:I,autoOk:!0,InputProps:x,inputProps:fn,placeholder:"mm/dd/yyyy",KeyboardButtonProps:yn,onBlur:T,onOpen:k,onClose:w,onChange:D})}),[g,I,T,R,i,x,b,O,k,w,D,_,s,U]);return r.a.createElement(on.a,{utils:cn.default},r.a.createElement(un.b,Object.assign({maxDate:p},e,P)))},jn=t(42),hn=t(250),gn=function(e){var n,t=e.autoFocus,l=void 0!==t&&t,o=e.disabled,i=void 0!==o&&o,u=e.variant,c=void 0===u?"filled":u,d=Object(jn.a)(e,["autoFocus","disabled","variant"]),s=Object(ze.b)({name:"description"}),m=Object(J.a)(s,3),p=m[0],v=m[2].setValue,b=Object(a.useCallback)((function(e){var n,t;v((null===e||void 0===e||null===(n=e.target)||void 0===n||null===(t=n.value)||void 0===t?void 0:t.trimLeft())||null)}),[v]),f=Object(a.useMemo)((function(){return{type:"text",autoFocus:l}}),[l]),y=bn(),E=Object(J.a)(y,1)[0];return r.a.createElement(hn.a,Object.assign({},d,p,{disabled:i||(null===E||void 0===E?void 0:E.type)===an.FATAL_ERROR,onChange:b,value:null!==(n=p.value)&&void 0!==n?n:"",variant:c,label:"Description",name:"description",InputProps:f}))},Rn=t(299),_n=t(149),Cn=t.n(_n),An={min:"0.00",step:"0.01"},Sn=vn((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=new Cn.a(("string"===typeof e?Number.parseFloat(e.trim()||"0"):e).toFixed(n)),a=t.n,r=t.d;return{num:a,den:r}}(e,2)})),In=function(e){var n,t,l=e.autoFocus,o=void 0!==l&&l,i=e.disabled,u=void 0!==i&&i,c=e.variant,d=void 0===c?"filled":c,s=e.maxTotal,m=void 0===s?Number.MAX_SAFE_INTEGER:s,p=e.minTotal,v=void 0===p?0:p,b=Object(jn.a)(e,["autoFocus","disabled","variant","maxTotal","minTotal"]),f=Math.max(.01,v),y=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.inputValue)||"").trim();if(""===n)return"Total Required";var t="string"===typeof n?Number.parseFloat(n):n;return console.log("num",t,"maxTotal",m),Number.isNaN(t)?"Invalid Number":t>m?"Cannot be greater than ".concat(H()(m).format("$0,0.00")):0===t?"Cannot be 0":t<f?"Cannot be less than ".concat(H()(f).format("$0,0.00")):void 0}),[f,m]),E=Object(ze.b)({name:"total",validate:y}),O=Object(J.a)(E,3),j=O[0],h=O[1],g=O[2].setValue,R=null!==(n=null===(t=j.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:"",_=h.error,C=h.touched,A=Object(a.useMemo)((function(){return{type:"number",autoFocus:o,startAdornment:r.a.createElement(Rn.a,{position:"start"},"$")}}),[o]),S=Object(a.useCallback)((function(e){var n;g(Sn((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||""))}),[g]),I=Object(a.useMemo)((function(){return C&&_?_:m!==Number.MAX_SAFE_INTEGER&&f>.01?"Max ".concat(H()(m).format("$0,0.00")," & Min ").concat(H()(f).format("$0,0.00")):m!==Number.MAX_SAFE_INTEGER?"Max ".concat(H()(m).format("$0,0.00")):f>.01?"Min ".concat(H()(f).format("$0,0.00")):""}),[C,_,m,f]),x=bn(),M=Object(J.a)(x,1)[0];return r.a.createElement(hn.a,Object.assign({},b,j,{disabled:u||(null===M||void 0===M?void 0:M.type)===an.FATAL_ERROR,type:"number",value:R,error:C&&!!_,helperText:I,placeholder:"0.00",label:"Total",name:"total",required:!0,variant:d,inputProps:An,InputProps:A,onChange:S}))},xn=t(383),Mn=t(393),Tn={type:"checkbox"},kn=function(e){var n,t=e.label,a=e.disabled,l=void 0!==a&&a,o=Object(jn.a)(e,["label","disabled"]),i=Object(ze.b)({name:"reconciled",type:"checkbox"}),u=Object(J.a)(i,1)[0],c=null!==(n=u.value)&&void 0!==n&&n,d=bn(),s=Object(J.a)(d,1)[0];return t?r.a.createElement(xn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===an.FATAL_ERROR,label:"Reconcile",control:r.a.createElement(Mn.a,{inputProps:Tn})})):r.a.createElement(Mn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===an.FATAL_ERROR,inputProps:Tn}))},wn=t(396);function Dn(){var e=Object(f.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Dn=function(){return e},e}function Fn(){var e=Object(f.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return Fn=function(){return e},e}function Un(){var e=Object(f.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      ... on Business {\n        __typename\n        id\n      }\n      ... on Department {\n        __typename\n        id\n      }\n    }\n  }\n"]);return Un=function(){return e},e}function Pn(){var e=Object(f.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return Pn=function(){return e},e}function Ln(){var e=Object(f.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Ln=function(){return e},e}function Nn(){var e=Object(f.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return Nn=function(){return e},e}var $n=E()(Nn()),Jn=E()(Ln()),Bn=E()(Pn()),Vn=E()(Un()),Wn=E()(Fn(),Vn),zn=E()(Dn()),qn=t(5642);function Gn(){var e=Object(f.a)(["\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return Gn=function(){return e},e}var Kn=E()(Gn(),zn),Hn=function(e){var n,t,a=null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:[],r=a.length,l=a[r-1],o=a[r-2];if(void 0===l)return"Method Required";if("string"===typeof l){if((null===o||void 0===o?void 0:o.id)===We&&!(null!==(t=l.match(/[0-9]/g))&&void 0!==t?t:[]).join(""))return"Check # Required"}else if(l.id===We)return"Check # Required"},Xn=function(e){return"string"===typeof e?e:e.name},Yn=function(e,n){var t=e.length-1;return e.map((function(a,l){var o,i,u=t===l,c=n({index:l}),d=c.key,s=Object(jn.a)(c,["key"]),m=e[l-1],p="string"===typeof a;switch(null===m||void 0===m?void 0:m.id){case We:o="CK-"+(p?a:a.name);break;default:o=Xn(a)}if(u){if(!p)switch(a.id){case We:i=r.a.createElement("span",null,"CK-")}}else i=r.a.createElement(oe.a,{fontSize:"small"});return r.a.createElement(ye.a,{key:d,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(wn.a,Object.assign({color:u?"primary":"default",variant:u?"default":"outlined",label:o,size:"medium"},s,{disabled:!u}))," ",i)}))},Qn=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(jn.a)(e,["disabled"]),s=Object(a.useState)(!1),m=Object(J.a)(s,2),p=m[0],v=m[1],b=Object(ze.b)({name:"paymentMethod",validate:Hn}),f=Object(J.a)(b,3),y=f[0],E=f[1],O=f[2],j=y.onBlur,h=null!==(n=null===(t=y.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],g=null!==(l=null===(o=y.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",R=E.error,_=E.touched,C=O.setValue,A=null!==(i=h[h.length-1])&&void 0!==i?i:null,S=Object(a.useMemo)((function(){return null===A?{where:{hasParent:!1}}:{where:{parent:{eq:A.id}}}}),[A]),I=bn(),x=Object(J.a)(I,2),M=x[0],T=x[1],k=Object(a.useCallback)((function(e){T({msg:e.message,type:an.FATAL_ERROR})}),[T]),w=Object(G.c)(Kn,{skip:"string"===typeof A,variables:S,onError:k}),D=w.loading,F=w.error,U=w.data,P=Object(a.useMemo)((function(){return(null===U||void 0===U?void 0:U.paymentMethods)&&"string"!==typeof A&&(null===A||void 0===A?void 0:A.id)!==We?U.paymentMethods:[]}),[U,A]),L=P.length>0,N=Object(a.useMemo)((function(){var e;return(null===(e=A)||void 0===e?void 0:e.id)===We}),[A]),$=Object(a.useMemo)((function(){return!L&&!N}),[L,N]),B=Object(a.useMemo)((function(){var e;return"string"===typeof A||(null===(e=A)||void 0===e?void 0:e.id)===We?"Check #":"Payment Method"}),[A]),V=Object(a.useMemo)((function(){var e;return(null===(e=A)||void 0===e?void 0:e.id)===We?{type:"number"}:{}}),[A]),z=Object(a.useMemo)((function(){var e;return(null===(e=A)||void 0===e?void 0:e.id)===We?{min:"0",step:"1"}:{}}),[A]),q=Object(a.useCallback)((function(e){var n,t;e.InputProps=Object(W.a)({},null!==(n=e.InputProps)&&void 0!==n?n:{},{},V),e.inputProps=Object(W.a)({},null!==(t=e.inputProps)&&void 0!==t?t:{},{},z);var a=F?F.message:_?R:void 0;return r.a.createElement(hn.a,Object.assign({},d,e,{variant:d.variant||"filled",error:_&&!!R||!!F,helperText:a,name:"paymentMethod",label:B}))}),[d,_,F,R,B,V,z]),K=Object(a.useCallback)((function(e){return v(!0)}),[v]),H=Object(a.useCallback)((function(e){v(!1),e.persist(),setTimeout((function(){j(e)}),0)}),[v,j]),X=Object(a.useCallback)((function(e,n){C({inputValue:g,value:n})}),[C,g]),Y=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),$||C({inputValue:n,value:h})}),[C,h,$]),Q=Object(a.useMemo)((function(){return{value:h,disabled:!!F||D||(null===M||void 0===M?void 0:M.type)===an.FATAL_ERROR||c,multiple:!0,options:P,renderInput:q,renderTags:Yn,freeSolo:N,getOptionLabel:Xn,onChange:X,onInputChange:Y,inputValue:$?"":g,onFocus:K,onBlur:H,open:p&&L&&(null===M||void 0===M?void 0:M.type)!==an.FATAL_ERROR,loading:D,autoSelect:!0,name:"paymentMethod"}}),[P,h,q,N,X,Y,g,$,K,H,p,L,D,F,c,M]);return r.a.createElement(qn.a,Q)},Zn=t(360),et=t(187),nt=function(e){var n=Object(qe.a)(),t=e.opacity,a=void 0===t?.62:t,l=Object(jn.a)(e,["opacity"]);return r.a.createElement(ye.a,Object.assign({},l,{overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:Object(et.fade)(n.palette.background.paper,a)}))},tt=function(e){return r.a.createElement(nt,Object.assign({},e,{children:r.a.createElement(Zn.a,null)}))};function at(){var e=Object(f.a)(["\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      num\n      den\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n"]);return at=function(){return e},e}var rt=E()(at());function lt(){var e=Object(f.a)(["\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ","\n"]);return lt=function(){return e},e}var ot=E()(lt(),rt),it=Symbol(),ut=function(e){var n,t,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=e.handleSubmit,m=Object(ze.c)(),p=m.resetForm,v=m.isSubmitting,b=m.isValid,f=bn(),y=Object(J.a)(f,2),E=y[0],O=y[1],j=Object(a.useCallback)((function(e){return O({msg:e.message,type:an.FATAL_ERROR})}),[O]),h=Object(G.c)(ot,{skip:!i,variables:{id:i},onError:j}),g=h.loading,_=h.error,C=h.data,A=null===C||void 0===C||null===(n=C.journalEntry)||void 0===n?void 0:n.total,S=(null===C||void 0===C||null===(t=C.journalEntry)||void 0===t?void 0:t.refunds)||[],I=Object(a.useMemo)((function(){if(A){var e=S.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:e+a.num/a.den}),0);return A.num/A.den-e}return Number.MAX_SAFE_INTEGER}),[A,S]),x=null===C||void 0===C||null===(l=C.journalEntry)||void 0===l?void 0:l.date,M=Object(a.useMemo)((function(){return x?new Date(x):void 0}),[x]),T=Object(a.useCallback)((function(){d(),p(),O(null)}),[p,d,O]),k=Object(a.useMemo)((function(){return!E||E.type!==an.FATAL_ERROR&&E.type!==an.ERROR?[null,null]:[E.msg,E.type===an.FATAL_ERROR]}),[E]),w=Object(J.a)(k,2),D=w[0],F=w[1],U=null===C||void 0===C||null===(o=C.journalEntry)||void 0===o?void 0:o.type,P=Object(a.useMemo)((function(){var e=g||_||(null!==U&&void 0!==U?U:it)===it?"Refund":"".concat(U===R.Credit?"Give":"Add"," Refund");return F?"Fatal Error":g?"Loading ".concat(e,"..."):v?"Submitting ".concat(e):e}),[g,_,U,F,v]),L=Object(qe.a)();return r.a.createElement(Ge.a,{open:u,onClose:c,onExited:T,disableBackdropClick:v,disableEscapeKeyDown:v,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:s}},r.a.createElement(Ke.a,{style:D?{color:L.palette.error.main}:void 0},P),r.a.createElement(ye.a,{position:"relative"},(g||v)&&!D&&r.a.createElement(tt,{zIndex:"modal"}),!!D&&F&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},D)),r.a.createElement(Xe.a,{dividers:!0},!!D&&!F&&r.a.createElement(He.a,{color:"error"},D),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(On,{minDate:M,disabled:g||v,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(gn,{disabled:g||v,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Qn,{disabled:g||v,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(In,{disabled:g||v,fullWidth:!0,maxTotal:I})),r.a.createElement(Ye.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(kn,{disabled:g||v,label:!0}))))),r.a.createElement(Qe.a,null,!F&&r.a.createElement(Ze.a,{disabled:g||v||!b,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(Ze.a,{disabled:g||v,color:F?"primary":"default",startIcon:!F&&r.a.createElement(nn.a,null),onClick:c},F?"Ok":"Cancel")))},ct=function(e){var n=e.entryId,t=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(G.a)(),c=Object(a.useCallback)(function(){var e=Object(N.a)(V.a.mark((function e(t,a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,ln(u,n||"",t,a);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:an.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[u,n,l]),d=Object(a.useCallback)((function(e){return r.a.createElement(ut,{entryId:n,open:t,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[n,t,l,o]);return r.a.createElement(ze.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})},dt=t(408);function st(){var e=Object(f.a)(["\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return st=function(){return e},e}var mt=E()(st(),$e),pt=function(){var e=Object(N.a)(V.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,m,p,v,b;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(dt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.description!==t.description?null!==(l=null===(o=r.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:"":null,c=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,d=r.reconciled===t.reconciled?null:r.reconciled,s=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(J.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===We?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),m=s.paymentMethod,p=s.paymentMethodAdd,v=s.paymentMethodUpdate,b={id:a,fields:{date:i,description:u,total:c,reconciled:d,paymentMethod:m},paymentMethodAdd:p,paymentMethodUpdate:v},e.next=8,n.mutate({mutation:mt,variables:b});case 8:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function vt(){var e=Object(f.a)(["\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        num\n        den\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n"]);return vt=function(){return e},e}var bt=E()(vt(),rt,zn),ft=function(e){var n=e.refundId,t=e.open,l=e.onClose,o=e.onExited,i=e.journalEntry,u=e.loading,c=e.handleSubmit,d=Object(ze.c)(),s=d.resetForm,m=d.isSubmitting,p=d.isValid,v=bn(),b=Object(J.a)(v,2),f=b[0],y=b[1],E=null===i||void 0===i?void 0:i.total,O=(null===i||void 0===i?void 0:i.refunds)||[],j=Object(a.useMemo)((function(){if(E){var e=O.reduce((function(e,t){var a=t.id,r=t.deleted,l=t.total;return r||a===n?e:e+l.num/l.den}),0);return E.num/E.den-e}return Number.MAX_SAFE_INTEGER}),[E,O,n]),h=null===i||void 0===i?void 0:i.date,g=Object(a.useMemo)((function(){return h?new Date(h):void 0}),[h]),R=Object(a.useCallback)((function(){o(),s(),y(null)}),[s,o,y]),_=Object(a.useMemo)((function(){return!f||f.type!==an.FATAL_ERROR&&f.type!==an.ERROR?[null,null]:[f.msg,f.type===an.FATAL_ERROR]}),[f]),C=Object(J.a)(_,2),A=C[0],S=C[1],I=Object(a.useMemo)((function(){var e="Refund Update";return S?"Fatal Error":u?"Loading ".concat(e,"..."):m?"Submitting ".concat(e):e}),[u,S,m]),x=Object(qe.a)();return r.a.createElement(Ge.a,{open:t,onClose:l,onExited:R,disableBackdropClick:m,disableEscapeKeyDown:m,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:c}},r.a.createElement(Ke.a,{style:A?{color:x.palette.error.main}:void 0},I),r.a.createElement(ye.a,{position:"relative"},(u||m)&&!A&&r.a.createElement(tt,{zIndex:"modal"}),!!A&&S&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},A)),r.a.createElement(Xe.a,{dividers:!0},!!A&&!S&&r.a.createElement(He.a,{color:"error"},A),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(On,{minDate:g,disabled:u||m||!!S,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(gn,{disabled:u||m||!!S,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(Qn,{disabled:u||m||!!S,fullWidth:!0})),r.a.createElement(Ye.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(In,{disabled:u||m||!!S,fullWidth:!0,maxTotal:j})),r.a.createElement(Ye.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(kn,{disabled:u||m||!!S,label:!0}))))),r.a.createElement(Qe.a,null,!S&&r.a.createElement(Ze.a,{disabled:u||m||!p,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(Ze.a,{disabled:u||m||!!S,color:S?"primary":"default",startIcon:!S&&r.a.createElement(nn.a,null),onClick:l},S?"Ok":"Cancel")))},yt=function(e){var n=e.entryId,t=e.refundId,l=e.open,o=e.onClose,i=e.onExited,u=Object(G.c)(bt,{skip:!n,variables:{entryId:n,refundId:t}}),c=u.loading,d=u.error,s=u.data,m=Object(a.useMemo)((function(){return d?{msg:d.message,type:an.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntryRefund,v=Object(a.useMemo)((function(){var e;return p?{date:{inputValue:new Date(p.date),value:p.date},paymentMethod:function(){var e=p.paymentMethod,n=e.ancestors,t=Object(jn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),total:{inputValue:(p.total.num/p.total.den).toFixed(2),value:p.total},reconciled:p.reconciled,description:null!==(e=p.description)&&void 0!==e?e:null}:{}}),[p]),b=Object(G.a)(),f=Object(a.useCallback)(function(){var e=Object(N.a)(V.a.mark((function e(n,a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for refund "'.concat(t,'".'),type:an.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No refund ID.",type:an.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,pt(b,v,t,n,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:an.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[b,v,o,t]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(ft,{entryId:n,refundId:t,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,n,c,o,i,l,t]);return r.a.createElement(ze.a,{initialValues:null!==v&&void 0!==v?v:{},initialStatus:m,enableReinitialize:!0,onSubmit:f,children:y})},Et=t(5622),Ot=t(171);function jt(){var e=Object(f.a)(["\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return jt=function(){return e},e}var ht=E()(jt(),Be),gt=function(){var e=Object(N.a)(V.a.mark((function e(n,t){var a,r,l,o,i,u,c,d,s,m;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:t.paymentMethod.value[t.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),o=l.paymentMethod,i=l.paymentMethodAdd,u=function(){var e=t.source.value[0],n=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===g.Person){var a=Object(Ot.parseName)(n);return{source:{sourceType:g.Person,id:""},businessAdd:null,personAdd:{name:{first:a.firstName,last:a.lastName}}}}return{source:{sourceType:g.Business,id:""},businessAdd:{name:n},personAdd:null}}return{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),c=u.source,d=u.personAdd,s=u.businessAdd,m={fields:{date:t.date.value,department:t.department.id,type:t.type,category:t.category.value[t.category.value.length-1].id,description:(null===(a=t.description)||void 0===a?void 0:a.trim())||null,total:t.total.value,reconciled:null!==(r=t.reconciled)&&void 0!==r?r:null,paymentMethod:o,source:c},paymentMethodAdd:i,personAdd:d,businessAdd:s},e.next=5,n.mutate({mutation:ht,variables:m});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function Rt(){var e=Object(f.a)(["\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return Rt=function(){return e},e}var _t=E()(Rt(),Jn),Ct=function(e){return e.name},At=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(jn.a)(o,["key"]);return r.a.createElement(ye.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(wn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(oe.a,{fontSize:"small"}))}))},St=Symbol(),It=function(e){var n,t,l,o,i,u,c=Object(ze.c)(),d=e.disabled,s=void 0!==d&&d,m=e.required,p=e.entryType,v=Object(jn.a)(e,["entryType"]),b=(null===(n=c.values)||void 0===n||null===(t=n.category)||void 0===t?void 0:t.value)||[],f=(null===(l=c.values)||void 0===l||null===(o=l.category)||void 0===o?void 0:o.inputValue.trimLeft())||"",y=null!==(i=null!==p&&void 0!==p?p:null===(u=c.values)||void 0===u?void 0:u.type)&&void 0!==i?i:null,E=b[b.length-1],O=Object(a.useMemo)((function(){return(null===E||void 0===E?void 0:E.id)?{where:{parent:{eq:E.id},type:{eq:y}}}:{where:{hasParent:!1,type:{eq:y}}}}),[E,y]),j=bn(),h=Object(J.a)(j,2),g=h[0],R=h[1],_=Object(a.useCallback)((function(e){R({msg:e.message,type:an.FATAL_ERROR})}),[R]),C=Object(G.c)(_t,{skip:(null!==y&&void 0!==y?y:St)===St,variables:O,onCompleted:function(){return setTimeout((function(){return c.validateField("category")}),0)},onError:_}),A=C.loading,S=C.error,I=C.data,x=null===I||void 0===I?void 0:I.catOpts,M=Object(a.useMemo)((function(){return x||[]}),[x]),T=Object(a.useCallback)((function(e){var n=(null===e||void 0===e?void 0:e.value)||[];return n[n.length-1]||null?M.length>0?"Sub-category Required":void 0:m?"Category Required":void 0}),[M,m]),k=Object(ze.b)({name:"category",validate:T}),w=Object(J.a)(k,3),D=w[0],F=w[1],U=w[2],P=D.onBlur,L=F.error,N=F.touched,$=U.setValue;Object(a.useEffect)((function(){E&&y!==E.type&&$({inputValue:"",value:[]})}),[y,E,$]);var B=Object(a.useMemo)((function(){return L&&N?L:(null!==y&&void 0!==y?y:St)===St?"Category requires entry type.":S?S.message:""}),[y,L,N,S]),V=Object(a.useMemo)((function(){return A||(null===g||void 0===g?void 0:g.type)===an.FATAL_ERROR||(null!==y&&void 0!==y?y:St)===St||s}),[s,y,g,A]),z=Object(a.useCallback)((function(e){return r.a.createElement(hn.a,Object.assign({},v,{variant:v.variant||"filled"},e,{error:N&&!!L||!!S,disabled:V,helperText:B,name:"category",label:"Category"}))}),[v,N,L,S,V,B]),q=Object(a.useState)(!1),K=Object(J.a)(q,2),H=K[0],X=K[1],Y=Object(a.useCallback)((function(e){return X(!0)}),[X]),Q=Object(a.useCallback)((function(e){X(!1),e.persist(),setTimeout((function(){P(e)}),0)}),[X,P]),Z=Object(a.useCallback)((function(e,n){$({inputValue:f,value:n})}),[$,f]),ee=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),$({inputValue:n,value:b})}),[$,b]),ne=Object(a.useMemo)((function(){return Object(W.a)({},D,{open:H&&M.length>0,onFocus:Y,onBlur:Q,options:M,renderTags:At,forcePopupIcon:!1,disabled:V,value:b,renderInput:z,loading:A,autoSelect:!0,multiple:!0,getOptionLabel:Ct,onInputChange:ee,inputValue:f,onChange:Z,name:"category"})}),[D,H,M,Y,Q,A,V,b,z,ee,f,Z]);return r.a.createElement(qn.a,ne)};function xt(){var e=Object(f.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return xt=function(){return e},e}var Mt=E()(xt(),$n),Tt=function(e){return e.name},kt=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(jn.a)(o,["key"]);return r.a.createElement(ye.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(wn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(oe.a,{fontSize:"small"}))}))},wt=function(e){var n=e.disabled,t=void 0!==n&&n,l=e.required,o=bn(),i=Object(J.a)(o,2),u=i[0],c=i[1],d=Object(a.useCallback)((function(e){c({msg:e.message,type:an.FATAL_ERROR})}),[c]),s=Object(G.c)(Mt,{onError:d,variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),m=s.loading,p=s.error,v=s.data,b=(null===v||void 0===v?void 0:v.deptOpts)||[],f=Object(a.useState)(!1),y=Object(J.a)(f,2),E=y[0],O=y[1],j=Object(a.useState)(""),h=Object(J.a)(j,2),g=h[0],R=h[1],_=Object(a.useCallback)((function(e){return e?b.some((function(n){var t=n.parent;return"Department"===t.__typename&&t.id===e.id}))?"Sub-department Required":void 0:l?"Department Required":void 0}),[b,l]),C=Object(ze.b)({name:"department",validate:_}),A=Object(J.a)(C,3),S=A[0],I=A[1],x=A[2],M=S.value,T=S.onBlur,k=I.error,w=I.touched,D=x.setValue,F=Object(a.useMemo)((function(){return new Map(b.reduce((function(e,n){return e.push([n.id,n]),e}),[]))}),[b]),U=Object(a.useMemo)((function(){if(!M)return[];for(var e=[M],n=M.parent,t=n.__typename,a=n.id;"Business"!==t&&F.has(a);){var r=F.get(a);e.unshift(r);var l=r.parent;t=l.__typename,a=l.id}return e}),[M,F]),P=Object(a.useMemo)((function(){var e,n=null===(e=U[U.length-1])||void 0===e?void 0:e.id;return b.filter((function(e){return n?e.parent.id===n:"Business"===e.parent.__typename}))}),[b,U]),L=Object(a.useMemo)((function(){return U.length>0&&0===P.length}),[U,P]),N=Object(a.useMemo)((function(){return k&&w?k:p?p.message:""}),[k,w,p]),$=Object(a.useMemo)((function(){return m||L||(null===u||void 0===u?void 0:u.type)===an.FATAL_ERROR||t}),[L,t,u,m]),B=Object(a.useCallback)((function(n){return r.a.createElement(hn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:w&&!!k,helperText:N,name:"department",label:"Department",disabled:$}))}),[e,w,k,N,$]),V=Object(a.useCallback)((function(e){return O(!0)}),[O]),z=Object(a.useCallback)((function(e){O(!1),T(e)}),[O,T]),q=Object(a.useCallback)((function(e,n){if(n)if(Array.isArray(n)){var t=n.length;D(0===t?null:n[t-1])}else D(n);else D(null)}),[D]),K=Object(a.useCallback)((function(e,n,t){R((n||"").trimStart())}),[R]),H=Object(a.useMemo)((function(){return Object(W.a)({},S,{open:E&&P.length>0,onFocus:V,onBlur:z,options:P,renderTags:kt,forcePopupIcon:!1,disabled:$,value:U,renderInput:B,loading:m,autoSelect:!0,multiple:!0,getOptionLabel:Tt,onChange:q,onInputChange:K,inputValue:L?"":g,name:"department"})}),[S,E,P,V,z,L,$,U,B,m,q,K,g]);return p?r.a.createElement("pre",null,JSON.stringify(p,null,2)):r.a.createElement(qn.a,H)},Dt=t(304);function Ft(){var e=Object(f.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Ft=function(){return e},e}var Ut=E()(Ft(),Bn,Wn,Vn),Pt=function(e){switch(e){case g.Business:case g.Department:case g.Person:break;default:return"string"===typeof e}return!1},Lt=function(e){switch(e){case g.Business:return"Vendor";case g.Department:return"Department";case g.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},Nt=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(jn.a)(o,["key"]);return Pt(e)?e:r.a.createElement(ye.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(wn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:Lt(e),size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(oe.a,{fontSize:"small"}))}))},$t=function(e,n){var t=n.inputValue,a=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return a.test(Lt(e))}))},Jt=function(e){var n,t=(null===e||void 0===e?void 0:e.value)||[],a=null!==(n=t[0])&&void 0!==n?n:null,r=t.length>1?t[t.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(Pt(r)&&a===g.Person){var l=Object(Ot.parseName)(r);if(!l.firstName.trim())return"First Name Required";if(!l.lastName.trim())return"Last Name Required"}},Bt=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(a.useState)(!1),s=Object(J.a)(d,2),m=s[0],p=s[1],v=Object(ze.b)({name:"source",validate:Jt}),b=Object(J.a)(v,3),f=b[0],y=b[1],E=b[2],O=f.onBlur,j=null!==(n=null===(t=f.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],h=null!==(l=null===(o=f.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",R=y.error,_=y.touched,C=E.setValue,A=null!==(i=j[0])&&void 0!==i?i:null,S=j.length>1?j[j.length-1]:null,I=Object(a.useRef)(""),x=bn(),M=Object(J.a)(x,2),T=M[0],k=M[1],w=Object(a.useCallback)((function(e){k({msg:e.message,type:an.FATAL_ERROR})}),[k]),D=Object(G.c)(Ut,{skip:!I.current&&!j[1],variables:{name:I.current,isBiz:A!==g.Person},onError:w}),F=D.loading,U=D.error,P=D.data,L=Object(a.useMemo)((function(){var e=new Map,n=!0,t=!1,a=void 0;try{for(var r,l=((null===P||void 0===P?void 0:P.businesses)||[])[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value,i=!0,u=!1,c=void 0;try{for(var d,s=o.departments[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var m=d.value;e.set(m.id,m)}}catch(p){u=!0,c=p}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}}}catch(p){t=!0,a=p}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[P]),N=Object(a.useMemo)((function(){if(null===A)return[g.Business,g.Person];if(A===g.Person)return null===S&&(null===P||void 0===P?void 0:P.people)||[];if(!S)return(null===P||void 0===P?void 0:P.businesses)||[];if("string"===typeof S)return[];var e=[],n=!0,t=!1,a=void 0;try{for(var r,l=L.values()[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.__typename===S.__typename&&o.parent.id===S.id&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[A,P,L,S]),$=Object(a.useMemo)((function(){return null!==A&&null===S}),[A,S]),B=Object(a.useMemo)((function(){return j.length>0&&0===N.length&&!$}),[j,N,$]),V=Object(a.useMemo)((function(){return null===A?"Source Type":A===g.Person?"Person Name":1===j.length?"Vendor":2===j.length&&N.length>0?"Department":N.length>0?"Sub-Department":"Vendor"}),[j,N,A]),z=Object(a.useMemo)((function(){return c||B||(null===T||void 0===T?void 0:T.type)===an.FATAL_ERROR}),[B,c,T]),q=Object(a.useCallback)((function(n){var t,a,l;S&&"string"!==typeof S&&"Person"!==S.__typename&&0===N.length&&(n=Object(W.a)({},n,{inputProps:Object(W.a)({},(null===(t=n)||void 0===t?void 0:t.inputProps)||{},{style:Object(W.a)({},(null===(a=n)||void 0===a||null===(l=a.inputProps)||void 0===l?void 0:l.style)||{},{display:"none"})})}));return r.a.createElement(hn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:_&&!!R,helperText:_?R:void 0,name:"source",label:V,disabled:z}))}),[S,N.length,e,_,R,V,z]),K=Object(a.useCallback)((function(e){return p(!0)}),[p]),H=Object(a.useCallback)((function(e){p(!1),e.persist(),setTimeout((function(){return O(e)}),0)}),[p,O]),X=Object(a.useCallback)((function(e,n){var t=n.length-1,a=n[t];if(Pt(a)){var r=[],l=!0,o=!1,i=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;d&&(Dt.checkName(d)&&(d=Dt(d)),r.push(d))}}catch(m){o=!0,i=m}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}var s=r.join(" ").trim();n[t]=s.charAt(0).toUpperCase()+s.substring(1)}C({inputValue:h,value:n})}),[C,h]),Y=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),B||C({inputValue:n,value:j}),null!==A&&null===S&&n&&(I.current=n[0].toLowerCase())}),[C,A,S,j,B,I]),Q=Object(a.useMemo)((function(){return Object(W.a)({},f,{inputValue:B?"":h,open:m&&N.length>0,onFocus:K,onBlur:H,options:N,renderTags:Nt,forcePopupIcon:!1,freeSolo:$,value:j,renderInput:q,loading:F,autoSelect:!0,multiple:!0,getOptionLabel:Lt,onInputChange:Y,onChange:X,filterOptions:$t,name:"source",disabled:z})}),[f,B,h,m,N,K,H,$,j,q,F,Y,X,z]);return U?r.a.createElement("pre",null,JSON.stringify(U,null,2)):r.a.createElement(qn.a,Q)},Vt=t(5644),Wt=t(5621),zt=t(365),qt=t(297),Gt=t(5584),Kt=Symbol(),Ht=function(e){if((null!==e&&void 0!==e?e:Kt)===Kt)return"Type Required"},Xt=function(e){var n=e.disabled,t=void 0!==n&&n,l=bn(),o=Object(J.a)(l,1)[0],i=e.label,u=void 0!==i&&i,c=Object(ze.c)().isSubmitting,d=Object(ze.b)({name:"type",validate:Ht}),s=Object(J.a)(d,3),m=s[0],p=s[1],v=s[2],b=p.error,f=p.touched,y=v.setValue,E=v.setTouched,O=Object(a.useMemo)((function(){return Object(W.a)({size:"small",exclusive:!0,disabled:c},m,{onChange:function(){var e=Object(N.a)(V.a.mark((function e(n,t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==t&&void 0!==t?t:Kt)!==Kt){e.next=2;break}return e.abrupt("return");case 2:return y(t),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:E(!0);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})}),[m,c,y,E]),j=c||t||(null===o||void 0===o?void 0:o.type)===an.FATAL_ERROR,h=Object(a.useMemo)((function(){return r.a.createElement(ye.a,{pl:1,clone:!0},r.a.createElement(Vt.a,Object.assign({},e,O),r.a.createElement(Wt.a,{disabled:j,value:R.Credit},r.a.createElement(zt.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(Ae.b,null))),r.a.createElement(Wt.a,{disabled:j,value:R.Debit},r.a.createElement(zt.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(Ae.a,null)))))}),[e,O,j]);return u?r.a.createElement(qt.a,null,r.a.createElement(xn.a,Object.assign({},e,{labelPlacement:"boolean"===typeof u?void 0:u,control:h,label:"Type"})),f&&!!b&&r.a.createElement(Gt.a,{error:!0},b)):r.a.createElement(qt.a,null,h,!!b&&r.a.createElement(Gt.a,{error:!0},b))};function Yt(){var e=Object(f.a)(["\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Yt=function(){return e},e}var Qt={item:!0,lg:4,sm:6,xs:12},Zt=E()(Yt(),$n),ea=function(e){var n=e.open,t=e.onClose,l=e.loading,o=Object(ze.c)(),i=o.resetForm,u=o.isSubmitting,c=o.isValid,d=o.submitForm,s=bn(),m=Object(J.a)(s,2),p=m[0],v=m[1],b=Object(a.useMemo)((function(){return!p||p.type!==an.FATAL_ERROR&&p.type!==an.ERROR?[null,null]:[p.msg,p.type===an.FATAL_ERROR]}),[p]),f=Object(J.a)(b,2),y=f[0],E=f[1],O=Object(a.useCallback)((function(){i(),v(null)}),[i,v]),j=Object(a.useMemo)((function(){return E?"Fatal Error":u?"Submitting Add Entry...":l?"Loading Add Entry...":"Add Entry"}),[E,u,l]),h=Object(qe.a)(),g=Object(a.useCallback)(Object(N.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(null),e.next=4,d();case 4:t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:an.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,t,v]),R=Object(a.useCallback)(Object(N.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(null),e.next=4,d();case 4:i(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:an.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[d,i,v]),_=Object(a.useCallback)((function(e){return e.preventDefault()}),[]);return r.a.createElement(Ge.a,{open:n,onClose:t,onExited:O,disableBackdropClick:u,disableEscapeKeyDown:u,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:_}},r.a.createElement(Ke.a,{style:y?{color:h.palette.error.main}:void 0},j),r.a.createElement(ye.a,{position:"relative"},(u||l)&&!y&&r.a.createElement(tt,{zIndex:"modal"}),!!y&&E&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},y)),r.a.createElement(Xe.a,{dividers:!0},!!y&&!E&&r.a.createElement(He.a,{color:"error"},y),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,Object.assign({},Qt,{justify:"center",container:!0}),r.a.createElement(Xt,{style:{margin:h.spacing(1)},label:"start",disabled:l||u||!!E})),r.a.createElement(Ye.a,Qt,r.a.createElement(On,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(Bt,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(It,{disabled:l||u||!!E,fullWidth:!0,required:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(wt,{disabled:l||u||!!E,fullWidth:!0,required:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(gn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(Qn,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ye.a,Qt,r.a.createElement(In,{disabled:l||u||!!E,fullWidth:!0})),r.a.createElement(Ye.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},Qt),r.a.createElement(kn,{disabled:l||u||!!E,label:!0}))))),r.a.createElement(Qe.a,null,!E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{onClick:g,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(Ze.a,{onClick:R,disabled:l||u||!c,type:"submit",startIcon:r.a.createElement(Et.a,null),variant:"outlined"},"Add & New")),r.a.createElement(Ze.a,{disabled:u,color:E?"primary":"default",startIcon:!E&&r.a.createElement(nn.a,null),onClick:t},E?"Ok":"Cancel")))},na=function(e){var n=e.open,t=e.onClose,l=e.deptId,o=Object(G.c)(Zt,{skip:!l,variables:{id:l}}),i=o.loading,u=o.error,c=o.data,d=null===c||void 0===c?void 0:c.department,s=Object(a.useMemo)((function(){return d?{department:d}:{}}),[d]),m=Object(a.useMemo)((function(){return u?{msg:u.message,type:an.FATAL_ERROR}:null}),[u]),p=Object(G.a)(),v=Object(a.useCallback)((function(e,n){return gt(p,e,n)}),[p]),b=Object(a.useCallback)((function(e){return r.a.createElement(ea,{open:n,onClose:t,loading:i})}),[n,t,i]);return r.a.createElement(ze.a,{initialValues:s,initialStatus:m,enableReinitialize:!0,onSubmit:v,children:b})};function ta(){var e=Object(f.a)(["\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ta=function(){return e},e}Symbol();var aa=E()(ta(),Be),ra=function(){var e=Object(N.a)(V.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,m,p,v,b,f,y,E,O,j,h;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,n,a,l,o=null!==(e=null===(n=r.category.value[r.category.value.length-1])||void 0===n?void 0:n.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=t.category.value[t.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),i=Object(dt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.department.id===t.department.id?null:r.department.id,c=(null===(l=r.description)||void 0===l?void 0:l.trim())&&r.description!==t.description?r.description.trim():null,d=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,s=r.type===t.type?null:r.type,m=r.reconciled===t.reconciled?null:r.reconciled,p=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(J.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===We?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),v=p.paymentMethod,b=p.paymentMethodAdd,f=p.paymentMethodUpdate,y=function(){var e=r.source.value[0],n=r.source.value[r.source.value.length-1],a=t.source.value[0],l=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===g.Person){var o=Object(Ot.parseName)(n);return{source:{sourceType:g.Person,id:""},businessAdd:null,personAdd:{name:{first:o.firstName,last:o.lastName}}}}return{source:{sourceType:g.Business,id:""},businessAdd:{name:n},personAdd:null}}return e===a&&n.id===l.id?{source:null,businessAdd:null,personAdd:null}:{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),E=y.source,O=y.personAdd,j=y.businessAdd,h={id:a,fields:{category:o,date:i,department:u,description:c,total:d,type:s,source:E,reconciled:m,paymentMethod:v},paymentMethodAdd:b,paymentMethodUpdate:f,personAdd:O,businessAdd:j},console.log(h),e.next=13,n.mutate({mutation:aa,variables:h});case 13:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function la(){var e=Object(f.a)(["\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ...SrcEntryDeptOptFragment\n        ... on Department {\n          ancestors {\n            ...SrcEntryDeptOptFragment\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          num\n          den\n        }\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return la=function(){return e},e}var oa=E()(la(),$n,Jn,Bn,Wn,Vn,zn),ia=new Date(864e13),ua={item:!0,lg:4,sm:6,xs:12},ca=function(e){var n=e.open,t=e.onClose,l=e.onExited,o=e.journalEntry,i=e.loading,u=e.handleSubmit,c=Object(ze.c)(),d=c.resetForm,s=c.isSubmitting,m=c.isValid,p=bn(),v=Object(J.a)(p,2),b=v[0],f=v[1],y=(null===o||void 0===o?void 0:o.refunds)||[],E=Object(a.useMemo)((function(){return y.reduce((function(e,n){var t=Object(J.a)(e,2),a=t[0],r=t[1],l=(n.id,n.deleted),o=n.total,i=n.date;return[l?a:a+o.num/o.den,l?r:Object(pn.a)([r,new Date(i)])]}),[0,ia])}),[y]),O=Object(J.a)(E,2),j=O[0],h=O[1],g=Object(a.useCallback)((function(){l(),d(),f(null)}),[d,l,f]),R=Object(a.useMemo)((function(){return!b||b.type!==an.FATAL_ERROR&&b.type!==an.ERROR?[null,null]:[b.msg,b.type===an.FATAL_ERROR]}),[b]),_=Object(J.a)(R,2),C=_[0],A=_[1],S=Object(a.useMemo)((function(){var e="Entry Update";return A?"Fatal Error":i?"Loading ".concat(e,"..."):s?"Submitting ".concat(e):e}),[i,A,s]),I=Object(qe.a)();return r.a.createElement(Ge.a,{open:n,onClose:t,onExited:g,fullWidth:!0,disableBackdropClick:s,disableEscapeKeyDown:s,maxWidth:"lg",PaperProps:{component:"form",onSubmit:u}},r.a.createElement(Ke.a,{style:C?{color:I.palette.error.main}:void 0},S),r.a.createElement(ye.a,{position:"relative"},(s||i)&&!C&&r.a.createElement(tt,{zIndex:"modal"}),!!C&&A&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},C)),r.a.createElement(Xe.a,{dividers:!0},!!C&&!A&&r.a.createElement(He.a,{color:"error"},C),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,Object.assign({},ua,{justify:"center",container:!0}),r.a.createElement(Xt,{style:{margin:I.spacing(1)},label:"start",disabled:s||i||!!A})),r.a.createElement(Ye.a,ua,r.a.createElement(On,{disabled:s||i||!!A,maxDate:h===ia?void 0:h,fullWidth:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(Bt,{disabled:s||i||!!A,fullWidth:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(It,{disabled:s||i||!!A,fullWidth:!0,required:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(wt,{disabled:s||i||!!A,fullWidth:!0,required:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(gn,{disabled:s||i||!!A,fullWidth:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(Qn,{disabled:s||i||!!A,fullWidth:!0})),r.a.createElement(Ye.a,ua,r.a.createElement(In,{disabled:s||i||!!A,minTotal:j,fullWidth:!0})),r.a.createElement(Ye.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},ua),r.a.createElement(kn,{disabled:s||i||!!A,label:!0}))))),r.a.createElement(Qe.a,null,!A&&r.a.createElement(Ze.a,{disabled:s||!m||i,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(Ze.a,{disabled:s,color:A?"primary":"default",startIcon:!A&&r.a.createElement(nn.a,null),onClick:t},A?"Ok":"Cancel")))},da=function(e){var n,t=e.entryId,l=e.open,o=e.onClose,i=e.onExited,u=Object(G.c)(oa,{skip:!t,variables:{id:t}}),c=u.loading,d=u.error,s=u.data;d&&(console.log(t,oa),console.error(d));var m=Object(a.useMemo)((function(){return d?{msg:d.message,type:an.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntry,v=Object(a.useMemo)((function(){var e;if(!p)return{};var n={inputValue:new Date(p.date),value:p.date},t=function(){var e=p.category,n=e.ancestors,t=Object(jn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),a=function(){var e=p.paymentMethod,n=e.ancestors,t=Object(jn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),r={inputValue:(p.total.num/p.total.den).toFixed(2),value:p.total};return{date:n,category:t,paymentMethod:a,department:p.department,total:r,reconciled:p.reconciled,description:null!==(e=p.description)&&void 0!==e?e:null,type:p.type,source:function(){var e=[],n=null===p||void 0===p?void 0:p.source;switch(null===n||void 0===n?void 0:n.__typename){case"Person":e.push(g.Person,n);break;case"Business":e.push(g.Business,n);break;case"Department":e.push(g.Business);var t=[],a=!0,r=!1,l=void 0;try{for(var o,i=n.ancestors[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;"Business"===u.__typename?e.push(u):t.push(u.id)}}catch(E){r=!0,l=E}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}var c=e[1];if(t.length>0){var d=[],s=!0,m=!1,v=void 0;try{for(var b,f=c.departments[Symbol.iterator]();!(s=(b=f.next()).done);s=!0){var y=b.value;if(-1!==t.indexOf(y.id)&&d.push(y)===t.length)break}}catch(E){m=!0,v=E}finally{try{s||null==f.return||f.return()}finally{if(m)throw v}}d.sort((function(e,n){return e.id===n.parent.id||c.id||e.parent.id?-1:n.id===e.parent.id?1:0})),e.push.apply(e,d)}}return{inputValue:"",value:e}}()}}),[p]),b=Object(G.a)(),f=Object(a.useCallback)(function(){var e=Object(N.a)(V.a.mark((function e(n,a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,ra(b,v,t,n,a);case 4:o(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:an.ERROR});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[b,v,t,o]),y=Object(a.useCallback)((function(e){return r.a.createElement(ca,{open:l,onClose:o,onExited:i,loading:c,journalEntry:null!==p&&void 0!==p?p:null,handleSubmit:e.handleSubmit})}),[l,o,i,c,p]);return r.a.createElement(ze.a,{initialValues:v,initialStatus:m,journalEntry:null!==(n=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==n?n:null,loading:c,onSubmit:f,enableReinitialize:!0,children:y})};function sa(){var e=Object(f.a)(["\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return sa=function(){return e},e}var ma=E()(sa(),Be),pa=function(e){var n=e.entryId,t=e.onClose,l=Object(G.b)(ma),o=Object(J.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Entry...":"Delete Entry"}),[s,c]),v=Object(qe.a)();return r.a.createElement(Ge.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement(Ke.a,{style:s?{color:v.palette.error.main}:void 0},p),r.a.createElement(ye.a,{position:"relative"},c&&r.a.createElement(tt,{zIndex:"modal"}),r.a.createElement(Xe.a,null,s&&r.a.createElement(He.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(He.a,null,"Are you sure you want to delete this entry?"))),r.a.createElement(Qe.a,null,!s&&r.a.createElement(Ze.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(Ze.a,{disabled:c,startIcon:!s&&r.a.createElement(nn.a,null),onClick:t},s?"Close":"Cancel")))};function va(){var e=Object(f.a)(["\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return va=function(){return e},e}var ba=E()(va(),Be),fa=function(e){var n=e.refundId,t=e.onClose,l=Object(G.b)(ba),o=Object(J.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Refund...":"Delete Refund"}),[s,c]),v=Object(qe.a)();return r.a.createElement(Ge.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement(Ke.a,{style:s?{color:v.palette.error.main}:void 0},p),r.a.createElement(ye.a,{position:"relative"},c&&r.a.createElement(tt,{zIndex:"modal"}),r.a.createElement(Xe.a,null,s&&r.a.createElement(He.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(He.a,null,"Are you sure you want to delete this refund?"))),r.a.createElement(Qe.a,null,!s&&r.a.createElement(Ze.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(Ze.a,{disabled:c,startIcon:!s&&r.a.createElement(nn.a,null),onClick:t},s?"Close":"Cancel")))};function ya(){var e=Object(f.a)(["\n  mutation AddEntryItem($id: ID!, $fields: JournalEntryAddItemFields!) {\n    journalEntryAddItem(id: $id, fields: $fields) {\n      journalEntry {\n        ...JournalEntry_1Fragment\n      }\n    }\n  }\n  ","\n"]);return ya=function(){return e},e}var Ea=E()(ya(),Be),Oa=function(){var e=Object(N.a)(V.a.mark((function e(n,t,a){var r,l,o,i;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e,n,t,r=(null===(e=a.category)||void 0===e?void 0:e.value)||[];return null!==(n=null===(t=r[r.length-1])||void 0===t?void 0:t.id)&&void 0!==n?n:null}(),o=function(){var e;return(null===(e=a.department)||void 0===e?void 0:e.id)||null}(),i={id:t,fields:{category:l,department:o,description:(null===(r=a.description)||void 0===r?void 0:r.trim())||null,total:a.total.value}},e.next=5,n.mutate({mutation:Ea,variables:i});case 5:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}();function ja(){var e=Object(f.a)(["\n  fragment JournalEntry_3Fragment on JournalEntry {\n    __typename\n    id\n    type\n    total {\n      num\n      den\n    }\n    items {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n"]);return ja=function(){return e},e}var ha=E()(ja());function ga(){var e=Object(f.a)(["\n  query GetEntryItemState_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_3Fragment\n    }\n  }\n  ","\n"]);return ga=function(){return e},e}var Ra=E()(ga(),ha),_a={item:!0,lg:4,sm:6,xs:12},Ca=function(e){var n,t,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=Object(ze.c)(),m=s.resetForm,p=s.isSubmitting,v=s.isValid,b=s.submitForm,f=bn(),y=Object(J.a)(f,2),E=y[0],O=y[1],j=Object(a.useCallback)((function(e){return O({msg:e.message,type:an.FATAL_ERROR})}),[O]),h=Object(G.c)(Ra,{skip:!i,variables:{id:i},onError:j}),g=h.loading,R=h.data,_=null!==(n=null===R||void 0===R||null===(t=R.journalEntry)||void 0===t?void 0:t.type)&&void 0!==n?n:null,C=null===R||void 0===R||null===(l=R.journalEntry)||void 0===l?void 0:l.total,A=(null===R||void 0===R||null===(o=R.journalEntry)||void 0===o?void 0:o.items)||[],S=Object(a.useMemo)((function(){if(C){var e=A.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:function(e,n){for(var t=new Cn.a({n:e.num,d:e.den}).add({n:n.num,d:n.den}),a=arguments.length,r=new Array(a>2?a-2:0),l=2;l<a;l++)r[l-2]=arguments[l];for(var o=0,i=r;o<i.length;o++){var u=i[o];t=t.add(new Cn.a({n:u.num,d:u.den}))}return{num:t.n,den:t.d}}(e,a)}),{num:0,den:1});return function(e){return Number.parseFloat(new Cn.a({n:e.num,d:e.den}).toString())}(function(e,n){for(var t=new Cn.a({n:e.num,d:e.den}).sub({n:n.num,d:n.den}),a=arguments.length,r=new Array(a>2?a-2:0),l=2;l<a;l++)r[l-2]=arguments[l];for(var o=0,i=r;o<i.length;o++){var u=i[o];t=t.sub(new Cn.a({n:u.num,d:u.den}))}return{num:t.n,den:t.d}}(C,e))}return Number.MAX_SAFE_INTEGER}),[C,A]),I=Object(a.useCallback)((function(){d(),m(),O(null)}),[m,d,O]),x=Object(a.useMemo)((function(){return!E||E.type!==an.FATAL_ERROR&&E.type!==an.ERROR?[null,null]:[E.msg,E.type===an.FATAL_ERROR]}),[E]),M=Object(J.a)(x,2),T=M[0],k=M[1],w=Object(a.useMemo)((function(){return k?"Fatal Error":g?"Loading ".concat("Add Item","..."):p?"Submitting ".concat("Add Item"):"Add Item"}),[g,k,p]),D=Object(qe.a)(),F=Object(a.useCallback)(Object(N.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(null),e.next=4,b();case 4:c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:an.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,c,O]),U=Object(a.useCallback)(Object(N.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(null),e.next=4,b();case 4:m(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),O({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:an.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,m,O]),P=Object(a.useCallback)((function(e){return e.preventDefault()}),[]);return r.a.createElement(Ge.a,{open:u,onClose:c,onExited:I,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:P}},r.a.createElement(Ke.a,{style:T?{color:D.palette.error.main}:void 0},w),r.a.createElement(ye.a,{position:"relative"},(g||p)&&!T&&r.a.createElement(tt,{zIndex:"modal"}),!!T&&k&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},T)),r.a.createElement(Xe.a,{dividers:!0},!!T&&!k&&r.a.createElement(He.a,{color:"error"},T),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,_a,r.a.createElement(In,{disabled:g||p,fullWidth:!0,maxTotal:S})),r.a.createElement(Ye.a,_a,r.a.createElement(gn,{disabled:g||p,fullWidth:!0})),r.a.createElement(Ye.a,_a,r.a.createElement(It,{disabled:g||p||!!k,entryType:_,fullWidth:!0})),r.a.createElement(Ye.a,_a,r.a.createElement(wt,{disabled:g||p||!!k,fullWidth:!0}))))),r.a.createElement(Qe.a,null,!k&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{onClick:F,disabled:g||p||!v,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(Ze.a,{onClick:U,disabled:g||p||!v,type:"submit",startIcon:r.a.createElement(Et.a,null),variant:"outlined"},"Add & New")),r.a.createElement(Ze.a,{disabled:g||p,color:k?"primary":"default",startIcon:!k&&r.a.createElement(nn.a,null),onClick:c},k?"Ok":"Cancel")))},Aa=function(e){var n=e.entryId,t=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(G.a)(),c=Object(a.useCallback)((function(e,t){return Oa(u,n||"",e,t)}),[u,n]),d=Object(a.useCallback)((function(e){return r.a.createElement(Ca,{entryId:n,open:t,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[n,t,l,o]);return r.a.createElement(ze.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})};function Sa(){var e=Object(f.a)(["\n  mutation UpdateEntryItem($id: ID!, $fields: JournalEntryUpdateItemFields!) {\n    journalEntryUpdateItem(id: $id, fields: $fields) {\n      journalEntryItem {\n        ...JournalEntryItem_1Fragment\n      }\n    }\n  }\n  ","\n"]);return Sa=function(){return e},e}var Ia=E()(Sa(),Je),xa=function(){var e=Object(N.a)(V.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,m,p,v;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=r.description!==t.description&&(null===(l=r.description)||void 0===l?void 0:l.trim())||null,s=(null===(o=r.department)||void 0===o?void 0:o.id)===(null===(i=t.department)||void 0===i?void 0:i.id)?null:null!==(u=null===(c=r.department)||void 0===c?void 0:c.id)&&void 0!==u?u:null,m=function(){var e,n,a,l,o=null!==(e=null===(n=r.category.value[r.category.value.length-1])||void 0===n?void 0:n.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=t.category.value[t.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),p=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,v={id:a,fields:{description:d,department:s,category:m,total:p}},e.next=7,n.mutate({mutation:Ia,variables:v});case 7:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function Ma(){var e=Object(f.a)(["\n  query UpdateItemIniState($entryId: ID!, $itemId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_3Fragment\n    }\n    journalEntryItem(id: $itemId) {\n      __typename\n      id\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Ma=function(){return e},e}var Ta=E()(Ma(),ha,$n,Jn),ka={item:!0,lg:4,sm:6,xs:12},wa=function(e){var n,t=e.itemId,l=e.open,o=e.onClose,i=e.onExited,u=e.journalEntry,c=e.loading,d=e.handleSubmit,s=Object(ze.c)(),m=s.resetForm,p=s.isSubmitting,v=s.isValid,b=bn(),f=Object(J.a)(b,2),y=f[0],E=f[1],O=null!==(n=null===u||void 0===u?void 0:u.type)&&void 0!==n?n:null,j=null===u||void 0===u?void 0:u.total,h=(null===u||void 0===u?void 0:u.items)||[],g=Object(a.useMemo)((function(){if(j){var e=h.reduce((function(e,n){var a=n.id,r=n.deleted,l=n.total;return r||a===t?e:e+l.num/l.den}),0);return j.num/j.den-e}return Number.MAX_SAFE_INTEGER}),[j,h,t]),R=Object(a.useCallback)((function(){i(),m(),E(null)}),[m,i,E]),_=Object(a.useMemo)((function(){return!y||y.type!==an.FATAL_ERROR&&y.type!==an.ERROR?[null,null]:[y.msg,y.type===an.FATAL_ERROR]}),[y]),C=Object(J.a)(_,2),A=C[0],S=C[1],I=Object(a.useMemo)((function(){var e="Item Update";return S?"Fatal Error":c?"Loading ".concat(e,"..."):p?"Submitting ".concat(e):e}),[c,S,p]),x=Object(qe.a)();return r.a.createElement(Ge.a,{open:l,onClose:o,onExited:R,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:d}},r.a.createElement(Ke.a,{style:A?{color:x.palette.error.main}:void 0},I),r.a.createElement(ye.a,{position:"relative"},(c||p)&&!A&&r.a.createElement(tt,{zIndex:"modal"}),!!A&&S&&r.a.createElement(nt,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(He.a,{color:"error"},A)),r.a.createElement(Xe.a,{dividers:!0},!!A&&!S&&r.a.createElement(He.a,{color:"error"},A),r.a.createElement(Ye.a,{container:!0,spacing:2},r.a.createElement(Ye.a,ka,r.a.createElement(In,{disabled:c||p,fullWidth:!0,maxTotal:g})),r.a.createElement(Ye.a,ka,r.a.createElement(gn,{disabled:c||p,fullWidth:!0})),r.a.createElement(Ye.a,ka,r.a.createElement(It,{disabled:c||p||!!S,entryType:O,fullWidth:!0})),r.a.createElement(Ye.a,ka,r.a.createElement(wt,{disabled:c||p||!!S,fullWidth:!0}))))),r.a.createElement(Qe.a,null,!S&&r.a.createElement(Ze.a,{disabled:c||p||!v,type:"submit",startIcon:r.a.createElement(en.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(Ze.a,{disabled:c||p||!!S,color:S?"primary":"default",startIcon:!S&&r.a.createElement(nn.a,null),onClick:o},S?"Ok":"Cancel")))},Da=function(e){var n=e.entryId,t=e.itemId,l=e.open,o=e.onClose,i=e.onExited,u=Object(G.c)(Ta,{skip:!n,variables:{entryId:n,itemId:t}}),c=u.loading,d=u.error,s=u.data,m=Object(a.useMemo)((function(){return d?{msg:d.message,type:an.FATAL_ERROR}:null}),[d]),p=null===s||void 0===s?void 0:s.journalEntryItem,v=Object(a.useMemo)((function(){var e,n;return p?{total:{inputValue:(p.total.num/p.total.den).toFixed(2),value:p.total},category:function(){if(!p.category)return{inputValue:"",value:[]};var e=p.category,n=e.ancestors,t=Object(jn.a)(e,["ancestors"]),a=Object($.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),department:null!==(e=p.department)&&void 0!==e?e:null,description:null!==(n=p.description)&&void 0!==n?n:null}:{}}),[p]),b=Object(G.a)(),f=Object(a.useCallback)(function(){var e=Object(N.a)(V.a.mark((function e(n,a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for item "'.concat(t,'".'),type:an.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No item ID.",type:an.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,xa(b,v,t,n,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:an.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[b,v,o,t]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(wa,{entryId:n,itemId:t,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,n,c,o,i,l,t]);return r.a.createElement(ze.a,{initialValues:null!==v&&void 0!==v?v:{},initialStatus:m,enableReinitialize:!0,onSubmit:f,children:y})};function Fa(){var e=Object(f.a)(["\n  mutation DeleteItem($id: ID!) {\n    journalEntryDeleteItem(id: $id) {\n      journalEntryItem {\n        id\n        __typename\n        deleted\n      }\n    }\n  }\n"]);return Fa=function(){return e},e}var Ua,Pa=E()(Fa()),La=function(e){var n=e.itemId,t=e.onClose,l=Object(G.b)(Pa),o=Object(J.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,m=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),p=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Item...":"Delete Item"}),[s,c]),v=Object(qe.a)();return r.a.createElement(Ge.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement(Ke.a,{style:s?{color:v.palette.error.main}:void 0},p),r.a.createElement(ye.a,{position:"relative"},c&&r.a.createElement(tt,{zIndex:"modal"}),r.a.createElement(Xe.a,null,s&&r.a.createElement(He.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(He.a,null,"Are you sure you want to delete this item?"))),r.a.createElement(Qe.a,null,!s&&r.a.createElement(Ze.a,{disabled:c,onClick:m,startIcon:r.a.createElement(ee.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(Ze.a,{disabled:c,startIcon:!s&&r.a.createElement(nn.a,null),onClick:t},s?"Close":"Cancel")))};function Na(){var e=Object(f.a)(["\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Na=function(){return e},e}function $a(){var e=Object(f.a)(["\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return $a=function(){return e},e}function Ja(){var e=Object(f.a)(["\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ja=function(){return e},e}!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(Ua||(Ua={}));var Ba={Add:Object(a.forwardRef)((function(e,n){return r.a.createElement(te.a,Object.assign({},e,{ref:n}))})),Check:Object(a.forwardRef)((function(e,n){return r.a.createElement(ae.a,Object.assign({},e,{ref:n}))})),Clear:Object(a.forwardRef)((function(e,n){return r.a.createElement(re.a,Object.assign({},e,{ref:n}))})),Delete:Object(a.forwardRef)((function(e,n){return r.a.createElement(le.a,Object.assign({},e,{ref:n}))})),DetailPanel:Object(a.forwardRef)((function(e,n){return r.a.createElement(oe.a,Object.assign({},e,{ref:n}))})),Edit:Object(a.forwardRef)((function(e,n){return r.a.createElement(ie.a,Object.assign({},e,{ref:n}))})),Export:Object(a.forwardRef)((function(e,n){return r.a.createElement(ue.a,Object.assign({},e,{ref:n}))})),Filter:Object(a.forwardRef)((function(e,n){return r.a.createElement(ce.a,Object.assign({},e,{ref:n}))})),FirstPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(de.a,Object.assign({},e,{ref:n}))})),LastPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(se.a,Object.assign({},e,{ref:n}))})),NextPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(oe.a,Object.assign({},e,{ref:n}))})),PreviousPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(me.a,Object.assign({},e,{ref:n}))})),ResetSearch:Object(a.forwardRef)((function(e,n){return r.a.createElement(re.a,Object.assign({},e,{ref:n}))})),Search:Object(a.forwardRef)((function(e,n){return r.a.createElement(pe.a,Object.assign({},e,{ref:n}))})),SortArrow:Object(a.forwardRef)((function(e,n){return r.a.createElement(ve.a,Object.assign({},e,{ref:n}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,n){return r.a.createElement(be.a,Object.assign({},e,{ref:n}))})),ViewColumn:Object(a.forwardRef)((function(e,n){return r.a.createElement(fe.a,Object.assign({},e,{ref:n}))}))},Va=V.a.mark((function e(n,t){var a,r,l,o,i,u,c,d,s,m,p,v,b;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:a=n.type===R.Credit?R.Debit:R.Credit,r=!0,l=!1,o=void 0,e.prev=6,i=n.refunds[Symbol.iterator]();case 8:if(r=(u=i.next()).done){e.next=15;break}return c=u.value,e.next=12,Object(W.a)({},n,{},c,{type:a,description:c.description||n.description,refunds:n.id});case 12:r=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),l=!0,o=e.t0;case 21:e.prev=21,e.prev=22,r||null==i.return||i.return();case 24:if(e.prev=24,!l){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:if(t!==Ua.Reconcile){e.next=31;break}return e.abrupt("return");case 31:d=!0,s=!1,m=void 0,e.prev=34,p=n.items[Symbol.iterator]();case 36:if(d=(v=p.next()).done){e.next=43;break}return b=v.value,e.next=40,Object(W.a)({},n,{},b,{category:b.category||n.category,department:b.department||n.department,description:b.description||n.description,items:n.id});case 40:d=!0,e.next=36;break;case 43:e.next=49;break;case 45:e.prev=45,e.t1=e.catch(34),s=!0,m=e.t1;case 49:e.prev=49,e.prev=50,d||null==p.return||p.return();case 52:if(e.prev=52,!s){e.next=55;break}throw m;case 55:return e.finish(52);case 56:return e.finish(49);case 57:case"end":return e.stop()}}),e,null,[[6,17,21,29],[22,,24,28],[34,45,49,57],[50,,52,56]])})),Wa=E()(Ja(),Be),za=E()($a(),Be),qa=E()(Na(),Be),Ga=function(e){var n,t,l,o,i=e.deptId,u=void 0===i?null:i,c=e.journalTitle,d=void 0===c?null:c,s=e.mode,m=Object(a.useState)(!1),p=Object(J.a)(m,2),v=p[0],b=p[1],f=Object(a.useCallback)((function(){b(!1)}),[b]),y=Object(a.useState)(!1),E=Object(J.a)(y,2),O=E[0],j=E[1],h=Object(a.useState)(null),g=Object(J.a)(h,2),_=g[0],C=g[1],A=Object(a.useCallback)((function(){j(!1)}),[j]),S=Object(a.useCallback)((function(){C(null)}),[C]),I=Object(a.useState)(null),x=Object(J.a)(I,2),M=x[0],T=x[1],k=Object(a.useCallback)((function(){T(null)}),[T]),w=Object(a.useState)(!1),D=Object(J.a)(w,2),F=D[0],U=D[1],P=Object(a.useState)(null),L=Object(J.a)(P,2),B=L[0],K=L[1],te=Object(a.useCallback)((function(){U(!1)}),[U]),ae=Object(a.useCallback)((function(){K(null)}),[K]),re=Object(a.useState)(!1),le=Object(J.a)(re,2),oe=le[0],ue=le[1],ce=Object(a.useState)(null),de=Object(J.a)(ce,2),se=de[0],me=de[1],pe=Object(a.useCallback)((function(){ue(!1)}),[ue]),ve=Object(a.useCallback)((function(){me(null)}),[me]),be=Object(a.useState)(null),fe=Object(J.a)(be,2),Ie=fe[0],xe=fe[1],Me=Object(a.useCallback)((function(){xe(null)}),[xe]),Te=Object(a.useState)(!1),ke=Object(J.a)(Te,2),we=ke[0],De=ke[1],Fe=Object(a.useState)(null),Ue=Object(J.a)(Fe,2),Pe=Ue[0],Le=Ue[1],Ne=Object(a.useCallback)((function(){De(!1)}),[De]),$e=Object(a.useCallback)((function(){Le(null)}),[Le]),Je=Object(a.useState)(!1),Be=Object(J.a)(Je,2),ze=Be[0],qe=Be[1],Ge=Object(a.useState)(null),Ke=Object(J.a)(Ge,2),He=Ke[0],Xe=Ke[1],Ye=Object(a.useState)(null),Qe=Object(J.a)(Ye,2),Ze=Qe[0],en=Qe[1],nn=Object(a.useCallback)((function(){en(null)}),[en]),tn=Object(a.useCallback)((function(){qe(!1)}),[qe]),an=Object(a.useCallback)((function(){Xe(null)}),[Xe]),rn=Object(G.b)(za),ln=Object(J.a)(rn,2),on=ln[0],un=ln[1].loading,cn=Object(G.b)(qa),dn=Object(J.a)(cn,2),sn=dn[0],mn=dn[1].loading,pn=Object(a.useMemo)((function(){return u?{where:{department:{eq:u,matchDecedentTree:!0}}}:void 0}),[u]),vn=Object(G.c)(Ve,{variables:pn,fetchPolicy:"cache-and-network"}),bn=vn.loading,fn=vn.error,yn=vn.data,En=vn.subscribeToMore,On=bn&&!(null===yn||void 0===yn?void 0:yn.journalEntries);Object(a.useEffect)((function(){return En({document:Wa,updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var a=t.data.journalEntryUpserted,r=a.department.ancestors;if(u&&a.department.id!==u&&r.every((function(e){return e.id!==u}))){var l=e.journalEntries.filter((function(e){return e.id!==a.id}));return l.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:l})}return e.journalEntries.some((function(e){return e.id===a.id}))?e:Object.assign({},e,{journalEntries:[a].concat(Object($.a)(e.journalEntries))})}})}),[u,En]);var jn=Object(a.useMemo)((function(){return[{field:"reconciled",title:"Reconciled",render:function(e){return e.reconciled?r.a.createElement(Q.a,null):null},sorting:!0,searchable:!0,customSort:function(e,n){return+e.reconciled-+n.reconciled},customFilterAndSearch:function(e,n){return n.reconciled?"reconciled"===(e||"").trim().toLowerCase():"!reconciled"===(e||"").trim().toLowerCase()},hidden:s===Ua.Reconcile,filtering:!1},{field:"total",title:"Total",render:function(e){var n=e.total,t=n.num,a=n.den;return H()(t/a).format("$0,0.00")},searchable:!0,filtering:!1,sorting:!0,customSort:function(e,n){var t=e.total,a=n.total;return t.num/t.den-a.num/a.den},customFilterAndSearch:function(e,n){var t=n.total,a=t.num,r=t.den;return new Y.a([{total:[H()(a/r).format("$0,0.00"),(a/r).toFixed(2)]}],{threshold:.4,useExtendedSearch:!0,keys:["total"]}).search(e).length>0}},{field:"date",title:"Date",render:function(e){var n=e.date;return Object(Se.a)(new Date(n),"MMM dd, yyyy")},searchable:!0,filtering:!1,sorting:!0,defaultSort:"desc",customSort:function(e,n){var t=e.date,a=n.date;return new Date(t).getTime()-new Date(a).getTime()},customFilterAndSearch:function(e,n){var t=n.date,a=new Date(t);return new Y.a([{date:[t,Object(Se.a)(a,"M/d/yy"),Object(Se.a)(a,"MM/d/yy"),Object(Se.a)(a,"M/d/yyyy"),Object(Se.a)(a,"MM/d/yyyy"),Object(Se.a)(a,"MMM dd, yyyy")]}],{threshold:.4,useExtendedSearch:!0,keys:["date"]}).search(e).length>0}},{field:"category",title:"Category",render:function(e,n){var t="group"===n?e.name:e.category.name;return Object(X.a)(t)},searchable:!0,filtering:!1,sorting:!0,customSort:function(e,n){var t=e.category,a=n.category,r=t.name.toUpperCase(),l=a.name.toUpperCase();return r<l?-1:r>l?1:0},customFilterAndSearch:function(e,n){var t=n.category.name;return new Y.a([{category:[t]}],{threshold:.4,useExtendedSearch:!0,keys:["category"]}).search(e).length>0}},{field:"source",title:"Source",render:function(e){var n=e.source;switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}},searchable:!0,filtering:!1,sorting:!0,customSort:function(e,n){var t=e.source,a=n.source,r=function(){switch(t.__typename){case"Person":return t.name.last.toUpperCase();case"Business":return t.bizName.toUpperCase();case"Department":return t.deptName.toUpperCase()}}(),l=function(){switch(a.__typename){case"Person":return a.name.last.toUpperCase();case"Business":return a.bizName.toUpperCase();case"Department":return a.deptName.toUpperCase()}}();return r<l?-1:r>l?1:0},customFilterAndSearch:function(e,n){var t=n.source;return new Y.a([{source:[function(){switch(t.__typename){case"Person":return"".concat(t.name.first," ").concat(t.name.last);case"Business":return t.bizName;case"Department":return t.deptName}}()]}],{threshold:.4,useExtendedSearch:!0,keys:["source"]}).search(e).length>0}},{field:"paymentMethod",title:"Payment Method",render:function(e){var n,t=e.paymentMethod;return(null===(n=t.parent)||void 0===n?void 0:n.id)===We?"CK-".concat(t.name):t.name},searchable:!0,filtering:!1,sorting:!0,customSort:function(e,n){var t=e.paymentMethod,a=n.paymentMethod,r=function(){var e;return((null===(e=t.parent)||void 0===e?void 0:e.id)===We?"CK-".concat(t.name):t.name).toUpperCase()}(),l=function(){var e;return((null===(e=a.parent)||void 0===e?void 0:e.id)===We?"CK-".concat(a.name):a.name).toUpperCase()}();return r<l?-1:r>l?1:0},customFilterAndSearch:function(e,n){var t,a=n.paymentMethod;return new Y.a([{paymentMethod:[(null===(t=a.parent)||void 0===t?void 0:t.id)===We?"CK-".concat(a.name):a.name]}],{threshold:.4,useExtendedSearch:!0,keys:["paymentMethod"]}).search(e).length>0}},{field:"description",title:"Description",render:function(e){return e.description},searchable:!0,filtering:!1,sorting:!1,customFilterAndSearch:function(e,n){var t=n.description;return new Y.a([{description:[(null===t||void 0===t?void 0:t.trim())||""]}],{threshold:.4,useExtendedSearch:!0,keys:["description"]}).search(e).length>0}},{field:"department",title:"Department",render:function(e){var n=e.department;return Object(X.a)(n.name)},searchable:!0,filtering:!1,sorting:!0,customSort:function(e,n){var t=e.department,a=n.department,r=t.name.toUpperCase(),l=a.name.toUpperCase();return r<l?-1:r>l?1:0},customFilterAndSearch:function(e,n){var t=n.department;return new Y.a([{department:[t.name]}],{threshold:.4,useExtendedSearch:!0,keys:["department"]}).search(e).length>0}}]}),[s]),hn=Object(a.useMemo)((function(){return{toolbar:{searchTooltip:r.a.createElement(ye.a,{fontSize:12,component:"span"},'[abc] | [efg] = "abc" OR "efg"',r.a.createElement("br",null),'\'[abc] = EXACTLY "abc"',r.a.createElement("br",null),'![abc] = NOT "abc"',r.a.createElement("br",null),'^[abc] = STARTS WITH "abc"',r.a.createElement("br",null),'!^[abc] = DOES NOT START WITH "abc"',r.a.createElement("br",null),'[abc]$ = ENDS WITH "abc"',r.a.createElement("br",null),'![abc]$ = DOES NOT END WITH "abc"'),nRowsSelected:"Reconcile {0} Entry(s)"}}}),[]),gn=Object(a.useCallback)((function(e,n){return"JournalEntryItem"===e.__typename?n.find((function(n){return n.id===e.items})):void 0}),[]),Rn=Object(a.useState)(new Set),_n=Object(J.a)(Rn,2),Cn=_n[0],An=_n[1],Sn=Object(a.useCallback)((function(e,n){n?Cn.add(e.id):Cn.delete(e.id),An(new Set(Cn))}),[Cn,An]),In=Object(a.useMemo)((function(){return{rowStyle:function(e){var n={};return n.color=e.type===R.Credit?ge.a[900]:Re.a[900],"JournalEntry"===e.__typename&&e.items.filter((function(e){return!e.deleted})).length>0&&Cn.has(e.id)&&(n.backgroundColor=_e.a[100]),"JournalEntryItem"===e.__typename&&(n.backgroundColor=Ce.a[100]),n},maxBodyHeight:"calc(100vh - 53px - 64px)",headerStyle:{position:"sticky",top:0},pageSize:25,pageSizeOptions:[25,50,100],showTitle:!!d,selection:s===Ua.Reconcile,showSelectAllCheckbox:!1,debounceInterval:500,emptyRowsWhenPaging:!1,columnsButton:!0}}),[Cn,d,s]),xn=Object(a.useMemo)((function(){return s===Ua.Reconcile?[{icon:function(e){return r.a.createElement(Z.a,e)},tooltip:"Reconcile Selected",position:"toolbarOnSelect",iconProps:{color:"secondary",fontSize:"large"},onClick:function(){var e=Object(N.a)(V.a.mark((function e(n,t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=Object(N.a)(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.reconciled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"JournalEntryRefund"!==n.__typename){e.next=8;break}return e.next=6,sn({variables:{id:n.id}});case 6:e.next=10;break;case 8:return e.next=10,on({variables:{id:n.id}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}]:[function(e){var n=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Delete Entry",onClick:function(e,n){return T(n.id)}};case"JournalEntryItem":return{tooltip:"Delete Item",onClick:function(e,n){return en(n.id)}};case"JournalEntryRefund":return{tooltip:"Delete Refund",onClick:function(e,n){return xe(n.id)}}}}(),t=n.tooltip,a=n.onClick;return{icon:ee.a,tooltip:t,onClick:a}},function(e){var n=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Edit Entry",onClick:function(e,n){j(!0),C(n.id)}};case"JournalEntryItem":return{tooltip:"Edit Item",onClick:function(e,n){qe(!0),Xe({entryId:n.items,itemId:n.id})}};case"JournalEntryRefund":return{tooltip:"Edit Refund",onClick:function(e,n){ue(!0),me({entryId:n.refunds,refundId:n.id})}}}}(),t=n.tooltip,a=n.onClick;return{icon:ie.a,tooltip:t,onClick:a}},function(e){if("JournalEntry"!==e.__typename)return null;var n=e.type===R.Credit;return{icon:function(e){return n?r.a.createElement(Ae.d,e):r.a.createElement(Ae.c,e)},tooltip:n?"Give Refund":"Add Refund",iconProps:{style:{color:n?Re.a[900]:ge.a[900]}},onClick:function(e,n){U(!0),K(n.id)}}},function(e){return"JournalEntry"!==e.__typename?null:{icon:Ae.e,tooltip:"Itemize",onClick:function(e,n){De(!0),Le(n.id)}}},{icon:function(e){return r.a.createElement(ne.a,e)},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Entry",isFreeAction:!0,onClick:function(){b(!0)}}]}),[s,sn,on,xe,T]),Mn=Object(a.useMemo)((function(){return{Body:fn?function(e){return r.a.createElement(Ee.a,e,r.a.createElement(Oe.a,null,r.a.createElement(je.a,{colSpan:jn.length+(Array.isArray(xn)&&xn.length>0?1:0),align:"left"},r.a.createElement(he.a,{align:"center",color:"error",variant:"h4"},"Error Loading Entries"),r.a.createElement(he.a,{variant:"body1"},fn.message))))}:function(e){return r.a.createElement(z.MTableBody,e)},Row:function(e){var n,t,a=null===(n=e)||void 0===n?void 0:n.data;return a&&"JournalEntry"===a.__typename&&Cn.has(a.id)&&a.items.length>0&&!0!==(null===a||void 0===a||null===(t=a.tableData)||void 0===t?void 0:t.isTreeExpanded)&&(e=Object(W.a)({},e,{data:Object(W.a)({},a,{tableData:Object(W.a)({},a.tableData||{},{isTreeExpanded:!0})})})),r.a.createElement(z.MTableBodyRow,e)}}}),[fn,jn.length,xn,Cn]),Tn=(null===yn||void 0===yn?void 0:yn.journalEntries)||[],kn=Object(a.useMemo)((function(){var e=s===Ua.Reconcile?[function(e){return!e.reconciled&&!e.deleted}]:[function(e){return!e.deleted}];return Tn.reduce((function(n,t){var a=!0,r=!1,l=void 0;try{for(var o,i=function(){var t=o.value;e.every((function(e){return e(t)}))&&n.push(t)},u=Va(t,s)[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)i()}catch(c){r=!0,l=c}finally{try{a||null==u.return||u.return()}finally{if(r)throw l}}return n}),[]).sort((function(e,n){return new Date(n.date).getTime()-new Date(e.date).getTime()}))}),[Tn,s]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{icons:Ba,isLoading:On||un||mn,columns:jn,data:kn,options:In,localization:hn,actions:xn,components:Mn,title:null!==d&&void 0!==d?d:void 0,parentChildData:gn,onTreeExpandChange:Sn}),r.a.createElement(na,{deptId:u,open:v,onClose:f}),r.a.createElement(da,{entryId:_,open:O,onClose:A,onExited:S}),r.a.createElement(pa,{entryId:M,onClose:k}),r.a.createElement(ct,{entryId:B,open:F,onClose:te,onExited:ae}),r.a.createElement(yt,{entryId:null!==(n=null===se||void 0===se?void 0:se.entryId)&&void 0!==n?n:null,refundId:null!==(t=null===se||void 0===se?void 0:se.refundId)&&void 0!==t?t:null,open:oe,onClose:pe,onExited:ve}),r.a.createElement(fa,{refundId:Ie,onClose:Me}),r.a.createElement(Aa,{entryId:Pe,open:we,onClose:Ne,onExited:$e}),r.a.createElement(Da,{entryId:null!==(l=null===He||void 0===He?void 0:He.entryId)&&void 0!==l?l:null,itemId:null!==(o=null===He||void 0===He?void 0:He.itemId)&&void 0!==o?o:null,open:ze,onClose:tn,onExited:an}),r.a.createElement(La,{itemId:Ze,onClose:nn}))},Ka=t(5610),Ha=t(412),Xa=t.n(Ha),Ya=t(414),Qa=t.n(Ya),Za=t(416),er=t.n(Za),nr=t(415),tr=t.n(nr),ar=t(5607),rr=t(5609),lr=t(5608),or=t(165),ir=t(161);function ur(){var e=Object(f.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return ur=function(){return e},e}function cr(){var e=Object(f.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return cr=function(){return e},e}function dr(){var e=Object(f.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return dr=function(){return e},e}function sr(){var e=Object(f.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        num\n        den\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n"]);return sr=function(){return e},e}function mr(){var e=Object(f.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return mr=function(){return e},e}var pr=E()(mr()),vr=E()(sr()),br=E()(dr(),pr,vr);E()(cr(),vr),E()(ur(),vr);function fr(){var e=Object(f.a)(["\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fr=function(){return e},e}function yr(){var e=Object(f.a)(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return yr=function(){return e},e}var Er=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?ge.a[n]:e<.9?or.a[n]:Re.a[n]},Or=function(e){var n=e.spentPercentage,t=e.height;return r.a.createElement(ye.a,{height:t,bgcolor:Er(n),display:"flex",justifyContent:"flex-start"},r.a.createElement(ye.a,{height:"100%",width:"".concat(100*n,"%"),bgcolor:ir.a[400]}))},jr=(E()(yr(),$n),E()(fr(),vr)),hr=function(e){var n,t=e.deptId,l=Object(a.useState)(!1),o=Object(J.a)(l,2),i=o[0],u=o[1],c=Object(a.useCallback)((function(){u(!1)}),[u]),s=Object(a.useMemo)((function(){return{deptId:t,where:{department:{eq:t,matchDecedentTree:!0},deleted:!1}}}),[t]),m=Object(G.c)(br,{variables:s,fetchPolicy:"cache-and-network"}),p=m.loading,v=m.error,b=m.data,f=m.subscribeToMore,y=p&&!(null===b||void 0===b?void 0:b.journalEntries);Object(a.useEffect)((function(){return f({document:jr,updateQuery:function(e,n){var a=n.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(t&&r.department.id!==t&&l.every((function(e){return e.id!==t}))){var o=e.journalEntries.filter((function(e){return e.id!==r.id}));return o.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:o})}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(Object($.a)(e.journalEntries))})}})}),[t,f]);var E=Object(a.useMemo)((function(){return((null===b||void 0===b?void 0:b.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[b]),O=(null===b||void 0===b||null===(n=b.department)||void 0===n?void 0:n.name)||"";Object(a.useEffect)((function(){document.title=O}),[O]);var j=(null===b||void 0===b?void 0:b.department)||null,h=Object(a.useMemo)((function(){var e=new Map,n=0;if(j){var t=function(){if(j.budget){var e=j.budget.amount;return e.num/e.den}return null}();e.set(j.id,{name:j.name,spent:0,budget:t});var a=!0,r=!1,l=void 0;try{for(var o,i=j.descendants[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;n+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(T){r=!0,l=T}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}}var m=0,p=!0,v=!1,b=void 0;try{for(var f,y=E[Symbol.iterator]();!(p=(f=y.next()).done);p=!0){var O=f.value;if(!O.deleted){var h=e.get(O.department.id),g=O.total.num/O.total.den,_=!0,C=!1,A=void 0;try{for(var S,I=O.refunds[Symbol.iterator]();!(_=(S=I.next()).done);_=!0){var x=S.value;x.deleted||(g-=x.total.num/x.total.den)}}catch(T){C=!0,A=T}finally{try{_||null==I.return||I.return()}finally{if(C)throw A}}O.type===R.Credit?(m-=g,h.spent-=g):(m+=g,h.spent+=g)}}}catch(T){v=!0,b=T}finally{try{p||null==y.return||y.return()}finally{if(v)throw b}}var M=function(){if(null===j||void 0===j?void 0:j.budget){var e,t=(null===j||void 0===j||null===(e=j.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return t.num/t.den}return n}();return{totalRemaining:H()(M-m).format("$0,0.00"),budget:H()(M).format("$0,0.00"),spentToBudgetRatio:m/M,deptReport:e}}),[E,j]),g=h.totalRemaining,_=h.budget,C=h.spentToBudgetRatio,A=h.deptReport,S=Object(a.useMemo)((function(){var e=[],n=!0,t=!1,a=void 0;try{for(var l,o=function(){var n=Object(J.a)(l.value,2),t=n[0],a=n[1],o=a.budget,i=a.spent,u=a.name;if(t===(null===j||void 0===j?void 0:j.id))return"continue";var c=r.a.createElement(Ye.a,{key:t,item:!0,xs:12,md:4,lg:3},r.a.createElement(ar.a,null,r.a.createElement(rr.a,{titleTypographyProps:{noWrap:!0},title:u}),r.a.createElement(lr.a,null,function(){if(null===o)return r.a.createElement(ye.a,{color:i>0?Re.a[900]:ge.a[900],clone:!0},r.a.createElement(he.a,{variant:"h6"},"Spent: ".concat(H()(Math.abs(i)).format("$0,0.00"))));var e=o-i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye.a,{color:Er(i/o,900),clone:!0},r.a.createElement(he.a,{variant:"h6"},"".concat(H()(e).format("$0,0.00")," Remaining"))),r.a.createElement(he.a,{variant:"body1"},"of ".concat(H()(o).format("$0,0.00"))),r.a.createElement(Or,{spentPercentage:i/o,height:5}))}())));e.push(c)},i=A[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)o()}catch(u){t=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(t)throw a}}return e}),[A,j]),I=Object(a.useCallback)((function(e){return u(!0)}),[u]);return y?r.a.createElement("p",null,"Loading..."):v?(console.error(v),r.a.createElement("p",null,v.message)):r.a.createElement(ye.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(Ka.a,null,r.a.createElement(ye.a,{padding:8},r.a.createElement(Ye.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ze.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(Xa.a,null),children:"New Entry",onClick:I})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ze.a,{component:d.b,to:"/journal/".concat(t,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Qa.a,null),children:"Reconcile"})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ze.a,{variant:"contained",startIcon:r.a.createElement(tr.a,null),children:"Reports"})),r.a.createElement(Ye.a,{item:!0},r.a.createElement(Ze.a,{component:d.b,to:"/journal/".concat(t),variant:"contained",startIcon:r.a.createElement(er.a,null),children:"Journal"})))),r.a.createElement(ye.a,{flexGrow:1,overflow:"auto"},r.a.createElement(Ye.a,{justify:"center",container:!0,spacing:2},r.a.createElement(Ye.a,{item:!0,xs:12},r.a.createElement(he.a,{align:"center",variant:"h3"},O),r.a.createElement(ye.a,{color:Er(C)},r.a.createElement(he.a,{align:"center",variant:"h4"},"".concat(g," Remaining"))),r.a.createElement(he.a,{align:"center",variant:"subtitle1"},"of ".concat(_)),r.a.createElement(Or,{spentPercentage:C,height:10})),S)),r.a.createElement(na,{deptId:t,open:i,onClose:c})))},gr=t(298),Rr=t(364),_r=t(300);function Cr(){var e=Object(f.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return Cr=function(){return e},e}var Ar=E()(Cr()),Sr=function(e){var n=Object(G.c)(Ar),t=n.loading,l=n.error,o=n.data,i=Object(a.useState)(null),u=Object(J.a)(i,2),c=u[0],s=u[1],m=(null===o||void 0===o?void 0:o.departments)||[],p=Object(a.useMemo)((function(){var e=[],n=new Set,t=!0,a=!1,r=void 0;try{for(var l,o=m[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var i=l.value;"Business"===i.parent.__typename&&e.push(i),i.virtualRoot&&n.add(i.id)}}catch(u){a=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:n}}),[m]),v=p.rootDepts,b=p.virtualRoots,f=Object(a.useMemo)((function(){var e=[];if(c&&b.has(c)){var n=!0,t=!1,a=void 0;try{for(var r,l=m[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.id===c&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}}return e}),[b,c,m]);Object(a.useEffect)((function(){document.title="Select Department"}));var y=Object(a.useCallback)((function(e){var n;s((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||null)}),[s]);if(t)return r.a.createElement("p",null,"Loading...");if(l)return r.a.createElement("p",null,l.message);var E=f.length>0;return r.a.createElement(ye.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(Ka.a,null,r.a.createElement(ye.a,{padding:4,clone:!0},r.a.createElement(he.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(ye.a,{minWidth:"250px !important",clone:!0},r.a.createElement(qt.a,{variant:"filled"},r.a.createElement(gr.a,null,"Department"),r.a.createElement(_r.a,{value:c,onChange:y,autoWidth:!0},v.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete n.component,delete n.to),r.a.createElement(Rr.a,n)}))))),E&&r.a.createElement(ye.a,{pt:2},r.a.createElement(ye.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(qt.a,{variant:"filled"},r.a.createElement(gr.a,null,"Sub Department"),r.a.createElement(_r.a,{autoWidth:!0},f.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(Rr.a,n)}))))))))};function Ir(){var e=Object(f.a)(["\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n"]);return Ir=function(){return e},e}var xr,Mr=function(e){var n=Object(L.f)().id;return n?r.a.createElement(hr,{deptId:n}):r.a.createElement("div",null,"Error: No Dept ID!")},Tr=E()(Ir()),kr=function(e){var n,t=Object(L.f)().id,a=Object(G.c)(Tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?l.department.name:void 0;return r.a.createElement(Ga,{mode:Ua.View,deptId:t,journalTitle:o})},wr=function(e){var n,t=Object(L.f)().id,a=Object(G.c)(Tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?"Reconcile ".concat(l.department.name):"Reconcile";return r.a.createElement(Ga,{mode:Ua.Reconcile,deptId:t,journalTitle:o})},Dr=function(e){return r.a.createElement(L.c,null,r.a.createElement(L.a,{exact:!0,path:"/",component:Sr}),r.a.createElement(L.a,{exact:!0,path:"/department/:id",component:Mr}),r.a.createElement(L.a,{exact:!0,path:"/journal",component:Ga}),r.a.createElement(L.a,{exact:!0,path:"/journal/:id",component:kr}),r.a.createElement(L.a,{exact:!0,path:"/journal/:id/reconcile",component:wr}))},Fr=t(417),Ur=t(47),Pr=t(195),Lr=t.n(Pr),Nr="journalEntryUpsert/CREATE",$r="journalEntryUpsert/CANCEL",Jr="journalEntryUpsert/CLEAR",Br="journalEntryUpsert/SET_SUBMIT_ERROR",Vr="journalEntryUpsert/CLEAR_SUBMIT_ERROR",Wr="journalEntryUpsert/SET_DATE_INPUT",zr="journalEntryUpsert/CLEAR_DATE_INPUT",qr="journalEntryUpsert/SET_DATE_VALUE",Gr="journalEntryUpsert/CLEAR_DATE_VALUE",Kr="journalEntryUpsert/SET_DATE_ERROR",Hr="journalEntryUpsert/CLEAR_DATE_ERROR",Xr="journalEntryUpsert/SET_DEPT_INPUT",Yr="journalEntryUpsert/CLEAR_DEPT_INPUT",Qr="journalEntryUpsert/SET_DEPT_VALUE",Zr="journalEntryUpsert/CLEAR_DEPT_VALUE",el="journalEntryUpsert/SET_DEPT_ERROR",nl="journalEntryUpsert/CLEAR_DEPT_ERROR",tl="journalEntryUpsert/SET_DEPT_OPEN",al="journalEntryUpsert/SET_TYPE_VALUE",rl="journalEntryUpsert/SET_TYPE_ERROR",ll="journalEntryUpsert/CLEAR_TYPE_ERROR",ol="journalEntryUpsert/SET_CAT_INPUT",il="journalEntryUpsert/CLEAR_CAT_INPUT",ul="journalEntryUpsert/SET_CAT_VALUE",cl="journalEntryUpsert/CLEAR_CAT_VALUE",dl="journalEntryUpsert/SET_CAT_ERROR",sl="journalEntryUpsert/CLEAR_CAT_ERROR",ml="journalEntryUpsert/SET_CAT_OPEN",pl="journalEntryUpsert/SET_SRC_TYPE",vl="journalEntryUpsert/SET_SRC_INPUT",bl="journalEntryUpsert/CLEAR_SRC_INPUT",fl="journalEntryUpsert/SET_SRC_VALUE",yl="journalEntryUpsert/CLEAR_SRC_VALUE",El="journalEntryUpsert/SET_SRC_ERROR",Ol="journalEntryUpsert/CLEAR_SRC_ERROR",jl="journalEntryUpsert/SET_SRC_OPEN",hl="journalEntryUpsert/SET_PAY_METHOD_VALUE",gl="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Rl="journalEntryUpsert/SET_PAY_METHOD_ERROR",_l="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Cl="journalEntryUpsert/SET_DSCRPT_VALUE",Al="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Sl="journalEntryUpsert/SET_TOTAL_INPUT",Il="journalEntryUpsert/CLEAR_TOTAL_INPUT",xl="journalEntryUpsert/SET_TOTAL_VALUE",Ml="journalEntryUpsert/CLEAR_TOTAL_VALUE",Tl="journalEntryUpsert/SET_TOTAL_ERROR",kl="journalEntryUpsert/CLEAR_TOTAL_ERROR",wl="journalEntryUpsert/SET_RECONCILED_VALUE",Dl="journalEntryUpsert/CLEAR_RECONCILED_VALUE",Fl=t(65),Ul=function e(n){Object(Fl.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=n},Pl=function(e,n,t,a,r){for(var l=0,o=e.length;l<o;l++){var i=e[l];if(i[a]===t){var u=r(i,n);return u!==i?[].concat(Object($.a)(e.slice(0,l)),[u],Object($.a)(e.slice(l+1))):e}}return e},Ll=Object(Ur.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===Nr?n.payload.entryId||null:e},type:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ul(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case al:return n.value===t.payload.type?n:Object(W.a)({},n,{value:t.payload.type});case rl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case ll:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},date:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ul(null),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Wr:var r=a.payload.input.trimStart();return t.input===r?t:Object(W.a)({},t,{input:r});case zr:return""===t.input?t:Object(W.a)({},t,{input:""});case qr:return(null===(e=t.value)||void 0===e?void 0:e.getTime())===a.payload.value.getTime()?t:Object(W.a)({},t,{value:a.payload.value});case Gr:return t.value?Object(W.a)({},t,{value:null}):t;case Kr:return(null===(n=t.error)||void 0===n?void 0:n.message)===a.payload.error.message?t:Object(W.a)({},t,{error:a.payload.error});case Hr:return t.error?Object(W.a)({},t,{error:null}):t;default:return t}},department:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ul(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:return t.payload.fromDept?Object(W.a)({},n,{value:t.payload.fromDept}):n;case Xr:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case Yr:return""===n.input?n:Object(W.a)({},n,{input:""});case Qr:return n.value===t.payload.value?n:Object(W.a)({},n,{value:t.payload.value});case Zr:return n.value?Object(W.a)({},n,{value:null}):n;case el:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case nl:return n.error?Object(W.a)({},n,{error:null}):n;case tl:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},category:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ul(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ol:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case il:return""===n.input?n:Object(W.a)({},n,{input:""});case ul:return n.value===t.payload.value?n:Object(W.a)({},n,{value:t.payload.value});case cl:return n.value?Object(W.a)({},n,{value:null}):n;case dl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case sl:return n.error?Object(W.a)({},n,{error:null}):n;case ml:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===pl?n.payload.srcType:e},source:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ul(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vl:var a=t.payload.input.trimStart();return n.input===a?n:Object(W.a)({},n,{input:a});case bl:return""===n.input?n:Object(W.a)({},n,{input:""});case fl:return Lr()(n.value,t.payload.value)?n:Object(W.a)({},n,{value:t.payload.value});case yl:return n.value?Object(W.a)({},n,{value:null}):n;case El:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Ol:return n.error?Object(W.a)({},n,{error:null}):n;case jl:var r=t.payload.open;return r===n.open?n:Object(W.a)({},n,{open:r});default:return n}},paymentMethod:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new Ul(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case hl:return t.payload.value&&n.value!==t.payload.value?Object(W.a)({},n,{value:t.payload.value}):n;case gl:return null===n.value?n:Object(W.a)({},n,{value:null});case Rl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case _l:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ul(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Cl:var t=n.payload.value.trimStart();return t&&e.value!==t?Object(W.a)({},e,{value:t}):e;case Al:return null===e.value?e:Object(W.a)({},e,{value:null});default:return e}},total:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ul(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Sl:return n.input===t.payload.input?n:Object(W.a)({},n,{input:t.payload.input});case Il:return""===n.input?n:Object(W.a)({},n,{input:""});case xl:return Lr()(n.value,t.payload.value)?n:Object(W.a)({},n,{value:t.payload.value});case Ml:return null===n.value?n:Object(W.a)({},n,{value:null});case Tl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case kl:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ul(!1),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case wl:return e.value===n.payload.value?e:Object(W.a)({},e,{value:n.payload.value});case Dl:return!1===e.value?e:Object(W.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(xr||(xr={}));var Nl=Object(Ur.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===Nr?n.payload.upsertId:e},values:Ll,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===Nr&&n.payload.fromDept?n.payload.fromDept:e},submit:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:xr.NotSubmitted,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journalEntryUpsert/SUBMIT":return n.status===t.payload.status?n:Object(W.a)({},n,{status:t.payload.status});case Br:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(W.a)({},n,{error:t.payload.error});case Vr:return null===n.error?n:Object(W.a)({},n,{error:null});default:return n}}}),$l=t(101),Jl="tableCells/SET_INDEX",Bl="tableCells/SET_DEFAULT_INDEX",Vl="tableCells/SET_NAME",Wl="tableCells/SET_DEFAULT_NAME",zl="tableCells/SET_WIDTH",ql="tableCells/SET_DEFAULT_WIDTH",Gl="tableCells/COLLAPSE",Kl="tableCells/EXPAND",Hl="tableCells/HIDE",Xl="tableCells/SHOW",Yl="tableCells/RESTORE_DEFAULTS",Ql=function e(n){var t,a;Object(Fl.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(W.a)({},n),this.rowId=n.rowId,this.id=n.id,this.index=n.index,this.name=n.name,this.width=n.width,this.collapsed=null!==(t=null===n||void 0===n?void 0:n.collapsed)&&void 0!==t&&t,this.hidden=null!==(a=null===n||void 0===n?void 0:n.hidden)&&void 0!==a&&a},Zl=function(e,n){switch(n.type){case Jl:return e.index===n.payload.index?e:Object(W.a)({},e,{index:n.payload.index});case Bl:return e.index===e.ini.index?e:Object(W.a)({},e,{index:e.ini.index});case Vl:return e.name===n.payload.name?e:Object(W.a)({},e,{name:n.payload.name});case Wl:return e.name===e.ini.name?e:Object(W.a)({},e,{name:e.ini.name});case zl:return e.width===n.payload.width?e:Object(W.a)({},e,{width:n.payload.width});case ql:return e.width===e.ini.width?e:Object(W.a)({},e,{width:e.ini.width});case Gl:return!0===e.collapsed?e:Object(W.a)({},e,{collapsed:!0});case Kl:return!1===e.collapsed?e:Object(W.a)({},e,{collapsed:!1});case Hl:return!0===e.hidden?e:Object(W.a)({},e,{hidden:!0});case Xl:return!1===e.hidden?e:Object(W.a)({},e,{hidden:!1});case Yl:var t=new Ql(e.ini);return Lr()(e,t)?e:t;default:return e}},eo=V.a.mark((function e(n){var t,a,r,l,o,i,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=new Map,r=0,e.t0=V.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(l=e.t1.value,!n.hasOwnProperty(l)){e.next=24;break}if(o=n[l],i=o.index,null!==(u=void 0===i?null:i)){e.next=13;break}return e.abrupt("continue",4);case 13:if(r!==u){e.next=23;break}return e.next=16,o;case 16:if(!a.has(++r)){e.next=21;break}return e.next=19,a.get(r);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?a.set(u,o):t.push(o);case 24:e.next=4;break;case 26:return e.abrupt("return",t);case 27:case"end":return e.stop()}}),e)})),no=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":return n.payload.id in e?e:Object(W.a)({},e,Object($l.a)({},n.payload.id,new Ql(n.payload)));case Jl:var t=e[n.payload.id].index,a=n.payload.index;if(t===a)return e;if(t<a){var r={},l=!0,o=!1,i=void 0;try{for(var u,c=eo(e)[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;if(d.index>a)break;d.index<t||(d.index===t?r[d.id]=Zl(d,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:a})})):r[d.id]=Zl(d,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:d.index-1})})))}}catch(S){o=!0,i=S}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}return Object(W.a)({},e,{},r)}var s={},m=!0,p=!1,v=void 0;try{for(var b,f=eo(e)[Symbol.iterator]();!(m=(b=f.next()).done);m=!0){var y=b.value;if(y.index>t)break;y.index<a||(y.index===t?s[y.id]=Zl(y,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:a})})):s[y.id]=Zl(y,Object(W.a)({},n,{payload:Object(W.a)({},n.payload,{index:y.index+1})})))}}catch(S){p=!0,v=S}finally{try{m||null==f.return||f.return()}finally{if(p)throw v}}return Object(W.a)({},e,{},s);case Bl:var E={},O=!0,j=!1,h=void 0;try{for(var g,R=eo(e)[Symbol.iterator]();!(O=(g=R.next()).done);O=!0){var _=g.value;E[_.id]=Zl(_,n)}}catch(S){j=!0,h=S}finally{try{O||null==R.return||R.return()}finally{if(j)throw h}}return Object(W.a)({},e,{},E);case Vl:case Wl:case zl:case ql:case Gl:case Kl:case Hl:case Xl:case Yl:if(n.payload.id in e){var C=e[n.payload.id],A=Zl(C,n);return A===C?e:Object(W.a)({},e,Object($l.a)({},n.payload.id,A))}return e;default:return e}},to="journal/OPEN_PAB",ao="journal/CLOSE_PAB",ro=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case to:return!0===e.open?e:Object(W.a)({},e,{open:!0});case ao:return!1===e.open?e:Object(W.a)({},e,{open:!1});default:return e}},lo=Object(Ur.c)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"journal/CREATE_PAB":return n.payload.pabId in e?e:Object(W.a)({},e,Object($l.a)({},n.payload.pabId,ro(void 0,n)));case to:case ao:if(n.payload.pabId in e){var t=n.payload.pabId,a=e[t],r=ro(a,n);return a===r?e:Object(W.a)({},e,Object($l.a)({},t,r))}return e;default:return e}}}),oo=Object(Ur.c)({journal:lo,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Nr:return[].concat(Object($.a)(e),[Nl(void 0,n)]);case $r:case Jr:for(var t=n.payload.upsertId,a=0,r=e.length;a<r;a++)if(e[a].id===t)return[].concat(Object($.a)(e.slice(0,a)),Object($.a)(e.slice(a+1)));return e;case al:case rl:case ll:case Wr:case zr:case qr:case Gr:case Kr:case Hr:case Xr:case Qr:case el:case tl:case Yr:case Zr:case nl:case ol:case il:case ul:case cl:case dl:case sl:case ml:case pl:case vl:case bl:case fl:case yl:case El:case Ol:case jl:case hl:case gl:case Cl:case Al:case Sl:case Il:case xl:case Ml:case Tl:case kl:case"journalEntryUpsert/SUBMIT":case Br:case Vr:case Rl:case _l:case wl:case Dl:return Pl(e,n,n.payload.upsertId,"id",Nl);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":var t=n.payload.rowId;if(t in e){var a=e[t],r=no(a,n);return a===r?e:Object(W.a)({},e,Object($l.a)({},t,r))}return Object(W.a)({},e,Object($l.a)({},t,no(void 0,n)));case Jl:case Bl:case Vl:case Wl:case zl:case ql:case Gl:case Kl:case Hl:case Xl:case Yl:var l=n.payload.rowId;if(l in e){var o=e[l],i=no(o,n);return o===i?e:Object(W.a)({},e,Object($l.a)({},l,i))}return e;default:return e}}}),io=Object(Fr.a)({reducer:oo});function uo(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(i.a,{store:io},r.a.createElement(u.a,{client:P},r.a.createElement(d.a,null,r.a.createElement(Dr,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(uo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5468,1,2]]]);
//# sourceMappingURL=main.2ad058a8.chunk.js.map