(this.webpackJsonpaccounting=this.webpackJsonpaccounting||[]).push([[0],{395:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"PaymentMethodAuthorizedEntity","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5467:function(e,n,t){e.exports=t(5571)},5571:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),l=t(28),o=t.n(l),i=t(171),u=t(71),c=t(5610),d=t(118),s=t(132),p=t(10),m=t(307),f=t(395),v=new m.b({introspectionQueryResultData:f}),b=new m.a({fragmentMatcher:v,addTypename:!1});b.writeData({data:Object(p.a)({},{paginate:{skip:0,limit:1e3},sortBy:[],upsertTransactionLocal:null,lc_journalEntryUpserts:[]})});var y=b,E=t(16),O=t(17),j=t.n(O);function h(){var e=Object(E.a)(["\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n"]);return h=function(){return e},e}var g,R,_,A,C,M,S,T=[j()(h())],x={},w=t(417),I=t(397),D=t(58),k=t(398),U=t(155),F=new w.a({uri:"/graphql",credentials:"same-origin"}),P=new I.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),L=D.a.from([Object(k.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),D.a.split((function(e){var n=e.query,t=Object(U.a)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),P,F)]),N=new s.a({link:L,cache:y,typeDefs:T,resolvers:x}),$=t(131),B=t(46),V=t(50),J=t(15),W=t(23),z=t.n(W),q=t(301),Y=t.n(q),G=t(30),H=t(72),K=t.n(H),X=t(303),Q=t.n(X),Z=t(5641),ee=t(414),ne=t(5636),te=t(5637),ae=t(5621),re=t(5638),le=t(5622),oe=t(5623),ie=t(5624),ue=t(5625),ce=t(5617),de=t(5626),se=t(5627),pe=t(5628),me=t(5629),fe=t(5630),ve=t(5631),be=t(5632),ye=t(5633),Ee=t(5634),Oe=t(5635),je=t(290),he=t(366),ge=t(367),Re=t(363),_e=t(59),Ae=t(164),Ce=t(161),Me=t(170);function Se(){var e=Object(E.a)(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Se=function(){return e},e}function Te(){var e=Object(E.a)(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Te=function(){return e},e}function xe(){var e=Object(E.a)(['\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: "JournalEntries_1", filter: ["where"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ',"\n"]);return xe=function(){return e},e}function we(){var e=Object(E.a)(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ","\n"]);return we=function(){return e},e}function Ie(){var e=Object(E.a)(["\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      num\n      den\n    }\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n"]);return Ie=function(){return e},e}!function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(g||(g={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(R||(R={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(_||(_={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(A||(A={})),function(e){e.NotSubmitted="NOT_SUBMITTED",e.Submitting="SUBMITTING",e.Submitted="SUBMITTED"}(C||(C={})),function(e){e.Update="UPDATE",e.Add="ADD"}(M||(M={})),function(e){e.Asc="ASC",e.Desc="DESC"}(S||(S={}));var De=j()(Ie()),ke=j()(we(),De),Ue=j()(xe(),ke),Fe=(j()(Te(),ke),j()(Se(),ke),"5dc46d0af74afb2c2805bd54"),Pe=t(32),Le=t(29),Ne=t(5585),$e=t(5612),Be=t(5611),Ve=t(5587),Je=t(5603),We=t(5588),ze=t(146),qe=t(5618),Ye=t(5619);function Ge(){var e=Object(E.a)(["\n  mutation AddRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return Ge=function(){return e},e}var He,Ke=j()(Ge(),De),Xe=function(){var e=Object(B.a)(z.a.mark((function e(n,t,a){var r,l,o,i,u,c;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=a.paymentMethod.value[a.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:a.paymentMethod.value[a.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),i=o.paymentMethod,u=o.paymentMethodAdd,c={id:t,fields:{date:a.date.value,description:(null===(r=a.description)||void 0===r?void 0:r.trim())?a.description.trim():null,paymentMethod:i,total:a.total.value,reconciled:null!==(l=a.reconciled)&&void 0!==l?l:null},paymentMethodAdd:u},e.next=4,n.mutate({mutation:Ke,variables:c});case 4:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),Qe=t(38),Ze=t(288),en=t(229),nn=t(166),tn=t(5614),an=t(5615),rn=t(416),ln=t(5616),on=function(e){return function(n){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return{inputValue:n,value:e.apply(void 0,[n].concat(a))}}};!function(e){e[e.NOTIFICATION=0]="NOTIFICATION",e[e.ERROR=1]="ERROR",e[e.FATAL_ERROR=2]="FATAL_ERROR"}(He||(He={}));var un=function(){var e=Object(Pe.c)(),n=e.setStatus,t=e.status,r=Object(a.useCallback)((function(e){t?e&&!Object.keys(e).some((function(n){return e[n]!==t[n]}))||n(e):e&&n(e)}),[n,t]);return[null!==t&&void 0!==t?t:null,r]},cn={inputMode:"numeric"},dn={tabIndex:-1},sn=on((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0],r=n[1];return a&&Object(nn.a)(a)?Object(tn.a)(a):r||""})),pn=function(e){var n,t,l,o=e.variant,i=void 0===o?"filled":o,u=e.autoFocus,c=void 0!==u&&u,d=e.disabled,s=void 0!==d&&d,m=e.maxDate,f=void 0===m?new Date:m,v=e.minDate,b=Object(Pe.c)().isSubmitting,y=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.value)||"").trim();if(!n)return"Date is Required";var t=Object(an.a)(n);return Object(nn.a)(t)?v&&t<v?"Cannot be before ".concat(Object(rn.a)(v,"MM/dd/yyyy")):f<t?"Cannot be after ".concat(Object(rn.a)(f,"MM/dd/yyyy")):void 0:"Invalid Date"}),[v,f]),E=Object(Pe.b)({name:"date",validate:y}),O=Object(J.a)(E,3),j=O[0],h=O[1],g=O[2],R=null!==(n=null===(t=j.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:null,_=h.error,A=h.touched,C=g.setValue,M=g.setTouched,S=null===(l=h.initialValue)||void 0===l?void 0:l.inputValue,T=Object(a.useMemo)((function(){return S&&Object(nn.a)(S)?S:new Date}),[S]),x=Object(a.useMemo)((function(){return{autoFocus:c}}),[c]),w=Object(a.useRef)(!1),I=Object(a.useCallback)((function(){return setTimeout((function(){w.current||M(!0)}),0)}),[M,w]),D=Object(a.useCallback)((function(){return w.current=!0}),[w]),k=Object(a.useCallback)((function(){w.current=!1,I()}),[w,I]),U=Object(a.useCallback)((function(e,n){C(sn(e&&Object(nn.a)(e)?Object(ln.a)([new Date,e]):e,n))}),[C]),F=un(),P=Object(J.a)(F,1)[0],L=Object(a.useMemo)((function(){return Object(p.a)({},j,{disabled:b||s||(null===P||void 0===P?void 0:P.type)===He.FATAL_ERROR,value:R,error:A&&!!_,helperText:A?_:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:i,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date",initialFocusedDate:T,autoOk:!0,InputProps:x,inputProps:cn,placeholder:"mm/dd/yyyy",KeyboardButtonProps:dn,onBlur:I,onOpen:D,onClose:k,onChange:U})}),[R,T,I,_,i,x,b,j,D,k,U,A,s,P]);return r.a.createElement(Qe.a,{utils:en.default},r.a.createElement(Ze.b,Object.assign({maxDate:f},e,L)))},mn=t(47),fn=t(247),vn=function(e){var n,t=e.autoFocus,l=void 0!==t&&t,o=e.disabled,i=void 0!==o&&o,u=e.variant,c=void 0===u?"filled":u,d=Object(mn.a)(e,["autoFocus","disabled","variant"]),s=Object(Pe.b)({name:"description"}),p=Object(J.a)(s,3),m=p[0],f=p[2].setValue,v=Object(a.useCallback)((function(e){var n,t;f((null===e||void 0===e||null===(n=e.target)||void 0===n||null===(t=n.value)||void 0===t?void 0:t.trimLeft())||null)}),[f]),b=Object(a.useMemo)((function(){return{type:"text",autoFocus:l}}),[l]),y=un(),E=Object(J.a)(y,1)[0];return r.a.createElement(fn.a,Object.assign({},d,m,{disabled:i||(null===E||void 0===E?void 0:E.type)===He.FATAL_ERROR,onChange:v,value:null!==(n=m.value)&&void 0!==n?n:"",variant:c,label:"Description",name:"description",InputProps:b}))},bn=t(297),yn=t(408),En=t.n(yn),On={min:"0.00",step:"0.01"},jn=on((function(e){return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=new En.a(("string"===typeof e?Number.parseFloat(e.trim()||"0"):e).toFixed(n)),a=t.n,r=t.d;return{num:a,den:r}}(e,2)})),hn=function(e){var n,t,l=e.autoFocus,o=void 0!==l&&l,i=e.disabled,u=void 0!==i&&i,c=e.variant,d=void 0===c?"filled":c,s=e.maxTotal,p=void 0===s?Number.MAX_SAFE_INTEGER:s,m=e.minTotal,f=void 0===m?0:m,v=Object(mn.a)(e,["autoFocus","disabled","variant","maxTotal","minTotal"]),b=Math.max(.01,f),y=Object(a.useCallback)((function(e){var n=((null===e||void 0===e?void 0:e.inputValue)||"").trim();if(""===n)return"Total Required";var t="string"===typeof n?Number.parseFloat(n):n;return Number.isNaN(t)?"Invalid Number":t>p?"Cannot be greater than ".concat(K()(p).format("$0,0.00")):0===t?"Cannot be 0":t<b?"Cannot be less than ".concat(K()(b).format("$0,0.00")):void 0}),[b,p]),E=Object(Pe.b)({name:"total",validate:y}),O=Object(J.a)(E,3),j=O[0],h=O[1],g=O[2].setValue,R=null!==(n=null===(t=j.value)||void 0===t?void 0:t.inputValue)&&void 0!==n?n:"",_=h.error,A=h.touched,C=Object(a.useMemo)((function(){return{type:"number",autoFocus:o,startAdornment:r.a.createElement(bn.a,{position:"start"},"$")}}),[o]),M=Object(a.useCallback)((function(e){var n;g(jn((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||""))}),[g]),S=Object(a.useMemo)((function(){return A&&_?_:p!==Number.MAX_SAFE_INTEGER&&b>.01?"Max ".concat(K()(p).format("$0,0.00")," & Min ").concat(K()(b).format("$0,0.00")):p!==Number.MAX_SAFE_INTEGER?"Max ".concat(K()(p).format("$0,0.00")):b>.01?"Min ".concat(K()(b).format("$0,0.00")):""}),[A,_,p,b]),T=un(),x=Object(J.a)(T,1)[0];return r.a.createElement(fn.a,Object.assign({},v,j,{disabled:u||(null===x||void 0===x?void 0:x.type)===He.FATAL_ERROR,type:"number",value:R,error:A&&!!_,helperText:S,placeholder:"0.00",label:"Total",name:"total",required:!0,variant:d,inputProps:On,InputProps:C,onChange:M}))},gn=t(381),Rn=t(389),_n={type:"checkbox"},An=function(e){var n,t=e.label,a=e.disabled,l=void 0!==a&&a,o=Object(mn.a)(e,["label","disabled"]),i=Object(Pe.b)({name:"reconciled",type:"checkbox"}),u=Object(J.a)(i,1)[0],c=null!==(n=u.value)&&void 0!==n&&n,d=un(),s=Object(J.a)(d,1)[0];return t?r.a.createElement(gn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===He.FATAL_ERROR,label:"Reconcile",control:r.a.createElement(Rn.a,{inputProps:_n})})):r.a.createElement(Rn.a,Object.assign({},o,u,{value:c,disabled:l||(null===s||void 0===s?void 0:s.type)===He.FATAL_ERROR,inputProps:_n}))},Cn=t(392);function Mn(){var e=Object(E.a)(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Mn=function(){return e},e}function Sn(){var e=Object(E.a)(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return Sn=function(){return e},e}function Tn(){var e=Object(E.a)(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return Tn=function(){return e},e}function xn(){var e=Object(E.a)(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return xn=function(){return e},e}function wn(){var e=Object(E.a)(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return wn=function(){return e},e}function In(){var e=Object(E.a)(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return In=function(){return e},e}var Dn=j()(In()),kn=j()(wn()),Un=j()(xn()),Fn=j()(Tn()),Pn=j()(Sn(),Fn),Ln=j()(Mn()),Nn=t(5640);function $n(){var e=Object(E.a)(["\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return $n=function(){return e},e}var Bn=j()($n(),Ln),Vn=function(e){var n,t,a=null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:[],r=a.length,l=a[r-1],o=a[r-2];if(void 0===l)return"Method Required";if("string"===typeof l){if((null===o||void 0===o?void 0:o.id)===Fe&&!(null!==(t=l.match(/[0-9]/g))&&void 0!==t?t:[]).join(""))return"Check # Required"}else if(l.id===Fe)return"Check # Required"},Jn=function(e){return"string"===typeof e?e:e.name},Wn=function(e,n){var t=e.length-1;return e.map((function(a,l){var o,i,u=t===l,c=n({index:l}),d=c.key,s=Object(mn.a)(c,["key"]),p=e[l-1],m="string"===typeof a;switch(null===p||void 0===p?void 0:p.id){case Fe:o="CK-"+(m?a:a.name);break;default:o=Jn(a)}if(u){if(!m)switch(a.id){case Fe:i=r.a.createElement("span",null,"CK-")}}else i=r.a.createElement(ce.a,{fontSize:"small"});return r.a.createElement(je.a,{key:d,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Cn.a,Object.assign({color:u?"primary":"default",variant:u?"default":"outlined",label:o,size:"medium"},s,{disabled:!u}))," ",i)}))},zn=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(mn.a)(e,["disabled"]),s=Object(a.useState)(!1),m=Object(J.a)(s,2),f=m[0],v=m[1],b=Object(Pe.b)({name:"paymentMethod",validate:Vn}),y=Object(J.a)(b,3),E=y[0],O=y[1],j=y[2],h=E.onBlur,g=null!==(n=null===(t=E.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],R=null!==(l=null===(o=E.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",_=O.error,A=O.touched,C=j.setValue,M=null!==(i=g[g.length-1])&&void 0!==i?i:null,S=Object(a.useMemo)((function(){return null===M?{where:{hasParent:!1}}:{where:{parent:{eq:M.id}}}}),[M]),T=un(),x=Object(J.a)(T,2),w=x[0],I=x[1],D=Object(a.useCallback)((function(e){I({msg:e.message,type:He.FATAL_ERROR})}),[I]),k=Object(G.c)(Bn,{skip:"string"===typeof M,variables:S,onError:D}),U=k.loading,F=k.error,P=k.data,L=Object(a.useMemo)((function(){return(null===P||void 0===P?void 0:P.paymentMethods)&&"string"!==typeof M&&(null===M||void 0===M?void 0:M.id)!==Fe?P.paymentMethods:[]}),[P,M]),N=L.length>0,$=Object(a.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Fe}),[M]),B=Object(a.useMemo)((function(){return!N&&!$}),[N,$]),V=Object(a.useMemo)((function(){var e;return"string"===typeof M||(null===(e=M)||void 0===e?void 0:e.id)===Fe?"Check #":"Payment Method"}),[M]),W=Object(a.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Fe?{type:"number"}:{}}),[M]),z=Object(a.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Fe?{min:"0",step:"1"}:{}}),[M]),q=Object(a.useCallback)((function(e){var n,t;e.InputProps=Object(p.a)({},null!==(n=e.InputProps)&&void 0!==n?n:{},{},W),e.inputProps=Object(p.a)({},null!==(t=e.inputProps)&&void 0!==t?t:{},{},z);var a=F?F.message:A?_:void 0;return r.a.createElement(fn.a,Object.assign({},d,e,{variant:d.variant||"filled",error:A&&!!_||!!F,helperText:a,name:"paymentMethod",label:V}))}),[d,A,F,_,V,W,z]),Y=Object(a.useCallback)((function(e){return v(!0)}),[v]),H=Object(a.useCallback)((function(e){v(!1),e.persist(),setTimeout((function(){h(e)}),0)}),[v,h]),K=Object(a.useCallback)((function(e,n){C({inputValue:R,value:n})}),[C,R]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),B||C({inputValue:n,value:g})}),[C,g,B]),Q=Object(a.useMemo)((function(){return{value:g,disabled:!!F||U||(null===w||void 0===w?void 0:w.type)===He.FATAL_ERROR||c,multiple:!0,options:L,renderInput:q,renderTags:Wn,freeSolo:$,getOptionLabel:Jn,onChange:K,onInputChange:X,inputValue:B?"":R,onFocus:Y,onBlur:H,open:f&&N&&(null===w||void 0===w?void 0:w.type)!==He.FATAL_ERROR,loading:U,autoSelect:!0,name:"paymentMethod"}}),[L,g,q,$,K,X,R,B,Y,H,f,N,U,F,c,w]);return r.a.createElement(Nn.a,Q)},qn=t(360),Yn=t(184),Gn=function(e){var n=Object(Le.a)(),t=e.opacity,a=void 0===t?.62:t,l=Object(mn.a)(e,["opacity"]);return r.a.createElement(je.a,Object.assign({},l,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:Object(Yn.fade)(n.palette.background.paper,a)}))},Hn=function(e){return r.a.createElement(Gn,Object.assign({},e,{children:r.a.createElement(qn.a,null)}))};function Kn(){var e=Object(E.a)(["\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      num\n      den\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n"]);return Kn=function(){return e},e}var Xn=j()(Kn());function Qn(){var e=Object(E.a)(["\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ","\n"]);return Qn=function(){return e},e}var Zn=j()(Qn(),Xn),et=Symbol(),nt=function(e){var n,t,l,o,i=e.entryId,u=e.open,c=e.onClose,d=e.onExited,s=e.handleSubmit,p=Object(Pe.c)(),m=p.resetForm,f=p.isSubmitting,v=p.isValid,b=un(),y=Object(J.a)(b,2),E=y[0],O=y[1],j=Object(a.useCallback)((function(e){return O({msg:e.message,type:He.FATAL_ERROR})}),[O]),h=Object(G.c)(Zn,{skip:!i,variables:{id:i},onError:j}),g=h.loading,R=h.error,_=h.data,C=null===_||void 0===_||null===(n=_.journalEntry)||void 0===n?void 0:n.total,M=(null===_||void 0===_||null===(t=_.journalEntry)||void 0===t?void 0:t.refunds)||[],S=Object(a.useMemo)((function(){if(C){var e=M.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:e+a.num/a.den}),0);return C.num/C.den-e}return Number.MAX_SAFE_INTEGER}),[C,M]),T=null===_||void 0===_||null===(l=_.journalEntry)||void 0===l?void 0:l.date,x=Object(a.useMemo)((function(){return T?new Date(T):void 0}),[T]),w=Object(a.useCallback)((function(){d(),m(),O(null)}),[m,d,O]),I=Object(a.useMemo)((function(){return!E||E.type!==He.FATAL_ERROR&&E.type!==He.ERROR?[null,null]:[E.msg,E.type===He.FATAL_ERROR]}),[E]),D=Object(J.a)(I,2),k=D[0],U=D[1],F=null===_||void 0===_||null===(o=_.journalEntry)||void 0===o?void 0:o.type,P=Object(a.useMemo)((function(){var e=g||R||(null!==F&&void 0!==F?F:et)===et?"Refund":"".concat(F===A.Credit?"Give":"Add"," Refund");return U?"Fatal Error":g?"Loading ".concat(e,"..."):f?"Submitting ".concat(e):e}),[g,R,F,U,f]),L=Object(Le.a)();return r.a.createElement(Ne.a,{open:u,onClose:c,onExited:w,disableBackdropClick:f,disableEscapeKeyDown:f,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:s}},r.a.createElement($e.a,{style:k?{color:L.palette.error.main}:void 0},P),r.a.createElement(je.a,{position:"relative"},(g||f)&&!k&&r.a.createElement(Hn,{zIndex:"modal"}),!!k&&U&&r.a.createElement(Gn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Be.a,{color:"error"},k)),r.a.createElement(Ve.a,{dividers:!0},!!k&&!U&&r.a.createElement(Be.a,{color:"error"},k),r.a.createElement(Je.a,{container:!0,spacing:2},r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(pn,{minDate:x,disabled:g||f,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(vn,{disabled:g||f,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(zn,{disabled:g||f,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(hn,{disabled:g||f,fullWidth:!0,maxTotal:S})),r.a.createElement(Je.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(An,{disabled:g||f,label:!0}))))),r.a.createElement(We.a,null,!U&&r.a.createElement(ze.a,{disabled:g||f||!v,type:"submit",startIcon:r.a.createElement(qe.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(ze.a,{disabled:g||f,color:U?"primary":"default",startIcon:!U&&r.a.createElement(Ye.a,null),onClick:c},U?"Ok":"Cancel")))},tt=function(e){var n=e.entryId,t=e.open,l=e.onClose,o=e.onExited,i=Object(a.useMemo)((function(){return{}}),[]),u=Object(G.a)(),c=Object(a.useCallback)(function(){var e=Object(B.a)(z.a.mark((function e(t,a){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,Xe(u,n||"",t,a);case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:He.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[u,n,l]),d=Object(a.useCallback)((function(e){return r.a.createElement(nt,{entryId:n,open:t,onClose:l,onExited:o,handleSubmit:e.handleSubmit})}),[n,t,l,o]);return r.a.createElement(Pe.a,{initialValues:i,initialStatus:null,enableReinitialize:!0,onSubmit:c,children:d})},at=t(404);function rt(){var e=Object(E.a)(["\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return rt=function(){return e},e}var lt=j()(rt(),De),ot=function(){var e=Object(B.a)(z.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,p,m,f,v;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(at.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.description!==t.description?null!==(l=null===(o=r.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:"":null,c=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,d=r.reconciled===t.reconciled?null:r.reconciled,s=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(J.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Fe?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),p=s.paymentMethod,m=s.paymentMethodAdd,f=s.paymentMethodUpdate,v={id:a,fields:{date:i,description:u,total:c,reconciled:d,paymentMethod:p},paymentMethodAdd:m,paymentMethodUpdate:f},e.next=8,n.mutate({mutation:lt,variables:v});case 8:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function it(){var e=Object(E.a)(["\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        num\n        den\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n"]);return it=function(){return e},e}var ut=j()(it(),Xn,Ln),ct=function(e){var n=e.refundId,t=e.open,l=e.onClose,o=e.onExited,i=e.journalEntry,u=e.loading,c=e.handleSubmit,d=Object(Pe.c)(),s=d.resetForm,p=d.isSubmitting,m=d.isValid,f=un(),v=Object(J.a)(f,2),b=v[0],y=v[1],E=null===i||void 0===i?void 0:i.total,O=(null===i||void 0===i?void 0:i.refunds)||[],j=Object(a.useMemo)((function(){if(E){var e=O.reduce((function(e,t){var a=t.id,r=t.deleted,l=t.total;return r||a===n?e:e+l.num/l.den}),0);return E.num/E.den-e}return Number.MAX_SAFE_INTEGER}),[E,O,n]),h=null===i||void 0===i?void 0:i.date,g=Object(a.useMemo)((function(){return h?new Date(h):void 0}),[h]),R=Object(a.useCallback)((function(){o(),s(),y(null)}),[s,o,y]),_=Object(a.useMemo)((function(){return!b||b.type!==He.FATAL_ERROR&&b.type!==He.ERROR?[null,null]:[b.msg,b.type===He.FATAL_ERROR]}),[b]),A=Object(J.a)(_,2),C=A[0],M=A[1],S=Object(a.useMemo)((function(){var e="Refund Update";return M?"Fatal Error":u?"Loading ".concat(e,"..."):p?"Submitting ".concat(e):e}),[u,M,p]),T=Object(Le.a)();return r.a.createElement(Ne.a,{open:t,onClose:l,onExited:R,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:c}},r.a.createElement($e.a,{style:C?{color:T.palette.error.main}:void 0},S),r.a.createElement(je.a,{position:"relative"},(u||p)&&!C&&r.a.createElement(Hn,{zIndex:"modal"}),!!C&&M&&r.a.createElement(Gn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Be.a,{color:"error"},C)),r.a.createElement(Ve.a,{dividers:!0},!!C&&!M&&r.a.createElement(Be.a,{color:"error"},C),r.a.createElement(Je.a,{container:!0,spacing:2},r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(pn,{minDate:g,disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(vn,{disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(zn,{disabled:u||p||!!M,fullWidth:!0})),r.a.createElement(Je.a,{item:!0,lg:4,sm:6,xs:12},r.a.createElement(hn,{disabled:u||p||!!M,fullWidth:!0,maxTotal:j})),r.a.createElement(Je.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},r.a.createElement(An,{disabled:u||p||!!M,label:!0}))))),r.a.createElement(We.a,null,!M&&r.a.createElement(ze.a,{disabled:u||p||!m,type:"submit",startIcon:r.a.createElement(qe.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(ze.a,{disabled:u||p||!!M,color:M?"primary":"default",startIcon:!M&&r.a.createElement(Ye.a,null),onClick:l},M?"Ok":"Cancel")))},dt=function(e){var n=e.entryId,t=e.refundId,l=e.open,o=e.onClose,i=e.onExited,u=Object(G.c)(ut,{skip:!n,variables:{entryId:n,refundId:t}}),c=u.loading,d=u.error,s=u.data,p=Object(a.useMemo)((function(){return d?{msg:d.message,type:He.FATAL_ERROR}:null}),[d]),m=null===s||void 0===s?void 0:s.journalEntryRefund,f=Object(a.useMemo)((function(){var e;return m?{date:{inputValue:new Date(m.date),value:m.date},paymentMethod:function(){var e=m.paymentMethod,n=e.ancestors,t=Object(mn.a)(e,["ancestors"]),a=Object(V.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),total:{inputValue:(m.total.num/m.total.den).toFixed(2),value:m.total},reconciled:m.reconciled,description:null!==(e=m.description)&&void 0!==e?e:null}:{}}),[m]),v=Object(G.a)(),b=Object(a.useCallback)(function(){var e=Object(B.a)(z.a.mark((function e(n,a){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for refund "'.concat(t,'".'),type:He.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No refund ID.",type:He.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,ot(v,f,t,n,a);case 12:o(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(r=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:He.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,f,o,t]),y=Object(a.useCallback)((function(e){var a;return r.a.createElement(ct,{entryId:n,refundId:t,open:l,onClose:o,onExited:i,journalEntry:null!==(a=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==a?a:null,loading:c,handleSubmit:e.handleSubmit})}),[s,n,c,o,i,l,t]);return r.a.createElement(Pe.a,{initialValues:null!==f&&void 0!==f?f:{},initialStatus:p,enableReinitialize:!0,onSubmit:b,children:y})},st=t(168);function pt(){var e=Object(E.a)(["\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return pt=function(){return e},e}var mt=j()(pt(),ke),ft=function(){var e=Object(B.a)(z.a.mark((function e(n,t){var a,r,l,o,i,u,c,d,s,p;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1];return"string"===typeof e?{paymentMethod:"",paymentMethodAdd:{parent:t.paymentMethod.value[t.paymentMethod.value.length-2].id,refId:e,name:e,active:!1}}:{paymentMethod:e.id,paymentMethodAdd:null}}(),o=l.paymentMethod,i=l.paymentMethodAdd,u=function(){var e=t.source.value[0],n=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===_.Person){var a=Object(st.parseName)(n);return{source:{sourceType:_.Person,id:""},businessAdd:null,personAdd:{name:{first:a.firstName,last:a.lastName}}}}return{source:{sourceType:_.Business,id:""},businessAdd:{name:n},personAdd:null}}return{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),c=u.source,d=u.personAdd,s=u.businessAdd,p={fields:{date:t.date.value,department:t.department.id,type:t.type,category:t.category.value[t.category.value.length-1].id,description:(null===(a=t.description)||void 0===a?void 0:a.trim())||null,total:t.total.value,reconciled:null!==(r=t.reconciled)&&void 0!==r?r:null,paymentMethod:o,source:c},paymentMethodAdd:i,personAdd:d,businessAdd:s},e.next=5,n.mutate({mutation:mt,variables:p});case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function vt(){var e=Object(E.a)(["\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return vt=function(){return e},e}var bt=j()(vt(),kn),yt=function(e){return e.name},Et=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(mn.a)(o,["key"]);return r.a.createElement(je.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Cn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ce.a,{fontSize:"small"}))}))},Ot=Symbol(),jt=function(e){var n,t,l,o,i,u,c=Object(Pe.c)(),d=e.disabled,s=void 0!==d&&d,m=(null===(n=c.values)||void 0===n||null===(t=n.category)||void 0===t?void 0:t.value)||[],f=(null===(l=c.values)||void 0===l||null===(o=l.category)||void 0===o?void 0:o.inputValue.trimLeft())||"",v=null!==(i=null===(u=c.values)||void 0===u?void 0:u.type)&&void 0!==i?i:null,b=m[m.length-1],y=Object(a.useMemo)((function(){return(null===b||void 0===b?void 0:b.id)?{where:{parent:{eq:b.id},type:{eq:v}}}:{where:{hasParent:!1,type:{eq:v}}}}),[b,v]),E=un(),O=Object(J.a)(E,2),j=O[0],h=O[1],g=Object(a.useCallback)((function(e){h({msg:e.message,type:He.FATAL_ERROR})}),[h]),R=Object(G.c)(bt,{skip:(null!==v&&void 0!==v?v:Ot)===Ot,variables:y,onCompleted:function(){return setTimeout((function(){return c.validateField("category")}),0)},onError:g}),_=R.loading,A=R.error,C=R.data,M=null===C||void 0===C?void 0:C.catOpts,S=Object(a.useMemo)((function(){return M||[]}),[M]),T=Object(a.useCallback)((function(e){var n=(null===e||void 0===e?void 0:e.value)||[];return n[n.length-1]||null?S.length>0?"Sub-category Required":void 0:"Category Required"}),[S]),x=Object(Pe.b)({name:"category",validate:T}),w=Object(J.a)(x,3),I=w[0],D=w[1],k=w[2],U=I.onBlur,F=D.error,P=D.touched,L=k.setValue;Object(a.useEffect)((function(){b&&v!==b.type&&L({inputValue:"",value:[]})}),[v,b,L]);var N=Object(a.useMemo)((function(){return F&&P?F:(null!==v&&void 0!==v?v:Ot)===Ot?"Category requires entry type.":A?A.message:""}),[v,F,P,A]),$=Object(a.useMemo)((function(){return _||(null===j||void 0===j?void 0:j.type)===He.FATAL_ERROR||(null!==v&&void 0!==v?v:Ot)===Ot||s}),[s,v,j,_]),B=Object(a.useCallback)((function(n){return r.a.createElement(fn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:P&&!!F||!!A,disabled:$,helperText:N,name:"category",label:"Category"}))}),[e,P,F,A,$,N]),V=Object(a.useState)(!1),W=Object(J.a)(V,2),z=W[0],q=W[1],Y=Object(a.useCallback)((function(e){return q(!0)}),[q]),H=Object(a.useCallback)((function(e){q(!1),e.persist(),setTimeout((function(){U(e)}),0)}),[q,U]),K=Object(a.useCallback)((function(e,n){L({inputValue:f,value:n})}),[L,f]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),L({inputValue:n,value:m})}),[L,m]),Q=Object(a.useMemo)((function(){return Object(p.a)({},I,{open:z&&S.length>0,onFocus:Y,onBlur:H,options:S,renderTags:Et,forcePopupIcon:!1,disabled:$,value:m,renderInput:B,loading:_,autoSelect:!0,multiple:!0,getOptionLabel:yt,onInputChange:X,inputValue:f,onChange:K,name:"category"})}),[I,z,S,Y,H,_,$,m,B,X,f,K]);return r.a.createElement(Nn.a,Q)};function ht(){var e=Object(E.a)(["\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return ht=function(){return e},e}var gt=j()(ht(),Dn),Rt=function(e){return e.name},_t=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(mn.a)(o,["key"]);return r.a.createElement(je.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Cn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:e.name,size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ce.a,{fontSize:"small"}))}))},At=function(e){var n=e.disabled,t=void 0!==n&&n,l=un(),o=Object(J.a)(l,2),i=o[0],u=o[1],c=Object(a.useCallback)((function(e){u({msg:e.message,type:He.FATAL_ERROR})}),[u]),d=Object(G.c)(gt,{onError:c,variables:{fromParent:"5dc4b09bcf96e166daaa0090"}}),s=d.loading,m=d.error,f=d.data,v=(null===f||void 0===f?void 0:f.deptOpts)||[],b=Object(a.useState)(!1),y=Object(J.a)(b,2),E=y[0],O=y[1],j=Object(a.useState)(""),h=Object(J.a)(j,2),g=h[0],R=h[1],_=Object(a.useCallback)((function(e){return e?v.some((function(n){var t=n.parent;return"Department"===t.__typename&&t.id===e.id}))?"Sub-department Required":void 0:"Department Required"}),[v]),A=Object(Pe.b)({name:"department",validate:_}),C=Object(J.a)(A,3),M=C[0],S=C[1],T=C[2],x=M.value,w=M.onBlur,I=S.error,D=S.touched,k=T.setValue,U=Object(a.useMemo)((function(){return new Map(v.reduce((function(e,n){return e.push([n.id,n]),e}),[]))}),[v]),F=Object(a.useMemo)((function(){if(!x)return[];for(var e=[x],n=x.parent,t=n.__typename,a=n.id;"Business"!==t&&U.has(a);){var r=U.get(a);e.unshift(r);var l=r.parent;t=l.__typename,a=l.id}return e}),[x,U]),P=Object(a.useMemo)((function(){var e,n=null===(e=F[F.length-1])||void 0===e?void 0:e.id;return v.filter((function(e){return n?e.parent.id===n:"Business"===e.parent.__typename}))}),[v,F]),L=Object(a.useMemo)((function(){return F.length>0&&0===P.length}),[F,P]),N=Object(a.useMemo)((function(){return I&&D?I:m?m.message:""}),[I,D,m]),$=Object(a.useMemo)((function(){return s||L||(null===i||void 0===i?void 0:i.type)===He.FATAL_ERROR||t}),[L,t,i,s]),B=Object(a.useCallback)((function(n){return r.a.createElement(fn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:D&&!!I,helperText:N,name:"department",label:"Department",disabled:$}))}),[e,D,I,N,$]),V=Object(a.useCallback)((function(e){return O(!0)}),[O]),W=Object(a.useCallback)((function(e){O(!1),w(e)}),[O,w]),z=Object(a.useCallback)((function(e,n){if(n)if(Array.isArray(n)){var t=n.length;k(0===t?null:n[t-1])}else k(n);else k(null)}),[k]),q=Object(a.useCallback)((function(e,n,t){R((n||"").trimStart())}),[R]),Y=Object(a.useMemo)((function(){return Object(p.a)({},M,{open:E&&P.length>0,onFocus:V,onBlur:W,options:P,renderTags:_t,forcePopupIcon:!1,disabled:$,value:F,renderInput:B,loading:s,autoSelect:!0,multiple:!0,getOptionLabel:Rt,onChange:z,onInputChange:q,inputValue:L?"":g,name:"department"})}),[M,E,P,V,W,L,$,F,B,s,z,q,g]);return m?r.a.createElement("pre",null,JSON.stringify(m,null,2)):r.a.createElement(Nn.a,Y)},Ct=t(304);function Mt(){var e=Object(E.a)(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return Mt=function(){return e},e}var St=j()(Mt(),Un,Pn,Fn),Tt=function(e){switch(e){case _.Business:case _.Department:case _.Person:break;default:return"string"===typeof e}return!1},xt=function(e){switch(e){case _.Business:return"Vendor";case _.Department:return"Department";case _.Person:return"Person";default:if("string"===typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},wt=function(e,n){var t=e.length-1;return e.map((function(e,a){var l=t===a,o=n({index:a}),i=o.key,u=Object(mn.a)(o,["key"]);return Tt(e)?e:r.a.createElement(je.a,{key:i,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},r.a.createElement(Cn.a,Object.assign({color:l?"primary":"default",variant:l?"default":"outlined",label:xt(e),size:"medium"},u,{disabled:!l}))," ",!l&&r.a.createElement(ce.a,{fontSize:"small"}))}))},It=function(e,n){var t=n.inputValue,a=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return a.test(xt(e))}))},Dt=function(e){var n,t=(null===e||void 0===e?void 0:e.value)||[],a=null!==(n=t[0])&&void 0!==n?n:null,r=t.length>1?t[t.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(Tt(r)&&a===_.Person){var l=Object(st.parseName)(r);if(!l.firstName.trim())return"First Name Required";if(!l.lastName.trim())return"Last Name Required"}},kt=function(e){var n,t,l,o,i,u=e.disabled,c=void 0!==u&&u,d=Object(a.useState)(!1),s=Object(J.a)(d,2),m=s[0],f=s[1],v=Object(Pe.b)({name:"source",validate:Dt}),b=Object(J.a)(v,3),y=b[0],E=b[1],O=b[2],j=y.onBlur,h=null!==(n=null===(t=y.value)||void 0===t?void 0:t.value)&&void 0!==n?n:[],g=null!==(l=null===(o=y.value)||void 0===o?void 0:o.inputValue)&&void 0!==l?l:"",R=E.error,A=E.touched,C=O.setValue,M=null!==(i=h[0])&&void 0!==i?i:null,S=h.length>1?h[h.length-1]:null,T=Object(a.useRef)(""),x=un(),w=Object(J.a)(x,2),I=w[0],D=w[1],k=Object(a.useCallback)((function(e){D({msg:e.message,type:He.FATAL_ERROR})}),[D]),U=Object(G.c)(St,{skip:!T.current&&!h[1],variables:{name:T.current,isBiz:M!==_.Person},onError:k}),F=U.loading,P=U.error,L=U.data,N=Object(a.useMemo)((function(){var e=new Map,n=!0,t=!1,a=void 0;try{for(var r,l=((null===L||void 0===L?void 0:L.businesses)||[])[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value,i=!0,u=!1,c=void 0;try{for(var d,s=o.departments[Symbol.iterator]();!(i=(d=s.next()).done);i=!0){var p=d.value;e.set(p.id,p)}}catch(m){u=!0,c=m}finally{try{i||null==s.return||s.return()}finally{if(u)throw c}}}}catch(m){t=!0,a=m}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[L]),$=Object(a.useMemo)((function(){if(null===M)return[_.Business,_.Person];if(M===_.Person)return null===S&&(null===L||void 0===L?void 0:L.people)||[];if(!S)return(null===L||void 0===L?void 0:L.businesses)||[];if("string"===typeof S)return[];var e=[],n=!0,t=!1,a=void 0;try{for(var r,l=N.values()[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.__typename===S.__typename&&o.parent.id===S.id&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}return e}),[M,L,N,S]),B=Object(a.useMemo)((function(){return null!==M&&null===S}),[M,S]),V=Object(a.useMemo)((function(){return h.length>0&&0===$.length&&!B}),[h,$,B]),W=Object(a.useMemo)((function(){return null===M?"Source Type":M===_.Person?"Person Name":1===h.length?"Vendor":2===h.length&&$.length>0?"Department":$.length>0?"Sub-Department":"Vendor"}),[h,$,M]),z=Object(a.useMemo)((function(){return F||c||V||(null===I||void 0===I?void 0:I.type)===He.FATAL_ERROR}),[V,c,I,F]),q=Object(a.useCallback)((function(n){var t,a,l;S&&"string"!==typeof S&&"Person"!==S.__typename&&0===$.length&&(n=Object(p.a)({},n,{inputProps:Object(p.a)({},(null===(t=n)||void 0===t?void 0:t.inputProps)||{},{style:Object(p.a)({},(null===(a=n)||void 0===a||null===(l=a.inputProps)||void 0===l?void 0:l.style)||{},{display:"none"})})}));return r.a.createElement(fn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:A&&!!R,helperText:A?R:void 0,name:"source",label:W,disabled:z}))}),[S,$.length,e,A,R,W,z]),Y=Object(a.useCallback)((function(e){return f(!0)}),[f]),H=Object(a.useCallback)((function(e){f(!1),e.persist(),setTimeout((function(){return j(e)}),0)}),[f,j]),K=Object(a.useCallback)((function(e,n){var t=n.length-1,a=n[t];if(Tt(a)){var r=[],l=!0,o=!1,i=void 0;try{for(var u,c=a.split(" ")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;d&&(Ct.checkName(d)&&(d=Ct(d)),r.push(d))}}catch(p){o=!0,i=p}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}var s=r.join(" ").trim();n[t]=s.charAt(0).toUpperCase()+s.substring(1)}C({inputValue:g,value:n})}),[C,g]),X=Object(a.useCallback)((function(e,n,t){n=(n||"").trimStart(),V||C({inputValue:n,value:h}),null!==M&&null===S&&n&&(T.current=n[0].toLowerCase())}),[C,M,S,h,V,T]),Q=Object(a.useMemo)((function(){return Object(p.a)({},y,{inputValue:V?"":g,open:m&&$.length>0,onFocus:Y,onBlur:H,options:$,renderTags:wt,forcePopupIcon:!1,freeSolo:B,value:h,renderInput:q,loading:F,autoSelect:!0,multiple:!0,getOptionLabel:xt,onInputChange:X,onChange:K,filterOptions:It,name:"source",disabled:z})}),[y,V,g,m,$,Y,H,B,h,q,F,X,K,z]);return P?r.a.createElement("pre",null,JSON.stringify(P,null,2)):r.a.createElement(Nn.a,Q)},Ut=t(5642),Ft=t(5620),Pt=t(365),Lt=t(295),Nt=t(5583),$t=Symbol(),Bt=function(e){if((null!==e&&void 0!==e?e:$t)===$t)return"Type Required"},Vt=function(e){var n=e.disabled,t=void 0!==n&&n,l=un(),o=Object(J.a)(l,1)[0],i=e.label,u=void 0!==i&&i,c=Object(Pe.c)().isSubmitting,d=Object(Pe.b)({name:"type",validate:Bt}),s=Object(J.a)(d,3),m=s[0],f=s[1],v=s[2],b=f.error,y=f.touched,E=v.setValue,O=v.setTouched,j=Object(a.useMemo)((function(){return Object(p.a)({size:"small",exclusive:!0,disabled:c},m,{onChange:function(){var e=Object(B.a)(z.a.mark((function e(n,t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!==t&&void 0!==t?t:$t)!==$t){e.next=2;break}return e.abrupt("return");case 2:return E(t),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:O(!0);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()})}),[m,c,E,O]),h=c||t||(null===o||void 0===o?void 0:o.type)===He.FATAL_ERROR,g=Object(a.useMemo)((function(){return r.a.createElement(je.a,{pl:1,clone:!0},r.a.createElement(Ut.a,Object.assign({},e,j),r.a.createElement(Ft.a,{disabled:h,value:A.Credit},r.a.createElement(Pt.a,{arrow:!0,placement:"top",title:"Credit"},r.a.createElement(Me.b,null))),r.a.createElement(Ft.a,{disabled:h,value:A.Debit},r.a.createElement(Pt.a,{arrow:!0,placement:"top",title:"Debit"},r.a.createElement(Me.a,null)))))}),[e,j,h]);return u?r.a.createElement(Lt.a,null,r.a.createElement(gn.a,Object.assign({},e,{labelPlacement:"boolean"===typeof u?void 0:u,control:g,label:"Type"})),y&&!!b&&r.a.createElement(Nt.a,{error:!0},b)):r.a.createElement(Lt.a,null,g,!!b&&r.a.createElement(Nt.a,{error:!0},b))};function Jt(){var e=Object(E.a)(["\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Jt=function(){return e},e}var Wt={item:!0,lg:4,sm:6,xs:12},zt=j()(Jt(),Dn),qt=function(e){var n=e.open,t=e.onClose,l=e.handleSubmit,o=e.loading,i=Object(Pe.c)(),u=i.resetForm,c=i.isSubmitting,d=i.isValid,s=un(),p=Object(J.a)(s,2),m=p[0],f=p[1],v=Object(a.useMemo)((function(){return!m||m.type!==He.FATAL_ERROR&&m.type!==He.ERROR?[null,null]:[m.msg,m.type===He.FATAL_ERROR]}),[m]),b=Object(J.a)(v,2),y=b[0],E=b[1],O=Object(a.useCallback)((function(){u(),f(null)}),[u,f]),j=Object(a.useMemo)((function(){return E?"Fatal Error":c?"Submitting Add Entry...":o?"Loading Add Entry...":"Add Entry"}),[E,c,o]),h=Object(Le.a)();return r.a.createElement(Ne.a,{open:n,onClose:t,onExited:O,disableBackdropClick:c,disableEscapeKeyDown:c,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:l}},r.a.createElement($e.a,{style:y?{color:h.palette.error.main}:void 0},j),r.a.createElement(je.a,{position:"relative"},(c||o)&&!y&&r.a.createElement(Hn,{zIndex:"modal"}),!!y&&E&&r.a.createElement(Gn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Be.a,{color:"error"},y)),r.a.createElement(Ve.a,{dividers:!0},!!y&&!E&&r.a.createElement(Be.a,{color:"error"},y),r.a.createElement(Je.a,{container:!0,spacing:2},r.a.createElement(Je.a,Object.assign({},Wt,{justify:"center",container:!0}),r.a.createElement(Vt,{style:{margin:h.spacing(1)},label:"start",disabled:o||c||!!E})),r.a.createElement(Je.a,Wt,r.a.createElement(pn,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(kt,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(jt,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(At,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(vn,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(zn,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Wt,r.a.createElement(hn,{disabled:o||c||!!E,fullWidth:!0})),r.a.createElement(Je.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},Wt),r.a.createElement(An,{disabled:o||c||!!E,label:!0}))))),r.a.createElement(We.a,null,!E&&r.a.createElement(ze.a,{disabled:o||c||!d,type:"submit",startIcon:r.a.createElement(qe.a,null),color:"primary",variant:"contained"},"Add"),r.a.createElement(ze.a,{disabled:c,color:E?"primary":"default",startIcon:!E&&r.a.createElement(Ye.a,null),onClick:t},E?"Ok":"Cancel")))},Yt=function(e){var n=e.open,t=e.onClose,l=e.deptId,o=Object(G.c)(zt,{skip:!l,variables:{id:l}}),i=o.loading,u=o.error,c=o.data,d=null===c||void 0===c?void 0:c.department,s=Object(a.useMemo)((function(){return d?{department:d}:{}}),[d]),p=Object(a.useMemo)((function(){return u?{msg:u.message,type:He.FATAL_ERROR}:null}),[u]),m=Object(G.a)(),f=Object(a.useCallback)(function(){var e=Object(B.a)(z.a.mark((function e(n,a){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,ft(m,n,a);case 4:t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:He.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[m,t]),v=Object(a.useCallback)((function(e){return r.a.createElement(qt,{open:n,onClose:t,loading:i,handleSubmit:e.handleSubmit})}),[n,t,i]);return r.a.createElement(Pe.a,{initialValues:s,initialStatus:p,enableReinitialize:!0,onSubmit:f,children:v})};function Gt(){var e=Object(E.a)(["\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Gt=function(){return e},e}Symbol();var Ht=j()(Gt(),ke),Kt=function(){var e=Object(B.a)(z.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,p,m,f,v,b,y,E,O,j,h;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,n,a,l,o=null!==(e=null===(n=r.category.value[r.category.value.length-1])||void 0===n?void 0:n.id)&&void 0!==e?e:null;return o===(null!==(a=null===(l=t.category.value[t.category.value.length-1])||void 0===l?void 0:l.id)&&void 0!==a?a:null)?null:o}(),i=Object(at.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.department.id===t.department.id?null:r.department.id,c=(null===(l=r.description)||void 0===l?void 0:l.trim())&&r.description!==t.description?r.description.trim():null,d=r.total.value.num/r.total.value.den===t.total.value.num/t.total.value.den?null:r.total.value,s=r.type===t.type?null:r.type,p=r.reconciled===t.reconciled?null:r.reconciled,m=function(){var e=t.paymentMethod.value[t.paymentMethod.value.length-1],n=r.paymentMethod.value.slice(-2).reverse(),a=Object(J.a)(n,2),l=a[0],o=a[1];return"string"===typeof l?e.parent&&e.parent.id===Fe?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:e.id,fields:{active:null,refId:l,name:l}}}:{paymentMethod:null,paymentMethodAdd:{parent:o.id,refId:l,name:l,active:!1},paymentMethodUpdate:null}:l.id!==e.id?{paymentMethod:l.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null}}(),f=m.paymentMethod,v=m.paymentMethodAdd,b=m.paymentMethodUpdate,y=function(){var e=r.source.value[0],n=r.source.value[r.source.value.length-1],a=t.source.value[0],l=t.source.value[t.source.value.length-1];if("string"===typeof n){if(e===_.Person){var o=Object(st.parseName)(n);return{source:{sourceType:_.Person,id:""},businessAdd:null,personAdd:{name:{first:o.firstName,last:o.lastName}}}}return{source:{sourceType:_.Business,id:""},businessAdd:{name:n},personAdd:null}}return e===a&&n.id===l.id?{source:null,businessAdd:null,personAdd:null}:{source:{sourceType:e,id:n.id},personAdd:null,businessAdd:null}}(),E=y.source,O=y.personAdd,j=y.businessAdd,h={id:a,fields:{category:o,date:i,department:u,description:c,total:d,type:s,source:E,reconciled:p,paymentMethod:f},paymentMethodAdd:v,paymentMethodUpdate:b,personAdd:O,businessAdd:j},console.log(h),e.next=13,n.mutate({mutation:Ht,variables:h});case 13:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function Xt(){var e=Object(E.a)(["\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ... on Department {\n          ancestors {\n            ... on Department {\n              id\n              __typename\n            }\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          num\n          den\n        }\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Xt=function(){return e},e}var Qt=j()(Xt(),Dn,kn,Un,Pn,Fn,Ln),Zt=new Date(864e13),ea={item:!0,lg:4,sm:6,xs:12},na=function(e){var n=e.open,t=e.onClose,l=e.onExited,o=e.journalEntry,i=e.loading,u=e.handleSubmit,c=Object(Pe.c)(),d=c.resetForm,s=c.isSubmitting,p=c.isValid,m=un(),f=Object(J.a)(m,2),v=f[0],b=f[1],y=(null===o||void 0===o?void 0:o.refunds)||[],E=Object(a.useMemo)((function(){return y.reduce((function(e,n){var t=Object(J.a)(e,2),a=t[0],r=t[1],l=(n.id,n.deleted),o=n.total,i=n.date;return[l?a:a+o.num/o.den,l?r:Object(ln.a)([r,new Date(i)])]}),[0,Zt])}),[y]),O=Object(J.a)(E,2),j=O[0],h=O[1],g=Object(a.useCallback)((function(){l(),d(),b(null)}),[d,l,b]),R=Object(a.useMemo)((function(){return!v||v.type!==He.FATAL_ERROR&&v.type!==He.ERROR?[null,null]:[v.msg,v.type===He.FATAL_ERROR]}),[v]),_=Object(J.a)(R,2),A=_[0],C=_[1],M=Object(a.useMemo)((function(){var e="Entry Update";return C?"Fatal Error":i?"Loading ".concat(e,"..."):s?"Submitting ".concat(e):e}),[i,C,s]),S=Object(Le.a)();return r.a.createElement(Ne.a,{open:n,onClose:t,onExited:g,fullWidth:!0,disableBackdropClick:s,disableEscapeKeyDown:s,maxWidth:"lg",PaperProps:{component:"form",onSubmit:u}},r.a.createElement($e.a,{style:A?{color:S.palette.error.main}:void 0},M),r.a.createElement(je.a,{position:"relative"},(s||i)&&!A&&r.a.createElement(Hn,{zIndex:"modal"}),!!A&&C&&r.a.createElement(Gn,{opacity:.78,zIndex:"modal",padding:2},r.a.createElement(Be.a,{color:"error"},A)),r.a.createElement(Ve.a,{dividers:!0},!!A&&!C&&r.a.createElement(Be.a,{color:"error"},A),r.a.createElement(Je.a,{container:!0,spacing:2},r.a.createElement(Je.a,Object.assign({},ea,{justify:"center",container:!0}),r.a.createElement(Vt,{style:{margin:S.spacing(1)},label:"start",disabled:s||i||!!C})),r.a.createElement(Je.a,ea,r.a.createElement(pn,{disabled:s||i||!!C,maxDate:h===Zt?void 0:h,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(kt,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(jt,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(At,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(vn,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(zn,{disabled:s||i||!!C,fullWidth:!0})),r.a.createElement(Je.a,ea,r.a.createElement(hn,{disabled:s||i||!!C,minTotal:j,fullWidth:!0})),r.a.createElement(Je.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},ea),r.a.createElement(An,{disabled:s||i||!!C,label:!0}))))),r.a.createElement(We.a,null,!C&&r.a.createElement(ze.a,{disabled:s||!p||i,type:"submit",startIcon:r.a.createElement(qe.a,null),color:"primary",variant:"contained"},"Update"),r.a.createElement(ze.a,{disabled:s,color:C?"primary":"default",startIcon:!C&&r.a.createElement(Ye.a,null),onClick:t},C?"Ok":"Cancel")))},ta=function(e){var n,t=e.entryId,l=e.open,o=e.onClose,i=e.onExited,u=Object(G.c)(Qt,{skip:!t,variables:{id:t}}),c=u.loading,d=u.error,s=u.data,p=Object(a.useMemo)((function(){return d?{msg:d.message,type:He.FATAL_ERROR}:null}),[d]),m=null===s||void 0===s?void 0:s.journalEntry,f=Object(a.useMemo)((function(){var e;if(!m)return{};var n={inputValue:new Date(m.date),value:m.date},t=function(){var e=m.category,n=e.ancestors,t=Object(mn.a)(e,["ancestors"]),a=Object(V.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),a=function(){var e=m.paymentMethod,n=e.ancestors,t=Object(mn.a)(e,["ancestors"]),a=Object(V.a)(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),r={inputValue:(m.total.num/m.total.den).toFixed(2),value:m.total};return{date:n,category:t,paymentMethod:a,department:m.department,total:r,reconciled:m.reconciled,description:null!==(e=m.description)&&void 0!==e?e:null,type:m.type,source:function(){var e=[],n=null===m||void 0===m?void 0:m.source;switch(null===n||void 0===n?void 0:n.__typename){case"Person":e.push(_.Person,n);break;case"Business":e.push(_.Business,n);break;case"Department":e.push(_.Business);var t=[],a=!0,r=!1,l=void 0;try{for(var o,i=n.ancestors[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value;"Business"===u.__typename?e.push(u):t.push(u.id)}}catch(E){r=!0,l=E}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}var c=e[1];if(t.length>0){var d=[],s=!0,p=!1,f=void 0;try{for(var v,b=c.departments[Symbol.iterator]();!(s=(v=b.next()).done);s=!0){var y=v.value;if(-1!==t.indexOf(y.id)&&d.push(y)===t.length)break}}catch(E){p=!0,f=E}finally{try{s||null==b.return||b.return()}finally{if(p)throw f}}d.sort((function(e,n){return e.id===n.parent.id||c.id||e.parent.id?-1:n.id===e.parent.id?1:0})),e.push.apply(e,d)}}return{inputValue:"",value:e}}()}}),[m]),v=Object(G.a)(),b=Object(a.useCallback)(function(){var e=Object(B.a)(z.a.mark((function e(n,a){var r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,Kt(v,f,t,n,a);case 4:o(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a.setStatus({msg:null!==(r=e.t0.message)&&void 0!==r?r:"".concat(e.t0),type:He.ERROR});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,f,t,o]),y=Object(a.useCallback)((function(e){return r.a.createElement(na,{open:l,onClose:o,onExited:i,loading:c,journalEntry:null!==m&&void 0!==m?m:null,handleSubmit:e.handleSubmit})}),[l,o,i,c,m]);return r.a.createElement(Pe.a,{initialValues:f,initialStatus:p,journalEntry:null!==(n=null===s||void 0===s?void 0:s.journalEntry)&&void 0!==n?n:null,loading:c,onSubmit:b,enableReinitialize:!0,children:y})};function aa(){var e=Object(E.a)(["\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return aa=function(){return e},e}var ra=j()(aa(),ke),la=function(e){var n=e.entryId,t=e.onClose,l=Object(G.b)(ra),o=Object(J.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,p=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),m=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Entry...":"Delete Entry"}),[s,c]),f=Object(Le.a)();return r.a.createElement(Ne.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement($e.a,{style:s?{color:f.palette.error.main}:void 0},m),r.a.createElement(je.a,{position:"relative"},c&&r.a.createElement(Hn,{zIndex:"modal"}),r.a.createElement(Ve.a,null,s&&r.a.createElement(Be.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(Be.a,null,"Are you sure you want to delete this entry?"))),r.a.createElement(We.a,null,!s&&r.a.createElement(ze.a,{disabled:c,onClick:p,startIcon:r.a.createElement(ae.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(ze.a,{disabled:c,startIcon:!s&&r.a.createElement(Ye.a,null),onClick:t},s?"Close":"Cancel")))};function oa(){var e=Object(E.a)(["\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return oa=function(){return e},e}var ia,ua=j()(oa(),ke),ca=function(e){var n=e.refundId,t=e.onClose,l=Object(G.b)(ua),o=Object(J.a)(l,2),i=o[0],u=o[1],c=u.loading,d=u.error,s=!!d,p=Object(a.useCallback)((function(e){i({variables:{id:n}}).then((function(){return t()}))}),[n,i,t]),m=Object(a.useMemo)((function(){return s?"Error":c?"Deleting Refund...":"Delete Refund"}),[s,c]),f=Object(Le.a)();return r.a.createElement(Ne.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,onClose:t},r.a.createElement($e.a,{style:s?{color:f.palette.error.main}:void 0},m),r.a.createElement(je.a,{position:"relative"},c&&r.a.createElement(Hn,{zIndex:"modal"}),r.a.createElement(Ve.a,null,s&&r.a.createElement(Be.a,{color:"error"},null===d||void 0===d?void 0:d.message),!s&&r.a.createElement(Be.a,null,"Are you sure you want to delete this refund?"))),r.a.createElement(We.a,null,!s&&r.a.createElement(ze.a,{disabled:c,onClick:p,startIcon:r.a.createElement(ae.a,null),color:"primary",variant:"contained"},"Delete"),r.a.createElement(ze.a,{disabled:c,startIcon:!s&&r.a.createElement(Ye.a,null),onClick:t},s?"Close":"Cancel")))};function da(){var e=Object(E.a)(["\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return da=function(){return e},e}function sa(){var e=Object(E.a)(["\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return sa=function(){return e},e}function pa(){var e=Object(E.a)(["\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return pa=function(){return e},e}!function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(ia||(ia={}));var ma={Add:Object(a.forwardRef)((function(e,n){return r.a.createElement(le.a,Object.assign({},e,{ref:n}))})),Check:Object(a.forwardRef)((function(e,n){return r.a.createElement(oe.a,Object.assign({},e,{ref:n}))})),Clear:Object(a.forwardRef)((function(e,n){return r.a.createElement(ie.a,Object.assign({},e,{ref:n}))})),Delete:Object(a.forwardRef)((function(e,n){return r.a.createElement(ue.a,Object.assign({},e,{ref:n}))})),DetailPanel:Object(a.forwardRef)((function(e,n){return r.a.createElement(ce.a,Object.assign({},e,{ref:n}))})),Edit:Object(a.forwardRef)((function(e,n){return r.a.createElement(de.a,Object.assign({},e,{ref:n}))})),Export:Object(a.forwardRef)((function(e,n){return r.a.createElement(se.a,Object.assign({},e,{ref:n}))})),Filter:Object(a.forwardRef)((function(e,n){return r.a.createElement(pe.a,Object.assign({},e,{ref:n}))})),FirstPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(me.a,Object.assign({},e,{ref:n}))})),LastPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(fe.a,Object.assign({},e,{ref:n}))})),NextPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(ce.a,Object.assign({},e,{ref:n}))})),PreviousPage:Object(a.forwardRef)((function(e,n){return r.a.createElement(ve.a,Object.assign({},e,{ref:n}))})),ResetSearch:Object(a.forwardRef)((function(e,n){return r.a.createElement(ie.a,Object.assign({},e,{ref:n}))})),Search:Object(a.forwardRef)((function(e,n){return r.a.createElement(be.a,Object.assign({},e,{ref:n}))})),SortArrow:Object(a.forwardRef)((function(e,n){return r.a.createElement(ye.a,Object.assign({},e,{ref:n}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,n){return r.a.createElement(Ee.a,Object.assign({},e,{ref:n}))})),ViewColumn:Object(a.forwardRef)((function(e,n){return r.a.createElement(Oe.a,Object.assign({},e,{ref:n}))}))},fa=z.a.mark((function e(n){var t,a,r,l,o,i,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:t=n.type===A.Credit?A.Debit:A.Credit,a=!0,r=!1,l=void 0,e.prev=6,o=n.refunds[Symbol.iterator]();case 8:if(a=(i=o.next()).done){e.next=15;break}return u=i.value,e.next=12,Object(p.a)({},n,{},u,{type:t,description:u.description||n.description,refunds:n.id});case 12:a=!0,e.next=8;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),r=!0,l=e.t0;case 21:e.prev=21,e.prev=22,a||null==o.return||o.return();case 24:if(e.prev=24,!r){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}}),e,null,[[6,17,21,29],[22,,24,28]])})),va=j()(pa(),ke),ba=j()(sa(),ke),ya=j()(da(),ke),Ea=function(e){var n,t,l=e.deptId,o=void 0===l?null:l,i=e.journalTitle,u=void 0===i?null:i,c=e.mode,d=Object(a.useState)(!1),s=Object(J.a)(d,2),p=s[0],m=s[1],f=Object(a.useCallback)((function(){m(!1)}),[m]),v=Object(a.useState)(!1),b=Object(J.a)(v,2),y=b[0],E=b[1],O=Object(a.useState)(null),j=Object(J.a)(O,2),h=j[0],g=j[1],R=Object(a.useCallback)((function(){E(!1)}),[E]),_=Object(a.useCallback)((function(){g(null)}),[g]),C=Object(a.useState)(null),M=Object(J.a)(C,2),S=M[0],T=M[1],x=Object(a.useCallback)((function(){T(null)}),[T]),w=Object(a.useState)(!1),I=Object(J.a)(w,2),D=I[0],k=I[1],U=Object(a.useState)(null),F=Object(J.a)(U,2),P=F[0],L=F[1],N=Object(a.useCallback)((function(){k(!1)}),[k]),$=Object(a.useCallback)((function(){L(null)}),[L]),W=Object(a.useState)(!1),H=Object(J.a)(W,2),X=H[0],le=H[1],oe=Object(a.useState)(null),ie=Object(J.a)(oe,2),ue=ie[0],ce=ie[1],se=Object(a.useCallback)((function(){le(!1)}),[le]),pe=Object(a.useCallback)((function(){ce(null)}),[ce]),me=Object(a.useState)(null),fe=Object(J.a)(me,2),ve=fe[0],be=fe[1],ye=Object(a.useCallback)((function(){be(null)}),[be]),Ee=Object(G.b)(ba),Oe=Object(J.a)(Ee,2),Se=Oe[0],Te=Oe[1].loading,xe=Object(G.b)(ya),we=Object(J.a)(xe,2),Ie=we[0],De=we[1].loading,ke=Object(a.useMemo)((function(){return o?{where:{department:{eq:o}}}:void 0}),[o]),Pe=Object(G.c)(Ue,{variables:ke,fetchPolicy:"cache-and-network"}),Le=Pe.loading,Ne=Pe.error,$e=Pe.data,Be=Pe.subscribeToMore,Ve=Le&&!(null===$e||void 0===$e?void 0:$e.journalEntries);Object(a.useEffect)((function(){return Be({document:va,updateQuery:function(e,n){var t=n.subscriptionData;if(!t.data)return e;var a=t.data.journalEntryUpserted,r=a.department.ancestors;if(o&&a.department.id!==o&&r.every((function(e){return e.id!==o}))){var l=e.journalEntries.filter((function(e){return e.id!==a.id}));return l.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:l})}return e.journalEntries.some((function(e){return e.id===a.id}))?e:Object.assign({},e,{journalEntries:[a].concat(Object(V.a)(e.journalEntries))})}})}),[o,Be]);var Je=Object(a.useMemo)((function(){return[{field:"reconciled",title:"Reconciled",render:function(e){return e.reconciled?r.a.createElement(ne.a,null):null},customFilterAndSearch:function(e,n){var t,a=Q()(n.date),r={type:[n.type===A.Credit?"credit":"debit"],date:[a.format("dddd, MMMM Do YYYY, h:mm:ss a"),a.toString(),a.format("M/d/YY"),a.format("M/d/YYYY"),a.format("MMM DD, YYYY")],description:[n.description||""],reconciled:[n.reconciled?"reconciled":""],department:[n.department.name],category:[n.category.name],paymentMethod:[(null===(t=n.paymentMethod.parent)||void 0===t?void 0:t.id)===Fe?"CK-".concat(n.paymentMethod.name):n.paymentMethod.name],source:[function(){switch(n.source.__typename){case"Person":return"".concat(n.source.name.first," ").concat(n.source.name.last);case"Business":return n.source.bizName;case"Department":return n.source.deptName}}()],total:[K()(n.total.num/n.total.den).format("$0,0.00")]};return new ee.a([r],{threshold:.4,useExtendedSearch:!0,keys:["date","type","description","reconciled","department","category","paymentMethod","source","total"]}).search(e).length>0},hidden:c===ia.Reconcile,filtering:!1,sorting:!1},{field:"total",title:"Total",render:function(e){var n=e.total,t=n.num,a=n.den;return K()(t/a).format("$0,0.00")},searchable:!1,filtering:!1,sorting:!1},{field:"date",title:"Date",render:function(e){var n=e.date;return Q()(n).format("MMM DD, YYYY")},searchable:!1,filtering:!1,sorting:!1},{field:"category",title:"Category",render:function(e){var n=e.category;return Object(Z.a)(n.name)},searchable:!1,filtering:!1,sorting:!1},{field:"source",title:"Source",render:function(e){var n=e.source;switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}},searchable:!1,filtering:!1,sorting:!1},{field:"paymentMethod",title:"Payment Method",render:function(e){var n,t=e.paymentMethod;return(null===(n=t.parent)||void 0===n?void 0:n.id)===Fe?"CK-".concat(t.name):t.name},searchable:!1,filtering:!1,sorting:!1},{field:"description",title:"Description",render:function(e){return e.description},searchable:!1,filtering:!1,sorting:!1},{field:"department",title:"Department",render:function(e){var n=e.department;return Object(Z.a)(n.name)},searchable:!1,filtering:!1,sorting:!1}]}),[c]),We=Object(a.useMemo)((function(){return{toolbar:{searchTooltip:r.a.createElement(je.a,{fontSize:12,component:"span"},'[abc] | [efg] = "abc" OR "efg"',r.a.createElement("br",null),'\'[abc] = EXACTLY "abc"',r.a.createElement("br",null),'![abc] = NOT "abc"',r.a.createElement("br",null),'^[abc] = STARTS WITH "abc"',r.a.createElement("br",null),'!^[abc] = DOES NOT START WITH "abc"',r.a.createElement("br",null),'[abc]$ = ENDS WITH "abc"',r.a.createElement("br",null),'![abc]$ = DOES NOT END WITH "abc"'),nRowsSelected:"Reconcile {0} Entry(s)"}}}),[]),ze=Object(a.useMemo)((function(){return{rowStyle:function(e){return{color:e.type===A.Credit?Ae.a[900]:Ce.a[900]}},maxBodyHeight:"calc(100vh - 53px - 64px)",headerStyle:{position:"sticky",top:0},pageSize:25,pageSizeOptions:[25,50,100],showTitle:!!u,selection:c===ia.Reconcile,showSelectAllCheckbox:!1}}),[u,c]),qe=Object(a.useMemo)((function(){return c===ia.Reconcile?[{icon:function(e){return r.a.createElement(te.a,e)},tooltip:"Reconcile Selected",position:"toolbarOnSelect",iconProps:{color:"secondary",fontSize:"large"},onClick:function(){var e=Object(B.a)(z.a.mark((function e(n,t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=Object(B.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.reconciled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"JournalEntryRefund"!==n.__typename){e.next=8;break}return e.next=6,Ie({variables:{id:n.id}});case 6:e.next=10;break;case 8:return e.next=10,Se({variables:{id:n.id}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}]:[function(e){var n="JournalEntryRefund"===e.__typename;return{icon:ae.a,tooltip:"Delete ".concat(n?"Refund":"Entry"),onClick:function(){var e=Object(B.a)(z.a.mark((function e(n,t){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=Object(B.a)(z.a.mark((function e(n){return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.deleted){e.next=4;break}return e.abrupt("return");case 4:"JournalEntryRefund"===n.__typename?be(n.id):T(n.id);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}},function(e){var n="JournalEntryRefund"===e.__typename;return{icon:de.a,tooltip:"Update ".concat(n?"Refund":"Entry"),onClick:function(e,t){n?(le(!0),ce({entryId:t.refunds,refundId:t.id})):(E(!0),g(t.id))}}},function(e){if("JournalEntryRefund"===e.__typename)return null;var n=e.type===A.Credit;return{icon:function(e){return n?r.a.createElement(Me.d,e):r.a.createElement(Me.c,e)},tooltip:n?"Give Refund":"Add Refund",iconProps:{style:{color:n?Ce.a[900]:Ae.a[900]}},onClick:function(e,n){k(!0),L(n.id)}}},{icon:function(e){return r.a.createElement(re.a,e)},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Entry",isFreeAction:!0,onClick:function(){m(!0)}}]}),[c,Ie,Se,be,T]),Ye=Object(a.useMemo)((function(){return{Body:Ne?function(e){return r.a.createElement(he.a,e,r.a.createElement(ge.a,null,r.a.createElement(Re.a,{colSpan:Je.length+(Array.isArray(qe)&&qe.length>0?1:0),align:"left"},r.a.createElement(_e.a,{align:"center",color:"error",variant:"h4"},"Error Loading Entries"),r.a.createElement(_e.a,{variant:"body1"},Ne.message))))}:function(e){return r.a.createElement(q.MTableBody,e)}}}),[Ne,Je,qe]),Ge=(null===$e||void 0===$e?void 0:$e.journalEntries)||[],He=Object(a.useMemo)((function(){var e=c===ia.Reconcile?[function(e){return!e.reconciled&&!e.deleted}]:[function(e){return!e.deleted}];return Ge.reduce((function(n,t){var a=!0,r=!1,l=void 0;try{for(var o,i=function(){var t=o.value;e.every((function(e){return e(t)}))&&n.push(t)},u=fa(t)[Symbol.iterator]();!(a=(o=u.next()).done);a=!0)i()}catch(c){r=!0,l=c}finally{try{a||null==u.return||u.return()}finally{if(r)throw l}}return n}),[]).sort((function(e,n){return new Date(n.date).getTime()-new Date(e.date).getTime()}))}),[Ge,c]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{icons:ma,isLoading:Ve||Te||De,columns:Je,data:He,options:ze,localization:We,actions:qe,components:Ye,title:null!==u&&void 0!==u?u:void 0}),r.a.createElement(Yt,{deptId:o,open:p,onClose:f}),r.a.createElement(ta,{entryId:h,open:y,onClose:R,onExited:_}),r.a.createElement(la,{entryId:S,onClose:x}),r.a.createElement(tt,{entryId:P,open:D,onClose:N,onExited:$}),r.a.createElement(dt,{entryId:null!==(n=null===ue||void 0===ue?void 0:ue.entryId)&&void 0!==n?n:null,refundId:null!==(t=null===ue||void 0===ue?void 0:ue.refundId)&&void 0!==t?t:null,open:X,onClose:se,onExited:pe}),r.a.createElement(ca,{refundId:ve,onClose:ye}))},Oa=t(5609),ja=t(409),ha=t.n(ja),ga=t(411),Ra=t.n(ga),_a=t(413),Aa=t.n(_a),Ca=t(412),Ma=t.n(Ca),Sa=t(5606),Ta=t(5608),xa=t(5607),wa=t(162),Ia=t(158);function Da(){var e=Object(E.a)(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return Da=function(){return e},e}function ka(){var e=Object(E.a)(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return ka=function(){return e},e}function Ua(){var e=Object(E.a)(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ",",\n  ","\n"]);return Ua=function(){return e},e}function Fa(){var e=Object(E.a)(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        num\n        den\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n"]);return Fa=function(){return e},e}function Pa(){var e=Object(E.a)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n"]);return Pa=function(){return e},e}var La=j()(Pa()),Na=j()(Fa()),$a=j()(Ua(),La,Na);j()(ka(),Na),j()(Da(),Na);function Ba(){var e=Object(E.a)(["\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ba=function(){return e},e}function Va(){var e=Object(E.a)(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Va=function(){return e},e}var Ja=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?Ae.a[n]:e<.9?wa.a[n]:Ce.a[n]},Wa=function(e){var n=e.spentPercentage,t=e.height;return r.a.createElement(je.a,{height:t,bgcolor:Ja(n),display:"flex",justifyContent:"flex-start"},r.a.createElement(je.a,{height:"100%",width:"".concat(100*n,"%"),bgcolor:Ia.a[400]}))},za=(j()(Va(),Dn),j()(Ba(),Na)),qa=function(e){var n,t=e.deptId,l=Object(a.useState)(!1),o=Object(J.a)(l,2),i=o[0],u=o[1],c=Object(a.useCallback)((function(){u(!1)}),[u]),s=Object(a.useMemo)((function(){return{deptId:t,where:{department:{eq:t},deleted:!1}}}),[t]),p=Object(G.c)($a,{variables:s,fetchPolicy:"cache-and-network"}),m=p.loading,f=p.error,v=p.data,b=p.subscribeToMore,y=m&&!(null===v||void 0===v?void 0:v.journalEntries);Object(a.useEffect)((function(){return b({document:za,updateQuery:function(e,n){var a=n.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(t&&r.department.id!==t&&l.every((function(e){return e.id!==t}))){var o=e.journalEntries.filter((function(e){return e.id!==r.id}));return o.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:o})}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(Object(V.a)(e.journalEntries))})}})}),[t,b]);var E=Object(a.useMemo)((function(){return((null===v||void 0===v?void 0:v.journalEntries)||[]).filter((function(e){return!e.deleted}))}),[v]),O=(null===v||void 0===v||null===(n=v.department)||void 0===n?void 0:n.name)||"";Object(a.useEffect)((function(){document.title=O}),[O]);var j=(null===v||void 0===v?void 0:v.department)||null,h=Object(a.useMemo)((function(){var e=new Map,n=0;if(j){var t=function(){if(j.budget){var e=j.budget.amount;return e.num/e.den}return null}();e.set(j.id,{name:j.name,spent:0,budget:t});var a=!0,r=!1,l=void 0;try{for(var o,i=j.descendants[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var u=o.value,c=null;if(u.budget){var d=u.budget.amount,s=d.num/d.den;n+=s,c=s}e.set(u.id,{name:u.name,spent:0,budget:c})}}catch(w){r=!0,l=w}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}}var p=0,m=!0,f=!1,v=void 0;try{for(var b,y=E[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var O=b.value;if(!O.deleted){var h=e.get(O.department.id),g=O.total.num/O.total.den,R=!0,_=!1,C=void 0;try{for(var M,S=O.refunds[Symbol.iterator]();!(R=(M=S.next()).done);R=!0){var T=M.value;T.deleted||(g-=T.total.num/T.total.den)}}catch(w){_=!0,C=w}finally{try{R||null==S.return||S.return()}finally{if(_)throw C}}O.type===A.Credit?(p-=g,h.spent-=g):(p+=g,h.spent+=g)}}}catch(w){f=!0,v=w}finally{try{m||null==y.return||y.return()}finally{if(f)throw v}}var x=function(){if(null===j||void 0===j?void 0:j.budget){var e,t=(null===j||void 0===j||null===(e=j.budget)||void 0===e?void 0:e.amount)||{num:0,den:1};return t.num/t.den}return n}();return{totalRemaining:K()(x-p).format("$0,0.00"),budget:K()(x).format("$0,0.00"),spentToBudgetRatio:p/x,deptReport:e}}),[E,j]),g=h.totalRemaining,R=h.budget,_=h.spentToBudgetRatio,C=h.deptReport,M=Object(a.useMemo)((function(){var e=[],n=!0,t=!1,a=void 0;try{for(var l,o=function(){var n=Object(J.a)(l.value,2),t=n[0],a=n[1],o=a.budget,i=a.spent,u=a.name;if(t===(null===j||void 0===j?void 0:j.id))return"continue";var c=r.a.createElement(Je.a,{key:t,item:!0,xs:12,md:4,lg:3},r.a.createElement(Sa.a,null,r.a.createElement(Ta.a,{titleTypographyProps:{noWrap:!0},title:u}),r.a.createElement(xa.a,null,function(){if(null===o)return r.a.createElement(je.a,{color:i>0?Ce.a[900]:Ae.a[900],clone:!0},r.a.createElement(_e.a,{variant:"h6"},"Spent: ".concat(K()(Math.abs(i)).format("$0,0.00"))));var e=o-i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(je.a,{color:Ja(i/o,900),clone:!0},r.a.createElement(_e.a,{variant:"h6"},"".concat(K()(e).format("$0,0.00")," Remaining"))),r.a.createElement(_e.a,{variant:"body1"},"of ".concat(K()(o).format("$0,0.00"))),r.a.createElement(Wa,{spentPercentage:i/o,height:5}))}())));e.push(c)},i=C[Symbol.iterator]();!(n=(l=i.next()).done);n=!0)o()}catch(u){t=!0,a=u}finally{try{n||null==i.return||i.return()}finally{if(t)throw a}}return e}),[C,j]),S=Object(a.useCallback)((function(e){return u(!0)}),[u]);return y?r.a.createElement("p",null,"Loading..."):f?(console.error(f),r.a.createElement("p",null,f.message)):r.a.createElement(je.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.a.createElement(Oa.a,null,r.a.createElement(je.a,{padding:8},r.a.createElement(Je.a,{container:!0,alignItems:"center",justify:"center",spacing:4},r.a.createElement(Je.a,{item:!0},r.a.createElement(ze.a,{variant:"contained",color:"secondary",startIcon:r.a.createElement(ha.a,null),children:"New Entry",onClick:S})),r.a.createElement(Je.a,{item:!0},r.a.createElement(ze.a,{component:d.b,to:"/journal/".concat(t,"/reconcile"),variant:"contained",startIcon:r.a.createElement(Ra.a,null),children:"Reconcile"})),r.a.createElement(Je.a,{item:!0},r.a.createElement(ze.a,{variant:"contained",startIcon:r.a.createElement(Ma.a,null),children:"Reports"})),r.a.createElement(Je.a,{item:!0},r.a.createElement(ze.a,{component:d.b,to:"/journal/".concat(t),variant:"contained",startIcon:r.a.createElement(Aa.a,null),children:"Journal"})))),r.a.createElement(je.a,{flexGrow:1,overflow:"auto"},r.a.createElement(Je.a,{justify:"center",container:!0,spacing:2},r.a.createElement(Je.a,{item:!0,xs:12},r.a.createElement(_e.a,{align:"center",variant:"h3"},O),r.a.createElement(je.a,{color:Ja(_)},r.a.createElement(_e.a,{align:"center",variant:"h4"},"".concat(g," Remaining"))),r.a.createElement(_e.a,{align:"center",variant:"subtitle1"},"of ".concat(R)),r.a.createElement(Wa,{spentPercentage:_,height:10})),M)),r.a.createElement(Yt,{deptId:t,open:i,onClose:c})))},Ya=t(296),Ga=t(364),Ha=t(298);function Ka(){var e=Object(E.a)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return Ka=function(){return e},e}var Xa=j()(Ka()),Qa=function(e){var n=Object(G.c)(Xa),t=n.loading,l=n.error,o=n.data,i=Object(a.useState)(null),u=Object(J.a)(i,2),c=u[0],s=u[1],p=(null===o||void 0===o?void 0:o.departments)||[],m=Object(a.useMemo)((function(){var e=[],n=new Set,t=!0,a=!1,r=void 0;try{for(var l,o=p[Symbol.iterator]();!(t=(l=o.next()).done);t=!0){var i=l.value;"Business"===i.parent.__typename&&e.push(i),i.virtualRoot&&n.add(i.id)}}catch(u){a=!0,r=u}finally{try{t||null==o.return||o.return()}finally{if(a)throw r}}return{rootDepts:e,virtualRoots:n}}),[p]),f=m.rootDepts,v=m.virtualRoots,b=Object(a.useMemo)((function(){var e=[];if(c&&v.has(c)){var n=!0,t=!1,a=void 0;try{for(var r,l=p[Symbol.iterator]();!(n=(r=l.next()).done);n=!0){var o=r.value;o.parent.id===c&&e.push(o)}}catch(i){t=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(t)throw a}}}return e}),[v,c,p]);Object(a.useEffect)((function(){document.title="Select Department"}));var y=Object(a.useCallback)((function(e){var n;s((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.value)||null)}),[s]);if(t)return r.a.createElement("p",null,"Loading...");if(l)return r.a.createElement("p",null,l.message);var E=b.length>0;return r.a.createElement(je.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.a.createElement(Oa.a,null,r.a.createElement(je.a,{padding:4,clone:!0},r.a.createElement(_e.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.a.createElement(je.a,{minWidth:"250px !important",clone:!0},r.a.createElement(Lt.a,{variant:"filled"},r.a.createElement(Ya.a,null,"Department"),r.a.createElement(Ha.a,{value:c,onChange:y,autoWidth:!0},f.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return e.virtualRoot&&(delete n.component,delete n.to),r.a.createElement(Ga.a,n)}))))),E&&r.a.createElement(je.a,{pt:2},r.a.createElement(je.a,{pt:2,minWidth:"250px !important",clone:!0},r.a.createElement(Lt.a,{variant:"filled"},r.a.createElement(Ya.a,null,"Sub Department"),r.a.createElement(Ha.a,{autoWidth:!0},b.map((function(e){var n={component:d.b,to:"/department/".concat(e.id),key:e.id,value:e.id,children:e.name};return r.a.createElement(Ga.a,n)}))))))))};function Za(){var e=Object(E.a)(["\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n"]);return Za=function(){return e},e}var er,nr=function(e){var n=Object($.f)().id;return n?r.a.createElement(qa,{deptId:n}):r.a.createElement("div",null,"Error: No Dept ID!")},tr=j()(Za()),ar=function(e){var n,t=Object($.f)().id,a=Object(G.c)(tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?l.department.name:void 0;return r.a.createElement(Ea,{mode:ia.View,deptId:t,journalTitle:o})},rr=function(e){var n,t=Object($.f)().id,a=Object(G.c)(tr,{variables:{id:t}}),l=(a.loading,a.error,a.data),o=(null===l||void 0===l||null===(n=l.department)||void 0===n?void 0:n.name)?"Reconcile ".concat(l.department.name):"Reconcile";return r.a.createElement(Ea,{mode:ia.Reconcile,deptId:t,journalTitle:o})},lr=function(e){return r.a.createElement($.c,null,r.a.createElement($.a,{exact:!0,path:"/",component:Qa}),r.a.createElement($.a,{exact:!0,path:"/department/:id",component:nr}),r.a.createElement($.a,{exact:!0,path:"/journal",component:Ea}),r.a.createElement($.a,{exact:!0,path:"/journal/:id",component:ar}),r.a.createElement($.a,{exact:!0,path:"/journal/:id/reconcile",component:rr}))},or=t(415),ir=t(45),ur=t(192),cr=t.n(ur),dr="journalEntryUpsert/CREATE",sr="journalEntryUpsert/CANCEL",pr="journalEntryUpsert/CLEAR",mr="journalEntryUpsert/SET_SUBMIT_ERROR",fr="journalEntryUpsert/CLEAR_SUBMIT_ERROR",vr="journalEntryUpsert/SET_DATE_INPUT",br="journalEntryUpsert/CLEAR_DATE_INPUT",yr="journalEntryUpsert/SET_DATE_VALUE",Er="journalEntryUpsert/CLEAR_DATE_VALUE",Or="journalEntryUpsert/SET_DATE_ERROR",jr="journalEntryUpsert/CLEAR_DATE_ERROR",hr="journalEntryUpsert/SET_DEPT_INPUT",gr="journalEntryUpsert/CLEAR_DEPT_INPUT",Rr="journalEntryUpsert/SET_DEPT_VALUE",_r="journalEntryUpsert/CLEAR_DEPT_VALUE",Ar="journalEntryUpsert/SET_DEPT_ERROR",Cr="journalEntryUpsert/CLEAR_DEPT_ERROR",Mr="journalEntryUpsert/SET_DEPT_OPEN",Sr="journalEntryUpsert/SET_TYPE_VALUE",Tr="journalEntryUpsert/SET_TYPE_ERROR",xr="journalEntryUpsert/CLEAR_TYPE_ERROR",wr="journalEntryUpsert/SET_CAT_INPUT",Ir="journalEntryUpsert/CLEAR_CAT_INPUT",Dr="journalEntryUpsert/SET_CAT_VALUE",kr="journalEntryUpsert/CLEAR_CAT_VALUE",Ur="journalEntryUpsert/SET_CAT_ERROR",Fr="journalEntryUpsert/CLEAR_CAT_ERROR",Pr="journalEntryUpsert/SET_CAT_OPEN",Lr="journalEntryUpsert/SET_SRC_TYPE",Nr="journalEntryUpsert/SET_SRC_INPUT",$r="journalEntryUpsert/CLEAR_SRC_INPUT",Br="journalEntryUpsert/SET_SRC_VALUE",Vr="journalEntryUpsert/CLEAR_SRC_VALUE",Jr="journalEntryUpsert/SET_SRC_ERROR",Wr="journalEntryUpsert/CLEAR_SRC_ERROR",zr="journalEntryUpsert/SET_SRC_OPEN",qr="journalEntryUpsert/SET_PAY_METHOD_VALUE",Yr="journalEntryUpsert/CLEAR_PAY_METHOD_VALUE",Gr="journalEntryUpsert/SET_PAY_METHOD_ERROR",Hr="journalEntryUpsert/CLEAR_PAY_METHOD_ERROR",Kr="journalEntryUpsert/SET_DSCRPT_VALUE",Xr="journalEntryUpsert/CLEAR_DSCRPT_VALUE",Qr="journalEntryUpsert/SET_TOTAL_INPUT",Zr="journalEntryUpsert/CLEAR_TOTAL_INPUT",el="journalEntryUpsert/SET_TOTAL_VALUE",nl="journalEntryUpsert/CLEAR_TOTAL_VALUE",tl="journalEntryUpsert/SET_TOTAL_ERROR",al="journalEntryUpsert/CLEAR_TOTAL_ERROR",rl="journalEntryUpsert/SET_RECONCILED_VALUE",ll="journalEntryUpsert/CLEAR_RECONCILED_VALUE",ol=t(65),il=function e(n){Object(ol.a)(this,e),this.input="",this.value=void 0,this.error=null,this.value=n},ul=function(e,n,t,a,r){for(var l=0,o=e.length;l<o;l++){var i=e[l];if(i[a]===t){var u=r(i,n);return u!==i?[].concat(Object(V.a)(e.slice(0,l)),[u],Object(V.a)(e.slice(l+1))):e}}return e},cl=Object(ir.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===dr?n.payload.entryId||null:e},type:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Sr:return n.value===t.payload.type?n:Object(p.a)({},n,{value:t.payload.type});case Tr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case xr:return null===n.error?n:Object(p.a)({},n,{error:null});default:return n}},date:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case vr:var r=a.payload.input.trimStart();return t.input===r?t:Object(p.a)({},t,{input:r});case br:return""===t.input?t:Object(p.a)({},t,{input:""});case yr:return(null===(e=t.value)||void 0===e?void 0:e.getTime())===a.payload.value.getTime()?t:Object(p.a)({},t,{value:a.payload.value});case Er:return t.value?Object(p.a)({},t,{value:null}):t;case Or:return(null===(n=t.error)||void 0===n?void 0:n.message)===a.payload.error.message?t:Object(p.a)({},t,{error:a.payload.error});case jr:return t.error?Object(p.a)({},t,{error:null}):t;default:return t}},department:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dr:return t.payload.fromDept?Object(p.a)({},n,{value:t.payload.fromDept}):n;case hr:var a=t.payload.input.trimStart();return n.input===a?n:Object(p.a)({},n,{input:a});case gr:return""===n.input?n:Object(p.a)({},n,{input:""});case Rr:return n.value===t.payload.value?n:Object(p.a)({},n,{value:t.payload.value});case _r:return n.value?Object(p.a)({},n,{value:null}):n;case Ar:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case Cr:return n.error?Object(p.a)({},n,{error:null}):n;case Mr:var r=t.payload.open;return r===n.open?n:Object(p.a)({},n,{open:r});default:return n}},category:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case wr:var a=t.payload.input.trimStart();return n.input===a?n:Object(p.a)({},n,{input:a});case Ir:return""===n.input?n:Object(p.a)({},n,{input:""});case Dr:return n.value===t.payload.value?n:Object(p.a)({},n,{value:t.payload.value});case kr:return n.value?Object(p.a)({},n,{value:null}):n;case Ur:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case Fr:return n.error?Object(p.a)({},n,{error:null}):n;case Pr:var r=t.payload.open;return r===n.open?n:Object(p.a)({},n,{open:r});default:return n}},srcType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return n.type===Lr?n.payload.srcType:e},source:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Nr:var a=t.payload.input.trimStart();return n.input===a?n:Object(p.a)({},n,{input:a});case $r:return""===n.input?n:Object(p.a)({},n,{input:""});case Br:return cr()(n.value,t.payload.value)?n:Object(p.a)({},n,{value:t.payload.value});case Vr:return n.value?Object(p.a)({},n,{value:null}):n;case Jr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case Wr:return n.error?Object(p.a)({},n,{error:null}):n;case zr:var r=t.payload.open;return r===n.open?n:Object(p.a)({},n,{open:r});default:return n}},paymentMethod:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.assign(new il(null),{open:!1}),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case qr:return t.payload.value&&n.value!==t.payload.value?Object(p.a)({},n,{value:t.payload.value}):n;case Yr:return null===n.value?n:Object(p.a)({},n,{value:null});case Gr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case Hr:return null===n.error?n:Object(p.a)({},n,{error:null});default:return n}},description:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Kr:var t=n.payload.value.trimStart();return t&&e.value!==t?Object(p.a)({},e,{value:t}):e;case Xr:return null===e.value?e:Object(p.a)({},e,{value:null});default:return e}},total:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(null),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qr:return n.input===t.payload.input?n:Object(p.a)({},n,{input:t.payload.input});case Zr:return""===n.input?n:Object(p.a)({},n,{input:""});case el:return cr()(n.value,t.payload.value)?n:Object(p.a)({},n,{value:t.payload.value});case nl:return null===n.value?n:Object(p.a)({},n,{value:null});case tl:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case al:return null===n.error?n:Object(p.a)({},n,{error:null});default:return n}},reconciled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new il(!1),n=arguments.length>1?arguments[1]:void 0;switch(n.type){case rl:return e.value===n.payload.value?e:Object(p.a)({},e,{value:n.payload.value});case ll:return!1===e.value?e:Object(p.a)({},e,{value:!1});default:return e}}});!function(e){e[e.NotSubmitted=0]="NotSubmitted",e[e.Submitting=1]="Submitting",e[e.Submitted=2]="Submitted"}(er||(er={}));var dl=Object(ir.c)({id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===dr?n.payload.upsertId:e},values:cl,fromDept:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return n.type===dr&&n.payload.fromDept?n.payload.fromDept:e},submit:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:er.NotSubmitted,error:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"journalEntryUpsert/SUBMIT":return n.status===t.payload.status?n:Object(p.a)({},n,{status:t.payload.status});case mr:return(null===(e=n.error)||void 0===e?void 0:e.message)===t.payload.error.message?n:Object(p.a)({},n,{error:t.payload.error});case fr:return null===n.error?n:Object(p.a)({},n,{error:null});default:return n}}}),sl=t(101),pl="tableCells/SET_INDEX",ml="tableCells/SET_DEFAULT_INDEX",fl="tableCells/SET_NAME",vl="tableCells/SET_DEFAULT_NAME",bl="tableCells/SET_WIDTH",yl="tableCells/SET_DEFAULT_WIDTH",El="tableCells/COLLAPSE",Ol="tableCells/EXPAND",jl="tableCells/HIDE",hl="tableCells/SHOW",gl="tableCells/RESTORE_DEFAULTS",Rl=function e(n){var t,a;Object(ol.a)(this,e),this.ini=void 0,this.rowId=void 0,this.id=void 0,this.index=void 0,this.name=void 0,this.width=void 0,this.collapsed=void 0,this.hidden=void 0,this.ini=Object(p.a)({},n),this.rowId=n.rowId,this.id=n.id,this.index=n.index,this.name=n.name,this.width=n.width,this.collapsed=null!==(t=null===n||void 0===n?void 0:n.collapsed)&&void 0!==t&&t,this.hidden=null!==(a=null===n||void 0===n?void 0:n.hidden)&&void 0!==a&&a},_l=function(e,n){switch(n.type){case pl:return e.index===n.payload.index?e:Object(p.a)({},e,{index:n.payload.index});case ml:return e.index===e.ini.index?e:Object(p.a)({},e,{index:e.ini.index});case fl:return e.name===n.payload.name?e:Object(p.a)({},e,{name:n.payload.name});case vl:return e.name===e.ini.name?e:Object(p.a)({},e,{name:e.ini.name});case bl:return e.width===n.payload.width?e:Object(p.a)({},e,{width:n.payload.width});case yl:return e.width===e.ini.width?e:Object(p.a)({},e,{width:e.ini.width});case El:return!0===e.collapsed?e:Object(p.a)({},e,{collapsed:!0});case Ol:return!1===e.collapsed?e:Object(p.a)({},e,{collapsed:!1});case jl:return!0===e.hidden?e:Object(p.a)({},e,{hidden:!0});case hl:return!1===e.hidden?e:Object(p.a)({},e,{hidden:!1});case gl:var t=new Rl(e.ini);return cr()(e,t)?e:t;default:return e}},Al=z.a.mark((function e(n){var t,a,r,l,o,i,u;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=new Map,r=0,e.t0=z.a.keys(n);case 4:if((e.t1=e.t0()).done){e.next=26;break}if(l=e.t1.value,!n.hasOwnProperty(l)){e.next=24;break}if(o=n[l],i=o.index,null!==(u=void 0===i?null:i)){e.next=13;break}return e.abrupt("continue",4);case 13:if(r!==u){e.next=23;break}return e.next=16,o;case 16:if(!a.has(++r)){e.next=21;break}return e.next=19,a.get(r);case 19:e.next=16;break;case 21:e.next=24;break;case 23:u>0?a.set(u,o):t.push(o);case 24:e.next=4;break;case 26:return e.abrupt("return",t);case 27:case"end":return e.stop()}}),e)})),Cl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":return n.payload.id in e?e:Object(p.a)({},e,Object(sl.a)({},n.payload.id,new Rl(n.payload)));case pl:var t=e[n.payload.id].index,a=n.payload.index;if(t===a)return e;if(t<a){var r={},l=!0,o=!1,i=void 0;try{for(var u,c=Al(e)[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var d=u.value;if(d.index>a)break;d.index<t||(d.index===t?r[d.id]=_l(d,Object(p.a)({},n,{payload:Object(p.a)({},n.payload,{index:a})})):r[d.id]=_l(d,Object(p.a)({},n,{payload:Object(p.a)({},n.payload,{index:d.index-1})})))}}catch(S){o=!0,i=S}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}return Object(p.a)({},e,{},r)}var s={},m=!0,f=!1,v=void 0;try{for(var b,y=Al(e)[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var E=b.value;if(E.index>t)break;E.index<a||(E.index===t?s[E.id]=_l(E,Object(p.a)({},n,{payload:Object(p.a)({},n.payload,{index:a})})):s[E.id]=_l(E,Object(p.a)({},n,{payload:Object(p.a)({},n.payload,{index:E.index+1})})))}}catch(S){f=!0,v=S}finally{try{m||null==y.return||y.return()}finally{if(f)throw v}}return Object(p.a)({},e,{},s);case ml:var O={},j=!0,h=!1,g=void 0;try{for(var R,_=Al(e)[Symbol.iterator]();!(j=(R=_.next()).done);j=!0){var A=R.value;O[A.id]=_l(A,n)}}catch(S){h=!0,g=S}finally{try{j||null==_.return||_.return()}finally{if(h)throw g}}return Object(p.a)({},e,{},O);case fl:case vl:case bl:case yl:case El:case Ol:case jl:case hl:case gl:if(n.payload.id in e){var C=e[n.payload.id],M=_l(C,n);return M===C?e:Object(p.a)({},e,Object(sl.a)({},n.payload.id,M))}return e;default:return e}},Ml="journal/OPEN_PAB",Sl="journal/CLOSE_PAB",Tl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{open:!1},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ml:return!0===e.open?e:Object(p.a)({},e,{open:!0});case Sl:return!1===e.open?e:Object(p.a)({},e,{open:!1});default:return e}},xl=Object(ir.c)({pabs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"journal/CREATE_PAB":return n.payload.pabId in e?e:Object(p.a)({},e,Object(sl.a)({},n.payload.pabId,Tl(void 0,n)));case Ml:case Sl:if(n.payload.pabId in e){var t=n.payload.pabId,a=e[t],r=Tl(a,n);return a===r?e:Object(p.a)({},e,Object(sl.a)({},t,r))}return e;default:return e}}}),wl=Object(ir.c)({journal:xl,journalEntryUpserts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case dr:return[].concat(Object(V.a)(e),[dl(void 0,n)]);case sr:case pr:for(var t=n.payload.upsertId,a=0,r=e.length;a<r;a++)if(e[a].id===t)return[].concat(Object(V.a)(e.slice(0,a)),Object(V.a)(e.slice(a+1)));return e;case Sr:case Tr:case xr:case vr:case br:case yr:case Er:case Or:case jr:case hr:case Rr:case Ar:case Mr:case gr:case _r:case Cr:case wr:case Ir:case Dr:case kr:case Ur:case Fr:case Pr:case Lr:case Nr:case $r:case Br:case Vr:case Jr:case Wr:case zr:case qr:case Yr:case Kr:case Xr:case Qr:case Zr:case el:case nl:case tl:case al:case"journalEntryUpsert/SUBMIT":case mr:case fr:case Gr:case Hr:case rl:case ll:return ul(e,n,n.payload.upsertId,"id",dl);default:return e}},tableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"tableCells/CREATE":var t=n.payload.rowId;if(t in e){var a=e[t],r=Cl(a,n);return a===r?e:Object(p.a)({},e,Object(sl.a)({},t,r))}return Object(p.a)({},e,Object(sl.a)({},t,Cl(void 0,n)));case pl:case ml:case fl:case vl:case bl:case yl:case El:case Ol:case jl:case hl:case gl:var l=n.payload.rowId;if(l in e){var o=e[l],i=Cl(o,n);return o===i?e:Object(p.a)({},e,Object(sl.a)({},l,i))}return e;default:return e}}}),Il=Object(or.a)({reducer:wl});function Dl(){return r.a.createElement(a.Fragment,null,r.a.createElement(c.a,null),r.a.createElement(i.a,{store:Il},r.a.createElement(u.a,{client:N},r.a.createElement(d.a,null,r.a.createElement(lr,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Dl,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[5467,1,2]]]);
//# sourceMappingURL=main.f08cb5b2.chunk.js.map