{"version":3,"sources":["apollo/inMemoryCache.ts","apollo/localStateInI.ts","apollo/schema/upsertJournalEntry.gql.ts","redux/reducers/journalEntryUpserts.ts","apollo/typeDefs.ts","apollo/resolvers.ts","apollo/link.ts","apollo/apollo.ts","utils/uuid.ts","redux/actionTypes/journalEntryUpsert.ts","redux/reducers/utils.ts","redux/actionTypes/tableRow.ts","redux/reducers/tableRows.ts","redux/actionTypes/journal.ts","redux/reducers/journal.ts","redux/reducers/root.ts","redux/store.ts","redux/actions/tableRow.ts","components/Journal/Table/Cells/cellsReduxIni.ts","redux/selectors/tableRows.ts","components/Journal/Table/Header.tsx","components/Journal/Table/Cells/TransactionDate.tsx","components/Journal/Table/Cells/Department.tsx","components/Journal/Table/Cells/Category.tsx","components/Journal/Table/Cells/Source.tsx","components/Journal/Table/Cells/PaymentMethod.tsx","components/Journal/Table/Cells/Description.tsx","components/Journal/Table/Cells/Total.tsx","components/Journal/Table/JournalEntries.gql.ts","components/Journal/Table/Cells/Reconciled.tsx","apollo/graphTypes.ts","redux/selectors/journalEntryUpsert.ts","redux/actions/journalEntryUpsert.ts","redux/hooks.ts","components/Journal/Table/Entry.tsx","components/Journal/Table/Body.tsx","components/JournalEntryInputs/DateInput.tsx","components/JournalEntryInputs/TotalInput.tsx","components/JournalEntryInputs/DepartmentInput.tsx","components/JournalEntryInputs/CategoryInput.tsx","components/JournalEntryInputs/SourceInput/SourceTypeToggle.tsx","components/JournalEntryInputs/SourceInput/BusinessSrc.tsx","components/JournalEntryInputs/SourceInput/PersonSrc.tsx","components/JournalEntryInputs/SourceInput.tsx","components/JournalEntryInputs/PaymentMethodInput.tsx","components/JournalEntryInputs/DescriptionInput.tsx","components/JournalEntryInputs/ReconciledInput.tsx","components/JournalEntryInputs/TypeToggle.tsx","components/Dashboard/AddEntry.tsx","components/Journal/Table/UpdateEntry.tsx","redux/selectors/journal.ts","components/Journal/Table/JournalPAB.tsx","redux/actions/journal.ts","components/Journal/Table/Journal.tsx","components/Dashboard/Dashboard.tsx","components/TopNav.tsx","Routes.tsx","serviceWorker.js","index.js","App.tsx"],"names":["fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","inMemoryCache","InMemoryCache","addTypename","writeData","data","paginate","skip","limit","sortBy","upsertTransactionLocal","lc_journalEntryUpserts","gql","SubmitStatus","resolvers","batchHttpLink","BatchHttpLink","uri","credentials","wsLink","WebSocketLink","window","location","host","options","reconnect","link","ApolloLink","from","onError","graphQLErrors","networkError","forEach","message","locations","path","console","error","log","split","query","def","getMainDefinition","kind","operation","ApolloClient","cache","typeDefs","uuid","require","namespace","hostname","DNS","CREATE","CANCEL","CLEAR","SET_SUBMIT_STATUS","SET_SUBMIT_ERROR","CLEAR_SUBMIT_ERROR","SET_DATE_INPUT","CLEAR_DATE_INPUT","SET_DATE_VALUE","CLEAR_DATE_VALUE","SET_DATE_ERROR","CLEAR_DATE_ERROR","SET_DEPT_INPUT","CLEAR_DEPT_INPUT","SET_DEPT_VALUE","CLEAR_DEPT_VALUE","SET_DEPT_ERROR","CLEAR_DEPT_ERROR","SET_DEPT_OPEN","SET_TYPE_VALUE","SET_TYPE_ERROR","CLEAR_TYPE_ERROR","SET_CAT_INPUT","CLEAR_CAT_INPUT","SET_CAT_VALUE","CLEAR_CAT_VALUE","SET_CAT_ERROR","CLEAR_CAT_ERROR","SET_CAT_OPEN","SET_SRC_TYPE","SET_SRC_INPUT","CLEAR_SRC_INPUT","SET_SRC_VALUE","CLEAR_SRC_VALUE","SET_SRC_ERROR","CLEAR_SRC_ERROR","SET_SRC_OPEN","SET_PAY_METHOD_VALUE","CLEAR_PAY_METHOD_VALUE","SET_PAY_METHOD_ERROR","CLEAR_PAY_METHOD_ERROR","SET_DSCRPT_VALUE","CLEAR_DSCRPT_VALUE","SET_TOTAL_INPUT","CLEAR_TOTAL_INPUT","SET_TOTAL_VALUE","CLEAR_TOTAL_VALUE","SET_TOTAL_ERROR","CLEAR_TOTAL_ERROR","SET_RECONCILED_VALUE","CLEAR_RECONCILED_VALUE","InputValue","nullValue","input","value","this","reduceOneById","state","action","id","idKey","reducer","i","len","length","entry","newEntry","slice","values","combineReducers","type","payload","entryId","date","trimStart","getTime","department","Object","assign","open","fromDept","category","srcType","source","isEqual","paymentMethod","description","total","reconciled","journalEntryUpsert","upsertId","submit","status","NotSubmitted","SET_INDEX","SET_DEFAULT_INDEX","SET_NAME","SET_DEFAULT_NAME","SET_WIDTH","SET_DEFAULT_WIDTH","COLLAPSE","EXPAND","HIDE","SHOW","RESTORE_DEFAULTS","TableCell","ini","rowId","index","name","width","collapsed","hidden","tableCell","defaultState","iterateCellByIndex","row","unIndexedCells","indexedCells","Map","nextIndex","key","hasOwnProperty","cell","has","get","set","push","tableRow","curIndex","newIndex","newState","curCell","newCell","OPEN_PAB","CLOSE_PAB","pab","journal","pabs","pabId","undefined","curPAB","newPAB","root","journalEntryUpserts","tableRows","curRow","newRow","store","createStore","composeWithDevTools","applyMiddleware","thunk","create","ROW_ID","DATE_ID","dispatch","DEPT_ID","CATEGORY_ID","SRC_ID","PAY_METHOD_ID","DSCRPT_ID","TOTAL_ID","RECONCILED_ID","getIndexedCells","getCell","cellId","Header","props","cellFormats","useSelector","shallowEqual","cells","useMemo","map","Box","minWidth","flexBasis","flexGrow","order","clone","component","children","TableHead","display","flexDirection","justifyContent","TableRow","TransactionDate","entryDate","textColor","cellFormat","moment","className","textOverflow","whiteSpace","overflow","format","Department","capitalCase","Category","Source","sourceName","__typename","first","last","bizName","deptName","PaymentMethod","method","Description","Total","n","num","d","den","faction","Fraction","numeral","toString","JOURNAL_ENTRY_FRAGMENT","JOURNAL_ENTRIES","JOURNAL_ENTRY_ADDED_SUB","JOURNAL_ENTRY_UPDATED_SUB","CacheControlScope","FilterType","JournalEntiresReconciledFilter","JournalEntriesColumn","JournalEntrySourceType","JournalEntryType","Lc_JournalEntryUpsertSubmitStatus","Lc_JournalEntryUpsertType","SortDirection","RECONCILE","Reconciled","mode","removeReconciled","useState","checked","setChecked","useMutation","mutate","onChange","useCallback","event","a","async","variables","checkboxProps","inputProps","alignItems","JournalMode","Reconcile","Checkbox","UpsertType","getEntry","getUpsertType","Add","Update","getUpdateId","getSubmitStatus","getType","isRequired","getDeptInput","getDept","getDeptError","isDeptOpen","getCatInput","getCatValue","getCatError","isCatOpen","getDate","getDateError","getPayMethod","getPayMethodError","getSrcType","getSrcInput","getSrc","isSrcOpen","getSrcError","getTotalInput","getTotalValue","getTotalError","getDscrptValue","getReconciledValue","args","getState","submitStatus","selectors","client","Error","readFragment","fragment","deptId","catId","payMethodId","srcTypeName","srcId","Person","Business","src","sourceType","upsertActions","batch","setDateValue","Date","setType","setSrcType","setDeptValue","setCatValue","setDscrptValue","setPayMethodValue","setSrcValue","setTotalValue","setTotalInput","setReconciledValue","cancel","Submitting","clear","validateAll","validateDate","validateDept","validateCat","validateSrc","validatePayMethod","validateTotal","ADD_PERSON","ADD_BUSINESS","ADD_JOURNAL_ENTRY","UPDATE_JOURNAL_ENTRY","setSubmitStatus","_submit_","creatNewSrc","srcInput","parsedName","parseFullName","mutation","fields","result","addPerson","clearSrcInput","Promise","resolve","setSubmitError","addBusiness","upsertType","dateError","deptError","catError","srcError","payMethodError","totalError","toISOString","addJournalEntry","Submitted","r","setTimeout","trim","updates","updateJournalEntry","CATEGORY_TYPE_VALIDATION","cat","clearCat","journalEntryCategory","clearCatValue","setDateError","clearDateError","Number","isNaN","clearDeptInput","setDeptError","clearDeptError","setDeptOpen","dept","clearCatInput","setCatOpen","clearCatError","setCatError","setSrcInput","clearSrcValue","setSrcError","clearSrcError","setSrcOpen","payMethod","clearPayMethodError","setPayMethodError","inputNum","parseFloat","setTotalError","TypeError","formattedInput","char","Math","min","parseInt","toFixed","clearTotalError","globalDebounceDispatchState","dispatchId","dispatchQueue","ms","useDebounceDispatch","global","useDispatch","debounceDispatchState","debouchDispatch","Symbol","styles","makeStyles","theme","createStyles","positive","color","green","negative","red","Entry","classes","useApolloClient","journalEntry","style","onDoubleClick","entryUpsertId","skeleton","Skeleton","variant","height","Grid","item","container","direction","xs","Credit","hover","subscribedToAdd","Set","subscribedToUpdate","defaultVars","column","Desc","Body","subKey","NotReconciled","filterBy","eq","reduce","max","useQuery","fetchMore","updateQuery","View","prev","entries","journalEntries","totalCount","add","subscribe","next","journalEntryAdded","readQuery","update","writeQuery","writeFragment","journalEntryUpdated","isLoaded","loadMoreItems","start","end","fetchMoreResult","newResults","splice","entryRow","infiniteLoaderChildren","onItemsRendered","ref","itemCount","itemSize","overscanCount","TableBody","isItemLoaded","minimumBatchSize","inputMode","DateInput","autoFocus","inputVariant","disabled","required","hasError","errorMsg","validate","isValid","toDate","dataPickerProps","helperText","onBlur","onClose","animateYearScrolling","disableToolbar","disableFuture","margin","label","initialFocusedDate","autoOk","InputProps","placeholder","utils","MomentUtils","TotalInput","totalInput","textFieldProps","target","clearTotalValue","startAdornment","InputAdornment","position","TextField","DEPT_INPUT_OPTS_QUERY","filterOptions","opts","getOptionLabel","opt","renderTags","getTagProps","lastIndex","isLastIndex","Chip","size","fontSize","DepartmentInput","onFocus","onOpen","deptInput","getFromDept","fromParent","loading","deptOpts","deptVal","getDeptValue","filter","parent","test","RegExp","hasOptions","getParentDept","deptOpt","unshift","multiple","Array","isArray","onInputChange","fullWidth","renderInput","params","autocompleteProps","autoComplete","disableCloseOnSelect","inputValue","autoHighlight","autoSelect","Autocomplete","CAT_INPUT_OPTS_QUERY","CategoryInput","catInput","catOpts","searchCache","findId","catOpt","catchedOpt","searchStr","join","val","sourceToggle","marginRight","spacing","sourceInput","sourceIcon","marginLeft","bizToggleButtonProps","personToggleButtonProps","SourceTypeToggle","isSrcSet","newSrcType","toggleButtonGroupProps","exclusive","py","ToggleButtonGroup","ToggleButton","BIZ_SRC_DEPT_OPTS_FRAGMENT","BIZ_SRC_BIZ_OPTS_FRAGMENT","BUSINESS_SRC_OPTS_INPUT_QUERY","srcOpts","srcOpt","BusinessSrc","searchCharRef","useRef","current","substr","toLowerCase","searchByName","bizId","withBizOpts","withBizOpt","withDeptAncestors","srcVal","fragmentName","valueChain","getParent","bizOpts","bizVal","newValue","searchText","freeSolo","PERSON_SRC_OPT_FRAGMENT","PEOPLE_SRC_OPTS_QUERY","fixHeight","maxHeight","PersonSrc","people","newSrc","autoCompleteProps","SourceInput","flexWrap","PAY_METHOD_INPUT_QUERY","paymentMethods","p","active","formControlProps","MenuItem","toUpperCase","selectProps","FormControl","InputLabel","Select","FormHelperText","DescriptionInput","creditToggleButtonProps","debitToggleButtonProps","Debit","TypeToggle","typeError","getTypeError","newType","control","pl","Tooltip","arrow","placement","title","selected","FormControlLabel","labelPlacement","AddEntry","onClickCancel","onClickSubmit","typeIsSet","Dialog","maxWidth","DialogTitle","DialogContent","dividers","padding","PaymentMethodInput","ReconciledInput","DialogActions","Button","startIcon","onClick","Queue","Cancel","UpdateEntry","onClickUpdate","onClickDelete","Delete","isPABOpen","JOURNAL_PAB_ID","JournalPAB","useTheme","actions","openPAB","closePAB","isOpen","bottom","right","Fab","aria-label","CircularProgress","Journal","autoSizerChildren","overflowX","Table","GET_REPORT_DATA","ADD_ENTRY_ID","colorMeter","percentSpent","shade","orange","BudgetMeter","spentPercentage","bgcolor","grey","Dashboard","sudDeptReport","useEffect","document","onClickNewEntry","spent","budget","amount","nameTotal","entryTotal","budgetDec","totalRemaining","Container","justify","Link","to","Typography","align","md","lg","Card","CardHeader","titleTypographyProps","noWrap","CardContent","abs","Fragment","DEPTS_FOR_NAV","TopNav","setValue","depts","departments","rootDepts","virtualRoots","virtualRoot","subDepts","showSubDepts","autoWidth","pt","DashBoardRender","useParams","JournalViewRender","JournalReconcileRender","Routes","exact","Boolean","match","ReactDOM","render","CssBaseline","top","left","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.0b136c62.chunk.js","sourcesContent":["import { InMemoryCache, IntrospectionFragmentMatcher } \n  from 'apollo-cache-inmemory';\n\nimport localState from './localStateInI';\nimport introspectionQueryResultData from './fragmentTypes.json';\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData\n});\n\nconst inMemoryCache = new InMemoryCache({fragmentMatcher, addTypename:false});\n\ninMemoryCache.writeData({data:{...localState}});\n\nexport default inMemoryCache;","export default {\n  paginate:{\n    skip:0,\n    limit:1000\n  },\n  sortBy:[],\n  upsertTransactionLocal:null,\n  lc_journalEntryUpserts:[]\n};","import gql from 'graphql-tag';\n\nexport default gql`\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n`;","import {combineReducers} from \"redux\";\nimport * as _ from  \"lodash\"; \nimport isEqual from \"lodash.isequal\";\n\nimport {JournalEntrySourceType, JournalEntrySourceInput, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {\n  \n  Create, CREATE, Cancel, CANCEL, Clear, CLEAR,\n\n  SET_SUBMIT_STATUS, SetSubmitStatus, SET_SUBMIT_ERROR, SetSubmitError, \n  CLEAR_SUBMIT_ERROR, ClearSubmitError,\n\n  SET_TYPE_VALUE, SetTypeValue, SET_TYPE_ERROR,SetTypeError,\n  CLEAR_TYPE_ERROR, ClearTypeError,\n  \n  SetDateInput, SET_DATE_INPUT, ClearDateInput, CLEAR_DATE_INPUT,\n  SetDateValue, SET_DATE_VALUE, ClearDateValue, CLEAR_DATE_VALUE,\n  SetDateError, SET_DATE_ERROR, ClearDateError, CLEAR_DATE_ERROR,\n  \n  SetDeptInput, SET_DEPT_INPUT, ClearDeptInput, CLEAR_DEPT_INPUT,\n  SetDeptValue, SET_DEPT_VALUE, ClearDeptValue, CLEAR_DEPT_VALUE,\n  SetDeptError, SET_DEPT_ERROR, ClearDeptError, CLEAR_DEPT_ERROR,\n  SetDeptOpen , SET_DEPT_OPEN,\n\n  SET_CAT_INPUT, SetCatInput, CLEAR_CAT_INPUT, ClearCatInput, SET_CAT_VALUE,\n  SetCatValue, CLEAR_CAT_VALUE, ClearCatValue, SET_CAT_ERROR, SetCatError,\n  CLEAR_CAT_ERROR, ClearCatError, SET_CAT_OPEN, SetCatOpen,\n  \n  SetSrcType, SET_SRC_TYPE,\n  SetSrcInput, SET_SRC_INPUT, ClearSrcInput, CLEAR_SRC_INPUT,\n  SetSrcValue, SET_SRC_VALUE, ClearSrcValue, CLEAR_SRC_VALUE,\n  SetSrcError, SET_SRC_ERROR, ClearSrcError, CLEAR_SRC_ERROR,\n  SetSrcOpen , SET_SRC_OPEN,\n\n  SetPayMethodValue, SET_PAY_METHOD_VALUE, ClearPayMethodValue, \n  CLEAR_PAY_METHOD_VALUE, SET_PAY_METHOD_ERROR, SetPayMethodError,\n  CLEAR_PAY_METHOD_ERROR, ClearPayMethodError,\n\n  SET_DSCRPT_VALUE, SetDscrptValue, CLEAR_DSCRPT_VALUE, ClearDscrptValue,\n\n  SET_TOTAL_INPUT, SetTotalInput, CLEAR_TOTAL_INPUT, ClearTotalInput,\n  SET_TOTAL_VALUE, SetTotalValue, CLEAR_TOTAL_VALUE, ClearTotalValue,\n  SET_TOTAL_ERROR, SetTotalError, CLEAR_TOTAL_ERROR, ClearTotalError,\n\n  SET_RECONCILED_VALUE, SetReconciledValue,\n  CLEAR_RECONCILED_VALUE, ClearReconciledValue\n\n} from \"../actionTypes/journalEntryUpsert\";\nimport {InputValue, reduceOneById} from \"./utils\";\n\ntype Actions = Create | Cancel | Clear |\n  SetSrcInput | SetDateInput |  ClearDateInput | SetDateValue | ClearDateValue |\n  SetDateError | ClearDateError | SetSrcInput | ClearSrcInput | SetSrcValue |\n  ClearSrcValue | SetSrcError | ClearSrcError | SetSrcOpen | SetDeptInput |\n  ClearDeptInput | SetDeptValue | ClearDeptValue | SetDeptError |\n  ClearDeptError | SetDeptOpen | SetPayMethodValue | ClearPayMethodValue |\n  SetTotalInput | ClearTotalInput | SetTotalValue | ClearTotalValue |\n  SetTotalError | ClearTotalError | SetSubmitStatus | SetSubmitError | \n  ClearSubmitError | SetSrcType | SetPayMethodError | ClearPayMethodError |\n  SetDscrptValue | ClearDscrptValue | SetReconciledValue |\n  ClearReconciledValue | SetCatInput | ClearCatInput | SetCatValue |\n  ClearCatValue | SetCatError | ClearCatError | SetCatOpen | SetTypeValue |\n  SetTypeError | ClearTypeError;\n\n\nconst type = (state = new InputValue<JournalEntryType, null>(null)\n  , action:Actions):InputValue<JournalEntryType, null>  =>\n{\n\n  switch(action.type) {\n    case SET_TYPE_VALUE:\n      return state.value === action.payload.type ?\n        state : {...state, value:action.payload.type};\n    case SET_TYPE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TYPE_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\nconst date = (state = new InputValue<Date, null>(null), action:Actions)\n  :InputValue<Date, null> => \n{\n\n  switch(action.type) {\n    case SET_DATE_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DATE_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DATE_VALUE:\n      return state.value?.getTime() === action.payload.value.getTime() ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DATE_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DATE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DATE_ERROR:\n      return state.error ? {...state, error:null} : state;\n    default:\n      return state;\n  }\n\n}\n\nconst department = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case CREATE:\n      if(action.payload.fromDept) {\n        return {...state, value:action.payload.fromDept};\n      }\n      return state;\n    case SET_DEPT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DEPT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DEPT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DEPT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DEPT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DEPT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_DEPT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\n\nconst category = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_CAT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_CAT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_CAT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_CAT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_CAT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_CAT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_CAT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\nconst source = (state = Object.assign(\n  new InputValue<JournalEntrySourceInput, null>(null),{open:false}),\n  action:Actions):InputValue<JournalEntrySourceInput, null> & {open:boolean} => \n{\n\n  switch(action.type) {\n    case SET_SRC_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_SRC_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_SRC_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_SRC_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_SRC_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SRC_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_SRC_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n\n}\n\nconst paymentMethod = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_PAY_METHOD_VALUE:\n      return action.payload.value && state.value !== action.payload.value ?\n        {...state, value:action.payload.value} : state;\n    case CLEAR_PAY_METHOD_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_PAY_METHOD_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_PAY_METHOD_ERROR:\n        return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst description = (state = new InputValue<string, null>(null), \n  action:Actions ):InputValue<string, null> => \n{\n\n  switch(action.type) {\n    case SET_DSCRPT_VALUE:{\n      const value = action.payload.value.trimStart();\n      return !value || state.value === value ? state : {...state, value};\n    }\n    case CLEAR_DSCRPT_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst total = (state = new InputValue<RationalInput, null>(null), \n  action:Actions ):InputValue<RationalInput, null> => \n{\n\n  switch(action.type) {\n    case SET_TOTAL_INPUT:\n      return state.input === action.payload.input ?\n        state : {...state, input:action.payload.input};\n    case CLEAR_TOTAL_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_TOTAL_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_TOTAL_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_TOTAL_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TOTAL_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst reconciled = (state = new InputValue<boolean, false>(false), \n  action:Actions ):InputValue<boolean, false> => \n{\n\n  switch(action.type) {\n    case SET_RECONCILED_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_RECONCILED_VALUE:\n      return state.value === false ? state : {...state, value:false};\n    default:\n      return state;\n  }\n  \n}\n\nconst values = combineReducers({\n  id:(state:string | null = null, action:Actions) => action.type === CREATE ?\n    (action.payload.entryId || null) : state,\n  type,\n  date,\n  department,\n  category,\n  srcType:(state:JournalEntrySourceType | null = null, action:Actions) => \n    action.type === SET_SRC_TYPE ? action.payload.srcType : state,\n  source,\n  paymentMethod,\n  description,\n  total,\n  reconciled\n});\n\nexport enum SubmitStatus {\n  NotSubmitted,\n  Submitting,\n  Submitted,\n}\n\nconst submit = (state = {\n    status:SubmitStatus.NotSubmitted,\n    error:null as null | Error,\n  }, action:Actions) => \n{\n\n  switch(action.type) {\n    case SET_SUBMIT_STATUS:\n      return state.status === action.payload.status \n        ? state : {...state, status:action.payload.status};\n    case SET_SUBMIT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SUBMIT_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\n\nconst journalEntryUpsert = combineReducers({\n  id:(state:string = \"\", action:Actions) => \n    action.type === CREATE ? action.payload.upsertId : state,\n  values,\n  fromDept:(state:string = \"\", action:Actions):string => {\n    if(action.type === CREATE && action.payload.fromDept) {\n      return action.payload.fromDept;\n    }\n    return state;\n  },\n  submit\n});\n\nexport type JournalEntryUpsert = ReturnType<typeof journalEntryUpsert>;\n\nexport const journalEntryUpserts = (state:JournalEntryUpsert[] = [],\n  action:Actions):JournalEntryUpsert[] => \n{\n\n  switch(action.type) {\n    \n    case CREATE:\n      return [...state, journalEntryUpsert(undefined, action)];\n    case CANCEL:\n    case CLEAR:{\n      const id = action.payload.upsertId;\n      for(let i = 0, len = state.length; i < len; i++){\n        if(state[i].id === id){\n          return [\n            ...state.slice(0, i),\n            ...state.slice(i + 1)\n          ];\n        }\n      }\n      return state;\n    }\n    \n    case SET_TYPE_VALUE:\n    case SET_TYPE_ERROR:\n    case CLEAR_TYPE_ERROR:\n    case SET_DATE_INPUT:\n    case CLEAR_DATE_INPUT:\n    case SET_DATE_VALUE:\n    case CLEAR_DATE_VALUE:\n    case SET_DATE_ERROR:\n    case CLEAR_DATE_ERROR:\n    case SET_DEPT_INPUT:\n    case SET_DEPT_VALUE:\n    case SET_DEPT_ERROR:\n    case SET_DEPT_OPEN:\n    case CLEAR_DEPT_INPUT:\n    case CLEAR_DEPT_VALUE:\n    case CLEAR_DEPT_ERROR:\n    case SET_CAT_INPUT:\n    case CLEAR_CAT_INPUT:\n    case SET_CAT_VALUE:\n    case CLEAR_CAT_VALUE:\n    case SET_CAT_ERROR:\n    case CLEAR_CAT_ERROR:\n    case SET_CAT_OPEN:\n    case SET_SRC_TYPE:\n    case SET_SRC_INPUT:\n    case CLEAR_SRC_INPUT:\n    case SET_SRC_VALUE:\n    case CLEAR_SRC_VALUE:\n    case SET_SRC_ERROR:\n    case CLEAR_SRC_ERROR:\n    case SET_SRC_OPEN:\n    case SET_PAY_METHOD_VALUE:\n    case CLEAR_PAY_METHOD_VALUE:\n    case SET_DSCRPT_VALUE:\n    case CLEAR_DSCRPT_VALUE:\n    case SET_TOTAL_INPUT:\n    case CLEAR_TOTAL_INPUT:\n    case SET_TOTAL_VALUE:\n    case CLEAR_TOTAL_VALUE:\n    case SET_TOTAL_ERROR:\n    case CLEAR_TOTAL_ERROR:\n    case SET_SUBMIT_STATUS:\n    case SET_SUBMIT_ERROR:\n    case CLEAR_SUBMIT_ERROR:\n    case SET_PAY_METHOD_ERROR:\n    case CLEAR_PAY_METHOD_ERROR:\n    case SET_RECONCILED_VALUE:\n    case CLEAR_RECONCILED_VALUE:\n      return reduceOneById(state, action, \n        action.payload.upsertId, \"id\", journalEntryUpsert);\n    default:\n      return state;\n  }\n\n}","\nimport {DocumentNode} from 'graphql';\n\nimport upsertJournalEntry from './schema/upsertJournalEntry.gql';\n\nexport default <DocumentNode[]>[\n  upsertJournalEntry\n];","import {Resolvers} from \"apollo-client\";\n\nconst resolvers:Resolvers = {};\n\nexport default resolvers;","import { BatchHttpLink } from 'apollo-link-batch-http';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { ApolloLink } from 'apollo-link';\nimport { onError } from 'apollo-link-error';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst batchHttpLink = new BatchHttpLink({\n  uri: '/graphql',\n  credentials: 'same-origin',\n});\n\nconst wsLink = new WebSocketLink({\n  uri: `ws://${window.location.host}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\nconst link = ApolloLink.from([\n  onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n      graphQLErrors.forEach(({ message, locations, path }) =>\n        console.error(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      );\n    if (networkError) console.log(`[Network error]: ${networkError}`);\n  }),\n  ApolloLink.split(({query}) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition'\n      && def.operation === 'subscription';\n  },wsLink, batchHttpLink)\n\n]);\n\nexport default link;","import { ApolloClient } from 'apollo-client';\n\nimport cache from './inMemoryCache';\nimport typeDefs from './typeDefs';\nimport resolvers from './resolvers';\nimport link from './link';\n\nexport default new ApolloClient({\n  link,\n  cache,\n  typeDefs,\n  resolvers\n});","import {v4 as randUUID} from 'uuid';\nconst uuid = require('uuid/v5');\nconst namespace = uuid(window.location.hostname, uuid.DNS);\nexport {namespace, uuid, randUUID};","import {Action} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\n\ntype SetInputAction<A> = Action<A, {upsertId:string, input:string}>;\ntype SetValueAction<A, T> = Action<A, {upsertId:string, value:T}>;\ntype SetErrorAction<A> = Action<A, {upsertId:string, error:Error}>;\ntype ClearAction<A> = Action<A, {upsertId:string}>;\n\n// Upsert Life cycle\nexport const CREATE = \"journalEntryUpsert/CREATE\";\nexport type Create = Action<typeof CREATE, {upsertId:string, entryId?:string,\n  fromDept?:string}>;\n\nexport const CANCEL = \"journalEntryUpsert/CANCEL\";\nexport type Cancel = Action<typeof CANCEL, {upsertId:string}>;\n\nexport const CLEAR = \"journalEntryUpsert/CLEAR\";\nexport type Clear = ClearAction<typeof CLEAR>;\n\n// Submit\nexport const SET_SUBMIT_STATUS = \"journalEntryUpsert/SUBMIT\";\nexport type SetSubmitStatus = \n  Action<typeof SET_SUBMIT_STATUS, {upsertId:string, status:SubmitStatus}>;\n\nexport const SET_SUBMIT_ERROR = \"journalEntryUpsert/SET_SUBMIT_ERROR\";\nexport type SetSubmitError = \n  Action<typeof SET_SUBMIT_ERROR, {upsertId:string, error:Error}>;\n\nexport const CLEAR_SUBMIT_ERROR = \"journalEntryUpsert/CLEAR_SUBMIT_ERROR\";\nexport type ClearSubmitError = \n  Action<typeof CLEAR_SUBMIT_ERROR, {upsertId:string}>;\n\n// Date\nexport const SET_DATE_INPUT = \"journalEntryUpsert/SET_DATE_INPUT\";\nexport type SetDateInput = SetInputAction<typeof SET_DATE_INPUT>;\n\nexport const CLEAR_DATE_INPUT = \"journalEntryUpsert/CLEAR_DATE_INPUT\";\nexport type ClearDateInput = ClearAction<typeof CLEAR_DATE_INPUT>;\n\nexport const SET_DATE_VALUE = \"journalEntryUpsert/SET_DATE_VALUE\";\nexport type SetDateValue = SetValueAction<typeof SET_DATE_VALUE, Date>;\n\nexport const CLEAR_DATE_VALUE = \"journalEntryUpsert/CLEAR_DATE_VALUE\";\nexport type ClearDateValue = ClearAction<typeof CLEAR_DATE_VALUE>;\n\nexport const SET_DATE_ERROR = \"journalEntryUpsert/SET_DATE_ERROR\";\nexport type SetDateError = SetErrorAction<typeof SET_DATE_ERROR>;\n\nexport const CLEAR_DATE_ERROR = \"journalEntryUpsert/CLEAR_DATE_ERROR\";\nexport type ClearDateError = ClearAction<typeof CLEAR_DATE_ERROR>;\n\n// Department\nexport const SET_DEPT_INPUT = \"journalEntryUpsert/SET_DEPT_INPUT\";\nexport type SetDeptInput = SetInputAction<typeof SET_DEPT_INPUT>;\n\nexport const CLEAR_DEPT_INPUT = \"journalEntryUpsert/CLEAR_DEPT_INPUT\";\nexport type ClearDeptInput = ClearAction<typeof CLEAR_DEPT_INPUT>;\n\nexport const SET_DEPT_VALUE = \"journalEntryUpsert/SET_DEPT_VALUE\";\nexport type SetDeptValue = SetValueAction<typeof SET_DEPT_VALUE, string>;\n\nexport const CLEAR_DEPT_VALUE = \"journalEntryUpsert/CLEAR_DEPT_VALUE\";\nexport type ClearDeptValue = ClearAction<typeof CLEAR_DEPT_VALUE>;\n\nexport const SET_DEPT_ERROR = \"journalEntryUpsert/SET_DEPT_ERROR\";\nexport type SetDeptError = SetErrorAction<typeof SET_DEPT_ERROR>;\n\nexport const CLEAR_DEPT_ERROR = \"journalEntryUpsert/CLEAR_DEPT_ERROR\";\nexport type ClearDeptError = ClearAction<typeof CLEAR_DEPT_ERROR>;\n\nexport const SET_DEPT_OPEN = \"journalEntryUpsert/SET_DEPT_OPEN\";\nexport type SetDeptOpen = \n  Action<typeof SET_DEPT_OPEN, {upsertId:string, open:boolean}>;\n\n// Type\nexport const SET_TYPE_VALUE = \"journalEntryUpsert/SET_TYPE_VALUE\";\nexport type SetTypeValue = Action<typeof SET_TYPE_VALUE,{upsertId:string,\n  type:JournalEntryType}>;\n\nexport const SET_TYPE_ERROR = \"journalEntryUpsert/SET_TYPE_ERROR\";\nexport type SetTypeError = SetErrorAction<typeof SET_TYPE_ERROR>;\n\nexport const CLEAR_TYPE_ERROR = \"journalEntryUpsert/CLEAR_TYPE_ERROR\";\nexport type ClearTypeError = ClearAction<typeof CLEAR_TYPE_ERROR>;\n\n// Category\nexport const SET_CAT_INPUT = \"journalEntryUpsert/SET_CAT_INPUT\";\nexport type SetCatInput = SetInputAction<typeof SET_CAT_INPUT>;\n\nexport const CLEAR_CAT_INPUT = \"journalEntryUpsert/CLEAR_CAT_INPUT\";\nexport type ClearCatInput = ClearAction<typeof CLEAR_CAT_INPUT>;\n\nexport const SET_CAT_VALUE = \"journalEntryUpsert/SET_CAT_VALUE\";\nexport type SetCatValue = SetValueAction<typeof SET_CAT_VALUE, string>;\n\nexport const CLEAR_CAT_VALUE = \"journalEntryUpsert/CLEAR_CAT_VALUE\";\nexport type ClearCatValue = ClearAction<typeof CLEAR_CAT_VALUE>;\n\nexport const SET_CAT_ERROR = \"journalEntryUpsert/SET_CAT_ERROR\";\nexport type SetCatError = SetErrorAction<typeof SET_CAT_ERROR>;\n\nexport const CLEAR_CAT_ERROR = \"journalEntryUpsert/CLEAR_CAT_ERROR\";\nexport type ClearCatError = ClearAction<typeof CLEAR_CAT_ERROR>;\n\nexport const SET_CAT_OPEN = \"journalEntryUpsert/SET_CAT_OPEN\";\nexport type SetCatOpen = \n  Action<typeof SET_CAT_OPEN, {upsertId:string, open:boolean}>;\n\n// Source\nexport const SET_SRC_TYPE = \"journalEntryUpsert/SET_SRC_TYPE\";\nexport type SetSrcType =\n  Action<typeof SET_SRC_TYPE,{upsertId:string, srcType:JournalEntrySourceType}>;\nexport const CLEAR_SRC_TYPE = \"journalEntryUpsert/CLEAR_SRC_TYPE\";\nexport type ClearSrcType = Action<typeof CLEAR_SRC_TYPE,{upsertId:string}>;\n\nexport const SET_SRC_INPUT = \"journalEntryUpsert/SET_SRC_INPUT\";\nexport type SetSrcInput = SetInputAction<typeof SET_SRC_INPUT>;\n\nexport const CLEAR_SRC_INPUT = \"journalEntryUpsert/CLEAR_SRC_INPUT\";\nexport type ClearSrcInput = ClearAction<typeof CLEAR_SRC_INPUT>;\n\nexport const SET_SRC_VALUE = \"journalEntryUpsert/SET_SRC_VALUE\";\nexport type SetSrcValue = SetValueAction<typeof SET_SRC_VALUE, \n  JournalEntrySourceInput>;\n\nexport const CLEAR_SRC_VALUE = \"journalEntryUpsert/CLEAR_SRC_VALUE\";\nexport type ClearSrcValue = ClearAction<typeof CLEAR_SRC_VALUE>;\n\nexport const SET_SRC_ERROR = \"journalEntryUpsert/SET_SRC_ERROR\";\nexport type SetSrcError = SetErrorAction<typeof SET_SRC_ERROR>;\n\nexport const CLEAR_SRC_ERROR = \"journalEntryUpsert/CLEAR_SRC_ERROR\";\nexport type ClearSrcError = ClearAction<typeof CLEAR_SRC_ERROR>;\n\nexport const SET_SRC_OPEN = \"journalEntryUpsert/SET_SRC_OPEN\";\nexport type SetSrcOpen = \n  Action<typeof SET_SRC_OPEN, {upsertId:string, open:boolean}>;\n\n// Payment Method\nexport const SET_PAY_METHOD_VALUE = \"journalEntryUpsert/SET_PAY_METHOD_VALUE\";\nexport type SetPayMethodValue = \n  SetValueAction<typeof SET_PAY_METHOD_VALUE, string>;\nexport const CLEAR_PAY_METHOD_VALUE = \n  \"journalEntryUpsert/CLEAR_PAY_METHOD_VALUE\";\nexport type ClearPayMethodValue = ClearAction<typeof CLEAR_PAY_METHOD_VALUE>;\n\nexport const SET_PAY_METHOD_ERROR = \"journalEntryUpsert/SET_PAY_METHOD_ERROR\";\nexport type SetPayMethodError = SetErrorAction<typeof SET_PAY_METHOD_ERROR>;\nexport const CLEAR_PAY_METHOD_ERROR \n  = \"journalEntryUpsert/CLEAR_PAY_METHOD_ERROR\";\nexport type ClearPayMethodError = ClearAction<typeof CLEAR_PAY_METHOD_ERROR>;\n\n// Description\nexport const SET_DSCRPT_VALUE = \"journalEntryUpsert/SET_DSCRPT_VALUE\";\nexport type SetDscrptValue = SetValueAction<typeof SET_DSCRPT_VALUE, \n  string>;\n\nexport const CLEAR_DSCRPT_VALUE = \"journalEntryUpsert/CLEAR_DSCRPT_VALUE\";\nexport type ClearDscrptValue = ClearAction<typeof CLEAR_DSCRPT_VALUE>;\n\n// Total\nexport const SET_TOTAL_INPUT = \"journalEntryUpsert/SET_TOTAL_INPUT\";\nexport type SetTotalInput = SetInputAction<typeof SET_TOTAL_INPUT>;\n\nexport const CLEAR_TOTAL_INPUT = \"journalEntryUpsert/CLEAR_TOTAL_INPUT\";\nexport type ClearTotalInput = ClearAction<typeof CLEAR_TOTAL_INPUT>;\n\nexport const SET_TOTAL_VALUE = \"journalEntryUpsert/SET_TOTAL_VALUE\";\nexport type SetTotalValue = SetValueAction<typeof SET_TOTAL_VALUE, \n  RationalInput>;\n\nexport const CLEAR_TOTAL_VALUE = \"journalEntryUpsert/CLEAR_TOTAL_VALUE\";\nexport type ClearTotalValue = ClearAction<typeof CLEAR_TOTAL_VALUE>;\n\nexport const SET_TOTAL_ERROR = \"journalEntryUpsert/SET_TOTAL_ERROR\";\nexport type SetTotalError = SetErrorAction<typeof SET_TOTAL_ERROR>;\n\nexport const CLEAR_TOTAL_ERROR = \"journalEntryUpsert/CLEAR_TOTAL_ERROR\";\nexport type ClearTotalError = ClearAction<typeof CLEAR_TOTAL_ERROR>;\n\n// Reconciled\nexport const SET_RECONCILED_VALUE = \"journalEntryUpsert/SET_RECONCILED_VALUE\";\nexport type SetReconciledValue =\n  SetValueAction<typeof SET_RECONCILED_VALUE, boolean>;\n\nexport const CLEAR_RECONCILED_VALUE = \n  \"journalEntryUpsert/CLEAR_RECONCILED_VALUE\";\nexport type ClearReconciledValue = ClearAction<typeof CLEAR_RECONCILED_VALUE>;","\nexport class InputValue<T, Tnull> {\n  input = \"\";\n  value:T | Tnull;\n  error:Error | null = null;\n  constructor(nullValue:Tnull) {\n    this.value = nullValue;\n  }\n}\n\nexport const reduceOneById = <T, A>(state:T[], action:A, id:string,\n  idKey:keyof T, reducer:(state:T, action:A) => T):T[] =>\n{ \n  for(let i = 0, len = state.length; i < len; i++){\n    const entry = state[i];\n    if(entry[idKey as string] === id) {\n      const newEntry = reducer(entry, action);\n      if(newEntry !== entry) {\n        return [\n          ...state.slice(0, i),\n          newEntry,\n          ...state.slice(i + 1)\n        ];\n      } else {\n        return state;\n      }\n    }\n  }\n  return state;\n}","import {Action} from \"./types\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const CREATE = \"tableCells/CREATE\";\nexport type Create = Action<typeof CREATE, TableCellIni>;\n\nexport const SET_INDEX = \"tableCells/SET_INDEX\";\nexport type SetIndex =\n  Action<typeof SET_INDEX, {id:string, rowId:string, index:number}>;\nexport const SET_DEFAULT_INDEX = \"tableCells/SET_DEFAULT_INDEX\";\nexport type SetDefaultIndex =\n  Action<typeof SET_DEFAULT_INDEX, {id:string, rowId:string}>;\n\nexport const SET_NAME = \"tableCells/SET_NAME\";\nexport type SetName =\n  Action<typeof SET_NAME, {id:string, rowId:string, name:string}>;\nexport const SET_DEFAULT_NAME = \"tableCells/SET_DEFAULT_NAME\";\nexport type SetDefaultName =\n  Action<typeof SET_DEFAULT_NAME, {id:string, rowId:string}>;\n\nexport const SET_WIDTH = \"tableCells/SET_WIDTH\";\nexport type SetWidth =\n  Action<typeof SET_WIDTH, {id:string, rowId:string, width:number}>;\nexport const SET_DEFAULT_WIDTH = \"tableCells/SET_DEFAULT_WIDTH\";\nexport type SetDefaultWidth =\n  Action<typeof SET_DEFAULT_WIDTH, {id:string, rowId:string}>;\n\nexport const COLLAPSE = \"tableCells/COLLAPSE\";\nexport type Collapse = Action<typeof COLLAPSE, {id:string, rowId:string}>;\nexport const EXPAND = \"tableCells/EXPAND\";\nexport type Expand = Action<typeof EXPAND, {id:string, rowId:string}>;\n\nexport const HIDE = \"tableCells/HIDE\";\nexport type Hide = Action<typeof HIDE, {id:string, rowId:string}>;\nexport const SHOW = \"tableCells/SHOW\";\nexport type Show = Action<typeof SHOW, {id:string, rowId:string}>;\n\nexport const RESTORE_DEFAULTS = \"tableCells/RESTORE_DEFAULTS\";\nexport type RestoreDefaults =\n  Action<typeof RESTORE_DEFAULTS, {id:string, rowId:string}>;","import isEqual from \"lodash.isequal\";\n\nimport {CREATE, Create, SET_INDEX, SetIndex, SET_DEFAULT_INDEX, SetDefaultIndex,\n SET_NAME, SetName, SET_DEFAULT_NAME, SetDefaultName, SET_WIDTH, SetWidth,\n SET_DEFAULT_WIDTH, SetDefaultWidth, COLLAPSE, Collapse, EXPAND, Expand,\n HIDE, Hide, SHOW, Show, RESTORE_DEFAULTS,\n RestoreDefaults,\n} from \"../actionTypes/tableRow\";\nimport { TableRow } from \"@material-ui/core\";\n\ntype Actions = Create | SetIndex | SetDefaultIndex | SetName | SetDefaultName |\n  SetWidth | SetDefaultWidth | Collapse | Expand | Hide | Show |\n  RestoreDefaults;\n\nexport interface TableCellIni {\n  rowId:string;\n  id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed?:boolean;\n  hidden?:boolean;\n}\nexport class TableCell {\n  \n  readonly ini:Readonly<TableCellIni>;\n  readonly rowId:string;\n  readonly id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed:boolean;\n  hidden:boolean;\n  \n  constructor(ini:TableCellIni) {\n    this.ini = {...ini} as const;\n    this.rowId = ini.rowId\n    this.id = ini.id;\n    this.index = ini.index;\n    this.name = ini.name;\n    this.width = ini.width;\n    this.collapsed = ini?.collapsed ?? false;\n    this.hidden = ini?.hidden ?? false;\n  }\n\n}\n\nexport const tableCell = (state:TableCell, action:Actions):TableCell => {\n  \n  switch(action.type) {\n    case SET_INDEX:\n      return state.index === action.payload.index ?\n        state : {...state, index:action.payload.index};\n    case SET_DEFAULT_INDEX:\n      return state.index === state.ini.index ?\n        state : {...state, index:state.ini.index};\n    case SET_NAME:\n      return state.name === action.payload.name ?\n        state : {...state, name:action.payload.name};\n    case SET_DEFAULT_NAME:\n      return state.name === state.ini.name ?\n        state : {...state, name:state.ini.name};\n    case SET_WIDTH:\n      return state.width === action.payload.width ?\n        state : {...state, width:action.payload.width};\n    case SET_DEFAULT_WIDTH:\n      return state.width === state.ini.width ?\n        state : {...state, width:state.ini.width};\n    case COLLAPSE:\n      return state.collapsed === true ? state : {...state, collapsed:true};\n    case EXPAND:\n      return state.collapsed === false ? state : {...state, collapsed:false};\n    case HIDE:\n      return state.hidden === true ? state : {...state, hidden:true};\n    case SHOW:\n      return state.hidden === false ? state : {...state, hidden:false};\n    case RESTORE_DEFAULTS:{\n      const defaultState = new TableCell(state.ini);\n      return isEqual(state, defaultState) ? state : defaultState;\n    }\n    default:\n      return state;\n  }\n  \n}\n\ninterface TableRow {\n  [cellId:string]:TableCell;\n}\n\n\nexport const iterateCellByIndex = function*(row:TableRow) {\n\n  const unIndexedCells:TableCell[] = [];\n  const indexedCells = new Map<number, TableCell>();\n\n  let nextIndex = 0;\n  for(const key in row) {\n    \n    if(row.hasOwnProperty(key)) {\n      \n      const cell = row[key];\n      const {index = null} = cell;\n      \n      if(index === null) {\n      \n        continue;\n      \n      } else if(nextIndex === index) {\n        \n        yield cell;\n        \n        while(indexedCells.has(++nextIndex)) {\n        \n          yield indexedCells.get(nextIndex) as TableCell;\n        \n        }\n      \n      } else if(index > 0) {\n      \n        indexedCells.set(index, cell);\n      \n      } else {\n\n        unIndexedCells.push(cell);\n\n      }\n\n    }\n  \n  }\n\n  return unIndexedCells;\n\n}\n\nexport const tableRow = (state:TableRow = {}, action:Actions):TableRow =>\n{\n  switch(action.type) {\n    case CREATE:\n      return action.payload.id in state \n        ? state : {...state, [action.payload.id]:new TableCell(action.payload)};\n    case SET_INDEX:{\n      \n      const curIndex = state[action.payload.id].index;\n      const newIndex = action.payload.index;\n      \n      if(curIndex === newIndex) {\n      \n        return state;\n      \n      } else if(curIndex < newIndex) {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > newIndex) {\n            break;\n          } else if(row.index < curIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index - 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      } else {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > curIndex) {\n            break;\n          } else if(row.index < newIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] = tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index + 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      }\n\n    }\n    case SET_DEFAULT_INDEX:{\n\n      const newState = {} as TableRow;\n\n      for(const row of iterateCellByIndex(state)) {\n\n        newState[row.id] = tableCell(row, action);\n\n      }\n\n      return {...state, ...newState};\n\n    }\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:\n      if(action.payload.id in state) {\n        const curCell = state[action.payload.id];\n        const newCell = tableCell(curCell, action);\n        return newCell === curCell ? \n          state : {...state, [action.payload.id]:newCell};\n      }\n      return state;\n    default:\n      return state;\n  }\n}\n\ninterface TableRows {\n  [rowId:string]:TableRow;\n}\n\nexport const tableRows = (state:TableRows = {}, action:Actions)\n  :TableRows =>\n{\n\n  switch(action.type) {\n    case CREATE:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return {...state, [rowId]:tableRow(undefined, action)};\n    }\n    case SET_INDEX:\n    case SET_DEFAULT_INDEX:\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\n\nexport const CREATE_PAB = \"journal/CREATE_PAB\";\nexport type CreatePAB = Action<typeof CREATE_PAB, {pabId:string}>;\n\nexport const OPEN_PAB = \"journal/OPEN_PAB\";\nexport type OpenPAB = Action<typeof OPEN_PAB, {pabId:string}>;\n\nexport const CLOSE_PAB = \"journal/CLOSE_PAB\";\nexport type ClosePAB = Action<typeof CLOSE_PAB, {pabId:string}>;","import {combineReducers} from \"redux\";\n\nimport {CREATE_PAB, CreatePAB, OPEN_PAB, OpenPAB, CLOSE_PAB, ClosePAB\n} from \"../actionTypes/journal\";\n\ntype Actions = CreatePAB | OpenPAB | ClosePAB;\n\nconst pab = (state = {open:false}, action:Actions) => {\n\n  switch(action.type) {\n    case OPEN_PAB:\n      return state.open === true ? state : {...state, open:true};\n    case CLOSE_PAB:\n      return state.open === false ? state : {...state, open:false};\n    default:\n    return state;\n  }\n\n}\n\nexport type PAB = ReturnType<typeof pab>;\n\ninterface PABs {\n  [key:string]:PAB\n}\n\nexport const pabs = (state:PABs = {}, action:Actions) => {\n\n  switch(action.type) {\n    case CREATE_PAB:\n      // Create ONLY once\n      if(action.payload.pabId in state) {\n        return state;\n      }\n      return {...state, [action.payload.pabId]:pab(undefined, action)}\n    case OPEN_PAB:\n    case CLOSE_PAB:\n      if(action.payload.pabId in state) {\n        const {pabId} = action.payload;\n        const curPAB = state[pabId];\n        const newPAB = pab(curPAB, action);\n        return curPAB === newPAB ? state : {...state, [pabId]:newPAB}\n      }\n      return state;\n    default:\n      return state;\n\n  }\n\n}\n\nexport const journal = combineReducers({\n  pabs\n});\n\nexport type Journal = typeof journal;","import {combineReducers} from \"redux\";\n\nimport {journalEntryUpserts} from \"./journalEntryUpserts\";\nimport {tableRows} from \"./tableRows\";\nimport {journal} from \"./journal\";\n\nconst root = combineReducers({\n  journal,\n  journalEntryUpserts,\n  tableRows\n});\nexport default root;\n\nexport type Root = ReturnType<typeof root>;","import { createStore, applyMiddleware } from \"redux\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport thunk from \"redux-thunk\";\n\nimport root from \"./reducers/root\";\n\nconst store = createStore(root, composeWithDevTools(\n  applyMiddleware(thunk)\n));\n\nexport type AppDispatch = typeof store.dispatch \nexport default store;\n","import * as actions from \"../actionTypes/tableRow\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const create = (ini:TableCellIni):actions.Create => ({\n  type:actions.CREATE,\n  payload:ini\n});\n\nexport const setIndex = (id:string, rowId:string, index:number)\n  :actions.SetIndex => ({\n    type:actions.SET_INDEX,\n    payload:{id, rowId, index}\n  });\n\nexport const setDefaultIndex = (id:string, rowId:string)\n  :actions.SetDefaultIndex => ({\n    type:actions.SET_DEFAULT_INDEX,\n    payload:{id, rowId}\n  });\n\nexport const setName = (id:string, rowId:string, name:string)\n  :actions.SetName => ({\n    type:actions.SET_NAME,\n    payload:{id, rowId, name}\n  });\n\nexport const setDefaultName = (id:string, rowId:string)\n  :actions.SetDefaultName => ({\n    type:actions.SET_DEFAULT_NAME,\n    payload:{id, rowId}\n  });\n\nexport const setWidth = (id:string, rowId:string, width:number)\n  :actions.SetWidth => ({\n    type:actions.SET_WIDTH,\n    payload:{id, rowId, width}\n  });\n\nexport const setDefaultWidth = (id:string, rowId:string)\n  :actions.SetDefaultWidth => ({\n    type:actions.SET_DEFAULT_WIDTH,\n    payload:{id, rowId}\n  });\n\nexport const collapse = (id:string, rowId:string)\n  :actions.Collapse => ({\n    type:actions.COLLAPSE,\n    payload:{id, rowId}\n  });\n\nexport const expand = (id:string, rowId:string)\n  :actions.Expand => ({\n    type:actions.EXPAND,\n    payload:{id, rowId}\n  });\n\nexport const show = (id:string, rowId:string)\n  :actions.Show => ({\n    type:actions.SHOW,\n    payload:{id, rowId}\n  });\n\nexport const hide = (id:string, rowId:string)\n  :actions.Hide => ({\n    type:actions.HIDE,\n    payload:{id, rowId}\n  });\n\nexport const restoreDefaults = (id:string, rowId:string)\n  :actions.RestoreDefaults => ({\n    type:actions.RESTORE_DEFAULTS,\n    payload:{id, rowId}\n  });","import {namespace, uuid} from \"../../../../utils/uuid\";\nimport store from \"../../../../redux/store\";\nimport {create} from \"../../../../redux/actions/tableRow\";\n\nexport const ROW_ID = uuid(\"Journal\", namespace);\n\nexport const DATE_ID = uuid(\"journal/date\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DATE_ID,\n  index:1,\n  name:\"Date\",\n  width:185\n}));\n\nexport const DEPT_ID = uuid(\"journal/department\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DEPT_ID,\n  index:7,\n  name:\"Department\",\n  width:380\n}));\n\nexport const CATEGORY_ID = uuid(\"journal/category\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:CATEGORY_ID,\n  index:3,\n  name:\"Category\",\n  width:380\n}));\n\nexport const SRC_ID = uuid(\"journal/source\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:SRC_ID,\n  index:4,\n  name:\"Source\",\n  width:380\n}));\n\nexport const PAY_METHOD_ID = uuid(\"journal/paymentMethod\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:PAY_METHOD_ID,\n  index:5,\n  name:\"Payment Method\",\n  width:175\n}));\n\nexport const DSCRPT_ID = uuid(\"journal/description\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:DSCRPT_ID,\n  index:6,\n  name:\"Description\",\n  width:380\n}));\n\nexport const TOTAL_ID = uuid(\"journal/total\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:TOTAL_ID,\n  index:2,\n  name:\"Total\",\n  width:130\n}));\n\nexport const RECONCILED_ID = uuid(\"journal/reconciled\", namespace);\nstore.dispatch(create({\n  rowId:ROW_ID,\n  id:RECONCILED_ID,\n  index:0,\n  name:\"Reconciled\",\n  width:105\n}));\n","import {Root} from \"../reducers/root\";\nimport {TableCell, iterateCellByIndex} from \"../reducers/tableRows\";\n\nexport const getIndexedCells = (state:Root, rowId:string)\n  :TableCell[] => \n{\n\n  if(rowId in state.tableRows) {\n    \n    const row = state.tableRows[rowId];\n    \n    return [...iterateCellByIndex(row)];\n\n  }\n\n  return [];\n\n}\n\nexport const getUnIndexedCells = (state:Root, rowId:string)\n  :TableCell[] => \n{\n\n  if(rowId in state.tableRows) {\n  \n    const row = state.tableRows[rowId];\n\n    const iter = iterateCellByIndex(row);\n    while(true) {\n      const result = iter.next();\n      if(result.done) {\n        return result.value;\n      }\n    }\n  \n  }\n\n  return [];\n\n}\n\nexport const getCells = (state:Root, rowId:string):TableCell[] => {\n\n  const cells:TableCell[] = [];\n\n  if(rowId in state.tableRows) {\n  \n    const row = state.tableRows[rowId];\n\n    const iter = iterateCellByIndex(row);\n    let result = iter.next();\n    while(!result.done) {\n      cells.push(result.value);\n      result = iter.next();\n    }\n    cells.push(...result.value);\n  }\n\n  return cells;\n\n}\n\nexport const getCell = (state:Root, rowId:string, cellId:string)\n  :TableCell | null =>\n{\n  if(rowId in state.tableRows && cellId in state.tableRows[rowId]) {\n    return state.tableRows[rowId][cellId];\n  }\n  return null;\n\n}","import React, {useMemo} from 'react';\nimport {useSelector, shallowEqual} from \"react-redux\";\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\n\nimport {ROW_ID} from \"./Cells/cellsReduxIni\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../redux/reducers/tableRows\";\nimport {getIndexedCells} from \"../../../redux/selectors/tableRows\";\n\n\nconst Header = function(props) {\n\n  const cellFormats = useSelector<Root,CellFormat[]>((state) => \n      getIndexedCells(state, ROW_ID), shallowEqual);\n\n  const cells = useMemo(()=>cellFormats.map(({name, width, index}, i)=><Box\n    key={`${name}_${i}`}\n    minWidth={width}\n    flexBasis={width}\n    flexGrow={width}\n    order={index}\n    clone\n  >\n    <TableCell\n      component='div'\n      children={name}\n    />\n  </Box>),[cellFormats]);\n\n  return <TableHead component='div'>\n    <Box\n      display=\"flex !important\"\n      flexDirection=\"row\"\n      justifyContent=\"flex-start\"\n      clone\n    >\n      <TableRow  component='div'>\n        {cells}\n      </TableRow>\n    </Box>\n  </TableHead>;\n\n}\n\nexport default Header;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport moment from 'moment';\n\n\nimport {ROW_ID, DATE_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface TransactionDateProps {\n  entryDate:string;\n  textColor:string;\n}\n\nconst TransactionDate = function(props:TransactionDateProps) {\n\n  const {entryDate, textColor} = props;\n\n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DATE_ID) as CellFormat);\n\n  const date = moment(entryDate);\n  \n  return <Box \n    className={textColor}\n    // display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{date.format('MMM DD, YYYY')}</TableCell>\n  </Box>;\n\n}\n\nexport default TransactionDate;","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\nimport {capitalCase} from \"change-case\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, DEPT_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface DepartmentProps {\n  department:JournalEntryFragment[\"department\"];\n  textColor:string\n}\n\nconst Department = function(props:DepartmentProps) {\n\n  const {department, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DEPT_ID) as CellFormat);\n    \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{capitalCase(department.name)}</TableCell>\n  </Box>;\n\n}\n\nexport default Department;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport {capitalCase} from 'change-case';\n\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, CATEGORY_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface CategoryProps {\n  category:JournalEntryFragment['category'];\n  textColor:string;\n}\n\nconst Category = function(props:CategoryProps) {\n\n  const {category, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, CATEGORY_ID) as CellFormat);\n  \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{capitalCase(category.name)}</TableCell>\n  </Box>;\n\n}\n\nexport default Category;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from \"@material-ui/core/Box\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, SRC_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface SourceProps {\n  source:JournalEntryFragment['source'];\n  textColor:string;\n}\n\nconst Source = function(props:SourceProps) {\n\n  const {source, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, SRC_ID) as CellFormat);\n\n  let sourceName = '';\n  switch(source.__typename) {\n    case \"Person\":\n      sourceName = `${source.name.first} ${source.name.last}`;\n      break;\n    case \"Business\":\n        sourceName = source.bizName;\n        break;\n    case \"Department\":\n      sourceName = source.deptName;\n      break;\n  }\n\n  return<Box \n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{sourceName}</TableCell>\n  </Box>;\n\n}\n\nexport default Source;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from \"@material-ui/core/Box\";\nimport {capitalCase} from 'change-case';\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, PAY_METHOD_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\nexport interface PaymentMethodProps {\n  paymentMethod:JournalEntryFragment['paymentMethod'];\n  textColor:string;\n}\n\nconst PaymentMethod = function(props:PaymentMethodProps) {\n\n  const {paymentMethod, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, PAY_METHOD_ID) as CellFormat);\n  \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n     <TableCell component='div'>{capitalCase(paymentMethod.method)}</TableCell>\n  </Box>;\n  \n}\n\nexport default PaymentMethod;","import React from \"react\";\nimport {useSelector} from \"react-redux\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, DSCRPT_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface DescriptionProps {\n  description:JournalEntryFragment[\"description\"];\n  textColor:string\n}\n\nconst Description = function(props:DescriptionProps) {\n\n  const {description, textColor} = props;\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, DSCRPT_ID) as CellFormat);\n\n \n  return <Box\n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component=\"div\">{description}</TableCell>\n  </Box>\n\n}\n\nexport default Description;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport TableCell from '@material-ui/core/TableCell';\nimport Box from '@material-ui/core/Box';\nimport numeral from 'numeral';\nimport Fraction from 'fraction.js';\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from '../../../../apollo/graphTypes';\nimport {ROW_ID, TOTAL_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\n\n\nexport interface TotalProps {\n  total:JournalEntryFragment['total'];\n  textColor:string;\n}\n\nconst Total = function(props:TotalProps) {\n\n  const {total:{num:n, den:d}, textColor} = props;\n  const faction = new Fraction({n, d});\n  \n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, TOTAL_ID) as CellFormat);\n  \n  return <Box \n    className={textColor}\n    display=\"block\"\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    clone\n  >\n    <TableCell component='div'>{\n      numeral(faction.toString()).format('$0,0.00')\n    }</TableCell>\n  </Box>;\n\n}\n\nexport default Total;","import gql from 'graphql-tag';\n\nexport const JOURNAL_ENTRY_FRAGMENT = gql`\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ...on Business {\n        id\n          bizName : name\n        }\n        ...on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      method\n    }\n    source {\n      __typename\n      ...on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ...on Business {\n        id\n        bizName : name\n      }\n      ...on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    reconciled\n  }\n`;\n\nexport const JOURNAL_ENTRIES = gql`\n  query JournalEntries_1($paginate:PaginateInput!, \n    $sortBy:[JournalEntriesSortByInput!]!, $filterBy:JournalEntiresFilterInput) \n  {\n    journalEntries(paginate:$paginate, sortBy:$sortBy, filterBy:$filterBy)\n      @connection(key:\"JournalEntries_1\", filter:[\"sortBy\", \"filterBy\"]) \n    {\n      totalCount\n      entries {\n        ...JournalEntry_1Fragment\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;","import React, {useCallback, useMemo, useState} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useMutation} from \"@apollo/react-hooks\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport Box from \"@material-ui/core/Box\";\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank';\nimport CheckBoxIcon from '@material-ui/icons/CheckBox';\nimport DoneIcon from '@material-ui/icons/Done';\nimport Checkbox, {CheckboxProps} from '@material-ui/core/Checkbox';\nimport gql from \"graphql-tag\";\n\nimport {JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../../apollo/graphTypes\";\nimport {ROW_ID, RECONCILED_ID} from \"./cellsReduxIni\";\nimport {Root} from \"../../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../../redux/reducers/tableRows\";\nimport {getCell} from \"../../../../redux/selectors/tableRows\";\nimport {JournalMode} from \"../Body\";\nimport {JOURNAL_ENTRY_FRAGMENT} from \"../JournalEntries.gql\";\n\n\nconst RECONCILE = gql`\n  mutation Reconcile_1($id:ID!) {\n    updateJournalEntry(id: $id, fields:{reconciled:true}) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport interface ReconciledProps {\n  reconciled:JournalEntryFragment[\"reconciled\"];\n  entryId:string;\n  textColor:string;\n  mode:JournalMode;\n  removeReconciled:(id:string)=>void;\n}\n\nconst Reconciled = function(props:ReconciledProps) {\n\n  const {reconciled, textColor, mode, entryId, removeReconciled} = props;\n\n  const [checked, setChecked] = useState(false);\n\n  const [mutate] =  useMutation(RECONCILE);\n\n  const cellFormat = useSelector<Root, CellFormat>((state)=> \n    getCell(state, ROW_ID, RECONCILED_ID) as CellFormat);\n\n\n  const onChange = useCallback(async (event?)=>{\n    if(checked) {\n      return;\n    }\n    setChecked(true);\n    try{\n      await mutate({variables:{id:entryId}});\n      removeReconciled(entryId);\n    } catch(error) {\n      setChecked(false);\n    }\n\n  }, [setChecked, mutate, entryId, removeReconciled, checked]);\n\n\n  const checkboxProps:CheckboxProps = {\n    checked,\n    name:\"reconciled\",\n    onChange,\n    inputProps:useMemo(() => ({\n      type:\"checkbox\",\n    }),[]),\n  }\n  \n  return <Box\n    className={textColor}\n    textOverflow=\"ellipsis\"\n    whiteSpace=\"nowrap\"\n    overflow=\"hidden\"\n    // width=\"100%\"\n    minWidth={cellFormat.width}\n    flexBasis={cellFormat.width}\n    flexGrow={cellFormat.width}\n    order={cellFormat.index > -1 ? cellFormat.index : undefined}\n    display=\"flex !important\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    clone\n  >\n    <TableCell component=\"div\">{(()=>{\n      if(reconciled) {\n        return  <DoneIcon />;\n      } else if(mode === JournalMode.Reconcile) {\n        return <Checkbox {...checkboxProps} />;\n      }\n      return null;\n    })()}</TableCell>\n  </Box>;\n\n}\n\nexport default Reconciled;","import { GraphQLResolveInfo, GraphQLScalarType, GraphQLScalarTypeConfig } from 'graphql';\nimport { Context } from './types';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type RequireFields<T, K extends keyof T> = { [X in Exclude<keyof T, K>]?: T[X] } & { [P in K]-?: NonNullable<T[P]> };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string,\n  String: string,\n  Boolean: boolean,\n  Int: number,\n  Float: number,\n  /** The `Upload` scalar type represents a file upload. */\n  Upload: any,\n};\n\n\nexport type Budget = {\n   __typename?: 'Budget',\n  id: Scalars['ID'],\n  amount: Rational,\n  owner: BudgetOwner,\n};\n\nexport type BudgetOwner = Department | Business;\n\nexport type Business = {\n   __typename?: 'Business',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  budget?: Maybe<Budget>,\n  departments?: Maybe<Array<Department>>,\n  vendor?: Maybe<Vendor>,\n};\n\nexport type BusinessAddFields = {\n  name: Scalars['String'],\n};\n\nexport type ByIdFilter = {\n  eq?: Maybe<Scalars['ID']>,\n};\n\nexport enum CacheControlScope {\n  Public = 'PUBLIC',\n  Private = 'PRIVATE'\n}\n\nexport type Department = {\n   __typename?: 'Department',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  code?: Maybe<Scalars['String']>,\n  budget?: Maybe<Budget>,\n  business: Business,\n  parent: DepartmentAncestor,\n  ancestors: Array<DepartmentAncestor>,\n  descendants: Array<Department>,\n  virtualRoot?: Maybe<Scalars['Boolean']>,\n};\n\nexport type DepartmentAddFields = {\n  name: Scalars['String'],\n};\n\nexport type DepartmentAncestor = Department | Business;\n\nexport enum FilterType {\n  Include = 'INCLUDE',\n  Exclude = 'EXCLUDE'\n}\n\nexport type JournalEntiresFilterInput = {\n  department?: Maybe<ByIdFilter>,\n  reconciled?: Maybe<JournalEntiresReconciledFilter>,\n};\n\nexport enum JournalEntiresReconciledFilter {\n  Reconciled = 'RECONCILED',\n  NotReconciled = 'NOT_RECONCILED'\n}\n\nexport enum JournalEntriesColumn {\n  Department = 'DEPARTMENT',\n  Type = 'TYPE',\n  Category = 'CATEGORY',\n  /** ROOT_TYPE */\n  PaymentMethod = 'PAYMENT_METHOD',\n  Total = 'TOTAL',\n  Date = 'DATE',\n  Source = 'SOURCE'\n}\n\nexport type JournalEntriesRes = {\n   __typename?: 'JournalEntriesRes',\n  totalCount: Scalars['Int'],\n  entries: Array<JournalEntry>,\n};\n\nexport type JournalEntriesSortByInput = {\n  column: JournalEntriesColumn,\n  direction?: Maybe<SortDirection>,\n};\n\nexport type JournalEntry = {\n   __typename?: 'JournalEntry',\n  id: Scalars['ID'],\n  type: JournalEntryType,\n  date: Scalars['String'],\n  department: Department,\n  category: JournalEntryCategory,\n  paymentMethod: PaymentMethod,\n  description?: Maybe<Scalars['String']>,\n  total: Rational,\n  source: JournalEntrySource,\n  reconciled: Scalars['Boolean'],\n};\n\nexport type JournalEntryAddedRes = {\n   __typename?: 'JournalEntryAddedRes',\n  totalCount: Scalars['Int'],\n  index: Scalars['Int'],\n  entry: JournalEntry,\n};\n\nexport type JournalEntryAddFields = {\n  date: Scalars['String'],\n  department: Scalars['ID'],\n  type: JournalEntryType,\n  category: Scalars['ID'],\n  paymentMethod: Scalars['ID'],\n  description?: Maybe<Scalars['String']>,\n  total: RationalInput,\n  source: JournalEntrySourceInput,\n  reconciled?: Maybe<Scalars['Boolean']>,\n};\n\nexport type JournalEntryCategory = {\n   __typename?: 'JournalEntryCategory',\n  id: Scalars['ID'],\n  name: Scalars['String'],\n  type: JournalEntryType,\n  parent?: Maybe<JournalEntryCategory>,\n  ancestors: Array<JournalEntryCategory>,\n};\n\nexport type JournalEntrySource = Person | Business | Department;\n\nexport type JournalEntrySourceInput = {\n  sourceType: JournalEntrySourceType,\n  id: Scalars['ID'],\n};\n\nexport enum JournalEntrySourceType {\n  Business = 'BUSINESS',\n  Department = 'DEPARTMENT',\n  Person = 'PERSON'\n}\n\nexport enum JournalEntryType {\n  Credit = 'CREDIT',\n  Debit = 'DEBIT'\n}\n\nexport type JournalEntryUpdateFields = {\n  date?: Maybe<Scalars['String']>,\n  department?: Maybe<Scalars['ID']>,\n  type?: Maybe<JournalEntryType>,\n  category?: Maybe<Scalars['ID']>,\n  paymentMethod?: Maybe<Scalars['ID']>,\n  description?: Maybe<Scalars['String']>,\n  total?: Maybe<RationalInput>,\n  source?: Maybe<JournalEntrySourceInput>,\n  reconciled?: Maybe<Scalars['Boolean']>,\n};\n\nexport type Lc_JournalEntryUpsert = {\n   __typename?: 'LC_JournalEntryUpsert',\n  id: Scalars['ID'],\n  valid: Scalars['Boolean'],\n  type: Lc_JournalEntryUpsertType,\n  submitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  submitError?: Maybe<Scalars['String']>,\n  inputValues: Lc_JournalEntryUpsertInputValues,\n  inputErrors: Lc_JournalEntryUpsertInputErrors,\n  fields: Lc_JournalEntryUpsertFields,\n};\n\nexport type Lc_JournalEntryUpsertFields = {\n   __typename?: 'LC_JournalEntryUpsertFields',\n  id?: Maybe<Scalars['ID']>,\n  date?: Maybe<Scalars['String']>,\n  department: Array<Scalars['ID']>,\n  type?: Maybe<Scalars['ID']>,\n  paymentMethod?: Maybe<Scalars['ID']>,\n  total?: Maybe<Rational>,\n  source: Array<Lc_JournalEntryUpsertSource>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrors = {\n   __typename?: 'LC_JournalEntryUpsertInputErrors',\n  dateError?: Maybe<Scalars['String']>,\n  deptError?: Maybe<Scalars['String']>,\n  typeError?: Maybe<Scalars['String']>,\n  payMethodError?: Maybe<Scalars['String']>,\n  totalError?: Maybe<Scalars['String']>,\n  srcError?: Maybe<Scalars['String']>,\n};\n\nexport type Lc_JournalEntryUpsertInputValues = {\n   __typename?: 'LC_JournalEntryUpsertInputValues',\n  deptInput?: Maybe<Scalars['String']>,\n  totalInput?: Maybe<Scalars['String']>,\n  srcInput?: Maybe<Scalars['String']>,\n  srcType?: Maybe<JournalEntrySourceType>,\n};\n\nexport type Lc_JournalEntryUpsertSource = {\n   __typename?: 'LC_JournalEntryUpsertSource',\n  sourceType: JournalEntrySourceType,\n  id: Scalars['ID'],\n};\n\nexport enum Lc_JournalEntryUpsertSubmitStatus {\n  NotSubmitted = 'NOT_SUBMITTED',\n  Submitting = 'SUBMITTING',\n  Submitted = 'SUBMITTED'\n}\n\nexport enum Lc_JournalEntryUpsertType {\n  Update = 'UPDATE',\n  Add = 'ADD'\n}\n\nexport type Mutation = {\n   __typename?: 'Mutation',\n  addBusiness: Business,\n  updateJournalEntry: JournalEntry,\n  addJournalEntry: JournalEntry,\n  addPerson: Person,\n};\n\n\nexport type MutationAddBusinessArgs = {\n  fields: BusinessAddFields\n};\n\n\nexport type MutationUpdateJournalEntryArgs = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type MutationAddJournalEntryArgs = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type MutationAddPersonArgs = {\n  fields: PersonAddFields\n};\n\nexport type PaginateInput = {\n  skip: Scalars['Int'],\n  limit: Scalars['Int'],\n};\n\nexport type PaymentMethod = {\n   __typename?: 'PaymentMethod',\n  id: Scalars['ID'],\n  active: Scalars['Boolean'],\n  method: Scalars['String'],\n  parent?: Maybe<PaymentMethod>,\n  ancestors: Array<PaymentMethod>,\n};\n\nexport type Person = {\n   __typename?: 'Person',\n  id: Scalars['ID'],\n  name: PersonName,\n};\n\nexport type PersonAddFields = {\n  name: PersonNameInput,\n};\n\nexport type PersonName = {\n   __typename?: 'PersonName',\n  first: Scalars['String'],\n  last: Scalars['String'],\n};\n\nexport type PersonNameInput = {\n  first: Scalars['String'],\n  last: Scalars['String'],\n};\n\nexport type Query = {\n   __typename?: 'Query',\n  lc_journalEntryUpserts: Array<Lc_JournalEntryUpsert>,\n  budgets: Array<Budget>,\n  budget: Budget,\n  businesses: Array<Business>,\n  business: Business,\n  departments: Array<Department>,\n  department?: Maybe<Department>,\n  journalEntries: JournalEntriesRes,\n  journalEntryCategories: Array<JournalEntryCategory>,\n  journalEntryCategory: JournalEntryCategory,\n  journalEntrySources: Array<JournalEntrySource>,\n  paymentMethods: Array<PaymentMethod>,\n  people: Array<Person>,\n};\n\n\nexport type QueryBudgetArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryBusinessesArgs = {\n  searchByName?: Maybe<Scalars['String']>\n};\n\n\nexport type QueryBusinessArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryDepartmentsArgs = {\n  fromParent?: Maybe<Scalars['ID']>,\n  searchByName?: Maybe<Scalars['String']>\n};\n\n\nexport type QueryDepartmentArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryJournalEntriesArgs = {\n  paginate?: Maybe<PaginateInput>,\n  sortBy?: Maybe<Array<JournalEntriesSortByInput>>,\n  filterBy?: Maybe<JournalEntiresFilterInput>\n};\n\n\nexport type QueryJournalEntryCategoryArgs = {\n  id: Scalars['ID']\n};\n\n\nexport type QueryJournalEntrySourcesArgs = {\n  searchByName: Scalars['String']\n};\n\n\nexport type QueryPeopleArgs = {\n  searchByName?: Maybe<PersonNameInput>\n};\n\nexport type Rational = {\n   __typename?: 'Rational',\n  num: Scalars['Int'],\n  den: Scalars['Int'],\n};\n\nexport type RationalInput = {\n  num: Scalars['Int'],\n  den: Scalars['Int'],\n};\n\nexport enum SortDirection {\n  Asc = 'ASC',\n  Desc = 'DESC'\n}\n\nexport type Subscription = {\n   __typename?: 'Subscription',\n  journalEntryAdded: JournalEntry,\n  journalEntryUpdated: JournalEntry,\n};\n\n\nexport type User = {\n   __typename?: 'User',\n  id: Scalars['ID'],\n  user: Person,\n};\n\nexport type Vendor = {\n   __typename?: 'Vendor',\n  approved: Scalars['Boolean'],\n  vendorId?: Maybe<Scalars['ID']>,\n};\n\nexport type GetReportDataQueryVariables = {\n  deptId: Scalars['ID']\n};\n\n\nexport type GetReportDataQuery = { __typename?: 'Query', department: Maybe<{ __typename: 'Department', id: string, name: string, budget: Maybe<{ __typename: 'Budget', id: string, amount: { __typename?: 'Rational', num: number, den: number } }> }>, journalEntries: { __typename?: 'JournalEntriesRes', entries: Array<(\n      { __typename?: 'JournalEntry' }\n      & GetReportDataEntryFragment\n    )> } };\n\nexport type GetReportDataEntryFragment = { __typename: 'JournalEntry', type: JournalEntryType, category: { __typename: 'JournalEntryCategory', id: string, name: string }, total: { __typename?: 'Rational', num: number, den: number }, department: { __typename: 'Department', id: string, name: string, budget: Maybe<{ __typename: 'Budget', id: string, amount: { __typename?: 'Rational', num: number, den: number } }> } };\n\nexport type Reconcile_1MutationVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type Reconcile_1Mutation = { __typename?: 'Mutation', updateJournalEntry: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntry_1Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, description: Maybe<string>, reconciled: boolean, department: { __typename: 'Department', id: string, name: string, ancestors: Array<{ __typename: 'Department', id: string, deptName: string } | { __typename: 'Business', id: string, bizName: string }> }, category: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType, name: string }, paymentMethod: { __typename: 'PaymentMethod', id: string, method: string }, source: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } | { __typename: 'Business', id: string, bizName: string } | { __typename: 'Department', id: string, deptName: string }, total: { __typename?: 'Rational', num: number, den: number } };\n\nexport type JournalEntries_1QueryVariables = {\n  paginate: PaginateInput,\n  sortBy: Array<JournalEntriesSortByInput>,\n  filterBy?: Maybe<JournalEntiresFilterInput>\n};\n\n\nexport type JournalEntries_1Query = { __typename?: 'Query', journalEntries: { __typename?: 'JournalEntriesRes', totalCount: number, entries: Array<(\n      { __typename?: 'JournalEntry' }\n      & JournalEntry_1Fragment\n    )> } };\n\nexport type JournalEntryAdded_1SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_1Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_1SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_1Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CatInputOpts_1QueryVariables = {};\n\n\nexport type CatInputOpts_1Query = { __typename?: 'Query', catOpts: Array<(\n    { __typename?: 'JournalEntryCategory' }\n    & CatInputOptsCat_1Fragment\n  )> };\n\nexport type CatInputOptsCat_1Fragment = { __typename: 'JournalEntryCategory', id: string, name: string, type: JournalEntryType, parent: Maybe<{ __typename?: 'JournalEntryCategory', id: string }> };\n\nexport type DeptInputOpts_1QueryVariables = {\n  fromParent?: Maybe<Scalars['ID']>\n};\n\n\nexport type DeptInputOpts_1Query = { __typename?: 'Query', deptOpts: Array<(\n    { __typename?: 'Department' }\n    & DeptInputOptsDept_1Fragment\n  )> };\n\nexport type DeptInputOptsDept_1Fragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type Lc_JournalEntryUpsert_1Fragment = { __typename: 'LC_JournalEntryUpsert', id: string, valid: boolean, type: Lc_JournalEntryUpsertType, submitStatus: Lc_JournalEntryUpsertSubmitStatus, submitError: Maybe<string>, inputValues: { __typename?: 'LC_JournalEntryUpsertInputValues', deptInput: Maybe<string>, totalInput: Maybe<string>, srcInput: Maybe<string>, srcType: Maybe<JournalEntrySourceType> }, inputErrors: { __typename?: 'LC_JournalEntryUpsertInputErrors', dateError: Maybe<string>, deptError: Maybe<string>, typeError: Maybe<string>, payMethodError: Maybe<string>, totalError: Maybe<string>, srcError: Maybe<string> }, fields: { __typename?: 'LC_JournalEntryUpsertFields', id: Maybe<string>, date: Maybe<string>, department: Array<string>, type: Maybe<string>, paymentMethod: Maybe<string>, total: Maybe<{ __typename?: 'Rational', num: number, den: number }>, source: Array<{ __typename?: 'LC_JournalEntryUpsertSource', sourceType: JournalEntrySourceType, id: string }> } };\n\nexport type Lc_JournalEntryUpserts_1QueryVariables = {};\n\n\nexport type Lc_JournalEntryUpserts_1Query = { __typename?: 'Query', lc_journalEntryUpserts: Array<(\n    { __typename?: 'LC_JournalEntryUpsert' }\n    & Lc_JournalEntryUpsert_1Fragment\n  )> };\n\nexport type AddJournalEntry_1MutationVariables = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type AddJournalEntry_1Mutation = { __typename?: 'Mutation', addJournalEntry: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_1MutationVariables = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type UpdateJournalEntry_1Mutation = { __typename?: 'Mutation', updateJournalEntry: { __typename: 'JournalEntry', id: string } };\n\nexport type PayMethodInput_1QueryVariables = {};\n\n\nexport type PayMethodInput_1Query = { __typename?: 'Query', paymentMethods: Array<{ __typename: 'PaymentMethod', id: string, method: string, active: boolean }> };\n\nexport type BusinessSrcDeptOpts_1Fragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type BusinessSrcBizOpts_1Fragment = { __typename: 'Business', id: string, name: string, vendor: Maybe<{ __typename?: 'Vendor', approved: boolean, vendorId: Maybe<string> }>, deptOpts: Maybe<Array<(\n    { __typename?: 'Department' }\n    & BusinessSrcDeptOpts_1Fragment\n  )>> };\n\nexport type BusinessSrcOptsInput_1QueryVariables = {\n  searchByName: Scalars['String'],\n  deptId: Scalars['ID'],\n  bizId: Scalars['ID'],\n  withBizOpt: Scalars['Boolean'],\n  withDeptAncestors: Scalars['Boolean'],\n  withBizOpts: Scalars['Boolean']\n};\n\n\nexport type BusinessSrcOptsInput_1Query = { __typename?: 'Query', bizOpt: (\n    { __typename?: 'Business' }\n    & BusinessSrcBizOpts_1Fragment\n  ), deptAncestors: Maybe<{ __typename: 'Department', id: string, ancestors: Array<(\n      { __typename?: 'Department' }\n      & BusinessSrcDeptOpts_1Fragment\n    ) | (\n      { __typename?: 'Business' }\n      & BusinessSrcBizOpts_1Fragment\n    )> }>, bizOpts: Array<(\n    { __typename?: 'Business' }\n    & BusinessSrcBizOpts_1Fragment\n  )> };\n\nexport type PersonSrcOpt_1Fragment = { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } };\n\nexport type PeopleSrcOpts_1QueryVariables = {\n  searchByName: PersonNameInput\n};\n\n\nexport type PeopleSrcOpts_1Query = { __typename?: 'Query', people: Array<(\n    { __typename?: 'Person' }\n    & PersonSrcOpt_1Fragment\n  )> };\n\nexport type DeptsForNav_1QueryVariables = {};\n\n\nexport type DeptsForNav_1Query = { __typename?: 'Query', departments: Array<{ __typename: 'Department', id: string, name: string, virtualRoot: Maybe<boolean>, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } }> };\n\nexport type AddPerson_1MutationVariables = {\n  fields: PersonAddFields\n};\n\n\nexport type AddPerson_1Mutation = { __typename?: 'Mutation', addPerson: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } };\n\nexport type AddBusiness_1MutationVariables = {\n  fields: BusinessAddFields\n};\n\n\nexport type AddBusiness_1Mutation = { __typename?: 'Mutation', addBusiness: { __typename: 'Business', id: string, name: string } };\n\nexport type AddJournalEntry_2MutationVariables = {\n  fields: JournalEntryAddFields\n};\n\n\nexport type AddJournalEntry_2Mutation = { __typename?: 'Mutation', addJournalEntry: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_2MutationVariables = {\n  id: Scalars['ID'],\n  fields: JournalEntryUpdateFields\n};\n\n\nexport type UpdateJournalEntry_2Mutation = { __typename?: 'Mutation', updateJournalEntry: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CategoryTypeValidation_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type CategoryTypeValidation_1Query = { __typename?: 'Query', journalEntryCategory: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType } };\n\nexport type ValidateDeptIsLeaf_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type ValidateDeptIsLeaf_1Query = { __typename?: 'Query', department: Maybe<{ __typename: 'Department', id: string, descendants: Array<{ __typename: 'Department', id: string }> }> };\n\nexport type CheckValidVendor_1QueryVariables = {\n  id: Scalars['ID']\n};\n\n\nexport type CheckValidVendor_1Query = { __typename?: 'Query', business: { __typename: 'Business', id: string, vendor: Maybe<{ __typename?: 'Vendor', approved: boolean }> } };\n\n\n\nexport type ResolverTypeWrapper<T> = Promise<T> | T;\n\nexport type ResolverFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Promise<TResult> | TResult;\n\nexport type Resolver<TResult, TParent = {}, TContext = {}, TArgs = {}> = ResolverFn<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionSubscribeFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => AsyncIterator<TResult> | Promise<AsyncIterator<TResult>>;\n\nexport type SubscriptionResolveFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\nexport interface SubscriptionSubscriberObject<TResult, TKey extends string, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<{ [key in TKey]: TResult }, TParent, TContext, TArgs>;\n  resolve?: SubscriptionResolveFn<TResult, { [key in TKey]: TResult }, TContext, TArgs>;\n}\n\nexport interface SubscriptionResolverObject<TResult, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<any, TParent, TContext, TArgs>;\n  resolve: SubscriptionResolveFn<TResult, any, TContext, TArgs>;\n}\n\nexport type SubscriptionObject<TResult, TKey extends string, TParent, TContext, TArgs> =\n  | SubscriptionSubscriberObject<TResult, TKey, TParent, TContext, TArgs>\n  | SubscriptionResolverObject<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionResolver<TResult, TKey extends string, TParent = {}, TContext = {}, TArgs = {}> =\n  | ((...args: any[]) => SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>)\n  | SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>;\n\nexport type TypeResolveFn<TTypes, TParent = {}, TContext = {}> = (\n  parent: TParent,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Maybe<TTypes>;\n\nexport type NextResolverFn<T> = () => Promise<T>;\n\nexport type DirectiveResolverFn<TResult = {}, TParent = {}, TContext = {}, TArgs = {}> = (\n  next: NextResolverFn<TResult>,\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\n/** Mapping between all available schema types and the resolvers types */\nexport type ResolversTypes = {\n  Query: ResolverTypeWrapper<{}>,\n  LC_JournalEntryUpsert: ResolverTypeWrapper<Lc_JournalEntryUpsert>,\n  ID: ResolverTypeWrapper<Scalars['ID']>,\n  Boolean: ResolverTypeWrapper<Scalars['Boolean']>,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  String: ResolverTypeWrapper<Scalars['String']>,\n  LC_JournalEntryUpsertInputValues: ResolverTypeWrapper<Lc_JournalEntryUpsertInputValues>,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: ResolverTypeWrapper<Lc_JournalEntryUpsertInputErrors>,\n  LC_JournalEntryUpsertFields: ResolverTypeWrapper<Lc_JournalEntryUpsertFields>,\n  Rational: ResolverTypeWrapper<Rational>,\n  Int: ResolverTypeWrapper<Scalars['Int']>,\n  LC_JournalEntryUpsertSource: ResolverTypeWrapper<Lc_JournalEntryUpsertSource>,\n  Budget: ResolverTypeWrapper<Omit<Budget, 'owner'> & { owner: ResolversTypes['BudgetOwner'] }>,\n  BudgetOwner: ResolversTypes['Department'] | ResolversTypes['Business'],\n  Department: ResolverTypeWrapper<Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversTypes['DepartmentAncestor'], ancestors: Array<ResolversTypes['DepartmentAncestor']> }>,\n  Business: ResolverTypeWrapper<Business>,\n  Vendor: ResolverTypeWrapper<Vendor>,\n  DepartmentAncestor: ResolversTypes['Department'] | ResolversTypes['Business'],\n  PaginateInput: PaginateInput,\n  JournalEntriesSortByInput: JournalEntriesSortByInput,\n  JournalEntriesColumn: JournalEntriesColumn,\n  SortDirection: SortDirection,\n  JournalEntiresFilterInput: JournalEntiresFilterInput,\n  ByIdFilter: ByIdFilter,\n  JournalEntiresReconciledFilter: JournalEntiresReconciledFilter,\n  JournalEntriesRes: ResolverTypeWrapper<JournalEntriesRes>,\n  JournalEntry: ResolverTypeWrapper<Omit<JournalEntry, 'source'> & { source: ResolversTypes['JournalEntrySource'] }>,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: ResolverTypeWrapper<JournalEntryCategory>,\n  PaymentMethod: ResolverTypeWrapper<PaymentMethod>,\n  JournalEntrySource: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  Person: ResolverTypeWrapper<Person>,\n  PersonName: ResolverTypeWrapper<PersonName>,\n  PersonNameInput: PersonNameInput,\n  Mutation: ResolverTypeWrapper<{}>,\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  JournalEntryAddFields: JournalEntryAddFields,\n  PersonAddFields: PersonAddFields,\n  Subscription: ResolverTypeWrapper<{}>,\n  CacheControlScope: CacheControlScope,\n  DepartmentAddFields: DepartmentAddFields,\n  FilterType: FilterType,\n  JournalEntryAddedRes: ResolverTypeWrapper<JournalEntryAddedRes>,\n  Upload: ResolverTypeWrapper<Scalars['Upload']>,\n  User: ResolverTypeWrapper<User>,\n};\n\n/** Mapping between all available schema types and the resolvers parents */\nexport type ResolversParentTypes = {\n  Query: {},\n  LC_JournalEntryUpsert: Lc_JournalEntryUpsert,\n  ID: Scalars['ID'],\n  Boolean: Scalars['Boolean'],\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  String: Scalars['String'],\n  LC_JournalEntryUpsertInputValues: Lc_JournalEntryUpsertInputValues,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: Lc_JournalEntryUpsertInputErrors,\n  LC_JournalEntryUpsertFields: Lc_JournalEntryUpsertFields,\n  Rational: Rational,\n  Int: Scalars['Int'],\n  LC_JournalEntryUpsertSource: Lc_JournalEntryUpsertSource,\n  Budget: Omit<Budget, 'owner'> & { owner: ResolversParentTypes['BudgetOwner'] },\n  BudgetOwner: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  Department: Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversParentTypes['DepartmentAncestor'], ancestors: Array<ResolversParentTypes['DepartmentAncestor']> },\n  Business: Business,\n  Vendor: Vendor,\n  DepartmentAncestor: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  PaginateInput: PaginateInput,\n  JournalEntriesSortByInput: JournalEntriesSortByInput,\n  JournalEntriesColumn: JournalEntriesColumn,\n  SortDirection: SortDirection,\n  JournalEntiresFilterInput: JournalEntiresFilterInput,\n  ByIdFilter: ByIdFilter,\n  JournalEntiresReconciledFilter: JournalEntiresReconciledFilter,\n  JournalEntriesRes: JournalEntriesRes,\n  JournalEntry: Omit<JournalEntry, 'source'> & { source: ResolversParentTypes['JournalEntrySource'] },\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: JournalEntryCategory,\n  PaymentMethod: PaymentMethod,\n  JournalEntrySource: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  Person: Person,\n  PersonName: PersonName,\n  PersonNameInput: PersonNameInput,\n  Mutation: {},\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  JournalEntryAddFields: JournalEntryAddFields,\n  PersonAddFields: PersonAddFields,\n  Subscription: {},\n  CacheControlScope: CacheControlScope,\n  DepartmentAddFields: DepartmentAddFields,\n  FilterType: FilterType,\n  JournalEntryAddedRes: JournalEntryAddedRes,\n  Upload: Scalars['Upload'],\n  User: User,\n};\n\nexport type CacheControlDirectiveResolver<Result, Parent, ContextType = Context, Args = {   maxAge?: Maybe<Maybe<Scalars['Int']>>,\n  scope?: Maybe<Maybe<CacheControlScope>> }> = DirectiveResolverFn<Result, Parent, ContextType, Args>;\n\nexport type BudgetResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Budget'] = ResolversParentTypes['Budget']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  amount?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  owner?: Resolver<ResolversTypes['BudgetOwner'], ParentType, ContextType>,\n};\n\nexport type BudgetOwnerResolvers<ContextType = Context, ParentType extends ResolversParentTypes['BudgetOwner'] = ResolversParentTypes['BudgetOwner']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type BusinessResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Business'] = ResolversParentTypes['Business']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  departments?: Resolver<Maybe<Array<ResolversTypes['Department']>>, ParentType, ContextType>,\n  vendor?: Resolver<Maybe<ResolversTypes['Vendor']>, ParentType, ContextType>,\n};\n\nexport type DepartmentResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Department'] = ResolversParentTypes['Department']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  code?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType>,\n  parent?: Resolver<ResolversTypes['DepartmentAncestor'], ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['DepartmentAncestor']>, ParentType, ContextType>,\n  descendants?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  virtualRoot?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n};\n\nexport type DepartmentAncestorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['DepartmentAncestor'] = ResolversParentTypes['DepartmentAncestor']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type JournalEntriesResResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntriesRes'] = ResolversParentTypes['JournalEntriesRes']> = {\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  entries?: Resolver<Array<ResolversTypes['JournalEntry']>, ParentType, ContextType>,\n};\n\nexport type JournalEntryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntry'] = ResolversParentTypes['JournalEntry']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  department?: Resolver<ResolversTypes['Department'], ParentType, ContextType>,\n  category?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  source?: Resolver<ResolversTypes['JournalEntrySource'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n};\n\nexport type JournalEntryAddedResResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryAddedRes'] = ResolversParentTypes['JournalEntryAddedRes']> = {\n  totalCount?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  index?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  entry?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType>,\n};\n\nexport type JournalEntryCategoryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryCategory'] = ResolversParentTypes['JournalEntryCategory']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n};\n\nexport type JournalEntrySourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntrySource'] = ResolversParentTypes['JournalEntrySource']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type Lc_JournalEntryUpsertResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsert'] = ResolversParentTypes['LC_JournalEntryUpsert']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  valid?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['LC_JournalEntryUpsertType'], ParentType, ContextType>,\n  submitStatus?: Resolver<ResolversTypes['LC_JournalEntryUpsertSubmitStatus'], ParentType, ContextType>,\n  submitError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  inputValues?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputValues'], ParentType, ContextType>,\n  inputErrors?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputErrors'], ParentType, ContextType>,\n  fields?: Resolver<ResolversTypes['LC_JournalEntryUpsertFields'], ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertFieldsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertFields'] = ResolversParentTypes['LC_JournalEntryUpsertFields']> = {\n  id?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  date?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  department?: Resolver<Array<ResolversTypes['ID']>, ParentType, ContextType>,\n  type?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  total?: Resolver<Maybe<ResolversTypes['Rational']>, ParentType, ContextType>,\n  source?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsertSource']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrorsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputErrors'] = ResolversParentTypes['LC_JournalEntryUpsertInputErrors']> = {\n  dateError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  deptError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  typeError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  payMethodError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertInputValuesResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputValues'] = ResolversParentTypes['LC_JournalEntryUpsertInputValues']> = {\n  deptInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcType?: Resolver<Maybe<ResolversTypes['JournalEntrySourceType']>, ParentType, ContextType>,\n};\n\nexport type Lc_JournalEntryUpsertSourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertSource'] = ResolversParentTypes['LC_JournalEntryUpsertSource']> = {\n  sourceType?: Resolver<ResolversTypes['JournalEntrySourceType'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n};\n\nexport type MutationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Mutation'] = ResolversParentTypes['Mutation']> = {\n  addBusiness?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<MutationAddBusinessArgs, 'fields'>>,\n  updateJournalEntry?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationUpdateJournalEntryArgs, 'id' | 'fields'>>,\n  addJournalEntry?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationAddJournalEntryArgs, 'fields'>>,\n  addPerson?: Resolver<ResolversTypes['Person'], ParentType, ContextType, RequireFields<MutationAddPersonArgs, 'fields'>>,\n};\n\nexport type PaymentMethodResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethod'] = ResolversParentTypes['PaymentMethod']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  active?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  method?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n};\n\nexport type PersonResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Person'] = ResolversParentTypes['Person']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['PersonName'], ParentType, ContextType>,\n};\n\nexport type PersonNameResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PersonName'] = ResolversParentTypes['PersonName']> = {\n  first?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  last?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n};\n\nexport type QueryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Query'] = ResolversParentTypes['Query']> = {\n  lc_journalEntryUpserts?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsert']>, ParentType, ContextType>,\n  budgets?: Resolver<Array<ResolversTypes['Budget']>, ParentType, ContextType>,\n  budget?: Resolver<ResolversTypes['Budget'], ParentType, ContextType, RequireFields<QueryBudgetArgs, 'id'>>,\n  businesses?: Resolver<Array<ResolversTypes['Business']>, ParentType, ContextType, QueryBusinessesArgs>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<QueryBusinessArgs, 'id'>>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType, QueryDepartmentsArgs>,\n  department?: Resolver<Maybe<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentArgs, 'id'>>,\n  journalEntries?: Resolver<ResolversTypes['JournalEntriesRes'], ParentType, ContextType, QueryJournalEntriesArgs>,\n  journalEntryCategories?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  journalEntryCategory?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType, RequireFields<QueryJournalEntryCategoryArgs, 'id'>>,\n  journalEntrySources?: Resolver<Array<ResolversTypes['JournalEntrySource']>, ParentType, ContextType, RequireFields<QueryJournalEntrySourcesArgs, 'searchByName'>>,\n  paymentMethods?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  people?: Resolver<Array<ResolversTypes['Person']>, ParentType, ContextType, QueryPeopleArgs>,\n};\n\nexport type RationalResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Rational'] = ResolversParentTypes['Rational']> = {\n  num?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  den?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n};\n\nexport type SubscriptionResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Subscription'] = ResolversParentTypes['Subscription']> = {\n  journalEntryAdded?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryAdded\", ParentType, ContextType>,\n  journalEntryUpdated?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpdated\", ParentType, ContextType>,\n};\n\nexport interface UploadScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Upload'], any> {\n  name: 'Upload'\n}\n\nexport type UserResolvers<ContextType = Context, ParentType extends ResolversParentTypes['User'] = ResolversParentTypes['User']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  user?: Resolver<ResolversTypes['Person'], ParentType, ContextType>,\n};\n\nexport type VendorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Vendor'] = ResolversParentTypes['Vendor']> = {\n  approved?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  vendorId?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n};\n\nexport type Resolvers<ContextType = Context> = {\n  Budget?: BudgetResolvers<ContextType>,\n  BudgetOwner?: BudgetOwnerResolvers,\n  Business?: BusinessResolvers<ContextType>,\n  Department?: DepartmentResolvers<ContextType>,\n  DepartmentAncestor?: DepartmentAncestorResolvers,\n  JournalEntriesRes?: JournalEntriesResResolvers<ContextType>,\n  JournalEntry?: JournalEntryResolvers<ContextType>,\n  JournalEntryAddedRes?: JournalEntryAddedResResolvers<ContextType>,\n  JournalEntryCategory?: JournalEntryCategoryResolvers<ContextType>,\n  JournalEntrySource?: JournalEntrySourceResolvers,\n  LC_JournalEntryUpsert?: Lc_JournalEntryUpsertResolvers<ContextType>,\n  LC_JournalEntryUpsertFields?: Lc_JournalEntryUpsertFieldsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputErrors?: Lc_JournalEntryUpsertInputErrorsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputValues?: Lc_JournalEntryUpsertInputValuesResolvers<ContextType>,\n  LC_JournalEntryUpsertSource?: Lc_JournalEntryUpsertSourceResolvers<ContextType>,\n  Mutation?: MutationResolvers<ContextType>,\n  PaymentMethod?: PaymentMethodResolvers<ContextType>,\n  Person?: PersonResolvers<ContextType>,\n  PersonName?: PersonNameResolvers<ContextType>,\n  Query?: QueryResolvers<ContextType>,\n  Rational?: RationalResolvers<ContextType>,\n  Subscription?: SubscriptionResolvers<ContextType>,\n  Upload?: GraphQLScalarType,\n  User?: UserResolvers<ContextType>,\n  Vendor?: VendorResolvers<ContextType>,\n};\n\n\n/**\n * @deprecated\n * Use \"Resolvers\" root object instead. If you wish to get \"IResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IResolvers<ContextType = Context> = Resolvers<ContextType>;\nexport type DirectiveResolvers<ContextType = Context> = {\n  cacheControl?: CacheControlDirectiveResolver<any, any, ContextType>,\n};\n\n\n/**\n* @deprecated\n* Use \"DirectiveResolvers\" root object instead. If you wish to get \"IDirectiveResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IDirectiveResolvers<ContextType = Context> = DirectiveResolvers<ContextType>;","import {Root} from \"../reducers/root\";\nimport {JournalEntryUpsert, SubmitStatus\n} from \"../reducers/journalEntryUpserts\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\n\nconst getEntry = (state:Root, upsertId:string):JournalEntryUpsert | null => {\n  for(const entry of state.journalEntryUpserts) {\n    if(entry.id === upsertId) {\n      return entry;\n    }\n  }\n  return null;\n}\n\nexport enum UpsertType {\n  Add,\n  Update\n}\n\nexport const getUpsertType = (state:Root, upsertId:string):UpsertType | null =>\n{\n  const id = getEntry(state, upsertId)?.values.id;\n  if(id === undefined) {\n    return null;\n  } else if(id === null) {\n    return UpsertType.Add;\n  } else {\n    return UpsertType.Update;\n  }\n}\n\nexport const getUpdateId = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.values.id || null;\n}\n\nexport const getSubmitStatus = (state:Root, upsertId:string)\n  :SubmitStatus | null => \n{\n  return getEntry(state, upsertId)?.submit.status ?? null;\n}\n\nexport const getSubmitError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.submit.error || null;\n}\n\nexport const getType = (state:Root, upsertId:string):JournalEntryType | null =>\n{\n  return getEntry(state, upsertId)?.values.type.value || null;\n}\n\nexport const getTypeError = (state:Root, upsertId:string):Error | null =>\n{\n  return getEntry(state, upsertId)?.values.type.error || null;\n}\n\nexport const isRequired = (state:Root, upsertId:string):boolean => {\n  return !(getEntry(state, upsertId)?.values.id);\n}\n\nexport const getDeptInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.department.input || \"\";\n}\n\nexport const getFromDept = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.fromDept || null;\n}\n\nexport const getDept = (state:Root, upsertId:string)\n  :string | null => \n{\n  return getEntry(state, upsertId)?.values.department.value || null;\n}\n\nexport const getDeptError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.department.error || null;\n}\n\nexport const isDeptOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.department.open || false;\n}\n\n// export const getCatType = (state:Root, upsertId:string)\n//   :JournalEntryType | null => \n// {\n//   return getEntry(state, upsertId)?.values.catType || null;\n// }\n\nexport const getCatInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.category.input || \"\";\n}\n\nexport const getCatValue = (state:Root, upsertId:string)\n  :string | null => \n{\n  return getEntry(state, upsertId)?.values.category.value || null;\n}\n\nexport const getCatError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.category.error || null;\n}\n\nexport const isCatOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.category.open || false;\n}\n\nexport const getDate = (state:Root, upsertId:string):Date | null => {\n  return getEntry(state, upsertId)?.values.date.value || null;\n}\n\nexport const getDateError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.date.error || null;\n}\n\nexport const getPayMethod = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.paymentMethod.value || \"\";\n}\n\nexport const getPayMethodError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.paymentMethod.error || null;\n}\n\nexport const getSrcType = (state:Root, upsertId:string)\n  :JournalEntrySourceType | null => \n{\n  return getEntry(state, upsertId)?.values.srcType || null;\n}\n\nexport const getSrcInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.source.input || \"\";\n}\n\nexport const getSrc = (state:Root, upsertId:string)\n  :JournalEntrySourceInput | null => \n{\n  return getEntry(state, upsertId)?.values.source.value || null;\n}\n\nexport const isSrcOpen = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.source.open || false;\n}\n\nexport const getSrcError = (state:Root, upsertId:string):Error | null => {\n  return getEntry(state, upsertId)?.values.source.error || null;\n}\n\nexport const getTotalInput = (state:Root, upsertId:string):string => {\n  return getEntry(state, upsertId)?.values.total.input || \"\";\n}\n\nexport const getTotalValue = (state:Root, upsertId:string)\n  :RationalInput | null => \n{\n  return getEntry(state, upsertId)?.values.total.value || null;\n}\n\nexport const getTotalError = (state:Root, upsertId:string)\n  :Error | null => \n{\n  return getEntry(state, upsertId)?.values.total.error || null;\n}\n\nexport const getDscrptValue = (state:Root, upsertId:string):string | null => {\n  return getEntry(state, upsertId)?.values.description.value || null;\n}\n\nexport const getReconciledValue = (state:Root, upsertId:string):boolean => {\n  return getEntry(state, upsertId)?.values.reconciled.value || false;\n}","import Fraction from 'fraction.js';\nimport { ApolloClient } from \"apollo-client\";\nimport {batch} from \"react-redux\";\nimport {parseFullName} from \"parse-full-name\";\nimport gql from \"graphql-tag\";\n\nimport {Thunk} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType,\n  JournalEntryType,\n  AddPerson_1Mutation as AddPerson,\n  AddPerson_1MutationVariables as AddPersonVars,\n  AddJournalEntry_2Mutation as AddJournalEntry,\n  AddJournalEntry_2MutationVariables as AddJournalEntryVars,\n  UpdateJournalEntry_2Mutation as UpdateJournalEntry,\n  UpdateJournalEntry_2MutationVariables as UpdateJournalEntryVars,\n  AddBusiness_1Mutation as AddBusiness,\n  AddBusiness_1MutationVariables as AddBusinessVars,\n  CheckValidVendor_1Query as CheckValidVendor,\n  CheckValidVendor_1QueryVariables as CheckValidVendorVars,\n  CategoryTypeValidation_1Query as CategoryTypeValidationQuery,\n  CategoryTypeValidation_1QueryVariables as CategoryTypeValidationQueryVars,\n  ValidateDeptIsLeaf_1Query as ValidateDeptIsLeafQuery,\n  ValidateDeptIsLeaf_1QueryVariables as ValidateDeptIsLeafQueryVars,\n  JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\nimport * as upsertActions from \"../actionTypes/journalEntryUpsert\";\nimport * as selectors from \"../selectors/journalEntryUpsert\";\nimport {JOURNAL_ENTRY_FRAGMENT\n} from \"../../components/Journal/Table/JournalEntries.gql\"\n\n// Upsert Life cycle\nexport const create = (upsertId:string,\n  args:{entryId?:string, fromDept?:string, client?:ApolloClient<any>} = {})\n  :Thunk<upsertActions.Create | upsertActions.SetDateValue |\n      upsertActions.SetDeptValue | upsertActions.SetCatValue |\n      upsertActions.SetDscrptValue | upsertActions.SetSrcValue |\n      upsertActions.SetPayMethodValue | upsertActions.SetTotalValue |\n      upsertActions.SetReconciledValue | upsertActions.SetTypeValue |\n      upsertActions.SetTotalInput | upsertActions.SetTotalError |\n      upsertActions.SetSrcType\n    > => (dispatch, getState) => \n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  const {entryId, fromDept, client} = args;\n\n  if(submitStatus !== null) {\n    return;\n  } else if(entryId) {\n\n    if(!client) {\n      // TODO: update types to handle this dep\n      throw Error(\"client required for update\");\n    }\n    \n    const entry = client.readFragment<JournalEntryFragment>({\n      id:`JournalEntry:${entryId}`,\n      fragment:JOURNAL_ENTRY_FRAGMENT\n    });\n\n    if(!entry) {\n      // TODO: implement generic error handler.\n      return;\n    }\n\n    const {\n      date,\n      type,\n      department:{id:deptId},\n      category:{id:catId},\n      description,\n      paymentMethod:{id:payMethodId},\n      source:{\n        __typename:srcTypeName,\n        id:srcId\n      },\n      total:{num, den},\n      reconciled\n    } = entry;\n\n\n    const srcType = srcTypeName === \"Person\" ? JournalEntrySourceType.Person :\n      JournalEntrySourceType.Business;\n    \n    const src:JournalEntrySourceInput = {\n      sourceType:(()=>{\n        if(srcTypeName === \"Person\") {\n          return JournalEntrySourceType.Person;\n        } else if(srcTypeName === \"Business\") {\n          return JournalEntrySourceType.Business;\n        } else {\n          return JournalEntrySourceType.Department;\n        }\n      })(),\n      id:srcId\n    }\n\n    dispatch({\n      type:upsertActions.CREATE,\n      payload:{upsertId, entryId, fromDept:args.fromDept}\n    });\n\n    batch(()=>{\n      dispatch(setDateValue(upsertId, new Date(date as string)));\n      dispatch(setType(upsertId, type, client));\n      dispatch(setSrcType(upsertId,srcType))\n      dispatch(setDeptValue(upsertId, deptId));\n      dispatch(setCatValue(upsertId, catId));\n      if(description) {\n        dispatch(setDscrptValue(upsertId, description as string));\n      }\n      dispatch(setPayMethodValue(upsertId, payMethodId));\n      dispatch(setSrcValue(upsertId, src));\n      dispatch(setTotalValue(upsertId, num/den));\n      dispatch(setTotalInput(upsertId, (num/den).toString()));\n      dispatch(setReconciledValue(upsertId, reconciled));\n\n    });\n\n\n  } else {\n    \n    dispatch({\n      type:upsertActions.CREATE,\n      payload:{upsertId, fromDept:args.fromDept}\n    });\n\n  }\n\n\n}\n\nexport const cancel = (upsertId:string)\n  :Thunk<upsertActions.Cancel> => (dispatch, getState) => \n{\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus === SubmitStatus.Submitting) {\n    return;\n  }\n\n  dispatch({\n    type:upsertActions.CANCEL,\n    payload:{upsertId}\n  });\n  \n} \n\nexport const clear = (upsertId:string)\n  :Thunk<upsertActions.Clear> => (dispatch, getState) => \n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus === SubmitStatus.Submitting) {\n    return;\n  }\n\n  dispatch({\n    type:upsertActions.CLEAR,\n    payload:{upsertId}\n  });\n\n} \n\n// Submit\nexport const validateAll = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<any> => async (dispatch, getState, ...args) => \n{\n    await validateDate(upsertId)(dispatch, getState, ...args)\n    await validateDept(upsertId, client)(dispatch, getState, ...args)\n    await validateCat(upsertId)(dispatch, getState, ...args)\n    await validateSrc(upsertId)(dispatch, getState, ...args)\n    await validatePayMethod(upsertId)(dispatch, getState, ...args)\n    await validateTotal(upsertId)(dispatch, getState, ...args)\n  \n}\n\nconst ADD_PERSON = gql`\n  mutation AddPerson_1($fields:PersonAddFields!) {\n    addPerson(fields:$fields) {\n      __typename\n      id\n      name {\n        first\n        last\n      }\n    }\n  }\n`;\n\nconst ADD_BUSINESS = gql`\n  mutation AddBusiness_1($fields:BusinessAddFields!) {\n    addBusiness(fields:$fields) {\n      __typename\n      id\n      name\n    }\n  }\n`;\n\nconst ADD_JOURNAL_ENTRY = gql`\n  mutation AddJournalEntry_2($fields:JournalEntryAddFields!) {\n    addJournalEntry(fields:$fields) {\n      __typename\n      id\n    }\n  }\n`;\n\nconst UPDATE_JOURNAL_ENTRY = gql`\n  mutation UpdateJournalEntry_2($id:ID!, $fields:JournalEntryUpdateFields!) {\n    updateJournalEntry(id:$id, fields:$fields) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const submit = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSubmitStatus> => (dispatch, getState) =>\n{\n\n  const state = getState();\n  const submitStatus = selectors.getSubmitStatus(state, upsertId);\n\n  if(submitStatus === null || submitStatus !== SubmitStatus.NotSubmitted) {\n    return;\n  }\n\n  dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitting));\n\n  dispatch(_submit_(upsertId, client));\n\n}\n\nconst creatNewSrc = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSrcValue | upsertActions.SetSubmitError |\n     upsertActions.SetSubmitStatus | upsertActions.ClearSrcInput,\n     Promise<void>> =>  async (dispatch, getState) =>\n{\n\n  const state = getState();\n\n  const srcType = selectors.getSrcType(state, upsertId);\n  const srcInput = selectors.getSrcInput(state, upsertId);\n\n  if(srcType === JournalEntrySourceType.Person) {\n\n    const parsedName = parseFullName(srcInput);\n\n    try {\n\n      const result = await client.mutate<AddPerson, AddPersonVars>({\n        mutation:ADD_PERSON,\n        variables:{\n          fields:{\n            name:{\n              first:parsedName.first,\n              last:parsedName.last\n            }\n          }\n        }\n      });\n\n      if(!result.data?.addPerson.id) {\n        \n        throw new Error(\"Something went wrong. Server did not respond with new person id.\");\n\n      }\n      \n      batch(()=>{\n        \n        dispatch(clearSrcInput(upsertId));\n        dispatch(setSrcValue(upsertId, {\n          sourceType:JournalEntrySourceType.Person,\n          id:(result.data as AddPerson).addPerson.id\n        }));\n\n      });\n      \n      await Promise.resolve();\n\n      dispatch(_submit_(upsertId, client));\n      \n    } catch(error) {\n      \n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(error?.message || `${error}`)));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n\n    }\n\n  } else {\n    \n    try {\n\n      const result = await client.mutate<AddBusiness, AddBusinessVars>({\n        mutation:ADD_BUSINESS,\n        variables:{\n          fields:{\n            name:srcInput\n          }\n        }\n      });\n\n      if(!result.data?.addBusiness.id) {\n        \n        throw new Error(\"Something went wrong. Server did not respond with new business id.\");\n\n      }\n\n      dispatch(setSrcValue(upsertId, {\n        sourceType:JournalEntrySourceType.Business,\n        id:result.data.addBusiness.id\n      }));\n      \n      await Promise.resolve();\n\n      dispatch(_submit_(upsertId, client));\n\n    } catch(error) {\n\n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(error?.message || `${error}`)));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n\n    }\n\n  }\n\n  return;\n\n}\n\nexport const _submit_ = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetSubmitStatus | upsertActions.SetSubmitError |\n  upsertActions.SetSrcValue, Promise<void>> => \n{\n  return async (dispatch, getState, ...args) => {\n\n    const state = getState();\n\n    \n    // Run field validations\n    await validateAll(upsertId, client)(dispatch, getState, ...args); \n   \n    \n    // Wait for all validation actions to update state\n    await Promise.resolve();\n    \n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    const dateError = selectors.getDateError(state, upsertId);\n    const deptError = selectors.getDeptError(state, upsertId);\n    const catError = selectors.getCatError(state, upsertId);\n    const srcError = selectors.getSrcError(state, upsertId);\n    const payMethodError = selectors.getPayMethodError(state, upsertId);\n    const totalError = selectors.getTotalError(state, upsertId);\n\n    if(dateError || deptError || catError || srcError || payMethodError\n      || totalError)\n    {\n      batch(()=>{\n        dispatch(setSubmitError(upsertId,\n          new Error(\"Invalid submission, please check fields\")));\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n      });\n      return;\n    }\n\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      const dateError = selectors.getDateError(state, upsertId);\n      const deptError = selectors.getDeptError(state, upsertId);\n      const catError = selectors.getCatError(state, upsertId);\n      const srcError = selectors.getSrcError(state, upsertId);\n      const payMethodError = selectors.getPayMethodError(state, upsertId);\n      const totalError = selectors.getTotalError(state, upsertId);\n\n      if(dateError || deptError || catError || srcError || payMethodError\n        || totalError)\n      {\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(\"Invalid submission, please check fields\")));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n      }\n\n      const source = selectors.getSrc(state, upsertId);\n      \n      if(!source) {\n        \n        dispatch(creatNewSrc(upsertId, client));\n        \n        return;\n      \n      }\n\n      const date = selectors.getDate(state, upsertId);\n      const type = selectors.getType(state, upsertId) as JournalEntryType;\n      const department = selectors.getDept(state, upsertId);\n      const category = selectors.getCatValue(state, upsertId);\n      const paymentMethod = selectors.getPayMethod(state, upsertId);\n      const description = \n        selectors.getDscrptValue(state, upsertId) ?? undefined;\n      const total = selectors.getTotalValue(state, upsertId);\n      const reconciled = \n        selectors.getReconciledValue(state, upsertId) ?? undefined;\n\n      if(!(date && department && category && paymentMethod && total\n        && type !== null)) \n      {\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(`Something went wrong, field values:\n              type:${type}\n              date:${date}\n              department:${department}\n              source:${source}\n              category:${category}\n              paymentMethod:${paymentMethod}\n              total:${total}\n            `)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n      }\n\n      try {\n\n        const result = await client\n          .mutate<AddJournalEntry, AddJournalEntryVars>({\n            mutation:ADD_JOURNAL_ENTRY,\n            variables:{\n              fields:{\n                date:date.toISOString(),\n                type,\n                department,\n                source,\n                category,\n                paymentMethod,\n                description,\n                total,\n                reconciled\n              }\n            }\n          });\n\n          if(!result.data?.addJournalEntry.id) {\n            throw new Error(\"Something went wrong. Server did not respond with journal entry id.\");\n          }\n\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitted));\n\n          // Allow for any animation triggers for status submitted\n          await new Promise((r)=>setTimeout(r, 300));\n\n          // Clear upsert on success\n          dispatch(clear(upsertId));\n\n      } catch(error) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(error?.message || `${error}`)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n\n        return;\n\n      }\n\n    } else {\n\n\n      const srcInput = selectors.getSrcInput(state, upsertId);\n\n      if(srcInput.trim()) {\n\n        dispatch(creatNewSrc(upsertId, client));\n        \n        return;\n\n      }\n\n      const id = selectors.getUpdateId(state, upsertId);\n      const date = selectors.getDate(state, upsertId);\n      const source = selectors.getSrc(state, upsertId);\n      const type = selectors.getType(state, upsertId) as JournalEntryType;\n      const department = selectors.getDept(state, upsertId);\n      const category = selectors.getCatValue(state, upsertId);\n      const paymentMethod = selectors.getPayMethod(state, upsertId);\n      const description = \n        selectors.getDscrptValue(state, upsertId) ?? undefined;\n      const total = selectors.getTotalValue(state, upsertId);\n      const reconciled = \n        selectors.getReconciledValue(state, upsertId) ?? undefined;\n\n      const entry = client.readFragment<JournalEntryFragment>({\n        id:`JournalEntry:${id}`,\n        fragment:JOURNAL_ENTRY_FRAGMENT\n      });\n\n      if(!entry) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(\"Something went wrong.\")));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n        return;\n\n      }\n\n      const fields = {} as UpdateJournalEntryVars[\"fields\"];\n      const variables = {id, fields} as UpdateJournalEntryVars;\n\n      let updates = 0;\n\n      if(date && date.toISOString() !== entry.date) {\n        updates++;\n        fields.date = date.toISOString();\n      }\n\n      if(type && type !== entry.type) {\n        updates++;\n        fields.type = type;\n      }\n\n      if(department && department !== entry.department.id) {\n        updates++;\n        fields.department = department;\n      }\n      \n      if(source && source.id !== entry.source.id) {\n        updates++;\n        fields.source = source;\n      }\n\n      if(category && category !== entry.category.id) {\n        updates++;\n        fields.category = category;\n      }\n\n      if(paymentMethod && paymentMethod !== entry.paymentMethod.id) {\n        updates++;\n        fields.paymentMethod = paymentMethod;\n      }\n\n      if(description !== entry.description) {\n        updates++;\n        fields.description = description;\n      }\n\n      if(total && (total.num/total.den) !== (entry.total.num/entry.total.den)) {\n        updates++;\n        fields.total = total;\n      }\n\n      if(reconciled !== undefined && reconciled !== entry.reconciled) {\n        updates++;\n        fields.reconciled = reconciled;\n      }\n\n      // NO updates\n      if(updates === 0) {\n        dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        await Promise.resolve();\n        dispatch(cancel(upsertId));\n        return;\n      }\n\n      try {\n\n        const result = await client\n          .mutate<UpdateJournalEntry, UpdateJournalEntryVars>({\n            mutation:UPDATE_JOURNAL_ENTRY,\n            variables\n          });\n\n          if(!result.data?.updateJournalEntry.id) {\n            throw new Error(\"Something went wrong.\");\n          }\n\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.Submitted));\n\n          // Allow for any animation triggers for status submitted\n          await new Promise((r)=>setTimeout(r, 300));\n\n          // Clear upsert on success\n          dispatch(clear(upsertId));\n\n      } catch(error) {\n\n        batch(()=>{\n          dispatch(setSubmitError(upsertId,\n            new Error(error?.message || `${error}`)));\n          dispatch(setSubmitStatus(upsertId, SubmitStatus.NotSubmitted));\n        });\n\n        return;\n\n      }\n\n    }\n\n  }\n}\n\nexport const setSubmitStatus = (upsertId:string, status:SubmitStatus)\n  :upsertActions.SetSubmitStatus => ({\n    type:upsertActions.SET_SUBMIT_STATUS,\n    payload:{upsertId, status}\n  });\n\nexport const setSubmitError = (upsertId:string, error:Error)\n  :upsertActions.SetSubmitError => ({\n    type:upsertActions.SET_SUBMIT_ERROR,\n    payload:{upsertId, error}\n  });\n\n// Type\nconst CATEGORY_TYPE_VALIDATION = gql`\n  query CategoryTypeValidation_1($id:ID!) {\n    journalEntryCategory(id: $id) {\n      __typename\n      id\n      type\n    }\n  }\n`;\nexport const setType = (upsertId:string, type:JournalEntryType,\n  client:ApolloClient<any>):Thunk<upsertActions.SetTypeValue |\n    upsertActions.ClearCatValue> => async (dispatch, getState) =>\n{\n\n  const state = getState();\n\n  const cat = selectors.getCatValue(state, upsertId);\n\n  let clearCat = false;\n\n  if(cat !== null) {\n\n    try {\n\n      const {data} = await client.query<CategoryTypeValidationQuery,\n        CategoryTypeValidationQueryVars>({\n          query:CATEGORY_TYPE_VALIDATION,\n          variables:{id:cat}\n        });\n      \n      const curType = data.journalEntryCategory.type;\n\n      if(curType !== type) {\n        clearCat = true;\n      }\n\n    } catch (error) {\n\n      // TODO:  Implement generic error handler\n\n    }\n    \n  }\n  \n  if(clearCat) {\n\n    batch(() => {\n      dispatch(clearCatValue(upsertId));\n      dispatch({\n        type:upsertActions.SET_TYPE_VALUE,\n        payload:{upsertId, type}\n      });\n    });\n  \n  } else {\n    \n    dispatch({\n      type:upsertActions.SET_TYPE_VALUE,\n      payload:{upsertId, type}\n    });\n\n  }\n\n\n}\nexport const setTypeError = (upsertId:string, error:Error)\n  :upsertActions.SetTypeError => ({\n    type:upsertActions.SET_TYPE_ERROR,\n    payload:{upsertId, error}\n  });\nexport const clearTypeError = (upsertId:string)\n  :upsertActions.ClearTypeError => ({\n    type:upsertActions.CLEAR_TYPE_ERROR,\n    payload:{upsertId}\n  });\n\n// Date\nexport const setDateInput = (upsertId:string, input:string):\n  upsertActions.SetDateInput => ({\n    type:upsertActions.SET_DATE_INPUT,\n    payload:{upsertId, input}\n  });\n\nexport const clearDateInput = (upsertId:string):upsertActions.ClearDateInput =>\n  ({\n    type:upsertActions.CLEAR_DATE_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setDateValue = (upsertId:string, value:Date):\n  upsertActions.SetDateValue => ({\n    type:upsertActions.SET_DATE_VALUE,\n    payload:{upsertId, value}\n  });\n\nexport const clearDateValue = (upsertId:string):upsertActions.ClearDateValue =>\n  ({\n    type:upsertActions.CLEAR_DATE_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setDateError = (upsertId:string, error:Error):\n  upsertActions.SetDateError => ({\n    type:upsertActions.SET_DATE_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearDateError = (upsertId:string):upsertActions.ClearDateError =>\n  ({\n    type:upsertActions.CLEAR_DATE_ERROR,\n    payload:{upsertId}\n  });\n\nexport const validateDate = (upsertId:string)\n  :Thunk<upsertActions.SetDateError | upsertActions.ClearDateError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const date = selectors.getDate(state, upsertId);\n    const dateError = selectors.getDateError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Check for valid date\n    if(date) {\n      \n      if(Number.isNaN(date.getTime())) {\n        \n        dispatch(setDateError(upsertId, new Error(\"Invalid date.\")));\n      \n      } else if(dateError) {\n        \n        dispatch(clearDateError(upsertId));\n      \n      }\n\n    // Required\n    } else if(upsertType === selectors.UpsertType.Add) {\n      \n      dispatch(setDateError(upsertId, new Error(\"Date is required.\")));\n    \n    // Clear errors\n    } else if(dateError) {\n      \n      dispatch(clearDateError(upsertId));\n\n    }\n\n}\n\n// Department\nexport const setDeptInput = (upsertId:string, input:string)\n  :upsertActions.SetDeptInput => ({\n      type:upsertActions.SET_DEPT_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearDeptInput = (upsertId:string)\n  :upsertActions.ClearDeptInput => ({\n    type:upsertActions.CLEAR_DEPT_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setDeptValue = (upsertId:string, value:string)\n  :upsertActions.SetDeptValue => ({\n      type:upsertActions.SET_DEPT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearDeptValue = (upsertId:string)\n  :upsertActions.ClearDeptValue => ({\n    type:upsertActions.CLEAR_DEPT_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setDeptError = (upsertId:string, error:Error):\n  upsertActions.SetDeptError => ({\n    type:upsertActions.SET_DEPT_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearDeptError = (upsertId:string)\n  :upsertActions.ClearDeptError => ({\n    type:upsertActions.CLEAR_DEPT_ERROR,\n    payload:{upsertId}\n  });\n\nexport const setDeptOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetDeptOpen => ({\n    type:upsertActions.SET_DEPT_OPEN,\n    payload:{upsertId, open}\n  });\nconst VALIDATE_DEPT_LEAF = gql`\n  query ValidateDeptIsLeaf_1($id:ID!) {\n    department(id: $id) {\n      __typename\n      id\n      descendants {\n        __typename\n        id\n      }\n    }\n  } \n`;\nexport const validateDept = (upsertId:string, client:ApolloClient<any>)\n  :Thunk<upsertActions.SetDeptError | upsertActions.ClearDeptError> => \n  async (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const dept = selectors.getDept(state, upsertId);\n    const deptError = selectors.getDeptError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      if(dept) {\n\n\n      } else {\n\n        dispatch(setDeptError(upsertId, new Error(\"Department is required.\")));\n\n      } \n\n    // Clear errors\n    } else if(deptError) {\n      \n      dispatch(clearDeptError(upsertId));\n\n    }\n\n}\n\nconst BUSINESS_VENDOR_CHECK = gql`\n  query CheckValidVendor_1($id:ID!) {\n    business(id: $id) {\n      __typename\n      id\n      vendor {\n        approved\n      }\n    }\n  }\n`\n\n// Category\nexport const setCatInput = (upsertId:string, input:string)\n  :upsertActions.SetCatInput => ({\n      type:upsertActions.SET_CAT_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearCatInput = (upsertId:string)\n  :upsertActions.ClearCatInput => ({\n    type:upsertActions.CLEAR_CAT_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setCatValue = (upsertId:string, value:string)\n  :upsertActions.SetCatValue => ({\n      type:upsertActions.SET_CAT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearCatValue = (upsertId:string)\n  :upsertActions.ClearCatValue => ({\n    type:upsertActions.CLEAR_CAT_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setCatError = (upsertId:string, error:Error):\n  upsertActions.SetCatError => ({\n    type:upsertActions.SET_CAT_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearCatError = (upsertId:string)\n  :upsertActions.ClearCatError => ({\n    type:upsertActions.CLEAR_CAT_ERROR,\n    payload:{upsertId}\n  });\n\nexport const setCatOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetCatOpen => ({\n    type:upsertActions.SET_CAT_OPEN,\n    payload:{upsertId, open}\n  });\n\nexport const validateCat = (upsertId:string)\n  :Thunk<upsertActions.SetCatError | upsertActions.ClearCatError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const cat = selectors.getCatValue(state, upsertId);\n    const catError = selectors.getCatError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add && !cat) {\n      \n      dispatch(setCatError(upsertId, new Error(\"Category is required.\")));\n    \n    // Clear errors\n    } else if(catError) {\n      \n      dispatch(clearCatError(upsertId));\n\n    }\n\n}\n\n// Source\nexport const setSrcType = (upsertId:string, srcType:JournalEntrySourceType)\n  :upsertActions.SetSrcType => ({\n    type:upsertActions.SET_SRC_TYPE,\n    payload:{upsertId, srcType}\n  });\n\nexport const clearSrcType = (upsertId:string):upsertActions.ClearSrcType => ({\n  type:upsertActions.CLEAR_SRC_TYPE,\n  payload:{upsertId}\n});\n\nexport const setSrcInput = (upsertId:string, input:string)\n  :upsertActions.SetSrcInput => ({\n      type:upsertActions.SET_SRC_INPUT,\n      payload:{ upsertId, input}\n  });\n\nexport const clearSrcInput = (upsertId:string)\n  :upsertActions.ClearSrcInput => ({\n    type:upsertActions.CLEAR_SRC_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setSrcValue = (upsertId:string, value:JournalEntrySourceInput)\n  :upsertActions.SetSrcValue => ({\n      type:upsertActions.SET_SRC_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearSrcValue = (upsertId:string)\n  :upsertActions.ClearSrcValue => ({\n    type:upsertActions.CLEAR_SRC_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setSrcError = (upsertId:string, error:Error):\n  upsertActions.SetSrcError => ({\n    type:upsertActions.SET_SRC_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearSrcError = (upsertId:string):upsertActions.ClearSrcError => ({\n  type:upsertActions.CLEAR_SRC_ERROR,\n  payload:{upsertId}\n});\n\nexport const setSrcOpen = (upsertId:string, open:boolean)\n  :upsertActions.SetSrcOpen => ({\n    type:upsertActions.SET_SRC_OPEN,\n    payload:{upsertId, open}\n  });\nexport const validateSrc = (upsertId:string)\n  :Thunk<upsertActions.SetSrcError | upsertActions.ClearSrcError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const src = selectors.getSrc(state, upsertId);\n    const srcError = selectors.getSrcError(state, upsertId);\n\n    if(src) {\n      if(srcError) {\n        dispatch(clearSrcError(upsertId));\n      }\n      return;\n    }\n    \n    const srcType = selectors.getSrcType(state, upsertId);\n    const srcInput = selectors.getSrcInput(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    if(srcInput) {\n      \n      if(srcType !== JournalEntrySourceType.Person) {\n        if(srcError) {\n          dispatch(clearSrcError(upsertId));\n        }\n        return;\n      }\n\n      // Validate name\n      const parsedName = parseFullName(srcInput);\n\n      if(!parsedName.first.trim()) {\n        dispatch(setSrcError(upsertId, new Error(\"First name is required.\")));\n      } else if(!parsedName.last.trim()) {\n        dispatch(setSrcError(upsertId, new Error(\"Last name is required.\")));\n      } else if(srcError){\n        dispatch(clearSrcError(upsertId));\n      }\n\n    // Required\n    } else if(upsertType === selectors.UpsertType.Add) {\n    \n      dispatch(setSrcError(upsertId, new Error(\"Source is required.\")));\n    \n    // Clear errors\n    } else if(srcError) {\n        \n      dispatch(clearSrcError(upsertId));\n\n    }\n      \n\n}\n// Payment Method\nexport const setPayMethodValue = (upsertId:string, value:string)\n  :upsertActions.SetPayMethodValue => ({\n    type:upsertActions.SET_PAY_METHOD_VALUE,\n    payload:{upsertId, value}\n  });\nexport const clearPayMethodValue = (upsertId:string):upsertActions.ClearPayMethodValue => \n({\n  type:upsertActions.CLEAR_PAY_METHOD_VALUE,\n  payload:{upsertId}\n});\nexport const setPayMethodError = (upsertId:string, error:Error):\n  upsertActions.SetPayMethodError => ({\n    type:upsertActions.SET_PAY_METHOD_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearPayMethodError = (upsertId:string)\n  :upsertActions.ClearPayMethodError => ({\n    type:upsertActions.CLEAR_PAY_METHOD_ERROR,\n    payload:{upsertId}\n  });\nexport const validatePayMethod = (upsertId:string)\n  :Thunk<upsertActions.SetPayMethodError | upsertActions.ClearPayMethodError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const payMethod = selectors.getPayMethod(state, upsertId);\n    const payMethodError = selectors.getPayMethodError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add && !payMethod) {\n      \n      dispatch(setPayMethodError(upsertId, \n        new Error(\"Payment Method is required.\")));\n    \n    // Clear errors\n    } else if(payMethodError) {\n      \n      dispatch(clearPayMethodError(upsertId));\n\n    }\n\n}\n\n// Description\nexport const setDscrptValue = (upsertId:string, value:string)\n  :upsertActions.SetDscrptValue => ({\n      type:upsertActions.SET_DSCRPT_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearDscrptValue = (upsertId:string)\n  :upsertActions.ClearDscrptValue => ({\n    type:upsertActions.CLEAR_DSCRPT_VALUE,\n    payload:{upsertId}\n  });\n\n// Total\nexport const setTotalInput = (upsertId:string, input:string)\n  :upsertActions.SetTotalInput | upsertActions.SetTotalError =>\n{\n\n  const inputNum = Number.parseFloat(input);\n\n  if(Number.isNaN(inputNum)){\n    return setTotalError(upsertId, new TypeError(`Invalid Number.`));\n  }\n\n  let formattedInput = \"\";\n  for(let i = 0, len = input.length; i < len; i++) {\n    const char = input[i];\n    if(char === \".\") {\n      formattedInput += char;\n      len = Math.min(len, i + 3);\n    } else if(!Number.isNaN(Number.parseInt(char))) {\n      formattedInput += char;\n    }\n  }\n\n  return {\n    type:upsertActions.SET_TOTAL_INPUT,\n    payload:{ upsertId, input:formattedInput}\n  };\n\n}\n\nexport const clearTotalInput = (upsertId:string)\n  :upsertActions.ClearTotalInput => ({\n    type:upsertActions.CLEAR_TOTAL_INPUT,\n    payload:{upsertId}\n  });\n\nexport const setTotalValue = (upsertId:string, total:number)\n  : upsertActions.SetTotalValue => \n{\n  \n  // Convert to rational\n  const {n:num, d:den} = new Fraction(total.toFixed(2));\n  const value = {num, den};\n\n  return {\n    type:upsertActions.SET_TOTAL_VALUE,\n    payload:{ upsertId, value}\n  };\n\n}\n\nexport const clearTotalValue = (upsertId:string)\n  :upsertActions.ClearTotalValue => ({\n    type:upsertActions.CLEAR_TOTAL_VALUE,\n    payload:{upsertId}\n  });\n\nexport const setTotalError = (upsertId:string, error:Error):\n  upsertActions.SetTotalError => ({\n    type:upsertActions.SET_TOTAL_ERROR,\n    payload:{upsertId, error}\n  });\n\nexport const clearTotalError = (upsertId:string)\n  :upsertActions.ClearTotalError => ({\n    type:upsertActions.CLEAR_TOTAL_ERROR,\n    payload:{upsertId}\n  });\n\nexport const validateTotal = (upsertId:string)\n  :Thunk<upsertActions.SetTotalError | upsertActions.ClearTotalError> => \n  (dispatch, getState) => \n{\n\n    const state = getState();\n\n    const total = selectors.getTotalValue(state, upsertId);\n    const totalError = selectors.getTotalError(state, upsertId);\n    const upsertType = selectors.getUpsertType(state, upsertId);\n\n    // Required\n    if(upsertType === selectors.UpsertType.Add) {\n      \n      if(total) {\n\n        if(total.num/total.den === 0) {\n          dispatch(setTotalError(upsertId, new Error(\"Total cannot be 0.\")));\n        } else if(totalError) {\n          dispatch(clearTotalError(upsertId));\n        }\n\n      } else {\n\n        dispatch(setTotalError(upsertId, new Error(\"Total is required.\")));\n      \n      }\n\n    \n    // Clear errors\n    } else if(totalError) {\n      \n      dispatch(clearTotalError(upsertId));\n\n    }\n\n}\n\n// Reconciled\nexport const setReconciledValue = (upsertId:string, value:boolean)\n  :upsertActions.SetReconciledValue => ({\n      type:upsertActions.SET_RECONCILED_VALUE,\n      payload:{ upsertId, value}\n  });\n\nexport const clearReconciledValue = (upsertId:string)\n  :upsertActions.ClearReconciledValue => ({\n    type:upsertActions.CLEAR_RECONCILED_VALUE,\n    payload:{upsertId}\n  });","import {useCallback, useMemo} from \"react\";\nimport {Action} from \"redux\";\nimport {useDispatch, batch} from \"react-redux\";\nimport {ThunkAction, ThunkDispatch} from \"redux-thunk\";\n\nimport {Thunk} from \"./actions/types\";\n\nexport const useBatchDispatch = () => {\n\n  const dispatch = useDispatch();\n\n  const batchDispatch = useCallback(<Actions extends Action[]>(\n    batchActions:Actions) => \n  {\n    \n    const thunk:ThunkAction<void, any, any, Action> = (dispatch) => {\n      \n      batch(()=>{\n        for(const action of batchActions) {\n          dispatch(action);\n        }\n      });\n  \n    }\n    \n    dispatch(thunk);\n\n  },[dispatch]);\n  \n  return batchDispatch;\n\n}\n\nexport type DebounceA = Action<any> | Thunk<any, any>;\n\nconst globalDebounceDispatchState = {\n  dispatchId:null as ReturnType<typeof setTimeout> | null,\n  dispatchQueue:new Map<string | symbol,\n    [DebounceA, ThunkDispatch<any, any, any>]>(),\n  ms:5\n};\n\nexport function useDebounceDispatch(global:true):\n  <A extends DebounceA>(action: A) => void;\nexport function useDebounceDispatch(global:false, ms:number):\n  <A extends DebounceA>(action: A) => void;\n  export function useDebounceDispatch(global?:boolean, ms?:number):\n  <A extends DebounceA>(action: A) => void;\nexport function useDebounceDispatch(global:boolean = true, ms = 5){\n\n  const dispatch = useDispatch();\n\n  const debounceDispatchState = useMemo(() => {\n    return global ? globalDebounceDispatchState : {\n      dispatchId:null as ReturnType<typeof setTimeout> | null,\n      dispatchQueue:new Map<string | symbol,\n        [DebounceA, ThunkDispatch<any, any, any>]>(),\n      ms\n    }\n  },[global, ms]);\n\n  const debouchDispatch = useCallback(<A extends DebounceA>(action:A) => {\n\n    const thunk:ThunkAction<void, any, any, any> = (dispatch) => {\n      \n      const {dispatchQueue} = debounceDispatchState;\n\n      if(debounceDispatchState.dispatchId === null) {\n        \n        debounceDispatchState.dispatchId = setTimeout(() => {\n  \n          debounceDispatchState.dispatchId = null;\n          \n          batch(()=>{\n            for(const [action, dispatch] of dispatchQueue.values()) {\n              dispatch(action);\n            }\n          });\n          \n          dispatchQueue.clear();\n  \n        }, debounceDispatchState.ms);\n      \n      }\n      \n      const key = typeof action === \"function\" ? Symbol() : \n        (action as any)?.type as string;\n\n      dispatchQueue.set(key, [action, dispatch]); \n\n    }\n\n    dispatch(thunk);\n\n  },[debounceDispatchState, dispatch]);\n\n  return debouchDispatch;\n\n}","import React, {useCallback} from \"react\";\nimport {useApolloClient} from \"@apollo/react-hooks\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport Box from \"@material-ui/core/Box\";\nimport { TableCell } from \"@material-ui/core\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { makeStyles, createStyles } from \"@material-ui/core/styles\";\nimport { Theme } from \"@material-ui/core/styles\";\nimport {red, green} from \"@material-ui/core/colors\";\n\n\nimport {randUUID} from \"../../../utils/uuid\";\nimport TransactionDate from \"./Cells/TransactionDate\";\nimport Department from \"./Cells/Department\";\n// import Type from \"./Cells/Type\";\nimport Category from \"./Cells/Category\";\nimport Source from \"./Cells/Source\";\nimport PaymentMethod from \"./Cells/PaymentMethod\";\nimport Description from \"./Cells/Description\";\nimport Total from \"./Cells/Total\";\nimport Reconciled from \"./Cells/Reconciled\";\nimport {JournalEntryType} from \"../../../apollo/graphTypes\";\nimport {create} from \"../../../redux/actions/journalEntryUpsert\";\nimport {useDebounceDispatch as useDispatch} from \"../../../redux/hooks\";\nimport {entryUpsertId} from \"./Journal\";\nimport {JournalMode} from \"./Body\";\n\n\n\nconst styles = makeStyles((theme:Theme)=>createStyles({\n  positive:{\n    color:green[900]\n  },\n  negative:{\n    color:red[900]\n  }\n}));\n\ntype JournalEntryFragment = any;\n\nexport interface EntryProps {\n  journalEntry?:JournalEntryFragment | null;\n  deptId?:string;\n  mode:JournalMode;\n  style:React.CSSProperties;\n  removeReconciled:(id:string)=>void;\n}\n\nexport const EntrySkeleton = function() {\n\n  const skeleton = <Skeleton variant=\"rect\" height={48} />;\n\n  return <TableRow key={randUUID()}>\n    <TableCell children={skeleton} />\n    <TableCell children={skeleton} />\n    <TableCell children={skeleton} />\n    <TableCell children={skeleton} />\n    <TableCell children={skeleton} />\n    <TableCell children={skeleton} />\n  </TableRow>;\n\n}\n\nconst Entry = function(props:EntryProps) {\n\n  const classes = styles();\n\n  const dispatch = useDispatch();\n\n  const client = useApolloClient();\n  \n  const {journalEntry = null, style, deptId, mode, removeReconciled} = props;\n\n  const onDoubleClick = useCallback((event) => {\n    if(journalEntry) {\n      dispatch(create(entryUpsertId, {\n        entryId:journalEntry.id, \n        fromDept:deptId,\n        client\n      }));\n    }\n  },[journalEntry, dispatch, deptId, client]);\n\n  if(journalEntry === null) {\n    \n    const skeleton = <Skeleton variant=\"rect\" height={20} />;\n    \n    return <Box style={style} display=\"flex !important\" clone>\n      <TableRow component=\"div\">\n        <Grid item container direction=\"column\" xs={1} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n        <Grid item container direction=\"column\" xs={3} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n        <Grid item container direction=\"column\" xs={2} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n        <Grid item container direction=\"column\" xs={3} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n        <Grid item container direction=\"column\" xs={2} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n        <Grid item container direction=\"column\" xs={1} >\n          <TableCell component=\"div\" children={skeleton} />\n        </Grid>\n      </TableRow>\n    </Box>; \n  \n  }\n\n  const textColor = \n    journalEntry.category.type === JournalEntryType.Credit ?\n      classes.positive : classes.negative;\n\n  return <Box style={style} display=\"flex !important\" clone>\n    <TableRow onDoubleClick={onDoubleClick} component=\"div\" hover>\n      <TransactionDate\n        textColor={textColor}\n        entryDate={journalEntry.date}\n      />\n      <Department textColor={textColor} department={journalEntry.department} />\n      <Category textColor={textColor} category={journalEntry.category}/>\n      <Source textColor={textColor} source={journalEntry.source}/>\n      <PaymentMethod \n        textColor={textColor}\n        paymentMethod={journalEntry.paymentMethod}\n      />\n      <Description\n        textColor={textColor}\n        description={journalEntry.description}\n      />\n      <Total textColor={textColor} total={journalEntry.total} />\n      <Reconciled\n        removeReconciled={removeReconciled}\n        entryId={journalEntry.id}\n        mode={mode}\n        textColor={textColor}\n        reconciled={journalEntry.reconciled}\n      />\n    </TableRow>\n  </Box>;\n\n}\n\nexport default Entry;","import React, {useCallback, useMemo, useEffect} from 'react';\nimport {useSelector, shallowEqual} from \"react-redux\";\nimport {useQuery, useApolloClient} from '@apollo/react-hooks';\nimport TableBody from '@material-ui/core/TableBody';\nimport Box from '@material-ui/core/Box';\nimport {VariableSizeList as List} from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\n\nimport Entry from './Entry';\nimport {JOURNAL_ENTRIES, JOURNAL_ENTRY_ADDED_SUB, JOURNAL_ENTRY_UPDATED_SUB,\n  JOURNAL_ENTRY_FRAGMENT\n} from './JournalEntries.gql';\nimport {ROW_ID} from \"./Cells/cellsReduxIni\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {TableCell as CellFormat} from \"../../../redux/reducers/tableRows\";\nimport {getIndexedCells} from \"../../../redux/selectors/tableRows\";\nimport {JournalEntries_1Query as JournalEntriesQuery,\n  JournalEntries_1QueryVariables as JournalEntriesQueryVars,\n  JournalEntriesColumn, SortDirection,\n  JournalEntryAdded_1Subscription as JournalEntryAdded,\n  JournalEntryUpdated_1Subscription as JournalEntryUpdated,\n  JournalEntiresReconciledFilter,\n  JournalEntry_1Fragment as JournalEntryFragment\n} from \"../../../apollo/graphTypes\";\n\ntype InfiniteLoaderProps = InfiniteLoader['props'];\n\nexport enum JournalMode {\n  View,\n  Reconcile\n}\n\nexport interface BodyProps {\n  deptId?:string;\n  mode:JournalMode;\n  height:number;\n  width:number;\n}\n\nconst subscribedToAdd = new Set<string>();\n\nlet subscribedToUpdate = false;\n\nconst defaultVars:JournalEntriesQueryVars = {\n    paginate:{\n      skip:0,\n      limit:50 // Load entries in 50 block increments\n    },\n    sortBy:[\n      {column:JournalEntriesColumn.Date, direction:SortDirection.Desc}\n    ]\n }\n\nconst Body = function(props:BodyProps) {\n\n  const {height, deptId, mode} = props;\n\n  const subKey = `${deptId}_${mode}`;\n\n  const variables = useMemo<JournalEntriesQueryVars>(()=>{\n\n    const reconciled = mode === JournalMode.Reconcile ?\n      JournalEntiresReconciledFilter.NotReconciled : undefined;\n\n    return deptId ? {\n      ...defaultVars,\n      filterBy:{\n        department:{\n          eq:deptId\n        },\n        reconciled\n      },\n    } : {...defaultVars};\n\n  },[deptId, mode]);\n\n  const cellFormats = useSelector<Root, CellFormat[]>((state) => \n    getIndexedCells(state, ROW_ID), shallowEqual);\n\n  const minWidth = useMemo(() => cellFormats.reduce((minWidth, cellFormat) => {\n    return minWidth + cellFormat.width;\n  },0),[cellFormats]);\n\n  const width = Math.max(minWidth, props.width);\n\n  const {error, data, fetchMore, updateQuery} = useQuery<\n    JournalEntriesQuery, JournalEntriesQueryVars>(JOURNAL_ENTRIES,\n  {\n    variables\n  });\n\n  const removeReconciled = useCallback((id:string) => {\n\n    if(mode === JournalMode.View) {\n      return;\n    }\n\n    updateQuery((prev)=>{\n\n      const entries = prev.journalEntries.entries;\n\n      for(let i = 0, len = entries.length; i < len; i++) {\n\n        if(entries[i].id === id) {\n\n          return {\n            ...prev,\n            journalEntries: {\n              ...prev.journalEntries,\n              totalCount:prev.journalEntries.totalCount - 1,\n              entries:[\n                ...entries.slice(0, i),\n                ...entries.slice(i + 1)\n              ]\n            }\n          }\n\n        }\n\n      }\n\n      return prev;\n\n    });\n\n  },[mode, updateQuery]);\n\n  const client = useApolloClient();\n\n  // Lazy add persistent subscription.\n  if(!subscribedToAdd.has(subKey)) {\n\n    subscribedToAdd.add(subKey);\n\n    client.subscribe<JournalEntryAdded>({\n      query:JOURNAL_ENTRY_ADDED_SUB\n    }).subscribe({next:({data})=>{\n      \n      if(!data?.journalEntryAdded || (mode === JournalMode.Reconcile \n        && data.journalEntryAdded.reconciled) \n        || (deptId && data.journalEntryAdded.department.id !== deptId))\n      {\n        return;\n      }\n\n      const prev = client.readQuery<JournalEntriesQuery,\n        JournalEntriesQueryVars>({\n          query:JOURNAL_ENTRIES,\n          variables\n        });\n      \n      const update = {\n        ...(prev || {}),\n        journalEntries:{\n          ...(prev?.journalEntries || {}),\n          totalCount:(prev?.journalEntries.totalCount || 0) + 1,\n          entries:[\n            data.journalEntryAdded,\n            ...(prev?.journalEntries.entries || [])\n          ]\n        }\n      };\n\n      client.writeQuery({\n        query:JOURNAL_ENTRIES,\n        variables,\n        data:update\n      });\n\n    }});\n\n  }\n\n  if(!subscribedToUpdate) {\n    \n    subscribedToUpdate = true;\n    client.subscribe<JournalEntryUpdated>({\n      query:JOURNAL_ENTRY_UPDATED_SUB\n    }).subscribe({next:({data})=>{\n\n      console.log(data);\n\n      if(!data) {\n        return;\n      }\n      \n      client.writeFragment<JournalEntryFragment>({\n        id:`JournalEntry:${data.journalEntryUpdated.id}`,\n        fragment:JOURNAL_ENTRY_FRAGMENT,\n        data:data.journalEntryUpdated\n      });\n\n    }});\n  \n  }\n\n  const entries = data?.journalEntries?.entries || [];\n  const totalCount = data?.journalEntries?.totalCount ?? 500;\n  \n  const isLoaded = useCallback<InfiniteLoaderProps['isItemLoaded']>((index)=>{\n    return index in entries;\n  },[entries]);\n\n  const loadMoreItems = \n    useCallback<InfiniteLoaderProps['loadMoreItems']>(async (start, end) =>\n  {\n\n    await fetchMore({\n      variables:{\n        paginate:{\n          skip:start,\n          limit:end - start + 1 //End is inclusive\n        }\n      },\n      updateQuery:(prev, {fetchMoreResult = null}) => {\n        \n        // new entries\n        const newResults = fetchMoreResult?.journalEntries?.entries || [];\n        \n        const entries = [...(prev?.journalEntries?.entries || [])];\n        entries.splice(start, newResults.length, ...newResults);\n        \n\n        return {\n          ...(prev || {}),\n          ...(fetchMoreResult || {}),\n          journalEntries:{\n            ...(prev?.journalEntries || {}),\n            ...(fetchMoreResult?.journalEntries || {}),\n            entries\n          }\n        } as JournalEntriesQuery;\n      \n      }\n    });\n\n  },[fetchMore]);\n  \n  const entryRow = \n    useCallback(({index, style}:{index:number, style:React.CSSProperties}) => \n  {\n    const entry = entries[index];\n    const key = entry ? entry.id: index;\n    return <Entry\n      mode={mode}\n      style={style}\n      key={key}\n      journalEntry={entry}\n      removeReconciled={removeReconciled}\n    />\n  \n  },[entries, mode, removeReconciled]);\n\n  const infiniteLoaderChildren = useCallback<InfiniteLoaderProps[\"children\"]>( \n    ({onItemsRendered, ref}) => <Box display=\"flex\" clone><List\n      onItemsRendered={onItemsRendered}\n      ref={ref}\n      height={height}\n      width={width}\n      itemCount={totalCount}\n      itemSize={()=>53}\n      overscanCount={10}\n    >{entryRow}</List></Box>,[height, width, entryRow, totalCount]);\n\n  if(error) {\n    return <div>{error.message}</div>;\n  }\n\n  return <Box height={height} display=\"block\" clone>\n    <TableBody component='div'>\n      <InfiniteLoader\n        isItemLoaded={isLoaded}\n        itemCount={totalCount}\n        minimumBatchSize={50}\n        loadMoreItems={loadMoreItems}\n        children={infiniteLoaderChildren}\n      />\n    </TableBody>\n  </Box>;\n\n}\n\nexport default Body;","import React, { useMemo, useCallback } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from \"react-redux\";\nimport {KeyboardDatePicker, KeyboardDatePickerProps, MuiPickersUtilsProvider\n} from '@material-ui/pickers';\nimport moment, { Moment } from 'moment';\nimport MomentUtils from '@date-io/moment';\n\nimport {Root} from \"../../redux/reducers/root\";\nimport {setDateValue, clearDateValue, validateDate\n} from \"../../redux/actions/journalEntryUpsert\";\nimport {getDate, isRequired, getDateError, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst inputProps = {\n  inputMode:\"numeric\",\n} as const;\n\ninterface SelectorResult {\n  disabled:boolean;\n  date:Date | null;\n  required:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface DateInputProps {\n  entryUpsertId: string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst DateInput = function(props:DateInputProps) {\n\n  const {entryUpsertId, autoFocus = false, \n    variant:inputVariant = 'filled'} = props;\n  \n  const dispatch = useDispatch();\n  \n  const {disabled, date, required, hasError, errorMsg\n  } = useSelector<Root,SelectorResult>((state) => {\n    \n    const error = getDateError(state, entryUpsertId);\n    \n    return {\n      disabled:getType(state, entryUpsertId) === null,\n      date:getDate(state, entryUpsertId),\n      required:isRequired(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    }\n\n  }, shallowEqual);\n  \n  const value = useMemo(()=> date ? moment(date) : null ,[date]);\n\n  const validate = useCallback(() => {\n    dispatch(validateDate(entryUpsertId));\n  }, [entryUpsertId, dispatch]);\n\n  const onChange = useCallback((date:Moment | null) => {\n      if(date?.isValid()) {\n        dispatch(setDateValue(entryUpsertId, date.toDate()));\n        if(hasError) {\n          validate();\n        }\n      } else {\n        dispatch(clearDateValue(entryUpsertId));\n      }\n  }, [entryUpsertId, dispatch, hasError, validate]);\n\n  const dataPickerProps:KeyboardDatePickerProps = {\n    disabled,\n    error:hasError,\n    helperText:errorMsg,\n    required,\n    onBlur:validate as any,\n    onClose:validate as any,\n    animateYearScrolling:true,\n    disableToolbar:true,\n    disableFuture:true,\n    inputVariant,\n    variant:\"inline\",\n    format:\"MM/DD/YYYY\",\n    margin:\"none\",\n    label:\"Date\",\n    initialFocusedDate:value || moment(),\n    value,\n    onChange,\n    autoOk:true,\n    InputProps:useMemo(()=>({\n      autoFocus\n    }),[autoFocus]),\n    inputProps,\n    placeholder:'mm/dd/yyyy',\n  };\n\n  return <MuiPickersUtilsProvider utils={MomentUtils}>\n    <KeyboardDatePicker {...dataPickerProps} />\n  </MuiPickersUtilsProvider>;\n\n}\n\nexport default DateInput;","import React, { useCallback, useMemo } from 'react';\nimport TextField, {TextFieldProps} from '@material-ui/core/TextField';\nimport InputAdornment  from '@material-ui/core/InputAdornment';\n\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setTotalInput, clearTotalInput, setTotalValue, clearTotalValue,\n  validateTotal\n} from \"../../redux/actions/journalEntryUpsert\";\nimport { getTotalInput, isRequired, getTotalError, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\nimport { useSelector, shallowEqual } from 'react-redux';\n\nconst inputProps = {\n  min:\"0\",\n  // inputMode:\"decimal\",\n} as const;\n\ninterface SelectorResult {\n  disabled:boolean;\n  totalInput:string;\n  required:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface TotalInputProps {\n  entryUpsertId:string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst TotalInput = function(props:TotalInputProps) {\n  \n  const {entryUpsertId, autoFocus = false, variant = 'filled'} = props;\n  \n  const dispatch = useDebounceDispatch();\n\n  const {disabled, totalInput, required, hasError, errorMsg\n  } = useSelector<Root, SelectorResult>((state)=>{\n    \n    const error = getTotalError(state, entryUpsertId);\n\n    return {\n      disabled:getType(state, entryUpsertId) === null,\n      totalInput:getTotalInput(state, entryUpsertId),\n      required:isRequired(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    };\n  }, shallowEqual);\n  \n  const validate  = useCallback(() => {\n    dispatch(validateTotal(entryUpsertId))\n  },[dispatch, entryUpsertId]);\n  \n  const onChange = useCallback((event)=> {\n    const value = (event.target.value || \"\");\n    if(value) { \n      dispatch(setTotalInput(entryUpsertId, value));\n      dispatch(setTotalValue(entryUpsertId, value * 1));\n      if(hasError) {\n        validate();\n      }\n    } else {\n      dispatch(clearTotalInput(entryUpsertId));\n      dispatch(clearTotalValue(entryUpsertId));\n    }\n\n  }, [dispatch, validate, hasError, entryUpsertId]);\n\n  const textFieldProps:TextFieldProps = {\n    disabled,\n    value: totalInput,\n    variant,\n    required,\n    helperText:errorMsg,\n    // error:,\n    label:\"Total\",\n    name:\"total\",\n    placeholder:\"0.00\",\n    onChange,\n    inputProps,\n    error:hasError,\n    InputProps:useMemo(() => ({\n      type:\"number\",\n      autoFocus,\n      onBlur:validate as any,\n      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n    }),[autoFocus, validate]),\n  }\n\n  return <TextField {...textFieldProps} />;\n\n}\n\nexport default TotalInput;","import React, {useMemo, useCallback} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useQuery, useApolloClient} from '@apollo/react-hooks';\nimport TextField, {TextFieldProps} from '@material-ui/core/TextField';\nimport Chip from '@material-ui/core/Chip';\nimport Box from '@material-ui/core/Box';\nimport Autocomplete, {AutocompleteProps, RenderInputParams\n} from '@material-ui/lab/Autocomplete';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport gql from 'graphql-tag';\nimport isEqual from \"lodash.isequal\";\n\nimport {DeptInputOpts_1Query as DeptInputOptsQuery, \n  DeptInputOpts_1QueryVariables as DeptInputOptsQueryVariables,\n  DeptInputOptsDept_1Fragment as DeptInputOptsDeptFragment\n} from '../../apollo/graphTypes';\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setDeptInput, clearDeptInput, clearDeptValue, setDeptOpen, setDeptValue,\n  validateDept\n} from \"../../redux/actions/journalEntryUpsert\";\nimport {getDeptInput, getDept, isRequired, isDeptOpen,\n  getDeptError, getType, getFromDept\n} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst DEPT_INPUT_OPTS_QUERY = gql`\n  query DeptInputOpts_1($fromParent:ID) {\n    deptOpts: departments(fromParent:$fromParent) {\n      ...DeptInputOptsDept_1Fragment\n    }\n  }\n  fragment DeptInputOptsDept_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n`;\n\nconst rootParentId = \"5dc4b09bcf96e166daaa0090\";\n\n// Static cbs for AutocompleteProps\nconst filterOptions = (opts) => opts;\nconst getOptionLabel = (opt) => opt.name;\nconst renderTags:AutocompleteProps[\"renderTags\"] = (\n  values: DeptInputOptsDeptFragment[], getTagProps) => \n{\n  const lastIndex = values.length - 1;\n  return values.map((dept:any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    return <Box \n      display=\"flex\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"flex-start\"\n    >\n      <Chip\n        color={isLastIndex ? \"primary\" : \"default\"}\n        disabled={!isLastIndex}\n        variant={isLastIndex ? \"default\" : \"outlined\"}\n        label={dept.name}\n        size=\"small\"\n        {...getTagProps({index})}\n      /> {!isLastIndex && <ChevronRight fontSize=\"small\"/>}\n    </Box>;\n  });\n}\n\nconst getDeptValue = (deptId:string | null, \n    deptOpts:DeptInputOptsQuery['deptOpts']) =>\n{\n  if(deptId) {\n    for(const dept of deptOpts) {\n      if(dept.id === deptId) {\n        return dept;\n      }\n    }\n  }\n  return null;\n}\n\ninterface SelectorResult {\n  disabled:boolean;\n  deptInput:string;\n  dept:string | null;\n  required:boolean;\n  open:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface DepartmentInputProps {\n  entryUpsertId: string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst DepartmentInput = function(props:DepartmentInputProps) \n{\n  \n  const {entryUpsertId, autoFocus = false, variant = 'filled'} = props;\n  \n  const client = useApolloClient();\n\n  const dispatch = useDebounceDispatch();\n\n  const validate  = useCallback(() => {\n    dispatch(validateDept(entryUpsertId, client));\n  },[dispatch, entryUpsertId, client]);\n\n  const onBlur = useCallback(() => {\n    dispatch(setDeptOpen(entryUpsertId, false));\n    validate();\n  },[\n    entryUpsertId, \n    dispatch,\n    validate\n  ]);\n  const onFocus = useCallback(() => dispatch(setDeptOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n  const onClose = useCallback(() => {\n    dispatch(setDeptOpen(entryUpsertId, false));\n    validate();\n  },[\n    entryUpsertId, \n    dispatch,\n    validate\n  ]);\n  const onOpen = useCallback(() => dispatch(setDeptOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n\n  const {\n    disabled, deptInput, dept, required, open, hasError, errorMsg,\n  } = useSelector<Root, SelectorResult>((state)=>{\n\n    const dept = getDept(state, entryUpsertId);\n\n    const error = getDeptError(state, entryUpsertId);\n\n    return {\n      disabled:getType(state, entryUpsertId) === null,\n      deptInput:getDeptInput(state, entryUpsertId),\n      dept,\n      required:isRequired(state, entryUpsertId),\n      open:isDeptOpen(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    };\n\n  },isEqual);\n\n  const fromDept = \n    useSelector((state:Root) => getFromDept(state, entryUpsertId));\n\n  \n  const {loading, error, data} = \n    useQuery<DeptInputOptsQuery, DeptInputOptsQueryVariables>(\n      DEPT_INPUT_OPTS_QUERY,{\n      variables:{\n        fromParent:rootParentId\n      }\n    });\n  \n  const deptOpts = data?.deptOpts || [];\n\n  const deptVal = useMemo(()=>getDeptValue(dept, deptOpts),[dept, deptOpts]);\n\n  const options = useMemo(()=>{\n    \n    if(!deptInput) {\n      return dept ? deptOpts.filter((opt)=> opt.parent.id === dept) : deptOpts;\n    }\n\n    const test = new RegExp(`(^|\\\\s)${deptInput}`,'i');\n\n    if(dept) {\n      return deptOpts.filter((opt) => \n        opt.parent.id === dept && test.test(opt.name));\n    }\n\n    return deptOpts.filter((opt) => test.test(opt.name));\n\n  },[dept, deptInput, deptOpts]);\n\n  const hasOptions = options.length > 0;\n\n  const value = useMemo(()=>{\n\n    if(!deptVal) {\n      return null;\n    }\n\n    const value:typeof deptOpts = [deptVal];\n\n\n    const getParentDept = (dept:DeptInputOptsDeptFragment) => {\n      for(const deptOpt of deptOpts) {\n        if(dept.parent.id === deptOpt.id) {\n          return deptOpt;\n        }\n      }\n      return null;\n    }\n\n    let parent = getParentDept(deptVal);\n    while(parent) {\n      value.unshift(parent);\n      parent = getParentDept(parent);\n    }\n\n    if(value.length === 1) {\n      return hasOptions ? value : value[0];\n    }\n\n    return value;\n\n  },[deptOpts, deptVal, hasOptions]);\n\n  const multiple = Array.isArray(value);\n  \n  type Value = typeof value;\n\n  const onChange = useCallback((event, value:Value) => {\n\n    if(value) {\n\n      value = Array.isArray(value) ? value[value.length -1] : value;\n\n      if(value) {\n\n        dispatch(setDeptValue(entryUpsertId, value.id));\n        dispatch(clearDeptInput(entryUpsertId));\n  \n        if(hasError) {\n          validate();\n        }\n        \n        return;\n\n      }\n\n      \n    }\n    \n    dispatch(clearDeptValue(entryUpsertId));\n\n  },[entryUpsertId, dispatch, hasError, validate]);\n\n  const onInputChange = useCallback((event:any, value:string) => {\n    if(value) {\n      dispatch(setDeptInput(entryUpsertId, value));\n    } else {\n      dispatch(clearDeptInput(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId]);\n\n  const textFieldProps:TextFieldProps = {\n    required,\n    autoFocus,\n    fullWidth:true,\n    label:\"Department\",\n    variant,\n    error:hasError,\n    helperText:errorMsg\n  };\n  \n  const renderInput = useCallback((params:RenderInputParams) => {\n    return <TextField {...textFieldProps} {...params}/>\n  },[textFieldProps]);\n\n  const autocompleteProps:AutocompleteProps = {\n    disabled,\n    loading,\n    multiple,\n    autoComplete:true,\n    disableCloseOnSelect:true,\n    getOptionLabel,\n    filterOptions,\n    open,\n    renderInput,\n    options,\n    onChange,\n    onInputChange,\n    value,\n    inputValue:deptInput\n  };\n  \n  if(error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  // No selected values\n  if(!deptVal) {\n    \n    autocompleteProps.autoHighlight = true;\n    autocompleteProps.autoSelect = true;\n    autocompleteProps.onBlur = onBlur;\n    autocompleteProps.onFocus = onFocus;\n    autocompleteProps.onClose = onClose;\n    autocompleteProps.onOpen = onOpen;\n  \n  // Only ROOT department is selected\n  } else if(!Array.isArray(value) || value.length === 1) {\n\n    // Has sub-depts\n    if(hasOptions) {\n      \n      autocompleteProps.autoHighlight = true;\n      autocompleteProps.onBlur = onBlur;\n      autocompleteProps.onFocus = onFocus;\n      autocompleteProps.onClose = onClose;\n      autocompleteProps.onOpen = onOpen;\n      autocompleteProps.options = options;\n      autocompleteProps.renderTags = renderTags;\n\n    // Has NO sub-depts\n    } else {\n\n      autocompleteProps.onBlur = validate as any;\n      autocompleteProps.inputValue = deptVal.name;\n      autocompleteProps.open = false;\n\n    }\n\n  } else {\n\n    // Has NO sub-depts\n    if(hasOptions) {\n      \n      autocompleteProps.autoHighlight = true;\n      autocompleteProps.onBlur = onBlur;\n      autocompleteProps.onFocus = onFocus;\n      autocompleteProps.onClose = onClose;\n      autocompleteProps.onOpen = onOpen;\n      autocompleteProps.options = options\n      autocompleteProps.renderTags = renderTags;\n    \n    // Has sub-depts\n    } else {\n      \n      autocompleteProps.onBlur = validate as any;\n      autocompleteProps.disabled = true;\n      autocompleteProps.inputValue = \"\";\n      autocompleteProps.open = false;\n      autocompleteProps.renderTags = renderTags;\n\n    }\n\n  }\n\n  return <Autocomplete {...autocompleteProps} />;\n\n}\n\nexport default DepartmentInput;","import React, {useMemo, useCallback} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useQuery} from '@apollo/react-hooks';\nimport TextField, {TextFieldProps} from '@material-ui/core/TextField';\nimport Chip from '@material-ui/core/Chip';\nimport Box from '@material-ui/core/Box';\nimport Autocomplete, {AutocompleteProps, RenderInputParams\n} from '@material-ui/lab/Autocomplete';\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport gql from 'graphql-tag';\nimport isEqual from \"lodash.isequal\";\n\nimport {CatInputOpts_1Query as CatInputOptsQuery, \n  CatInputOptsCat_1Fragment as CatInputOptsCatFragment, JournalEntryType\n} from '../../apollo/graphTypes';\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setCatInput, clearCatInput, clearCatValue, setCatOpen, setCatValue,\n  validateCat\n} from \"../../redux/actions/journalEntryUpsert\";\nimport {getCatInput, isRequired, isCatOpen,\n  getCatError, getType, getCatValue\n} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst CAT_INPUT_OPTS_QUERY = gql`\n  query CatInputOpts_1 {\n    catOpts: journalEntryCategories {\n      ...CatInputOptsCat_1Fragment\n    }\n  }\n  fragment CatInputOptsCat_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      id\n    }\n  }\n`;\n\ntype Values = (JournalEntryType | CatInputOptsCatFragment)[];\n\n// Static cbs for AutocompleteProps\nconst getOptionLabel = (\n  opt:JournalEntryType | CatInputOptsCatFragment) => \n{\n  if(typeof opt === \"string\") {\n    return opt === JournalEntryType.Credit ? \"Credit\" : \"Debit\";\n  }\n  return opt.name;\n}\nconst renderTags:AutocompleteProps[\"renderTags\"] = (\n  values:(CatInputOptsCatFragment | JournalEntryType)[], getTagProps) => \n{\n  const lastIndex = values.length - 1;\n  return values.map((cat:any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    return <Box \n      display=\"flex\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"flex-start\"\n    >\n      <Chip\n        color={isLastIndex ? \"primary\" : \"default\"}\n        disabled={!isLastIndex}\n        variant={isLastIndex ? \"default\" : \"outlined\"}\n        label={getOptionLabel(cat)}\n        size=\"small\"\n        {...getTagProps({index})}\n      /> {!isLastIndex && <ChevronRight fontSize=\"small\"/>}\n    </Box>;\n  });\n}\n\ninterface SelectorResult {\n  disabled:boolean;\n  type:JournalEntryType | null;\n  catId:string | null;\n  catInput:string;\n  required:boolean;\n  open:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface CategoryInputProps {\n  entryUpsertId: string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst CategoryInput = function(props:CategoryInputProps) \n{\n  \n  const {entryUpsertId, autoFocus = false, variant = 'filled'} = props;\n  \n  const dispatch = useDebounceDispatch();\n\n  const validate  = useCallback(() => {\n    dispatch(validateCat(entryUpsertId))\n  },[dispatch, entryUpsertId]);\n\n  const onBlur = useCallback(() => {\n    dispatch(setCatOpen(entryUpsertId, false));\n    validate();\n  },[\n    entryUpsertId, \n    dispatch,\n    validate\n  ]);\n  const onFocus = useCallback(() => dispatch(setCatOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n  const onClose = useCallback(() => {\n    dispatch(setCatOpen(entryUpsertId, false));\n    validate();\n  },[\n    entryUpsertId, \n    dispatch,\n    validate\n  ]);\n  const onOpen = useCallback(() => dispatch(setCatOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n\n  const {\n    disabled, type, catId, catInput, required, open, hasError, errorMsg\n  } = useSelector<Root, SelectorResult>((state) => {\n\n    const error = getCatError(state, entryUpsertId);\n\n    return {\n      disabled:getType(state, entryUpsertId) === null,\n      type:getType(state, entryUpsertId),\n      catId:getCatValue(state, entryUpsertId),\n      catInput:getCatInput(state, entryUpsertId),\n      required:isRequired(state, entryUpsertId),\n      open:isCatOpen(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    };\n\n  }, isEqual);\n\n  const {loading, error, data} = useQuery<CatInputOptsQuery>(\n      CAT_INPUT_OPTS_QUERY);\n  \n  const catOpts = data?.catOpts || [];\n\n  const values = useMemo<Values | []>(()=> {\n\n    if(type === null) {\n      return [];\n    }\n    \n    const values:CatInputOptsCatFragment[] = [];\n\n    if(catId) {\n\n      const searchCache = new Map<string, CatInputOptsCatFragment>();\n\n      let findId:string | null = catId;\n      \n      for(const catOpt of catOpts) {\n  \n        if(catOpt.id === findId) {\n          \n          values.unshift(catOpt);\n          \n          findId = catOpt.parent?.id || null;\n          \n          while(findId && searchCache.has(findId)) {\n\n            const catchedOpt = \n              searchCache.get(findId) as CatInputOptsCatFragment;\n\n            values.unshift(catchedOpt);\n\n            findId = catchedOpt.parent?.id || null;\n\n          }\n\n          if(!findId) {\n            break;\n          }\n\n          continue;\n\n        }\n\n        searchCache.set(catOpt.id, catOpt);\n\n      }\n\n    }\n\n    return values;\n\n  },[type, catOpts, catId]);\n\n  const options = useMemo<Values>(()=>\n  {\n    if(type === null) {\n      return [];\n    } else if(catId === null) {\n      return catOpts.filter( opt => !opt.parent && opt.type === type);\n    } else {\n      return catOpts.filter( opt => opt.parent?.id === catId &&\n        opt.type === type);\n    }\n\n  }, [catOpts, catId, type]);\n\n  const filterOptions = useCallback((\n    opts:(JournalEntryType | CatInputOptsCatFragment)[]) =>\n  {\n\n    const searchStr = catInput.trimStart()\n      .split(\" \").join(\"\\\\s\");\n\n    if(!searchStr) {\n      return opts;\n    }\n\n    const test = new RegExp(`(^|\\\\s)${searchStr}`,'i');\n\n    return opts.filter((opt) => {\n\n      if(typeof opt === \"string\") {\n        return test.test(opt);\n      }\n      \n      return test.test(opt.name);\n\n    })\n\n  }, [catInput]);\n  \n  const hasOptions = options.length > 0;\n\n  const onChange = useCallback((event, value) => {\n\n    dispatch(clearCatInput(entryUpsertId));\n    \n    if(!value || value?.length === 0) {\n\n      dispatch(clearCatValue(entryUpsertId));\n\n      return;\n\n    }\n\n    const val = Array.isArray(value) ? value[value.length -1] : value;\n\n    dispatch(setCatValue(entryUpsertId, val.id));\n    validate();\n\n  },[dispatch, entryUpsertId, validate]);\n\n  const onInputChange = useCallback((event:any, value:string) => {\n    if(value) {\n      dispatch(setCatInput(entryUpsertId, value));\n    } else {\n      dispatch(clearCatInput(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId]);\n\n  const textFieldProps:TextFieldProps = {\n    required,\n    autoFocus,\n    fullWidth:true,\n    label:\"Category\",\n    variant,\n    error:hasError,\n    helperText:errorMsg\n  };\n  \n  const renderInput = useCallback((params:RenderInputParams) => {\n    return <TextField {...textFieldProps} {...params}/>\n  },[textFieldProps]);\n\n  const autocompleteProps:AutocompleteProps = {\n    disabled,\n    loading,\n    multiple:true,\n    autoComplete:true,\n    autoSelect:true,\n    autoHighlight:true,\n    disableCloseOnSelect:true,\n    getOptionLabel,\n    filterOptions,\n    open,\n    renderInput,\n    options,\n    onChange,\n    onInputChange,\n    value:values,\n    inputValue:catInput,\n    renderTags\n  };\n  \n  if(error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  if(hasOptions) {\n\n    autocompleteProps.onBlur = onBlur;\n    autocompleteProps.onFocus = onFocus;\n    autocompleteProps.onClose = onClose;\n    autocompleteProps.onOpen = onOpen;\n\n  } else {\n\n    autocompleteProps.onBlur = validate as any;\n    autocompleteProps.disabled = true;\n    autocompleteProps.inputValue = \"\";\n    autocompleteProps.open = false;\n\n  }\n\n  return <Autocomplete {...autocompleteProps} />;\n\n}\n\nexport default CategoryInput;","import React, { useCallback } from \"react\";\nimport {useSelector, useDispatch, shallowEqual} from \"react-redux\";\nimport Box from \"@material-ui/core/Box\";\nimport ToggleButton, {ToggleButtonProps} from \"@material-ui/lab/ToggleButton\";\nimport ToggleButtonGroup, {ToggleButtonGroupProps\n} from \"@material-ui/lab/ToggleButtonGroup\";\nimport {Person as PersonIcon, Business as BusinessIcon\n} from \"@material-ui/icons\";\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core\";\n\nimport {JournalEntrySourceType} from '../../../apollo/graphTypes';\nimport {Root} from \"../../../redux/reducers/root\";\nimport {setSrcType} from \"../../../redux/actions/journalEntryUpsert\";\nimport {getSrcType, getSrcInput, getSrc, getSrcError, getType\n} from \"../../../redux/selectors/journalEntryUpsert\";\n\nconst styles = makeStyles((theme:Theme) => createStyles({\n  sourceToggle:{\n    marginRight:theme.spacing(1)\n  },\n  sourceInput:{\n    flexGrow:1\n  },\n  sourceIcon:{\n    marginRight:theme.spacing(1),\n    marginLeft:theme.spacing(1),\n  }\n}));\n\nconst bizToggleButtonProps:ToggleButtonProps = {\n  value:JournalEntrySourceType.Business\n};\n\nconst personToggleButtonProps:ToggleButtonProps = {\n  value:JournalEntrySourceType.Person\n};\n\nexport interface SourceTypeToggleProps {\n  entryUpsertId: string;\n}\n\ninterface SelectorResult {\n  disabled:boolean;\n  value:JournalEntrySourceType | null;\n  srcInput:string;\n  isSrcSet:boolean;\n  hasError:boolean;\n} \n\nconst SourceTypeToggle = function(props:SourceTypeToggleProps) {\n  \n  const {entryUpsertId} = props;\n\n  const classes = styles();\n\n  const {disabled, value, srcInput, isSrcSet, hasError} = \n    useSelector<Root, SelectorResult>((state) => \n      ({\n        disabled:getType(state, entryUpsertId) === null,\n        value:getSrcType(state, entryUpsertId),\n        srcInput:getSrcInput(state, entryUpsertId),\n        isSrcSet:!!getSrc(state, entryUpsertId),\n        hasError:!!getSrcError(state, entryUpsertId)\n      }), shallowEqual);\n\n  const dispatch = useDispatch();\n\n  const color = hasError ? \"error\" : undefined;\n\n  const onChange = useCallback((event, newSrcType:JournalEntrySourceType) => {\n    dispatch(setSrcType(entryUpsertId, newSrcType));\n  },[dispatch, entryUpsertId]);\n\n  if(isSrcSet || srcInput) {\n    if(value === JournalEntrySourceType.Person) {\n      return <PersonIcon className={classes.sourceIcon} color={color} />;\n    } else {\n      return <BusinessIcon className={classes.sourceIcon} color={color} />;\n    }\n  }\n\n  const toggleButtonGroupProps:ToggleButtonGroupProps = {\n    className:classes.sourceToggle,\n    size:\"small\",\n    exclusive:true,\n    onChange,\n    value\n  };\n\n  return <Box py={1} clone>\n    <ToggleButtonGroup {...toggleButtonGroupProps}>\n      <ToggleButton disabled={disabled} {...bizToggleButtonProps}>\n        <BusinessIcon color={color} />\n      </ToggleButton>\n      <ToggleButton disabled={disabled} {...personToggleButtonProps}>\n        <PersonIcon color={color} />\n      </ToggleButton>\n    </ToggleButtonGroup>\n  </Box>;\n\n}\n\nexport default SourceTypeToggle;","import React, {useRef, useMemo, useCallback} from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useQuery, useApolloClient} from \"@apollo/react-hooks\";\nimport TextField, {TextFieldProps} from \"@material-ui/core/TextField\";\nimport Chip from \"@material-ui/core/Chip\";\nimport Box from '@material-ui/core/Box';\nimport Autocomplete, {AutocompleteProps, RenderInputParams\n} from \"@material-ui/lab/Autocomplete\";\nimport ChevronRight from '@material-ui/icons/ChevronRight';\nimport gql from \"graphql-tag\";\nimport isEqual from \"lodash.isequal\";\n\nimport {BusinessSrcOptsInput_1Query as BusinessSrcOptsInputQuery,\n  BusinessSrcOptsInput_1QueryVariables as BusinessSrcOptsInputQueryVariables,\n  BusinessSrcBizOpts_1Fragment as BusinessSrcBizOptsFragment,\n  BusinessSrcDeptOpts_1Fragment as BusinessSrcDeptOptsFragment,\n  JournalEntrySourceType, JournalEntrySourceInput,\n  JournalEntryType\n} from \"../../../apollo/graphTypes\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../../redux/hooks\";\nimport {setSrcInput, clearSrcInput, clearSrcValue, setSrcOpen, setSrcValue,\n  validateSrc\n} from \"../../../redux/actions/journalEntryUpsert\";\nimport {getSrcInput, getSrc, isRequired, isSrcOpen, getSrcError,\n  getType, getUpsertType, UpsertType\n} from \"../../../redux/selectors/journalEntryUpsert\";\n\nconst BIZ_SRC_DEPT_OPTS_FRAGMENT = gql`\n  fragment BusinessSrcDeptOpts_1Fragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ...on Business {\n        id\n      }\n      ...on Department {\n        id\n      }\n    }\n  }\n`;\n\nconst BIZ_SRC_BIZ_OPTS_FRAGMENT = gql`\n  fragment BusinessSrcBizOpts_1Fragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    deptOpts: departments {\n      ...BusinessSrcDeptOpts_1Fragment\n    }\n  }\n  ${BIZ_SRC_DEPT_OPTS_FRAGMENT}\n`;\n\nconst BUSINESS_SRC_OPTS_INPUT_QUERY = gql`\n  query BusinessSrcOptsInput_1($searchByName:String!, $deptId:ID!, $bizId:ID!,\n    $withBizOpt:Boolean!, $withDeptAncestors:Boolean!, $withBizOpts:Boolean!)\n  {\n    bizOpt: business(id: $bizId) @include(if:$withBizOpt) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n    deptAncestors: department(id: $deptId) @include(if:$withDeptAncestors) {\n      __typename\n      id\n      ancestors {\n        ...BusinessSrcBizOpts_1Fragment\n        ...BusinessSrcDeptOpts_1Fragment\n      }\n    }\n    bizOpts: businesses(searchByName:$searchByName) @include(if:$withBizOpts) {\n      ...BusinessSrcBizOpts_1Fragment\n    }\n  }\n  ${BIZ_SRC_BIZ_OPTS_FRAGMENT}\n`;\n\n// Static cbs for AutocompleteProps\nconst getOptionLabel = (opt) => opt.name;\nconst renderTags:AutocompleteProps[\"renderTags\"] = (\n  srcOpts:(BusinessSrcBizOptsFragment | BusinessSrcDeptOptsFragment)[],\n  getTagProps) => \n{\n  const lastIndex = srcOpts.length - 1;\n  return srcOpts.map((srcOpt, index: number) => {\n    const isLastIndex = lastIndex === index;\n    return <Box \n      display=\"flex\"\n      flexDirection=\"row\"\n      alignItems=\"center\"\n      justifyContent=\"flex-start\"\n    >\n      <Chip\n        color={isLastIndex ? \"primary\" : \"default\"}\n        disabled={!isLastIndex}\n        variant={isLastIndex ? \"default\" : \"outlined\"}\n        label={srcOpt.name}\n        size=\"small\"\n        {...getTagProps({index})}\n      /> {!isLastIndex && <ChevronRight fontSize=\"small\"/>}\n    </Box>;\n  });\n}\n\ninterface SelectorResult  {\n  upsertType:UpsertType | null;\n  disabled:boolean;\n  srcInput:string;\n  type:JournalEntryType | null;\n  src:JournalEntrySourceInput | null;\n  isSrcSet:boolean;\n  required:boolean;\n  open:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface BusinessSrcProps {\n  entryUpsertId: string;\n  autoFocus:boolean;\n  variant:\"filled\" | \"outlined\";\n}\n\nconst BusinessSrc = function(props:BusinessSrcProps) {\n  \n  const {entryUpsertId, autoFocus, variant} = props;\n  \n  const client = useApolloClient();\n\n  const dispatch = useDebounceDispatch();\n  \n  const {disabled, srcInput, type, src, isSrcSet, required,\n    open, hasError, errorMsg, upsertType\n  } = useSelector<Root, SelectorResult>((state) => {\n\n    const src = getSrc(state, entryUpsertId);\n\n    const error = getSrcError(state, entryUpsertId);\n\n    return {\n      upsertType:getUpsertType(state, entryUpsertId),\n      disabled:getType(state, entryUpsertId) === null,\n      srcInput:getSrcInput(state, entryUpsertId),\n      type:getType(state, entryUpsertId),\n      src,\n      isSrcSet:!!src,\n      required:isRequired(state, entryUpsertId),\n      open:isSrcOpen(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    };\n\n  }, isEqual);\n\n  const validate  = useCallback(() => {\n    dispatch(validateSrc(entryUpsertId))\n  },[dispatch, entryUpsertId]);\n\n  const onBlur = useCallback(() => {\n    dispatch(setSrcOpen(entryUpsertId, false));\n    validate();\n  },[\n    entryUpsertId, \n    dispatch,\n    validate\n  ]);\n  const onFocus = useCallback(() => dispatch(setSrcOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n  const onClose = useCallback(() => dispatch(setSrcOpen(entryUpsertId, false)),[\n    entryUpsertId, \n    dispatch\n  ]);\n  const onOpen = useCallback(() => dispatch(setSrcOpen(entryUpsertId, true)),[\n    entryUpsertId, \n    dispatch\n  ]);\n\n  const searchCharRef = useRef(\"\");\n  if(!isSrcSet) {\n    searchCharRef.current = srcInput.substr(0,1).toLowerCase();\n  }\n\n  const {loading, error, data} = \n    useQuery<BusinessSrcOptsInputQuery, BusinessSrcOptsInputQueryVariables>(\n    BUSINESS_SRC_OPTS_INPUT_QUERY,{\n      skip:!searchCharRef.current && upsertType !== UpsertType.Update,\n      variables:{\n        searchByName:searchCharRef.current,\n        deptId:src?.id || \"\",\n        bizId:src?.id || \"\",\n        withBizOpts:upsertType === UpsertType.Add || !isSrcSet,\n        withBizOpt:upsertType === UpsertType.Update &&\n          src?.sourceType === JournalEntrySourceType.Business,\n        withDeptAncestors:upsertType === UpsertType.Update &&\n        src?.sourceType === JournalEntrySourceType.Department\n      }\n    });\n\n  const srcVal = useMemo(() => {\n    if(!src || !data) {\n    \n      return null;\n    \n    } else if(src.sourceType === JournalEntrySourceType.Business) {\n      \n      return client.readFragment<BusinessSrcDeptOptsFragment>({\n        id:`Business:${src.id}`,\n        fragment:BIZ_SRC_BIZ_OPTS_FRAGMENT,\n        fragmentName:\"BusinessSrcBizOpts_1Fragment\"\n      }) || null;\n      \n    }\n\n    return client.readFragment<BusinessSrcDeptOptsFragment>({\n      id:`Department:${src.id}`,\n      fragment:BIZ_SRC_DEPT_OPTS_FRAGMENT\n    }) || null;\n  \n  },[src, client, data]);\n\n  const valueChain = useMemo(() => {\n\n    if(!srcVal) {\n      return [];\n    }\n\n    const value:(BusinessSrcBizOptsFragment | BusinessSrcDeptOptsFragment)[] = \n      [srcVal];\n\n    const getParent = (srcVal:BusinessSrcBizOptsFragment |\n      BusinessSrcDeptOptsFragment):BusinessSrcBizOptsFragment |\n        BusinessSrcDeptOptsFragment | null =>\n    {\n\n      if(srcVal.__typename === \"Business\") {\n        return null;\n      \n      } else if(srcVal.parent.__typename === \"Business\") {\n\n        return client.readFragment({\n          id:`Business:${srcVal.parent.id}`,\n          fragment:BIZ_SRC_BIZ_OPTS_FRAGMENT,\n          fragmentName:\"BusinessSrcBizOpts_1Fragment\"\n        }) || null;\n\n      }\n\n      return client.readFragment({\n        id:`Department:${srcVal.parent.id}`,\n        fragment:BIZ_SRC_DEPT_OPTS_FRAGMENT\n      }) || null;\n\n\n    }\n\n    let parent = getParent(srcVal);\n    while(parent) {\n      value.unshift(parent);\n      parent = getParent(parent);\n    }\n    \n    return value;\n\n  }, [srcVal, client]);\n\n  const options = useMemo(() => {\n\n    if(!valueChain || !srcVal) {\n      return data?.bizOpts || [];\n    }\n\n    const bizVal = valueChain[0] as BusinessSrcBizOptsFragment;\n\n    return (bizVal?.deptOpts || [])\n      .filter((deptOpt) => deptOpt.parent.id === srcVal.id);\n\n  },[srcVal, valueChain, data]);\n\n  const hasOptions = options.length > 0;\n\n  const value = useMemo(() => {\n    if(valueChain.length > 1) {\n      return valueChain;\n    } else if(valueChain.length === 1 && !hasOptions) {\n      return valueChain[0] as BusinessSrcBizOptsFragment;\n    } \n    return null;\n  },[valueChain, hasOptions]);\n\n  const multiple = Array.isArray(value);\n  \n  const textFieldProps:TextFieldProps = useMemo(()=>({\n    required,\n    autoFocus,\n    fullWidth:true,\n    variant,\n    label:multiple ? \"Business > Departments...\" : \"Business\",\n    error:hasError,\n    helperText: type === null ? \"Select a Category to unlock.\" : errorMsg\n  }),[required, autoFocus, variant, multiple, hasError, errorMsg, type]);\n  \n  const renderInput = useCallback((params:RenderInputParams) => {\n    return <TextField {...textFieldProps} {...params}/>\n  },[textFieldProps]);\n\n  type Value = typeof value;\n\n  const onChange = useCallback((event, value:Value) => {\n\n    if(value) {\n      \n      const newValue = Array.isArray(value) ? value[value.length - 1] : value;\n\n      dispatch(setSrcValue(entryUpsertId, {\n        sourceType:newValue.__typename === \"Business\" ? \n        JournalEntrySourceType.Business : JournalEntrySourceType.Department,\n        id:newValue.id\n      }));\n      dispatch(clearSrcInput(entryUpsertId));\n\n      if(hasError) {\n        validate();\n      }\n      \n    } else {\n      \n      dispatch(clearSrcValue(entryUpsertId));\n\n    }\n\n  },[entryUpsertId, dispatch, hasError, validate]);\n\n  const onInputChange = useCallback((event:any, value:string) => {\n    if(value) {\n      dispatch(setSrcInput(entryUpsertId, value));\n    } else {\n      dispatch(clearSrcInput(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId]);\n\n  const filterOptions = useCallback((opts:(BusinessSrcBizOptsFragment |\n    BusinessSrcDeptOptsFragment)[]) => \n  {\n\n    const searchText = srcInput.trimStart().split(\" \").join(\"\\\\s\");\n\n    if(searchText === \"\") {\n      return opts;\n    }\n\n    const test = new RegExp(`\\\\s*${searchText}`,\"i\");\n\n    return opts.filter((opt) => test.test(opt.name));\n\n  },[srcInput]);\n\n  const autocompleteProps:AutocompleteProps = {\n    loading,\n    disabled:!type || disabled,\n    multiple,\n    open,\n    options,\n    autoHighlight:true,\n    disableCloseOnSelect:true,\n    getOptionLabel,\n    filterOptions,\n    renderInput,\n    onChange,\n    onInputChange,\n    value,\n    inputValue:srcInput\n  };\n\n  if(error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  // No selected values\n  if(!srcVal) {\n\n    autocompleteProps.multiple = false;\n    autocompleteProps.freeSolo = true;\n    \n    autocompleteProps.onBlur = onBlur;\n    autocompleteProps.onFocus = onFocus;\n    autocompleteProps.onClose = onClose;\n    autocompleteProps.onOpen = onOpen;\n  \n  // Selected a business\n  } else if(!Array.isArray(value) || value.length === 1) {\n\n    // Has NO depts\n    if(options.length === 0) {\n      \n      autocompleteProps.inputValue = srcVal.name;\n      autocompleteProps.open = false;\n\n    // Has depts\n    } else {\n\n      autocompleteProps.renderTags = renderTags;\n      autocompleteProps.onBlur = onBlur;\n      autocompleteProps.onFocus = onFocus;\n      autocompleteProps.onClose = onClose;\n      autocompleteProps.onOpen = onOpen;\n\n    }\n\n  } else {\n\n\n    // Has NO sub depts\n    if(options.length === 0) {\n      \n      autocompleteProps.disabled = true;\n      autocompleteProps.inputValue = \"\";\n      autocompleteProps.open = false;\n      autocompleteProps.renderTags = renderTags;\n\n    // Has SUB depts\n    } else {\n\n      autocompleteProps.autoHighlight = true;\n      autocompleteProps.renderTags = renderTags;\n      autocompleteProps.onBlur = onBlur;\n      autocompleteProps.onFocus = onFocus;\n      autocompleteProps.onClose = onClose;\n      autocompleteProps.onOpen = onOpen;\n\n    }\n\n  }\n\n  return <Autocomplete {...autocompleteProps} />;\n\n}\n\nexport default BusinessSrc;","import React, {useRef, useMemo, useCallback} from 'react';\nimport {useSelector, shallowEqual} from \"react-redux\";\nimport {useQuery, useApolloClient} from '@apollo/react-hooks';\nimport { makeStyles, createStyles, Theme } from '@material-ui/core';\nimport TextField, {TextFieldProps} from '@material-ui/core/TextField';\nimport Autocomplete, {AutocompleteProps, RenderInputParams\n} from '@material-ui/lab/Autocomplete';\nimport gql from 'graphql-tag';\n\nimport {PeopleSrcOpts_1Query as PeopleSrcOptsQuery,\n  PeopleSrcOpts_1QueryVariables as PeopleSrcOptsQueryVariables,\n  JournalEntrySourceType, JournalEntrySourceInput,\n  PersonSrcOpt_1Fragment as PersonSrcOptFragment\n} from '../../../apollo/graphTypes';\nimport {Root} from \"../../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../../redux/hooks\";\nimport {setSrcInput, clearSrcInput, setSrcValue, clearSrcValue, validateSrc\n} from \"../../../redux/actions/journalEntryUpsert\";\nimport {getSrcInput, getSrc, isRequired, getSrcError, getType\n} from \"../../../redux/selectors/journalEntryUpsert\";\n\nconst PERSON_SRC_OPT_FRAGMENT = gql`\n  fragment PersonSrcOpt_1Fragment on Person {\n    __typename\n    id\n    name {\n      first\n      last\n    }\n  }\n`;\n\nconst PEOPLE_SRC_OPTS_QUERY = gql`\n  query PeopleSrcOpts_1($searchByName:PersonNameInput!) {\n    people(searchByName:$searchByName){\n      ...PersonSrcOpt_1Fragment\n    }\n  }\n  ${PERSON_SRC_OPT_FRAGMENT}\n`;\n\nconst styles = makeStyles((theme:Theme) => createStyles({\n  fixHeight:{\n    maxHeight:56\n  },\n}));\n\ntype PersonValue = PersonSrcOptFragment | null\n\ninterface SelectorResult {\n  disabled:boolean;\n  src:JournalEntrySourceInput | null;\n  srcInput:string;\n  isSrcSet:boolean;\n  freeSolo:boolean;\n  required:boolean;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\n// Static cbs for AutocompleteProps\nconst filterOptions = (opts) => opts;\nconst getOptionLabel = (opt:NonNullable<PersonValue>) => \n  `${opt.name.first} ${opt.name.last}`;\n\nexport interface PersonSrcProps {\n  entryUpsertId: string;\n  autoFocus:boolean;\n  variant:\"filled\" | \"outlined\";\n}\n\n\nconst PersonSrc = function(props:PersonSrcProps) {\n\n  const classes = styles();\n  \n  const dispatch = useDebounceDispatch();\n\n  const client = useApolloClient();\n\n  const {entryUpsertId, autoFocus, variant} = props;\n  \n  const {disabled, src, srcInput, isSrcSet, required, freeSolo, hasError,\n    errorMsg\n  } = useSelector<Root, SelectorResult>((state) => {\n    const src = getSrc(state, entryUpsertId);\n    const error = getSrcError(state, entryUpsertId);\n\n    return {\n      disabled:getType(state, entryUpsertId) === null,\n      src,\n      srcInput:getSrcInput(state, entryUpsertId),\n      isSrcSet:!!src,\n      freeSolo:!src,\n      required:isRequired(state, entryUpsertId),\n      hasError:!!error,\n      errorMsg:error?.message || null\n    };\n\n  }, shallowEqual);\n\n  const searchCharRef = useRef(\"\");\n  if(!isSrcSet) {\n    searchCharRef.current = srcInput.substr(0,1).toLowerCase();\n  }\n\n  const {loading, error, data} = \n    useQuery<PeopleSrcOptsQuery, PeopleSrcOptsQueryVariables>(\n    PEOPLE_SRC_OPTS_QUERY, {\n      skip:!searchCharRef.current,\n      variables:{\n        searchByName:{\n          first:searchCharRef.current,\n          last:searchCharRef.current\n        }\n      }\n  });\n\n  const options = useMemo(()=>{\n    const options = data?.people || [];\n    if(!isSrcSet || !srcInput) {\n      return options;\n    }\n    const test = new RegExp(`(^|\\\\s)${srcInput}`,'i');\n    return options\n      .filter((opt) => test.test(`${opt.name.first} ${opt.name.last}`));\n  },[srcInput, data, isSrcSet]);\n  \n  // Read fragment, so that when submitting a new person, the new person \n  // is pulled from the cache\n  const value = src ? client.readFragment<PersonSrcOptFragment>({\n    id:`Person:${src.id}`,\n    fragment:PERSON_SRC_OPT_FRAGMENT,\n  }) : null;\n\n  const inputValue = isSrcSet ? \n    `${value?.name.first} ${value?.name.last}` : srcInput;\n\n  const validate  = useCallback(() => {\n    dispatch(validateSrc(entryUpsertId))\n  },[dispatch, entryUpsertId]);\n\n  const onChange = useCallback((event, newSrc:PersonValue)=> {\n    newSrc = newSrc || null;\n    if(newSrc) {\n      dispatch(setSrcValue(entryUpsertId, {\n        sourceType:JournalEntrySourceType.Person,\n        id:newSrc.id\n      }));\n      if(hasError) {\n        validate();\n      }\n    } else {\n      dispatch(clearSrcValue(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId, hasError, validate]);\n\n  const onInputChange = useCallback((event:any, value:string) => {\n    if(value) {\n      dispatch(setSrcInput(entryUpsertId, value));\n    } else {\n      dispatch(clearSrcInput(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId]);\n\n  const textFieldProps:TextFieldProps = {\n    required,\n    onBlur:validate as any,\n    autoFocus,\n    label:\"Name\",\n    fullWidth:true,\n    variant,\n    error:hasError,\n    helperText:errorMsg\n  };\n\n  const renderInput = useCallback((params:RenderInputParams) => {\n    const InputProps  = params?.InputProps;\n    if(InputProps) {\n      const className = InputProps?.className || \"\";\n      InputProps.className = `${className} ${classes.fixHeight}`\n    } else {\n      params.InputProps = {\n        className:classes.fixHeight\n      } as  RenderInputParams['InputProps'];\n    }\n    return <TextField {...textFieldProps} {...params}/>\n  },[classes, textFieldProps]);\n\n  if(error) {\n    console.error(error);\n    return <p>{error?.message || `${error}`}</p>;\n  }\n\n  const autoCompleteProps:AutocompleteProps = {\n    disabled,\n    loading,\n    autoHighlight:true,\n    autoSelect:false,\n    autoComplete:true,\n    freeSolo,\n    options,\n    inputValue,\n    value,\n    onChange,\n    onInputChange,\n    renderInput,\n    filterOptions,\n    getOptionLabel\n  };\n\n  return <Autocomplete {...autoCompleteProps}/>;\n\n}\n\nexport default PersonSrc;","import React from 'react';\nimport {useSelector} from \"react-redux\";\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core\";\n\nimport { JournalEntrySourceType } from '../../apollo/graphTypes';\nimport SourceTypeToggle from \"./SourceInput/SourceTypeToggle\";\nimport BusinessSrc from \"./SourceInput/BusinessSrc\";\nimport PersonSrc from \"./SourceInput/PersonSrc\";\nimport {Root} from \"../../redux/reducers/root\";\nimport {getSrcType} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst styles = makeStyles((theme:Theme) => createStyles({\n  sourceInput:{\n    flexGrow:1\n  },\n}));\n\nexport interface SourceInputProps {\n  entryUpsertId: string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst SourceInput = function(props:SourceInputProps) {\n\n  const classes = styles();\n  \n  const {entryUpsertId, autoFocus = false, variant = \"filled\"} = props;\n\n  const srcType = useSelector<Root, JournalEntrySourceType | null>((state) => \n    getSrcType(state, entryUpsertId));\n\n  return <Box display=\"flex\" flexWrap=\"nowrap\" alignItems=\"center\">\n    <Grid item >\n      <SourceTypeToggle entryUpsertId={entryUpsertId}/>\n    </Grid>\n    <Grid item className={classes.sourceInput}>{(()=>{\n      if(!srcType) {\n        return <TextField \n          fullWidth\n          disabled\n          variant={variant as any}\n          label=\"Source\"\n        />;\n      } else if(srcType === JournalEntrySourceType.Person) {\n        return <PersonSrc\n          entryUpsertId={entryUpsertId}\n          autoFocus={autoFocus}\n          variant={variant}\n        />;\n      }\n      return <BusinessSrc \n        entryUpsertId={entryUpsertId}\n        autoFocus={autoFocus}\n        variant={variant}\n      />;\n    })()}</Grid>\n  </Box>;\n\n}\n\nexport default SourceInput;","import React, {useMemo, useCallback} from 'react';\nimport {useSelector, shallowEqual} from \"react-redux\";\nimport {useQuery} from '@apollo/react-hooks';\nimport FormControl, {FormControlProps} from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Box from '@material-ui/core/Box';\nimport Select, {SelectProps} from '@material-ui/core/Select';\nimport MenuItem, {MenuItemProps} from '@material-ui/core/MenuItem';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport {capitalCase} from 'change-case';\nimport gql from 'graphql-tag';\n\nimport {PayMethodInput_1Query as PayMethodInputQuery\n} from '../../apollo/graphTypes';\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setPayMethodValue, clearPayMethodValue, validatePayMethod\n} from \"../../redux/actions/journalEntryUpsert\";\nimport { getPayMethod, isRequired, getPayMethodError, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst PAY_METHOD_INPUT_QUERY = gql`\n  query PayMethodInput_1 {\n    paymentMethods {\n      __typename\n      id\n      method\n      active\n    }\n  }\n`;\n\ninterface SelectorResult {\n  disabled:boolean;\n  required:boolean;\n  value:string;\n  hasError:boolean;\n  errorMsg:string | null;\n}\n\nexport interface PaymentMethodInputProps {\n  entryUpsertId: string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst PaymentMethod = function(props:PaymentMethodInputProps) {\n\n  const {entryUpsertId, autoFocus = false, variant = \"filled\"} = props;\n\n  const dispatch = useDebounceDispatch();\n\n  const {disabled, value, required, hasError, errorMsg} = \n    useSelector<Root, SelectorResult>((state)=>{\n      const error = getPayMethodError(state, entryUpsertId);\n      return {\n        disabled:getType(state, entryUpsertId) === null,\n        required:isRequired(state, entryUpsertId),\n        value:getPayMethod(state, entryUpsertId),\n        hasError:!!error,\n        errorMsg:error?.message || null\n      };\n    }, shallowEqual);\n  \n  const validate  = useCallback(() => {\n    dispatch(validatePayMethod(entryUpsertId))\n  },[dispatch, entryUpsertId]);\n\n  const {loading, error, data} \n    = useQuery<PayMethodInputQuery>(PAY_METHOD_INPUT_QUERY);\n  \n  const paymentMethods = useMemo(() => {\n    return (data?.paymentMethods || []).filter( p => p.active );\n  },[data]);\n\n  const formControlProps:FormControlProps = useMemo(()=>({\n    disabled,\n    required,\n    fullWidth:true,\n    variant,\n    error:hasError\n  }),[required, variant, hasError, disabled]);\n\n  const onChange = useCallback((event) => {\n    const value = event?.target?.value as string || null;\n    if(value) {\n      dispatch(setPayMethodValue(entryUpsertId, value));\n      if(hasError) {\n        validate();\n      }\n    } else {\n      dispatch(clearPayMethodValue(entryUpsertId));\n    }\n  },[dispatch, entryUpsertId, hasError, validate]);\n\n  const children = useMemo(()=>paymentMethods.map(({id, method})=>(\n    <MenuItem {...{\n      value:id,\n      key:id,\n      children:`${method[0].toUpperCase()}${method.substr(1)}`\n    } as MenuItemProps as any }/>)),[paymentMethods]);\n\n  if(loading){\n    return <Skeleton variant=\"rect\" height={56}/>;\n  } else if(error) {\n    console.error(error);\n    return <p>{error?.message}</p>;\n  }\n  \n  const selectProps:SelectProps = {\n    autoFocus,\n    children,\n    onChange,\n    value\n  };\n\n  return <FormControl {...formControlProps}>\n    <InputLabel>Method</InputLabel>\n    <Select {...selectProps}/>\n    {hasError && <FormHelperText>{errorMsg}</FormHelperText>}\n  </FormControl>;\n\n}\n\nexport default PaymentMethod;","import React, { useCallback, useMemo } from 'react';\nimport TextField, {TextFieldProps} from '@material-ui/core/TextField';\n\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setDscrptValue, clearDscrptValue\n} from \"../../redux/actions/journalEntryUpsert\";\nimport { getDscrptValue, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\nimport { useSelector } from 'react-redux';\n\ninterface SelectorResult {\n  disabled:boolean;\n  description:string;\n}\n\nexport interface DescriptionInputProps {\n  entryUpsertId:string;\n  autoFocus?:boolean;\n  variant?:\"filled\" | \"outlined\";\n}\n\nconst DescriptionInput = function(props:DescriptionInputProps) {\n  \n  const {entryUpsertId, autoFocus = false, variant = 'filled'} = props;\n  \n  const dispatch = useDebounceDispatch();\n\n  const {description, disabled} = useSelector<Root, SelectorResult>((state)=>({\n    disabled:getType(state, entryUpsertId) === null,\n    description:getDscrptValue(state, entryUpsertId) || \"\"\n  }));\n  \n  const onChange = useCallback((event)=> {\n    const value = (event.target.value || \"\");\n    if(value) {\n      dispatch(setDscrptValue(entryUpsertId, value));\n    } else {\n      dispatch(clearDscrptValue(entryUpsertId));\n    }\n\n  }, [dispatch, entryUpsertId]);\n\n  const textFieldProps:TextFieldProps = {\n    disabled,\n    fullWidth:true,\n    value: description,\n    variant,\n    required:false,\n    label:\"Description\",\n    name:\"description\",\n    onChange,\n    InputProps:useMemo(() => ({\n      type:\"text\",\n      autoFocus,\n    }),[autoFocus]),\n  }\n\n  return <TextField {...textFieldProps} />;\n\n}\n\nexport default DescriptionInput;","import React, { useCallback, useMemo } from 'react';\nimport Checkbox, {CheckboxProps} from '@material-ui/core/Checkbox';\n\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch} from \"../../redux/hooks\";\nimport {setReconciledValue, clearReconciledValue\n} from \"../../redux/actions/journalEntryUpsert\";\nimport { getReconciledValue, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\nimport { useSelector } from 'react-redux';\n\ninterface SelectorResult {\n  checked:boolean;\n  disabled:boolean;\n}\n\nexport interface DescriptionInputProps {\n  entryUpsertId:string;\n  autoFocus?:boolean;\n}\n\nconst DescriptionInput = function(props:DescriptionInputProps) {\n  \n  const {entryUpsertId, autoFocus = false} = props;\n  \n  const dispatch = useDebounceDispatch();\n\n  const {checked, disabled} = useSelector<Root, SelectorResult>((state)=>({\n    checked:getReconciledValue(state, entryUpsertId),\n    disabled:getType(state, entryUpsertId) === null\n  }));\n  \n  const onChange = useCallback((event)=> {\n    const value = event.target.checked;\n    if(value) {\n      dispatch(setReconciledValue(entryUpsertId, value));\n    } else {\n      dispatch(clearReconciledValue(entryUpsertId));\n    }\n\n  }, [dispatch, entryUpsertId]);\n\n  const checkboxProps:CheckboxProps = {\n    disabled,\n    checked,\n    required:false,\n    name:\"reconciled\",\n    onChange,\n    inputProps:useMemo(() => ({\n      type:\"checkbox\",\n      autoFocus,\n    }),[autoFocus]),\n  }\n\n  return <Checkbox {...checkboxProps} />;\n\n}\n\nexport default DescriptionInput;","import React, {useCallback} from \"react\";\nimport {useApolloClient} from \"@apollo/react-hooks\";\nimport {useSelector} from \"react-redux\";\nimport Box from \"@material-ui/core/Box\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport ToggleButton, {ToggleButtonProps} from \"@material-ui/lab/ToggleButton\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport ToggleButtonGroup, {ToggleButtonGroupProps\n} from \"@material-ui/lab/ToggleButtonGroup\";\nimport { BankPlus, BankMinus } from 'mdi-material-ui'\n\nimport {BusinessSrcOptsInput_1Query as BusinessSrcOptsInputQuery,\n  BusinessSrcOptsInput_1QueryVariables as BusinessSrcOptsInputQueryVariables,\n  BusinessSrcBizOpts_1Fragment as BusinessSrcBizOptsFragment,\n  BusinessSrcDeptOpts_1Fragment as BusinessSrcDeptOptsFragment,\n  JournalEntrySourceType, JournalEntrySourceInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {Root} from \"../../redux/reducers/root\";\nimport {useDebounceDispatch as useDispatch} from \"../../redux/hooks\";\nimport {setSrcInput, clearSrcInput, clearSrcValue, setSrcOpen, setSrcValue,\n  validateSrc, setType\n} from \"../../redux/actions/journalEntryUpsert\";\nimport {getSrc, isSrcOpen, getSrcError,\n  getType, getTypeError\n} from \"../../redux/selectors/journalEntryUpsert\";\n\nconst creditToggleButtonProps:ToggleButtonProps = {\n  value:JournalEntryType.Credit\n};\n\nconst debitToggleButtonProps:ToggleButtonProps = {\n  value:JournalEntryType.Debit\n};\n\ninterface SelectorResult {\n  value:JournalEntryType | null;\n  typeError:Error | null;\n  hasError:boolean;\n}\n\nexport interface TypeToggleProps {\n  entryUpsertId: string;\n}\n\nconst TypeToggle = (props:TypeToggleProps) => {\n\n  const {entryUpsertId} = props;\n\n  const client = useApolloClient();\n\n  const {value, typeError, hasError} =\n    useSelector<Root, SelectorResult>((state) => {\n\n      const typeError = getTypeError(state, entryUpsertId);\n\n      return {\n        value:getType(state, entryUpsertId),\n        typeError,\n        hasError:!!typeError\n      };\n    \n    });\n\n  const dispatch = useDispatch();\n\n  const onChange = useCallback((event, newType:JournalEntryType) => {\n    dispatch(setType(entryUpsertId, newType, client));\n  },[dispatch, entryUpsertId, client]);\n\n  const color = hasError ? \"error\" : (value === null ? \"secondary\" : undefined);\n\n  const toggleButtonGroupProps:ToggleButtonGroupProps = {\n    size:\"small\",\n    exclusive:true,\n    onChange,\n    value\n  };\n\n  const control = <Box pl={1} clone>\n    <ToggleButtonGroup {...toggleButtonGroupProps}>\n      <Tooltip arrow placement=\"top\" title=\"Credit\">\n        <ToggleButton\n          selected={value === JournalEntryType.Credit}\n          {...creditToggleButtonProps}\n        >\n          <BankPlus color={color} />\n        </ToggleButton>\n      </Tooltip>\n      <Tooltip arrow placement=\"top\" title=\"Debit\">\n        <ToggleButton\n          selected={value === JournalEntryType.Debit}\n          {...debitToggleButtonProps}\n        >\n          <BankMinus color={color} />\n        </ToggleButton>\n      </Tooltip>\n    </ToggleButtonGroup>\n  </Box>;\n\n  return <FormControlLabel\n    color={value === null ? \"secondary\" : \"default\"}\n    labelPlacement=\"start\"\n    control={control}\n    label=\"Type\"\n  />;\n\n}\n\nexport default TypeToggle;","import React, { useCallback } from 'react';\nimport {useSelector} from \"react-redux\";\nimport {useApolloClient} from \"@apollo/react-hooks\";\nimport {Add, Queue, Cancel} from \"@material-ui/icons/\";\nimport Tooltip from '@material-ui/core/Tooltip';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n\nimport DateInput from '../JournalEntryInputs/DateInput';\nimport TotalInput from '../JournalEntryInputs/TotalInput';\nimport DepartmentInput from '../JournalEntryInputs/DepartmentInput';\nimport CategoryInput from '../JournalEntryInputs/CategoryInput';\nimport SourceInput from '../JournalEntryInputs/SourceInput';\nimport PaymentMethodInput from '../JournalEntryInputs/PaymentMethodInput';\nimport DescriptionInput from '../JournalEntryInputs/DescriptionInput';\nimport ReconciledInput from '../JournalEntryInputs/ReconciledInput';\nimport TypeToggle from '../JournalEntryInputs/TypeToggle';\nimport {Root} from \"../../redux/reducers/root\";\nimport {getUpsertType, UpsertType, getType\n} from \"../../redux/selectors/journalEntryUpsert\";\nimport {useDebounceDispatch as useDispatch} from \"../../redux/hooks\";\nimport {cancel, submit} from \"../../redux/actions/journalEntryUpsert\";\nimport {JournalEntryType} from \"../../apollo/graphTypes\";\n\ninterface SelectorResult {\n  open:boolean;\n  typeIsSet:boolean;\n}\n\nexport interface AddEntryProps {\n  entryUpsertId:string;\n  fromDept?:string;\n}\n\nconst AddEntry = function(props:AddEntryProps) {\n\n  const {entryUpsertId, fromDept} = props;\n\n  const client = useApolloClient();\n\n  const dispatch = useDispatch();\n\n  const onClickCancel = useCallback((event?) => {\n    dispatch(cancel(entryUpsertId));\n  },[dispatch, entryUpsertId]);\n\n  const onClickSubmit = useCallback((event?) => {\n    dispatch(submit(entryUpsertId, client));\n  },[dispatch, entryUpsertId, client]);\n\n\n  const {open, typeIsSet} = useSelector<Root, SelectorResult>((state) => ({\n    open:getUpsertType(state, entryUpsertId) === UpsertType.Add,\n    typeIsSet:getType(state, entryUpsertId) !== null\n  }));\n\n  return <Dialog maxWidth=\"lg\" open={open}>\n    <form>\n      <DialogTitle>Add Entry</DialogTitle>\n        <Box\n          justifyContent=\"center\"\n          display=\"flex\"\n          flexWrap=\"wrap\"\n          clone\n        >\n          <DialogContent dividers>\n            <Box padding={2}>\n              <TypeToggle entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={150}>\n              <DateInput autoFocus entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <DepartmentInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <CategoryInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <SourceInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={400}>\n              <DescriptionInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={175}>\n              <PaymentMethodInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={150}>\n              <TotalInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2}  minWidth={120}>\n              <FormControlLabel\n                control={<ReconciledInput entryUpsertId={entryUpsertId} />}\n                label=\"Reconcile\"\n              />                \n            </Box>\n          </DialogContent>\n        </Box>\n      <DialogActions>\n        <Button\n          disabled={!typeIsSet}\n          size=\"medium\"\n          color=\"secondary\"\n          variant=\"outlined\"\n          startIcon={<Add />}\n          onClick={onClickSubmit}\n        >Submit</Button>\n        <Button\n          disabled={!typeIsSet}\n          size=\"medium\"\n          color=\"secondary\"\n          variant=\"outlined\"\n          startIcon={<Queue />}\n        >Submit/New</Button>\n        <Button\n          size=\"medium\"\n          color=\"default\"\n          variant=\"outlined\"\n          startIcon={<Cancel />}\n          onClick={onClickCancel}\n        >Cancel</Button>\n      </DialogActions>\n    </form>\n  </Dialog>\n\n}\n\nexport default AddEntry;","import React, { useCallback } from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useApolloClient} from \"@apollo/react-hooks\";\nimport {Add, Cancel, Delete} from \"@material-ui/icons/\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\n\n\nimport DateInput from \"../../JournalEntryInputs/DateInput\";\nimport TotalInput from \"../../JournalEntryInputs/TotalInput\";\nimport DepartmentInput from \"../../JournalEntryInputs/DepartmentInput\";\nimport CategoryInput from \"../../JournalEntryInputs/CategoryInput\";\nimport SourceInput from \"../../JournalEntryInputs/SourceInput\";\nimport PaymentMethodInput from \"../../JournalEntryInputs/PaymentMethodInput\";\nimport DescriptionInput from \"../../JournalEntryInputs/DescriptionInput\";\nimport ReconciledInput from \"../../JournalEntryInputs/ReconciledInput\";\nimport TypeToggle from \"../../JournalEntryInputs/TypeToggle\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {getUpsertType, UpsertType, getType\n} from \"../../../redux/selectors/journalEntryUpsert\";\nimport {useDebounceDispatch as useDispatch} from \"../../../redux/hooks\";\nimport {cancel, submit} from \"../../../redux/actions/journalEntryUpsert\";\n\ninterface SelectorResult {\n  open:boolean;\n  typeIsSet:boolean;\n}\n\nexport interface UpdateEntryProps {\n  entryUpsertId:string;\n  fromDept?:string;\n}\n\nconst UpdateEntry = function(props:UpdateEntryProps) {\n\n  const {entryUpsertId, fromDept} = props;\n\n  const client = useApolloClient();\n\n  const dispatch = useDispatch();\n\n  const onClickCancel = useCallback((event?) => {\n    dispatch(cancel(entryUpsertId));\n  },[dispatch, entryUpsertId]);\n\n  const onClickUpdate = useCallback((event?) => {\n    dispatch(submit(entryUpsertId, client));\n  },[dispatch, entryUpsertId, client]);\n\n  const onClickDelete = useCallback((event?) => {\n    console.log(\"Delete \", entryUpsertId);\n    // dispatch(submit(entryUpsertId, client));\n  },[dispatch, entryUpsertId, client]);\n\n\n  const {open, typeIsSet} = useSelector<Root, SelectorResult>((state) => ({\n    open:getUpsertType(state, entryUpsertId) === UpsertType.Update,\n    typeIsSet:getType(state, entryUpsertId) !== null\n  }));\n\n  return <Dialog maxWidth=\"lg\" open={open}>\n    <form>\n      <DialogTitle>Update Entry</DialogTitle>\n        <Box\n          justifyContent=\"center\"\n          display=\"flex\"\n          flexWrap=\"wrap\"\n          clone\n        >\n          <DialogContent dividers>\n            <Box padding={2}>\n              <TypeToggle entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={150}>\n              <DateInput autoFocus entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <DepartmentInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <CategoryInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={380}>\n              <SourceInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={400}>\n              <DescriptionInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={175}>\n              <PaymentMethodInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2} minWidth={150}>\n              <TotalInput entryUpsertId={entryUpsertId} />\n            </Box>\n            <Box padding={2}  minWidth={120}>\n              <FormControlLabel\n                control={<ReconciledInput entryUpsertId={entryUpsertId} />}\n                label=\"Reconcile\"\n              />                \n            </Box>\n          </DialogContent>\n        </Box>\n      <DialogActions>\n        <Box width=\"100%\" display=\"flex\" justifyContent=\"space-between\">\n            <Button\n              size=\"medium\"\n              color=\"default\"\n              variant=\"outlined\"\n              startIcon={<Delete />}\n              onClick={onClickDelete}\n            >Delete</Button>\n          <div>\n            <Button\n              disabled={!typeIsSet}\n              size=\"medium\"\n              color=\"secondary\"\n              variant=\"outlined\"\n              startIcon={<Add />}\n              onClick={onClickUpdate}\n            >Update</Button>\n            <Button\n              size=\"medium\"\n              color=\"default\"\n              variant=\"outlined\"\n              startIcon={<Cancel />}\n              onClick={onClickCancel}\n            >Cancel</Button>\n          </div>\n        </Box>\n      </DialogActions>\n    </form>\n  </Dialog>\n\n}\n\nexport default UpdateEntry;","import {Root} from \"../reducers/root\";\n\n\nexport const isPABOpen = (state:Root, pabId:string):boolean => {\n  return pabId in state.journal.pabs ? state.journal.pabs[pabId].open : false;\n}","import React, { ReactElement, useMemo, useCallback } from \"react\";\nimport {useSelector} from \"react-redux\";\nimport {useApolloClient} from \"@apollo/react-hooks\";\nimport Fab from \"@material-ui/core/Fab\";\nimport Box from \"@material-ui/core/Box\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport {Add, ExpandLess, Cancel, Publish} from \"@material-ui/icons/\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport SpeedDial, { SpeedDialProps } from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\n\nimport store from \"../../../redux/store\";\nimport {createPAB, openPAB, closePAB} from \"../../../redux/actions/journal\";\nimport {Root} from \"../../../redux/reducers/root\";\nimport {create, cancel, submit\n} from \"../../../redux/actions/journalEntryUpsert\";\nimport {getUpsertType, getSubmitStatus, UpsertType\n} from \"../../../redux/selectors/journalEntryUpsert\";\nimport {isPABOpen} from \"../../../redux/selectors/journal\";\nimport {SubmitStatus\n} from \"../../../redux/reducers/journalEntryUpserts\";\nimport {uuid, namespace} from \"../../../utils/uuid\";\nimport {useDebounceDispatch as useDispatch} from \"../../../redux/hooks\";\n\n// Create PAB state\nconst JOURNAL_PAB_ID = uuid(\"Journal_PAB\", namespace);\nstore.dispatch(createPAB(JOURNAL_PAB_ID));\n\ninterface SelectorResult {\n  upsertType:UpsertType | null;\n  submitStatus:SubmitStatus | null;\n  isOpen:boolean;\n}\n\nexport interface JournalPABProps {\n  entryUpsertId: string;\n  fromDept?:string;\n}\n\nconst JournalPAB = function(props:JournalPABProps) {\n\n  const {entryUpsertId, fromDept} = props;\n\n  const client = useApolloClient();\n\n  const theme = useTheme();\n\n  const dispatch = useDispatch();\n\n  const onOpen = \n    useCallback((event?) => dispatch(openPAB(JOURNAL_PAB_ID)),[dispatch]);\n\n  const onClose = \n    useCallback((event?) => dispatch(closePAB(JOURNAL_PAB_ID)),[dispatch]);\n    \n  const {upsertType, submitStatus, isOpen\n  } = useSelector<Root, SelectorResult>((state) => ({\n    upsertType:getUpsertType(state, entryUpsertId),\n    submitStatus:getSubmitStatus(state, entryUpsertId),\n    isOpen:isPABOpen(state, JOURNAL_PAB_ID)\n  }));\n\n  if(submitStatus === SubmitStatus.Submitting) {\n    \n    return <Box\n      position=\"fixed !important\"\n      bottom={theme.spacing(2)}\n      right={theme.spacing(2)}\n      clone\n    >\n      <Fab\n        disabled={true}\n        size=\"large\"\n        color=\"secondary\"\n        aria-label=\"submitting\"\n        children={<CircularProgress color=\"secondary\" />}\n      />\n    </Box>;\n  \n  } else if(submitStatus === SubmitStatus.NotSubmitted && upsertType !== null) {\n\n    return <Box\n        position=\"fixed !important\"\n        bottom={theme.spacing(2)}\n        right={theme.spacing(2)}\n        clone\n      >\n        <Fab \n          disabled\n          size=\"large\"\n          color=\"secondary\"\n          aria-label=\"add entry\"\n          children={<Add />}\n        />\n      </Box>;\n\n    /* const isAdd = upsertType === UpsertType.Add;\n      return <Box\n        position=\"fixed !important\"\n        bottom={theme.spacing(2)}\n        right={theme.spacing(2)}\n        clone\n      >\n        <SpeedDial\n          ariaLabel={`cancel or ${isAdd ? \"submit\" : \"update\"}`}\n          FabProps={{\n            size:\"large\",\n            color:\"secondary\",\n          }}\n          icon={isOpen ? <Publish /> : <ExpandLess />}\n          onOpen={onOpen}\n          onClose={onClose}\n          open={isOpen}\n          onClick={(event) => \n            isOpen ? dispatch(submit(entryUpsertId, client)) : onOpen()}\n        >\n          <SpeedDialAction\n            icon={<Cancel />}\n            tooltipTitle=\"Cancel\"\n            onClick={()=> {\n              onClose();\n              dispatch(cancel(entryUpsertId));\n            }}\n          />\n        </SpeedDial>\n      </Box>; */\n    \n    \n    /* return <Tooltip title={isAdd ? \"Submit\" : \"Update\"} placement=\"top\">\n      <Box\n        position=\"fixed !important\"\n        bottom={theme.spacing(2)}\n        right={theme.spacing(2)}\n        clone\n      >\n        <Fab \n          size=\"large\"\n          color=\"secondary\"\n          aria-label={isAdd ? \"submit\" : \"update\"}\n          children={<Publish />}\n          onClick={() => dispatch(submit(entryUpsertId, client)) }\n        />\n      </Box>\n    </Tooltip>; */\n\n  }  else {\n    \n    // return <Tooltip title=\"New\" placement=\"top\">\n      return <Box\n        position=\"fixed !important\"\n        bottom={theme.spacing(2)}\n        right={theme.spacing(2)}\n        clone\n      >\n        <Fab \n          size=\"large\"\n          color=\"secondary\"\n          aria-label=\"add entry\"\n          children={<Add />}\n          onClick={() => dispatch(create(entryUpsertId,{fromDept})) }\n        />\n      </Box>;\n    // </Tooltip>;\n  \n  }\n\n}\n\nexport default JournalPAB;","import * as actions from \"../actionTypes/journal\";\n\nexport const createPAB = (pabId:string):actions.CreatePAB => ({\n  type:actions.CREATE_PAB,\n  payload:{\n    pabId\n  }\n});\n\nexport const openPAB = (pabId:string):actions.OpenPAB => ({\n  type:actions.OPEN_PAB,\n  payload:{\n    pabId\n  }\n});\n\nexport const closePAB = (pabId:string):actions.ClosePAB => ({\n  type:actions.CLOSE_PAB,\n  payload:{\n    pabId\n  }\n});","import React, {useCallback} from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport Box from \"@material-ui/core/Box\";\nimport AutoSizer, {Size} from 'react-virtualized-auto-sizer';\n\nimport Header from \"./Header\";\nimport Body, {JournalMode} from \"./Body\";\nimport AddEntry from \"../../Dashboard/AddEntry\";\nimport UpdateEntry from \"./UpdateEntry\";\n// import Footer from \"./Footer\";\nimport JournalPAB from \"./JournalPAB\";\nimport {uuid, namespace} from \"../../../utils/uuid\";\n\nexport const entryUpsertId = uuid(\"Journal\", namespace);\n\n\nconst Journal = function(props:{deptId?:string, mode:JournalMode}) {\n\n  const {deptId, mode} = props;\n\n  const autoSizerChildren = useCallback(({width, height}:Size) => {\n    return <Body mode={mode} deptId={deptId} width={width} height={height} />;\n  },[deptId, mode]);\n\n  return <Box\n    style={{overflowX:\"auto\"}}\n    width=\"100%\"\n    overflow=\"hidden\"\n    flexGrow={1}\n    display=\"flex\"\n    justifyContent=\"flex-start\"\n    flexDirection=\"column\"\n    clone\n  >\n    <form>\n      <Box\n        width=\"100%\"\n        flexGrow={1}\n        display=\"flex !important\" // Override display:table from child Table\n        justifyContent=\"flex-start\"\n        flexDirection=\"column\"\n        clone\n      >\n        <Table component=\"div\">\n          <Header />\n          <Box flexGrow={1} >\n            <AutoSizer children={autoSizerChildren}/>\n          </Box>\n          {/* <Footer entryUpsertId={entryUpsertId} /> */}\n          {mode === JournalMode.View && \n            <JournalPAB fromDept={deptId} entryUpsertId={entryUpsertId} />}\n        </Table>\n      </Box>\n      <UpdateEntry fromDept={deptId} entryUpsertId={entryUpsertId}/>\n      <AddEntry fromDept={deptId} entryUpsertId={entryUpsertId} />\n    </form>\n  </Box>;\n\n}\n\nexport default Journal;","import React, { useCallback, useEffect } from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport {Link} from \"react-router-dom\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from '@material-ui/icons/Add';\nimport DoneAllIcon from '@material-ui/icons/DoneAll';\nimport TableChartIcon from '@material-ui/icons/TableChart';\nimport AssessmentIcon from '@material-ui/icons/Assessment';\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardContent from '@material-ui/core/CardContent';\nimport gql from \"graphql-tag\";\nimport numeral from 'numeral';\nimport {red, green, orange, grey} from '@material-ui/core/colors';\n\nimport AddEntry from \"./AddEntry\";\nimport {uuid, namespace} from \"../../utils/uuid\";\nimport {useDebounceDispatch as useDispatch} from \"../../redux/hooks\";\nimport {create} from \"../../redux/actions/journalEntryUpsert\";\nimport {GetReportDataQuery, GetReportDataQueryVariables,\n  GetReportDataEntryFragment as ReportDataEntry, JournalEntryType\n} from \"../../apollo/graphTypes\";\n\nconst GET_REPORT_DATA = gql`\n  query GetReportData($deptId:ID!) {\n    department(id:$deptId) {\n      __typename\n      id\n      name\n      budget {\n        id\n        __typename\n        amount {\n          num\n          den\n        }\n      }\n    }\n    journalEntries(filterBy:{department:{eq:$deptId}}) {\n      entries {\n        ...GetReportDataEntryFragment\n      }\n    }\n  }\n  fragment GetReportDataEntryFragment on JournalEntry {\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      name\n      budget {\n        id\n        __typename\n        amount {\n          num\n          den\n        }\n      }\n    }\n  }\n`;\n\nconst ADD_ENTRY_ID = uuid(\"DashboardJournalEntry\", namespace);\n\nconst colorMeter = (percentSpent:number, shade = 800) => {\n  if(percentSpent < .75) {\n    return green[shade];\n  } else if(percentSpent < .90) {\n    return orange[shade];\n  } else {\n    return red[shade];\n  }\n}\n\nconst BudgetMeter = (props:{spentPercentage:number; height:number;}) => {\n\n  const {spentPercentage, height} = props;\n\n  return <Box\n    height={height}\n    bgcolor={colorMeter(spentPercentage)}\n    display=\"flex\"\n    justifyContent=\"flex-start\"\n  >\n    <Box\n      height=\"100%\"\n      width={`${100 * spentPercentage}%`}\n      bgcolor={grey[400]}\n    />\n  </Box>;\n}\n\ninterface DeptReportObj {\n  name:string;\n  spent:number;\n  budget:number | null;\n}\n\nconst Dashboard = function(props:{deptId:string}) {\n\n  const {deptId} = props;\n\n  const {loading, error, data} = useQuery<GetReportDataQuery,\n    GetReportDataQueryVariables>(GET_REPORT_DATA,{\n    variables:{\n      deptId\n    }\n  });\n\n  const entries = data?.journalEntries.entries || [];\n  const deptName = data?.department?.name || \"\";\n  const sudDeptReport = new Map<string, DeptReportObj>();\n\n  useEffect(()=>{\n    document.title = deptName;\n  }, [deptName]);\n  \n  const dispatch = useDispatch();\n\n  const onClickNewEntry = useCallback((event?)=>{\n    dispatch(create(ADD_ENTRY_ID,{fromDept:deptId}));\n  }, [dispatch, deptId]);\n\n  let total = 0 ;\n\n  for(const entry of entries) {\n\n    if(!sudDeptReport.has(entry.department.id)) {\n\n      sudDeptReport.set(entry.department.id, {\n        name:entry.department.name,\n        spent:0,\n        budget:(()=>{\n          if(entry.department?.budget?.amount) {\n            const {num, den} = entry.department.budget.amount;\n            return num/den;\n          }\n          return null;\n        })()\n      });\n    \n    }\n    \n    const nameTotal = sudDeptReport.get(entry.department.id) as DeptReportObj;\n\n    const entryTotal = entry.total.num / entry.total.den;\n    \n    if(entry.type === JournalEntryType.Credit) {\n    \n      total -= entryTotal;\n      nameTotal.spent -= entryTotal;\n    \n    } else {\n    \n      total += entryTotal;\n    \n      nameTotal.spent += entryTotal;\n    \n    }\n\n  }\n\n  const {num:bNum, den:bDen} = \n    data?.department?.budget?.amount || {num:0, den:1};\n  const budgetDec = bNum/bDen;\n  const totalRemaining = numeral(budgetDec - total).format('$0,0.00');\n  const budget = numeral(budgetDec).format('$0,0.00');\n\n  if(loading) {\n    return <p>Loading...</p>;\n  } else if(error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  return <Box display=\"flex\" flexDirection=\"column\" overflow=\"hidden\" clone>\n    <Container>\n      <Box padding={8}>\n        <Grid\n          container\n          alignItems=\"center\"\n          justify=\"center\"\n          spacing={4}\n        >\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"secondary\"\n              startIcon={<AddIcon />}\n              children={\"New Entry\"}\n              onClick={onClickNewEntry}\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              component={Link}\n              to={`/journal/${deptId}/reconcile`}\n              variant=\"contained\"\n              startIcon={<DoneAllIcon />}\n              children={\"Reconcile\"}\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              startIcon={<AssessmentIcon />}\n              children={\"Reports\"}\n            />\n          </Grid>\n          <Grid item>\n            <Button\n              component={Link}\n              to={`/journal/${deptId}`}\n              variant=\"contained\"\n              startIcon={<TableChartIcon />}\n              children={\"Journal\"}\n            />\n          </Grid>\n        </Grid>\n      </Box>\n      <Box flexGrow={1} overflow=\"auto\">\n        <Grid justify=\"center\" container spacing={2}>\n          <Grid item xs={12}>\n            <Typography align=\"center\" variant=\"h3\">{deptName}</Typography>\n            <Box color={colorMeter(total/budgetDec)}>\n              <Typography align=\"center\" variant=\"h4\">\n                  {`${totalRemaining} Remaining`}\n              </Typography>\n            </Box>\n            <Typography align=\"center\" variant=\"subtitle1\">\n              {`of ${budget}`}\n            </Typography>\n            <BudgetMeter spentPercentage={total/budgetDec} height={10} />\n          </Grid>\n          {Array.from(sudDeptReport).filter(d => d[0] !== deptId)\n            .map(([id, deptReportObj])=>\n          {\n\n            const {budget, spent, name} = deptReportObj as DeptReportObj;\n\n            return <Grid key={id} item xs={12} md={4} lg={3}>\n              <Card>\n                <CardHeader titleTypographyProps={{\n                  noWrap:true\n                }} title={name} />\n                <CardContent>{(()=>{\n\n                  if(budget === null) {\n\n                    return <Box color={spent > 0 ? red[900] : green[900]} clone>\n                      <Typography variant=\"h6\">\n                      {`Spent: ${numeral(Math.abs(spent)).format('$0,0.00')}`} \n                      </Typography>\n                    </Box>;\n\n                  }\n                  \n                  const totalRemaining = budget - spent;\n\n                  return <React.Fragment>\n                    <Box color={colorMeter(spent/budget, 900)} clone>\n                      <Typography variant=\"h6\">{\n                        `${numeral(totalRemaining).format('$0,0.00')} Remaining`\n                      }</ Typography>\n                    </Box>\n                    <Typography variant=\"body1\" >{\n                      `of ${numeral(budget).format('$0,0.00')}`\n                    }</Typography>\n                    <BudgetMeter spentPercentage={spent/budget} height={5}/>\n                  </React.Fragment>;\n\n\n                })()}</CardContent>\n              </Card>\n            </Grid>;\n\n          })}\n        </Grid>\n      </Box>\n      <AddEntry entryUpsertId={ADD_ENTRY_ID} fromDept={deptId} />;\n    </Container>\n  </Box>;\n\n}\n\nexport default Dashboard;","import React, {useCallback, useEffect, useState, useMemo} from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport {DeptsForNav_1Query as DeptsForNavQuery} from \"../apollo/graphTypes\";\n\nconst DEPTS_FOR_NAV = gql`\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n`;\n\nconst TopNav = function(props) {\n\n  const {loading, error, data} = useQuery<DeptsForNavQuery>(DEPTS_FOR_NAV);\n\n  const [value, setValue] = useState<string | null>(null);\n\n  const depts = (data?.departments || []);\n\n  type Department = typeof depts[0];\n\n  const {rootDepts, virtualRoots} = useMemo(() => {\n    \n    const rootDepts:Department[] = [];\n    const virtualRoots = new Set<string>();\n\n    for(const dept of depts) {\n      \n      if(dept.parent.__typename === \"Business\") {\n        rootDepts.push(dept);\n      }\n\n      if(dept.virtualRoot) {\n        virtualRoots.add(dept.id);\n      }\n\n    }\n\n    return {rootDepts, virtualRoots};\n\n  },[depts]);\n\n  const subDepts =  useMemo(() => {\n\n    const subDepts:Department[] = [];\n\n    if(value && virtualRoots.has(value)) {\n      \n      for(const dept of depts) {\n  \n        if(dept.parent.id === value) {\n  \n          subDepts.push(dept);\n  \n        }\n  \n      }\n\n    }\n\n    return subDepts;\n\n  }, [virtualRoots, value, depts]);\n\n  useEffect(() => { document.title = \"Select Department\"; });\n\n  const onChange = useCallback((event?) => {\n    setValue(event?.target?.value || null);\n  },[setValue]);\n  \n  if(loading) {\n    return <p>Loading...</p>;\n  } else if(error) {\n    return <p>{error.message}</p>;\n  }\n\n\n  const showSubDepts = subDepts.length > 0;\n\n  return <Box\n    flexGrow={1}\n    display=\"flex\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    flexDirection=\"column\"\n    clone\n  >\n    <Container>\n      <Box padding={4} clone>\n        <Typography align=\"center\" color=\"primary\" variant=\"h3\">\n          Select Department\n        </Typography>\n      </Box>\n      <Box minWidth=\"250px !important\" clone>\n        <FormControl variant=\"filled\">\n          <InputLabel>Department</InputLabel>\n          <Select\n            value={value} \n            onChange={onChange}\n            autoWidth\n          >{rootDepts.map((dept) => {\n            \n            const props = {\n              component:Link,\n              to:`/department/${dept.id}`,\n              key:dept.id,\n              value:dept.id,\n              children:dept.name\n            }  as any;\n\n            if(dept.virtualRoot) {\n              delete props.component;\n              delete props.to;\n            }\n\n            return <MenuItem {...props}/>;\n          \n          })}</Select>\n        </FormControl>\n      </Box>\n      {showSubDepts &&\n        <Box pt={2}>\n          <Box pt={2} minWidth=\"250px !important\" clone>\n            <FormControl variant=\"filled\">\n              <InputLabel>Sub Department</InputLabel>\n              <Select autoWidth>{subDepts.map((dept) => {\n                  const props = {\n                    component:Link,\n                    to:`/department/${dept.id}`,\n                    key:dept.id,\n                    value:dept.id,\n                    children:dept.name\n                  }  as any;\n      \n                  return <MenuItem {...props}/>;\n              })}</Select>\n            </FormControl>\n        </Box>\n      </Box>}\n        \n    </Container>\n   </Box>;\n\n}\n\nexport default TopNav;","import React from \"react\";\nimport {Route, Switch, useParams} from \"react-router-dom\";\n\n\nimport Journal from \"./components/Journal/Table/Journal\";\nimport {JournalMode} from \"./components/Journal/Table/Body\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\nimport TopNav from \"./components/TopNav\";\n\nconst DashBoardRender = (props) => {\n  const {id} = useParams();\n  return id ? <Dashboard deptId={id} /> : <div>Error: No Dept ID!</div>;\n}\n\nconst JournalViewRender = (props) => {\n  const {id} = useParams();\n  return  <Journal mode={JournalMode.View} deptId={id} />;\n}\n\nconst JournalReconcileRender = (props) => {\n  const {id} = useParams();\n  return  <Journal mode={JournalMode.Reconcile} deptId={id} />;\n}\n\nconst Routes = (props) => {\n\n  return <Switch>\n      <Route exact path=\"/\" component={TopNav}/>\n      <Route exact path=\"/department/:id\" component={DashBoardRender}/>\n      <Route exact path=\"/journal\" component={Journal}/>\n      <Route exact path=\"/journal/:id\" component={JournalViewRender}/>\n      <Route\n        exact\n        path=\"/journal/:id/reconcile\"\n        component={JournalReconcileRender}\n      />\n    </Switch>;\n\n}\n\nexport default Routes;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n    \nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n","import React, {Fragment} from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport {BrowserRouter as Router} from \"react-router-dom\";\n\nimport client from \"./apollo/apollo\";\nimport Routes from \"./Routes\";\nimport store from \"./redux/store\";\n\nexport default function App() {\n  return <Fragment>\n    <CssBaseline />\n    <Provider store={store}>\n      <ApolloProvider client={client}>\n        <Router>\n          <Box\n            position=\"fixed\"\n            top={0}\n            left={0}\n            height=\"100vh\"\n            width=\"100vw\"\n            overflow=\"hidden\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <Routes/>\n          </Box>\n\n        </Router>\n      </ApolloProvider>\n    </Provider>\n  </Fragment>;\n    \n}\n"],"sourceRoot":""}