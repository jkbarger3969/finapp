{"version":3,"sources":["apollo/inMemoryCache.ts","apollo/schema/upsertJournalEntry.gql.ts","apollo/graphTypes.ts","apollo/typeDefs.ts","apollo/resolvers.ts","apollo/link.ts","apollo/apollo.ts","components/Journal/Table/JournalEntries.gql.ts","components/Journal/constants.ts","components/Journal/Upsert/Refunds/submitAdd.ts","formik/utils.ts","components/Journal/Upsert/EntryFields/DateEntry.tsx","components/Journal/Upsert/EntryFields/Description.tsx","components/Journal/Upsert/EntryFields/Total.tsx","utils/transmutations.ts","components/Journal/Upsert/EntryFields/Reconcile.tsx","components/Journal/Upsert/upsertEntry.gql.ts","components/Journal/Upsert/EntryFields/PaymentMethod.tsx","components/Utils/Overlay.tsx","components/Utils/OverlayLoading.tsx","components/Journal/Upsert/Refunds/refunds.gql.ts","components/Journal/Upsert/Refunds/AddRefund.tsx","components/Journal/Upsert/Refunds/submitUpdate.ts","components/Journal/Upsert/Refunds/UpdateRefund.tsx","components/Journal/Upsert/Entries/submitAdd.ts","components/Journal/Upsert/EntryFields/Category.tsx","components/Journal/Upsert/EntryFields/Department.tsx","components/Journal/Upsert/EntryFields/Source.tsx","components/Journal/Upsert/EntryFields/Type.tsx","components/Journal/Upsert/Entries/AddEntry.tsx","components/Journal/Upsert/Entries/submitUpdate.ts","components/Journal/Upsert/Entries/UpdateEntry.tsx","components/Journal/Upsert/Entries/DeleteEntry.tsx","components/Journal/Upsert/Refunds/DeleteRefund.tsx","components/Journal/MaterialTable/Journal.tsx","components/Dashboard/ReportData.gql.ts","components/Dashboard/Dashboard.tsx","components/TopNav.tsx","Routes.tsx","redux/reducers/journalEntryUpserts.ts","redux/actionTypes/journalEntryUpsert.ts","redux/reducers/utils.ts","redux/actionTypes/tableRow.ts","redux/reducers/tableRows.ts","redux/actionTypes/journal.ts","redux/reducers/journal.ts","redux/reducers/root.ts","redux/store.ts","App.tsx","serviceWorker.js","index.js"],"names":["fragmentMatcher","IntrospectionFragmentMatcher","introspectionQueryResultData","inMemoryCache","InMemoryCache","addTypename","gql","CacheControlScope","FilterType","JournalEntrySourceType","JournalEntryType","Lc_JournalEntryUpsertSubmitStatus","Lc_JournalEntryUpsertType","SortDirection","resolvers","batchHttpLink","BatchHttpLink","uri","credentials","wsLink","WebSocketLink","window","location","host","options","reconnect","link","ApolloLink","from","onError","graphQLErrors","networkError","forEach","message","locations","path","console","error","log","split","query","def","getMainDefinition","kind","operation","ApolloClient","cache","typeDefs","JOURNAL_ENTRY_REFUND","JOURNAL_ENTRY_FRAGMENT","JOURNAL_ENTRIES","CHECK_ID","FormikStatusType","ADD_REFUND","submitAdd","client","id","values","a","payMethod","paymentMethod","value","length","paymentMethodAdd","parent","refId","name","active","variables","fields","date","description","trim","total","reconciled","mutate","mutation","createValueTransmutator","transMutator","inputValue","rest","useFormikStatus","useFormikContext","setStatusNative","setStatus","status","useCallback","args","Object","keys","some","key","inputProps","inputMode","keyboardButtonProps","tabIndex","dateValueTransmutator","isValid","formatISO","DateField","props","variant","inputVariant","autoFocus","disabled","maxDate","Date","minDate","isSubmitting","validate","dateStr","parseISO","format","useField","field","meta","helpers","touched","setValue","setTouched","initialInputValue","initialValue","initialFocusedDate","useMemo","InputProps","calOpen","useRef","onBlur","setTimeout","current","onOpen","onClose","onChange","min","formikStatus","dataPickerProps","type","FATAL_ERROR","helperText","undefined","animateYearScrolling","disableToolbar","disableFuture","margin","label","autoOk","placeholder","KeyboardButtonProps","utils","DateFnsUtils","Description","textFieldProps","event","target","trimLeft","TextField","step","totalValueTransmutator","number","fractionDigits","Fraction","Number","parseFloat","toFixed","num","n","den","d","getRational","Total","maxTotal","MAX_SAFE_INTEGER","minTotal","minTotalProp","Math","max","isNaN","numeral","startAdornment","InputAdornment","position","required","Reconcile","customProps","FormControlLabel","control","Checkbox","DEPT_ENTRY_OPT_FRAGMENT","CAT_ENTRY_OPT_FRAGMENT","SRC_ENTRY_PERSON_OPT_FRAGMENT","SRC_ENTRY_DEPT_OPT_FRAGMENT","SRC_ENTRY_BIZ_OPT_FRAGMENT","PAY_METHOD_ENTRY_OPT_FRAGMENT","PAY_METHOD_ENTRY_OPTS","payMethodValue","numValues","curValue","match","join","getOptionLabel","opt","renderTags","getTagProps","lastIndex","map","index","endAdornment","isLastIndex","isString","ChevronRight","fontSize","Box","display","flexDirection","alignItems","justifyContent","Chip","color","size","PaymentMethod","useState","hasFocus","setHasFocus","onBlurField","where","hasParent","eq","setFormikStatus","msg","useQuery","skip","loading","gqlError","data","paymentMethods","hasOptions","freeSolo","disableTextInput","renderInput","params","onFocus","persist","onInputChange","reason","trimStart","autoCompleteProps","multiple","open","autoSelect","Autocomplete","Overlay","theme","useTheme","opacity","boxProps","overflow","width","top","bottom","bgcolor","fade","palette","background","paper","OverlayLoading","children","CircularProgress","JOURNAL_FRAGMENT","GET_ENTRY_REFUND_INFO","NULLISH","Symbol","AddRefundDialog","entryId","onExitedCb","onExited","handleSubmit","resetForm","journalEntry","refunds","totalRefunds","reduce","deleted","ERROR","generalError","fatalError","journalEntryType","title","Credit","Dialog","disableBackdropClick","disableEscapeKeyDown","fullWidth","maxWidth","PaperProps","component","onSubmit","DialogTitle","style","main","zIndex","padding","DialogContentText","DialogContent","dividers","Grid","container","spacing","item","lg","sm","xs","DateEntry","justify","md","DialogActions","Button","startIcon","Add","Cancel","onClick","AddRefund","initialValues","useApolloClient","formikHelpers","initialStatus","enableReinitialize","UPDATE_REFUND","submitUpdate","iniValues","isEqual","iniPayMethod","slice","reverse","paymentMethodUpdate","UPDATE_REFUND_INI_STATE","UpdateRefundDialog","refundId","UpdateRefund","journalEntryRefund","ancestors","sort","b","push","ADD_ENTRY","srcType","source","src","Person","parsedName","parseName","sourceType","businessAdd","personAdd","first","firstName","last","lastName","Business","department","category","CAT_OPTS_QUERY","dept","Category","formikContext","disabledFromProps","entryType","catValue","onCompleted","validateField","catOpts","transmutationVal","useEffect","forcePopupIcon","DEPT_OPTS_QUERY","Department","fromParent","depts","deptOpts","setInputValue","__typename","deptValue","idDeptMap","Map","idDepts","has","parentDept","get","unshift","deptId","filter","Array","isArray","len","JSON","stringify","SRC_ENTRY_OPTS_QUERY","isFreeSoloOpt","personName","filterOptions","regex","RegExp","test","srcValue","Source","searchedName","isBiz","businesses","bizOpt","departments","deptOpt","set","people","srcValueIndex","formattedSrcStrs","str","namecase","formattedStr","charAt","toUpperCase","substring","toLowerCase","Type","toggleButtonGroupProps","exclusive","Promise","resolve","pl","clone","ToggleButtonGroup","ToggleButton","Tooltip","arrow","placement","Debit","FormControl","labelPlacement","FormHelperText","gridEntryResponsiveProps","DEPT_INI_VALUE","AddEntryDialog","submitForm","onClickAdd","onClickAddAndNew","preventDefault","Fragment","Queue","AddEntry","UPDATE_ENTRY","iniSrcType","iniSrc","UPDATE_ENTRY_INI_STATE","MAX_DATE","UpdateEntryDialog","UpdateEntry","ancestorDeptQueue","ancestor","bizAncestor","ancestorDepts","indexOf","DELETE_ENTRY","DeleteEntry","useMutation","deleteEntry","hasError","onDelete","then","Delete","JournalMode","DELETE_REFUND","DeleteRefund","deleteRefund","tableIcons","forwardRef","ref","AddBox","Check","Clear","DeleteOutline","DetailPanel","Edit","Export","SaveAlt","Filter","FilterList","FirstPage","LastPage","NextPage","PreviousPage","ChevronLeft","ResetSearch","Search","SortArrow","ArrowDownward","ThirdStateCheck","Remove","ViewColumn","entriesGen","entry","refund","ON_ENTRY_UPSERT","RECONCILE_ENTRY","RECONCILE_REFUND","Journal","journalTitle","mode","addEntryOpen","setAddEntryOpen","addEntryOnClose","updateEntryOpen","setUpdateEntryOpen","updateEntry","setUpdateEntry","updateEntryOnClose","updateEntryOnExited","setDeleteEntry","deleteEntryOnClose","addRefundOpen","setAddRefundOpen","addRefundToEntry","setAddRefundToEntry","addRefundOnClose","addRefundOnExited","updateRefundOpen","setUpdateRefundOpen","updateRefund","setUpdateRefund","updateRefundOnClose","updateRefundOnExited","setDeleteRefund","deleteRefundOnClose","reconcileEntry","reconcilingEntry","reconcileRefund","reconcilingRefund","fetchPolicy","subscribeToMore","isLoading","journalEntries","document","updateQuery","prev","subscriptionData","upsertEntry","journalEntryUpserted","every","journalEntriesFiltered","assign","columns","render","Done","customFilterAndSearch","rowData","momentDate","moment","search","toString","bizName","deptName","Fuse","threshold","useExtendedSearch","hidden","filtering","sorting","searchable","capitalCase","localization","toolbar","searchTooltip","nRowsSelected","rowStyle","green","red","maxBodyHeight","headerStyle","pageSize","pageSizeOptions","showTitle","selection","showSelectAllCheckbox","actions","icon","CheckCircle","tooltip","iconProps","all","isRefund","DeleteIcon","isCredit","AddCircle","isFreeAction","components","Body","TableBody","TableRow","colSpan","align","Typography","entries","filters","getTime","icons","GET_REPORT_DATA_DEPT_FRAGMENT","GET_REPORT_DATA_ENTRY_FRAGMENT","GET_REPORT_DATA","colorMeter","percentSpent","shade","orange","BudgetMeter","spentPercentage","height","grey","Dashboard","deptReport","subDeptBudgetAg","budget","amount","spent","descendants","subDept","subBudgetDec","deptReportObj","entryTotal","budgetDec","totalRemaining","spentToBudgetRatio","subDeptCards","card","Card","CardHeader","titleTypographyProps","noWrap","CardContent","abs","onClickAddEntry","Container","Link","to","flexGrow","DEPTS_FOR_NAV","TopNav","rootDepts","virtualRoots","Set","virtualRoot","add","subDepts","showSubDepts","minWidth","InputLabel","Select","autoWidth","MenuItem","pt","SubmitStatus","DashBoardRender","useParams","DEPARTMENT_NAME","JournalViewRender","View","JournalReconcileRender","Routes","exact","CREATE","CANCEL","CLEAR","SET_SUBMIT_ERROR","CLEAR_SUBMIT_ERROR","SET_DATE_INPUT","CLEAR_DATE_INPUT","SET_DATE_VALUE","CLEAR_DATE_VALUE","SET_DATE_ERROR","CLEAR_DATE_ERROR","SET_DEPT_INPUT","CLEAR_DEPT_INPUT","SET_DEPT_VALUE","CLEAR_DEPT_VALUE","SET_DEPT_ERROR","CLEAR_DEPT_ERROR","SET_DEPT_OPEN","SET_TYPE_VALUE","SET_TYPE_ERROR","CLEAR_TYPE_ERROR","SET_CAT_INPUT","CLEAR_CAT_INPUT","SET_CAT_VALUE","CLEAR_CAT_VALUE","SET_CAT_ERROR","CLEAR_CAT_ERROR","SET_CAT_OPEN","SET_SRC_TYPE","SET_SRC_INPUT","CLEAR_SRC_INPUT","SET_SRC_VALUE","CLEAR_SRC_VALUE","SET_SRC_ERROR","CLEAR_SRC_ERROR","SET_SRC_OPEN","SET_PAY_METHOD_VALUE","CLEAR_PAY_METHOD_VALUE","SET_PAY_METHOD_ERROR","CLEAR_PAY_METHOD_ERROR","SET_DSCRPT_VALUE","CLEAR_DSCRPT_VALUE","SET_TOTAL_INPUT","CLEAR_TOTAL_INPUT","SET_TOTAL_VALUE","CLEAR_TOTAL_VALUE","SET_TOTAL_ERROR","CLEAR_TOTAL_ERROR","SET_RECONCILED_VALUE","CLEAR_RECONCILED_VALUE","InputValue","nullValue","input","this","reduceOneById","state","action","idKey","reducer","i","newEntry","combineReducers","payload","fromDept","journalEntryUpsert","upsertId","submit","NotSubmitted","SET_INDEX","SET_DEFAULT_INDEX","SET_NAME","SET_DEFAULT_NAME","SET_WIDTH","SET_DEFAULT_WIDTH","COLLAPSE","EXPAND","HIDE","SHOW","RESTORE_DEFAULTS","TableCell","ini","rowId","collapsed","tableCell","defaultState","iterateCellByIndex","row","unIndexedCells","indexedCells","nextIndex","hasOwnProperty","cell","tableRow","curIndex","newIndex","newState","curCell","newCell","OPEN_PAB","CLOSE_PAB","pab","journal","pabs","pabId","curPAB","newPAB","root","journalEntryUpserts","tableRows","curRow","newRow","store","configureStore","App","CssBaseline","Boolean","hostname","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"4wBAOMA,EAAkB,IAAIC,IAA6B,CACvDC,iCAKaC,EAFO,IAAIC,IAAc,CAAEJ,kBAAiBK,aAAa,I,4xCCTzDC,ICwCHC,EAwBAC,EA4HAC,EAMAC,EA6EAC,EAMAC,EAoRAC,ECtiBmB,GFHhBP,IAAf,MGEeQ,EAFa,G,4CCItBC,EAAgB,IAAIC,IAAc,CACtCC,IAAK,WACLC,YAAa,gBAGTC,EAAS,IAAIC,IAAc,CAC/BH,IAAI,QAAD,OAAUI,OAAOC,SAASC,KAA1B,YACHC,QAAS,CACPC,WAAW,KAsBAC,EAlBFC,IAAWC,KAAK,CAC3BC,aAAQ,YAAsC,IAAnCC,EAAkC,EAAlCA,cAAeC,EAAmB,EAAnBA,aACpBD,GACFA,EAAcE,SAAQ,gBAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,UAAWC,EAAvB,EAAuBA,KAAvB,OACpBC,QAAQC,MAAR,oCAC+BJ,EAD/B,uBACqDC,EADrD,mBACyEC,OAGzEJ,GAAcK,QAAQE,IAAR,2BAAgCP,OAEpDJ,IAAWY,OAAM,YAAc,IAAZC,EAAW,EAAXA,MACXC,EAAMC,YAAkBF,GAC9B,MAAoB,wBAAbC,EAAIE,MACY,iBAAlBF,EAAIG,YACTzB,EAAQJ,KCzBG,MAAI8B,IAAa,CAC9BnB,OACAoB,QACAC,WACAjC,c,mjFJ+BUP,K,gBAAAA,E,mBAAAA,M,cAwBAC,K,kBAAAA,E,mBAAAA,M,cA4HAC,K,oBAAAA,E,wBAAAA,E,iBAAAA,M,cAMAC,K,gBAAAA,E,eAAAA,M,cA6EAC,K,6BAAAA,E,wBAAAA,E,uBAAAA,M,cAMAC,K,gBAAAA,E,WAAAA,M,cAoRAC,K,UAAAA,E,aAAAA,M,KKziBL,IAAMmC,GAAuB1C,IAAH,MAyBpB2C,GAAyB3C,IAAH,KAmE/B0C,IAGSE,GAAkB5C,IAAH,KAOxB2C,ICxGSE,ID2G0B7C,IAAH,KAMhC2C,IAGqC3C,IAAH,KAMlC2C,IC1HoB,4B,2iBC8BxB,ICVYG,GDUNC,GAAa/C,IAAH,KAkBZ0C,IA2DWM,GApDqC,uCAAG,WACrDC,EACAC,EACAC,GAHqD,yBAAAC,EAAA,+DAKR,WAC3C,IAAMC,EACJF,EAAOG,cAAcC,MAAMJ,EAAOG,cAAcC,MAAMC,OAAS,GAGjE,MAAyB,kBAAdH,EAKF,CACLC,cAAe,GACfG,iBAAkB,CAChBC,OAPYP,EAAOG,cAAcC,MACnCJ,EAAOG,cAAcC,MAAMC,OAAS,GACNN,GAM5BS,MAAON,EACPO,KAAMP,EACNQ,QAAQ,IAKP,CACLP,cAAeD,EAAUH,GACzBO,iBAAkB,MAvBuB,GAArCH,EAL6C,EAK7CA,cAAeG,EAL8B,EAK9BA,iBA2BjBK,EAAoE,CACxEZ,KACAa,OAAQ,CACNC,KAAMb,EAAOa,KAAKT,MAClBU,aAAa,UAAAd,EAAOc,mBAAP,eAAoBC,QAC7Bf,EAAOc,YAAYC,OACnB,KACJZ,gBACAa,MAAOhB,EAAOgB,MAAMZ,MACpBa,WAAU,UAAEjB,EAAOiB,kBAAT,QAAuB,MAEnCX,oBA3CmD,SA8C/CR,EAAOoB,OAAiC,CAC5CC,SAAUvB,GACVe,cAhDmD,2CAAH,0D,kFC/CvCS,GAA0B,SAKrCC,GALqC,OAMlC,SAACC,GAAD,2BAA6BC,EAA7B,iCAA6BA,EAA7B,wBACF,CACCD,aACAlB,MAAOiB,EAAY,WAAZ,GAAaC,GAAb,OAA4BC,Q,SAG3B5B,O,+BAAAA,I,iBAAAA,I,8BAAAA,Q,KAWL,IAAM6B,GAAkB,WAAqB,IAAD,EACFC,eAA5BC,EAD8B,EACzCC,UAA4BC,EADa,EACbA,OAE9BD,EAAYE,uBAChB,SAACC,GACKF,EAECE,IACDC,OAAOC,KAAKF,GAAMG,MAAK,SAACC,GAAD,OAASJ,EAAKI,KAASN,EAAOM,OAErDR,EAAgBI,GAETA,GACTJ,EAAgBI,KAGpB,CAACJ,EAAiBE,IAGpB,MAAO,QAACA,QAAD,IAACA,IAAU,KAAMD,IChCpBQ,GAAa,CACjBC,UAAW,WAGPC,GAAsB,CAC1BC,UAAW,GAGPC,GAAwBnB,IAC5B,WAA+D,IAAD,uBAA1DU,EAA0D,yBAA1DA,EAA0D,oBACrDjB,EAAeiB,EADsC,GAC/C1B,EAAS0B,EADsC,GAE5D,OAAIjB,GAAQ2B,aAAQ3B,GACX4B,aAAU5B,GAEZT,GAAS,MA2LLsC,GAtLG,SAChBC,GA+BI,IAAD,QAOCA,EALFC,QAASC,OAFR,MAEuB,SAFvB,IAOCF,EAJFG,iBAHC,WAOCH,EAHFI,gBAJC,WAOCJ,EAFFK,eALC,MAKS,IAAIC,KALb,EAMDC,EACEP,EADFO,QAGMC,EAAiB1B,eAAjB0B,aAEFC,EAAWvB,uBACf,SACEzB,GAEA,IAAMiD,IAAgB,OAALjD,QAAK,IAALA,OAAA,EAAAA,EAAOA,QAAS,IAAIW,OACrC,IAAIsC,EAUF,MAAO,mBATP,IAAMxC,EAAOyC,aAASD,GACtB,OAAKb,aAAQ3B,GAEFqC,GAAWrC,EAAOqC,EACrB,oBAAN,OAA2BK,aAAOL,EAAS,eAClCF,EAAUnC,EACb,mBAAN,OAA0B0C,aAAOP,EAAS,oBADrC,EAHE,iBAUb,CAACE,EAASF,IA7BT,EAgC4BQ,aAE7B,CACA/C,KAAM,OACN2C,aApCC,mBAgCIK,EAhCJ,KAgCWC,EAhCX,KAgCiBC,EAhCjB,KAuCGvD,EAAK,oBAAGqD,EAAMrD,aAAT,aAAG,EAAakB,kBAAhB,QAA8B,KACjC1C,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAyBF,EAAzBE,SAAUC,EAAeH,EAAfG,WAEZC,EAAiB,UAAGL,EAAKM,oBAAR,aAAG,EAAmB1C,WACvC2C,EAAqBC,mBACzB,kBACEH,GAAqBvB,aAAQuB,GACzBA,EACA,IAAId,OACV,CAACc,IAGGI,EAAaD,mBACjB,iBAAO,CACLpB,eAEF,CAACA,IAIGsB,EAAUC,kBAAO,GACjBC,EAASzC,uBACb,kBACE0C,YAAW,WACLH,EAAQI,SAGZV,GAAW,KACV,KACL,CAACA,EAAYM,IAETK,EAAS5C,uBAAY,kBAAOuC,EAAQI,SAAU,IAAO,CAACJ,IACtDM,EAAU7C,uBAAY,WAC1BuC,EAAQI,SAAU,EAClBF,MACC,CAACF,EAASE,IAEPK,EAAW9C,uBACf,SAAChB,EAAMT,GACLyD,EACEtB,GAEE1B,GAAQ2B,aAAQ3B,GAAQ+D,aAAI,CAAC,IAAI3B,KAAQpC,IAASA,EAClDT,MAIN,CAACyD,IAvFA,EA0FoBrC,KAAhBqD,EA1FJ,oBA4FGC,EAA2CZ,mBAC/C,iCACKT,EADL,CAEEV,SACEI,GACAJ,IACY,OAAZ8B,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAC1C5E,QACAxB,MAAOgF,KAAahF,EACpBqG,WAAYrB,EAAUhF,OAAQsG,EAC9BC,sBAAsB,EACtBC,gBAAgB,EAChBC,eAAe,EACfxC,eACAD,QAAS,SACTW,OAAQ,aACR+B,OAAQ,OACRC,MAAO,OACPtB,qBACAuB,QAAQ,EACRrB,aACAhC,cACAsD,YAAa,aACbC,oBAAqBrD,GACrBiC,SACAG,SACAC,UACAC,eAEF,CACEvE,EACA6D,EACAK,EACA1F,EACAiE,EACAsB,EACAhB,EACAM,EACAgB,EACAC,EACAC,EACAf,EACAb,EACA8B,IAIJ,OACE,kBAAC,KAAD,CAAyBc,MAAOC,YAC9B,kBAAC,KAAD,eACE5C,QAASA,GACJL,EACDmC,M,mBCxJGe,GAxDK,SAClBlD,GAaI,IAAD,IAMCA,EAJFG,iBAFC,WAMCH,EAHFI,gBAHC,WAMCJ,EAFFC,eAJC,MAIS,SAJT,EAKEkD,EALF,aAMCnD,EAND,sCAQ6Ba,aAAoC,CAClE/C,KAAM,gBATL,mBAQIgD,EARJ,KAQeI,EARf,KAQeA,SAIZc,EAAW9C,uBACf,SAACkE,GAAD,QAAgBlC,GAAc,OAALkC,QAAK,IAALA,GAAA,UAAAA,EAAOC,cAAP,mBAAe5F,aAAf,eAAsB6F,aAAc,QAC7D,CAACpC,IAGGM,EAAaD,mBACjB,iBAAO,CACLa,KAAM,OACNjC,eAEF,CAACA,IAtBA,EAyBoBtB,KAAhBqD,EAzBJ,oBA2BH,OACE,kBAACqB,GAAA,EAAD,iBACMJ,EACArC,EAFN,CAGEV,SAAUA,IAAwB,OAAZ8B,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAC9DL,SAAUA,EACVvE,MAAK,UAAEqD,EAAMrD,aAAR,QAAiB,GACtBwC,QAASA,EACT2C,MAAO,cACP9E,KAAM,cACN0D,WAAYA,M,+BCxCZhC,GAAa,CACjByC,IAAK,OACLuB,KAAM,QAGKC,GAAyBhF,IACpC,SAACE,GAAD,OCpByB,SACzB+E,GAEkC,IADlCC,EACiC,uDADhB,EACgB,EACN,IAAIC,MACV,kBAAXF,EACJG,OAAOC,WAAWJ,EAAOtF,QAAU,KACnCsF,GACFK,QAAQJ,IAJDK,EADsB,EACzBC,EAAWC,EADc,EACjBC,EAOhB,MAAO,CAAEH,MAAKE,ODSUE,CAAYzF,EAAY,MA+HnC0F,GA5HD,SACZrE,GAqBI,IAAD,MAQCA,EANFG,iBAFC,WAQCH,EALFI,gBAHC,WAQCJ,EAJFC,eAJC,MAIS,SAJT,IAQCD,EAHFsE,gBALC,MAKUT,OAAOU,iBALjB,IAQCvE,EAFFwE,SAAUC,OANT,MAMwB,EANxB,EAOEtB,EAPF,aAQCnD,EARD,0DAUGwE,EAAWE,KAAKC,IAAI,IAAMF,GAE1BhE,EAAWvB,uBACf,SAACzB,GACC,IAAMkB,IAAmB,OAALlB,QAAK,IAALA,OAAA,EAAAA,EAAOkB,aAAc,IAAIP,OAE7C,GAAmB,KAAfO,EACF,MAAO,iBAGT,IAAMqF,EACkB,kBAAfrF,EACHkF,OAAOC,WAAWnF,GAClBA,EAEN,OAAIkF,OAAOe,MAAMZ,GACR,iBACEA,EAAMM,EACT,0BAAN,OAAiCO,IAAQP,GAAU1D,OAAO,YACzC,IAARoD,EACF,cACEA,EAAMQ,EACT,uBAAN,OAA8BK,IAAQL,GAAU5D,OAAO,iBADlD,IAIT,CAAC4D,EAAUF,IAnCV,EAsCiCzD,aAAiC,CACnE/C,KAAM,QACN2C,aAxCC,mBAsCIK,EAtCJ,KAsCWC,EAtCX,KAsCmBG,EAtCnB,KAsCmBA,SAKhBvC,EAAU,oBAAGmC,EAAMrD,aAAT,aAAG,EAAakB,kBAAhB,QAA8B,GAEtC1C,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QAETO,EAAaD,mBACjB,iBAAO,CACLa,KAAM,SACNjC,YACA2E,eAAgB,kBAACC,GAAA,EAAD,CAAgBC,SAAS,SAAzB,QAElB,CAAC7E,IAGG6B,EAAW9C,uBACf,SAACkE,GAAW,IAAD,EACTlC,EAASuC,IAA4B,OAALL,QAAK,IAALA,GAAA,UAAAA,EAAOC,cAAP,eAAe5F,QAAS,OAE1D,CAACyD,IAGGoB,EAAaf,mBAAQ,WACzB,OAAIN,GAAWhF,EACNA,EACEqI,IAAaT,OAAOU,kBAAoBC,EAAW,IACtD,OAAN,OAAcK,IAAQP,GAAU1D,OAAO,WAAvC,kBAA2DiE,IACzDL,GACA5D,OAAO,YACA0D,IAAaT,OAAOU,iBACvB,OAAN,OAAcM,IAAQP,GAAU1D,OAAO,YAC9B4D,EAAW,IACd,OAAN,OAAcK,IAAQL,GAAU5D,OAAO,YAEhC,KAER,CAACK,EAAShF,EAAOqI,EAAUE,IA7E3B,EA+EoB3F,KAAhBqD,EA/EJ,oBAiFH,OACE,kBAACqB,GAAA,EAAD,iBACMJ,EACArC,EAFN,CAGEV,SAAUA,IAAwB,OAAZ8B,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAC9DD,KAAK,SACL3E,MAAOkB,EACP1C,MAAOgF,KAAahF,EACpBqG,WAAYA,EACZQ,YAAa,OACbF,MAAO,QACP9E,KAAM,QACNmH,UAAQ,EACRhF,QAASA,EACTT,WAAYA,GACZgC,WAAYA,EACZQ,SAAUA,M,oBEtIVxC,GAAa,CACjB4C,KAAM,YA2DO8C,GAxDG,SAChBlF,GAiBI,IAAD,EACK4C,EAA4C5C,EAA5C4C,MADL,EACiD5C,EAArCI,gBADZ,SACiC+E,EADjC,aACiDnF,EADjD,wBAGaa,aAA8B,CAC5C/C,KAAM,aACNsE,KAAM,aAFDtB,EAHJ,oBAQGrD,EAAK,UAAGqD,EAAMrD,aAAT,SARR,EAUoBoB,KAAhBqD,EAVJ,oBAYH,OAAIU,EAEA,kBAACwC,GAAA,EAAD,iBACMD,EACCrE,EAFP,CAGErD,MAAOA,EACP2C,SACEA,IAAwB,OAAZ8B,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAEtDO,MAAM,YACNyC,QAAS,kBAACC,GAAA,EAAD,CAAU9F,WAAYA,QAMnC,kBAAC8F,GAAA,EAAD,iBACOH,EACDrE,EAFN,CAGErD,MAAOA,EACP2C,SAAUA,IAAwB,OAAZ8B,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAC9D7C,WAAYA,O,8iDC/DX,IAAM+F,GAA0BrL,IAAH,MAiBvBsL,GAAyBtL,IAAH,MAatBuL,GAAgCvL,IAAH,MAW7BwL,GAA8BxL,IAAH,MAkB3ByL,GAA6BzL,IAAH,KAanCwL,IAGSE,GAAgC1L,IAAH,M,gPC/C1C,IAAM2L,GAAwB3L,IAAH,KAMvB0L,IAKEnF,GAAW,SAACqF,GAAoD,IAAD,EASpC,EARzBrI,EAAK,iBAAGqI,QAAH,IAAGA,OAAH,EAAGA,EAAgBrI,aAAnB,QAA4B,GACjCsI,EAAYtI,EAAMC,OAClBsI,EAAWvI,EAAMsI,EAAY,GAC7BnI,EAASH,EAAMsI,EAAY,GAEjC,QAAiBxD,IAAbyD,EACF,MAAO,kBACF,GAAwB,kBAAbA,GAChB,IAAU,OAANpI,QAAM,IAANA,OAAA,EAAAA,EAAQR,MAAOL,MACG,UAACiJ,EAASC,MAAM,iBAAhB,QAA6B,IAAIC,KAAK,IAExD,MAAO,wBAGN,GAAIF,EAAS5I,KAAOL,GACzB,MAAO,oBAILoJ,GAAsD,SAACC,GAC3D,MAAsB,kBAARA,EAAmBA,EAAMA,EAAItI,MAGvCuI,GAA8C,SAAChJ,EAAQiJ,GAC3D,IAAMC,EAAYlJ,EAAOK,OAAS,EAClC,OAAOL,EAAOmJ,KAAI,SAAC/I,EAAcgJ,GAC/B,IAOI7D,EAWA8D,EAlBEC,EAAcJ,IAAcE,EADe,EAEvBH,EAAY,CAAEG,UAAhClH,EAFyC,EAEzCA,IAAQS,EAFiC,wBAI3CpC,EAASP,EAAOoJ,EAAQ,GAExBG,EAA4B,kBAAVnJ,EAGxB,cAAQG,QAAR,IAAQA,OAAR,EAAQA,EAAQR,IACd,KAAKL,GACH6F,EACE,OACCgE,EAAWnJ,EAASA,EAAoCK,MAC3D,MACF,QACE8E,EAAQuD,GAAe1I,GAI3B,GAAKkJ,GAEE,IAAKC,EAEV,OAASnJ,EAAoCL,IAC3C,KAAKL,GACH2J,EAAe,2CALnBA,EAAe,kBAACG,GAAA,EAAD,CAAcC,SAAS,UAUxC,OACE,kBAACC,GAAA,EAAD,CACExH,IAAKA,EACLyH,QAAQ,OACRC,cAAc,MACdC,WAAW,SACXC,eAAe,cAEf,kBAACC,GAAA,EAAD,eACEC,MAAOV,EAAc,UAAY,UACjC1G,QAAS0G,EAAc,UAAY,WACnC/D,MAAOA,EACP0E,KAAK,UACDtH,EALN,CAMEI,UAAWuG,KACV,IACFD,OA4PMa,GAtPO,SACpBvH,GAaI,IAAD,YAC6CA,EAAxCI,gBADL,SAC0B+C,EAD1B,aAC6CnD,EAD7C,gBAG6BwH,oBAAS,GAHtC,mBAGIC,EAHJ,KAGcC,EAHd,OAK4B7G,aAAyC,CACtE/C,KAAM,gBACN2C,cAPC,mBAKIK,EALJ,KAKWC,EALX,KAKiBC,EALjB,KAUG2G,EAAc7G,EAAMa,OACpBlE,EAAK,oBAAGqD,EAAMrD,aAAT,aAAG,EAAaA,aAAhB,QAAyB,GAC9BkB,EAAU,oBAAGmC,EAAMrD,aAAT,aAAG,EAAakB,kBAAhB,QAA8B,GACtC1C,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAaF,EAAbE,SAEF8E,EAAQ,UAAGvI,EAAMA,EAAMC,OAAS,UAAxB,QAA8B,KAEtCM,EAAYuD,mBAChB,kBACe,OAAbyE,EACI,CACE4B,MAAO,CACLC,WAAW,IAGf,CACED,MAAO,CACLhK,OAAQ,CACNkK,GAAK9B,EAAuC5I,QAIxD,CAAC4I,IAjCA,EAoCqCnH,KApCrC,mBAoCIqD,EApCJ,KAoCkB6F,EApClB,KAsCGtM,EAAUyD,uBAQd,SAACjD,GACM8L,EAAgB,CACnBC,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,gBAE3B,CAAC0F,IAnDA,EAsDwCE,YAGzCpC,GAAuB,CACvBqC,KAA0B,kBAAblC,EACbhI,YACAvC,YANM0M,EAtDL,EAsDKA,QAAgBC,EAtDrB,EAsDcnM,MAAiBoM,EAtD/B,EAsD+BA,KAS5BjN,EAAUmG,mBACd,kBACE,OAAC8G,QAAD,IAACA,OAAD,EAACA,EAAMC,iBACa,kBAAbtC,IACC,OAARA,QAAQ,IAARA,OAAA,EAAAA,EAAU5I,MAAOL,GAEbsL,EAAKC,eADL,KAEN,CAACD,EAAMrC,IAGHuC,EAAanN,EAAQsC,OAAS,EAE9B8K,EAAWjH,mBACf,wBAAM,UAACyE,SAAD,eAAgD5I,MAAOL,KAC7D,CAACiJ,IAGGyC,EAAmBlH,mBAAQ,kBAAOgH,IAAeC,IAAU,CAC/DD,EACAC,IAGI5F,EAAQrB,mBAAQ,WAAO,IAAD,EAC1B,MACsB,kBAAbyE,IACP,UAACA,SAAD,eAAgD5I,MAAOL,GAEhD,UAGF,mBACN,CAACiJ,IAEExE,EAAaD,mBAAQ,WAAO,IAAD,EAC/B,OAAI,UAACyE,SAAD,eAAgD5I,MAAOL,GAClD,CACLqF,KAAM,UAIH,KACN,CAAC4D,IAEExG,EAAa+B,mBAAQ,WAAO,IAAD,EAC/B,OAAI,UAACyE,SAAD,eAAgD5I,MAAOL,GAClD,CACLkF,IAAK,IACLuB,KAAM,KAIH,KACN,CAACwC,IAEE0C,EAAcxJ,uBAClB,SAACyJ,GAA+B,IAAD,IAC7BA,EAAOnH,WAAP,yBACMmH,EAAOnH,kBADb,QAC2B,GAD3B,GAEKA,GAGLmH,EAAOnJ,WAAP,yBACMmJ,EAAOnJ,kBADb,QAC2B,GAD3B,GAEKA,GAGL,IAAM8C,EACA8F,EACKA,EAASvM,QACPoF,EACFhF,OADF,EAKT,OACE,kBAACsH,GAAA,EAAD,iBACMJ,EACAwF,EAFN,CAGE1I,QAAUkD,EAAelD,SAAW,SACpChE,MAAQgF,KAAahF,KAAYmM,EACjC9F,WAAYA,EACZxE,KAAK,gBACL8E,MAAOA,OAIb,CAACO,EAAgBlC,EAASmH,EAAUnM,EAAO2G,EAAOpB,EAAYhC,IAG1DoJ,EAAU1J,uBAAY,SAACkE,GAAD,OAAYsE,GAAY,KAAO,CAACA,IACtD/F,EAASzC,uBACb,SAACkE,GACCsE,GAAY,GAEZtE,EAAMyF,UACNjH,YAAW,WAAW+F,EAAYvE,KAAQ,KAE5C,CAACsE,EAAaC,IAGV3F,EAAW9C,uBACf,SAACkE,EAAO3F,GACNyD,EAAS,CAAEvC,aAAYlB,YAEzB,CAACyD,EAAUvC,IAGPmK,EAAgB5J,uBAGpB,SAACkE,EAAOzE,EAAoBoK,GAC1BpK,GAAcA,GAAc,IAAIqK,YAC3BP,GACHvH,EAAS,CAAEvC,aAAYlB,YAG3B,CAACyD,EAAUzD,EAAOgL,IAGdQ,EAAoB1H,mBACxB,iBAAO,CACL9D,QACA2C,WACIgI,GACFD,IACY,OAAZjG,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,aACxCjC,EACF8I,UAAU,EACV9N,UACAsN,cACArC,cACAmC,WACArC,kBACAnE,WACA8G,gBACAnK,WAAY8J,EAAmB,GAAK9J,EACpCiK,UACAjH,SACAwH,KACE1B,GACAc,IACY,OAAZrG,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAC1C8F,UACAiB,YAAY,EACZtL,KAAM,mBAER,CACE1C,EACAqC,EACAiL,EACAF,EACAxG,EACA8G,EACAnK,EACA8J,EACAG,EACAjH,EACA8F,EACAc,EACAJ,EACAC,EACAhI,EACA8B,IAIJ,OAAO,kBAACmH,GAAA,EAAiBJ,I,oBC5TZK,GA3CC,SACdtJ,GAsBA,IAAMuJ,EAAQC,eADX,EAGqCxJ,EAAhCyJ,eAHL,MAGe,IAHf,EAGwBC,EAHxB,aAGqC1J,EAHrC,aAKH,OACE,kBAAC+G,GAAA,EAAD,iBACM2C,EADN,CAEEC,SAAS,OACT3E,SAAS,WACTgC,QAAQ,OACRE,WAAW,SACXC,eAAe,SACfyC,MAAM,OACNC,IAAI,MACJC,OAAO,MACPC,QAASC,gBAAKT,EAAMU,QAAQC,WAAWC,MAAOV,OCjCrCW,GAJQ,SAACpK,GACtB,OAAO,kBAAC,GAAD,iBAAaA,EAAb,CAAoBqK,SAAU,kBAACC,GAAA,EAAD,U,4UCJhC,IAAMC,GAAmBrQ,IAAH,M,oMCwC7B,IAAMsQ,GAAwBtQ,IAAH,KAMvBqQ,IAGEE,GAAUC,SAUVC,GAAkB,SACtB3K,GAGI,IAAD,QACK4K,EAA+D5K,EAA/D4K,QAASzB,EAAsDnJ,EAAtDmJ,KAAMpH,EAAgD/B,EAAhD+B,QAAmB8I,EAA6B7K,EAAvC8K,SAAsBC,EAAiB/K,EAAjB+K,aADnD,EAG0CjM,eAArCkM,EAHL,EAGKA,UAAWxK,EAHhB,EAGgBA,aAAcX,EAH9B,EAG8BA,QAH9B,EAKqChB,KALrC,mBAKIqD,EALJ,KAKkB6F,EALlB,KAOGtM,EAAUyD,uBAKd,SAACjD,GAAD,OACE8L,EAAgB,CACdC,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,gBAE3B,CAAC0F,IAjBA,EAoB8BE,YAG/BuC,GAAuB,CACvBtC,MAAO0C,EACP5M,UAAW,CAAEZ,GAAIwN,GACjBnP,YANM0M,EApBL,EAoBKA,QAASlM,EApBd,EAoBcA,MAAOoM,EApBrB,EAoBqBA,KASlBhK,EAAK,OAAGgK,QAAH,IAAGA,GAAH,UAAGA,EAAM4C,oBAAT,aAAG,EAAoB5M,MAC5B6M,GAAc,OAAJ7C,QAAI,IAAJA,GAAA,UAAAA,EAAM4C,oBAAN,eAAoBC,UAAW,GACzC5G,EAAW/C,mBAAQ,WACvB,GAAIlD,EAAO,CACT,IAAM8M,EAAeD,EAAQE,QAC3B,SAACD,EAAD,OAAiBE,EAAjB,EAAiBA,QAAShN,EAA1B,EAA0BA,MAA1B,OACEgN,EAAUF,EAAeA,EAAe9M,EAAM2F,IAAM3F,EAAM6F,MAC5D,GAEF,OAAO7F,EAAM2F,IAAM3F,EAAM6F,IAAMiH,EAEjC,OAAOtH,OAAOU,mBACb,CAAClG,EAAO6M,IAELhN,EAAI,OAAGmK,QAAH,IAAGA,GAAH,UAAGA,EAAM4C,oBAAT,aAAG,EAAoB/M,KAC3BqC,EAAUgB,mBACd,kBAAOrD,EAAO,IAAIoC,KAAKpC,QAAQqE,IAC/B,CAACrE,IAGG4M,EAAW5L,uBAAY,WAC3B2L,IACAG,IACAjD,EAAgB,QACf,CAACiD,EAAWH,EAAY9C,IArDxB,EAuDgCxG,mBAEjC,WACA,OACEW,GACCA,EAAaE,OAASpF,GAAiBqF,aACtCH,EAAaE,OAASpF,GAAiBsO,MAOpC,CAAC,KAAM,MALL,CACLpJ,EAAa8F,IACb9F,EAAaE,OAASpF,GAAiBqF,eAI1C,CAACH,IArED,mBAuDIqJ,EAvDJ,KAuDkBC,EAvDlB,KAuEGC,EAAgB,OAAGpD,QAAH,IAAGA,GAAH,UAAGA,EAAM4C,oBAAT,aAAG,EAAoB7I,KACvCsJ,EAAQnK,mBAAQ,WACpB,IAAMmK,EACHvD,GAAYlM,IAAS,OAACwP,QAAD,IAACA,IAAoBhB,MAAaA,GAIpD,SAJJ,UAEMgB,IAAqBnR,EAAiBqR,OAAS,OAAS,MAF9D,WAMF,OAAIH,EACK,cACErD,EACH,WAAN,OAAkBuD,EAAlB,OACSlL,EACH,cAAN,OAAqBkL,GAEhBA,IACN,CAACvD,EAASlM,EAAOwP,EAAkBD,EAAYhL,IAE5C+I,EAAQC,eAEd,OACE,kBAACoC,GAAA,EAAD,CACEzC,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACVe,qBAAsBrL,EACtBsL,qBAAsBtL,EACtBuL,WAAS,EACTC,SAAS,KACTC,WACE,CACEC,UAAW,OACXC,SAAUpB,IAId,kBAACqB,GAAA,EAAD,CACEC,MAAOd,EAAe,CAAElE,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAE3DmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,aACVmD,GAAW3H,KAAkB+K,GAC7B,kBAAC,GAAD,CAAgBgB,OAAO,YAEtBhB,GAAgBC,GACjB,kBAAC,GAAD,CAAS/B,QAAS,IAAM8C,OAAO,QAAQC,QAAS,GAC9C,kBAACC,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,IAGtC,kBAACmB,GAAA,EAAD,CAAeC,UAAQ,KAClBpB,IAAiBC,GAClB,kBAACiB,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,GAEpC,kBAACqB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACvB,kBAACF,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAACC,GAAD,CACE5M,QAASA,EACTH,SAAU+H,GAAW3H,EACrBuL,WAAS,KAGb,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CAAa9M,SAAU+H,GAAW3H,EAAcuL,WAAS,KAE3D,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CAAe9M,SAAU+H,GAAW3H,EAAcuL,WAAS,KAE7D,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CACE9M,SAAU+H,GAAW3H,EACrBuL,WAAS,EACTzH,SAAUA,KAGd,kBAACsI,GAAA,EAAD,CACEG,MAAI,EACJF,WAAS,EACTO,QAAQ,SACRlG,WAAW,aACX8F,GAAI,EACJK,GAAI,EACJJ,GAAI,IAEJ,kBAAC,GAAD,CAAW7M,SAAU+H,GAAW3H,EAAcoC,OAAK,QAK3D,kBAAC0K,GAAA,EAAD,MACI9B,GACA,kBAAC+B,GAAA,EAAD,CACEnN,SAAU+H,GAAW3H,IAAiBX,EACtCuC,KAAK,SACLoL,UAAW,kBAACC,GAAA,EAAD,MACXpG,MAAM,UACNpH,QAAQ,aALV,OAUF,kBAACsN,GAAA,EAAD,CACEnN,SAAU+H,GAAW3H,EACrB6G,MAAOmE,EAAa,UAAY,UAChCgC,WAAYhC,GAAc,kBAACkC,GAAA,EAAD,MAC1BC,QAAS5L,GAERyJ,EAAa,KAAO,aAsDhBoC,GA/CG,SAAC5N,GAA2B,IACpC4K,EAAqC5K,EAArC4K,QAASzB,EAA4BnJ,EAA5BmJ,KAAMpH,EAAsB/B,EAAtB+B,QAAS+I,EAAa9K,EAAb8K,SAE1B+C,EAAgBtM,mBAA4B,iBAAO,KAAK,IAExDpE,EAAS2Q,cACT3B,EAAWjN,sBAAW,uCAC1B,WAAO7B,EAAQ0Q,GAAf,eAAAzQ,EAAA,sEAEIyQ,EAAc/O,UAAU,MAF5B,SAGU9B,GAAUC,EAAQyN,GAAW,GAAIvN,EAAQ0Q,GAHnD,OAIIhM,IAJJ,gDAMIgM,EAAc/O,UAAU,CACtBgJ,IAAG,UAAE,KAAMnM,eAAR,wBACHuG,KAAMpF,GAAiBsO,QAR7B,yDAD0B,wDAa1B,CAACnO,EAAQyN,EAAS7I,IAGdsI,EAAWnL,uBACf,SAACc,GAAD,OACE,kBAAC,GAAD,CACE4K,QAASA,EACTzB,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACVC,aAAc/K,EAAM+K,iBAGxB,CAACH,EAASzB,EAAMpH,EAAS+I,IAG3B,OACE,kBAAC,KAAD,CACE+C,cAAeA,EACfG,cAAe,KAEfC,oBAAoB,EACpB9B,SAAUA,EACV9B,SAAUA,K,sjBCzPhB,IAAM6D,GAAgBhU,IAAH,KAoBf0C,IAqHWuR,GA7GwC,uCAAG,WACxDhR,EACAiR,EACAhR,EACAC,GAJwD,mCAAAC,EAAA,6DAOlDY,EAAOmQ,aAAQD,EAAUlQ,KAAKS,WAAYtB,EAAOa,KAAKS,YACxD,KACAtB,EAAOa,KAAKT,MAGVU,EACJd,EAAOc,cAAgBiQ,EAAUjQ,YAAjC,oBACId,EAAOc,mBADX,aACI,EAAoBC,cADxB,QACkC,GAC9B,KAGAC,EACJhB,EAAOgB,MAAMZ,MAAMuG,IAAM3G,EAAOgB,MAAMZ,MAAMyG,MAC5CkK,EAAU/P,MAAMZ,MAAMuG,IAAMoK,EAAU/P,MAAMZ,MAAMyG,IAC9C,KACA7G,EAAOgB,MAAMZ,MAGba,EACJjB,EAAOiB,aAAe8P,EAAU9P,WAAa,KAAOjB,EAAOiB,WA1BL,EA6BU,WAChE,IAAMgQ,EACJF,EAAU5Q,cAAcC,MAAM2Q,EAAU5Q,cAAcC,MAAMC,OAAS,GAFD,EAI1CL,EAAOG,cAAcC,MAC9C8Q,OAAO,GACPC,UANmE,mBAI/DjR,EAJ+D,KAIpDK,EAJoD,KAYtE,MAAyB,kBAAdL,EAEL+Q,EAAa1Q,QAAU0Q,EAAa1Q,OAAOR,KAAOL,GAC7C,CACLS,cAAe,KACfG,iBAAkB,KAClB8Q,oBAAqB,CACnBrR,GAAIkR,EAAalR,GACjBa,OAAQ,CACNF,OAAQ,KACRF,MAAON,EACPO,KAAMP,KAOL,CACLC,cAAe,KACfG,iBAAkB,CAChBC,OAAQA,EAAOR,GACfS,MAAON,EACPO,KAAMP,EACNQ,QAAQ,GAEV0Q,oBAAqB,MAIhBlR,EAAUH,KAAOkR,EAAalR,GAChC,CACLI,cAAeD,EAAUH,GACzBO,iBAAkB,KAClB8Q,oBAAqB,MAIlB,CACLjR,cAAe,KACfG,iBAAkB,KAClB8Q,oBAAqB,MArDyC,GAA1DjR,EA7BgD,EA6BhDA,cAAeG,EA7BiC,EA6BjCA,iBAAkB8Q,EA7Be,EA6BfA,oBAyDnCzQ,EAIF,CACFZ,KACAa,OAAQ,CACNC,OACAC,cACAE,QACAC,aACAd,iBAEFG,mBACA8Q,uBApGsD,SAuGlDtR,EAAOoB,OAAuC,CAClDC,SAAU0P,GACVlQ,cAzGsD,2CAAH,4D,kiBCzBvD,IAAM0Q,GAA0BxU,IAAH,KAuBzBqQ,GACA3E,IAGE+I,GAAqB,SACzB3O,GAKI,IAEF4O,EAOE5O,EAPF4O,SACAzF,EAMEnJ,EANFmJ,KACApH,EAKE/B,EALF+B,QACU8I,EAIR7K,EAJF8K,SACAG,EAGEjL,EAHFiL,aACA9C,EAEEnI,EAFFmI,QACA4C,EACE/K,EADF+K,aARC,EAW0CjM,eAArCkM,EAXL,EAWKA,UAAWxK,EAXhB,EAWgBA,aAAcX,EAX9B,EAW8BA,QAX9B,EAaqChB,KAbrC,mBAaIqD,EAbJ,KAakB6F,EAblB,KAeG1J,EAAK,OAAG4M,QAAH,IAAGA,OAAH,EAAGA,EAAc5M,MACtB6M,GAAsB,OAAZD,QAAY,IAAZA,OAAA,EAAAA,EAAcC,UAAW,GACnC5G,EAAW/C,mBAAQ,WACvB,GAAIlD,EAAO,CACT,IAAM8M,EAAeD,EAAQE,QAC3B,SAACD,EAAD,OAAiB/N,EAAjB,EAAiBA,GAAIiO,EAArB,EAAqBA,QAAShN,EAA9B,EAA8BA,MAA9B,OAEEgN,GAAWjO,IAAOwR,EACdzD,EACAA,EAAe9M,EAAM2F,IAAM3F,EAAM6F,MACvC,GAEF,OAAO7F,EAAM2F,IAAM3F,EAAM6F,IAAMiH,EAEjC,OAAOtH,OAAOU,mBACb,CAAClG,EAAO6M,EAAS0D,IAEd1Q,EAAI,OAAG+M,QAAH,IAAGA,OAAH,EAAGA,EAAc/M,KACrBqC,EAAUgB,mBACd,kBAAOrD,EAAO,IAAIoC,KAAKpC,QAAQqE,IAC/B,CAACrE,IAGG4M,EAAW5L,uBAAY,WAC3B2L,IACAG,IACAjD,EAAgB,QACf,CAACiD,EAAWH,EAAY9C,IA1CxB,EA4CgCxG,mBAEjC,WACA,OACEW,GACCA,EAAaE,OAASpF,GAAiBqF,aACtCH,EAAaE,OAASpF,GAAiBsO,MAOpC,CAAC,KAAM,MALL,CACLpJ,EAAa8F,IACb9F,EAAaE,OAASpF,GAAiBqF,eAI1C,CAACH,IA1DD,mBA4CIqJ,EA5CJ,KA4CkBC,EA5ClB,KA4DGE,EAAQnK,mBAAQ,WACpB,IAAMmK,EAAQ,gBAEd,OAAIF,EACK,cACErD,EACH,WAAN,OAAkBuD,EAAlB,OACSlL,EACH,cAAN,OAAqBkL,GAEhBA,IACN,CAACvD,EAASqD,EAAYhL,IAEnB+I,EAAQC,eAEd,OACE,kBAACoC,GAAA,EAAD,CACEzC,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACVe,qBAAsBrL,EACtBsL,qBAAsBtL,EACtBuL,WAAS,EACTC,SAAS,KACTC,WACE,CACEC,UAAW,OACXC,SAAUpB,IAMd,kBAACqB,GAAA,EAAD,CACEC,MAAOd,EAAe,CAAElE,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAE3DmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,aACVmD,GAAW3H,KAAkB+K,GAC7B,kBAAC,GAAD,CAAgBgB,OAAO,YAEtBhB,GAAgBC,GACjB,kBAAC,GAAD,CAAS/B,QAAS,IAAM8C,OAAO,QAAQC,QAAS,GAC9C,kBAACC,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,IAGtC,kBAACmB,GAAA,EAAD,CAAeC,UAAQ,KAClBpB,IAAiBC,GAClB,kBAACiB,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,GAEpC,kBAACqB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACvB,kBAACF,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAACC,GAAD,CACE5M,QAASA,EACTH,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CACE9M,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CACE9M,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,EAAGC,GAAI,EAAGC,GAAI,IAC3B,kBAAC,GAAD,CACE9M,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,EACTzH,SAAUA,KAGd,kBAACsI,GAAA,EAAD,CACEG,MAAI,EACJF,WAAS,EACTO,QAAQ,SACRlG,WAAW,aACX8F,GAAI,EACJK,GAAI,EACJJ,GAAI,IAEJ,kBAAC,GAAD,CACE7M,SAAU+H,GAAW3H,KAAkBgL,EACvC5I,OAAK,QAMf,kBAAC0K,GAAA,EAAD,MACI9B,GACA,kBAAC+B,GAAA,EAAD,CACEnN,SAAU+H,GAAW3H,IAAiBX,EACtCuC,KAAK,SACLoL,UAAW,kBAACC,GAAA,EAAD,MACXpG,MAAM,UACNpH,QAAQ,aALV,UAUF,kBAACsN,GAAA,EAAD,CACEnN,SAAU+H,GAAW3H,KAAkBgL,EACvCnE,MAAOmE,EAAa,UAAY,UAChCgC,WAAYhC,GAAc,kBAACkC,GAAA,EAAD,MAC1BC,QAAS5L,GAERyJ,EAAa,KAAO,aAyJhBqD,GAlJM,SAAC7O,GAA8B,IAC1C4K,EAA+C5K,EAA/C4K,QAASgE,EAAsC5O,EAAtC4O,SAAUzF,EAA4BnJ,EAA5BmJ,KAAMpH,EAAsB/B,EAAtB+B,QAAS+I,EAAa9K,EAAb8K,SADO,EAGhB7C,YAG/ByG,GAAyB,CACzBxG,MAAO0C,EACP5M,UAAW,CACT4M,QAASA,EACTgE,SAAUA,KAPNzG,EAHyC,EAGzCA,QAASlM,EAHgC,EAGhCA,MAAOoM,EAHyB,EAGzBA,KAWlB2F,EAAgBzM,mBACpB,kBACEtF,EACK,CACC+L,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,aAEzB,OACN,CAACpG,IAGG6S,EAAkB,OAAGzG,QAAH,IAAGA,OAAH,EAAGA,EAAMyG,mBAC3BjB,EAAgBtM,mBAAyB,WAAO,IAAD,EACnD,OAAKuN,EA2CE,CACL5Q,KAxCW,CACXS,WAAY,IAAI2B,KAAKwO,EAAmB5Q,MACxCT,MAAOqR,EAAmB5Q,MAuC1BV,cApCqB,WAAO,IAAD,EACasR,EAAmBtR,cAAnDuR,EADmB,EACnBA,UAAcvR,EADK,8BAIrBC,EAAQ,YAAIsR,GAAWC,MAAK,SAAC1R,EAAG2R,GAAO,IAAD,IAE1C,OAAI3R,EAAEF,MAAF,UAAS6R,EAAErR,cAAX,aAAS,EAAUR,KACb,EAEC6R,EAAE7R,MAAF,UAASE,EAAEM,cAAX,aAAS,EAAUR,IACrB,EAEF,KAKT,OAFAK,EAAMyR,KAAK1R,GAEJ,CACLmB,WAAY,GACZlB,SAnBmB,GAqCrBY,MAdY,CACZM,YACEmQ,EAAmBzQ,MAAM2F,IAAM8K,EAAmBzQ,MAAM6F,KACxDH,QAAQ,GACVtG,MAAOqR,EAAmBzQ,OAW1BC,WARiBwQ,EAAmBxQ,WASpCH,YAPe,UAAG2Q,EAAmB3Q,mBAAtB,QAAqC,MAxC7C,KAiDR,CAAC2Q,IAEE3R,EAAS2Q,cACT3B,EAAWjN,sBAAW,uCAC1B,WAAO7B,EAAQ0Q,GAAf,eAAAzQ,EAAA,yDACOuQ,EADP,uBAEIE,EAAc/O,UAAU,CACtBgJ,IAAI,6CAAD,OAA+C4G,EAA/C,MACHxM,KAAMpF,GAAiBqF,cAJ7B,6BAOcuM,EAPd,uBAQIb,EAAc/O,UAAU,CACtBgJ,IAAI,gBACJ5F,KAAMpF,GAAiBqF,cAV7B,0CAgBI0L,EAAc/O,UAAU,MAhB5B,UAiBUmP,GACJhR,EACA0Q,EACAe,EACAvR,EACA0Q,GAtBN,QAwBIhM,IAxBJ,kDA0BIgM,EAAc/O,UAAU,CACtBgJ,IAAG,4CAAE,KAAOnM,eAAT,wBACHuG,KAAMpF,GAAiBqF,cA5B7B,0DAD0B,wDAiC1B,CAAClF,EAAQ0Q,EAAe9L,EAAS6M,IAG7BvE,EAAWnL,uBACf,SAACc,GAAsC,IAAD,EACpC,OACE,kBAAC,GAAD,CACE4K,QAASA,EACTgE,SAAUA,EACVzF,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACVG,aAAY,iBAAE5C,QAAF,IAAEA,OAAF,EAAEA,EAAM4C,oBAAR,QAAwB,KACpC9C,QAASA,EACT4C,aAAc/K,EAAM+K,iBAI1B,CAAC1C,EAAMuC,EAASzC,EAASpG,EAAS+I,EAAU3B,EAAMyF,IAGpD,OACE,kBAAC,KAAD,CACEf,cAAa,OAAGA,QAAH,IAAGA,IAAiB,GACjCG,cAAeA,EAEfC,oBAAoB,EACpB9B,SAAUA,EACV9B,SAAUA,K,weCpWhB,IAAM8E,GAAYjV,IAAH,KAgBX2C,IA2GWK,GArGqC,uCAAG,WACrDC,EACAE,GAFqD,iCAAAC,EAAA,+DAIR,WAC3C,IAAMC,EACJF,EAAOG,cAAcC,MAAMJ,EAAOG,cAAcC,MAAMC,OAAS,GAGjE,MAAyB,kBAAdH,EAKF,CACLC,cAAe,GACfG,iBAAkB,CAChBC,OAPYP,EAAOG,cAAcC,MACnCJ,EAAOG,cAAcC,MAAMC,OAAS,GACNN,GAM5BS,MAAON,EACPO,KAAMP,EACNQ,QAAQ,IAKP,CACLP,cAAeD,EAAUH,GACzBO,iBAAkB,MAvBuB,GAArCH,EAJ6C,EAI7CA,cAAeG,EAJ8B,EAI9BA,iBAJ8B,EA+BT,WAC1C,IAAMyR,EAAU/R,EAAOgS,OAAO5R,MAAM,GAC9B6R,EAAMjS,EAAOgS,OAAO5R,MACxBJ,EAAOgS,OAAO5R,MAAMC,OAAS,GAG/B,GAAmB,kBAAR4R,EAAkB,CAC3B,GAAIF,IAAY/U,EAAuBkV,OAAQ,CAC7C,IAAMC,EAAaC,qBAAUH,GAE7B,MAAO,CACLD,OAAQ,CACNK,WAAYrV,EAAuBkV,OACnCnS,GAAI,IAENuS,YAAa,KACbC,UAAW,CACT9R,KAAM,CACJ+R,MAAOL,EAAWM,UAClBC,KAAMP,EAAWQ,YAKvB,MAAO,CACLX,OAAQ,CACNK,WAAYrV,EAAuB4V,SACnC7S,GAAI,IAENuS,YAAa,CACX7R,KAAMwR,GAERM,UAAW,MAKjB,MAAO,CACLP,OAAQ,CACNK,WAAYN,EACZhS,GAAIkS,EAAIlS,IAEVwS,UAAW,KACXD,YAAa,MA3C2B,GAApCN,EA/B6C,EA+B7CA,OAAQO,EA/BqC,EA+BrCA,UAAWD,EA/B0B,EA+B1BA,YA+CrB3R,EAAkE,CACtEC,OAAQ,CACNC,KAAMb,EAAOa,KAAKT,MAClByS,WAAY7S,EAAO6S,WAAW9S,GAC9BgF,KAAM/E,EAAO+E,KACb+N,SAAU9S,EAAO8S,SAAS1S,MAAMJ,EAAO8S,SAAS1S,MAAMC,OAAS,GAAGN,GAClEe,aAAa,UAAAd,EAAOc,mBAAP,eAAoBC,SAAU,KAC3CC,MAAOhB,EAAOgB,MAAMZ,MACpBa,WAAU,UAAEjB,EAAOiB,kBAAT,QAAuB,KACjCd,gBACA6R,UAEF1R,mBACAiS,YACAD,eA5FmD,SA+F/CxS,EAAOoB,OAA+B,CAC1CC,SAAU2Q,GACVnR,cAjGmD,2CAAH,wD,iPCzCpD,IAAMoS,GAAiBlW,IAAH,KAMhBsL,IAQEW,GAAiB,SAACC,GAAD,OAAmBA,EAAItI,MACxCuI,GAA8C,SAClDhJ,EACAiJ,GAEA,IAAMC,EAAYlJ,EAAOK,OAAS,EAElC,OAAOL,EAAOmJ,KAAI,SAAC6J,EAAW5J,GAC5B,IAAME,EAAcJ,IAAcE,EADY,EAEpBH,EAAY,CAAEG,UAAhClH,EAFsC,EAEtCA,IAAQS,EAF8B,wBAI9C,OACE,kBAAC+G,GAAA,EAAD,CACExH,IAAKA,EACLyH,QAAQ,OACRC,cAAc,MACdC,WAAW,SACXC,eAAe,cAEf,kBAACC,GAAA,EAAD,eACEC,MAAOV,EAAc,UAAY,UACjC1G,QAAS0G,EAAc,UAAY,WACnC/D,MAAOyN,EAAKvS,KACZwJ,KAAK,UACDtH,EALN,CAMEI,UAAWuG,KACV,KACDA,GAAe,kBAACE,GAAA,EAAD,CAAcC,SAAS,eAM1C2D,GAAUC,SA8ND4F,GAtNE,SAAUtQ,GAAuB,IAAD,YACzCuQ,EAAgBzR,eADyB,EAMCkB,EAAxCI,SAAUoQ,OAN6B,SAQzC/S,GAAQ,UAAA8S,EAAclT,cAAd,mBAAsB8S,gBAAtB,eAAgC1S,QAAS,GACjDkB,GACJ,UAAA4R,EAAclT,cAAd,mBAAsB8S,gBAAtB,eAAgCxR,WAAW2E,aAAc,GACrDmN,EAAS,oBAAGF,EAAclT,cAAjB,aAAG,EAAsB+E,YAAzB,QAAiC,KAE1CsO,EAAWjT,EAAMA,EAAMC,OAAS,GAEhCM,EAAYuD,mBAChB,kBACU,OAARmP,QAAQ,IAARA,OAAA,EAAAA,EAAUtT,IACN,CACEwK,MAAO,CACLhK,OAAQ,CACNkK,GAAI4I,EAAStT,IAEfgF,KAAM,CACJ0F,GAAI2I,KAIV,CACE7I,MAAO,CACLC,WAAW,EACXzF,KAAM,CACJ0F,GAAI2I,OAIhB,CAACC,EAAUD,IApCkC,EAuCP5R,KAvCO,mBAuCxCqD,EAvCwC,KAuC1B6F,EAvC0B,KAyCzCtM,EAAUyD,uBAGd,SAACjD,GACM8L,EAAgB,CACnBC,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,gBAE3B,CAAC0F,IAjD4C,EAoDJE,YAGzCmI,GAAgB,CAChBlI,MAAM,OAACuI,QAAD,IAACA,IAAahG,MAAaA,GACjCzM,YACA2S,YAAa,kBACX/O,YAAW,kBAAM2O,EAAcK,cAAc,cAAa,IAC5DnV,YARM0M,EApDuC,EAoDvCA,QAAgBC,EApDuB,EAoD9BnM,MAAiBoM,EApDa,EAoDbA,KAU5BwI,EAAO,OAAGxI,QAAH,IAAGA,OAAH,EAAGA,EAAMwI,QAChBzV,EAAUmG,mBAA+B,kBAAMsP,GAAW,KAAI,CAClEA,IAGIpQ,EAAWvB,uBACf,SAAC4R,GACC,IAAMzT,GAAyB,OAAhByT,QAAgB,IAAhBA,OAAA,EAAAA,EAAkBrT,QAAS,GAG1C,OAFcJ,EAAOA,EAAOK,OAAS,IAAM,KAIhCtC,EAAQsC,OAAS,EACnB,6BADF,EADE,sBAKX,CAACtC,IA9E4C,EAiFhByF,aAA0C,CACvE/C,KAAM,WACN2C,aAnF6C,mBAiFxCK,EAjFwC,KAiFjCC,EAjFiC,KAiF3BC,EAjF2B,KAsF/B2G,EAAgB7G,EAAxBa,OACA1F,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAaF,EAAbE,SAGR6P,qBAAU,WACJL,GAAYD,IAAcC,EAAStO,MACrClB,EAAS,CACPvC,WAAY,GACZlB,MAAO,OAGV,CAACgT,EAAWC,EAAUxP,IAMzB,IAAMoB,EAAaf,mBAAQ,WACzB,OAAMtF,GAASgF,EACNhF,GACE,OAACwU,QAAD,IAACA,IAAahG,MAAaA,GAC7B,gCACIrC,EACJA,EAASvM,QAEX,KACN,CAAC4U,EAAWxU,EAAOgF,EAASmH,IAEzBhI,EAAWmB,mBACf,kBACE4G,IACY,OAAZjG,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,cACxC,OAACoO,QAAD,IAACA,IAAahG,MAAaA,IAC3B+F,IACF,CAACA,EAAmBC,EAAWvO,EAAciG,IAGzCO,EAAcxJ,uBAClB,SAACyJ,GACC,OACE,kBAACpF,GAAA,EAAD,iBACOvD,EADP,CAEEC,QAASD,EAAMC,SAAW,UACtB0I,EAHN,CAIE1M,MAAQgF,KAAahF,KAAYmM,EACjChI,SAAUA,EACVkC,WAAYA,EACZxE,KAAK,WACL8E,MAAM,gBAIZ,CAAC5C,EAAOiB,EAAShF,EAAOmM,EAAUhI,EAAUkC,IA3IC,EA8IfkF,oBAAS,GA9IM,mBA8IxCC,EA9IwC,KA8I9BC,EA9I8B,KAgJzCkB,EAAU1J,uBAAY,SAACkE,GAAD,OAAYsE,GAAY,KAAO,CAACA,IACtD/F,EAASzC,uBACb,SAACkE,GACCsE,GAAY,GAEZtE,EAAMyF,UACNjH,YAAW,WAAW+F,EAAYvE,KAAQ,KAE5C,CAACsE,EAAaC,IAGV3F,EAAW9C,uBACf,SAACkE,EAAO3F,GACNyD,EAAS,CAAEvC,aAAYlB,YAEzB,CAACyD,EAAUvC,IAGPmK,EAAgB5J,uBAGpB,SAACkE,EAAOzE,EAAoBoK,GAC1BpK,GAAcA,GAAc,IAAIqK,YAChC9H,EAAS,CACPvC,aACAlB,YAGJ,CAACyD,EAAUzD,IAGPwL,EAAoB1H,mBAA2B,WACnD,OAAO,eACFT,EADL,CAEEqI,KAAM1B,GAAYrM,EAAQsC,OAAS,EACnCkL,UACAjH,SACAvG,UACAiL,cACA2K,gBAAgB,EAChB5Q,WACA3C,QACAiL,cACAP,UACAiB,YAAY,EACZF,UAAU,EACV/C,kBACA2C,gBACAnK,aACAqD,WACAlE,KAAM,eAEP,CACDgD,EACA2G,EACArM,EACAwN,EACAjH,EACAwG,EACA/H,EACA3C,EACAiL,EACAI,EACAnK,EACAqD,IAGF,OAAO,kBAACqH,GAAA,EAAiBJ,I,2NC5Q3B,IAAMgI,GAAkB/W,IAAH,KAMjBqL,IAQEY,GAAiB,SAACC,GAAD,OAAoBA,EAAItI,MACzCuI,GAA8C,SAClDhJ,EACAiJ,GAEA,IAAMC,EAAYlJ,EAAOK,OAAS,EAClC,OAAOL,EAAOmJ,KAAI,SAAC6J,EAAW5J,GAC5B,IAAME,EAAcJ,IAAcE,EADY,EAEpBH,EAAY,CAAEG,UAAhClH,EAFsC,EAEtCA,IAAQS,EAF8B,wBAG9C,OACE,kBAAC+G,GAAA,EAAD,CACExH,IAAKA,EACLyH,QAAQ,OACRC,cAAc,MACdC,WAAW,SACXC,eAAe,cAEf,kBAACC,GAAA,EAAD,eACEC,MAAOV,EAAc,UAAY,UACjC1G,QAAS0G,EAAc,UAAY,WACnC/D,MAAOyN,EAAKvS,KACZwJ,KAAK,UACDtH,EALN,CAMEI,UAAWuG,KACV,KACDA,GAAe,kBAACE,GAAA,EAAD,CAAcC,SAAS,eAyNjCoK,GA/MI,SAAUlR,GAAyB,IAAD,EACHA,EAAxCI,SAAUoQ,OADiC,WAGX3R,KAHW,mBAG5CqD,EAH4C,KAG9B6F,EAH8B,KAK7CtM,EAAUyD,uBAKd,SAACjD,GACM8L,EAAgB,CACnBC,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,gBAE3B,CAAC0F,IAfgD,EAkBRE,YAGzCgJ,GAAiB,CAAExV,UAASuC,UAAW,CAAEmT,WA7D1B,8BA0DThJ,EAlB2C,EAkB3CA,QAAgBC,EAlB2B,EAkBlCnM,MAAiBoM,EAlBiB,EAkBjBA,KAK5B+I,GAAY,OAAJ/I,QAAI,IAAJA,OAAA,EAAAA,EAAMgJ,WAAY,GAvBmB,EAyBnB7J,oBAAS,GAzBU,mBAyB5CC,EAzB4C,KAyBlCC,EAzBkC,OA4BfF,mBAAS,IA5BM,mBA4B5C7I,EA5B4C,KA4BhC2S,EA5BgC,KA8B7C7Q,EAAWvB,uBACf,SAACzB,GACC,OAAKA,EAGH2T,EAAM9R,MACJ,gBAAG1B,EAAH,EAAGA,OAAH,MACwB,eAAtBA,EAAO2T,YAA+B3T,EAAOR,KAAOK,EAAML,MAGvD,+BANF,EADE,wBAUX,CAACgU,IA3CgD,EA8CpBvQ,aAA2B,CACxD/C,KAAM,aACN2C,aAhDiD,mBA8C5CK,EA9C4C,KA8CrCC,EA9CqC,KA8C/BC,EA9C+B,KAmDpCwQ,EAAmC1Q,EAA1CrD,MAA0BkK,EAAgB7G,EAAxBa,OAClB1F,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAaF,EAAbE,SAEFuQ,EAAYlQ,mBAChB,kBACE,IAAImQ,IACFN,EAAMhG,QAAO,SAACuG,EAAStB,GAErB,OADAsB,EAAQzC,KAAK,CAACmB,EAAKjT,GAAIiT,IAChBsB,IACN,OAEP,CAACP,IAGG3T,EAAQ8D,mBAAQ,WACpB,IAAKiQ,EACH,MAAO,GAOT,IAJA,IAAM/T,EAAqB,CAAC+T,GALF,EAODA,EAAU5T,OAA7B2T,EAPoB,EAOpBA,WAAYnU,EAPQ,EAORA,GAEI,aAAfmU,GAA6BE,EAAUG,IAAIxU,IAAK,CACrD,IAAMyU,EAAaJ,EAAUK,IAAI1U,GACjCK,EAAMsU,QAAQF,GAFuC,MAG/BA,EAAWjU,OAA9B2T,EAHkD,EAGlDA,WAAYnU,EAHsC,EAGtCA,GAGjB,OAAOK,IACN,CAAC+T,EAAWC,IAETrW,EAAUmG,mBAAQ,WAAO,IAAD,EACtByQ,EAAM,UAAGvU,EAAMA,EAAMC,OAAS,UAAxB,aAAG,EAAyBN,GACxC,OAAOgU,EAAMa,QAAO,SAAC7L,GAAD,OAClB4L,EAAS5L,EAAIxI,OAAOR,KAAO4U,EAAmC,aAA1B5L,EAAIxI,OAAO2T,gBAEhD,CAACH,EAAO3T,IAELgL,EAAmBlH,mBAAQ,WAC/B,OAAO9D,EAAMC,OAAS,GAAwB,IAAnBtC,EAAQsC,SAClC,CAACD,EAAOrC,IAELkH,EAAaf,mBAAQ,WACzB,OAAMtF,GAASgF,EACNhF,EACImM,EACJA,EAASvM,QAEX,KACN,CAACI,EAAOgF,EAASmH,IAEdhI,EAAWmB,mBACf,kBACE4G,GACAM,IACY,OAAZvG,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,aACxCmO,IACF,CAAC/H,EAAkB+H,EAAmBtO,EAAciG,IAGhDO,EAAcxJ,uBAClB,SAACyJ,GACC,OACE,kBAACpF,GAAA,EAAD,iBACOvD,EADP,CAEEC,QAASD,EAAMC,SAAW,UACtB0I,EAHN,CAIE1M,MAAOgF,KAAahF,EACpBqG,WAAYA,EACZxE,KAAK,aACL8E,MAAM,aACNxC,SAAUA,OAIhB,CAACJ,EAAOiB,EAAShF,EAAOqG,EAAYlC,IAGhCwI,EAAU1J,uBAAY,SAACkE,GAAD,OAAYsE,GAAY,KAAO,CAACA,IACtD/F,EAASzC,uBACb,SAACkE,GACCsE,GAAY,GACZC,EAAYvE,KAEd,CAACsE,EAAaC,IAGV3F,EAAW9C,uBACf,SAACkE,EAAO3F,GACN,GAAKA,EAEE,GAAIyU,MAAMC,QAAQ1U,GAAQ,CAC/B,IAAM2U,EAAM3U,EAAMC,OAClBwD,EAAiB,IAARkR,EAAY,KAAO3U,EAAM2U,EAAM,SAExClR,EAASzD,QALTyD,EAAS,QAQb,CAACA,IAGG4H,EAAgB5J,uBAGpB,SAACkE,EAAO3F,EAAesL,GACrBuI,GAAe7T,GAAS,IAAIuL,eAE9B,CAACsI,IAGGrI,EAAoB1H,mBAA2B,WACnD,OAAO,eACFT,EADL,CAEEqI,KAAM1B,GAAYrM,EAAQsC,OAAS,EACnCkL,UACAjH,SACAvG,UACAiL,cACA2K,gBAAgB,EAChB5Q,WACA3C,QACAiL,cACAP,UACAiB,YAAY,EACZF,UAAU,EACV/C,kBACAnE,WACA8G,gBACAnK,WAAY8J,EAAmB,GAAK9J,EACpCb,KAAM,iBAEP,CACDgD,EACA2G,EACArM,EACAwN,EACAjH,EACA8G,EACArI,EACA3C,EACAiL,EACAP,EACAnG,EACA8G,EACAnK,IAGF,OAAIyJ,EACK,6BAAMiK,KAAKC,UAAUlK,EAAU,KAAM,IAGvC,kBAACiB,GAAA,EAAiBJ,I,mYCpP3B,IAAMsJ,GAAuBrY,IAAH,KAStBuL,GACAE,GACAD,IAiBS8M,GAAgB,SAACpM,GAC5B,OAAQA,GACN,KAAK/L,EAAuB4V,SAC5B,KAAK5V,EAAuB6W,WAC5B,KAAK7W,EAAuBkV,OAC1B,MACF,QACE,MAAsB,kBAARnJ,EAElB,OAAO,GAGHD,GAAsD,SAACC,GAC3D,OAAQA,GACN,KAAK/L,EAAuB4V,SAC1B,MAAO,SACT,KAAK5V,EAAuB6W,WAC1B,MAAO,aACT,KAAK7W,EAAuBkV,OAC1B,MAAO,SACT,QACE,GAAmB,kBAARnJ,EACT,OAAOA,EAIb,MAAuB,WAAnBA,EAAImL,WACA,GAAN,OAAUnL,EAAIqM,WAAW5C,MAAzB,YAAkCzJ,EAAIqM,WAAW1C,MAG5C3J,EAAItI,MAGPuI,GAA8C,SAAChJ,EAAQiJ,GAC3D,IAAMC,EAAYlJ,EAAOK,OAAS,EAClC,OAAOL,EAAOmJ,KAAI,SAAC/I,EAAcgJ,GAC/B,IAAME,EAAcJ,IAAcE,EADe,EAEvBH,EAAY,CAAEG,UAAhClH,EAFyC,EAEzCA,IAAQS,EAFiC,wBAIjD,OAAIwS,GAAc/U,GACTA,EAIP,kBAACsJ,GAAA,EAAD,CACExH,IAAKA,EACLyH,QAAQ,OACRC,cAAc,MACdC,WAAW,SACXC,eAAe,cAEf,kBAACC,GAAA,EAAD,eACEC,MAAOV,EAAc,UAAY,UACjC1G,QAAS0G,EAAc,UAAY,WACnC/D,MAAOuD,GAAe1I,GACtB6J,KAAK,UACDtH,EALN,CAMEI,UAAWuG,KACV,KACDA,GAAe,kBAACE,GAAA,EAAD,CAAcC,SAAS,eAM1C4L,GAAoD,SACxDtX,EADwD,GAGpD,IADFuD,EACC,EADDA,WAEIgU,EAAQ,IAAIC,OAAJ,iBAAqBjU,GAAc,KACjD,OAAOvD,EAAQ6W,QAAO,SAAC7L,GAAD,OAASuM,EAAME,KAAK1M,GAAeC,QAErD3F,GAAW,SAACqQ,GAAmC,IAAD,EAC5CrT,GAAwB,OAAhBqT,QAAgB,IAAhBA,OAAA,EAAAA,EAAkBrT,QAAS,GACnC2R,EAAO,UAAI3R,EAAM,UAAV,QAAgB,KACvBqV,EAAWrV,EAAMC,OAAS,EAAID,EAAMA,EAAMC,OAAS,GAAK,KAE9D,GAAgB,OAAZ0R,GAAiC,OAAb0D,GAAkC,KAAbA,EAC3C,MAAO,kBACF,GACLN,GAAcM,IACd1D,IAAY/U,EAAuBkV,OACnC,CAEA,IAAMC,EAAaC,qBAAUqD,GAC7B,IAAKtD,EAAWM,UAAU1R,OACxB,MAAO,sBACF,IAAKoR,EAAWQ,SAAS5R,OAC9B,MAAO,uBAyQE2U,GApQA,SAAU/S,GAAqB,IAAD,YACKA,EAAxCI,SAAUoQ,OADyB,WAGXhJ,oBAAS,GAHE,mBAGpCC,EAHoC,KAG1BC,EAH0B,OAKZ7G,aAAwC,CACrE/C,KAAM,SACN2C,cAPyC,mBAKpCK,EALoC,KAK7BC,EAL6B,KAKvBC,EALuB,KAU3B2G,EAAgB7G,EAAxBa,OACFlE,EAAK,oBAAGqD,EAAMrD,aAAT,aAAG,EAAaA,aAAhB,QAAyB,GAC9BkB,EAAU,oBAAGmC,EAAMrD,aAAT,aAAG,EAAakB,kBAAhB,QAA8B,GACtC1C,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAaF,EAAbE,SAEFkO,EAAO,UAAI3R,EAAM,UAAV,QAAgB,KACvBqV,EAAWrV,EAAMC,OAAS,EAAID,EAAMA,EAAMC,OAAS,GAAK,KAExDsV,EAAetR,iBAAO,IAnBe,EAqBH7C,KArBG,mBAqBpCqD,EArBoC,KAqBtB6F,EArBsB,KAuBrCtM,EAAUyD,uBAKd,SAACjD,GACM8L,EAAgB,CACnBC,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,gBAE3B,CAAC0F,IAjCwC,EAoCAE,YAGzCsK,GAAsB,CACtBrK,MAAO8K,EAAanR,UAAYpE,EAAM,GACtCO,UAAW,CACTF,KAAMkV,EAAanR,QACnBoR,MAAO7D,IAAY/U,EAAuBkV,QAE5C9T,YATM0M,EApCmC,EAoCnCA,QAAgBC,EApCmB,EAoC1BnM,MAAiBoM,EApCS,EAoCTA,KAY5BoJ,EAAYlQ,mBAAQ,WACxB,IAAMkQ,EAAY,IAAIC,IADQ,uBAE9B,cAAyB,OAAJrJ,QAAI,IAAJA,OAAA,EAAAA,EAAM6K,aAAc,IAAzC,+CAA6C,CAAC,IAAnCC,EAAkC,+BAC3C,YAAsBA,EAAOC,YAA7B,+CAA0C,CAAC,IAAhCC,EAA+B,QACxC5B,EAAU6B,IAAID,EAAQjW,GAAIiW,IAFe,oFAFf,kFAO9B,OAAO5B,IACN,CAACpJ,IAEEjN,EAAUmG,mBAAiB,WAC/B,GAAgB,OAAZ6N,EACF,MAAO,CAAC/U,EAAuB4V,SAAU5V,EAAuBkV,QAE3D,GAAIH,IAAY/U,EAAuBkV,OAC5C,OAAoB,OAAbuD,IAAwB,OAAJzK,QAAI,IAAJA,OAAA,EAAAA,EAAMkL,SAAe,GAE3C,IAAKT,EACV,OAAW,OAAJzK,QAAI,IAAJA,OAAA,EAAAA,EAAM6K,aAAc,GAEtB,GAAwB,kBAAbJ,EAChB,MAAO,GAGT,IAAM1X,EAAqB,GAdU,uBAgBrC,YAAsBqW,EAAUpU,SAAhC,+CAA0C,CAAC,IAAhCgW,EAA+B,QAEtCA,EAAQzV,OAAO2T,aAAeuB,EAASvB,YACvC8B,EAAQzV,OAAOR,KAAO0V,EAAS1V,IAE/BhC,EAAQ8T,KAAKmE,IArBoB,kFAyBrC,OAAOjY,IACN,CAACgU,EAAS/G,EAAMoJ,EAAWqB,IAExBtK,EAAWjH,mBAAQ,WACvB,OAAmB,OAAZ6N,GAAiC,OAAb0D,IAC1B,CAAC1D,EAAS0D,IAEPrK,EAAmBlH,mBAAQ,WAC/B,OAAO9D,EAAMC,OAAS,GAAwB,IAAnBtC,EAAQsC,SAAiB8K,IACnD,CAAC/K,EAAOrC,EAASoN,IAEd5F,EAAQrB,mBAAQ,WACpB,OAAgB,OAAZ6N,EACK,cACEA,IAAY/U,EAAuBkV,OACrC,cACmB,IAAjB9R,EAAMC,OACR,SACmB,IAAjBD,EAAMC,QAAgBtC,EAAQsC,OAAS,EACzC,aACEtC,EAAQsC,OAAS,EACnB,iBAGF,WACN,CAACD,EAAOrC,EAASgU,IAEdhP,EAAWmB,mBACf,kBAEEiP,GACA/H,IACY,OAAZvG,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,cAC1C,CAACoG,EAAkB+H,EAAmBtO,IAGlCwG,EAAcxJ,uBAClB,SACEyJ,GAQG,IAAD,MAJAmK,GACoB,kBAAbA,GACiB,WAAxBA,EAASvB,YACU,IAAnBnW,EAAQsC,SAERiL,EAAM,eACDA,EADC,CAEJnJ,WAAW,gBACC,QAAN,EAAAmJ,SAAA,eAAQnJ,aAAc,GADlB,CAER6M,MAAM,gBACM,QAAN,EAAA1D,SAAA,mBAAQnJ,kBAAR,eAAoB6M,QAAS,GAD9B,CAEHrF,QAAS,cAMjB,OACE,kBAACzD,GAAA,EAAD,iBACOvD,EADP,CAEEC,QAASD,EAAMC,SAAW,UACtB0I,EAHN,CAIE1M,MAAOgF,KAAahF,EACpBqG,WAAYrB,EAAUhF,OAAQsG,EAC9BzE,KAAK,SACL8E,MAAOA,EACPxC,SAAUA,OAIhB,CAAC0S,EAAU1X,EAAQsC,OAAQsC,EAAOiB,EAAShF,EAAO2G,EAAOxC,IAGrDwI,EAAU1J,uBAAY,SAACkE,GAAD,OAAYsE,GAAY,KAAO,CAACA,IACtD/F,EAASzC,uBACb,SAACkE,GACCsE,GAAY,GAEZtE,EAAMyF,UACNjH,YAAW,kBAAM+F,EAAYvE,KAAQ,KAEvC,CAACsE,EAAaC,IAGV3F,EAAW9C,uBACf,SAACkE,EAAO3F,GACN,IAAM+V,EAAgB/V,EAAMC,OAAS,EAC/BoV,EAAWrV,EAAM+V,GACvB,GAAIhB,GAAcM,GAAW,CAC3B,IAAMW,EAA6B,GADR,uBAG3B,YAAiBX,EAAoB3W,MAAM,KAA3C,+CAAiD,CAAC,IAAzCuX,EAAwC,QAC3CA,IACEC,aAAmBD,KACrBA,EAAMC,GAASD,IAGjBD,EAAiBvE,KAAKwE,KATC,kFAa3B,IAAME,EAAeH,EAAiBvN,KAAK,KAAK9H,OAEhDX,EAAM+V,GACJI,EAAaC,OAAO,GAAGC,cAAgBF,EAAaG,UAAU,GAElE7S,EAAS,CAAEvC,aAAYlB,YAEzB,CAACyD,EAAUvC,IAGPmK,EAAgB5J,uBAGpB,SAACkE,EAAOzE,EAAoBoK,GAC1BpK,GAAcA,GAAc,IAAIqK,YAE3BP,GACHvH,EAAS,CAAEvC,aAAYlB,UAGT,OAAZ2R,GAAiC,OAAb0D,GAAqBnU,IAC3CqU,EAAanR,QAAUlD,EAAW,GAAGqV,iBAGzC,CAAC9S,EAAUkO,EAAS0D,EAAUrV,EAAOgL,EAAkBuK,IAGnD/J,EAAoB1H,mBAA2B,WACnD,OAAO,eACFT,EADL,CAEEnC,WAAY8J,EAAmB,GAAK9J,EACpCwK,KAAM1B,GAAYrM,EAAQsC,OAAS,EACnCkL,UACAjH,SACAvG,UACAiL,cACA2K,gBAAgB,EAChBxI,WACA/K,QACAiL,cACAP,UACAiB,YAAY,EACZF,UAAU,EACV/C,kBACA2C,gBACA9G,WACA0Q,iBACA5U,KAAM,SACNsC,eAED,CACDU,EACA2H,EACA9J,EACA8I,EACArM,EACAwN,EACAjH,EACA6G,EACA/K,EACAiL,EACAP,EACAW,EACA9G,EACA5B,IAGF,OAAIgI,EACK,6BAAMiK,KAAKC,UAAUlK,EAAU,KAAM,IAGvC,kBAACiB,GAAA,EAAiBJ,I,qDCzYrBwB,GAAyBC,SAEzBjK,GAAW,SAAChD,GAChB,IAAI,OAAEA,QAAF,IAAEA,IAASgN,MAAqBA,GAClC,MAAO,iBA2FIwJ,GAvFF,SACXjU,GAGC,IAAD,EACgDA,EAAxCI,SAAUoQ,OADlB,WAGuB3R,KAAhBqD,EAHP,sBAK0BlC,EAAlB4C,aALR,SAOQpC,EAAiB1B,eAAjB0B,aAPR,EAS+BK,aAAkC,CAC/D/C,KAAM,OACN2C,cAXF,mBASOK,EATP,KAScC,EATd,KASoBC,EATpB,KAcQ/E,EAAmB8E,EAAnB9E,MAAOgF,EAAYF,EAAZE,QACPC,EAAyBF,EAAzBE,SAAUC,EAAeH,EAAfG,WAEZ+S,EAAiD3S,mBACrD,+BACE+F,KAAM,QACN6M,WAAW,EACX/T,SAAUI,GACPM,EAJL,CAKEkB,SAAS,WAAD,4BAAE,WAAOoB,EAAO3F,GAAd,SAAAH,EAAA,0DACJ,OAAEG,QAAF,IAAEA,IAASgN,MAAqBA,GAD5B,wDAKRvJ,EAASzD,GALD,SAMF,IAAI2W,SAAQ,SAACC,GAAD,OAAazS,WAAWyS,EAAS,MAN3C,OAORlT,GAAW,GAPH,2CAAF,qDAAC,OAUX,CAACL,EAAON,EAAcU,EAAUC,IAG5Bf,EACJI,GACAgQ,IACY,OAAZtO,QAAY,IAAZA,OAAA,EAAAA,EAAcE,QAASpF,GAAiBqF,YAEpCgD,EAAU9D,mBACd,kBACE,kBAACwF,GAAA,EAAD,CAAKuN,GAAI,EAAGC,OAAK,GACf,kBAACC,GAAA,EAAD,iBAAwBxU,EAAmBkU,GACzC,kBAACO,GAAA,EAAD,CAAcrU,SAAUA,EAAU3C,MAAOnD,EAAiBqR,QACxD,kBAAC+I,GAAA,EAAD,CAASC,OAAK,EAACC,UAAU,MAAMlJ,MAAM,UACnC,kBAAC,KAAD,QAGJ,kBAAC+I,GAAA,EAAD,CAAcrU,SAAUA,EAAU3C,MAAOnD,EAAiBua,OACxD,kBAACH,GAAA,EAAD,CAASC,OAAK,EAACC,UAAU,MAAMlJ,MAAM,SACnC,kBAAC,KAAD,YAMV,CAAC1L,EAAOkU,EAAwB9T,IAGlC,OAAIwC,EAEA,kBAACkS,GAAA,EAAD,KACE,kBAAC1P,GAAA,EAAD,iBACOpF,EADP,CAEE+U,eAAiC,mBAAVnS,OAAsBL,EAAYK,EACzDyC,QAASA,EACTzC,MAAM,UAEP3B,KAAahF,GAAS,kBAAC+Y,GAAA,EAAD,CAAgB/Y,OAAK,GAAEA,IAMlD,kBAAC6Y,GAAA,EAAD,KACGzP,IACEpJ,GAAS,kBAAC+Y,GAAA,EAAD,CAAgB/Y,OAAK,GAAEA,K,mMCxDzC,IAAMgZ,GAAsC,CAC1ClI,MAAM,EACNC,GAAI,EACJC,GAAI,EACJC,GAAI,IAGAgI,GAAiBhb,IAAH,KAMhBqL,IAGE4P,GAAiB,SACrBnV,GAGI,IACImJ,EAA2BnJ,EAA3BmJ,KAAMpH,EAAqB/B,EAArB+B,QAASoG,EAAYnI,EAAZmI,QADpB,EAGsDrJ,eAAjDkM,EAHL,EAGKA,UAAWxK,EAHhB,EAGgBA,aAAcX,EAH9B,EAG8BA,QAASuV,EAHvC,EAGuCA,WAHvC,EAOqCvW,KAPrC,mBAOIqD,EAPJ,KAOkB6F,EAPlB,OASgCxG,mBAEjC,WACA,OACEW,GACCA,EAAaE,OAASpF,GAAiBqF,aACtCH,EAAaE,OAASpF,GAAiBsO,MAOpC,CAAC,KAAM,MALL,CACLpJ,EAAa8F,IACb9F,EAAaE,OAASpF,GAAiBqF,eAI1C,CAACH,IAvBD,mBASIqJ,EATJ,KASkBC,EATlB,KAyBGV,EAAW5L,uBAAY,WAC3B8L,IACAjD,EAAgB,QACf,CAACiD,EAAWjD,IAET2D,EAAQnK,mBAAgB,WAC5B,OAAIiK,EACK,cACEhL,EACF,0BACE2H,EACF,uBAEF,cACN,CAACqD,EAAYhL,EAAc2H,IAExBoB,EAAQC,eAER6L,EAAanW,sBAAW,sBAAC,4BAAA5B,EAAA,sEAE3ByK,EAAgB,MAFW,SAGrBqN,IAHqB,OAI3BrT,IAJ2B,gDAM3BgG,EAAgB,CACdC,IAAG,UAAE,KAAMnM,eAAR,wBACHuG,KAAMpF,GAAiBsO,QARE,yDAW5B,CAAC8J,EAAYrT,EAASgG,IAEnBuN,EAAmBpW,sBAAW,sBAAC,4BAAA5B,EAAA,sEAEjCyK,EAAgB,MAFiB,SAG3BqN,IAH2B,OAIjCpK,IAJiC,gDAMjCjD,EAAgB,CACdC,IAAG,UAAE,KAAMnM,eAAR,wBACHuG,KAAMpF,GAAiBsO,QARQ,yDAWlC,CAAC8J,EAAYpK,EAAWjD,IAErBgD,EAAe7L,uBACnB,SAACkE,GAAD,OAA6CA,EAAMmS,mBACnD,IAGF,OACE,kBAAC3J,GAAA,EAAD,CACEzC,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACVe,qBAAsBrL,EACtBsL,qBAAsBtL,EACtBuL,WAAS,EACTC,SAAS,KACTC,WACE,CACEC,UAAW,OACXC,SAAUpB,IAId,kBAACqB,GAAA,EAAD,CACEC,MAAOd,EAAe,CAAElE,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAE3DmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,aACVxE,GAAgB2H,KAAaoD,GAC7B,kBAAC,GAAD,CAAgBgB,OAAO,YAEtBhB,GAAgBC,GACjB,kBAAC,GAAD,CAAS/B,QAAS,IAAM8C,OAAO,QAAQC,QAAS,GAC9C,kBAACC,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,IAGtC,kBAACmB,GAAA,EAAD,CAAeC,UAAQ,KAClBpB,IAAiBC,GAClB,kBAACiB,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,GAEpC,kBAACqB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACvB,kBAACF,GAAA,EAAD,iBAAUqI,GAAV,CAAoC7H,QAAQ,SAASP,WAAS,IAC5D,kBAAC,GAAD,CACER,MAAO,CAAE1J,OAAQ4G,EAAMuD,QAAQ,IAC/BlK,MAAM,QACNxC,SAAU+H,GAAW3H,KAAkBgL,KAG3C,kBAACoB,GAAA,EAASqI,GACR,kBAAC9H,GAAD,CACE/M,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAAD,eACEC,WAAS,EACTO,QAAQ,SACRlG,WAAW,cACP+N,IAEJ,kBAAC,GAAD,CACE7U,SAAU+H,GAAW3H,KAAkBgL,EACvC5I,OAAK,QAMf,kBAAC0K,GAAA,EAAD,MACI9B,GACA,kBAAC,IAAMgK,SAAP,KACE,kBAACjI,GAAA,EAAD,CACEI,QAAS0H,EACTjV,SAAU+H,GAAW3H,IAAiBX,EACtCuC,KAAK,SACLoL,UAAW,kBAACC,GAAA,EAAD,MACXpG,MAAM,UACNpH,QAAQ,aANV,OAUA,kBAACsN,GAAA,EAAD,CACEI,QAAS2H,EACTlV,SAAU+H,GAAW3H,IAAiBX,EACtCuC,KAAK,SACLoL,UAAW,kBAACiI,GAAA,EAAD,MACXxV,QAAQ,YALV,cAWJ,kBAACsN,GAAA,EAAD,CACEnN,SAAUI,EACV6G,MAAOmE,EAAa,UAAY,UAChCgC,WAAYhC,GAAc,kBAACkC,GAAA,EAAD,MAC1BC,QAAS5L,GAERyJ,EAAa,KAAO,aAuDhBkK,GAhDE,SAAC1V,GAA0B,IAClCmJ,EAA0BnJ,EAA1BmJ,KAAMpH,EAAoB/B,EAApB+B,QAASiQ,EAAWhS,EAAXgS,OADkB,EAGR/J,YAG/BiN,GAAgB,CAChBhN,MAAO8J,EACPhU,UAAW,CACTZ,GAAI4U,KANA7J,EAHiC,EAGjCA,QAASlM,EAHwB,EAGxBA,MAAOoM,EAHiB,EAGjBA,KAUlB6H,EAAU,OAAG7H,QAAH,IAAGA,OAAH,EAAGA,EAAM6H,WACnBrC,EAAgBtM,mBACpB,kBAAO2O,EAAa,CAAEA,cAAe,KACrC,CAACA,IAEGlC,EAAgBzM,mBACpB,kBACEtF,EAAQ,CAAE+L,IAAK/L,EAAMJ,QAASuG,KAAMpF,GAAiBqF,aAAgB,OACvE,CAACpG,IAGGkB,EAAS2Q,cACT3B,EAAWjN,uBACf,SAAC7B,EAAQ0Q,GAAT,OAA2B7Q,GAAUC,EAAQE,EAAQ0Q,KACrD,CAAC5Q,IAGGkN,EAAWnL,uBACf,SAACc,GAAD,OACE,kBAAC,GAAD,CAAgBmJ,KAAMA,EAAMpH,QAASA,EAASoG,QAASA,MAEzD,CAACgB,EAAMpH,EAASoG,IAGlB,OACE,kBAAC,KAAD,CACE0F,cAAeA,EACfG,cAAeA,EACfC,oBAAoB,EACpB9B,SAAUA,EACV9B,SAAUA,K,qmBCrQAK,SAAhB,IAEMiL,GAAezb,IAAH,KAoBd2C,IA8MWsR,GAtMwC,uCAAG,WACxDhR,EACAiR,EACAhR,EACAC,GAJwD,+CAAAC,EAAA,6DAOlD6S,EAAY,WAAO,IAAD,QAChBA,EAAQ,oBACZ9S,EAAO8S,SAAS1S,MAAMJ,EAAO8S,SAAS1S,MAAMC,OAAS,UADzC,aACZ,EAAyDN,UAD7C,QACmD,KAEjE,OAAO+S,KAAQ,oBACZ/B,EAAU+B,SAAS1S,MAAM2Q,EAAU+B,SAAS1S,MAAMC,OAAS,UAD/C,aACZ,EAA+DN,UADnD,QAEX,MACA,KACA+S,EARY,GAYZjS,EAAOmQ,aAAQD,EAAUlQ,KAAKS,WAAYtB,EAAOa,KAAKS,YACxD,KACAtB,EAAOa,KAAKT,MAGVyS,EACJ7S,EAAO6S,WAAW9S,KAAOgR,EAAU8B,WAAW9S,GAC1C,KACAC,EAAO6S,WAAW9S,GAGlBe,GACJ,UAAAd,EAAOc,mBAAP,eAAoBC,SAAUf,EAAOc,cAAgBiQ,EAAUjQ,YAC1Dd,EAAOc,YAAuBC,OAC/B,KAGAC,EACJhB,EAAOgB,MAAMZ,MAAMuG,IAAM3G,EAAOgB,MAAMZ,MAAMyG,MAC5CkK,EAAU/P,MAAMZ,MAAMuG,IAAMoK,EAAU/P,MAAMZ,MAAMyG,IAC9C,KACA7G,EAAOgB,MAAMZ,MAGb2E,EAAO/E,EAAO+E,OAASgM,EAAUhM,KAAO,KAAO/E,EAAO+E,KAGtD9D,EACJjB,EAAOiB,aAAe8P,EAAU9P,WAAa,KAAOjB,EAAOiB,WA/CL,EAkDU,WAChE,IAAMgQ,EACJF,EAAU5Q,cAAcC,MAAM2Q,EAAU5Q,cAAcC,MAAMC,OAAS,GAFD,EAI1CL,EAAOG,cAAcC,MAC9C8Q,OAAO,GACPC,UANmE,mBAI/DjR,EAJ+D,KAIpDK,EAJoD,KAYtE,MAAyB,kBAAdL,EAEL+Q,EAAa1Q,QAAU0Q,EAAa1Q,OAAOR,KAAOL,GAC7C,CACLS,cAAe,KACfG,iBAAkB,KAClB8Q,oBAAqB,CACnBrR,GAAIkR,EAAalR,GACjBa,OAAQ,CACNF,OAAQ,KACRF,MAAON,EACPO,KAAMP,KAOL,CACLC,cAAe,KACfG,iBAAkB,CAChBC,OAAQA,EAAOR,GACfS,MAAON,EACPO,KAAMP,EACNQ,QAAQ,GAEV0Q,oBAAqB,MAIhBlR,EAAUH,KAAOkR,EAAalR,GAChC,CACLI,cAAeD,EAAUH,GACzBO,iBAAkB,KAClB8Q,oBAAqB,MAIlB,CACLjR,cAAe,KACfG,iBAAkB,KAClB8Q,oBAAqB,MArDyC,GAA1DjR,EAlDgD,EAkDhDA,cAAeG,EAlDiC,EAkDjCA,iBAAkB8Q,EAlDe,EAkDfA,oBAlDe,EA4GZ,WAC1C,IAAMW,EAAU/R,EAAOgS,OAAO5R,MAAM,GAC9B6R,EAAMjS,EAAOgS,OAAO5R,MACxBJ,EAAOgS,OAAO5R,MAAMC,OAAS,GAGzBkY,EAAaxH,EAAUiB,OAAO5R,MAAM,GACpCoY,EAASzH,EAAUiB,OAAO5R,MAC9B2Q,EAAUiB,OAAO5R,MAAMC,OAAS,GAGlC,GAAmB,kBAAR4R,EAAkB,CAC3B,GAAIF,IAAY/U,EAAuBkV,OAAQ,CAC7C,IAAMC,EAAaC,qBAAUH,GAE7B,MAAO,CACLD,OAAQ,CACNK,WAAYrV,EAAuBkV,OACnCnS,GAAI,IAENuS,YAAa,KACbC,UAAW,CACT9R,KAAM,CACJ+R,MAAOL,EAAWM,UAClBC,KAAMP,EAAWQ,YAKvB,MAAO,CACLX,OAAQ,CACNK,WAAYrV,EAAuB4V,SACnC7S,GAAI,IAENuS,YAAa,CACX7R,KAAMwR,GAERM,UAAW,MAGV,OAAIR,IAAYwG,GAActG,EAAIlS,KAAOyY,EAAOzY,GAE9C,CACLiS,OAAQ,KACRM,YAAa,KACbC,UAAW,MAIR,CACLP,OAAQ,CACNK,WAAYN,EACZhS,GAAIkS,EAAIlS,IAEVwS,UAAW,KACXD,YAAa,MAvD2B,GAApCN,EA5GgD,EA4GhDA,OAAQO,EA5GwC,EA4GxCA,UAAWD,EA5G6B,EA4G7BA,YA2DrB3R,EAIF,CACFZ,KACAa,OAAQ,CACNkS,WACAjS,OACAgS,aACA/R,cACAE,QACA+D,OACAiN,SACA/Q,aACAd,iBAEFG,mBACA8Q,sBACAmB,YACAD,eAGF3T,QAAQE,IAAI8B,GA9L4C,UAgMlDb,EAAOoB,OAAqC,CAChDC,SAAUmX,GACV3X,cAlMsD,4CAAH,4D,6kCChCvD,IAAM8X,GAAyB5b,IAAH,KAmDxBqL,GACAC,GACAC,GACAE,GACAD,GACAE,IAGEmQ,GAAW,IAAIzV,KAAK,QAEpB2U,GAAsC,CAC1ClI,MAAM,EACNC,GAAI,EACJC,GAAI,EACJC,GAAI,IAGA8I,GAAoB,SACxBhW,GAKI,IAEFmJ,EAMEnJ,EANFmJ,KACApH,EAKE/B,EALF+B,QACU8I,EAIR7K,EAJF8K,SACAG,EAGEjL,EAHFiL,aACA9C,EAEEnI,EAFFmI,QACA4C,EACE/K,EADF+K,aAPC,EAU0CjM,eAArCkM,EAVL,EAUKA,UAAWxK,EAVhB,EAUgBA,aAAcX,EAV9B,EAU8BA,QAV9B,EAYqChB,KAZrC,mBAYIqD,EAZJ,KAYkB6F,EAZlB,KAcGmD,GAAsB,OAAZD,QAAY,IAAZA,OAAA,EAAAA,EAAcC,UAAW,GAdtC,EAiByB3J,mBAC1B,kBACE2J,EAAQE,QACN,qCAAE5G,EAAF,KAAYnE,EAAZ,KAA4BgL,GAA5B,EAAwBjO,GAAxB,EAA4BiO,SAAShN,EAArC,EAAqCA,MAAOH,EAA5C,EAA4CA,KAA5C,MAAuD,CACrDmN,EAAU7G,EAAWA,EAAWnG,EAAM2F,IAAM3F,EAAM6F,IAClDmH,EAAUhL,EAAU4B,aAAI,CAAC5B,EAAS,IAAIC,KAAKpC,QAE7C,CAAC,EAAG6X,OAER,CAAC7K,IA1BA,mBAiBI1G,EAjBJ,KAiBcnE,EAjBd,KA6BGyK,EAAW5L,uBAAY,WAC3B2L,IACAG,IACAjD,EAAgB,QACf,CAACiD,EAAWH,EAAY9C,IAjCxB,EAmCgCxG,mBAEjC,WACA,OACEW,GACCA,EAAaE,OAASpF,GAAiBqF,aACtCH,EAAaE,OAASpF,GAAiBsO,MAOpC,CAAC,KAAM,MALL,CACLpJ,EAAa8F,IACb9F,EAAaE,OAASpF,GAAiBqF,eAI1C,CAACH,IAjDD,mBAmCIqJ,EAnCJ,KAmCkBC,EAnClB,KAmDGE,EAAQnK,mBAAQ,WACpB,IAAMmK,EAAQ,eAEd,OAAIF,EACK,cACErD,EACH,WAAN,OAAkBuD,EAAlB,OACSlL,EACH,cAAN,OAAqBkL,GAEhBA,IACN,CAACvD,EAASqD,EAAYhL,IAEnB+I,EAAQC,eAEd,OACE,kBAACoC,GAAA,EAAD,CACEzC,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACViB,WAAS,EACTF,qBAAsBrL,EACtBsL,qBAAsBtL,EACtBwL,SAAS,KACTC,WACE,CACEC,UAAW,OACXC,SAAUpB,IAMd,kBAACqB,GAAA,EAAD,CACEC,MAAOd,EAAe,CAAElE,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAE3DmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,aACVxE,GAAgB2H,KAAaoD,GAC7B,kBAAC,GAAD,CAAgBgB,OAAO,YAEtBhB,GAAgBC,GACjB,kBAAC,GAAD,CAAS/B,QAAS,IAAM8C,OAAO,QAAQC,QAAS,GAC9C,kBAACC,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,IAGtC,kBAACmB,GAAA,EAAD,CAAeC,UAAQ,KAClBpB,IAAiBC,GAClB,kBAACiB,GAAA,EAAD,CAAmBpF,MAAM,SAASkE,GAEpC,kBAACqB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACvB,kBAACF,GAAA,EAAD,iBAAUqI,GAAV,CAAoC7H,QAAQ,SAASP,WAAS,IAC5D,kBAAC,GAAD,CACER,MAAO,CAAE1J,OAAQ4G,EAAMuD,QAAQ,IAC/BlK,MAAM,QACNxC,SAAUI,GAAgB2H,KAAaqD,KAG3C,kBAACoB,GAAA,EAASqI,GACR,kBAAC9H,GAAD,CACE/M,SAAUI,GAAgB2H,KAAaqD,EACvCnL,QAASA,IAAY0V,QAAWxT,EAAYlC,EAC5C0L,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvCO,WAAS,KAGb,kBAACa,GAAA,EAASqI,GACR,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvChH,SAAUA,EACVuH,WAAS,KAGb,kBAACa,GAAA,EAAD,eACEC,WAAS,EACTO,QAAQ,SACRlG,WAAW,cACP+N,IAEJ,kBAAC,GAAD,CACE7U,SAAUI,GAAgB2H,KAAaqD,EACvC5I,OAAK,QAMf,kBAAC0K,GAAA,EAAD,MACI9B,GACA,kBAAC+B,GAAA,EAAD,CACEnN,SAAUI,IAAiBX,GAAWsI,EACtC/F,KAAK,SACLoL,UAAW,kBAACC,GAAA,EAAD,MACXpG,MAAM,UACNpH,QAAQ,aALV,UAUF,kBAACsN,GAAA,EAAD,CACEnN,SAAUI,EACV6G,MAAOmE,EAAa,UAAY,UAChCgC,WAAYhC,GAAc,kBAACkC,GAAA,EAAD,MAC1BC,QAAS5L,GAERyJ,EAAa,KAAO,aA0OhByK,GAnOK,SAACjW,GAA6B,IAAD,EACvC4K,EAAqC5K,EAArC4K,QAASzB,EAA4BnJ,EAA5BmJ,KAAMpH,EAAsB/B,EAAtB+B,QAAS+I,EAAa9K,EAAb8K,SADe,EAGd7C,YAG/B6N,GAAwB,CACxB5N,MAAO0C,EACP5M,UAAW,CACTZ,GAAIwN,KANAzC,EAHuC,EAGvCA,QAASlM,EAH8B,EAG9BA,MAAOoM,EAHuB,EAGvBA,KAUpBpM,IACFD,QAAQE,IAAI0O,EAASkL,IACrB9Z,QAAQC,MAAMA,IAGhB,IAAM+R,EAAgBzM,mBACpB,kBACEtF,EACK,CACC+L,IAAK/L,EAAMJ,QACXuG,KAAMpF,GAAiBqF,aAEzB,OACN,CAACpG,IAGGgP,EAAY,OAAG5C,QAAH,IAAGA,OAAH,EAAGA,EAAM4C,aACrB4C,EAAgBtM,mBAAyB,WAAO,IAAD,EACnD,IAAK0J,EACH,MAAO,GAGT,IAAM/M,EAAO,CACXS,WAAY,IAAI2B,KAAK2K,EAAa/M,MAClCT,MAAOwN,EAAa/M,MAGhBiS,EAAY,WAAO,IAAD,EACalF,EAAakF,SAAxCpB,EADc,EACdA,UAAcoB,EADA,8BAIhB1S,EAAQ,YAAIsR,GAAWC,MAAK,SAAC1R,EAAG2R,GAAO,IAAD,IAE1C,OAAI3R,EAAEF,MAAF,UAAS6R,EAAErR,cAAX,aAAS,EAAUR,KACb,EAEC6R,EAAE7R,MAAF,UAASE,EAAEM,cAAX,aAAS,EAAUR,IACrB,EAEF,KAKT,OAFAK,EAAMyR,KAAKiB,GAEJ,CACLxR,WAAY,GACZlB,SAnBc,GAuBZD,EAAiB,WAAO,IAAD,EACayN,EAAazN,cAA7CuR,EADmB,EACnBA,UAAcvR,EADK,8BAIrBC,EAAQ,YAAIsR,GAAWC,MAAK,SAAC1R,EAAG2R,GAAO,IAAD,IAE1C,OAAI3R,EAAEF,MAAF,UAAS6R,EAAErR,cAAX,aAAS,EAAUR,KACb,EAEC6R,EAAE7R,MAAF,UAASE,EAAEM,cAAX,aAAS,EAAUR,IACrB,EAEF,KAKT,OAFAK,EAAMyR,KAAK1R,GAEJ,CACLmB,WAAY,GACZlB,SAnBmB,GAuBjBY,EAAQ,CACZM,YAAasM,EAAa5M,MAAM2F,IAAMiH,EAAa5M,MAAM6F,KAAKH,QAAQ,GACtEtG,MAAOwN,EAAa5M,OAqFtB,MAZyC,CACvCH,OACAiS,WACA3S,gBACA0S,WA1EiBjF,EAAaiF,WA2E9B7R,QACAC,WA1EiB2M,EAAa3M,WA2E9BH,YAzEe,UAAG8M,EAAa9M,mBAAhB,QAA+B,KA0E9CiE,KAxEW6I,EAAa7I,KAyExBiN,OAvEc,WACd,IAAM5R,EAA4C,GAE5C6R,EAAG,OAAGrE,QAAH,IAAGA,OAAH,EAAGA,EAAcoE,OAE1B,cAAQC,QAAR,IAAQA,OAAR,EAAQA,EAAKiC,YACX,IAAK,SACH9T,EAAMyR,KAAK7U,EAAuBkV,OAAQD,GAC1C,MACF,IAAK,WACH7R,EAAMyR,KAAK7U,EAAuB4V,SAAUX,GAC5C,MACF,IAAK,aAEH7R,EAAMyR,KAAK7U,EAAuB4V,UAClC,IAAMiG,EAA8B,GAHtC,uBAIE,YAAuB5G,EAAIP,UAA3B,+CAAsC,CAAC,IAA5BoH,EAA2B,QACR,aAAxBA,EAAS5E,WACX9T,EAAMyR,KAAKiH,GAEXD,EAAkBhH,KAAKiH,EAAS/Y,KARtC,kFAYE,IAAMgZ,EAAc3Y,EAAM,GAE1B,GAAIyY,EAAkBxY,OAAS,EAAG,CAChC,IAAM2Y,EAA2C,GADjB,uBAEhC,YAAmBD,EAAYhD,YAA/B,+CAA4C,CAAC,IAAlC/C,EAAiC,QAG1C,IAAe,IAFD6F,EAAkBI,QAAQjG,EAAKjT,KAOzCiZ,EAAcnH,KAAKmB,KAAU6F,EAAkBxY,OACjD,OAX4B,kFAgBhC2Y,EAAcrH,MAAK,SAAC1R,EAAG2R,GACrB,OAAI3R,EAAEF,KAAO6R,EAAErR,OAAOR,IAAMgZ,EAAYhZ,IAAME,EAAEM,OAAOR,IAC7C,EACC6R,EAAE7R,KAAOE,EAAEM,OAAOR,GACpB,EAEA,KAIXK,EAAMyR,KAAN,MAAAzR,EAAc4Y,IAIpB,MAAO,CACL1X,WAAY,GACZlB,SA1DY,MA2Ef,CAACwN,IAEE9N,EAAS2Q,cACT3B,EAAWjN,sBAAW,uCAC1B,WAAO7B,EAAQ0Q,GAAf,eAAAzQ,EAAA,sEAEIyQ,EAAc/O,UAAU,MAF5B,SAGUmP,GACJhR,EACA0Q,EACAjD,EACAvN,EACA0Q,GARN,OAUIhM,IAVJ,gDAYI/F,QAAQC,MAAR,MACA8R,EAAc/O,UAAU,CACtBgJ,IAAG,UAAE,KAAMnM,eAAR,wBACHuG,KAAMpF,GAAiBsO,QAf7B,yDAD0B,wDAoB1B,CAACnO,EAAQ0Q,EAAejD,EAAS7I,IAG7BsI,EAAWnL,uBACf,SAACc,GAAD,OACE,kBAAC,GAAD,CACEmJ,KAAMA,EACNpH,QAASA,EACT+I,SAAUA,EACV3C,QAASA,EACT8C,aAAY,OAAEA,QAAF,IAAEA,IAAgB,KAC9BF,aAAc/K,EAAM+K,iBAGxB,CAAC5B,EAAMpH,EAAS+I,EAAU3C,EAAS8C,IAGrC,OACE,kBAAC,KAAD,CACE4C,cAAeA,EACfG,cAAeA,EACf/C,aAAY,iBAAE5C,QAAF,IAAEA,OAAF,EAAEA,EAAM4C,oBAAR,QAAwB,KACpC9C,QAASA,EACTgE,SAAUA,EACV8B,oBAAoB,EACpB5D,SAAUA,K,oMChhBhB,IAAMkM,GAAerc,IAAH,KAMd2C,IAyFW2Z,GAtFK,SAACxW,GAGd,IACG4K,EAAqB5K,EAArB4K,QAAS7I,EAAY/B,EAAZ+B,QADb,EAGsC0U,YAGxCF,IANE,mBAGGG,EAHH,YAGkBvO,EAHlB,EAGkBA,QAASlM,EAH3B,EAG2BA,MAKzB0a,IAAa1a,EAEb2a,EAAW1X,uBACf,SAACkE,GACCsT,EAAY,CAAE1Y,UAAW,CAAEZ,GAAIwN,KAAuBiM,MAAK,kBACzD9U,SAGJ,CAAC6I,EAAS8L,EAAa3U,IAGnB2J,EAAQnK,mBAAQ,WACpB,OAAIoV,EACK,QACExO,EACF,oBAEF,iBACN,CAACwO,EAAUxO,IAERoB,EAAQC,eAEd,OACE,kBAACoC,GAAA,EAAD,CACEzC,OAAQyB,EACRoB,SAAS,KACTD,WAAS,EACTF,qBAAsB1D,EACtB2D,qBAAsB3D,EACtBpG,QAASA,GAET,kBAACqK,GAAA,EAAD,CACEC,MAAOsK,EAAW,CAAEtP,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAEvDmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,YACXmD,GAAW,kBAAC,GAAD,CAAgBoE,OAAO,UACnC,kBAACG,GAAA,EAAD,KACGiK,GACC,kBAAClK,GAAA,EAAD,CAAmBpF,MAAM,SAAzB,OACGpL,QADH,IACGA,OADH,EACGA,EAAOJ,UAGV8a,GACA,kBAAClK,GAAA,EAAD,sDAMN,kBAACa,GAAA,EAAD,MACIqJ,GACA,kBAACpJ,GAAA,EAAD,CACEnN,SAAU+H,EACVwF,QAASiJ,EACTpJ,UAAW,kBAACsJ,GAAA,EAAD,MACXzP,MAAM,UACNpH,QAAQ,aALV,UAUF,kBAACsN,GAAA,EAAD,CACEnN,SAAU+H,EACVqF,WAAYmJ,GAAY,kBAACjJ,GAAA,EAAD,MACxBC,QAAS5L,GAER4U,EAAW,QAAU,a,2MCxFhC,ICwDYI,GDxDNC,GAAgB9c,IAAH,KAMf2C,IAwFWoa,GArFM,SAACjX,GAGf,IACG4O,EAAsB5O,EAAtB4O,SAAU7M,EAAY/B,EAAZ+B,QADd,EAGuC0U,YAGzCO,IANE,mBAGGE,EAHH,YAGmB/O,EAHnB,EAGmBA,QAASlM,EAH5B,EAG4BA,MAI1B0a,IAAa1a,EAEb2a,EAAW1X,uBACf,SAACkE,GACC8T,EAAa,CAAElZ,UAAW,CAAEZ,GAAIwR,KAAwBiI,MAAK,kBAC3D9U,SAGJ,CAAC6M,EAAUsI,EAAcnV,IAGrB2J,EAAQnK,mBAAQ,WACpB,OAAIoV,EACK,QACExO,EACF,qBAEF,kBACN,CAACwO,EAAUxO,IAERoB,EAAQC,eAEd,OACE,kBAACoC,GAAA,EAAD,CACEzC,OAAQyF,EACR5C,SAAS,KACTD,WAAS,EACTF,qBAAsB1D,EACtB2D,qBAAsB3D,EACtBpG,QAASA,GAET,kBAACqK,GAAA,EAAD,CACEC,MAAOsK,EAAW,CAAEtP,MAAOkC,EAAMU,QAAQhO,MAAMqQ,WAAS/J,GAEvDmJ,GAEH,kBAAC3E,GAAA,EAAD,CAAK/B,SAAS,YACXmD,GAAW,kBAAC,GAAD,CAAgBoE,OAAO,UACnC,kBAACG,GAAA,EAAD,KACGiK,GACC,kBAAClK,GAAA,EAAD,CAAmBpF,MAAM,SAAzB,OACGpL,QADH,IACGA,OADH,EACGA,EAAOJ,UAGV8a,GACA,kBAAClK,GAAA,EAAD,uDAMN,kBAACa,GAAA,EAAD,MACIqJ,GACA,kBAACpJ,GAAA,EAAD,CACEnN,SAAU+H,EACVwF,QAASiJ,EACTpJ,UAAW,kBAACsJ,GAAA,EAAD,MACXzP,MAAM,UACNpH,QAAQ,aALV,UAUF,kBAACsN,GAAA,EAAD,CACEnN,SAAU+H,EACVqF,WAAYmJ,GAAY,kBAACjJ,GAAA,EAAD,MACxBC,QAAS5L,GAER4U,EAAW,QAAU,a,uyBC/BpBI,O,eAAAA,I,0BAAAA,Q,KAKZ,IAAMI,GAAa,CACjB1J,IAAK2J,sBAA0B,SAACpX,EAAOqX,GAAR,OAC7B,kBAACC,GAAA,EAAD,iBAAYtX,EAAZ,CAAmBqX,IAAKA,QAE1BE,MAAOH,sBAA0B,SAACpX,EAAOqX,GAAR,OAC/B,kBAACE,GAAA,EAAD,iBAAWvX,EAAX,CAAkBqX,IAAKA,QAEzBG,MAAOJ,sBAA0B,SAACpX,EAAOqX,GAAR,OAC/B,kBAACG,GAAA,EAAD,iBAAWxX,EAAX,CAAkBqX,IAAKA,QAEzBP,OAAQM,sBAA0B,SAACpX,EAAOqX,GAAR,OAChC,kBAACI,GAAA,EAAD,iBAAmBzX,EAAnB,CAA0BqX,IAAKA,QAEjCK,YAAaN,sBAA0B,SAACpX,EAAOqX,GAAR,OACrC,kBAACxQ,GAAA,EAAD,iBAAkB7G,EAAlB,CAAyBqX,IAAKA,QAEhCM,KAAMP,sBAA0B,SAACpX,EAAOqX,GAAR,OAC9B,kBAACM,GAAA,EAAD,iBAAU3X,EAAV,CAAiBqX,IAAKA,QAExBO,OAAQR,sBAA0B,SAACpX,EAAOqX,GAAR,OAChC,kBAACQ,GAAA,EAAD,iBAAa7X,EAAb,CAAoBqX,IAAKA,QAE3BS,OAAQV,sBAA0B,SAACpX,EAAOqX,GAAR,OAChC,kBAACU,GAAA,EAAD,iBAAgB/X,EAAhB,CAAuBqX,IAAKA,QAE9BW,UAAWZ,sBAA0B,SAACpX,EAAOqX,GAAR,OACnC,kBAACW,GAAA,EAAD,iBAAehY,EAAf,CAAsBqX,IAAKA,QAE7BY,SAAUb,sBAA0B,SAACpX,EAAOqX,GAAR,OAClC,kBAACY,GAAA,EAAD,iBAAcjY,EAAd,CAAqBqX,IAAKA,QAE5Ba,SAAUd,sBAA0B,SAACpX,EAAOqX,GAAR,OAClC,kBAACxQ,GAAA,EAAD,iBAAkB7G,EAAlB,CAAyBqX,IAAKA,QAEhCc,aAAcf,sBAA0B,SAACpX,EAAOqX,GAAR,OACtC,kBAACe,GAAA,EAAD,iBAAiBpY,EAAjB,CAAwBqX,IAAKA,QAE/BgB,YAAajB,sBAA0B,SAACpX,EAAOqX,GAAR,OACrC,kBAACG,GAAA,EAAD,iBAAWxX,EAAX,CAAkBqX,IAAKA,QAEzBiB,OAAQlB,sBAA0B,SAACpX,EAAOqX,GAAR,OAChC,kBAACiB,GAAA,EAAD,iBAAYtY,EAAZ,CAAmBqX,IAAKA,QAE1BkB,UAAWnB,sBAA0B,SAACpX,EAAOqX,GAAR,OACnC,kBAACmB,GAAA,EAAD,iBAAmBxY,EAAnB,CAA0BqX,IAAKA,QAEjCoB,gBAAiBrB,sBAA0B,SAACpX,EAAOqX,GAAR,OACzC,kBAACqB,GAAA,EAAD,iBAAY1Y,EAAZ,CAAmBqX,IAAKA,QAE1BsB,WAAYvB,sBAA0B,SAACpX,EAAOqX,GAAR,OACpC,kBAACsB,GAAA,EAAD,iBAAgB3Y,EAAhB,CAAuBqX,IAAKA,SAS1BuB,GAAU,UAAG,SAAbA,EACJC,GADiB,mFAGjB,OAHiB,SAGXA,EAHW,OAIXzW,EACJyW,EAAMzW,OAAS9H,EAAiBqR,OAC5BrR,EAAiBua,MACjBva,EAAiBqR,OAPN,8BAQIkN,EAAM3N,QARV,kEASf,OADS4N,EARM,kBASf,eACKD,EADL,GAEKC,EAFL,CAGE1W,OACAjE,YAAa2a,EAAO3a,aAAe0a,EAAM1a,YACzC+M,QAAS2N,EAAMzb,KAdF,0SAAbwb,EAAa,oCAmBbG,GAAkB7e,IAAH,KAcjB2C,IAGEmc,GAAkB9e,IAAH,KAMjB2C,IAGEoc,GAAmB/e,IAAH,KAMlB2C,IAshBWqc,GAnhBC,SAAClZ,GAIV,IAAD,MACiDA,EAA7CgS,cADJ,MACa,KADb,IACiDhS,EAA9BmZ,oBADnB,MACkC,KADlC,EACwCC,EAASpZ,EAAToZ,KADxC,EAIoC5R,oBAAkB,GAJtD,mBAIG6R,EAJH,KAIiBC,EAJjB,KAKEC,EAAkBra,uBAAY,WAAWoa,GAAgB,KAAQ,CACrEA,IANE,EAU0C9R,oBAAkB,GAV5D,mBAUGgS,EAVH,KAUoBC,EAVpB,OAWkCjS,mBAAwB,MAX1D,mBAWGkS,EAXH,KAWgBC,EAXhB,KAaEC,EAAqB1a,uBAAY,WAAWua,GAAmB,KAAQ,CAC3EA,IAEII,EAAsB3a,uBAAY,WAAWya,EAAe,QAAO,CACvEA,IAjBE,EAqBkCnS,mBAAwB,MArB1D,mBAqBGkP,EArBH,KAqBgBoD,EArBhB,KAsBEC,EAAqB7a,uBAAY,WAAW4a,EAAe,QAAO,CACtEA,IAvBE,EA2BsCtS,oBAAkB,GA3BxD,mBA2BGwS,EA3BH,KA2BkBC,EA3BlB,OA4B4CzS,mBAAwB,MA5BpE,mBA4BG0S,EA5BH,KA4BqBC,EA5BrB,KA8BEC,EAAmBlb,uBAAY,WAAW+a,GAAiB,KAAQ,CACvEA,IAEII,EAAoBnb,uBAAY,WAAWib,EAAoB,QAAO,CAC1EA,IAlCE,EAsC4C3S,oBAAkB,GAtC9D,mBAsCG8S,GAtCH,KAsCqBC,GAtCrB,QAuCoC/S,mBAG9B,MA1CN,qBAuCGgT,GAvCH,MAuCiBC,GAvCjB,MA4CEC,GAAsBxb,uBAC1B,WAAWqb,IAAoB,KAC/B,CAACA,KAEGI,GAAuBzb,uBAAY,WAAWub,GAAgB,QAAO,CACzEA,KAjDE,GAqDoCjT,mBAAwB,MArD5D,qBAqDG0P,GArDH,MAqDiB0D,GArDjB,MAsDEC,GAAsB3b,uBAAY,WAAW0b,GAAgB,QAAO,CACxEA,KAvDE,GA2DoDnE,YAGtDuC,IA9DE,qBA2DG8B,GA3DH,MA2D8BC,GA3D9B,MA2DqB5S,QA3DrB,GAgEsDsO,YAGxDwC,IAnEE,qBAgEG+B,GAhEH,MAgE+BC,GAhE/B,MAgEsB9S,QAKpBnK,GAAYuD,mBAA6C,WAC7D,OAAOyQ,EACH,CACEpK,MAAO,CAAEsI,WAAY,CAAEpI,GAAIkK,UAE7BzP,IACH,CAACyP,IA3EA,GA6E8C/J,YAGhDnL,GAAiB,CACjBkB,aACAkd,YAAa,sBALP/S,GA7EJ,GA6EIA,QAASlM,GA7Eb,GA6EaA,MAAOoM,GA7EpB,GA6EoBA,KAAM8S,GA7E1B,GA6E0BA,gBAQxBC,GAAYjT,MAAW,OAACE,SAAD,IAACA,QAAD,EAACA,GAAMgT,gBAGpCtK,qBAAU,WACR,OAAOoK,GAA+B,CACpCG,SAAUvC,GACVwC,YAAa,SAACC,EAAD,GAAiC,IAAxBC,EAAuB,EAAvBA,iBACpB,IAAKA,EAAiBpT,KACpB,OAAOmT,EAGT,IAAME,EAAcD,EAAiBpT,KAAKsT,qBAEpC5M,EAAY2M,EAAYxL,WAAWnB,UAEzC,GACEiD,GACA0J,EAAYxL,WAAW9S,KAAO4U,GAC9BjD,EAAU6M,OAAM,SAACvL,GAAD,OAAWA,EAAajT,KAAO4U,KAC/C,CAEA,IAAM6J,EAAyBL,EAAKH,eAAepJ,QACjD,SAAC4G,GAAD,OAAWA,EAAMzb,KAAOse,EAAYte,MAGtC,OAAIye,EAAuBne,SAAW8d,EAAKH,eAAe3d,OACjD8d,EAGFpc,OAAO0c,OAAO,GAAIN,EAAM,CAC7BH,eAAgBQ,IAKpB,OAAIL,EAAKH,eAAe/b,MAAK,SAACuZ,GAAD,OAAWA,EAAMzb,KAAOse,EAAYte,MACxDoe,EAGFpc,OAAO0c,OAAO,GAAIN,EAAM,CAC7BH,eAAe,CAAEK,GAAH,mBAAmBF,EAAKH,wBAI3C,CAACrJ,EAAQmJ,KAEZ,IAAMY,GAAUxa,mBAAyB,WAKvC,MAAO,CACL,CACET,MAAO,aACP4K,MAAO,aACPsQ,OAAQ,qBAAG1d,WAA+B,kBAAC2d,GAAA,EAAD,MAAe,MACzDC,sBAAuB,SAACjK,EAAQkK,GAAa,IAAD,EACpCC,EAAaC,IAAOF,EAAQje,MAE5Boe,EAKF,CACFla,KAAM,CACJ+Z,EAAQ/Z,OAAS9H,EAAiBqR,OAAS,SAAW,SAExDzN,KAAM,CACJke,EAAWxb,OAAO,iCAClBwb,EAAWG,WACXH,EAAWxb,OAAO,UAClBwb,EAAWxb,OAAO,YAClBwb,EAAWxb,OAAO,iBAEpBzC,YAAa,CAACge,EAAQhe,aAAe,IACrCG,WAAY,CAAC6d,EAAQ7d,WAAa,aAAe,IACjD4R,WAAY,CAACiM,EAAQjM,WAAWpS,MAChCqS,SAAU,CAACgM,EAAQhM,SAASrS,MAC5BN,cAAe,EACb,UAAA2e,EAAQ3e,cAAcI,cAAtB,eAA8BR,MAAOL,GAArC,aACUof,EAAQ3e,cAAcM,MAC5Bqe,EAAQ3e,cAAcM,MAE5BuR,OAAQ,CACL,WACC,OAAQ8M,EAAQ9M,OAAOkC,YACrB,IAAK,SACH,MAAM,GAAN,OAAU4K,EAAQ9M,OAAOvR,KAAK+R,MAA9B,YAAuCsM,EAAQ9M,OAAOvR,KAAKiS,MAC7D,IAAK,WACH,OAAOoM,EAAQ9M,OAAOmN,QACxB,IAAK,aACH,OAAOL,EAAQ9M,OAAOoN,UAP3B,IAWHpe,MAAO,CACLwG,IAAQsX,EAAQ9d,MAAM2F,IAAMmY,EAAQ9d,MAAM6F,KAAKtD,OAAO,aAmB1D,OAfmB,IAAI8b,IAAK,CAACJ,GAAS,CACpCK,UAAW,GACXC,mBAAmB,EACnBvd,KAAM,CACJ,OACA,OACA,cACA,aACA,aACA,WACA,gBACA,SACA,WAEDid,OAAOrK,GACQvU,OAAS,GAE7Bmf,OAAQzD,IAASrC,GAAY7R,UAC7B4X,WAvEc,EAwEdC,SAvEY,GAyEd,CACEjc,MAAO,QACP4K,MAAO,QACPsQ,OAAQ,oBAAG3d,MAAS2F,EAAZ,EAAYA,IAAKE,EAAjB,EAAiBA,IAAjB,OACNW,IAAQb,EAAME,GAAKtD,OAAO,YAC5Boc,YAhFe,EAiFfF,WAhFc,EAiFdC,SAhFY,GAkFd,CACEjc,MAAO,OACP4K,MAAO,OACPsQ,OAAQ,gBAAG9d,EAAH,EAAGA,KAAH,OAAcme,IAAOne,GAAM0C,OAAO,iBAC1Coc,YAxFe,EAyFfF,WAxFc,EAyFdC,SAxFY,GA0Fd,CACEjc,MAAO,WACP4K,MAAO,WACPsQ,OAAQ,gBAAG7L,EAAH,EAAGA,SAAH,OAAkB8M,YAAY9M,EAASrS,OAC/Ckf,YAhGe,EAiGfF,WAhGc,EAiGdC,SAhGY,GAkGd,CACEjc,MAAO,SACP4K,MAAO,SACPsQ,OAAQ,YAAiB,IAAd3M,EAAa,EAAbA,OACT,OAAQA,EAAOkC,YACb,IAAK,SACH,MAAM,GAAN,OAAUlC,EAAOvR,KAAK+R,MAAtB,YAA+BR,EAAOvR,KAAKiS,MAC7C,IAAK,WACH,OAAOV,EAAOmN,QAChB,IAAK,aACH,OAAOnN,EAAOoN,WAGpBO,YAjHe,EAkHfF,WAjHc,EAkHdC,SAjHY,GAmHd,CACEjc,MAAO,gBACP4K,MAAO,iBACPsQ,OAAQ,kBAAGxe,EAAH,EAAGA,cAAH,OACN,UAAAA,EAAcI,cAAd,eAAsBR,MAAOL,GAA7B,aACUS,EAAcM,MACpBN,EAAcM,MACpBkf,YA5He,EA6HfF,WA5Hc,EA6HdC,SA5HY,GA8Hd,CACEjc,MAAO,cACP4K,MAAO,cACPsQ,OAAQ,qBAAG7d,aACX6e,YApIe,EAqIfF,WApIc,EAqIdC,SApIY,GAsId,CACEjc,MAAO,aACP4K,MAAO,aACPsQ,OAAQ,gBAAG9L,EAAH,EAAGA,WAAH,OAAoB+M,YAAY/M,EAAWpS,OACnDkf,YA5Ie,EA6IfF,WA5Ic,EA6IdC,SA5IY,MA+If,CAAC3D,IAEE8D,GAAe3b,mBACnB,iBAAO,CACL4b,QAAS,CACPC,cACE,kBAACrW,GAAA,EAAD,CAAKD,SAAU,GAAIoF,UAAU,QAA7B,iCAEE,6BAFF,0BAIE,6BAJF,qBAME,6BANF,6BAQE,6BARF,sCAUE,6BAVF,2BAYE,6BAZF,qCAgBFmR,cAAe,6BAGnB,IAGIjiB,GAAUmG,mBACd,iBAAO,CACL+b,SAAU,kBAAsB,CAC9BjW,MADQ,EAAGjF,OACK9H,EAAiBqR,OAAS4R,KAAM,KAAOC,KAAI,OAG7DC,cAAe,4BACfC,YAAa,CAAE1Y,SAAU,SAAU6E,IAAK,GACxC8T,SAAU,GACVC,gBAAiB,CAAC,GAAI,GAAI,KAC1BC,YAAa1E,EACb2E,UAAW1E,IAASrC,GAAY7R,UAChC6Y,uBAAuB,KAEzB,CAAC5E,EAAcC,IAGX4E,GAAUzc,mBAA8C,WAC5D,OAAI6X,IAASrC,GAAY7R,UAChB,CACL,CACE+Y,KAAO,SAACje,GAAD,OAAW,kBAACke,GAAA,EAAoBle,IACvCme,QAAS,qBACTnZ,SAAU,kBACVoZ,UAAW,CACT/W,MAAO,YACPP,SAAU,SAEZ6G,QAAQ,WAAD,4BAAE,WAAOvK,EAAO+Y,GAAd,SAAA7e,EAAA,sEACD8W,QAAQiK,KACXnM,MAAMC,QAAQgK,GAAWA,EAAU,CAACA,IAAU3V,IAA/C,uCACE,WAAOqS,GAAP,SAAAvb,EAAA,0DACMub,EAAMva,WADZ,6DAM6B,uBAArBua,EAAMtH,WANd,gCAOYyJ,GAAgB,CAAEhd,UAAW,CAAEZ,GAAIyb,EAAMzb,MAPrD,+CASY0d,GAAe,CAAE9c,UAAW,CAAEZ,GAAIyb,EAAMzb,MATpD,0DAYIpB,QAAQC,MAAR,MAZJ,0DADF,wDAFK,2CAAF,qDAAC,KAyBP,CACL,SAACkgB,GACC,IAAMmC,EAAkC,uBAAvBnC,EAAQ5K,WACzB,MAAO,CACL0M,KAAMM,KACNJ,QAAQ,UAAD,OAAYG,EAAW,SAAW,SACzC3Q,QAAQ,WAAD,4BAAE,WAAOvK,EAAO+Y,GAAd,SAAA7e,EAAA,sEACD8W,QAAQiK,KACXnM,MAAMC,QAAQgK,GAAWA,EAAU,CAACA,IAAU3V,IAA/C,uCACE,WAAOqS,GAAP,SAAAvb,EAAA,0DACMub,EAAMxN,QADZ,iDAGkC,uBAArBwN,EAAMtH,WACfqJ,GAAgB/B,EAAMzb,IAEtB0c,EAAejB,EAAMzb,IANzB,2CADF,wDAFK,2CAAF,qDAAC,KAiBZ,SAAC+e,GACC,IAAMmC,EAAkC,uBAAvBnC,EAAQ5K,WAEzB,MAAO,CACL0M,KAAMtG,KACNwG,QAAQ,UAAD,OAAYG,EAAW,SAAW,SACzC3Q,QAAS,SAACvK,EAAO+Y,GACXmC,GACF/D,IAAoB,GACpBE,GAAgB,CACd7P,QAAUuR,EAAkBjR,QAC5B0D,SAAWuN,EAAkB/e,OAG/Bqc,GAAmB,GACnBE,EAAgBwC,EAAkB/e,QAK1C,SAAC+e,GACC,GAA2B,uBAAvBA,EAAQ5K,WACV,OAAO,KAGT,IAAMiN,EAAWrC,EAAQ/Z,OAAS9H,EAAiBqR,OAEnD,MAAO,CACLsS,KAAO,SAACje,GAAD,OACLwe,EACE,kBAAC,KAAoBxe,GAErB,kBAAC,KAAmBA,IAExBme,QAASK,EAAW,cAAgB,aACpCJ,UAAW,CACT/R,MAAO,CAAEhF,MAAOmX,EAAWhB,KAAI,KAAOD,KAAM,OAI9C5P,QAAS,SAACvK,EAAO+Y,GACflC,GAAiB,GACjBE,EAAqBgC,EAAiC/e,OAI5D,CACE6gB,KAAO,SAACje,GAAD,OAAW,kBAACye,GAAA,EAAkBze,IACrCoe,UAAW,CACT/W,MAAO,YACPP,SAAU,SAEZqX,QAAS,YACTO,cAAc,EACd/Q,QAAS,WACP2L,GAAgB,QAIrB,CAACF,EAAM4B,GAAiBF,GAAgBF,GAAiBd,IAEtD6E,GAAapd,mBACjB,iBAAO,CACLqd,KAAM3iB,GACF,SAAC+D,GAAD,OACE,kBAAC6e,GAAA,EAAc7e,EACb,kBAAC8e,GAAA,EAAD,KACE,kBAAC,KAAD,CACEC,QACEhD,GAAQre,QACPwU,MAAMC,QAAQ6L,KAAYA,GAAQtgB,OAAS,EAAI,EAAI,GAEtDshB,MAAM,QAEN,kBAACC,GAAA,EAAD,CAAYD,MAAM,SAAS3X,MAAM,QAAQpH,QAAQ,MAAjD,yBAGA,kBAACgf,GAAA,EAAD,CAAYhf,QAAQ,SAAShE,GAAMJ,aAK3C,SAACmE,GAAD,OAAW,kBAAC,aAAeA,OAEjC,CAAC/D,GAAO8f,GAASiC,KAGb3C,IAAqB,OAAJhT,SAAI,IAAJA,QAAA,EAAAA,GAAMgT,iBAAkB,GACzC6D,GAAU3d,mBAAQ,WACtB,IAAM4d,EACJ/F,IAASrC,GAAY7R,UACjB,CAAC,SAAC2T,GAAD,OAAmBA,EAAMva,aAAeua,EAAMxN,UAC/C,CAAC,SAACwN,GAAD,OAAmBA,EAAMxN,UAEhC,OAAOgQ,GACJjQ,QAAO,SAAC8T,EAAkBjU,GAAkB,IAAD,uBAC1C,IAD0C,IAC1C,EAD0C,iBAC/B4N,EAD+B,QAEpCsG,EAAQvD,OAAM,SAAC3J,GAAD,OAAYA,EAAO4G,OACnCqG,EAAQhQ,KAAK2J,IAFjB,EAAoBD,GAAW3N,GAA/B,+CAA+C,IADL,kFAO1C,OAAOiU,IACN,IACFlQ,MAAK,SAAC1R,EAAG2R,GAAJ,OAAU,IAAI3O,KAAK2O,EAAE/Q,MAAMkhB,UAAY,IAAI9e,KAAKhD,EAAEY,MAAMkhB,eAC/D,CAAC/D,GAAgBjC,IAEpB,OACE,kBAAC,IAAM5D,SAAP,KACE,kBAAC,IAAD,CACE6J,MAAOlI,GACPiE,UAAWA,IAAaL,IAAoBE,GAC5Cc,QAASA,GACT1T,KAAM6W,GACN9jB,QAASA,GACT8hB,aAAcA,GACdc,QAASA,GACTW,WAAYA,GACZjT,MAAK,OAAEyN,QAAF,IAAEA,SAAgB5W,IAEzB,kBAAC,GAAD,CAAUyP,OAAQA,EAAQ7I,KAAMkQ,EAActX,QAASwX,IACvD,kBAAC,GAAD,CACE3O,QAAS8O,EACTvQ,KAAMqQ,EACNzX,QAAS6X,EACT9O,SAAU+O,IAEZ,kBAAC,GAAD,CAAajP,QAAS8L,EAAa3U,QAASgY,IAC5C,kBAAC,GAAD,CACEnP,QAASsP,EACT/Q,KAAM6Q,EACNjY,QAASqY,EACTtP,SAAUuP,IAEZ,kBAAC,GAAD,CACEzP,QAAO,iBAAE4P,SAAF,IAAEA,QAAF,EAAEA,GAAc5P,eAAhB,QAA2B,KAClCgE,SAAQ,iBAAE4L,SAAF,IAAEA,QAAF,EAAEA,GAAc5L,gBAAhB,QAA4B,KACpCzF,KAAMmR,GACNvY,QAAS2Y,GACT5P,SAAU6P,KAEZ,kBAAC,GAAD,CAAc/L,SAAUsI,GAAcnV,QAAS8Y,O,qzDChtB9C,IAAMyE,GAAgCplB,IAAH,MAgB7BqlB,GAAiCrlB,IAAH,MA0C9BslB,GAAkBtlB,IAAH,KAYxBolB,GACAC,IAGmCrlB,IAAH,KAMhCqlB,IAGqCrlB,IAAH,KAMlCqlB,I,8gBC3DJ,IAAME,GAAa,SAACC,GAAuC,IAAjBC,EAAgB,uDAAR,IAChD,OAAID,EAAe,IACVnC,KAAMoC,GACJD,EAAe,GACjBE,KAAOD,GAEPnC,KAAImC,IAITE,GAAc,SAAC7f,GAAwD,IACnE8f,EAA4B9f,EAA5B8f,gBAAiBC,EAAW/f,EAAX+f,OAEzB,OACE,kBAAChZ,GAAA,EAAD,CACEgZ,OAAQA,EACRhW,QAAS0V,GAAWK,GACpB9Y,QAAQ,OACRG,eAAe,cAEf,kBAACJ,GAAA,EAAD,CACEgZ,OAAO,OACPnW,MAAK,UAAK,IAAMkW,EAAX,KACL/V,QAASiW,KAAK,SAqBhBjH,IAT6B7e,IAAH,KAM5BqL,IAGoBrL,IAAH,KAcjBqlB,KAgUWU,GA7TG,SAAUjgB,GAA4B,IAAD,EAC7CgS,EAAWhS,EAAXgS,OAD6C,EAGbxK,oBAAkB,GAHL,mBAG9C6R,EAH8C,KAGhCC,EAHgC,KAI/CC,EAAkBra,uBAAY,WAAWoa,GAAgB,KAAQ,CACrEA,IAGItb,EAAYuD,mBAChB,iBAAO,CACLyQ,SACApK,MAAO,CACLsI,WAAY,CAAEpI,GAAIkK,GAClB3G,SAAS,MAGb,CAAC2G,IAhBkD,EAmBH/J,YAGhDuX,GAAiB,CACjBxhB,YACAkd,YAAa,sBALP/S,EAnB6C,EAmB7CA,QAASlM,EAnBoC,EAmBpCA,MAAOoM,EAnB6B,EAmB7BA,KAAM8S,EAnBuB,EAmBvBA,gBAQxBC,EAAYjT,KAAW,OAACE,QAAD,IAACA,OAAD,EAACA,EAAMgT,gBAGpCtK,qBAAU,WACR,OAAOoK,EAA+B,CACpCG,SAAUvC,GACVwC,YAAa,SAACC,EAAD,GAAiC,IAAxBC,EAAuB,EAAvBA,iBACpB,IAAKA,EAAiBpT,KACpB,OAAOmT,EAGT,IAAME,EAAcD,EAAiBpT,KAAKsT,qBAEpC5M,EAAY2M,EAAYxL,WAAWnB,UAEzC,GACEiD,GACA0J,EAAYxL,WAAW9S,KAAO4U,GAC9BjD,EAAU6M,OAAM,SAACvL,GAAD,OAAWA,EAAajT,KAAO4U,KAC/C,CAEA,IAAM6J,EAAyBL,EAAKH,eAAepJ,QACjD,SAAC4G,GAAD,OAAWA,EAAMzb,KAAOse,EAAYte,MAGtC,OAAIye,EAAuBne,SAAW8d,EAAKH,eAAe3d,OACjD8d,EAGFpc,OAAO0c,OAAO,GAAIN,EAAM,CAC7BH,eAAgBQ,IAKpB,OAAIL,EAAKH,eAAe/b,MAAK,SAACuZ,GAAD,OAAWA,EAAMzb,KAAOse,EAAYte,MACxDoe,EAGFpc,OAAO0c,OAAO,GAAIN,EAAM,CAC7BH,eAAe,CAAEK,GAAH,mBAAmBF,EAAKH,wBAI3C,CAACrJ,EAAQmJ,IAEZ,IAAM+D,EAAU3d,mBAAQ,WACtB,QAAY,OAAJ8G,QAAI,IAAJA,OAAA,EAAAA,EAAMgT,iBAAkB,IAAIpJ,QAAO,SAAC4G,GAAD,OAAYA,EAAMxN,aAC5D,CAAChD,IACEoU,GAAe,OAAJpU,QAAI,IAAJA,GAAA,UAAAA,EAAM6H,kBAAN,eAAkBpS,OAAQ,GAE3CiT,qBAAU,WACRuK,SAAS5P,MAAQ+Q,IAChB,CAACA,IAEJ,IAAMvM,GAAiB,OAAJ7H,QAAI,IAAJA,OAAA,EAAAA,EAAM6H,aAAc,KAlFc,EAyFjD3O,mBAAQ,WAEV,IAAM2e,EAAa,IAAIxO,IACnByO,EAAkB,EAEtB,GAAIjQ,EAAY,CACd,IAAMkQ,EAAU,WACd,GAAIlQ,EAAWkQ,OAAQ,CAAC,IAAD,EACAlQ,EAAWkQ,OAAOC,OACvC,OAFqB,EACbrc,IADa,EACRE,IAGf,OAAO,KALO,GAQhBgc,EAAW5M,IAAIpD,EAAW9S,GAAI,CAC5BU,KAAMoS,EAAWpS,KACjBwiB,MAAO,EACPF,WAZY,2BAed,YAAsBlQ,EAAWqQ,YAAjC,+CAA8C,CAAC,IAApCC,EAAmC,QACxCJ,EAAwB,KAE5B,GAAII,EAAQJ,OAAQ,CAAC,IAAD,EACGI,EAAQJ,OAAOC,OAC9BI,EAFY,EACVzc,IADU,EACLE,IAEbic,GAAmBM,EACnBL,EAASK,EAGXP,EAAW5M,IAAIkN,EAAQpjB,GAAI,CACzBU,KAAM0iB,EAAQ1iB,KACdwiB,MAAO,EACPF,YA5BU,mFAkChB,IAAIE,EAAQ,EAvCI,uBAwChB,YAAoBpB,EAApB,+CAA6B,CAAC,IAAnBrG,EAAkB,QAC3B,IAAIA,EAAMxN,QAAV,CAGA,IAAMqV,EAAgBR,EAAWpO,IAC/B+G,EAAM3I,WAAW9S,IAGfujB,EAAa9H,EAAMxa,MAAM2F,IAAM6U,EAAMxa,MAAM6F,IARpB,uBAW3B,YAAqB2U,EAAM3N,QAA3B,+CAAoC,CAAC,IAA1B4N,EAAyB,QAC9BA,EAAOzN,UAGXsV,GAAc7H,EAAOza,MAAM2F,IAAM8U,EAAOza,MAAM6F,MAfrB,kFAkBvB2U,EAAMzW,OAAS9H,EAAiBqR,QAClC2U,GAASK,EACTD,EAAcJ,OAASK,IAEvBL,GAASK,EAETD,EAAcJ,OAASK,KAhEX,kFAqEhB,IAAMC,EAAa,WACjB,UAAI1Q,QAAJ,IAAIA,OAAJ,EAAIA,EAAYkQ,OAAQ,CAAC,IAAD,KACS,OAAVlQ,QAAU,IAAVA,GAAA,UAAAA,EAAYkQ,cAAZ,eAAoBC,SAAU,CAAErc,IAAK,EAAGE,IAAK,GAClE,OAFsB,EACdF,IADc,EACTE,IAIf,OAAOic,EANU,GAanB,MAAO,CACLU,eALqBhc,IAAQ+b,EAAYN,GAAO1f,OAAO,WAMvDwf,OALavb,IAAQ+b,GAAWhgB,OAAO,WAMvCkgB,mBALyBR,EAAQM,EAMjCV,gBAED,CAAChB,EAAShP,IA5FX2Q,EArFmD,EAqFnDA,eACAT,EAtFmD,EAsFnDA,OACAU,EAvFmD,EAuFnDA,mBACAZ,EAxFmD,EAwFnDA,WA2FIa,EAAexf,mBAAQ,WAC3B,IAAMwf,EAA8B,GADH,uBAGjC,IAHiC,IAGjC,EAHiC,0CAGrB3jB,EAHqB,YAGfgjB,EAHe,EAGfA,OAAQE,EAHO,EAGPA,MAAOxiB,EAHA,EAGAA,KAE/B,GAAIV,KAAE,OAAK8S,QAAL,IAAKA,OAAL,EAAKA,EAAY9S,IACrB,iBAGF,IAAM4jB,EACJ,kBAACpU,GAAA,EAAD,CAAMrN,IAAKnC,EAAI2P,MAAI,EAACG,GAAI,GAAIG,GAAI,EAAGL,GAAI,GACrC,kBAACiU,GAAA,EAAD,KACE,kBAACC,GAAA,EAAD,CACEC,qBAAsB,CACpBC,QAAQ,GAEV1V,MAAO5N,IAET,kBAACujB,GAAA,EAAD,KACI,WACA,GAAe,OAAXjB,EACF,OACE,kBAACrZ,GAAA,EAAD,CAAKM,MAAOiZ,EAAQ,EAAI9C,KAAI,KAAOD,KAAM,KAAMhJ,OAAK,GAClD,kBAAC0K,GAAA,EAAD,CAAYhf,QAAQ,MAApB,iBACa4E,IAAQH,KAAK4c,IAAIhB,IAAQ1f,OAAO,cAMnD,IAAMigB,EAAiBT,EAASE,EAEhC,OACE,kBAAC,IAAM9K,SAAP,KACE,kBAACzO,GAAA,EAAD,CAAKM,MAAOoY,GAAWa,EAAQF,EAAQ,KAAM7L,OAAK,GAChD,kBAAC0K,GAAA,EAAD,CAAYhf,QAAQ,MAApB,UAA6B4E,IAC3Bgc,GACAjgB,OAAO,WAFT,gBAIF,kBAACqe,GAAA,EAAD,CAAYhf,QAAQ,SAApB,aAAmC4E,IAAQub,GAAQxf,OACjD,aAEF,kBAAC,GAAD,CAAakf,gBAAiBQ,EAAQF,EAAQL,OAAQ,KAvB1D,MAgCVgB,EAAa7R,KAAK8R,IAhDpB,EAA4Cd,EAA5C,+CAAwD,IAHvB,kFAsDjC,OAAOa,IACN,CAACb,EAAYhQ,IAEVqR,EAAkBriB,uBAAY,SAACkE,GAAD,OAAYkW,GAAgB,KAAO,CACrEA,IAGF,OAAI8B,EACK,yCACEnf,GACTD,QAAQC,MAAMA,GACP,2BAAIA,EAAMJ,UAIjB,kBAACkL,GAAA,EAAD,CAAKC,QAAQ,OAAOC,cAAc,SAAS0C,SAAS,SAAS4K,OAAK,GAChE,kBAACiN,GAAA,EAAD,KACE,kBAACza,GAAA,EAAD,CAAKyF,QAAS,GACZ,kBAACI,GAAA,EAAD,CAAMC,WAAS,EAAC3F,WAAW,SAASkG,QAAQ,SAASN,QAAS,GAC5D,kBAACF,GAAA,EAAD,CAAMG,MAAI,GACR,kBAACQ,GAAA,EAAD,CACEtN,QAAQ,YACRoH,MAAM,YACNmG,UAAW,kBAAC,KAAD,MACXnD,SAAU,YACVsD,QAAS4T,KAGb,kBAAC3U,GAAA,EAAD,CAAMG,MAAI,GACR,kBAACQ,GAAA,EAAD,CACErB,UAAWuV,IACXC,GAAE,mBAAc1P,EAAd,cACF/R,QAAQ,YACRuN,UAAW,kBAAC,KAAD,MACXnD,SAAU,eAGd,kBAACuC,GAAA,EAAD,CAAMG,MAAI,GACR,kBAACQ,GAAA,EAAD,CACEtN,QAAQ,YACRuN,UAAW,kBAAC,KAAD,MACXnD,SAAU,aAGd,kBAACuC,GAAA,EAAD,CAAMG,MAAI,GACR,kBAACQ,GAAA,EAAD,CACErB,UAAWuV,IACXC,GAAE,mBAAc1P,GAChB/R,QAAQ,YACRuN,UAAW,kBAAC,KAAD,MACXnD,SAAU,eAKlB,kBAACtD,GAAA,EAAD,CAAK4a,SAAU,EAAGhY,SAAS,QACzB,kBAACiD,GAAA,EAAD,CAAMQ,QAAQ,SAASP,WAAS,EAACC,QAAS,GACxC,kBAACF,GAAA,EAAD,CAAMG,MAAI,EAACG,GAAI,IACb,kBAAC+R,GAAA,EAAD,CAAYD,MAAM,SAAS/e,QAAQ,MAChCwc,GAEH,kBAAC1V,GAAA,EAAD,CAAKM,MAAOoY,GAAWqB,IACrB,kBAAC7B,GAAA,EAAD,CAAYD,MAAM,SAAS/e,QAAQ,MAAnC,UACM4gB,EADN,gBAIF,kBAAC5B,GAAA,EAAD,CAAYD,MAAM,SAAS/e,QAAQ,aAAnC,aACSmgB,IAET,kBAAC,GAAD,CAAaN,gBAAiBgB,EAAoBf,OAAQ,MAE3DgB,IAGL,kBAAC,GAAD,CACE/O,OAAQA,EACR7I,KAAMkQ,EACNtX,QAASwX,O,+WCrYnB,IAAMqI,GAAgB1nB,IAAH,MA0JJ2nB,GAtIA,SAAS7hB,GAAQ,IAAD,EAEEiI,YAA2B2Z,IAAnDzZ,EAFsB,EAEtBA,QAASlM,EAFa,EAEbA,MAAOoM,EAFM,EAENA,KAFM,EAIHb,mBAAwB,MAJrB,mBAItB/J,EAJsB,KAIfyD,EAJe,KAMvBkQ,GAAa,OAAJ/I,QAAI,IAAJA,OAAA,EAAAA,EAAM+K,cAAe,GANP,EAUK7R,mBAAQ,WAExC,IAAMugB,EAAyB,GACzBC,EAAe,IAAIC,IAHqB,uBAK9C,IAAI,IAAJ,IAAkB5Q,EAAlB,+CAAyB,CAAC,IAAhBf,EAAe,QAEO,aAA3BA,EAAKzS,OAAO2T,YACbuQ,EAAU5S,KAAKmB,GAGdA,EAAK4R,aACNF,EAAaG,IAAI7R,EAAKjT,KAZoB,kFAiB9C,MAAO,CAAC0kB,YAAWC,kBAEnB,CAAC3Q,IAnBI0Q,EAVsB,EAUtBA,UAAWC,EAVW,EAUXA,aAqBZI,EAAY5gB,mBAAQ,WAExB,IAAM4gB,EAAwB,GAE9B,GAAG1kB,GAASskB,EAAanQ,IAAInU,GAAQ,CAAC,IAAD,uBAEnC,IAAI,IAAJ,IAAkB2T,EAAlB,+CAAyB,CAAC,IAAhBf,EAAe,QAEpBA,EAAKzS,OAAOR,KAAOK,GAEpB0kB,EAASjT,KAAKmB,IANiB,mFAcrC,OAAO8R,IAEN,CAACJ,EAActkB,EAAO2T,IAEzBL,qBAAU,WAAQuK,SAAS5P,MAAQ,uBAEnC,IAAM1J,EAAW9C,uBAAY,SAACkE,GAAY,IAAD,EACvClC,GAAc,OAALkC,QAAK,IAALA,GAAA,UAAAA,EAAOC,cAAP,eAAe5F,QAAS,QACjC,CAACyD,IAEH,GAAGiH,EACD,OAAO,yCACF,GAAGlM,EACR,OAAO,2BAAIA,EAAMJ,SAInB,IAAMumB,EAAeD,EAASzkB,OAAS,EAEvC,OAAO,kBAACqJ,GAAA,EAAD,CACL4a,SAAU,EACV3a,QAAQ,OACRG,eAAe,SACfD,WAAW,SACXD,cAAc,SACdsN,OAAK,GAEL,kBAACiN,GAAA,EAAD,KACE,kBAACza,GAAA,EAAD,CAAKyF,QAAS,EAAG+H,OAAK,GACpB,kBAAC0K,GAAA,EAAD,CAAYD,MAAM,SAAS3X,MAAM,UAAUpH,QAAQ,MAAnD,sBAIF,kBAAC8G,GAAA,EAAD,CAAKsb,SAAS,mBAAmB9N,OAAK,GACpC,kBAACO,GAAA,EAAD,CAAa7U,QAAQ,UACnB,kBAACqiB,GAAA,EAAD,mBACA,kBAACC,GAAA,EAAD,CACE9kB,MAAOA,EACPuE,SAAUA,EACVwgB,WAAS,GACTV,EAAUtb,KAAI,SAAC6J,GAEf,IAAMrQ,EAAQ,CACZkM,UAAUuV,IACVC,GAAG,eAAD,OAAgBrR,EAAKjT,IACvBmC,IAAI8Q,EAAKjT,GACTK,MAAM4S,EAAKjT,GACXiN,SAASgG,EAAKvS,MAQhB,OALGuS,EAAK4R,qBACCjiB,EAAMkM,iBACNlM,EAAM0hB,IAGR,kBAACe,GAAA,EAAaziB,SAK1BoiB,GACC,kBAACrb,GAAA,EAAD,CAAK2b,GAAI,GACP,kBAAC3b,GAAA,EAAD,CAAK2b,GAAI,EAAGL,SAAS,mBAAmB9N,OAAK,GAC3C,kBAACO,GAAA,EAAD,CAAa7U,QAAQ,UACnB,kBAACqiB,GAAA,EAAD,uBACA,kBAACC,GAAA,EAAD,CAAQC,WAAS,GAAEL,EAAS3b,KAAI,SAAC6J,GAC7B,IAAMrQ,EAAQ,CACZkM,UAAUuV,IACVC,GAAG,eAAD,OAAgBrR,EAAKjT,IACvBmC,IAAI8Q,EAAKjT,GACTK,MAAM4S,EAAKjT,GACXiN,SAASgG,EAAKvS,MAGhB,OAAO,kBAAC2kB,GAAA,EAAaziB,a,8LCjJvC,ICuSY2iB,GDvSNC,GAAkB,SAAC5iB,GAAW,IAC1B5C,EAAOylB,cAAPzlB,GACR,OAAOA,EAAK,kBAAC,GAAD,CAAW4U,OAAQ5U,IAAS,oDAGpC0lB,GAAkB5oB,IAAH,MAUf6oB,GAAoB,SAAC/iB,GAAW,IAAD,EAC3B5C,EAAOylB,cAAPzlB,GAD2B,EAEF6K,YAAyB6a,GAAiB,CACzE9kB,UAAW,CAAEZ,QADSiL,GAFW,EAE3BF,QAF2B,EAElBlM,MAFkB,EAEXoM,MAGlB8Q,GAAmB,OAAJ9Q,QAAI,IAAJA,GAAA,UAAAA,EAAM6H,kBAAN,eAAkBpS,MACnCuK,EAAK6H,WAAWpS,UAChByE,EACJ,OACE,kBAAC,GAAD,CAAS6W,KAAMrC,GAAYiM,KAAMhR,OAAQ5U,EAAI+b,aAAcA,KAIzD8J,GAAyB,SAACjjB,GAAW,IAAD,EAChC5C,EAAOylB,cAAPzlB,GADgC,EAEP6K,YAAyB6a,GAAiB,CACzE9kB,UAAW,CAAEZ,QADSiL,GAFgB,EAEhCF,QAFgC,EAEvBlM,MAFuB,EAEhBoM,MAGlB8Q,GAAmB,OAAJ9Q,QAAI,IAAJA,GAAA,UAAAA,EAAM6H,kBAAN,eAAkBpS,MAAlB,oBACJuK,EAAK6H,WAAWpS,MAC7B,YACJ,OACE,kBAAC,GAAD,CACEsb,KAAMrC,GAAY7R,UAClB8M,OAAQ5U,EACR+b,aAAcA,KAqBL+J,GAhBA,SAACljB,GACd,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOmjB,OAAK,EAACpnB,KAAK,IAAImQ,UAAW2V,KACjC,kBAAC,IAAD,CAAOsB,OAAK,EAACpnB,KAAK,kBAAkBmQ,UAAW0W,KAC/C,kBAAC,IAAD,CAAOO,OAAK,EAACpnB,KAAK,WAAWmQ,UAAWgN,KACxC,kBAAC,IAAD,CAAOiK,OAAK,EAACpnB,KAAK,eAAemQ,UAAW6W,KAC5C,kBAAC,IAAD,CACEI,OAAK,EACLpnB,KAAK,yBACLmQ,UAAW+W,O,wCEvDNG,GAAS,4BAITC,GAAS,4BAGTC,GAAQ,2BAQRC,GAAmB,sCAInBC,GAAqB,wCAKrBC,GAAiB,oCAGjBC,GAAmB,sCAGnBC,GAAiB,oCAGjBC,GAAmB,sCAGnBC,GAAiB,oCAGjBC,GAAmB,sCAInBC,GAAiB,oCAGjBC,GAAmB,sCAGnBC,GAAiB,oCAGjBC,GAAmB,sCAGnBC,GAAiB,oCAGjBC,GAAmB,sCAGnBC,GAAgB,mCAKhBC,GAAiB,oCAIjBC,GAAiB,oCAGjBC,GAAmB,sCAInBC,GAAgB,mCAGhBC,GAAkB,qCAGlBC,GAAgB,mCAGhBC,GAAkB,qCAGlBC,GAAgB,mCAGhBC,GAAkB,qCAGlBC,GAAe,kCAKfC,GAAe,kCAMfC,GAAgB,mCAGhBC,GAAkB,qCAGlBC,GAAgB,mCAIhBC,GAAkB,qCAGlBC,GAAgB,mCAGhBC,GAAkB,qCAGlBC,GAAe,kCAKfC,GAAuB,0CAGvBC,GACX,4CAGWC,GAAuB,0CAEvBC,GACT,4CAISC,GAAmB,sCAInBC,GAAqB,wCAIrBC,GAAkB,qCAGlBC,GAAoB,uCAGpBC,GAAkB,qCAIlBC,GAAoB,uCAGpBC,GAAkB,qCAGlBC,GAAoB,uCAIpBC,GAAuB,0CAIvBC,GACX,4C,SC5LWC,GAIX,WAAYC,GAAkB,0BAH9BC,MAAQ,GAGqB,KAF7B/oB,WAE6B,OAD7BxB,MAAqB,KAEnBwqB,KAAKhpB,MAAQ8oB,GAIJG,GAAgB,SAAOC,EAAWC,EAAUxpB,EACvDypB,EAAeC,GAEf,IAAI,IAAIC,EAAI,EAAG3U,EAAMuU,EAAMjpB,OAAQqpB,EAAI3U,EAAK2U,IAAI,CAC9C,IAAMlO,EAAQ8N,EAAMI,GACpB,GAAGlO,EAAMgO,KAAqBzpB,EAAI,CAChC,IAAM4pB,EAAWF,EAAQjO,EAAO+N,GAChC,OAAGI,IAAanO,EACR,GAAN,mBACK8N,EAAMpY,MAAM,EAAGwY,IADpB,CAEEC,GAFF,YAGKL,EAAMpY,MAAMwY,EAAI,KAGdJ,GAIb,OAAOA,GFuQHtpB,GAAS4pB,aAAgB,CAC7B7pB,GAAG,eAACupB,EAAD,uDAAuB,KAAMC,EAA7B,8CAAgDA,EAAOxkB,OAASghB,GAChEwD,EAAOM,QAAQtc,SAAW,KAAQ+b,GACrCvkB,KAnOW,WAEZ,IAAD,EAFcukB,EAEd,uDAFsB,IAAIL,GAAmC,MACzDM,EACJ,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKkiB,GACH,OAAOqC,EAAMlpB,QAAUmpB,EAAOM,QAAQ9kB,KACpCukB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQ9kB,OAC5C,KAAKmiB,GACH,OAAO,UAAAoC,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAKuoB,GACH,OAAuB,OAAhBmC,EAAM1qB,MAAiB0qB,EAAvB,eAAmCA,EAAnC,CAA0C1qB,MAAM,OACzD,QACE,OAAO0qB,IAsNXzoB,KAjNW,WAEZ,IAAD,IAFcyoB,EAEd,uDAFsB,IAAIL,GAAuB,MAAOM,EAExD,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKqhB,GACH,IAAM+C,EAAQI,EAAOM,QAAQV,MAAMxd,YACnC,OAAO2d,EAAMH,QAAUA,EAAQG,EAAxB,eAAoCA,EAApC,CAA2CH,UAEpD,KAAK9C,GACH,MAAuB,KAAhBiD,EAAMH,MAAeG,EAArB,eAAiCA,EAAjC,CAAwCH,MAAM,KACvD,KAAK7C,GACH,OAAO,UAAAgD,EAAMlpB,aAAN,eAAa2hB,aAAcwH,EAAOM,QAAQzpB,MAAM2hB,UACrDuH,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAKmmB,GACH,OAAO+C,EAAMlpB,MAAN,eAAkBkpB,EAAlB,CAAyBlpB,MAAM,OAAQkpB,EAChD,KAAK9C,GACH,OAAO,UAAA8C,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAK6nB,GACH,OAAO6C,EAAM1qB,MAAN,eAAkB0qB,EAAlB,CAAyB1qB,MAAM,OAAQ0qB,EAChD,QACE,OAAOA,IA4LXzW,WAvLiB,WAElB,IAAD,EAFoByW,EAEpB,uDAF4BvnB,OAAO0c,OAAO,IAAIwK,GAAyB,MACrE,CAACnd,MAAK,IAASyd,EACjB,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKghB,GACH,OAAGwD,EAAOM,QAAQC,SACT,eAAIR,EAAX,CAAkBlpB,MAAMmpB,EAAOM,QAAQC,WAElCR,EACT,KAAK5C,GACH,IAAMyC,EAAQI,EAAOM,QAAQV,MAAMxd,YACnC,OAAO2d,EAAMH,QAAUA,EAAQG,EAAxB,eAAoCA,EAApC,CAA2CH,UAEpD,KAAKxC,GACH,MAAuB,KAAhB2C,EAAMH,MAAeG,EAArB,eAAiCA,EAAjC,CAAwCH,MAAM,KACvD,KAAKvC,GACH,OAAO0C,EAAMlpB,QAAUmpB,EAAOM,QAAQzpB,MACpCkpB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAKymB,GACH,OAAOyC,EAAMlpB,MAAN,eAAkBkpB,EAAlB,CAAyBlpB,MAAM,OAAQkpB,EAChD,KAAKxC,GACH,OAAO,UAAAwC,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAKmoB,GACH,OAAOuC,EAAM1qB,MAAN,eAAkB0qB,EAAlB,CAAyB1qB,MAAM,OAAQ0qB,EAChD,KAAKtC,GACH,IAAMlb,EAAOyd,EAAOM,QAAQ/d,KAC5B,OAAOA,IAASwd,EAAMxd,KAAOwd,EAAtB,eAAkCA,EAAlC,CAAyCxd,SAElD,QACE,OAAOwd,IAyJXxW,SApJe,WAEhB,IAAD,EAFkBwW,EAElB,uDAF0BvnB,OAAO0c,OAAO,IAAIwK,GAAyB,MACnE,CAACnd,MAAK,IAASyd,EACjB,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKqiB,GACH,IAAM+B,EAAQI,EAAOM,QAAQV,MAAMxd,YACnC,OAAO2d,EAAMH,QAAUA,EAAQG,EAAxB,eAAoCA,EAApC,CAA2CH,UAEpD,KAAK9B,GACH,MAAuB,KAAhBiC,EAAMH,MAAeG,EAArB,eAAiCA,EAAjC,CAAwCH,MAAM,KACvD,KAAK7B,GACH,OAAOgC,EAAMlpB,QAAUmpB,EAAOM,QAAQzpB,MACpCkpB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAKmnB,GACH,OAAO+B,EAAMlpB,MAAN,eAAkBkpB,EAAlB,CAAyBlpB,MAAM,OAAQkpB,EAChD,KAAK9B,GACH,OAAO,UAAA8B,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAK6oB,GACH,OAAO6B,EAAM1qB,MAAN,eAAkB0qB,EAAlB,CAAyB1qB,MAAM,OAAQ0qB,EAChD,KAAK5B,GACH,IAAM5b,EAAOyd,EAAOM,QAAQ/d,KAC5B,OAAOA,IAASwd,EAAMxd,KAAOwd,EAAtB,eAAkCA,EAAlC,CAAyCxd,SAElD,QACE,OAAOwd,IA2HXvX,QAAQ,eAACuX,EAAD,uDAAuC,KAAMC,EAA7C,8CACNA,EAAOxkB,OAAS4iB,GAAe4B,EAAOM,QAAQ9X,QAAUuX,GAC1DtX,OAzHa,WAGd,IAAD,EAHgBsX,EAGhB,uDAHwBvnB,OAAO0c,OAC7B,IAAIwK,GAA0C,MAAM,CAACnd,MAAK,IAC1Dyd,EACF,uCAEE,OAAOA,EAAOxkB,MACZ,KAAK6iB,GACH,IAAMuB,EAAQI,EAAOM,QAAQV,MAAMxd,YACnC,OAAO2d,EAAMH,QAAUA,EAAQG,EAAxB,eAAoCA,EAApC,CAA2CH,UAEpD,KAAKtB,GACH,MAAuB,KAAhByB,EAAMH,MAAeG,EAArB,eAAiCA,EAAjC,CAAwCH,MAAM,KACvD,KAAKrB,GACH,OAAO9W,KAAQsY,EAAMlpB,MAAOmpB,EAAOM,QAAQzpB,OACzCkpB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAK2nB,GACH,OAAOuB,EAAMlpB,MAAN,eAAkBkpB,EAAlB,CAAyBlpB,MAAM,OAAQkpB,EAChD,KAAKtB,GACH,OAAO,UAAAsB,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAKqpB,GACH,OAAOqB,EAAM1qB,MAAN,eAAkB0qB,EAAlB,CAAyB1qB,MAAM,OAAQ0qB,EAChD,KAAKpB,GACH,IAAMpc,EAAOyd,EAAOM,QAAQ/d,KAC5B,OAAOA,IAASwd,EAAMxd,KAAOwd,EAAtB,eAAkCA,EAAlC,CAAyCxd,SAElD,QACE,OAAOwd,IA+FXnpB,cA1FoB,WAErB,IAAD,EAFuBmpB,EAEvB,uDAF+BvnB,OAAO0c,OAAO,IAAIwK,GAAyB,MACxE,CAACnd,MAAK,IAASyd,EACjB,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKojB,GACH,OAAOoB,EAAOM,QAAQzpB,OAASkpB,EAAMlpB,QAAUmpB,EAAOM,QAAQzpB,MAAvD,eACDkpB,EADC,CACMlpB,MAAMmpB,EAAOM,QAAQzpB,QAASkpB,EAC7C,KAAKlB,GACH,OAAuB,OAAhBkB,EAAMlpB,MAAiBkpB,EAAvB,eAAmCA,EAAnC,CAA0ClpB,MAAM,OACzD,KAAKioB,GACH,OAAO,UAAAiB,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAK0pB,GACD,OAAuB,OAAhBgB,EAAM1qB,MAAiB0qB,EAAvB,eAAmCA,EAAnC,CAA0C1qB,MAAM,OAC3D,QACE,OAAO0qB,IA2EXxoB,YAtEkB,WAEnB,IAFoBwoB,EAErB,uDAF6B,IAAIL,GAAyB,MACxDM,EACF,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKwjB,GACH,IAAMnoB,EAAQmpB,EAAOM,QAAQzpB,MAAMuL,YACnC,OAAQvL,GAASkpB,EAAMlpB,QAAUA,EAA1B,eAA8CkpB,EAA9C,CAAqDlpB,UAAnBkpB,EAE3C,KAAKd,GACH,OAAuB,OAAhBc,EAAMlpB,MAAiBkpB,EAAvB,eAAmCA,EAAnC,CAA0ClpB,MAAM,OACzD,QACE,OAAOkpB,IA2DXtoB,MAtDY,WAEb,IAAD,EAFesoB,EAEf,uDAFuB,IAAIL,GAAgC,MACzDM,EACF,uCAEE,OAAOA,EAAOxkB,MACZ,KAAK0jB,GACH,OAAOa,EAAMH,QAAUI,EAAOM,QAAQV,MACpCG,EADK,eACOA,EADP,CACcH,MAAMI,EAAOM,QAAQV,QAC5C,KAAKT,GACH,MAAuB,KAAhBY,EAAMH,MAAeG,EAArB,eAAiCA,EAAjC,CAAwCH,MAAM,KACvD,KAAKR,GACH,OAAO3X,KAAQsY,EAAMlpB,MAAOmpB,EAAOM,QAAQzpB,OACzCkpB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAKwoB,GACH,OAAuB,OAAhBU,EAAMlpB,MAAiBkpB,EAAvB,eAAmCA,EAAnC,CAA0ClpB,MAAM,OACzD,KAAKyoB,GACH,OAAO,UAAAS,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAKkqB,GACH,OAAuB,OAAhBQ,EAAM1qB,MAAiB0qB,EAAvB,eAAmCA,EAAnC,CAA0C1qB,MAAM,OACzD,QACE,OAAO0qB,IAkCXroB,WA7BiB,WAElB,IAFmBqoB,EAEpB,uDAF4B,IAAIL,IAA2B,GACzDM,EACF,uCAEE,OAAOA,EAAOxkB,MACZ,KAAKgkB,GACH,OAAOO,EAAMlpB,QAAUmpB,EAAOM,QAAQzpB,MACpCkpB,EADK,eACOA,EADP,CACclpB,MAAMmpB,EAAOM,QAAQzpB,QAC5C,KAAK4oB,GACH,OAAuB,IAAhBM,EAAMlpB,MAAkBkpB,EAAxB,eAAoCA,EAApC,CAA2ClpB,OAAM,IAC1D,QACE,OAAOkpB,O,SAqBDhE,O,+BAAAA,I,2BAAAA,I,0BAAAA,Q,KAMZ,IAsBMyE,GAAqBH,aAAgB,CACzC7pB,GAAG,eAACupB,EAAD,uDAAgB,GAAIC,EAApB,8CACDA,EAAOxkB,OAASghB,GAASwD,EAAOM,QAAQG,SAAWV,GACrDtpB,UACA8pB,SAAS,WAA+C,IAA9CR,EAA6C,uDAA9B,GAAIC,EAA0B,uCACrD,OAAGA,EAAOxkB,OAASghB,IAAUwD,EAAOM,QAAQC,SACnCP,EAAOM,QAAQC,SAEjBR,GAETW,OAhCa,WAId,IAAD,EAJgBX,EAIhB,uDAJwB,CACpB1nB,OAAO0jB,GAAa4E,aACpBtrB,MAAM,MACL2qB,EACL,uCAEE,OAAOA,EAAOxkB,MACZ,ICzS6B,4BD0S3B,OAAOukB,EAAM1nB,SAAW2nB,EAAOM,QAAQjoB,OACnC0nB,EADG,eACSA,EADT,CACgB1nB,OAAO2nB,EAAOM,QAAQjoB,SAC/C,KAAKskB,GACH,OAAO,UAAAoD,EAAM1qB,aAAN,eAAaJ,WAAY+qB,EAAOM,QAAQjrB,MAAMJ,QACnD8qB,EADK,eACOA,EADP,CACc1qB,MAAM2qB,EAAOM,QAAQjrB,QAC5C,KAAKunB,GACH,OAAuB,OAAhBmD,EAAM1qB,MAAiB0qB,EAAvB,eAAmCA,EAAnC,CAA0C1qB,MAAM,OACzD,QACE,OAAO0qB,M,UGnUAa,GAAY,uBAGZC,GAAoB,+BAIpBC,GAAW,sBAGXC,GAAmB,8BAInBC,GAAY,uBAGZC,GAAoB,+BAIpBC,GAAW,sBAEXC,GAAS,oBAGTC,GAAO,kBAEPC,GAAO,kBAGPC,GAAmB,8BCdnBC,GAWX,WAAYC,GAAmB,IAAD,8BATrBA,SASqB,OARrBC,WAQqB,OAPrBjrB,QAOqB,OAN9BqJ,WAM8B,OAL9B3I,UAK8B,OAJ9B8L,WAI8B,OAH9B0e,eAG8B,OAF9BzL,YAE8B,EAC5B4J,KAAK2B,IAAL,eAAeA,GACf3B,KAAK4B,MAAQD,EAAIC,MACjB5B,KAAKrpB,GAAKgrB,EAAIhrB,GACdqpB,KAAKhgB,MAAQ2hB,EAAI3hB,MACjBggB,KAAK3oB,KAAOsqB,EAAItqB,KAChB2oB,KAAK7c,MAAQwe,EAAIxe,MACjB6c,KAAK6B,UAAL,iBAAiBF,QAAjB,IAAiBA,OAAjB,EAAiBA,EAAKE,iBAAtB,SACA7B,KAAK5J,OAAL,iBAAcuL,QAAd,IAAcA,OAAd,EAAcA,EAAKvL,cAAnB,UAKS0L,GAAY,SAAC5B,EAAiBC,GAEzC,OAAOA,EAAOxkB,MACZ,KAAKolB,GACH,OAAOb,EAAMlgB,QAAUmgB,EAAOM,QAAQzgB,MACpCkgB,EADK,eACOA,EADP,CACclgB,MAAMmgB,EAAOM,QAAQzgB,QAC5C,KAAKghB,GACH,OAAOd,EAAMlgB,QAAUkgB,EAAMyB,IAAI3hB,MAC/BkgB,EADK,eACOA,EADP,CACclgB,MAAMkgB,EAAMyB,IAAI3hB,QACvC,KAAKihB,GACH,OAAOf,EAAM7oB,OAAS8oB,EAAOM,QAAQppB,KACnC6oB,EADK,eACOA,EADP,CACc7oB,KAAK8oB,EAAOM,QAAQppB,OAC3C,KAAK6pB,GACH,OAAOhB,EAAM7oB,OAAS6oB,EAAMyB,IAAItqB,KAC9B6oB,EADK,eACOA,EADP,CACc7oB,KAAK6oB,EAAMyB,IAAItqB,OACtC,KAAK8pB,GACH,OAAOjB,EAAM/c,QAAUgd,EAAOM,QAAQtd,MACpC+c,EADK,eACOA,EADP,CACc/c,MAAMgd,EAAOM,QAAQtd,QAC5C,KAAKie,GACH,OAAOlB,EAAM/c,QAAU+c,EAAMyB,IAAIxe,MAC/B+c,EADK,eACOA,EADP,CACc/c,MAAM+c,EAAMyB,IAAIxe,QACvC,KAAKke,GACH,OAA2B,IAApBnB,EAAM2B,UAAqB3B,EAA3B,eAAuCA,EAAvC,CAA8C2B,WAAU,IACjE,KAAKP,GACH,OAA2B,IAApBpB,EAAM2B,UAAsB3B,EAA5B,eAAwCA,EAAxC,CAA+C2B,WAAU,IAClE,KAAKN,GACH,OAAwB,IAAjBrB,EAAM9J,OAAkB8J,EAAxB,eAAoCA,EAApC,CAA2C9J,QAAO,IAC3D,KAAKoL,GACH,OAAwB,IAAjBtB,EAAM9J,OAAmB8J,EAAzB,eAAqCA,EAArC,CAA4C9J,QAAO,IAC5D,KAAKqL,GACH,IAAMM,EAAe,IAAIL,GAAUxB,EAAMyB,KACzC,OAAO/Z,KAAQsY,EAAO6B,GAAgB7B,EAAQ6B,EAEhD,QACE,OAAO7B,IAUA8B,GAAkB,UAAG,SAArBA,EAA+BC,GAAV,mFAE1BC,EAA6B,GAC7BC,EAAe,IAAIlX,IAErBmX,EAAY,EALgB,cAMfH,GANe,iDAMtBnpB,EANsB,YAQ3BmpB,EAAII,eAAevpB,GARQ,oBAUtBwpB,EAAOL,EAAInpB,GAVW,EAWLwpB,EAAhBtiB,MAEM,QAFNA,OAXqB,MAWb,KAXa,6DAiBlBoiB,IAAcpiB,EAjBI,iBAmB1B,OAnB0B,UAmBpBsiB,EAnBoB,YAqBpBH,EAAahX,MAAMiX,GArBC,iBAuBxB,OAvBwB,UAuBlBD,EAAa9W,IAAI+W,GAvBC,wDA2BlBpiB,EAAQ,EAEhBmiB,EAAatV,IAAI7M,EAAOsiB,GAIxBJ,EAAezZ,KAAK6Z,GAjCM,wDAyCzBJ,GAzCyB,qCAArBF,MA6CAO,GAAW,WACvB,IADwBrC,EACzB,uDAD0C,GAAIC,EAC9C,uCACE,OAAOA,EAAOxkB,MACZ,IDxIkB,oBCyIhB,OAAOwkB,EAAOM,QAAQ9pB,MAAMupB,EACxBA,EADG,eACSA,EADT,gBACiBC,EAAOM,QAAQ9pB,GAAI,IAAI+qB,GAAUvB,EAAOM,WAClE,KAAKM,GAEH,IAAMyB,EAAWtC,EAAMC,EAAOM,QAAQ9pB,IAAIqJ,MACpCyiB,EAAWtC,EAAOM,QAAQzgB,MAEhC,GAAGwiB,IAAaC,EAEd,OAAOvC,EAEF,GAAGsC,EAAWC,EAAU,CAE7B,IAAMC,EAAW,GAFY,uBAI7B,IAAI,IAAJ,IAAiBV,GAAmB9B,GAApC,+CAA4C,CAAC,IAAnC+B,EAAkC,QAE1C,GAAGA,EAAIjiB,MAAQyiB,EACb,MACQR,EAAIjiB,MAAQwiB,IAEZP,EAAIjiB,QAAUwiB,EACtBE,EAAST,EAAItrB,IAAOmrB,GAAUG,EAAD,eAAU9B,EAAV,CAAkBM,QAAQ,eAClDN,EAAOM,QAD0C,CACjCzgB,MAAMyiB,OAE3BC,EAAST,EAAItrB,IAAOmrB,GAAUG,EAAD,eAAU9B,EAAV,CAAkBM,QAAQ,eAClDN,EAAOM,QAD0C,CACjCzgB,MAAMiiB,EAAIjiB,MAAQ,SAfd,kFAoB7B,OAAO,eAAIkgB,EAAX,GAAqBwC,GAIrB,IAAMA,EAAW,GAFZ,uBAIL,IAAI,IAAJ,IAAiBV,GAAmB9B,GAApC,+CAA4C,CAAC,IAAnC+B,EAAkC,QAE1C,GAAGA,EAAIjiB,MAAQwiB,EACb,MACQP,EAAIjiB,MAAQyiB,IAEZR,EAAIjiB,QAAUwiB,EACtBE,EAAST,EAAItrB,IAAOmrB,GAAUG,EAAD,eAAU9B,EAAV,CAAkBM,QAAQ,eAClDN,EAAOM,QAD0C,CACjCzgB,MAAMyiB,OAE3BC,EAAST,EAAItrB,IAAMmrB,GAAUG,EAAD,eAAU9B,EAAV,CAAkBM,QAAQ,eACjDN,EAAOM,QADyC,CAChCzgB,MAAMiiB,EAAIjiB,MAAQ,SAftC,kFAoBL,OAAO,eAAIkgB,EAAX,GAAqBwC,GAKzB,KAAK1B,GAEH,IAAM0B,EAAW,GAFI,uBAIrB,IAAI,IAAJ,IAAiBV,GAAmB9B,GAApC,+CAA4C,CAAC,IAAnC+B,EAAkC,QAE1CS,EAAST,EAAItrB,IAAMmrB,GAAUG,EAAK9B,IANf,kFAUrB,OAAO,eAAID,EAAX,GAAqBwC,GAGvB,KAAKzB,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACH,GAAGtB,EAAOM,QAAQ9pB,MAAMupB,EAAO,CAC7B,IAAMyC,EAAUzC,EAAMC,EAAOM,QAAQ9pB,IAC/BisB,EAAUd,GAAUa,EAASxC,GACnC,OAAOyC,IAAYD,EACjBzC,EADK,eACOA,EADP,gBACeC,EAAOM,QAAQ9pB,GAAIisB,IAE3C,OAAO1C,EACT,QACE,OAAOA,IC/NA2C,GAAW,mBAGXC,GAAY,oBCDnBC,GAAM,WAA2C,IAA1C7C,EAAyC,uDAAjC,CAACxd,MAAK,GAAQyd,EAAmB,uCAEpD,OAAOA,EAAOxkB,MACZ,KAAKknB,GACH,OAAsB,IAAf3C,EAAMxd,KAAgBwd,EAAtB,eAAkCA,EAAlC,CAAyCxd,MAAK,IACvD,KAAKogB,GACH,OAAsB,IAAf5C,EAAMxd,KAAiBwd,EAAvB,eAAmCA,EAAnC,CAA0Cxd,MAAK,IACxD,QACA,OAAOwd,IAoCE8C,GAAUxC,aAAgB,CACrCyC,KA1BkB,WAAsC,IAArC/C,EAAoC,uDAAvB,GAAIC,EAAmB,uCAEvD,OAAOA,EAAOxkB,MACZ,ID3BsB,qBC6BpB,OAAGwkB,EAAOM,QAAQyC,SAAShD,EAClBA,EAEF,eAAIA,EAAX,gBAAmBC,EAAOM,QAAQyC,MAAOH,QAAIjnB,EAAWqkB,KAC1D,KAAK0C,GACL,KAAKC,GACH,GAAG3C,EAAOM,QAAQyC,SAAShD,EAAO,CAAC,IAC1BgD,EAAS/C,EAAOM,QAAhByC,MACDC,EAASjD,EAAMgD,GACfE,EAASL,GAAII,EAAQhD,GAC3B,OAAOgD,IAAWC,EAASlD,EAApB,eAAgCA,EAAhC,gBAAwCgD,EAAOE,IAExD,OAAOlD,EACT,QACE,OAAOA,MClCEmD,GALF7C,aAAgB,CAC3BwC,WACAM,oBPsViC,WAElC,IAFmCpD,EAEpC,uDAFiE,GAC/DC,EACF,uCAEE,OAAOA,EAAOxkB,MAEZ,KAAKghB,GACH,MAAM,GAAN,mBAAWuD,GAAX,CAAkBS,QAAmB7kB,EAAWqkB,KAClD,KAAKvD,GACL,KAAKC,GAEH,IADA,IAAMlmB,EAAKwpB,EAAOM,QAAQG,SAClBN,EAAI,EAAG3U,EAAMuU,EAAMjpB,OAAQqpB,EAAI3U,EAAK2U,IAC1C,GAAGJ,EAAMI,GAAG3pB,KAAOA,EACjB,MAAM,GAAN,mBACKupB,EAAMpY,MAAM,EAAGwY,IADpB,YAEKJ,EAAMpY,MAAMwY,EAAI,KAIzB,OAAOJ,EAGT,KAAKrC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKf,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKE,GACL,KAAKE,GACL,KAAKE,GACL,KAAKL,GACL,KAAKE,GACL,KAAKE,GACL,KAAKK,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKG,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,ICtY6B,4BDuY7B,KAAK5C,GACL,KAAKC,GACL,KAAKkC,GACL,KAAKC,GACL,KAAKS,GACL,KAAKC,GACH,OAAOK,GAAcC,EAAOC,EAC1BA,EAAOM,QAAQG,SAAU,KAAMD,IACnC,QACE,OAAOT,IO9ZXqD,UHmOuB,WAExB,IAFyBrD,EAE1B,uDAF4C,GAAIC,EAEhD,uCAEE,OAAOA,EAAOxkB,MACZ,ID9OkB,oBC8OL,IACJimB,EAASzB,EAAOM,QAAhBmB,MACP,GAAGA,KAAS1B,EAAO,CACjB,IAAMsD,EAAStD,EAAM0B,GACf6B,EAASlB,GAASiB,EAAQrD,GAChC,OAAOqD,IAAWC,EAASvD,EAApB,eAAgCA,EAAhC,gBAAwC0B,EAAO6B,IAExD,OAAO,eAAIvD,EAAX,gBAAmB0B,EAAOW,QAASzmB,EAAWqkB,KAEhD,KAAKY,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GACL,KAAKC,GAAkB,IACdG,EAASzB,EAAOM,QAAhBmB,MACP,GAAGA,KAAS1B,EAAO,CACjB,IAAMsD,EAAStD,EAAM0B,GACf6B,EAASlB,GAASiB,EAAQrD,GAChC,OAAOqD,IAAWC,EAASvD,EAApB,eAAgCA,EAAhC,gBAAwC0B,EAAO6B,IAExD,OAAOvD,EAET,QACE,OAAOA,MI9PEwD,GALDC,aAAe,CAC3BtD,QAASgD,KCDI,SAASO,KACtB,OACE,kBAAC,WAAD,KACE,kBAACC,EAAA,EAAD,MACA,kBAAC,IAAD,CAAUH,MAAOA,IACf,kBAAC,IAAD,CAAgBhtB,OAAQA,GACtB,kBAAC,IAAD,KAeE,kBAAC,GAAD,UCpBQotB,QACW,cAA7BtvB,OAAOC,SAASsvB,UAEe,UAA7BvvB,OAAOC,SAASsvB,UAEhBvvB,OAAOC,SAASsvB,SAASvkB,MACvB,2DCZNwkB,IAASzO,OAAO,kBAACqO,GAAD,MAAS/O,SAASoP,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMhU,MAAK,SAAAiU,GACjCA,EAAaC,kB","file":"static/js/main.96429168.chunk.js","sourcesContent":["import {\n  InMemoryCache,\n  IntrospectionFragmentMatcher,\n} from \"apollo-cache-inmemory\";\n\nimport introspectionQueryResultData from \"./fragmentTypes.json\";\n\nconst fragmentMatcher = new IntrospectionFragmentMatcher({\n  introspectionQueryResultData,\n});\n\nconst inMemoryCache = new InMemoryCache({ fragmentMatcher, addTypename: true });\n\nexport default inMemoryCache;\n","import gql from 'graphql-tag';\n\nexport default gql`\n\n  type LC_JournalEntryUpsertSource {\n    sourceType:JournalEntrySourceType!\n    id:ID!\n  }\n\n  type LC_JournalEntryUpsertFields {\n    id:ID\n    date:String\n    department:[ID!]!\n    type:ID\n    paymentMethod:ID\n    total:Rational\n    source:[LC_JournalEntryUpsertSource!]!\n  }\n\n  type LC_JournalEntryUpsertInputValues {\n    deptInput:String\n    totalInput:String\n    srcInput:String\n    srcType:JournalEntrySourceType\n  }\n\n  type LC_JournalEntryUpsertInputErrors {\n    dateError:String\n    deptError:String\n    typeError:String\n    payMethodError:String\n    totalError:String\n    srcError:String\n  }\n\n  enum LC_JournalEntryUpsertSubmitStatus {\n    NOT_SUBMITTED\n    SUBMITTING\n    SUBMITTED\n  }\n\n  enum LC_JournalEntryUpsertType {\n    UPDATE\n    ADD\n  }\n\n  type LC_JournalEntryUpsert {\n    id:ID!\n    valid:Boolean!\n    type:LC_JournalEntryUpsertType!\n    submitStatus:LC_JournalEntryUpsertSubmitStatus!\n    submitError:String\n    inputValues:LC_JournalEntryUpsertInputValues!\n    inputErrors:LC_JournalEntryUpsertInputErrors!\n    fields:LC_JournalEntryUpsertFields!\n  }\n\n  extend type Query {\n    lc_journalEntryUpserts:[LC_JournalEntryUpsert!]!\n  }\n  \n`;","import { GraphQLResolveInfo, GraphQLScalarType, GraphQLScalarTypeConfig } from 'graphql';\nimport { Context } from './types';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\nexport type RequireFields<T, K extends keyof T> = { [X in Exclude<keyof T, K>]?: T[X] } & { [P in K]-?: NonNullable<T[P]> };\n/** All built-in and custom scalars, mapped to their actual values */\nexport type Scalars = {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  /** The `Upload` scalar type represents a file upload. */\n  Upload: any;\n};\n\nexport type Budget = {\n   __typename?: 'Budget';\n  id: Scalars['ID'];\n  amount: Rational;\n  owner: BudgetOwner;\n};\n\nexport type BudgetOwner = Department | Business;\n\nexport type Business = {\n   __typename?: 'Business';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  budget?: Maybe<Budget>;\n  departments: Array<Department>;\n  vendor?: Maybe<Vendor>;\n};\n\nexport type BusinessAddFields = {\n  name: Scalars['String'];\n};\n\nexport type ByIdFilter = {\n  eq?: Maybe<Scalars['ID']>;\n};\n\nexport enum CacheControlScope {\n  Public = 'PUBLIC',\n  Private = 'PRIVATE'\n}\n\nexport type Department = {\n   __typename?: 'Department';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  code?: Maybe<Scalars['String']>;\n  budget?: Maybe<Budget>;\n  business: Business;\n  parent: DepartmentAncestor;\n  ancestors: Array<DepartmentAncestor>;\n  descendants: Array<Department>;\n  virtualRoot?: Maybe<Scalars['Boolean']>;\n};\n\nexport type DepartmentAddFields = {\n  name: Scalars['String'];\n};\n\nexport type DepartmentAncestor = Department | Business;\n\nexport enum FilterType {\n  Include = 'INCLUDE',\n  Exclude = 'EXCLUDE'\n}\n\nexport type JournalEntiresWhereInput = {\n  department?: Maybe<JournalEntriesWhereDepartment>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n  deleted?: Maybe<Scalars['Boolean']>;\n  lastUpdate?: Maybe<JournalEntriesWhereLastUpdate>;\n  lastUpdateRefund?: Maybe<JournalEntriesWhereLastUpdate>;\n  or?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>;\n  and?: Maybe<Array<Maybe<JournalEntiresWhereInput>>>;\n};\n\nexport type JournalEntriesWhereDepartment = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  includeDescendants?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntriesWhereLastUpdate = {\n  gt?: Maybe<Scalars['String']>;\n  lt?: Maybe<Scalars['String']>;\n  gte?: Maybe<Scalars['String']>;\n  lte?: Maybe<Scalars['String']>;\n};\n\nexport type JournalEntry = {\n   __typename?: 'JournalEntry';\n  id: Scalars['ID'];\n  refunds: Array<JournalEntryRefund>;\n  type: JournalEntryType;\n  date: Scalars['String'];\n  department: Department;\n  category: JournalEntryCategory;\n  paymentMethod: PaymentMethod;\n  description?: Maybe<Scalars['String']>;\n  total: Rational;\n  source: JournalEntrySource;\n  reconciled: Scalars['Boolean'];\n  lastUpdate: Scalars['String'];\n  deleted: Scalars['Boolean'];\n};\n\nexport type JournalEntryAddFields = {\n  date: Scalars['String'];\n  department: Scalars['ID'];\n  type: JournalEntryType;\n  category: Scalars['ID'];\n  paymentMethod: Scalars['ID'];\n  description?: Maybe<Scalars['String']>;\n  total: RationalInput;\n  source: JournalEntrySourceInput;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryAddRefundFields = {\n  date: Scalars['String'];\n  description?: Maybe<Scalars['String']>;\n  paymentMethod: Scalars['ID'];\n  total: RationalInput;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryCategory = {\n   __typename?: 'JournalEntryCategory';\n  id: Scalars['ID'];\n  name: Scalars['String'];\n  type: JournalEntryType;\n  parent?: Maybe<JournalEntryCategory>;\n  ancestors: Array<JournalEntryCategory>;\n  children: Array<JournalEntryCategory>;\n};\n\nexport type JournalEntryCategoryWhereInput = {\n  name?: Maybe<JournalEntryCategoryWhereNameInput>;\n  type?: Maybe<JournalEntryCategoryWhereTypeInput>;\n  hasParent?: Maybe<Scalars['Boolean']>;\n  parent?: Maybe<JournalEntryCategoryWhereParentInput>;\n  or?: Maybe<Array<Maybe<JournalEntryCategoryWhereInput>>>;\n  and?: Maybe<Array<Maybe<JournalEntryCategoryWhereInput>>>;\n};\n\nexport type JournalEntryCategoryWhereNameInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type JournalEntryCategoryWhereParentInput = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n};\n\nexport type JournalEntryCategoryWhereTypeInput = {\n  eq?: Maybe<JournalEntryType>;\n  ne?: Maybe<JournalEntryType>;\n};\n\nexport type JournalEntryRefund = {\n   __typename?: 'JournalEntryRefund';\n  id: Scalars['ID'];\n  date: Scalars['String'];\n  description?: Maybe<Scalars['String']>;\n  paymentMethod: PaymentMethod;\n  total: Rational;\n  reconciled: Scalars['Boolean'];\n  lastUpdate: Scalars['String'];\n  deleted: Scalars['Boolean'];\n};\n\nexport type JournalEntrySource = Person | Business | Department;\n\nexport type JournalEntrySourceInput = {\n  sourceType: JournalEntrySourceType;\n  id: Scalars['ID'];\n};\n\nexport enum JournalEntrySourceType {\n  Business = 'BUSINESS',\n  Department = 'DEPARTMENT',\n  Person = 'PERSON'\n}\n\nexport enum JournalEntryType {\n  Credit = 'CREDIT',\n  Debit = 'DEBIT'\n}\n\nexport type JournalEntryUpdateFields = {\n  date?: Maybe<Scalars['String']>;\n  department?: Maybe<Scalars['ID']>;\n  type?: Maybe<JournalEntryType>;\n  category?: Maybe<Scalars['ID']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  description?: Maybe<Scalars['String']>;\n  total?: Maybe<RationalInput>;\n  source?: Maybe<JournalEntrySourceInput>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type JournalEntryUpdatePaymentMethod = {\n  id: Scalars['ID'];\n  fields: PaymentMethodUpdateFields;\n};\n\nexport type JournalEntryUpdateRefundFields = {\n  date?: Maybe<Scalars['String']>;\n  description?: Maybe<Scalars['String']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  total?: Maybe<RationalInput>;\n  reconciled?: Maybe<Scalars['Boolean']>;\n};\n\nexport type Lc_JournalEntryUpsert = {\n   __typename?: 'LC_JournalEntryUpsert';\n  id: Scalars['ID'];\n  valid: Scalars['Boolean'];\n  type: Lc_JournalEntryUpsertType;\n  submitStatus: Lc_JournalEntryUpsertSubmitStatus;\n  submitError?: Maybe<Scalars['String']>;\n  inputValues: Lc_JournalEntryUpsertInputValues;\n  inputErrors: Lc_JournalEntryUpsertInputErrors;\n  fields: Lc_JournalEntryUpsertFields;\n};\n\nexport type Lc_JournalEntryUpsertFields = {\n   __typename?: 'LC_JournalEntryUpsertFields';\n  id?: Maybe<Scalars['ID']>;\n  date?: Maybe<Scalars['String']>;\n  department: Array<Scalars['ID']>;\n  type?: Maybe<Scalars['ID']>;\n  paymentMethod?: Maybe<Scalars['ID']>;\n  total?: Maybe<Rational>;\n  source: Array<Lc_JournalEntryUpsertSource>;\n};\n\nexport type Lc_JournalEntryUpsertInputErrors = {\n   __typename?: 'LC_JournalEntryUpsertInputErrors';\n  dateError?: Maybe<Scalars['String']>;\n  deptError?: Maybe<Scalars['String']>;\n  typeError?: Maybe<Scalars['String']>;\n  payMethodError?: Maybe<Scalars['String']>;\n  totalError?: Maybe<Scalars['String']>;\n  srcError?: Maybe<Scalars['String']>;\n};\n\nexport type Lc_JournalEntryUpsertInputValues = {\n   __typename?: 'LC_JournalEntryUpsertInputValues';\n  deptInput?: Maybe<Scalars['String']>;\n  totalInput?: Maybe<Scalars['String']>;\n  srcInput?: Maybe<Scalars['String']>;\n  srcType?: Maybe<JournalEntrySourceType>;\n};\n\nexport type Lc_JournalEntryUpsertSource = {\n   __typename?: 'LC_JournalEntryUpsertSource';\n  sourceType: JournalEntrySourceType;\n  id: Scalars['ID'];\n};\n\nexport enum Lc_JournalEntryUpsertSubmitStatus {\n  NotSubmitted = 'NOT_SUBMITTED',\n  Submitting = 'SUBMITTING',\n  Submitted = 'SUBMITTED'\n}\n\nexport enum Lc_JournalEntryUpsertType {\n  Update = 'UPDATE',\n  Add = 'ADD'\n}\n\nexport type Mutation = {\n   __typename?: 'Mutation';\n  addBusiness: Business;\n  journalEntryUpdate: JournalEntry;\n  journalEntryAdd: JournalEntry;\n  journalEntryDelete: JournalEntry;\n  journalEntryAddRefund: JournalEntry;\n  journalEntryUpdateRefund: JournalEntry;\n  journalEntryDeleteRefund: JournalEntry;\n  paymentMethodUpdate: PaymentMethod;\n  paymentMethodAdd: PaymentMethod;\n  addPerson: Person;\n};\n\n\nexport type MutationAddBusinessArgs = {\n  fields: BusinessAddFields;\n};\n\n\nexport type MutationJournalEntryUpdateArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type MutationJournalEntryAddArgs = {\n  fields: JournalEntryAddFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type MutationJournalEntryDeleteArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type MutationJournalEntryAddRefundArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryAddRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n};\n\n\nexport type MutationJournalEntryUpdateRefundArgs = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n};\n\n\nexport type MutationJournalEntryDeleteRefundArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type MutationPaymentMethodUpdateArgs = {\n  id: Scalars['ID'];\n  fields: PaymentMethodUpdateFields;\n};\n\n\nexport type MutationPaymentMethodAddArgs = {\n  fields: PaymentMethodAddFields;\n};\n\n\nexport type MutationAddPersonArgs = {\n  fields: PersonAddFields;\n};\n\nexport type PaginateInput = {\n  skip: Scalars['Int'];\n  limit: Scalars['Int'];\n};\n\nexport type PaymentMethod = {\n   __typename?: 'PaymentMethod';\n  id: Scalars['ID'];\n  active: Scalars['Boolean'];\n  refId?: Maybe<Scalars['String']>;\n  name: Scalars['String'];\n  parent?: Maybe<PaymentMethod>;\n  ancestors: Array<PaymentMethod>;\n  children: Array<PaymentMethod>;\n  allowChildren: Scalars['Boolean'];\n  authorization: Array<PaymentMethodAuthorization>;\n};\n\nexport type PaymentMethodAddFields = {\n  active: Scalars['Boolean'];\n  refId?: Maybe<Scalars['String']>;\n  name: Scalars['String'];\n  parent: Scalars['ID'];\n};\n\nexport type PaymentMethodAuthorization = {\n   __typename?: 'PaymentMethodAuthorization';\n  owner: Scalars['Boolean'];\n  entity?: Maybe<PaymentMethodAuthorizedEntity>;\n};\n\nexport type PaymentMethodAuthorizedEntity = Person | Business | Department;\n\nexport type PaymentMethodUpdateFields = {\n  active?: Maybe<Scalars['Boolean']>;\n  refId?: Maybe<Scalars['String']>;\n  name?: Maybe<Scalars['String']>;\n};\n\nexport type PaymentMethodWhereInput = {\n  active?: Maybe<Scalars['Boolean']>;\n  refId?: Maybe<PaymentMethodWhereRefIdInput>;\n  name?: Maybe<PaymentMethodWhereNameInput>;\n  hasParent?: Maybe<Scalars['Boolean']>;\n  parent?: Maybe<PaymentMethodWhereParentInput>;\n  or?: Maybe<Array<Maybe<PaymentMethodWhereInput>>>;\n  and?: Maybe<Array<Maybe<PaymentMethodWhereInput>>>;\n};\n\nexport type PaymentMethodWhereNameInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type PaymentMethodWhereParentInput = {\n  eq?: Maybe<Scalars['ID']>;\n  ne?: Maybe<Scalars['ID']>;\n  in?: Maybe<Array<Maybe<Scalars['ID']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['ID']>>>;\n};\n\nexport type PaymentMethodWhereRefIdInput = {\n  eq?: Maybe<Scalars['String']>;\n  ne?: Maybe<Scalars['String']>;\n  in?: Maybe<Array<Maybe<Scalars['String']>>>;\n  nin?: Maybe<Array<Maybe<Scalars['String']>>>;\n};\n\nexport type Person = {\n   __typename?: 'Person';\n  id: Scalars['ID'];\n  name: PersonName;\n};\n\nexport type PersonAddFields = {\n  name: PersonNameInput;\n};\n\nexport type PersonName = {\n   __typename?: 'PersonName';\n  first: Scalars['String'];\n  last: Scalars['String'];\n};\n\nexport type PersonNameInput = {\n  first: Scalars['String'];\n  last: Scalars['String'];\n};\n\nexport type Query = {\n   __typename?: 'Query';\n  budget: Budget;\n  budgets: Array<Budget>;\n  business: Business;\n  businesses: Array<Business>;\n  department?: Maybe<Department>;\n  departments: Array<Department>;\n  journalEntries: Array<JournalEntry>;\n  journalEntry?: Maybe<JournalEntry>;\n  journalEntryCategories: Array<JournalEntryCategory>;\n  journalEntryCategory: JournalEntryCategory;\n  journalEntryRefund?: Maybe<JournalEntryRefund>;\n  journalEntrySources: Array<JournalEntrySource>;\n  lc_journalEntryUpserts: Array<Lc_JournalEntryUpsert>;\n  paymentMethod?: Maybe<PaymentMethod>;\n  paymentMethods: Array<PaymentMethod>;\n  people: Array<Person>;\n};\n\n\nexport type QueryBudgetArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryBusinessArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryBusinessesArgs = {\n  searchByName?: Maybe<Scalars['String']>;\n};\n\n\nexport type QueryDepartmentArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryDepartmentsArgs = {\n  fromParent?: Maybe<Scalars['ID']>;\n  searchByName?: Maybe<Scalars['String']>;\n};\n\n\nexport type QueryJournalEntriesArgs = {\n  where?: Maybe<JournalEntiresWhereInput>;\n};\n\n\nexport type QueryJournalEntryArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntryCategoriesArgs = {\n  where?: Maybe<JournalEntryCategoryWhereInput>;\n};\n\n\nexport type QueryJournalEntryCategoryArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntryRefundArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryJournalEntrySourcesArgs = {\n  searchByName: Scalars['String'];\n};\n\n\nexport type QueryPaymentMethodArgs = {\n  id: Scalars['ID'];\n};\n\n\nexport type QueryPaymentMethodsArgs = {\n  where?: Maybe<PaymentMethodWhereInput>;\n};\n\n\nexport type QueryPeopleArgs = {\n  searchByName?: Maybe<PersonNameInput>;\n};\n\nexport type Rational = {\n   __typename?: 'Rational';\n  num: Scalars['Int'];\n  den: Scalars['Int'];\n};\n\nexport type RationalInput = {\n  num: Scalars['Int'];\n  den: Scalars['Int'];\n};\n\nexport enum SortDirection {\n  Asc = 'ASC',\n  Desc = 'DESC'\n}\n\nexport type Subscription = {\n   __typename?: 'Subscription';\n  journalEntryAdded: JournalEntry;\n  journalEntryUpdated: JournalEntry;\n  journalEntryUpserted: JournalEntry;\n};\n\n\nexport type User = {\n   __typename?: 'User';\n  id: Scalars['ID'];\n  user: Person;\n};\n\nexport type Vendor = {\n   __typename?: 'Vendor';\n  approved: Scalars['Boolean'];\n  vendorId?: Maybe<Scalars['ID']>;\n};\n\nexport type WhereRegexInput = {\n  pattern: Scalars['String'];\n  flags?: Maybe<Scalars['String']>;\n};\n\nexport type DepartmentName_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DepartmentName_1Query = { __typename?: 'Query', department?: Maybe<{ __typename: 'Department', id: string, name: string }> };\n\nexport type DeptForUpsertAddQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeptForUpsertAddQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type OnEntryUpsert_2SubscriptionVariables = {};\n\n\nexport type OnEntryUpsert_2Subscription = { __typename?: 'Subscription', journalEntryUpserted: (\n    { __typename?: 'JournalEntry', department: { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | { __typename?: 'Business' }> } }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type GetReportDataDept_1Fragment = { __typename: 'Department', id: string, name: string, budget?: Maybe<{ __typename: 'Budget', id: string, amount: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type GetReportDataEntry_1Fragment = { __typename: 'JournalEntry', id: string, type: JournalEntryType, lastUpdate: string, deleted: boolean, category: { __typename: 'JournalEntryCategory', id: string, name: string }, total: { __typename?: 'Rational', num: number, den: number }, department: { __typename: 'Department', id: string, ancestors: Array<{ __typename: 'Department', id: string } | { __typename: 'Business', id: string }> }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, lastUpdate: string, total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type GetReportDataQueryVariables = {\n  deptId: Scalars['ID'];\n  where: JournalEntiresWhereInput;\n};\n\n\nexport type GetReportDataQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department', descendants: Array<(\n      { __typename?: 'Department' }\n      & GetReportDataDept_1Fragment\n    )> }\n    & GetReportDataDept_1Fragment\n  )>, journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_2SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_2Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_2SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_2Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & GetReportDataEntry_1Fragment\n  ) };\n\nexport type OnEntryUpsert_1SubscriptionVariables = {};\n\n\nexport type OnEntryUpsert_1Subscription = { __typename?: 'Subscription', journalEntryUpserted: (\n    { __typename?: 'JournalEntry', department: { __typename?: 'Department', ancestors: Array<{ __typename: 'Department', id: string } | { __typename?: 'Business' }> } }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type ReconcileEntryMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ReconcileEntryMutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type ReconcileRefundMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ReconcileRefundMutation = { __typename?: 'Mutation', journalEntryUpdateRefund: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryRefund_1Fragment = { __typename: 'JournalEntryRefund', id: string, date: string, description?: Maybe<string>, reconciled: boolean, lastUpdate: string, deleted: boolean, total: { __typename?: 'Rational', num: number, den: number }, paymentMethod: { __typename: 'PaymentMethod', id: string, name: string, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> } };\n\nexport type JournalEntry_1Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, description?: Maybe<string>, deleted: boolean, lastUpdate: string, reconciled: boolean, department: { __typename: 'Department', id: string, name: string, ancestors: Array<{ __typename: 'Department', id: string, deptName: string } | { __typename: 'Business', id: string, bizName: string }> }, category: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType, name: string }, paymentMethod: { __typename: 'PaymentMethod', id: string, name: string, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> }, source: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } | { __typename: 'Business', id: string, bizName: string } | { __typename: 'Department', id: string, deptName: string }, total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<(\n    { __typename?: 'JournalEntryRefund' }\n    & JournalEntryRefund_1Fragment\n  )> };\n\nexport type JournalEntries_1QueryVariables = {\n  where: JournalEntiresWhereInput;\n};\n\n\nexport type JournalEntries_1Query = { __typename?: 'Query', journalEntries: Array<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  )> };\n\nexport type JournalEntryAdded_1SubscriptionVariables = {};\n\n\nexport type JournalEntryAdded_1Subscription = { __typename?: 'Subscription', journalEntryAdded: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type JournalEntryUpdated_1SubscriptionVariables = {};\n\n\nexport type JournalEntryUpdated_1Subscription = { __typename?: 'Subscription', journalEntryUpdated: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type DeptIniValueForAddEntryQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeptIniValueForAddEntryQuery = { __typename?: 'Query', department?: Maybe<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type DeleteEntryMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeleteEntryMutation = { __typename?: 'Mutation', journalEntryDelete: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateEntryIniStateQueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type UpdateEntryIniStateQuery = { __typename?: 'Query', journalEntry?: Maybe<{ __typename: 'JournalEntry', id: string, type: JournalEntryType, date: string, description?: Maybe<string>, reconciled: boolean, department: (\n      { __typename?: 'Department' }\n      & DeptEntryOptFragment\n    ), category: (\n      { __typename?: 'JournalEntryCategory', ancestors: Array<(\n        { __typename?: 'JournalEntryCategory' }\n        & CatEntryOptFragment\n      )> }\n      & CatEntryOptFragment\n    ), source: (\n      { __typename?: 'Person' }\n      & SrcEntryPersonOptFragment\n    ) | (\n      { __typename?: 'Business' }\n      & SrcEntryBizOptFragment\n    ) | (\n      { __typename?: 'Department', ancestors: Array<(\n        { __typename?: 'Department' }\n        & SrcEntryDeptOptFragment\n      ) | (\n        { __typename?: 'Business' }\n        & SrcEntryBizOptFragment\n      )> }\n      & SrcEntryDeptOptFragment\n    ), paymentMethod: (\n      { __typename?: 'PaymentMethod', ancestors: Array<(\n        { __typename?: 'PaymentMethod' }\n        & PayMethodEntryOptFragment\n      )> }\n      & PayMethodEntryOptFragment\n    ), total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, date: string, total: { __typename?: 'Rational', num: number, den: number } }> }> };\n\nexport type AddEntryMutationVariables = {\n  fields: JournalEntryAddFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type AddEntryMutation = { __typename?: 'Mutation', journalEntryAdd: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateEntryMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n  personAdd?: Maybe<PersonAddFields>;\n  businessAdd?: Maybe<BusinessAddFields>;\n};\n\n\nexport type UpdateEntryMutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CatEntryOptsQueryVariables = {\n  where: JournalEntryCategoryWhereInput;\n};\n\n\nexport type CatEntryOptsQuery = { __typename?: 'Query', catOpts: Array<(\n    { __typename?: 'JournalEntryCategory' }\n    & CatEntryOptFragment\n  )> };\n\nexport type DeptEntryOptsQueryVariables = {\n  fromParent?: Maybe<Scalars['ID']>;\n};\n\n\nexport type DeptEntryOptsQuery = { __typename?: 'Query', deptOpts: Array<(\n    { __typename?: 'Department' }\n    & DeptEntryOptFragment\n  )> };\n\nexport type PayMethodEntryOptsQueryVariables = {\n  where: PaymentMethodWhereInput;\n};\n\n\nexport type PayMethodEntryOptsQuery = { __typename?: 'Query', paymentMethods: Array<(\n    { __typename?: 'PaymentMethod' }\n    & PayMethodEntryOptFragment\n  )> };\n\nexport type SrcEntryOptsQueryVariables = {\n  name: Scalars['String'];\n  isBiz: Scalars['Boolean'];\n};\n\n\nexport type SrcEntryOptsQuery = { __typename?: 'Query', businesses: Array<(\n    { __typename?: 'Business' }\n    & SrcEntryBizOptFragment\n  )>, people: Array<(\n    { __typename?: 'Person' }\n    & SrcEntryPersonOptFragment\n  )> };\n\nexport type GetEntryRefundInfo_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type GetEntryRefundInfo_1Query = { __typename?: 'Query', journalEntry?: Maybe<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_2Fragment\n  )> };\n\nexport type DeleteRefundMutationVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type DeleteRefundMutation = { __typename?: 'Mutation', journalEntryDeleteRefund: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type UpdateRefundIniStateQueryVariables = {\n  entryId: Scalars['ID'];\n  refundId: Scalars['ID'];\n};\n\n\nexport type UpdateRefundIniStateQuery = { __typename?: 'Query', journalEntry?: Maybe<(\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_2Fragment\n  )>, journalEntryRefund?: Maybe<{ __typename: 'JournalEntryRefund', id: string, date: string, description?: Maybe<string>, reconciled: boolean, paymentMethod: (\n      { __typename?: 'PaymentMethod', ancestors: Array<(\n        { __typename?: 'PaymentMethod' }\n        & PayMethodEntryOptFragment\n      )> }\n      & PayMethodEntryOptFragment\n    ), total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type JournalEntry_2Fragment = { __typename: 'JournalEntry', id: string, date: string, type: JournalEntryType, total: { __typename?: 'Rational', num: number, den: number }, refunds: Array<{ __typename: 'JournalEntryRefund', id: string, deleted: boolean, total: { __typename?: 'Rational', num: number, den: number } }> };\n\nexport type AddRefundMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryAddRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n};\n\n\nexport type AddRefundMutation = { __typename?: 'Mutation', journalEntryAddRefund: { __typename: 'JournalEntry', id: string, refunds: Array<(\n      { __typename?: 'JournalEntryRefund' }\n      & JournalEntryRefund_1Fragment\n    )> } };\n\nexport type UpdateRefundMutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateRefundFields;\n  paymentMethodAdd?: Maybe<PaymentMethodAddFields>;\n  paymentMethodUpdate?: Maybe<JournalEntryUpdatePaymentMethod>;\n};\n\n\nexport type UpdateRefundMutation = { __typename?: 'Mutation', journalEntryUpdateRefund: { __typename: 'JournalEntry', id: string, refunds: Array<(\n      { __typename?: 'JournalEntryRefund' }\n      & JournalEntryRefund_1Fragment\n    )> } };\n\nexport type DeptEntryOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type CatEntryOptFragment = { __typename: 'JournalEntryCategory', id: string, name: string, type: JournalEntryType, parent?: Maybe<{ __typename: 'JournalEntryCategory', id: string }> };\n\nexport type SrcEntryPersonOptFragment = { __typename: 'Person', id: string, personName: { __typename?: 'PersonName', first: string, last: string } };\n\nexport type SrcEntryDeptOptFragment = { __typename: 'Department', id: string, name: string, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } };\n\nexport type SrcEntryBizOptFragment = { __typename: 'Business', id: string, name: string, vendor?: Maybe<{ __typename?: 'Vendor', approved: boolean, vendorId?: Maybe<string> }>, departments: Array<(\n    { __typename?: 'Department' }\n    & SrcEntryDeptOptFragment\n  )> };\n\nexport type PayMethodEntryOptFragment = { __typename: 'PaymentMethod', id: string, refId?: Maybe<string>, name: string, active: boolean, parent?: Maybe<{ __typename: 'PaymentMethod', id: string }> };\n\nexport type DeptsForNav_1QueryVariables = {};\n\n\nexport type DeptsForNav_1Query = { __typename?: 'Query', departments: Array<{ __typename: 'Department', id: string, name: string, virtualRoot?: Maybe<boolean>, parent: { __typename: 'Department', id: string } | { __typename: 'Business', id: string } }> };\n\nexport type AddPerson_1MutationVariables = {\n  fields: PersonAddFields;\n};\n\n\nexport type AddPerson_1Mutation = { __typename?: 'Mutation', addPerson: { __typename: 'Person', id: string, name: { __typename?: 'PersonName', first: string, last: string } } };\n\nexport type AddBusiness_1MutationVariables = {\n  fields: BusinessAddFields;\n};\n\n\nexport type AddBusiness_1Mutation = { __typename?: 'Mutation', addBusiness: { __typename: 'Business', id: string, name: string } };\n\nexport type AddJournalEntry_2MutationVariables = {\n  fields: JournalEntryAddFields;\n};\n\n\nexport type AddJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryAdd: { __typename: 'JournalEntry', id: string } };\n\nexport type UpdateJournalEntry_2MutationVariables = {\n  id: Scalars['ID'];\n  fields: JournalEntryUpdateFields;\n};\n\n\nexport type UpdateJournalEntry_2Mutation = { __typename?: 'Mutation', journalEntryUpdate: (\n    { __typename?: 'JournalEntry' }\n    & JournalEntry_1Fragment\n  ) };\n\nexport type CategoryTypeValidation_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type CategoryTypeValidation_1Query = { __typename?: 'Query', journalEntryCategory: { __typename: 'JournalEntryCategory', id: string, type: JournalEntryType } };\n\nexport type ValidateDeptIsLeaf_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type ValidateDeptIsLeaf_1Query = { __typename?: 'Query', department?: Maybe<{ __typename: 'Department', id: string, descendants: Array<{ __typename: 'Department', id: string }> }> };\n\nexport type CheckValidVendor_1QueryVariables = {\n  id: Scalars['ID'];\n};\n\n\nexport type CheckValidVendor_1Query = { __typename?: 'Query', business: { __typename: 'Business', id: string, vendor?: Maybe<{ __typename?: 'Vendor', approved: boolean }> } };\n\n\n\nexport type ResolverTypeWrapper<T> = Promise<T> | T;\n\nexport type Resolver<TResult, TParent = {}, TContext = {}, TArgs = {}> = ResolverFn<TResult, TParent, TContext, TArgs>;\n\nexport type ResolverFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Promise<TResult> | TResult;\n\nexport type SubscriptionSubscribeFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => AsyncIterator<TResult> | Promise<AsyncIterator<TResult>>;\n\nexport type SubscriptionResolveFn<TResult, TParent, TContext, TArgs> = (\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\nexport interface SubscriptionSubscriberObject<TResult, TKey extends string, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<{ [key in TKey]: TResult }, TParent, TContext, TArgs>;\n  resolve?: SubscriptionResolveFn<TResult, { [key in TKey]: TResult }, TContext, TArgs>;\n}\n\nexport interface SubscriptionResolverObject<TResult, TParent, TContext, TArgs> {\n  subscribe: SubscriptionSubscribeFn<any, TParent, TContext, TArgs>;\n  resolve: SubscriptionResolveFn<TResult, any, TContext, TArgs>;\n}\n\nexport type SubscriptionObject<TResult, TKey extends string, TParent, TContext, TArgs> =\n  | SubscriptionSubscriberObject<TResult, TKey, TParent, TContext, TArgs>\n  | SubscriptionResolverObject<TResult, TParent, TContext, TArgs>;\n\nexport type SubscriptionResolver<TResult, TKey extends string, TParent = {}, TContext = {}, TArgs = {}> =\n  | ((...args: any[]) => SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>)\n  | SubscriptionObject<TResult, TKey, TParent, TContext, TArgs>;\n\nexport type TypeResolveFn<TTypes, TParent = {}, TContext = {}> = (\n  parent: TParent,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => Maybe<TTypes> | Promise<Maybe<TTypes>>;\n\nexport type isTypeOfResolverFn<T = {}> = (obj: T, info: GraphQLResolveInfo) => boolean | Promise<boolean>;\n\nexport type NextResolverFn<T> = () => Promise<T>;\n\nexport type DirectiveResolverFn<TResult = {}, TParent = {}, TContext = {}, TArgs = {}> = (\n  next: NextResolverFn<TResult>,\n  parent: TParent,\n  args: TArgs,\n  context: TContext,\n  info: GraphQLResolveInfo\n) => TResult | Promise<TResult>;\n\n/** Mapping between all available schema types and the resolvers types */\nexport type ResolversTypes = {\n  Query: ResolverTypeWrapper<{}>,\n  ID: ResolverTypeWrapper<Scalars['ID']>,\n  Budget: ResolverTypeWrapper<Omit<Budget, 'owner'> & { owner: ResolversTypes['BudgetOwner'] }>,\n  Rational: ResolverTypeWrapper<Rational>,\n  Int: ResolverTypeWrapper<Scalars['Int']>,\n  BudgetOwner: ResolversTypes['Department'] | ResolversTypes['Business'],\n  Department: ResolverTypeWrapper<Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversTypes['DepartmentAncestor'], ancestors: Array<ResolversTypes['DepartmentAncestor']> }>,\n  String: ResolverTypeWrapper<Scalars['String']>,\n  Business: ResolverTypeWrapper<Business>,\n  Vendor: ResolverTypeWrapper<Vendor>,\n  Boolean: ResolverTypeWrapper<Scalars['Boolean']>,\n  DepartmentAncestor: ResolversTypes['Department'] | ResolversTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: ResolverTypeWrapper<Omit<JournalEntry, 'source'> & { source: ResolversTypes['JournalEntrySource'] }>,\n  JournalEntryRefund: ResolverTypeWrapper<JournalEntryRefund>,\n  PaymentMethod: ResolverTypeWrapper<PaymentMethod>,\n  PaymentMethodAuthorization: ResolverTypeWrapper<Omit<PaymentMethodAuthorization, 'entity'> & { entity?: Maybe<ResolversTypes['PaymentMethodAuthorizedEntity']> }>,\n  PaymentMethodAuthorizedEntity: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  Person: ResolverTypeWrapper<Person>,\n  PersonName: ResolverTypeWrapper<PersonName>,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: ResolverTypeWrapper<JournalEntryCategory>,\n  JournalEntrySource: ResolversTypes['Person'] | ResolversTypes['Business'] | ResolversTypes['Department'],\n  JournalEntryCategoryWhereInput: JournalEntryCategoryWhereInput,\n  JournalEntryCategoryWhereNameInput: JournalEntryCategoryWhereNameInput,\n  JournalEntryCategoryWhereTypeInput: JournalEntryCategoryWhereTypeInput,\n  JournalEntryCategoryWhereParentInput: JournalEntryCategoryWhereParentInput,\n  LC_JournalEntryUpsert: ResolverTypeWrapper<Lc_JournalEntryUpsert>,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  LC_JournalEntryUpsertInputValues: ResolverTypeWrapper<Lc_JournalEntryUpsertInputValues>,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: ResolverTypeWrapper<Lc_JournalEntryUpsertInputErrors>,\n  LC_JournalEntryUpsertFields: ResolverTypeWrapper<Lc_JournalEntryUpsertFields>,\n  LC_JournalEntryUpsertSource: ResolverTypeWrapper<Lc_JournalEntryUpsertSource>,\n  PaymentMethodWhereInput: PaymentMethodWhereInput,\n  PaymentMethodWhereRefIdInput: PaymentMethodWhereRefIdInput,\n  PaymentMethodWhereNameInput: PaymentMethodWhereNameInput,\n  PaymentMethodWhereParentInput: PaymentMethodWhereParentInput,\n  PersonNameInput: PersonNameInput,\n  Mutation: ResolverTypeWrapper<{}>,\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  PaymentMethodAddFields: PaymentMethodAddFields,\n  JournalEntryUpdatePaymentMethod: JournalEntryUpdatePaymentMethod,\n  PaymentMethodUpdateFields: PaymentMethodUpdateFields,\n  PersonAddFields: PersonAddFields,\n  JournalEntryAddFields: JournalEntryAddFields,\n  JournalEntryAddRefundFields: JournalEntryAddRefundFields,\n  JournalEntryUpdateRefundFields: JournalEntryUpdateRefundFields,\n  Subscription: ResolverTypeWrapper<{}>,\n  DepartmentAddFields: DepartmentAddFields,\n  SortDirection: SortDirection,\n  FilterType: FilterType,\n  PaginateInput: PaginateInput,\n  ByIdFilter: ByIdFilter,\n  WhereRegexInput: WhereRegexInput,\n  User: ResolverTypeWrapper<User>,\n  CacheControlScope: CacheControlScope,\n  Upload: ResolverTypeWrapper<Scalars['Upload']>,\n};\n\n/** Mapping between all available schema types and the resolvers parents */\nexport type ResolversParentTypes = {\n  Query: {},\n  ID: Scalars['ID'],\n  Budget: Omit<Budget, 'owner'> & { owner: ResolversParentTypes['BudgetOwner'] },\n  Rational: Rational,\n  Int: Scalars['Int'],\n  BudgetOwner: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  Department: Omit<Department, 'parent' | 'ancestors'> & { parent: ResolversParentTypes['DepartmentAncestor'], ancestors: Array<ResolversParentTypes['DepartmentAncestor']> },\n  String: Scalars['String'],\n  Business: Business,\n  Vendor: Vendor,\n  Boolean: Scalars['Boolean'],\n  DepartmentAncestor: ResolversParentTypes['Department'] | ResolversParentTypes['Business'],\n  JournalEntiresWhereInput: JournalEntiresWhereInput,\n  JournalEntriesWhereDepartment: JournalEntriesWhereDepartment,\n  JournalEntriesWhereLastUpdate: JournalEntriesWhereLastUpdate,\n  JournalEntry: Omit<JournalEntry, 'source'> & { source: ResolversParentTypes['JournalEntrySource'] },\n  JournalEntryRefund: JournalEntryRefund,\n  PaymentMethod: PaymentMethod,\n  PaymentMethodAuthorization: Omit<PaymentMethodAuthorization, 'entity'> & { entity?: Maybe<ResolversParentTypes['PaymentMethodAuthorizedEntity']> },\n  PaymentMethodAuthorizedEntity: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  Person: Person,\n  PersonName: PersonName,\n  JournalEntryType: JournalEntryType,\n  JournalEntryCategory: JournalEntryCategory,\n  JournalEntrySource: ResolversParentTypes['Person'] | ResolversParentTypes['Business'] | ResolversParentTypes['Department'],\n  JournalEntryCategoryWhereInput: JournalEntryCategoryWhereInput,\n  JournalEntryCategoryWhereNameInput: JournalEntryCategoryWhereNameInput,\n  JournalEntryCategoryWhereTypeInput: JournalEntryCategoryWhereTypeInput,\n  JournalEntryCategoryWhereParentInput: JournalEntryCategoryWhereParentInput,\n  LC_JournalEntryUpsert: Lc_JournalEntryUpsert,\n  LC_JournalEntryUpsertType: Lc_JournalEntryUpsertType,\n  LC_JournalEntryUpsertSubmitStatus: Lc_JournalEntryUpsertSubmitStatus,\n  LC_JournalEntryUpsertInputValues: Lc_JournalEntryUpsertInputValues,\n  JournalEntrySourceType: JournalEntrySourceType,\n  LC_JournalEntryUpsertInputErrors: Lc_JournalEntryUpsertInputErrors,\n  LC_JournalEntryUpsertFields: Lc_JournalEntryUpsertFields,\n  LC_JournalEntryUpsertSource: Lc_JournalEntryUpsertSource,\n  PaymentMethodWhereInput: PaymentMethodWhereInput,\n  PaymentMethodWhereRefIdInput: PaymentMethodWhereRefIdInput,\n  PaymentMethodWhereNameInput: PaymentMethodWhereNameInput,\n  PaymentMethodWhereParentInput: PaymentMethodWhereParentInput,\n  PersonNameInput: PersonNameInput,\n  Mutation: {},\n  BusinessAddFields: BusinessAddFields,\n  JournalEntryUpdateFields: JournalEntryUpdateFields,\n  RationalInput: RationalInput,\n  JournalEntrySourceInput: JournalEntrySourceInput,\n  PaymentMethodAddFields: PaymentMethodAddFields,\n  JournalEntryUpdatePaymentMethod: JournalEntryUpdatePaymentMethod,\n  PaymentMethodUpdateFields: PaymentMethodUpdateFields,\n  PersonAddFields: PersonAddFields,\n  JournalEntryAddFields: JournalEntryAddFields,\n  JournalEntryAddRefundFields: JournalEntryAddRefundFields,\n  JournalEntryUpdateRefundFields: JournalEntryUpdateRefundFields,\n  Subscription: {},\n  DepartmentAddFields: DepartmentAddFields,\n  SortDirection: SortDirection,\n  FilterType: FilterType,\n  PaginateInput: PaginateInput,\n  ByIdFilter: ByIdFilter,\n  WhereRegexInput: WhereRegexInput,\n  User: User,\n  CacheControlScope: CacheControlScope,\n  Upload: Scalars['Upload'],\n};\n\nexport type BudgetResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Budget'] = ResolversParentTypes['Budget']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  amount?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  owner?: Resolver<ResolversTypes['BudgetOwner'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type BudgetOwnerResolvers<ContextType = Context, ParentType extends ResolversParentTypes['BudgetOwner'] = ResolversParentTypes['BudgetOwner']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type BusinessResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Business'] = ResolversParentTypes['Business']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  vendor?: Resolver<Maybe<ResolversTypes['Vendor']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type DepartmentResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Department'] = ResolversParentTypes['Department']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  code?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  budget?: Resolver<Maybe<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType>,\n  parent?: Resolver<ResolversTypes['DepartmentAncestor'], ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['DepartmentAncestor']>, ParentType, ContextType>,\n  descendants?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType>,\n  virtualRoot?: Resolver<Maybe<ResolversTypes['Boolean']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type DepartmentAncestorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['DepartmentAncestor'] = ResolversParentTypes['DepartmentAncestor']> = {\n  __resolveType: TypeResolveFn<'Department' | 'Business', ParentType, ContextType>\n};\n\nexport type JournalEntryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntry'] = ResolversParentTypes['JournalEntry']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  refunds?: Resolver<Array<ResolversTypes['JournalEntryRefund']>, ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  department?: Resolver<ResolversTypes['Department'], ParentType, ContextType>,\n  category?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  source?: Resolver<ResolversTypes['JournalEntrySource'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastUpdate?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  deleted?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntryCategoryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryCategory'] = ResolversParentTypes['JournalEntryCategory']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['JournalEntryType'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  children?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntryRefundResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntryRefund'] = ResolversParentTypes['JournalEntryRefund']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  date?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  description?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType>,\n  total?: Resolver<ResolversTypes['Rational'], ParentType, ContextType>,\n  reconciled?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  lastUpdate?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  deleted?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type JournalEntrySourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['JournalEntrySource'] = ResolversParentTypes['JournalEntrySource']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type Lc_JournalEntryUpsertResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsert'] = ResolversParentTypes['LC_JournalEntryUpsert']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  valid?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  type?: Resolver<ResolversTypes['LC_JournalEntryUpsertType'], ParentType, ContextType>,\n  submitStatus?: Resolver<ResolversTypes['LC_JournalEntryUpsertSubmitStatus'], ParentType, ContextType>,\n  submitError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  inputValues?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputValues'], ParentType, ContextType>,\n  inputErrors?: Resolver<ResolversTypes['LC_JournalEntryUpsertInputErrors'], ParentType, ContextType>,\n  fields?: Resolver<ResolversTypes['LC_JournalEntryUpsertFields'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertFieldsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertFields'] = ResolversParentTypes['LC_JournalEntryUpsertFields']> = {\n  id?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  date?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  department?: Resolver<Array<ResolversTypes['ID']>, ParentType, ContextType>,\n  type?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  total?: Resolver<Maybe<ResolversTypes['Rational']>, ParentType, ContextType>,\n  source?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsertSource']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertInputErrorsResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputErrors'] = ResolversParentTypes['LC_JournalEntryUpsertInputErrors']> = {\n  dateError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  deptError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  typeError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  payMethodError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcError?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertInputValuesResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertInputValues'] = ResolversParentTypes['LC_JournalEntryUpsertInputValues']> = {\n  deptInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  totalInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcInput?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  srcType?: Resolver<Maybe<ResolversTypes['JournalEntrySourceType']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Lc_JournalEntryUpsertSourceResolvers<ContextType = Context, ParentType extends ResolversParentTypes['LC_JournalEntryUpsertSource'] = ResolversParentTypes['LC_JournalEntryUpsertSource']> = {\n  sourceType?: Resolver<ResolversTypes['JournalEntrySourceType'], ParentType, ContextType>,\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type MutationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Mutation'] = ResolversParentTypes['Mutation']> = {\n  addBusiness?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<MutationAddBusinessArgs, 'fields'>>,\n  journalEntryUpdate?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryUpdateArgs, 'id' | 'fields'>>,\n  journalEntryAdd?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryAddArgs, 'fields'>>,\n  journalEntryDelete?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryDeleteArgs, 'id'>>,\n  journalEntryAddRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryAddRefundArgs, 'id' | 'fields'>>,\n  journalEntryUpdateRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryUpdateRefundArgs, 'id' | 'fields'>>,\n  journalEntryDeleteRefund?: Resolver<ResolversTypes['JournalEntry'], ParentType, ContextType, RequireFields<MutationJournalEntryDeleteRefundArgs, 'id'>>,\n  paymentMethodUpdate?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType, RequireFields<MutationPaymentMethodUpdateArgs, 'id' | 'fields'>>,\n  paymentMethodAdd?: Resolver<ResolversTypes['PaymentMethod'], ParentType, ContextType, RequireFields<MutationPaymentMethodAddArgs, 'fields'>>,\n  addPerson?: Resolver<ResolversTypes['Person'], ParentType, ContextType, RequireFields<MutationAddPersonArgs, 'fields'>>,\n};\n\nexport type PaymentMethodResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethod'] = ResolversParentTypes['PaymentMethod']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  active?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  refId?: Resolver<Maybe<ResolversTypes['String']>, ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  parent?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  ancestors?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  children?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType>,\n  allowChildren?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  authorization?: Resolver<Array<ResolversTypes['PaymentMethodAuthorization']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PaymentMethodAuthorizationResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethodAuthorization'] = ResolversParentTypes['PaymentMethodAuthorization']> = {\n  owner?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  entity?: Resolver<Maybe<ResolversTypes['PaymentMethodAuthorizedEntity']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PaymentMethodAuthorizedEntityResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PaymentMethodAuthorizedEntity'] = ResolversParentTypes['PaymentMethodAuthorizedEntity']> = {\n  __resolveType: TypeResolveFn<'Person' | 'Business' | 'Department', ParentType, ContextType>\n};\n\nexport type PersonResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Person'] = ResolversParentTypes['Person']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  name?: Resolver<ResolversTypes['PersonName'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type PersonNameResolvers<ContextType = Context, ParentType extends ResolversParentTypes['PersonName'] = ResolversParentTypes['PersonName']> = {\n  first?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  last?: Resolver<ResolversTypes['String'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type QueryResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Query'] = ResolversParentTypes['Query']> = {\n  budget?: Resolver<ResolversTypes['Budget'], ParentType, ContextType, RequireFields<QueryBudgetArgs, 'id'>>,\n  budgets?: Resolver<Array<ResolversTypes['Budget']>, ParentType, ContextType>,\n  business?: Resolver<ResolversTypes['Business'], ParentType, ContextType, RequireFields<QueryBusinessArgs, 'id'>>,\n  businesses?: Resolver<Array<ResolversTypes['Business']>, ParentType, ContextType, RequireFields<QueryBusinessesArgs, never>>,\n  department?: Resolver<Maybe<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentArgs, 'id'>>,\n  departments?: Resolver<Array<ResolversTypes['Department']>, ParentType, ContextType, RequireFields<QueryDepartmentsArgs, never>>,\n  journalEntries?: Resolver<Array<ResolversTypes['JournalEntry']>, ParentType, ContextType, RequireFields<QueryJournalEntriesArgs, never>>,\n  journalEntry?: Resolver<Maybe<ResolversTypes['JournalEntry']>, ParentType, ContextType, RequireFields<QueryJournalEntryArgs, 'id'>>,\n  journalEntryCategories?: Resolver<Array<ResolversTypes['JournalEntryCategory']>, ParentType, ContextType, RequireFields<QueryJournalEntryCategoriesArgs, never>>,\n  journalEntryCategory?: Resolver<ResolversTypes['JournalEntryCategory'], ParentType, ContextType, RequireFields<QueryJournalEntryCategoryArgs, 'id'>>,\n  journalEntryRefund?: Resolver<Maybe<ResolversTypes['JournalEntryRefund']>, ParentType, ContextType, RequireFields<QueryJournalEntryRefundArgs, 'id'>>,\n  journalEntrySources?: Resolver<Array<ResolversTypes['JournalEntrySource']>, ParentType, ContextType, RequireFields<QueryJournalEntrySourcesArgs, 'searchByName'>>,\n  lc_journalEntryUpserts?: Resolver<Array<ResolversTypes['LC_JournalEntryUpsert']>, ParentType, ContextType>,\n  paymentMethod?: Resolver<Maybe<ResolversTypes['PaymentMethod']>, ParentType, ContextType, RequireFields<QueryPaymentMethodArgs, 'id'>>,\n  paymentMethods?: Resolver<Array<ResolversTypes['PaymentMethod']>, ParentType, ContextType, RequireFields<QueryPaymentMethodsArgs, never>>,\n  people?: Resolver<Array<ResolversTypes['Person']>, ParentType, ContextType, RequireFields<QueryPeopleArgs, never>>,\n};\n\nexport type RationalResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Rational'] = ResolversParentTypes['Rational']> = {\n  num?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  den?: Resolver<ResolversTypes['Int'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type SubscriptionResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Subscription'] = ResolversParentTypes['Subscription']> = {\n  journalEntryAdded?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryAdded\", ParentType, ContextType>,\n  journalEntryUpdated?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpdated\", ParentType, ContextType>,\n  journalEntryUpserted?: SubscriptionResolver<ResolversTypes['JournalEntry'], \"journalEntryUpserted\", ParentType, ContextType>,\n};\n\nexport interface UploadScalarConfig extends GraphQLScalarTypeConfig<ResolversTypes['Upload'], any> {\n  name: 'Upload'\n}\n\nexport type UserResolvers<ContextType = Context, ParentType extends ResolversParentTypes['User'] = ResolversParentTypes['User']> = {\n  id?: Resolver<ResolversTypes['ID'], ParentType, ContextType>,\n  user?: Resolver<ResolversTypes['Person'], ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type VendorResolvers<ContextType = Context, ParentType extends ResolversParentTypes['Vendor'] = ResolversParentTypes['Vendor']> = {\n  approved?: Resolver<ResolversTypes['Boolean'], ParentType, ContextType>,\n  vendorId?: Resolver<Maybe<ResolversTypes['ID']>, ParentType, ContextType>,\n  __isTypeOf?: isTypeOfResolverFn<ParentType>,\n};\n\nexport type Resolvers<ContextType = Context> = {\n  Budget?: BudgetResolvers<ContextType>,\n  BudgetOwner?: BudgetOwnerResolvers,\n  Business?: BusinessResolvers<ContextType>,\n  Department?: DepartmentResolvers<ContextType>,\n  DepartmentAncestor?: DepartmentAncestorResolvers,\n  JournalEntry?: JournalEntryResolvers<ContextType>,\n  JournalEntryCategory?: JournalEntryCategoryResolvers<ContextType>,\n  JournalEntryRefund?: JournalEntryRefundResolvers<ContextType>,\n  JournalEntrySource?: JournalEntrySourceResolvers,\n  LC_JournalEntryUpsert?: Lc_JournalEntryUpsertResolvers<ContextType>,\n  LC_JournalEntryUpsertFields?: Lc_JournalEntryUpsertFieldsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputErrors?: Lc_JournalEntryUpsertInputErrorsResolvers<ContextType>,\n  LC_JournalEntryUpsertInputValues?: Lc_JournalEntryUpsertInputValuesResolvers<ContextType>,\n  LC_JournalEntryUpsertSource?: Lc_JournalEntryUpsertSourceResolvers<ContextType>,\n  Mutation?: MutationResolvers<ContextType>,\n  PaymentMethod?: PaymentMethodResolvers<ContextType>,\n  PaymentMethodAuthorization?: PaymentMethodAuthorizationResolvers<ContextType>,\n  PaymentMethodAuthorizedEntity?: PaymentMethodAuthorizedEntityResolvers,\n  Person?: PersonResolvers<ContextType>,\n  PersonName?: PersonNameResolvers<ContextType>,\n  Query?: QueryResolvers<ContextType>,\n  Rational?: RationalResolvers<ContextType>,\n  Subscription?: SubscriptionResolvers<ContextType>,\n  Upload?: GraphQLScalarType,\n  User?: UserResolvers<ContextType>,\n  Vendor?: VendorResolvers<ContextType>,\n};\n\n\n/**\n * @deprecated\n * Use \"Resolvers\" root object instead. If you wish to get \"IResolvers\", add \"typesPrefix: I\" to your config.\n*/\nexport type IResolvers<ContextType = Context> = Resolvers<ContextType>;\n","\nimport {DocumentNode} from 'graphql';\n\nimport upsertJournalEntry from './schema/upsertJournalEntry.gql';\n\nexport default <DocumentNode[]>[\n  upsertJournalEntry\n];","import {Resolvers} from \"apollo-client\";\n\nconst resolvers:Resolvers = {};\n\nexport default resolvers;","import { BatchHttpLink } from 'apollo-link-batch-http';\nimport { WebSocketLink } from 'apollo-link-ws';\nimport { ApolloLink } from 'apollo-link';\nimport { onError } from 'apollo-link-error';\nimport { getMainDefinition } from 'apollo-utilities';\n\nconst batchHttpLink = new BatchHttpLink({\n  uri: '/graphql',\n  credentials: 'same-origin',\n});\n\nconst wsLink = new WebSocketLink({\n  uri: `ws://${window.location.host}/graphql`,\n  options: {\n    reconnect: true\n  }\n});\n\nconst link = ApolloLink.from([\n  onError(({ graphQLErrors, networkError }) => {\n    if (graphQLErrors)\n      graphQLErrors.forEach(({ message, locations, path }) =>\n        console.error(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      );\n    if (networkError) console.log(`[Network error]: ${networkError}`);\n  }),\n  ApolloLink.split(({query}) => {\n    const def = getMainDefinition(query);\n    return def.kind === 'OperationDefinition'\n      && def.operation === 'subscription';\n  },wsLink, batchHttpLink)\n\n]);\n\nexport default link;","import { ApolloClient } from 'apollo-client';\n\nimport cache from './inMemoryCache';\nimport typeDefs from './typeDefs';\nimport resolvers from './resolvers';\nimport link from './link';\n\nexport default new ApolloClient({\n  link,\n  cache,\n  typeDefs,\n  resolvers\n});","import gql from \"graphql-tag\";\n\nexport const JOURNAL_ENTRY_REFUND = gql`\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      num\n      den\n    }\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n`;\n\nexport const JOURNAL_ENTRY_FRAGMENT = gql`\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      __typename\n      id\n      type\n      name\n    }\n    description\n    paymentMethod {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        id\n      }\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      num\n      den\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nexport const JOURNAL_ENTRIES = gql`\n  query JournalEntries_1($where: JournalEntiresWhereInput!) {\n    journalEntries(where: $where)\n      @connection(key: \"JournalEntries_1\", filter: [\"where\"]) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n","export const CHECK_ID = \"5dc46d0af74afb2c2805bd54\";\nexport const CREDIT_ID = \"5dc46d0af74afb2c2805bd55\";\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\n\nimport {\n  JournalEntryAddRefundFields,\n  PayMethodEntryOptFragment,\n  AddRefundMutation as AddRefund,\n  AddRefundMutationVariables as AddRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_REFUND } from \"../../Table/JournalEntries.gql\";\n\nexport type AddValues = O.Overwrite<\n  O.Required<\n    JournalEntryAddRefundFields,\n    keyof JournalEntryAddRefundFields,\n    \"deep\"\n  >,\n  {\n    date: TransmutationValue<Date | null, JournalEntryAddRefundFields[\"date\"]>;\n    total: TransmutationValue<string, JournalEntryAddRefundFields[\"total\"]>;\n    paymentMethod: TransmutationValue<\n      string,\n      (PayMethodEntryOptFragment | string)[]\n    >;\n  }\n>;\n\nconst ADD_REFUND = gql`\n  mutation AddRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nconst submitAdd: (\n  client: ApolloClient<any>,\n  id: string,\n  ...rest: Parameters<FormikConfig<AddValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<AddValues>[\"onSubmit\"]> = async (\n  client,\n  id,\n  values\n) => {\n  const { paymentMethod, paymentMethodAdd } = (() => {\n    const payMethod =\n      values.paymentMethod.value[values.paymentMethod.value.length - 1];\n\n    // New Payment Method\n    if (typeof payMethod === \"string\") {\n      const parent = (values.paymentMethod.value[\n        values.paymentMethod.value.length - 2\n      ] as PayMethodEntryOptFragment).id;\n\n      return {\n        paymentMethod: \"\",\n        paymentMethodAdd: {\n          parent,\n          refId: payMethod,\n          name: payMethod,\n          active: false,\n        },\n      };\n    }\n\n    return {\n      paymentMethod: payMethod.id,\n      paymentMethodAdd: null,\n    };\n  })();\n\n  const variables: O.Required<AddRefundVars, keyof AddRefundVars, \"deep\"> = {\n    id,\n    fields: {\n      date: values.date.value,\n      description: values.description?.trim()\n        ? values.description.trim()\n        : null,\n      paymentMethod,\n      total: values.total.value,\n      reconciled: values.reconciled ?? null,\n    },\n    paymentMethodAdd,\n  };\n\n  await client.mutate<AddRefund, AddRefundVars>({\n    mutation: ADD_REFUND,\n    variables,\n  });\n};\n\nexport default submitAdd;\n","import { useFormikContext } from \"formik\";\nimport { useCallback } from \"react\";\n\nexport type TransmutationValue<TinputValue, Tvalue> = {\n  inputValue: TinputValue;\n  value: Tvalue;\n};\n\nexport const createValueTransmutator = <\n  TinputValue,\n  Tvalue,\n  Trest extends any[]\n>(\n  transMutator: (inputValue: TinputValue, ...rest: Trest) => Tvalue\n) => (inputValue: TinputValue, ...rest: Trest) =>\n  ({\n    inputValue,\n    value: transMutator(inputValue, ...rest),\n  } as TransmutationValue<TinputValue, Tvalue>);\n\nexport enum FormikStatusType {\n  NOTIFICATION,\n  ERROR,\n  FATAL_ERROR,\n}\n\nexport interface FormikStatus {\n  msg: string;\n  type: FormikStatusType;\n}\n\nexport const useFormikStatus = <Values = any>() => {\n  const { setStatus: setStatusNative, status } = useFormikContext<Values>();\n\n  const setStatus = useCallback(\n    (args: FormikStatus | null) => {\n      if (status) {\n        if (\n          !args ||\n          Object.keys(args).some((key) => args[key] !== status[key])\n        ) {\n          setStatusNative(args);\n        }\n      } else if (args) {\n        setStatusNative(args);\n      }\n    },\n    [setStatusNative, status]\n  );\n\n  return [status ?? null, setStatus] as [FormikStatus | null, typeof setStatus];\n};\n","import React, { useMemo, useCallback, useRef } from \"react\";\nimport {\n  KeyboardDatePicker,\n  KeyboardDatePickerProps,\n  MuiPickersUtilsProvider,\n} from \"@material-ui/pickers\";\nimport DateFnsUtils from \"@date-io/date-fns\";\nimport { useField, useFormikContext, FieldInputProps } from \"formik\";\nimport { TextFieldProps } from \"@material-ui/core\";\nimport { parseISO, min, isValid, formatISO, format } from \"date-fns\";\n\nimport {\n  TransmutationValue,\n  createValueTransmutator,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst inputProps = {\n  inputMode: \"numeric\",\n} as const;\n\nconst keyboardButtonProps = {\n  tabIndex: -1,\n} as const;\n\nconst dateValueTransmutator = createValueTransmutator(\n  (...args: Parameters<KeyboardDatePickerProps[\"onChange\"]>) => {\n    const [date, value] = args;\n    if (date && isValid(date)) {\n      return formatISO(date);\n    }\n    return value || \"\";\n  }\n);\nexport type DateValue = TransmutationValue<Date | null, string>;\n\nconst DateField = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    maxDate?: Date;\n    minDate?: Date;\n  } & Omit<\n    TextFieldProps,\n    | \"value\"\n    | \"variant\"\n    | \"error\"\n    | \"helperText\"\n    | \"animateYearScrolling\"\n    | \"disableToolbar\"\n    | \"disableFuture\"\n    | \"inputVariant\"\n    | \"variant\"\n    | \"format\"\n    | \"margin\"\n    | \"label\"\n    | \"maxDate\"\n    | \"initialFocusedDate\"\n    | \"autoOk\"\n    | \"InputProps\"\n    | \"inputProps\"\n    | \"placeholder\"\n    | \"KeyboardButtonProps\"\n    | \"onBlur\"\n    | \"onOpen\"\n    | \"onClose\"\n    | \"onChange\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    variant: inputVariant = \"filled\",\n    autoFocus = false,\n    disabled = false,\n    maxDate = new Date(),\n    minDate,\n  } = props;\n\n  const { isSubmitting } = useFormikContext();\n\n  const validate = useCallback(\n    (\n      value: TransmutationValue<Date | null, string> | undefined\n    ): string | undefined => {\n      const dateStr = (value?.value || \"\").trim();\n      if (dateStr) {\n        const date = parseISO(dateStr);\n        if (!isValid(date)) {\n          return \"Invalid Date\";\n        } else if (minDate && date < minDate) {\n          return `Cannot be before ${format(minDate, \"MM/dd/yyyy\")}`;\n        } else if (maxDate < date) {\n          return `Cannot be after ${format(maxDate, \"MM/dd/yyyy\")}`;\n        }\n      } else {\n        return \"Date is Required\";\n      }\n    },\n    [minDate, maxDate]\n  );\n\n  const [field, meta, helpers] = useField<\n    TransmutationValue<Date | null, string> | undefined\n  >({\n    name: \"date\",\n    validate,\n  });\n\n  const value = field.value?.inputValue ?? null;\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const initialInputValue = meta.initialValue?.inputValue;\n  const initialFocusedDate = useMemo(\n    () =>\n      initialInputValue && isValid(initialInputValue)\n        ? initialInputValue\n        : new Date(),\n    [initialInputValue]\n  );\n\n  const InputProps = useMemo(\n    () => ({\n      autoFocus,\n    }),\n    [autoFocus]\n  );\n\n  // Handle touched\n  const calOpen = useRef(false);\n  const onBlur = useCallback(\n    () =>\n      setTimeout(() => {\n        if (calOpen.current) {\n          return;\n        }\n        setTouched(true);\n      }, 0),\n    [setTouched, calOpen]\n  );\n  const onOpen = useCallback(() => (calOpen.current = true), [calOpen]);\n  const onClose = useCallback(() => {\n    calOpen.current = false;\n    onBlur();\n  }, [calOpen, onBlur]);\n\n  const onChange = useCallback<KeyboardDatePickerProps[\"onChange\"]>(\n    (date, value) => {\n      setValue(\n        dateValueTransmutator(\n          // limit max date\n          date && isValid(date) ? min([new Date(), date]) : date,\n          value\n        )\n      );\n    },\n    [setValue]\n  );\n\n  const [formikStatus] = useFormikStatus();\n\n  const dataPickerProps: KeyboardDatePickerProps = useMemo(\n    () => ({\n      ...field,\n      disabled:\n        isSubmitting ||\n        disabled ||\n        formikStatus?.type === FormikStatusType.FATAL_ERROR,\n      value,\n      error: touched && !!error,\n      helperText: touched ? error : undefined,\n      animateYearScrolling: true,\n      disableToolbar: true,\n      disableFuture: true,\n      inputVariant,\n      variant: \"inline\",\n      format: \"MM/dd/yyyy\",\n      margin: \"none\",\n      label: \"Date\",\n      initialFocusedDate,\n      autoOk: true,\n      InputProps,\n      inputProps,\n      placeholder: \"mm/dd/yyyy\",\n      KeyboardButtonProps: keyboardButtonProps,\n      onBlur,\n      onOpen,\n      onClose,\n      onChange,\n    }),\n    [\n      value,\n      initialFocusedDate,\n      onBlur,\n      error,\n      inputVariant,\n      InputProps,\n      isSubmitting,\n      field,\n      onOpen,\n      onClose,\n      onChange,\n      touched,\n      disabled,\n      formikStatus,\n    ]\n  );\n\n  return (\n    <MuiPickersUtilsProvider utils={DateFnsUtils}>\n      <KeyboardDatePicker\n        maxDate={maxDate}\n        {...(props as any)}\n        {...dataPickerProps}\n      />\n    </MuiPickersUtilsProvider>\n  );\n};\n\nexport default DateField;\n","import React, { useMemo, useCallback } from \"react\";\nimport { TextField, TextFieldProps } from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst Description = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n  } & Omit<\n    TextFieldProps,\n    | \"variant\"\n    | \"onChange\"\n    | \"value\"\n    | \"variant\"\n    | \"label\"\n    | \"name\"\n    | \"InputProps\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    autoFocus = false,\n    disabled = false,\n    variant = \"filled\",\n    ...textFieldProps\n  } = props;\n\n  const [field, , { setValue }] = useField<string | null | undefined>({\n    name: \"description\",\n  });\n\n  const onChange = useCallback<NonNullable<TextFieldProps[\"onChange\"]>>(\n    (event) => void setValue(event?.target?.value?.trimLeft() || null),\n    [setValue]\n  );\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"text\",\n      autoFocus,\n    }),\n    [autoFocus]\n  );\n\n  const [formikStatus] = useFormikStatus();\n\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      onChange={onChange}\n      value={field.value ?? \"\"}\n      variant={variant as any}\n      label={\"Description\"}\n      name={\"description\"}\n      InputProps={InputProps}\n    />\n  );\n};\n\nexport default Description;\n","import React, { useMemo, useCallback } from \"react\";\nimport { TextField, TextFieldProps, InputAdornment } from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport numeral from \"numeral\";\n\nimport {\n  createValueTransmutator,\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\nimport { RationalInput } from \"../../../../apollo/graphTypes\";\nimport { getRational } from \"../../../../utils/transmutations\";\n\nexport type TotalValue = TransmutationValue<string, RationalInput>;\n\nconst inputProps = {\n  min: \"0.00\",\n  step: \"0.01\",\n} as const;\n\nexport const totalValueTransmutator = createValueTransmutator(\n  (inputValue: string) => getRational(inputValue, 2)\n);\n\nconst Total = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n    minTotal?: number;\n    maxTotal?: number;\n  } & Omit<\n    TextFieldProps,\n    | \"variant\"\n    | \"type\"\n    | \"value\"\n    | \"error\"\n    | \"helperText\"\n    | \"placeholder\"\n    | \"label\"\n    | \"name\"\n    | \"required\"\n    | \"variant\"\n    | \"inputProps\"\n    | \"InputProps\"\n    | \"onChange\"\n    | keyof FieldInputProps<any>\n  >\n) => {\n  const {\n    autoFocus = false,\n    disabled = false,\n    variant = \"filled\",\n    maxTotal = Number.MAX_SAFE_INTEGER,\n    minTotal: minTotalProp = 0,\n    ...textFieldProps\n  } = props;\n\n  const minTotal = Math.max(0.01, minTotalProp);\n\n  const validate = useCallback(\n    (value: TotalValue | undefined) => {\n      const inputValue = (value?.inputValue || \"\").trim();\n\n      if (inputValue === \"\") {\n        return \"Total Required\";\n      }\n\n      const num =\n        typeof inputValue === \"string\"\n          ? Number.parseFloat(inputValue)\n          : inputValue;\n\n      if (Number.isNaN(num)) {\n        return \"Invalid Number\";\n      } else if (num > maxTotal) {\n        return `Cannot be greater than ${numeral(maxTotal).format(\"$0,0.00\")}`;\n      } else if (num === 0) {\n        return \"Cannot be 0\";\n      } else if (num < minTotal) {\n        return `Cannot be less than ${numeral(minTotal).format(\"$0,0.00\")}`;\n      }\n    },\n    [minTotal, maxTotal]\n  );\n\n  const [field, meta, { setValue }] = useField<TotalValue | undefined>({\n    name: \"total\",\n    validate,\n  });\n\n  const inputValue = field.value?.inputValue ?? \"\";\n\n  const { error, touched } = meta;\n\n  const InputProps = useMemo(\n    () => ({\n      type: \"number\",\n      autoFocus,\n      startAdornment: <InputAdornment position=\"start\">$</InputAdornment>,\n    }),\n    [autoFocus]\n  );\n\n  const onChange = useCallback<NonNullable<TextFieldProps[\"onChange\"]>>(\n    (event) => {\n      setValue(totalValueTransmutator(event?.target?.value || \"\"));\n    },\n    [setValue]\n  );\n\n  const helperText = useMemo(() => {\n    if (touched && error) {\n      return error;\n    } else if (maxTotal !== Number.MAX_SAFE_INTEGER && minTotal > 0.01) {\n      return `Max ${numeral(maxTotal).format(\"$0,0.00\")} & Min ${numeral(\n        minTotal\n      ).format(\"$0,0.00\")}`;\n    } else if (maxTotal !== Number.MAX_SAFE_INTEGER) {\n      return `Max ${numeral(maxTotal).format(\"$0,0.00\")}`;\n    } else if (minTotal > 0.01) {\n      return `Min ${numeral(minTotal).format(\"$0,0.00\")}`;\n    } else {\n      return \"\";\n    }\n  }, [touched, error, maxTotal, minTotal]);\n\n  const [formikStatus] = useFormikStatus();\n\n  return (\n    <TextField\n      {...textFieldProps}\n      {...field}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      type=\"number\"\n      value={inputValue}\n      error={touched && !!error}\n      helperText={helperText}\n      placeholder={\"0.00\"}\n      label={\"Total\"}\n      name={\"total\"}\n      required\n      variant={variant as any}\n      inputProps={inputProps}\n      InputProps={InputProps}\n      onChange={onChange}\n    />\n  );\n};\n\nexport default Total;\n","import Fraction from \"fraction.js\";\n\nexport const getRational = (\n  number: string | number,\n  fractionDigits = 2\n): { num: number; den: number } => {\n  const { n: num, d: den } = new Fraction(\n    (typeof number === \"string\"\n      ? Number.parseFloat(number.trim() || \"0\")\n      : number\n    ).toFixed(fractionDigits)\n  );\n\n  return { num, den };\n};\n","import React from \"react\";\nimport {\n  Checkbox,\n  FormControlLabel,\n  FormControlLabelProps,\n  CheckboxProps,\n} from \"@material-ui/core\";\nimport { useField, FieldInputProps } from \"formik\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst inputProps = {\n  type: \"checkbox\",\n} as const;\n\nconst Reconcile = (\n  props:\n    | ({ label: true } & Partial<\n        Omit<\n          FormControlLabelProps,\n          | \"inputProps\"\n          | \"control\"\n          | \"checked\"\n          | \"label\"\n          | keyof FieldInputProps<any>\n        >\n      >)\n    | ({ label?: false } & Partial<\n        Omit<\n          CheckboxProps,\n          \"inputProps\" | \"checked\" | keyof FieldInputProps<any>\n        >\n      >)\n) => {\n  const { label, disabled = false, ...customProps } = props;\n\n  const [field] = useField<boolean | undefined>({\n    name: \"reconciled\",\n    type: \"checkbox\",\n  });\n\n  const value = field.value ?? false;\n\n  const [formikStatus] = useFormikStatus();\n\n  if (label) {\n    return (\n      <FormControlLabel\n        {...customProps}\n        {...(field as any)}\n        value={value}\n        disabled={\n          disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR\n        }\n        label=\"Reconcile\"\n        control={<Checkbox inputProps={inputProps} />}\n      />\n    );\n  }\n\n  return (\n    <Checkbox\n      {...(customProps as any)}\n      {...field}\n      value={value}\n      disabled={disabled || formikStatus?.type === FormikStatusType.FATAL_ERROR}\n      inputProps={inputProps}\n    />\n  );\n};\n\nexport default Reconcile;\n","import gql from \"graphql-tag\";\n\nexport const DEPT_ENTRY_OPT_FRAGMENT = gql`\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n`;\n\nexport const CAT_ENTRY_OPT_FRAGMENT = gql`\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n`;\n\nexport const SRC_ENTRY_PERSON_OPT_FRAGMENT = gql`\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n`;\n\nexport const SRC_ENTRY_DEPT_OPT_FRAGMENT = gql`\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      ... on Business {\n        __typename\n        id\n      }\n      ... on Department {\n        __typename\n        id\n      }\n    }\n  }\n`;\n\nexport const SRC_ENTRY_BIZ_OPT_FRAGMENT = gql`\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport const PAY_METHOD_ENTRY_OPT_FRAGMENT = gql`\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n`;\n","import React, { useMemo, useState, useCallback } from \"react\";\nimport { TextField, TextFieldProps, Box, Chip } from \"@material-ui/core\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { useField, FieldInputProps } from \"formik\";\n\nimport { PAY_METHOD_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  PayMethodEntryOptsQuery as PayMethodEntryOpts,\n  PayMethodEntryOptsQueryVariables as PayMethodEntryOptsQueryVars,\n  PayMethodEntryOptFragment,\n} from \"../../../../apollo/graphTypes\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { ChevronRight } from \"@material-ui/icons\";\nimport { CHECK_ID } from \"../../constants\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\ntype Value = PayMethodEntryOptFragment | string;\n\ntype AutocompleteProps = AutocompletePropsRaw<Value> &\n  UseAutocompleteMultipleProps<Value>;\n\nconst PAY_METHOD_ENTRY_OPTS = gql`\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nexport type PaymentMethodValue = TransmutationValue<string, Value[]>;\n\nconst validate = (payMethodValue: PaymentMethodValue | undefined) => {\n  const value = payMethodValue?.value ?? [];\n  const numValues = value.length;\n  const curValue = value[numValues - 1];\n  const parent = value[numValues - 2] as PayMethodEntryOptFragment | undefined;\n\n  if (curValue === undefined) {\n    return \"Method Required\";\n  } else if (typeof curValue === \"string\") {\n    if (parent?.id === CHECK_ID) {\n      const checkNumber = (curValue.match(/[0-9]/g) ?? []).join(\"\");\n      if (!checkNumber) {\n        return \"Check # Required\";\n      }\n    }\n  } else if (curValue.id === CHECK_ID) {\n    return \"Check # Required\";\n  }\n};\n\nconst getOptionLabel: AutocompleteProps[\"getOptionLabel\"] = (opt): string => {\n  return typeof opt === \"string\" ? opt : opt.name;\n};\n\nconst renderTags: AutocompleteProps[\"renderTags\"] = (values, getTagProps) => {\n  const lastIndex = values.length - 1;\n  return values.map((value: Value, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    const parent = values[index - 1] as PayMethodEntryOptFragment | undefined;\n\n    const isString = typeof value === \"string\";\n\n    let label: string;\n    switch (parent?.id) {\n      case CHECK_ID:\n        label =\n          \"CK-\" +\n          (isString ? value : (value as PayMethodEntryOptFragment).name);\n        break;\n      default:\n        label = getOptionLabel(value);\n    }\n\n    let endAdornment: JSX.Element | undefined;\n    if (!isLastIndex) {\n      endAdornment = <ChevronRight fontSize=\"small\" />;\n    } else if (!isString) {\n      // Add Prefixes\n      switch ((value as PayMethodEntryOptFragment).id) {\n        case CHECK_ID:\n          endAdornment = <span>CK-</span>;\n          break;\n      }\n    }\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={label}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {endAdornment}\n      </Box>\n    );\n  });\n};\n\nconst PaymentMethod = (\n  props: {\n    variant?: \"filled\" | \"outlined\";\n  } & {} & Omit<\n      TextFieldProps,\n      | \"value\"\n      | \"variant\"\n      | \"error\"\n      | \"helperText\"\n      | \"name\"\n      | \"label\"\n      | keyof FieldInputProps<any>\n      | keyof Omit<RenderInputParams, \"id\" | \"disabled\">\n    >\n) => {\n  const { disabled = false, ...textFieldProps } = props;\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const [field, meta, helpers] = useField<PaymentMethodValue | undefined>({\n    name: \"paymentMethod\",\n    validate,\n  });\n\n  const onBlurField = field.onBlur;\n  const value = field.value?.value ?? [];\n  const inputValue = field.value?.inputValue ?? \"\";\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const curValue = value[value.length - 1] ?? null;\n\n  const variables = useMemo<PayMethodEntryOptsQueryVars>(\n    () =>\n      curValue === null\n        ? {\n            where: {\n              hasParent: false,\n            },\n          }\n        : {\n            where: {\n              parent: {\n                eq: (curValue as PayMethodEntryOptFragment).id,\n              },\n            },\n          },\n    [curValue]\n  );\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<\n        PayMethodEntryOpts,\n        PayMethodEntryOptsQueryVars\n      >[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    PayMethodEntryOpts,\n    PayMethodEntryOptsQueryVars\n  >(PAY_METHOD_ENTRY_OPTS, {\n    skip: typeof curValue === \"string\",\n    variables,\n    onError,\n  });\n\n  const options = useMemo<PayMethodEntryOptFragment[]>(\n    () =>\n      !data?.paymentMethods ||\n      typeof curValue === \"string\" ||\n      curValue?.id === CHECK_ID\n        ? []\n        : data.paymentMethods,\n    [data, curValue]\n  );\n\n  const hasOptions = options.length > 0;\n\n  const freeSolo = useMemo<boolean>(\n    () => (curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID,\n    [curValue]\n  );\n\n  const disableTextInput = useMemo(() => !hasOptions && !freeSolo, [\n    hasOptions,\n    freeSolo,\n  ]);\n\n  const label = useMemo(() => {\n    if (\n      typeof curValue === \"string\" ||\n      (curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID\n    ) {\n      return \"Check #\";\n    }\n\n    return \"Payment Method\";\n  }, [curValue]);\n\n  const InputProps = useMemo(() => {\n    if ((curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID) {\n      return {\n        type: \"number\",\n      };\n    }\n\n    return {};\n  }, [curValue]);\n\n  const inputProps = useMemo(() => {\n    if ((curValue as PayMethodEntryOptFragment | null)?.id === CHECK_ID) {\n      return {\n        min: \"0\",\n        step: \"1\",\n      };\n    }\n\n    return {};\n  }, [curValue]);\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      params.InputProps = {\n        ...(params.InputProps ?? {}),\n        ...InputProps,\n      };\n\n      params.inputProps = {\n        ...(params.inputProps ?? {}),\n        ...inputProps,\n      };\n\n      const helperText = (() => {\n        if (gqlError) {\n          return gqlError.message;\n        } else if (touched) {\n          return error;\n        }\n      })();\n\n      return (\n        <TextField\n          {...textFieldProps}\n          {...params}\n          variant={(textFieldProps.variant || \"filled\") as any}\n          error={(touched && !!error) || !!gqlError}\n          helperText={helperText}\n          name=\"paymentMethod\"\n          label={label}\n        />\n      );\n    },\n    [textFieldProps, touched, gqlError, error, label, InputProps, inputProps]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback<NonNullable<AutocompleteProps[\"onBlur\"]>>(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => void onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n      if (!disableTextInput) {\n        setValue({ inputValue, value });\n      }\n    },\n    [setValue, value, disableTextInput]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(\n    () => ({\n      value,\n      disabled:\n        !!gqlError ||\n        loading ||\n        formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n        disabled,\n      multiple: true,\n      options,\n      renderInput,\n      renderTags,\n      freeSolo,\n      getOptionLabel,\n      onChange,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      onFocus,\n      onBlur,\n      open:\n        hasFocus &&\n        hasOptions &&\n        formikStatus?.type !== FormikStatusType.FATAL_ERROR,\n      loading,\n      autoSelect: true,\n      name: \"paymentMethod\",\n    }),\n    [\n      options,\n      value,\n      renderInput,\n      freeSolo,\n      onChange,\n      onInputChange,\n      inputValue,\n      disableTextInput,\n      onFocus,\n      onBlur,\n      hasFocus,\n      hasOptions,\n      loading,\n      gqlError,\n      disabled,\n      formikStatus,\n    ]\n  );\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default PaymentMethod;\n","import React from \"react\";\nimport { useTheme, Box, BoxProps, Theme } from \"@material-ui/core\";\nimport { fade } from \"@material-ui/core/styles/colorManipulator\";\n\nconst Overlay = (\n  props: {\n    children: React.ReactNode;\n    zIndex: keyof Theme[\"zIndex\"] | number;\n    opacity?: number;\n  } & Pick<\n    BoxProps,\n    | \"p\"\n    | \"pt\"\n    | \"pr\"\n    | \"pb\"\n    | \"pl\"\n    | \"px\"\n    | \"py\"\n    | \"padding\"\n    | \"paddingTop\"\n    | \"paddingRight\"\n    | \"paddingBottom\"\n    | \"paddingLeft\"\n    | \"paddingX\"\n    | \"paddingY\"\n  >\n) => {\n  const theme = useTheme();\n\n  const { opacity = 0.62, ...boxProps } = props;\n\n  return (\n    <Box\n      {...boxProps}\n      overflow=\"auto\"\n      position=\"absolute\"\n      display=\"flex\"\n      alignItems=\"center\"\n      justifyContent=\"center\"\n      width=\"100%\"\n      top=\"0px\"\n      bottom=\"0px\"\n      bgcolor={fade(theme.palette.background.paper, opacity)}\n    />\n  );\n};\n\nexport default Overlay;\n","import React from \"react\";\nimport { CircularProgress, Theme } from \"@material-ui/core\";\n\nimport Overlay from \"./Overlay\";\n\nconst OverlayLoading = (props: { zIndex: keyof Theme[\"zIndex\"] | number }) => {\n  return <Overlay {...props} children={<CircularProgress />} />;\n};\n\nexport default OverlayLoading;\n","import gql from \"graphql-tag\";\n\nexport const JOURNAL_FRAGMENT = gql`\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      num\n      den\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        num\n        den\n      }\n    }\n  }\n`;\n","import React, { useCallback, useMemo } from \"react\";\nimport { Formik, FormikConfig, useFormikContext, FormikProps } from \"formik\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  PaperProps,\n  Grid,\n  DialogContentText,\n  useTheme,\n  Box,\n} from \"@material-ui/core\";\nimport {\n  useApolloClient,\n  useQuery,\n  QueryHookOptions,\n} from \"@apollo/react-hooks\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\n\nimport submitAdd, { AddValues } from \"./submitAdd\";\nimport {\n  GetEntryRefundInfo_1Query as GetEntryRefundInfo,\n  GetEntryRefundInfo_1QueryVariables as GetEntryRefundInfoVars,\n  JournalEntryType,\n} from \"../../../../apollo/graphTypes\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport {\n  FormikStatusType,\n  useFormikStatus,\n  FormikStatus,\n} from \"../../../../formik/utils\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport { JOURNAL_FRAGMENT } from \"./refunds.gql\";\n\nconst GET_ENTRY_REFUND_INFO = gql`\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ${JOURNAL_FRAGMENT}\n`;\n\nconst NULLISH = Symbol();\n\nexport interface AddRefundProps {\n  entryId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\n// Must be in separate component to access FormikContext.\nconst AddRefundDialog = (\n  props: AddRefundProps & {\n    handleSubmit: FormikProps<AddValues>[\"handleSubmit\"];\n  }\n) => {\n  const { entryId, open, onClose, onExited: onExitedCb, handleSubmit } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<AddValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<GetEntryRefundInfo, GetEntryRefundInfoVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error, data } = useQuery<\n    GetEntryRefundInfo,\n    GetEntryRefundInfoVars\n  >(GET_ENTRY_REFUND_INFO, {\n    skip: !entryId,\n    variables: { id: entryId as string },\n    onError,\n  });\n\n  const total = data?.journalEntry?.total;\n  const refunds = data?.journalEntry?.refunds || [];\n  const maxTotal = useMemo(() => {\n    if (total) {\n      const totalRefunds = refunds.reduce(\n        (totalRefunds, { deleted, total }) =>\n          deleted ? totalRefunds : totalRefunds + total.num / total.den,\n        0\n      );\n      return total.num / total.den - totalRefunds;\n    }\n    return Number.MAX_SAFE_INTEGER;\n  }, [total, refunds]);\n\n  const date = data?.journalEntry?.date;\n  const minDate = useMemo<Date | undefined>(\n    () => (date ? new Date(date) : undefined),\n    [date]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const journalEntryType = data?.journalEntry?.type;\n  const title = useMemo(() => {\n    const title =\n      !loading && !error && (journalEntryType ?? NULLISH) !== NULLISH\n        ? `${\n            journalEntryType === JournalEntryType.Credit ? \"Give\" : \"Add\"\n          } Refund`\n        : \"Refund\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, error, journalEntryType, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & { onSubmit: FormikProps<AddValues>[\"handleSubmit\"] }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(loading || isSubmitting) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid item lg={4} sm={6} xs={12}>\n              <DateEntry\n                minDate={minDate}\n                disabled={loading || isSubmitting}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Description disabled={loading || isSubmitting} fullWidth />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <PaymentMethod disabled={loading || isSubmitting} fullWidth />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Total\n                disabled={loading || isSubmitting}\n                fullWidth\n                maxTotal={maxTotal}\n              />\n            </Grid>\n            <Grid\n              item\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              lg={4}\n              md={6}\n              sm={12}\n            >\n              <Reconcile disabled={loading || isSubmitting} label />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={loading || isSubmitting || !isValid}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Add\n          </Button>\n        )}\n        <Button\n          disabled={loading || isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst AddRefund = (props: AddRefundProps) => {\n  const { entryId, open, onClose, onExited } = props;\n\n  const initialValues = useMemo<Partial<AddValues>>(() => ({}), []);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<AddValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      try {\n        formikHelpers.setStatus(null);\n        await submitAdd(client, entryId || \"\", values, formikHelpers);\n        onClose();\n      } catch (error) {\n        formikHelpers.setStatus({\n          msg: error.message ?? `${error}`,\n          type: FormikStatusType.ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, entryId, onClose]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<AddValues>) => (\n      <AddRefundDialog\n        entryId={entryId}\n        open={open}\n        onClose={onClose}\n        onExited={onExited}\n        handleSubmit={props.handleSubmit}\n      />\n    ),\n    [entryId, open, onClose, onExited]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as AddValues}\n      initialStatus={null}\n      // isInitialValid={false}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default AddRefund;\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { isEqual } from \"date-fns\";\n\nimport {\n  JournalEntryUpdateRefundFields,\n  PayMethodEntryOptFragment,\n  UpdateRefundMutation as UpdateRefund,\n  UpdateRefundMutationVariables as UpdateRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_REFUND } from \"../../Table/JournalEntries.gql\";\nimport { CHECK_ID } from \"../../constants\";\n\nexport type UpdateValues = O.NonNullable<\n  O.Overwrite<\n    O.Required<JournalEntryUpdateRefundFields>,\n    {\n      date: TransmutationValue<\n        Date,\n        NonNullable<JournalEntryUpdateRefundFields[\"date\"]>\n      >;\n      total: TransmutationValue<\n        string,\n        NonNullable<JournalEntryUpdateRefundFields[\"total\"]>\n      >;\n      paymentMethod: TransmutationValue<\n        string,\n        (PayMethodEntryOptFragment | string)[]\n      >;\n    }\n  >,\n  keyof Omit<JournalEntryUpdateRefundFields, \"description\">\n>;\n\nexport type IniUpdateValues = O.Overwrite<\n  UpdateValues,\n  {\n    paymentMethod: TransmutationValue<string, PayMethodEntryOptFragment[]>;\n  }\n>;\n\nconst UPDATE_REFUND = gql`\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_REFUND}\n`;\n\nconst submitUpdate: (\n  client: ApolloClient<any>,\n  iniValues: IniUpdateValues,\n  id: string,\n  ...rest: Parameters<FormikConfig<UpdateValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<UpdateValues>[\"onSubmit\"]> = async (\n  client,\n  iniValues,\n  id,\n  values\n) => {\n  // Date\n  const date = isEqual(iniValues.date.inputValue, values.date.inputValue)\n    ? null\n    : values.date.value;\n\n  // Description\n  const description =\n    values.description !== iniValues.description\n      ? values.description?.trim() ?? \"\"\n      : null;\n\n  // Total\n  const total =\n    values.total.value.num / values.total.value.den ===\n    iniValues.total.value.num / iniValues.total.value.den\n      ? null\n      : values.total.value;\n\n  // Reconciled\n  const reconciled =\n    values.reconciled === iniValues.reconciled ? null : values.reconciled;\n\n  // Payment Method\n  const { paymentMethod, paymentMethodAdd, paymentMethodUpdate } = (() => {\n    const iniPayMethod =\n      iniValues.paymentMethod.value[iniValues.paymentMethod.value.length - 1];\n\n    const [payMethod, parent] = values.paymentMethod.value\n      .slice(-2)\n      .reverse() as [\n      string | PayMethodEntryOptFragment,\n      PayMethodEntryOptFragment\n    ];\n\n    // Currently CHECK Numbers only\n    if (typeof payMethod === \"string\") {\n      // Update check number on payment method\n      if (iniPayMethod.parent && iniPayMethod.parent.id === CHECK_ID) {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: null,\n          paymentMethodUpdate: {\n            id: iniPayMethod.id,\n            fields: {\n              active: null,\n              refId: payMethod,\n              name: payMethod,\n            },\n          },\n        };\n\n        // Add new check number payment method\n      } else {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: {\n            parent: parent.id,\n            refId: payMethod,\n            name: payMethod,\n            active: false,\n          },\n          paymentMethodUpdate: null,\n        };\n      }\n      // Update payment method\n    } else if (payMethod.id !== iniPayMethod.id) {\n      return {\n        paymentMethod: payMethod.id,\n        paymentMethodAdd: null,\n        paymentMethodUpdate: null,\n      };\n    }\n\n    return {\n      paymentMethod: null,\n      paymentMethodAdd: null,\n      paymentMethodUpdate: null,\n    };\n  })();\n\n  const variables: O.Required<\n    UpdateRefundVars,\n    keyof UpdateRefundVars,\n    \"deep\"\n  > = {\n    id,\n    fields: {\n      date,\n      description,\n      total,\n      reconciled,\n      paymentMethod,\n    },\n    paymentMethodAdd,\n    paymentMethodUpdate,\n  };\n\n  await client.mutate<UpdateRefund, UpdateRefundVars>({\n    mutation: UPDATE_REFUND,\n    variables,\n  });\n};\n\nexport default submitUpdate;\n","import React, { useMemo, useCallback } from \"react\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport {\n  useTheme,\n  Dialog,\n  DialogTitle,\n  PaperProps,\n  Box,\n  DialogContent,\n  DialogContentText,\n  Grid,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\n\nimport {\n  UpdateRefundIniStateQuery as UpdateRefundIniState,\n  UpdateRefundIniStateQueryVariables as UpdateRefundIniStateVars,\n  JournalEntry_2Fragment as JournalEntryFragment,\n} from \"../../../../apollo/graphTypes\";\nimport submitUpdate, { UpdateValues, IniUpdateValues } from \"./submitUpdate\";\nimport { JOURNAL_FRAGMENT } from \"./refunds.gql\";\nimport { PAY_METHOD_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  FormikStatus,\n  FormikStatusType,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport Description from \"../EntryFields/Description\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Total from \"../EntryFields/Total\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Reconcile from \"../EntryFields/Reconcile\";\n\nexport interface UpdateRefundProps {\n  entryId: string | null;\n  refundId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\nconst UPDATE_REFUND_INI_STATE = gql`\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        num\n        den\n      }\n      reconciled\n    }\n  }\n  ${JOURNAL_FRAGMENT}\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nconst UpdateRefundDialog = (\n  props: UpdateRefundProps & {\n    journalEntry: JournalEntryFragment | null;\n    loading: boolean;\n    handleSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n  }\n) => {\n  const {\n    refundId,\n    open,\n    onClose,\n    onExited: onExitedCb,\n    journalEntry,\n    loading,\n    handleSubmit,\n  } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<UpdateValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const total = journalEntry?.total;\n  const refunds = journalEntry?.refunds || [];\n  const maxTotal = useMemo(() => {\n    if (total) {\n      const totalRefunds = refunds.reduce(\n        (totalRefunds, { id, deleted, total }) =>\n          // Do NOT include refund being updated in max total calculation\n          deleted || id === refundId\n            ? totalRefunds\n            : totalRefunds + total.num / total.den,\n        0\n      );\n      return total.num / total.den - totalRefunds;\n    }\n    return Number.MAX_SAFE_INTEGER;\n  }, [total, refunds, refundId]);\n\n  const date = journalEntry?.date;\n  const minDate = useMemo<Date | undefined>(\n    () => (date ? new Date(date) : undefined),\n    [date]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const title = useMemo(() => {\n    const title = \"Refund Update\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & {\n          onSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n        }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(loading || isSubmitting) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid item lg={4} sm={6} xs={12}>\n              <DateEntry\n                minDate={minDate}\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Description\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <PaymentMethod\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid item lg={4} sm={6} xs={12}>\n              <Total\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n                maxTotal={maxTotal}\n              />\n            </Grid>\n            <Grid\n              item\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              lg={4}\n              md={6}\n              sm={12}\n            >\n              <Reconcile\n                disabled={loading || isSubmitting || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={loading || isSubmitting || !isValid}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Update\n          </Button>\n        )}\n        <Button\n          disabled={loading || isSubmitting || !!fatalError}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst UpdateRefund = (props: UpdateRefundProps) => {\n  const { entryId, refundId, open, onClose, onExited } = props;\n\n  const { loading, error, data } = useQuery<\n    UpdateRefundIniState,\n    UpdateRefundIniStateVars\n  >(UPDATE_REFUND_INI_STATE, {\n    skip: !entryId,\n    variables: {\n      entryId: entryId as string,\n      refundId: refundId as string,\n    },\n  });\n\n  const initialStatus = useMemo(\n    () =>\n      error\n        ? ({\n            msg: error.message,\n            type: FormikStatusType.FATAL_ERROR,\n          } as FormikStatus)\n        : null,\n    [error]\n  );\n\n  const journalEntryRefund = data?.journalEntryRefund;\n  const initialValues = useMemo<IniUpdateValues>(() => {\n    if (!journalEntryRefund) {\n      return {} as any;\n    }\n\n    const date = {\n      inputValue: new Date(journalEntryRefund.date),\n      value: journalEntryRefund.date,\n    };\n\n    const paymentMethod = (() => {\n      const { ancestors, ...paymentMethod } = journalEntryRefund.paymentMethod;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(paymentMethod);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const total = {\n      inputValue: (\n        journalEntryRefund.total.num / journalEntryRefund.total.den\n      ).toFixed(2),\n      value: journalEntryRefund.total,\n    };\n\n    const reconciled = journalEntryRefund.reconciled;\n\n    const description = journalEntryRefund.description ?? null;\n\n    return {\n      date,\n      paymentMethod,\n      total,\n      reconciled,\n      description,\n    };\n  }, [journalEntryRefund]);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<UpdateValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      if (!initialValues) {\n        formikHelpers.setStatus({\n          msg: `Failed to load initial values for refund \"${refundId}\".`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n        return;\n      } else if (!refundId) {\n        formikHelpers.setStatus({\n          msg: `No refund ID.`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n        return;\n      }\n\n      try {\n        formikHelpers.setStatus(null);\n        await submitUpdate(\n          client,\n          initialValues,\n          refundId,\n          values,\n          formikHelpers\n        );\n        onClose();\n      } catch (error) {\n        formikHelpers.setStatus({\n          msg: error?.message ?? `${error}`,\n          type: FormikStatusType.FATAL_ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, initialValues, onClose, refundId]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<UpdateValues>) => {\n      return (\n        <UpdateRefundDialog\n          entryId={entryId}\n          refundId={refundId}\n          open={open}\n          onClose={onClose}\n          onExited={onExited}\n          journalEntry={data?.journalEntry ?? null}\n          loading={loading}\n          handleSubmit={props.handleSubmit}\n        />\n      );\n    },\n    [data, entryId, loading, onClose, onExited, open, refundId]\n  );\n\n  return (\n    <Formik\n      initialValues={(initialValues ?? {}) as UpdateValues}\n      initialStatus={initialStatus}\n      // isInitialValid={false}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default UpdateRefund;\n","import { O } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { parseName } from \"humanparser\";\n\nimport {\n  JournalEntryAddFields,\n  PayMethodEntryOptFragment,\n  DeptEntryOptFragment,\n  CatEntryOptFragment,\n  SrcEntryBizOptFragment,\n  SrcEntryDeptOptFragment,\n  SrcEntryPersonOptFragment,\n  JournalEntrySourceType,\n  AddEntryMutation as AddEntry,\n  AddEntryMutationVariables as AddEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\n\nexport type SourceValue =\n  | SrcEntryBizOptFragment\n  | SrcEntryDeptOptFragment\n  | SrcEntryPersonOptFragment\n  | string;\n\nexport type AddValues = O.Overwrite<\n  O.Required<JournalEntryAddFields, keyof JournalEntryAddFields, \"deep\">,\n  {\n    category: TransmutationValue<string, CatEntryOptFragment[]>;\n    date: TransmutationValue<Date | null, JournalEntryAddFields[\"date\"]>;\n    total: TransmutationValue<string, JournalEntryAddFields[\"total\"]>;\n    paymentMethod: TransmutationValue<\n      string,\n      (PayMethodEntryOptFragment | string)[]\n    >;\n    department: DeptEntryOptFragment;\n    source: TransmutationValue<\n      string,\n      (JournalEntrySourceType | SourceValue)[]\n    >;\n  }\n>;\n\nconst ADD_ENTRY = gql`\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst submitAdd: (\n  client: ApolloClient<any>,\n  ...rest: Parameters<FormikConfig<AddValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<AddValues>[\"onSubmit\"]> = async (\n  client,\n  values\n) => {\n  const { paymentMethod, paymentMethodAdd } = (() => {\n    const payMethod =\n      values.paymentMethod.value[values.paymentMethod.value.length - 1];\n\n    // New Payment Method\n    if (typeof payMethod === \"string\") {\n      const parent = (values.paymentMethod.value[\n        values.paymentMethod.value.length - 2\n      ] as PayMethodEntryOptFragment).id;\n\n      return {\n        paymentMethod: \"\",\n        paymentMethodAdd: {\n          parent,\n          refId: payMethod,\n          name: payMethod,\n          active: false,\n        },\n      };\n    }\n\n    return {\n      paymentMethod: payMethod.id,\n      paymentMethodAdd: null,\n    };\n  })();\n\n  const { source, personAdd, businessAdd } = (() => {\n    const srcType = values.source.value[0] as JournalEntrySourceType;\n    const src = values.source.value[\n      values.source.value.length - 1\n    ] as SourceValue;\n\n    if (typeof src === \"string\") {\n      if (srcType === JournalEntrySourceType.Person) {\n        const parsedName = parseName(src);\n\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Person,\n            id: \"\",\n          },\n          businessAdd: null,\n          personAdd: {\n            name: {\n              first: parsedName.firstName,\n              last: parsedName.lastName,\n            },\n          },\n        };\n      } else {\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Business,\n            id: \"\",\n          },\n          businessAdd: {\n            name: src,\n          },\n          personAdd: null,\n        };\n      }\n    }\n\n    return {\n      source: {\n        sourceType: srcType,\n        id: src.id,\n      },\n      personAdd: null,\n      businessAdd: null,\n    };\n  })();\n\n  const variables: O.Required<AddEntryVars, keyof AddEntryVars, \"deep\"> = {\n    fields: {\n      date: values.date.value,\n      department: values.department.id,\n      type: values.type,\n      category: values.category.value[values.category.value.length - 1].id,\n      description: values.description?.trim() || null,\n      total: values.total.value,\n      reconciled: values.reconciled ?? null,\n      paymentMethod,\n      source,\n    },\n    paymentMethodAdd,\n    personAdd,\n    businessAdd,\n  };\n\n  await client.mutate<AddEntry, AddEntryVars>({\n    mutation: ADD_ENTRY,\n    variables,\n  });\n};\n\nexport default submitAdd;\n","import React, { useCallback, useMemo, useState, useEffect } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField, useFormikContext } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport { CAT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  CatEntryOptsQuery as CatEntryOpts,\n  CatEntryOptsQueryVariables as CatEntryOptsVars,\n  CatEntryOptFragment as CatValue,\n  CatEntryOptFragment,\n  JournalEntryType,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst CAT_OPTS_QUERY = gql`\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ${CAT_ENTRY_OPT_FRAGMENT}\n`;\n\ntype CatValueBeta = TransmutationValue<String, CatEntryOptFragment[]>;\n\ntype AutocompleteProps = AutocompletePropsRaw<CatValue> &\n  UseAutocompleteMultipleProps<CatValue>;\n\nconst getOptionLabel = (opt: CatValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: CatValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nconst NULLISH = Symbol();\n\nexport type CategoryProps = {\n  entryType?: string | null;\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Category = function (props: CategoryProps) {\n  const formikContext = useFormikContext<{\n    category?: CatValueBeta;\n    type?: JournalEntryType;\n  }>();\n\n  const { disabled: disabledFromProps = false } = props;\n\n  const value = formikContext.values?.category?.value || [];\n  const inputValue =\n    formikContext.values?.category?.inputValue.trimLeft() || \"\";\n  const entryType = formikContext.values?.type ?? null;\n\n  const catValue = value[value.length - 1];\n\n  const variables = useMemo<CatEntryOptsVars>(\n    () =>\n      catValue?.id\n        ? {\n            where: {\n              parent: {\n                eq: catValue.id,\n              },\n              type: {\n                eq: entryType,\n              },\n            },\n          }\n        : {\n            where: {\n              hasParent: false,\n              type: {\n                eq: entryType,\n              },\n            },\n          },\n    [catValue, entryType]\n  );\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<QueryHookOptions<CatEntryOpts, CatEntryOptsVars>[\"onError\"]>\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    CatEntryOpts,\n    CatEntryOptsVars\n  >(CAT_OPTS_QUERY, {\n    skip: (entryType ?? NULLISH) === NULLISH,\n    variables,\n    onCompleted: () =>\n      setTimeout(() => formikContext.validateField(\"category\"), 0),\n    onError,\n  });\n  const catOpts = data?.catOpts;\n  const options = useMemo<CatEntryOptFragment[]>(() => catOpts || [], [\n    catOpts,\n  ]);\n\n  const validate = useCallback(\n    (transmutationVal: CatValueBeta | null | undefined) => {\n      const values = transmutationVal?.value || [];\n      const value = values[values.length - 1] || null;\n\n      if (!value) {\n        return \"Category Required\";\n      } else if (options.length > 0) {\n        return \"Sub-category Required\";\n      }\n    },\n    [options]\n  );\n\n  const [field, meta, helpers] = useField<CatValueBeta | null | undefined>({\n    name: \"category\",\n    validate,\n  });\n\n  const { onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  // Reset category value if type changes\n  useEffect(() => {\n    if (catValue && entryType !== catValue.type) {\n      setValue({\n        inputValue: \"\",\n        value: [],\n      });\n    }\n  }, [entryType, catValue, setValue]);\n\n  // const disableTextInput = useMemo(() => {\n  //   return value.length > 0 && options.length === 0;\n  // }, [value, options]);\n\n  const helperText = useMemo(() => {\n    if (!!error && touched) {\n      return error;\n    } else if ((entryType ?? NULLISH) === NULLISH) {\n      return \"Category requires entry type.\";\n    } else if (!!gqlError) {\n      return gqlError.message;\n    }\n    return \"\";\n  }, [entryType, error, touched, gqlError]);\n\n  const disabled = useMemo(\n    () =>\n      loading ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n      (entryType ?? NULLISH) === NULLISH ||\n      disabledFromProps,\n    [disabledFromProps, entryType, formikStatus, loading]\n  );\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={(touched && !!error) || !!gqlError}\n          disabled={disabled}\n          helperText={helperText}\n          name=\"category\"\n          label=\"Category\"\n        />\n      );\n    },\n    [props, touched, error, gqlError, disabled, helperText]\n  );\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => void onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n      setValue({\n        inputValue,\n        value,\n      });\n    },\n    [setValue, value]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      inputValue,\n      onChange,\n      name: \"category\",\n    };\n  }, [\n    field,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    loading,\n    disabled,\n    value,\n    renderInput,\n    onInputChange,\n    inputValue,\n    onChange,\n  ]);\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Category;\n","import React, { useCallback, useMemo, useState } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport gql from \"graphql-tag\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\n\nimport {\n  DeptEntryOptFragment as DeptValue,\n  DeptEntryOptsQuery,\n  DeptEntryOptsQueryVariables as DeptEntryOptsQueryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport {\n  // TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst DEPT_OPTS_QUERY = gql`\n  query DeptEntryOpts($fromParent: ID) {\n    deptOpts: departments(fromParent: $fromParent) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst businessId = \"5dc4b09bcf96e166daaa0090\";\n\ntype AutocompleteProps = AutocompletePropsRaw<DeptValue> &\n  UseAutocompleteMultipleProps<DeptValue>;\n\nconst getOptionLabel = (opt: DeptValue) => opt.name;\nconst renderTags: AutocompleteProps[\"renderTags\"] = (\n  values: DeptValue[],\n  getTagProps\n) => {\n  const lastIndex = values.length - 1;\n  return values.map((dept: any, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={dept.name}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\nexport type DepartmentProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nconst Department = function (props: DepartmentProps) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<DeptEntryOptsQuery, DeptEntryOptsQueryVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    DeptEntryOptsQuery,\n    DeptEntryOptsQueryVars\n  >(DEPT_OPTS_QUERY, { onError, variables: { fromParent: businessId } });\n\n  const depts = data?.deptOpts || [];\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  // Input must be controlled to stop input when leaf option is selected.\n  const [inputValue, setInputValue] = useState(\"\");\n\n  const validate = useCallback(\n    (value: DeptValue | null) => {\n      if (!value) {\n        return \"Department Required\";\n      } else if (\n        depts.some(\n          ({ parent }) =>\n            parent.__typename === \"Department\" && parent.id === value.id\n        )\n      ) {\n        return \"Sub-department Required\";\n      }\n    },\n    [depts]\n  );\n\n  const [field, meta, helpers] = useField<DeptValue | null>({\n    name: \"department\",\n    validate,\n  });\n\n  const { value: deptValue, onBlur: onBlurField } = field;\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const idDeptMap = useMemo(\n    () =>\n      new Map(\n        depts.reduce((idDepts, dept) => {\n          idDepts.push([dept.id, dept]);\n          return idDepts;\n        }, [] as [string, DeptValue][])\n      ),\n    [depts]\n  );\n\n  const value = useMemo(() => {\n    if (!deptValue) {\n      return [];\n    }\n\n    const value: DeptValue[] = [deptValue];\n\n    let { __typename, id } = deptValue.parent;\n\n    while (__typename !== \"Business\" && idDeptMap.has(id)) {\n      const parentDept = idDeptMap.get(id) as DeptValue;\n      value.unshift(parentDept);\n      ({ __typename, id } = parentDept.parent);\n    }\n\n    return value;\n  }, [deptValue, idDeptMap]);\n\n  const options = useMemo(() => {\n    const deptId = value[value.length - 1]?.id;\n    return depts.filter((opt) =>\n      deptId ? opt.parent.id === deptId : opt.parent.__typename === \"Business\"\n    );\n  }, [depts, value]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0;\n  }, [value, options]);\n\n  const helperText = useMemo(() => {\n    if (!!error && touched) {\n      return error;\n    } else if (!!gqlError) {\n      return gqlError.message;\n    }\n    return \"\";\n  }, [error, touched, gqlError]);\n\n  const disabled = useMemo(\n    () =>\n      loading ||\n      disableTextInput ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR ||\n      disabledFromProps,\n    [disableTextInput, disabledFromProps, formikStatus, loading]\n  );\n\n  const renderInput = useCallback(\n    (params: RenderInputParams) => {\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={helperText}\n          name=\"department\"\n          label=\"Department\"\n          disabled={disabled}\n        />\n      );\n    },\n    [props, touched, error, helperText, disabled]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback(\n    (event) => {\n      setHasFocus(false);\n      onBlurField(event);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      if (!value) {\n        setValue(null);\n      } else if (Array.isArray(value)) {\n        const len = value.length;\n        setValue(len === 0 ? null : value[len - 1]);\n      } else {\n        setValue(value);\n      }\n    },\n    [setValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, value: string, reason) => {\n      setInputValue((value || \"\").trimStart());\n    },\n    [setInputValue]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      disabled,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onChange,\n      onInputChange,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      name: \"department\",\n    };\n  }, [\n    field,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    disableTextInput,\n    disabled,\n    value,\n    renderInput,\n    loading,\n    onChange,\n    onInputChange,\n    inputValue,\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Department;\n","import React, { useCallback, useMemo, useState, useRef } from \"react\";\nimport Autocomplete, {\n  AutocompleteProps as AutocompletePropsRaw,\n  RenderInputParams,\n} from \"@material-ui/lab/Autocomplete\";\nimport { UseAutocompleteMultipleProps } from \"@material-ui/lab/useAutocomplete\";\nimport { useField } from \"formik\";\nimport { useQuery, QueryHookOptions } from \"@apollo/react-hooks\";\nimport { TextFieldProps, TextField, Box, Chip } from \"@material-ui/core\";\nimport { ChevronRight } from \"@material-ui/icons\";\nimport { parseName } from \"humanparser\";\nimport * as namecase from \"namecase\";\nimport gql from \"graphql-tag\";\n\nimport {\n  JournalEntrySourceType,\n  SrcEntryOptsQuery,\n  SrcEntryOptsQueryVariables as SrcEntryOptsQueryVars,\n  SrcEntryBizOptFragment as BizOpt,\n  SrcEntryDeptOptFragment as DeptOpt,\n  SrcEntryPersonOptFragment as PersonOpt,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT,\n} from \"../upsertEntry.gql\";\nimport {\n  TransmutationValue,\n  useFormikStatus,\n  FormikStatusType,\n} from \"../../../../formik/utils\";\n\nconst SRC_ENTRY_OPTS_QUERY = gql`\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(searchByName: $name) @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(searchByName: { first: $name, last: $name }) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n`;\n\nexport type SourceProps = {\n  variant?: \"filled\" | \"outlined\";\n  autoFocus?: boolean;\n} & Omit<TextFieldProps, \"value\">;\n\nexport type SrcObjectValue = BizOpt | DeptOpt | PersonOpt;\nexport type SourceValue = SrcObjectValue | string;\nexport type Value = SourceValue | JournalEntrySourceType;\ntype Options = Value[];\nexport type FieldValue = TransmutationValue<string, Value[]>;\n\ntype AutocompleteProps = AutocompletePropsRaw<Value> &\n  UseAutocompleteMultipleProps<Value>;\n\nexport const isFreeSoloOpt = (opt: Value) => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n    case JournalEntrySourceType.Department:\n    case JournalEntrySourceType.Person:\n      break;\n    default:\n      return typeof opt === \"string\";\n  }\n  return false;\n};\n\nconst getOptionLabel: AutocompleteProps[\"getOptionLabel\"] = (opt): string => {\n  switch (opt) {\n    case JournalEntrySourceType.Business:\n      return \"Vendor\";\n    case JournalEntrySourceType.Department:\n      return \"Department\";\n    case JournalEntrySourceType.Person:\n      return \"Person\";\n    default:\n      if (typeof opt === \"string\") {\n        return opt;\n      }\n  }\n\n  if (opt.__typename === \"Person\") {\n    return `${opt.personName.first} ${opt.personName.last}`;\n  }\n\n  return opt.name;\n};\n\nconst renderTags: AutocompleteProps[\"renderTags\"] = (values, getTagProps) => {\n  const lastIndex = values.length - 1;\n  return values.map((value: Value, index: number) => {\n    const isLastIndex = lastIndex === index;\n    const { key, ...props } = getTagProps({ index }) as any;\n\n    if (isFreeSoloOpt(value)) {\n      return value;\n    }\n\n    return (\n      <Box\n        key={key}\n        display=\"flex\"\n        flexDirection=\"row\"\n        alignItems=\"center\"\n        justifyContent=\"flex-start\"\n      >\n        <Chip\n          color={isLastIndex ? \"primary\" : \"default\"}\n          variant={isLastIndex ? \"default\" : \"outlined\"}\n          label={getOptionLabel(value)}\n          size=\"medium\"\n          {...props}\n          disabled={!isLastIndex}\n        />{\" \"}\n        {!isLastIndex && <ChevronRight fontSize=\"small\" />}\n      </Box>\n    );\n  });\n};\n\nconst filterOptions: AutocompleteProps[\"filterOptions\"] = (\n  options,\n  { inputValue }\n) => {\n  const regex = new RegExp(`(^|\\\\s)${inputValue}`, \"i\");\n  return options.filter((opt) => regex.test(getOptionLabel(opt)));\n};\nconst validate = (transmutationVal?: FieldValue) => {\n  const value = transmutationVal?.value || [];\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  if (srcType === null || srcValue === null || srcValue === \"\") {\n    return \"Source Required\";\n  } else if (\n    isFreeSoloOpt(srcValue) &&\n    srcType === JournalEntrySourceType.Person\n  ) {\n    // Validate Free Solo Person name\n    const parsedName = parseName(srcValue as string);\n    if (!parsedName.firstName.trim()) {\n      return \"First Name Required\";\n    } else if (!parsedName.lastName.trim()) {\n      return \"Last Name Required\";\n    }\n  }\n};\n\nconst Source = function (props: SourceProps) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [hasFocus, setHasFocus] = useState(false);\n\n  const [field, meta, helpers] = useField<FieldValue | null | undefined>({\n    name: \"source\",\n    validate,\n  });\n\n  const { onBlur: onBlurField } = field;\n  const value = field.value?.value ?? [];\n  const inputValue = field.value?.inputValue ?? \"\";\n  const { error, touched } = meta;\n  const { setValue } = helpers;\n\n  const srcType = (value[0] ?? null) as JournalEntrySourceType | null;\n  const srcValue = value.length > 1 ? value[value.length - 1] : null;\n\n  const searchedName = useRef(\"\");\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const onError = useCallback<\n    NonNullable<\n      QueryHookOptions<SrcEntryOptsQuery, SrcEntryOptsQueryVars>[\"onError\"]\n    >\n  >(\n    (error) =>\n      void setFormikStatus({\n        msg: error.message,\n        type: FormikStatusType.FATAL_ERROR,\n      }),\n    [setFormikStatus]\n  );\n\n  const { loading, error: gqlError, data } = useQuery<\n    SrcEntryOptsQuery,\n    SrcEntryOptsQueryVars\n  >(SRC_ENTRY_OPTS_QUERY, {\n    skip: !searchedName.current && !value[1],\n    variables: {\n      name: searchedName.current,\n      isBiz: srcType !== JournalEntrySourceType.Person,\n    },\n    onError,\n  });\n\n  const idDeptMap = useMemo(() => {\n    const idDeptMap = new Map<string, DeptOpt>();\n    for (const bizOpt of data?.businesses || []) {\n      for (const deptOpt of bizOpt.departments) {\n        idDeptMap.set(deptOpt.id, deptOpt);\n      }\n    }\n    return idDeptMap;\n  }, [data]);\n\n  const options = useMemo<Options>(() => {\n    if (srcType === null) {\n      return [JournalEntrySourceType.Business, JournalEntrySourceType.Person];\n      // Person ONLY person options\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return srcValue === null ? data?.people || [] : [];\n      // Only Business options\n    } else if (!srcValue) {\n      return data?.businesses || [];\n      // Free solo no options\n    } else if (typeof srcValue === \"string\") {\n      return [] as Options;\n    }\n\n    const options: DeptOpt[] = [];\n\n    for (const deptOpt of idDeptMap.values()) {\n      if (\n        deptOpt.parent.__typename === srcValue.__typename &&\n        deptOpt.parent.id === srcValue.id\n      ) {\n        options.push(deptOpt);\n      }\n    }\n\n    return options;\n  }, [srcType, data, idDeptMap, srcValue]);\n\n  const freeSolo = useMemo(() => {\n    return srcType !== null && srcValue === null;\n  }, [srcType, srcValue]);\n\n  const disableTextInput = useMemo(() => {\n    return value.length > 0 && options.length === 0 && !freeSolo;\n  }, [value, options, freeSolo]);\n\n  const label = useMemo(() => {\n    if (srcType === null) {\n      return \"Source Type\";\n    } else if (srcType === JournalEntrySourceType.Person) {\n      return \"Person Name\";\n    } else if (value.length === 1) {\n      return \"Vendor\";\n    } else if (value.length === 2 && options.length > 0) {\n      return \"Department\";\n    } else if (options.length > 0) {\n      return \"Sub-Department\";\n    }\n\n    return \"Vendor\";\n  }, [value, options, srcType]);\n\n  const disabled = useMemo(\n    () =>\n      // loading || CANNOT disable on loading bc input loses focus on first char\n      disabledFromProps ||\n      disableTextInput ||\n      formikStatus?.type === FormikStatusType.FATAL_ERROR,\n    [disableTextInput, disabledFromProps, formikStatus]\n  );\n\n  const renderInput = useCallback(\n    (\n      params: RenderInputParams & { inputProps?: TextFieldProps[\"inputProps\"] }\n    ) => {\n      // Disable input?\n      if (\n        srcValue &&\n        typeof srcValue !== \"string\" &&\n        srcValue.__typename !== \"Person\" &&\n        options.length === 0\n      ) {\n        params = {\n          ...params,\n          inputProps: {\n            ...(params?.inputProps || {}),\n            style: {\n              ...(params?.inputProps?.style || {}),\n              display: \"none\",\n            },\n          },\n        };\n      }\n\n      return (\n        <TextField\n          {...(props as any)}\n          variant={props.variant || \"filled\"}\n          {...params}\n          error={touched && !!error}\n          helperText={touched ? error : undefined}\n          name=\"source\"\n          label={label}\n          disabled={disabled}\n        />\n      );\n    },\n    [srcValue, options.length, props, touched, error, label, disabled]\n  );\n\n  const onFocus = useCallback((event?) => setHasFocus(true), [setHasFocus]);\n  const onBlur = useCallback<NonNullable<AutocompleteProps[\"onBlur\"]>>(\n    (event) => {\n      setHasFocus(false);\n      // Fixes formik validate called with wrong version of value\n      event.persist();\n      setTimeout(() => onBlurField(event), 0);\n    },\n    [setHasFocus, onBlurField]\n  );\n\n  const onChange = useCallback<NonNullable<AutocompleteProps[\"onChange\"]>>(\n    (event, value) => {\n      const srcValueIndex = value.length - 1;\n      const srcValue = value[srcValueIndex];\n      if (isFreeSoloOpt(srcValue)) {\n        const formattedSrcStrs: string[] = [];\n\n        for (let str of (srcValue as string).split(\" \")) {\n          if (str) {\n            if (namecase.checkName(str)) {\n              str = namecase(str);\n            }\n\n            formattedSrcStrs.push(str);\n          }\n        }\n\n        const formattedStr = formattedSrcStrs.join(\" \").trim();\n\n        value[srcValueIndex] =\n          formattedStr.charAt(0).toUpperCase() + formattedStr.substring(1);\n      }\n      setValue({ inputValue, value });\n    },\n    [setValue, inputValue]\n  );\n\n  const onInputChange = useCallback<\n    NonNullable<AutocompleteProps[\"onInputChange\"]>\n  >(\n    (event, inputValue: string, reason) => {\n      inputValue = (inputValue || \"\").trimStart();\n\n      if (!disableTextInput) {\n        setValue({ inputValue, value });\n      }\n\n      if (srcType !== null && srcValue === null && inputValue) {\n        searchedName.current = inputValue[0].toLowerCase();\n      }\n    },\n    [setValue, srcType, srcValue, value, disableTextInput, searchedName]\n  );\n\n  const autoCompleteProps = useMemo<AutocompleteProps>(() => {\n    return {\n      ...field,\n      inputValue: disableTextInput ? \"\" : inputValue,\n      open: hasFocus && options.length > 0,\n      onFocus,\n      onBlur,\n      options,\n      renderTags,\n      forcePopupIcon: false,\n      freeSolo,\n      value,\n      renderInput,\n      loading,\n      autoSelect: true,\n      multiple: true,\n      getOptionLabel,\n      onInputChange,\n      onChange,\n      filterOptions,\n      name: \"source\",\n      disabled,\n    };\n  }, [\n    field,\n    disableTextInput,\n    inputValue,\n    hasFocus,\n    options,\n    onFocus,\n    onBlur,\n    freeSolo,\n    value,\n    renderInput,\n    loading,\n    onInputChange,\n    onChange,\n    disabled,\n  ]);\n\n  if (gqlError) {\n    return <pre>{JSON.stringify(gqlError, null, 2)}</pre>;\n  }\n\n  return <Autocomplete {...autoCompleteProps} />;\n};\n\nexport default Source;\n","import React, { useMemo } from \"react\";\nimport { useField, useFormikContext } from \"formik\";\nimport ToggleButtonGroup, {\n  ToggleButtonGroupProps,\n} from \"@material-ui/lab/ToggleButtonGroup\";\nimport ToggleButton from \"@material-ui/lab/ToggleButton\";\nimport { BankPlus, BankMinus } from \"mdi-material-ui\";\nimport {\n  Tooltip,\n  Box,\n  FormControlLabel,\n  FormControlLabelProps,\n  FormControl,\n  FormHelperText,\n} from \"@material-ui/core\";\nimport { JournalEntryType } from \"../../../../apollo/graphTypes\";\nimport { useFormikStatus, FormikStatusType } from \"../../../../formik/utils\";\n\nconst NULLISH: unique symbol = Symbol();\n\nconst validate = (value?: JournalEntryType) => {\n  if (((value ?? NULLISH) as any) === NULLISH) {\n    return \"Type Required\";\n  }\n};\n\nconst Type = function (\n  props: {\n    label?: boolean | FormControlLabelProps[\"labelPlacement\"];\n  } & ToggleButtonGroupProps & { disabled?: boolean }\n) {\n  const { disabled: disabledFromProps = false } = props;\n\n  const [formikStatus] = useFormikStatus();\n\n  const { label = false } = props;\n\n  const { isSubmitting } = useFormikContext();\n\n  const [field, meta, helpers] = useField<JournalEntryType | null>({\n    name: \"type\",\n    validate,\n  });\n\n  const { error, touched } = meta;\n  const { setValue, setTouched } = helpers;\n\n  const toggleButtonGroupProps: ToggleButtonGroupProps = useMemo(\n    () => ({\n      size: \"small\",\n      exclusive: true,\n      disabled: isSubmitting,\n      ...field,\n      onChange: async (event, value: JournalEntryType) => {\n        if (((value ?? NULLISH) as any) === NULLISH) {\n          return;\n        }\n\n        setValue(value);\n        await new Promise((resolve) => setTimeout(resolve, 0)); //Avoid pres\n        setTouched(true);\n      },\n    }),\n    [field, isSubmitting, setValue, setTouched]\n  );\n\n  const disabled =\n    isSubmitting ||\n    disabledFromProps ||\n    formikStatus?.type === FormikStatusType.FATAL_ERROR;\n\n  const control = useMemo(\n    () => (\n      <Box pl={1} clone>\n        <ToggleButtonGroup {...(props as any)} {...toggleButtonGroupProps}>\n          <ToggleButton disabled={disabled} value={JournalEntryType.Credit}>\n            <Tooltip arrow placement=\"top\" title=\"Credit\">\n              <BankPlus />\n            </Tooltip>\n          </ToggleButton>\n          <ToggleButton disabled={disabled} value={JournalEntryType.Debit}>\n            <Tooltip arrow placement=\"top\" title=\"Debit\">\n              <BankMinus />\n            </Tooltip>\n          </ToggleButton>\n        </ToggleButtonGroup>\n      </Box>\n    ),\n    [props, toggleButtonGroupProps, disabled]\n  );\n\n  if (label) {\n    return (\n      <FormControl>\n        <FormControlLabel\n          {...(props as any)}\n          labelPlacement={typeof label === \"boolean\" ? undefined : label}\n          control={control}\n          label=\"Type\"\n        />\n        {touched && !!error && <FormHelperText error>{error}</FormHelperText>}\n      </FormControl>\n    );\n  }\n\n  return (\n    <FormControl>\n      {control}\n      {!!error && <FormHelperText error>{error}</FormHelperText>}\n    </FormControl>\n  );\n};\n\nexport default Type;\n","import React, { useMemo, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  Box,\n  DialogContent,\n  DialogContentText,\n  PaperProps,\n  Grid,\n  DialogActions,\n  Button,\n  useTheme,\n  GridProps,\n} from \"@material-ui/core\";\nimport {\n  Add as AddIcon,\n  Cancel as CancelIcon,\n  Queue as QueueIcon,\n} from \"@material-ui/icons\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport { useApolloClient, useQuery } from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\n\nimport {\n  DeptIniValueForAddEntryQuery as DeptIniValueForAddEntry,\n  DeptIniValueForAddEntryQueryVariables as DeptIniValueForAddEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport submitAdd, { AddValues } from \"./submitAdd\";\nimport {\n  FormikStatusType,\n  FormikStatus,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../upsertEntry.gql\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Category from \"../EntryFields/Category\";\nimport Department from \"../EntryFields/Department\";\nimport Source from \"../EntryFields/Source\";\nimport Type from \"../EntryFields/Type\";\n\nexport interface AddEntryProps {\n  deptId?: string | null;\n  open: boolean;\n  onClose: () => void;\n}\n\nconst gridEntryResponsiveProps: GridProps = {\n  item: true,\n  lg: 4,\n  sm: 6,\n  xs: 12,\n} as const;\n\nconst DEPT_INI_VALUE = gql`\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst AddEntryDialog = (\n  props: AddEntryProps & {\n    loading: boolean;\n  }\n) => {\n  const { open, onClose, loading } = props;\n\n  const { resetForm, isSubmitting, isValid, submitForm } = useFormikContext<\n    AddValues\n  >();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const onExited = useCallback(() => {\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, setFormikStatus]);\n\n  const title = useMemo<string>(() => {\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (isSubmitting) {\n      return \"Submitting Add Entry...\";\n    } else if (loading) {\n      return \"Loading Add Entry...\";\n    }\n    return \"Add Entry\";\n  }, [fatalError, isSubmitting, loading]);\n\n  const theme = useTheme();\n\n  const onClickAdd = useCallback(async () => {\n    try {\n      setFormikStatus(null);\n      await submitForm();\n      onClose();\n    } catch (error) {\n      setFormikStatus({\n        msg: error.message ?? `${error}`,\n        type: FormikStatusType.ERROR,\n      } as FormikStatus);\n    }\n  }, [submitForm, onClose, setFormikStatus]);\n\n  const onClickAddAndNew = useCallback(async () => {\n    try {\n      setFormikStatus(null);\n      await submitForm();\n      resetForm();\n    } catch (error) {\n      setFormikStatus({\n        msg: error.message ?? `${error}`,\n        type: FormikStatusType.ERROR,\n      } as FormikStatus);\n    }\n  }, [submitForm, resetForm, setFormikStatus]);\n\n  const handleSubmit = useCallback(\n    (event: React.FormEvent<HTMLFormElement>) => event.preventDefault(),\n    []\n  );\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      fullWidth\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & { onSubmit: FormikProps<AddValues>[\"handleSubmit\"] }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(isSubmitting || loading) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid {...gridEntryResponsiveProps} justify=\"center\" container>\n              <Type\n                style={{ margin: theme.spacing(1) }}\n                label=\"start\"\n                disabled={loading || isSubmitting || !!fatalError}\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <DateEntry\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Source\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Category\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Department\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Description\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <PaymentMethod\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Total\n                disabled={loading || isSubmitting || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              {...gridEntryResponsiveProps}\n            >\n              <Reconcile\n                disabled={loading || isSubmitting || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <React.Fragment>\n            <Button\n              onClick={onClickAdd}\n              disabled={loading || isSubmitting || !isValid}\n              type=\"submit\"\n              startIcon={<AddIcon />}\n              color=\"primary\"\n              variant=\"contained\"\n            >\n              Add\n            </Button>\n            <Button\n              onClick={onClickAddAndNew}\n              disabled={loading || isSubmitting || !isValid}\n              type=\"submit\"\n              startIcon={<QueueIcon />}\n              variant=\"outlined\"\n            >\n              Add & New\n            </Button>\n          </React.Fragment>\n        )}\n        <Button\n          disabled={isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst AddEntry = (props: AddEntryProps) => {\n  const { open, onClose, deptId } = props;\n\n  const { loading, error, data } = useQuery<\n    DeptIniValueForAddEntry,\n    DeptIniValueForAddEntryVars\n  >(DEPT_INI_VALUE, {\n    skip: !deptId,\n    variables: {\n      id: deptId as string,\n    },\n  });\n\n  const department = data?.department;\n  const initialValues = useMemo<Partial<AddValues>>(\n    () => (department ? { department } : {}),\n    [department]\n  );\n  const initialStatus = useMemo<FormikStatus | null>(\n    () =>\n      error ? { msg: error.message, type: FormikStatusType.FATAL_ERROR } : null,\n    [error]\n  );\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<AddValues>[\"onSubmit\"]>(\n    (values, formikHelpers) => submitAdd(client, values, formikHelpers),\n    [client]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<AddValues>) => (\n      <AddEntryDialog open={open} onClose={onClose} loading={loading} />\n    ),\n    [open, onClose, loading]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as AddValues}\n      initialStatus={initialStatus}\n      enableReinitialize={true}\n      onSubmit={onSubmit}\n      children={children}\n    />\n  );\n};\n\nexport default AddEntry;\n","import { O, U } from \"ts-toolbelt\";\nimport { FormikConfig } from \"formik\";\nimport gql from \"graphql-tag\";\nimport ApolloClient from \"apollo-client\";\nimport { isEqual } from \"date-fns\";\nimport { parseName } from \"humanparser\";\n\nimport {\n  JournalEntryUpdateFields,\n  PayMethodEntryOptFragment,\n  DeptEntryOptFragment,\n  CatEntryOptFragment,\n  JournalEntrySourceType,\n  UpdateEntryMutation as UpdateEntry,\n  UpdateEntryMutationVariables as UpdateEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport { TransmutationValue } from \"../../../../formik/utils\";\nimport { CHECK_ID } from \"../../constants\";\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport { SourceValue } from \"./submitAdd\";\n\nexport type UpdateValues = O.NonNullable<\n  O.Overwrite<\n    O.Required<\n      JournalEntryUpdateFields,\n      keyof JournalEntryUpdateFields,\n      \"deep\"\n    >,\n    {\n      category: TransmutationValue<string, CatEntryOptFragment[]>;\n      date: TransmutationValue<\n        Date,\n        NonNullable<JournalEntryUpdateFields[\"date\"]>\n      >;\n      total: TransmutationValue<\n        string,\n        NonNullable<JournalEntryUpdateFields[\"total\"]>\n      >;\n      paymentMethod: TransmutationValue<\n        string,\n        (PayMethodEntryOptFragment | string)[]\n      >;\n      department: DeptEntryOptFragment;\n      source: TransmutationValue<\n        string,\n        (JournalEntrySourceType | SourceValue)[]\n      >;\n    }\n  >,\n  keyof Omit<JournalEntryUpdateFields, \"description\">\n>;\n\nexport type IniUpdateValues = O.Overwrite<\n  UpdateValues,\n  {\n    paymentMethod: TransmutationValue<string, PayMethodEntryOptFragment[]>;\n    source: TransmutationValue<\n      string,\n      (JournalEntrySourceType | U.Exclude<SourceValue, string>)[]\n    >;\n  }\n>;\n\nconst NULLISH = Symbol();\n\nconst UPDATE_ENTRY = gql`\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst submitUpdate: (\n  client: ApolloClient<any>,\n  iniValues: IniUpdateValues,\n  id: string,\n  ...rest: Parameters<FormikConfig<UpdateValues>[\"onSubmit\"]>\n) => ReturnType<FormikConfig<UpdateValues>[\"onSubmit\"]> = async (\n  client,\n  iniValues,\n  id,\n  values\n) => {\n  // Category\n  const category = (() => {\n    const category =\n      values.category.value[values.category.value.length - 1]?.id ?? null;\n\n    return category ===\n      (iniValues.category.value[iniValues.category.value.length - 1]?.id ??\n        null)\n      ? null\n      : category;\n  })();\n\n  // Date\n  const date = isEqual(iniValues.date.inputValue, values.date.inputValue)\n    ? null\n    : values.date.value;\n\n  // Department\n  const department =\n    values.department.id === iniValues.department.id\n      ? null\n      : values.department.id;\n\n  // Description\n  const description =\n    values.description?.trim() && values.description !== iniValues.description\n      ? (values.description as string).trim()\n      : null;\n\n  // Total\n  const total =\n    values.total.value.num / values.total.value.den ===\n    iniValues.total.value.num / iniValues.total.value.den\n      ? null\n      : values.total.value;\n\n  // Type\n  const type = values.type === iniValues.type ? null : values.type;\n\n  // Reconciled\n  const reconciled =\n    values.reconciled === iniValues.reconciled ? null : values.reconciled;\n\n  // Payment Method\n  const { paymentMethod, paymentMethodAdd, paymentMethodUpdate } = (() => {\n    const iniPayMethod =\n      iniValues.paymentMethod.value[iniValues.paymentMethod.value.length - 1];\n\n    const [payMethod, parent] = values.paymentMethod.value\n      .slice(-2)\n      .reverse() as [\n      string | PayMethodEntryOptFragment,\n      PayMethodEntryOptFragment\n    ];\n\n    // Currently CHECK Numbers only\n    if (typeof payMethod === \"string\") {\n      // Update check number on payment method\n      if (iniPayMethod.parent && iniPayMethod.parent.id === CHECK_ID) {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: null,\n          paymentMethodUpdate: {\n            id: iniPayMethod.id,\n            fields: {\n              active: null,\n              refId: payMethod,\n              name: payMethod,\n            },\n          },\n        };\n\n        // Add new check number payment method\n      } else {\n        return {\n          paymentMethod: null,\n          paymentMethodAdd: {\n            parent: parent.id,\n            refId: payMethod,\n            name: payMethod,\n            active: false,\n          },\n          paymentMethodUpdate: null,\n        };\n      }\n      // Update payment method\n    } else if (payMethod.id !== iniPayMethod.id) {\n      return {\n        paymentMethod: payMethod.id,\n        paymentMethodAdd: null,\n        paymentMethodUpdate: null,\n      };\n    }\n\n    return {\n      paymentMethod: null,\n      paymentMethodAdd: null,\n      paymentMethodUpdate: null,\n    };\n  })();\n\n  // Source\n  const { source, personAdd, businessAdd } = (() => {\n    const srcType = values.source.value[0] as JournalEntrySourceType;\n    const src = values.source.value[\n      values.source.value.length - 1\n    ] as SourceValue;\n\n    const iniSrcType = iniValues.source.value[0] as JournalEntrySourceType;\n    const iniSrc = iniValues.source.value[\n      iniValues.source.value.length - 1\n    ] as Exclude<SourceValue, string>;\n\n    if (typeof src === \"string\") {\n      if (srcType === JournalEntrySourceType.Person) {\n        const parsedName = parseName(src);\n\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Person,\n            id: \"\",\n          },\n          businessAdd: null,\n          personAdd: {\n            name: {\n              first: parsedName.firstName,\n              last: parsedName.lastName,\n            },\n          },\n        };\n      } else {\n        return {\n          source: {\n            sourceType: JournalEntrySourceType.Business,\n            id: \"\",\n          },\n          businessAdd: {\n            name: src,\n          },\n          personAdd: null,\n        };\n      }\n    } else if (srcType === iniSrcType && src.id === iniSrc.id) {\n      // No Updates\n      return {\n        source: null,\n        businessAdd: null,\n        personAdd: null,\n      };\n    }\n\n    return {\n      source: {\n        sourceType: srcType,\n        id: src.id,\n      },\n      personAdd: null,\n      businessAdd: null,\n    };\n  })();\n\n  const variables: O.Required<\n    UpdateEntryVars,\n    keyof UpdateEntryVars,\n    \"deep\"\n  > = {\n    id,\n    fields: {\n      category,\n      date,\n      department,\n      description,\n      total,\n      type,\n      source,\n      reconciled,\n      paymentMethod,\n    },\n    paymentMethodAdd,\n    paymentMethodUpdate,\n    personAdd,\n    businessAdd,\n  };\n\n  console.log(variables);\n\n  await client.mutate<UpdateEntry, UpdateEntryVars>({\n    mutation: UPDATE_ENTRY,\n    variables,\n  });\n};\n\nexport default submitUpdate;\n","import React, { useMemo, useCallback } from \"react\";\nimport gql from \"graphql-tag\";\nimport { Formik, FormikConfig, FormikProps, useFormikContext } from \"formik\";\nimport { useQuery, useApolloClient } from \"@apollo/react-hooks\";\nimport {\n  Dialog,\n  DialogTitle,\n  Box,\n  DialogContent,\n  DialogContentText,\n  PaperProps,\n  Grid,\n  DialogActions,\n  Button,\n  useTheme,\n  GridProps,\n} from \"@material-ui/core\";\nimport { Add as AddIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\n\nimport {\n  UpdateEntryIniStateQuery as UpdateEntryIniState,\n  UpdateEntryIniStateQueryVariables as UpdateEntryIniStateVars,\n  JournalEntrySourceType,\n  SrcEntryDeptOptFragment,\n  SrcEntryBizOptFragment,\n} from \"../../../../apollo/graphTypes\";\nimport {\n  FormikStatus,\n  FormikStatusType,\n  useFormikStatus,\n} from \"../../../../formik/utils\";\nimport submitUpdate, { UpdateValues, IniUpdateValues } from \"./submitUpdate\";\nimport {\n  PAY_METHOD_ENTRY_OPT_FRAGMENT,\n  DEPT_ENTRY_OPT_FRAGMENT,\n  CAT_ENTRY_OPT_FRAGMENT,\n  SRC_ENTRY_PERSON_OPT_FRAGMENT,\n  SRC_ENTRY_BIZ_OPT_FRAGMENT,\n  SRC_ENTRY_DEPT_OPT_FRAGMENT,\n} from \"../upsertEntry.gql\";\nimport { min } from \"date-fns/esm\";\n\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\nimport Overlay from \"../../../Utils/Overlay\";\nimport DateEntry from \"../EntryFields/DateEntry\";\nimport Description from \"../EntryFields/Description\";\nimport Total from \"../EntryFields/Total\";\nimport Reconcile from \"../EntryFields/Reconcile\";\nimport PaymentMethod from \"../EntryFields/PaymentMethod\";\nimport Category from \"../EntryFields/Category\";\nimport Department from \"../EntryFields/Department\";\nimport Source from \"../EntryFields/Source\";\nimport Type from \"../EntryFields/Type\";\n\nexport interface UpdateEntryProps {\n  entryId: string | null;\n  open: boolean;\n  onClose: () => void;\n  onExited: () => void;\n}\n\nconst UPDATE_ENTRY_INI_STATE = gql`\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ...SrcEntryDeptOptFragment\n        ... on Department {\n          ancestors {\n            ...SrcEntryDeptOptFragment\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        num\n        den\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          num\n          den\n        }\n      }\n      reconciled\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n  ${CAT_ENTRY_OPT_FRAGMENT}\n  ${SRC_ENTRY_PERSON_OPT_FRAGMENT}\n  ${SRC_ENTRY_BIZ_OPT_FRAGMENT}\n  ${SRC_ENTRY_DEPT_OPT_FRAGMENT}\n  ${PAY_METHOD_ENTRY_OPT_FRAGMENT}\n`;\n\nconst MAX_DATE = new Date(8640000000000000);\n\nconst gridEntryResponsiveProps: GridProps = {\n  item: true,\n  lg: 4,\n  sm: 6,\n  xs: 12,\n} as const;\n\nconst UpdateEntryDialog = (\n  props: Omit<UpdateEntryProps, \"entryId\"> & {\n    journalEntry: NonNullable<UpdateEntryIniState[\"journalEntry\"]> | null;\n    loading: boolean;\n    handleSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n  }\n) => {\n  const {\n    open,\n    onClose,\n    onExited: onExitedCb,\n    journalEntry,\n    loading,\n    handleSubmit,\n  } = props;\n\n  const { resetForm, isSubmitting, isValid } = useFormikContext<UpdateValues>();\n\n  const [formikStatus, setFormikStatus] = useFormikStatus();\n\n  const refunds = journalEntry?.refunds || [];\n\n  // Updates to total cannot be less than current refunds.\n  const [minTotal, maxDate] = useMemo(\n    () =>\n      refunds.reduce(\n        ([minTotal, maxDate], { id, deleted, total, date }) => [\n          deleted ? minTotal : minTotal + total.num / total.den,\n          deleted ? maxDate : min([maxDate, new Date(date)]),\n        ],\n        [0, MAX_DATE]\n      ),\n    [refunds]\n  );\n\n  const onExited = useCallback(() => {\n    onExitedCb();\n    resetForm();\n    setFormikStatus(null);\n  }, [resetForm, onExitedCb, setFormikStatus]);\n\n  const [generalError, fatalError] = useMemo<\n    [string | null, boolean | null]\n  >(() => {\n    if (\n      formikStatus &&\n      (formikStatus.type === FormikStatusType.FATAL_ERROR ||\n        formikStatus.type === FormikStatusType.ERROR)\n    ) {\n      return [\n        formikStatus.msg,\n        formikStatus.type === FormikStatusType.FATAL_ERROR,\n      ];\n    }\n    return [null, null];\n  }, [formikStatus]);\n\n  const title = useMemo(() => {\n    const title = \"Entry Update\";\n\n    if (fatalError) {\n      return \"Fatal Error\";\n    } else if (loading) {\n      return `Loading ${title}...`;\n    } else if (isSubmitting) {\n      return `Submitting ${title}`;\n    }\n    return title;\n  }, [loading, fatalError, isSubmitting]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onClose}\n      onExited={onExited}\n      fullWidth\n      disableBackdropClick={isSubmitting}\n      disableEscapeKeyDown={isSubmitting}\n      maxWidth=\"lg\"\n      PaperProps={\n        {\n          component: \"form\",\n          onSubmit: handleSubmit,\n        } as PaperProps & {\n          onSubmit: FormikProps<UpdateValues>[\"handleSubmit\"];\n        }\n      }\n    >\n      <DialogTitle\n        style={generalError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {(isSubmitting || loading) && !generalError && (\n          <OverlayLoading zIndex=\"modal\" />\n        )}\n        {!!generalError && fatalError && (\n          <Overlay opacity={0.78} zIndex=\"modal\" padding={2}>\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          </Overlay>\n        )}\n        <DialogContent dividers>\n          {!!generalError && !fatalError && (\n            <DialogContentText color=\"error\">{generalError}</DialogContentText>\n          )}\n          <Grid container spacing={2}>\n            <Grid {...gridEntryResponsiveProps} justify=\"center\" container>\n              <Type\n                style={{ margin: theme.spacing(1) }}\n                label=\"start\"\n                disabled={isSubmitting || loading || !!fatalError}\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <DateEntry\n                disabled={isSubmitting || loading || !!fatalError}\n                maxDate={maxDate === MAX_DATE ? undefined : maxDate}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Source\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Category\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Department\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Description\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <PaymentMethod\n                disabled={isSubmitting || loading || !!fatalError}\n                fullWidth\n              />\n            </Grid>\n            <Grid {...gridEntryResponsiveProps}>\n              <Total\n                disabled={isSubmitting || loading || !!fatalError}\n                minTotal={minTotal}\n                fullWidth\n              />\n            </Grid>\n            <Grid\n              container\n              justify=\"center\"\n              alignItems=\"flex-start\"\n              {...gridEntryResponsiveProps}\n            >\n              <Reconcile\n                disabled={isSubmitting || loading || !!fatalError}\n                label\n              />\n            </Grid>\n          </Grid>\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!fatalError && (\n          <Button\n            disabled={isSubmitting || !isValid || loading}\n            type=\"submit\"\n            startIcon={<AddIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Update\n          </Button>\n        )}\n        <Button\n          disabled={isSubmitting}\n          color={fatalError ? \"primary\" : \"default\"}\n          startIcon={!fatalError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {fatalError ? \"Ok\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nconst UpdateEntry = (props: UpdateEntryProps) => {\n  const { entryId, open, onClose, onExited } = props;\n\n  const { loading, error, data } = useQuery<\n    UpdateEntryIniState,\n    UpdateEntryIniStateVars\n  >(UPDATE_ENTRY_INI_STATE, {\n    skip: !entryId,\n    variables: {\n      id: entryId as string,\n    },\n  });\n\n  if (error) {\n    console.log(entryId, UPDATE_ENTRY_INI_STATE);\n    console.error(error);\n  }\n\n  const initialStatus = useMemo(\n    () =>\n      error\n        ? ({\n            msg: error.message,\n            type: FormikStatusType.FATAL_ERROR,\n          } as FormikStatus)\n        : null,\n    [error]\n  );\n\n  const journalEntry = data?.journalEntry;\n  const initialValues = useMemo<IniUpdateValues>(() => {\n    if (!journalEntry) {\n      return {} as any;\n    }\n\n    const date = {\n      inputValue: new Date(journalEntry.date),\n      value: journalEntry.date,\n    };\n\n    const category = (() => {\n      const { ancestors, ...category } = journalEntry.category;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(category);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const paymentMethod = (() => {\n      const { ancestors, ...paymentMethod } = journalEntry.paymentMethod;\n\n      // Array.prototype.sort mutates the array, create copy.\n      const value = [...ancestors].sort((a, b) => {\n        // a is the parent of b\n        if (a.id === b.parent?.id) {\n          return -1;\n          // b is the parent of a\n        } else if (b.id === a.parent?.id) {\n          return 1;\n        }\n        return 0;\n      });\n\n      value.push(paymentMethod);\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const total = {\n      inputValue: (journalEntry.total.num / journalEntry.total.den).toFixed(2),\n      value: journalEntry.total,\n    };\n\n    const department = journalEntry.department;\n\n    const reconciled = journalEntry.reconciled;\n\n    const description = journalEntry.description ?? null;\n\n    const type = journalEntry.type;\n\n    const source = (() => {\n      const value: IniUpdateValues[\"source\"][\"value\"] = [];\n\n      const src = journalEntry?.source;\n\n      switch (src?.__typename) {\n        case \"Person\":\n          value.push(JournalEntrySourceType.Person, src);\n          break;\n        case \"Business\":\n          value.push(JournalEntrySourceType.Business, src);\n          break;\n        case \"Department\":\n          // The source type is the root, for Dept is always a business.\n          value.push(JournalEntrySourceType.Business);\n          const ancestorDeptQueue: string[] = [];\n          for (const ancestor of src.ancestors) {\n            if (ancestor.__typename === \"Business\") {\n              value.push(ancestor);\n            } else {\n              ancestorDeptQueue.push(ancestor.id);\n            }\n          }\n\n          const bizAncestor = value[1] as SrcEntryBizOptFragment;\n\n          if (ancestorDeptQueue.length > 0) {\n            const ancestorDepts: SrcEntryDeptOptFragment[] = [];\n            for (const dept of bizAncestor.departments) {\n              const index = ancestorDeptQueue.indexOf(dept.id);\n\n              if (index === -1) {\n                continue;\n              }\n\n              // Be lazy about finding depts\n              if (ancestorDepts.push(dept) === ancestorDeptQueue.length) {\n                break;\n              }\n            }\n\n            // Ensure order\n            ancestorDepts.sort((a, b) => {\n              if (a.id === b.parent.id || bizAncestor.id || a.parent.id) {\n                return -1;\n              } else if (b.id === a.parent.id) {\n                return 1;\n              } else {\n                return 0;\n              }\n            });\n\n            value.push(...ancestorDepts);\n          }\n      }\n\n      return {\n        inputValue: \"\",\n        value,\n      };\n    })();\n\n    const iniUpdateValues: IniUpdateValues = {\n      date,\n      category,\n      paymentMethod,\n      department,\n      total,\n      reconciled,\n      description,\n      type,\n      source,\n    };\n\n    return iniUpdateValues;\n  }, [journalEntry]);\n\n  const client = useApolloClient();\n  const onSubmit = useCallback<FormikConfig<UpdateValues>[\"onSubmit\"]>(\n    async (values, formikHelpers) => {\n      try {\n        formikHelpers.setStatus(null);\n        await submitUpdate(\n          client,\n          initialValues,\n          entryId as string,\n          values,\n          formikHelpers\n        );\n        onClose();\n      } catch (error) {\n        console.error(error);\n        formikHelpers.setStatus({\n          msg: error.message ?? `${error}`,\n          type: FormikStatusType.ERROR,\n        } as FormikStatus);\n      }\n    },\n    [client, initialValues, entryId, onClose]\n  );\n\n  const children = useCallback(\n    (props: FormikProps<UpdateValues>) => (\n      <UpdateEntryDialog\n        open={open}\n        onClose={onClose}\n        onExited={onExited}\n        loading={loading}\n        journalEntry={journalEntry ?? null}\n        handleSubmit={props.handleSubmit}\n      />\n    ),\n    [open, onClose, onExited, loading, journalEntry]\n  );\n\n  return (\n    <Formik\n      initialValues={initialValues as UpdateValues}\n      initialStatus={initialStatus}\n      journalEntry={data?.journalEntry ?? null}\n      loading={loading}\n      onSubmit={onSubmit}\n      enableReinitialize={true}\n      children={children}\n    />\n  );\n};\n\nexport default UpdateEntry;\n","import React, { useCallback, useMemo } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Box,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Delete as DeleteIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport {\n  DeleteEntryMutation,\n  DeleteEntryMutationVariables as DeleteEntryVars,\n} from \"../../../../apollo/graphTypes\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\n\nconst DELETE_ENTRY = gql`\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst DeleteEntry = (props: {\n  entryId: string | null;\n  onClose: () => void;\n}) => {\n  const { entryId, onClose } = props;\n\n  const [deleteEntry, { loading, error }] = useMutation<\n    DeleteEntryMutation,\n    DeleteEntryVars\n  >(DELETE_ENTRY);\n\n  const hasError = !!error;\n\n  const onDelete = useCallback(\n    (event) => {\n      deleteEntry({ variables: { id: entryId as string } }).then(() =>\n        onClose()\n      );\n    },\n    [entryId, deleteEntry, onClose]\n  );\n\n  const title = useMemo(() => {\n    if (hasError) {\n      return \"Error\";\n    } else if (loading) {\n      return \"Deleting Entry...\";\n    }\n    return \"Delete Entry\";\n  }, [hasError, loading]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={!!entryId}\n      maxWidth=\"sm\"\n      fullWidth\n      disableBackdropClick={loading}\n      disableEscapeKeyDown={loading}\n      onClose={onClose}\n    >\n      <DialogTitle\n        style={hasError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {loading && <OverlayLoading zIndex=\"modal\" />}\n        <DialogContent>\n          {hasError && (\n            <DialogContentText color=\"error\">\n              {error?.message as string}\n            </DialogContentText>\n          )}\n          {!hasError && (\n            <DialogContentText>\n              Are you sure you want to delete this entry?\n            </DialogContentText>\n          )}\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!hasError && (\n          <Button\n            disabled={loading}\n            onClick={onDelete}\n            startIcon={<DeleteIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Delete\n          </Button>\n        )}\n        <Button\n          disabled={loading}\n          startIcon={!hasError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {hasError ? \"Close\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default DeleteEntry;\n","import React, { useCallback, useMemo } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n  Box,\n  useTheme,\n} from \"@material-ui/core\";\nimport { Delete as DeleteIcon, Cancel as CancelIcon } from \"@material-ui/icons\";\nimport gql from \"graphql-tag\";\nimport { useMutation } from \"@apollo/react-hooks\";\n\nimport { JOURNAL_ENTRY_FRAGMENT } from \"../../Table/JournalEntries.gql\";\nimport {\n  DeleteRefundMutation,\n  DeleteRefundMutationVariables as DeleteRefundVars,\n} from \"../../../../apollo/graphTypes\";\nimport OverlayLoading from \"../../../Utils/OverlayLoading\";\n\nconst DELETE_REFUND = gql`\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst DeleteRefund = (props: {\n  refundId: string | null;\n  onClose: () => void;\n}) => {\n  const { refundId, onClose } = props;\n\n  const [deleteRefund, { loading, error }] = useMutation<\n    DeleteRefundMutation,\n    DeleteRefundVars\n  >(DELETE_REFUND);\n  const hasError = !!error;\n\n  const onDelete = useCallback(\n    (event) => {\n      deleteRefund({ variables: { id: refundId as string } }).then(() =>\n        onClose()\n      );\n    },\n    [refundId, deleteRefund, onClose]\n  );\n\n  const title = useMemo(() => {\n    if (hasError) {\n      return \"Error\";\n    } else if (loading) {\n      return \"Deleting Refund...\";\n    }\n    return \"Delete Refund\";\n  }, [hasError, loading]);\n\n  const theme = useTheme();\n\n  return (\n    <Dialog\n      open={!!refundId}\n      maxWidth=\"sm\"\n      fullWidth\n      disableBackdropClick={loading}\n      disableEscapeKeyDown={loading}\n      onClose={onClose}\n    >\n      <DialogTitle\n        style={hasError ? { color: theme.palette.error.main } : undefined}\n      >\n        {title}\n      </DialogTitle>\n      <Box position=\"relative\">\n        {loading && <OverlayLoading zIndex=\"modal\" />}\n        <DialogContent>\n          {hasError && (\n            <DialogContentText color=\"error\">\n              {error?.message as string}\n            </DialogContentText>\n          )}\n          {!hasError && (\n            <DialogContentText>\n              Are you sure you want to delete this refund?\n            </DialogContentText>\n          )}\n        </DialogContent>\n      </Box>\n      <DialogActions>\n        {!hasError && (\n          <Button\n            disabled={loading}\n            onClick={onDelete}\n            startIcon={<DeleteIcon />}\n            color=\"primary\"\n            variant=\"contained\"\n          >\n            Delete\n          </Button>\n        )}\n        <Button\n          disabled={loading}\n          startIcon={!hasError && <CancelIcon />}\n          onClick={onClose}\n        >\n          {hasError ? \"Close\" : \"Cancel\"}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default DeleteRefund;\n","import React, {\n  useMemo,\n  forwardRef,\n  useState,\n  useCallback,\n  useEffect,\n} from \"react\";\nimport MaterialTable, {\n  Column,\n  Options,\n  Localization,\n  MaterialTableProps,\n  Components,\n  MTableBody,\n} from \"material-table\";\nimport { useQuery, useMutation } from \"@apollo/react-hooks\";\nimport numeral from \"numeral\";\nimport moment from \"moment\";\nimport { capitalCase } from \"change-case\";\nimport Fuse from \"fuse.js\";\nimport {\n  Done as DoneIcon,\n  Delete as DeleteIcon,\n  AddCircle as AddCircleIcon,\n  CheckCircle as CheckCircleIcon,\n} from \"@material-ui/icons\";\nimport {\n  AddBox,\n  ArrowDownward,\n  Check,\n  ChevronLeft,\n  ChevronRight,\n  Clear,\n  DeleteOutline,\n  Edit,\n  FilterList,\n  FirstPage,\n  LastPage,\n  Remove,\n  SaveAlt,\n  Search,\n  ViewColumn,\n} from \"@material-ui/icons\";\nimport {\n  Box,\n  TableBody,\n  TableRow,\n  TableCell,\n  Typography,\n} from \"@material-ui/core\";\nimport { green, red } from \"@material-ui/core/colors\";\nimport { BankTransferIn, BankTransferOut } from \"mdi-material-ui\";\nimport gql from \"graphql-tag\";\n\nimport {\n  JournalEntries_1Query as JournalEntriesQuery,\n  JournalEntries_1QueryVariables as JournalEntriesQueryVars,\n  JournalEntry_1Fragment as JournalEntryFragment,\n  JournalEntryRefund_1Fragment as JournalEntryRefundFragment,\n  JournalEntryType,\n  OnEntryUpsert_1Subscription as OnEntryUpsert,\n  ReconcileEntryMutation as ReconcileEntry,\n  ReconcileEntryMutationVariables as ReconcileEntryVars,\n  ReconcileRefundMutation as ReconcileRefund,\n  ReconcileRefundMutationVariables as ReconcileRefundVars,\n} from \"../../../apollo/graphTypes\";\nimport {\n  JOURNAL_ENTRIES,\n  JOURNAL_ENTRY_FRAGMENT,\n} from \"../Table/JournalEntries.gql\";\nimport { CHECK_ID } from \"../constants\";\nimport AddRefund from \"../Upsert/Refunds/AddRefund\";\nimport UpdateRefund from \"../Upsert/Refunds/UpdateRefund\";\nimport AddEntry from \"../Upsert/Entries/AddEntry\";\nimport UpdateEntry from \"../Upsert/Entries/UpdateEntry\";\nimport DeleteEntry from \"../Upsert/Entries/DeleteEntry\";\nimport DeleteRefund from \"../Upsert/Refunds/DeleteRefund\";\n\nexport enum JournalMode {\n  View,\n  Reconcile,\n}\n\nconst tableIcons = {\n  Add: forwardRef<SVGSVGElement>((props, ref) => (\n    <AddBox {...props} ref={ref} />\n  )),\n  Check: forwardRef<SVGSVGElement>((props, ref) => (\n    <Check {...props} ref={ref} />\n  )),\n  Clear: forwardRef<SVGSVGElement>((props, ref) => (\n    <Clear {...props} ref={ref} />\n  )),\n  Delete: forwardRef<SVGSVGElement>((props, ref) => (\n    <DeleteOutline {...props} ref={ref} />\n  )),\n  DetailPanel: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  Edit: forwardRef<SVGSVGElement>((props, ref) => (\n    <Edit {...props} ref={ref} />\n  )),\n  Export: forwardRef<SVGSVGElement>((props, ref) => (\n    <SaveAlt {...props} ref={ref} />\n  )),\n  Filter: forwardRef<SVGSVGElement>((props, ref) => (\n    <FilterList {...props} ref={ref} />\n  )),\n  FirstPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <FirstPage {...props} ref={ref} />\n  )),\n  LastPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <LastPage {...props} ref={ref} />\n  )),\n  NextPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronRight {...props} ref={ref} />\n  )),\n  PreviousPage: forwardRef<SVGSVGElement>((props, ref) => (\n    <ChevronLeft {...props} ref={ref} />\n  )),\n  ResetSearch: forwardRef<SVGSVGElement>((props, ref) => (\n    <Clear {...props} ref={ref} />\n  )),\n  Search: forwardRef<SVGSVGElement>((props, ref) => (\n    <Search {...props} ref={ref} />\n  )),\n  SortArrow: forwardRef<SVGSVGElement>((props, ref) => (\n    <ArrowDownward {...props} ref={ref} />\n  )),\n  ThirdStateCheck: forwardRef<SVGSVGElement>((props, ref) => (\n    <Remove {...props} ref={ref} />\n  )),\n  ViewColumn: forwardRef<SVGSVGElement>((props, ref) => (\n    <ViewColumn {...props} ref={ref} />\n  )),\n};\n\nexport type Entry =\n  | JournalEntryFragment\n  | (Omit<JournalEntryFragment, \"__typename\" | \"refunds\"> &\n      JournalEntryRefundFragment & { refunds: string });\n\nconst entriesGen = function* (\n  entry: JournalEntryFragment\n): IterableIterator<Entry> {\n  yield entry;\n  const type =\n    entry.type === JournalEntryType.Credit\n      ? JournalEntryType.Debit\n      : JournalEntryType.Credit;\n  for (const refund of entry.refunds) {\n    yield {\n      ...entry,\n      ...refund,\n      type,\n      description: refund.description || entry.description,\n      refunds: entry.id,\n    };\n  }\n};\n\nconst ON_ENTRY_UPSERT = gql`\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst RECONCILE_ENTRY = gql`\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst RECONCILE_REFUND = gql`\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ${JOURNAL_ENTRY_FRAGMENT}\n`;\n\nconst Journal = (props: {\n  journalTitle?: string;\n  deptId?: string;\n  mode: JournalMode;\n}) => {\n  const { deptId = null, journalTitle = null, mode } = props;\n\n  // Add Entry\n  const [addEntryOpen, setAddEntryOpen] = useState<boolean>(false);\n  const addEntryOnClose = useCallback(() => void setAddEntryOpen(false), [\n    setAddEntryOpen,\n  ]);\n\n  // Update Entry\n  const [updateEntryOpen, setUpdateEntryOpen] = useState<boolean>(false);\n  const [updateEntry, setUpdateEntry] = useState<string | null>(null);\n\n  const updateEntryOnClose = useCallback(() => void setUpdateEntryOpen(false), [\n    setUpdateEntryOpen,\n  ]);\n  const updateEntryOnExited = useCallback(() => void setUpdateEntry(null), [\n    setUpdateEntry,\n  ]);\n\n  // Delete Entry\n  const [deleteEntry, setDeleteEntry] = useState<string | null>(null);\n  const deleteEntryOnClose = useCallback(() => void setDeleteEntry(null), [\n    setDeleteEntry,\n  ]);\n\n  // Add Refund\n  const [addRefundOpen, setAddRefundOpen] = useState<boolean>(false);\n  const [addRefundToEntry, setAddRefundToEntry] = useState<string | null>(null);\n\n  const addRefundOnClose = useCallback(() => void setAddRefundOpen(false), [\n    setAddRefundOpen,\n  ]);\n  const addRefundOnExited = useCallback(() => void setAddRefundToEntry(null), [\n    setAddRefundToEntry,\n  ]);\n\n  // Update Refund\n  const [updateRefundOpen, setUpdateRefundOpen] = useState<boolean>(false);\n  const [updateRefund, setUpdateRefund] = useState<{\n    entryId: string;\n    refundId: string;\n  } | null>(null);\n\n  const updateRefundOnClose = useCallback(\n    () => void setUpdateRefundOpen(false),\n    [setUpdateRefundOpen]\n  );\n  const updateRefundOnExited = useCallback(() => void setUpdateRefund(null), [\n    setUpdateRefund,\n  ]);\n\n  // Delete Entry\n  const [deleteRefund, setDeleteRefund] = useState<string | null>(null);\n  const deleteRefundOnClose = useCallback(() => void setDeleteRefund(null), [\n    setDeleteRefund,\n  ]);\n\n  // Reconcile Entry\n  const [reconcileEntry, { loading: reconcilingEntry }] = useMutation<\n    ReconcileEntry,\n    ReconcileEntryVars\n  >(RECONCILE_ENTRY);\n  // Reconcile Refund\n  const [reconcileRefund, { loading: reconcilingRefund }] = useMutation<\n    ReconcileRefund,\n    ReconcileRefundVars\n  >(RECONCILE_REFUND);\n\n  const variables = useMemo<JournalEntriesQueryVars | undefined>(() => {\n    return deptId\n      ? {\n          where: { department: { eq: deptId } },\n        }\n      : undefined;\n  }, [deptId]);\n\n  const { loading, error, data, subscribeToMore } = useQuery<\n    JournalEntriesQuery,\n    JournalEntriesQueryVars\n  >(JOURNAL_ENTRIES, {\n    variables,\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const isLoading = loading && !data?.journalEntries;\n\n  // Subscribe to updates\n  useEffect(() => {\n    return subscribeToMore<OnEntryUpsert>({\n      document: ON_ENTRY_UPSERT,\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data) {\n          return prev;\n        }\n\n        const upsertEntry = subscriptionData.data.journalEntryUpserted;\n\n        const ancestors = upsertEntry.department.ancestors;\n\n        if (\n          deptId &&\n          upsertEntry.department.id !== deptId &&\n          ancestors.every((dept) => (dept as any).id !== deptId)\n        ) {\n          // Filter entry out of query results if department changes.\n          const journalEntriesFiltered = prev.journalEntries.filter(\n            (entry) => entry.id !== upsertEntry.id\n          );\n\n          if (journalEntriesFiltered.length === prev.journalEntries.length) {\n            return prev;\n          }\n\n          return Object.assign({}, prev, {\n            journalEntries: journalEntriesFiltered,\n          });\n        }\n\n        // Apollo will take care of updating if entry already exists in cache.\n        if (prev.journalEntries.some((entry) => entry.id === upsertEntry.id)) {\n          return prev;\n        }\n\n        return Object.assign({}, prev, {\n          journalEntries: [upsertEntry, ...prev.journalEntries],\n        });\n      },\n    });\n  }, [deptId, subscribeToMore]);\n\n  const columns = useMemo<Column<Entry>[]>(() => {\n    const searchable = false;\n    const filtering = false;\n    const sorting = false;\n\n    return [\n      {\n        field: \"reconciled\",\n        title: \"Reconciled\",\n        render: ({ reconciled }) => (reconciled ? <DoneIcon /> : null),\n        customFilterAndSearch: (filter, rowData) => {\n          const momentDate = moment(rowData.date);\n\n          const search: {\n            [P in keyof Omit<\n              Entry,\n              \"id\" | \"__typename\" | \"deleted\" | \"lastUpdate\" | \"refunds\"\n            >]-?: string[];\n          } = {\n            type: [\n              rowData.type === JournalEntryType.Credit ? \"credit\" : \"debit\",\n            ],\n            date: [\n              momentDate.format(\"dddd, MMMM Do YYYY, h:mm:ss a\"),\n              momentDate.toString(),\n              momentDate.format(\"M/d/YY\"),\n              momentDate.format(\"M/d/YYYY\"),\n              momentDate.format(\"MMM DD, YYYY\"),\n            ],\n            description: [rowData.description || \"\"],\n            reconciled: [rowData.reconciled ? \"reconciled\" : \"\"],\n            department: [rowData.department.name],\n            category: [rowData.category.name],\n            paymentMethod: [\n              rowData.paymentMethod.parent?.id === CHECK_ID\n                ? `CK-${rowData.paymentMethod.name}`\n                : rowData.paymentMethod.name,\n            ],\n            source: [\n              (() => {\n                switch (rowData.source.__typename) {\n                  case \"Person\":\n                    return `${rowData.source.name.first} ${rowData.source.name.last}`;\n                  case \"Business\":\n                    return rowData.source.bizName;\n                  case \"Department\":\n                    return rowData.source.deptName;\n                }\n              })(),\n            ],\n            total: [\n              numeral(rowData.total.num / rowData.total.den).format(\"$0,0.00\"),\n            ],\n          };\n\n          const fuseResult = new Fuse([search], {\n            threshold: 0.4,\n            useExtendedSearch: true,\n            keys: [\n              \"date\",\n              \"type\",\n              \"description\",\n              \"reconciled\",\n              \"department\",\n              \"category\",\n              \"paymentMethod\",\n              \"source\",\n              \"total\",\n            ],\n          }).search(filter);\n          return fuseResult.length > 0;\n        },\n        hidden: mode === JournalMode.Reconcile,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"total\",\n        title: \"Total\",\n        render: ({ total: { num, den } }) =>\n          numeral(num / den).format(\"$0,0.00\"),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"date\",\n        title: \"Date\",\n        render: ({ date }) => moment(date).format(\"MMM DD, YYYY\"),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"category\",\n        title: \"Category\",\n        render: ({ category }) => capitalCase(category.name),\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"source\",\n        title: \"Source\",\n        render: ({ source }) => {\n          switch (source.__typename) {\n            case \"Person\":\n              return `${source.name.first} ${source.name.last}`;\n            case \"Business\":\n              return source.bizName;\n            case \"Department\":\n              return source.deptName;\n          }\n        },\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"paymentMethod\",\n        title: \"Payment Method\",\n        render: ({ paymentMethod }) =>\n          paymentMethod.parent?.id === CHECK_ID\n            ? `CK-${paymentMethod.name}`\n            : paymentMethod.name,\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"description\",\n        title: \"Description\",\n        render: ({ description }) => description,\n        searchable,\n        filtering,\n        sorting,\n      },\n      {\n        field: \"department\",\n        title: \"Department\",\n        render: ({ department }) => capitalCase(department.name),\n        searchable,\n        filtering,\n        sorting,\n      },\n    ];\n  }, [mode]);\n\n  const localization = useMemo<Localization>(\n    () => ({\n      toolbar: {\n        searchTooltip: (\n          <Box fontSize={12} component=\"span\">\n            [abc] | [efg] = \"abc\" OR \"efg\"\n            <br />\n            '[abc] = EXACTLY \"abc\"\n            <br />\n            ![abc] = NOT \"abc\"\n            <br />\n            ^[abc] = STARTS WITH \"abc\"\n            <br />\n            !^[abc] = DOES NOT START WITH \"abc\"\n            <br />\n            [abc]$ = ENDS WITH \"abc\"\n            <br />\n            ![abc]$ = DOES NOT END WITH \"abc\"\n          </Box>\n        ) as any,\n        nRowsSelected: \"Reconcile {0} Entry(s)\",\n      },\n    }),\n    []\n  );\n\n  const options = useMemo<Options>(\n    () => ({\n      rowStyle: ({ type }: Entry) => ({\n        color: type === JournalEntryType.Credit ? green[900] : red[900],\n      }),\n      // -53px = pagination, -64px = toolbar\n      maxBodyHeight: \"calc(100vh - 53px - 64px)\",\n      headerStyle: { position: \"sticky\", top: 0 },\n      pageSize: 25,\n      pageSizeOptions: [25, 50, 100],\n      showTitle: !!journalTitle,\n      selection: mode === JournalMode.Reconcile,\n      showSelectAllCheckbox: false,\n    }),\n    [journalTitle, mode]\n  );\n\n  const actions = useMemo<MaterialTableProps<Entry>[\"actions\"]>(() => {\n    if (mode === JournalMode.Reconcile) {\n      return [\n        {\n          icon: ((props) => <CheckCircleIcon {...props} />) as any,\n          tooltip: \"Reconcile Selected\",\n          position: \"toolbarOnSelect\",\n          iconProps: {\n            color: \"secondary\",\n            fontSize: \"large\",\n          },\n          onClick: async (event, rowData) => {\n            await Promise.all(\n              (Array.isArray(rowData) ? rowData : [rowData]).map(\n                async (entry) => {\n                  if (entry.reconciled) {\n                    return;\n                  }\n\n                  try {\n                    if (entry.__typename === \"JournalEntryRefund\") {\n                      await reconcileRefund({ variables: { id: entry.id } });\n                    } else {\n                      await reconcileEntry({ variables: { id: entry.id } });\n                    }\n                  } catch (error) {\n                    console.error(error);\n                  }\n                }\n              )\n            );\n          },\n        },\n      ];\n    }\n\n    return [\n      (rowData) => {\n        const isRefund = rowData.__typename === \"JournalEntryRefund\";\n        return {\n          icon: DeleteIcon as any,\n          tooltip: `Delete ${isRefund ? \"Refund\" : \"Entry\"}`,\n          onClick: async (event, rowData) => {\n            await Promise.all(\n              (Array.isArray(rowData) ? rowData : [rowData]).map(\n                async (entry) => {\n                  if (entry.deleted) {\n                    return;\n                  } else if (entry.__typename === \"JournalEntryRefund\") {\n                    setDeleteRefund(entry.id);\n                  } else {\n                    setDeleteEntry(entry.id);\n                  }\n                }\n              )\n            );\n          },\n        };\n      },\n      (rowData) => {\n        const isRefund = rowData.__typename === \"JournalEntryRefund\";\n\n        return {\n          icon: Edit as any,\n          tooltip: `Update ${isRefund ? \"Refund\" : \"Entry\"}`,\n          onClick: (event, rowData) => {\n            if (isRefund) {\n              setUpdateRefundOpen(true);\n              setUpdateRefund({\n                entryId: (rowData as Entry).refunds as string,\n                refundId: (rowData as Entry).id,\n              });\n            } else {\n              setUpdateEntryOpen(true);\n              setUpdateEntry((rowData as Entry).id);\n            }\n          },\n        };\n      },\n      (rowData) => {\n        if (rowData.__typename === \"JournalEntryRefund\") {\n          return null as any;\n        }\n\n        const isCredit = rowData.type === JournalEntryType.Credit;\n\n        return {\n          icon: ((props) =>\n            isCredit ? (\n              <BankTransferOut {...props} />\n            ) : (\n              <BankTransferIn {...props} />\n            )) as any,\n          tooltip: isCredit ? \"Give Refund\" : \"Add Refund\",\n          iconProps: {\n            style: { color: isCredit ? red[900] : green[900] },\n            // color: \"secondary\",\n            // fontSize: \"large\",\n          } as any,\n          onClick: (event, rowData) => {\n            setAddRefundOpen(true);\n            setAddRefundToEntry((rowData as JournalEntryFragment).id);\n          },\n        };\n      },\n      {\n        icon: ((props) => <AddCircleIcon {...props} />) as any,\n        iconProps: {\n          color: \"secondary\",\n          fontSize: \"large\",\n        },\n        tooltip: \"Add Entry\",\n        isFreeAction: true,\n        onClick: () => {\n          setAddEntryOpen(true);\n        },\n      },\n    ];\n  }, [mode, reconcileRefund, reconcileEntry, setDeleteRefund, setDeleteEntry]);\n\n  const components = useMemo<Components>(\n    () => ({\n      Body: error\n        ? (props) => (\n            <TableBody {...props}>\n              <TableRow>\n                <TableCell\n                  colSpan={\n                    columns.length +\n                    (Array.isArray(actions) && actions.length > 0 ? 1 : 0)\n                  }\n                  align=\"left\"\n                >\n                  <Typography align=\"center\" color=\"error\" variant=\"h4\">\n                    Error Loading Entries\n                  </Typography>\n                  <Typography variant=\"body1\">{error.message}</Typography>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          )\n        : (props) => <MTableBody {...props} />,\n    }),\n    [error, columns, actions]\n  );\n\n  const journalEntries = data?.journalEntries || [];\n  const entries = useMemo(() => {\n    const filters =\n      mode === JournalMode.Reconcile\n        ? [(entry: Entry) => !entry.reconciled && !entry.deleted]\n        : [(entry: Entry) => !entry.deleted];\n\n    return journalEntries\n      .reduce((entries: Entry[], journalEntry) => {\n        for (const entry of entriesGen(journalEntry)) {\n          if (filters.every((filter) => filter(entry))) {\n            entries.push(entry);\n          }\n        }\n\n        return entries;\n      }, [])\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n  }, [journalEntries, mode]);\n\n  return (\n    <React.Fragment>\n      <MaterialTable\n        icons={tableIcons}\n        isLoading={isLoading || reconcilingEntry || reconcilingRefund}\n        columns={columns}\n        data={entries}\n        options={options}\n        localization={localization}\n        actions={actions}\n        components={components}\n        title={journalTitle ?? undefined}\n      />\n      <AddEntry deptId={deptId} open={addEntryOpen} onClose={addEntryOnClose} />\n      <UpdateEntry\n        entryId={updateEntry}\n        open={updateEntryOpen}\n        onClose={updateEntryOnClose}\n        onExited={updateEntryOnExited}\n      />\n      <DeleteEntry entryId={deleteEntry} onClose={deleteEntryOnClose} />\n      <AddRefund\n        entryId={addRefundToEntry}\n        open={addRefundOpen}\n        onClose={addRefundOnClose}\n        onExited={addRefundOnExited}\n      />\n      <UpdateRefund\n        entryId={updateRefund?.entryId ?? null}\n        refundId={updateRefund?.refundId ?? null}\n        open={updateRefundOpen}\n        onClose={updateRefundOnClose}\n        onExited={updateRefundOnExited}\n      />\n      <DeleteRefund refundId={deleteRefund} onClose={deleteRefundOnClose} />\n    </React.Fragment>\n  );\n};\n\nexport default Journal;\n","import gql from \"graphql-tag\";\n\nexport const GET_REPORT_DATA_DEPT_FRAGMENT = gql`\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budget {\n      id\n      __typename\n      amount {\n        num\n        den\n      }\n    }\n  }\n`;\n\nexport const GET_REPORT_DATA_ENTRY_FRAGMENT = gql`\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      num\n      den\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        num\n        den\n      }\n      deleted\n      lastUpdate\n    }\n    lastUpdate\n    deleted\n  }\n`;\n\nexport const GET_REPORT_DATA = gql`\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhereInput!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_DEPT_FRAGMENT},\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_ADDED_SUB = gql`\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nexport const JOURNAL_ENTRY_UPDATED_SUB = gql`\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n","import React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { Link } from \"react-router-dom\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport TableChartIcon from \"@material-ui/icons/TableChart\";\nimport AssessmentIcon from \"@material-ui/icons/Assessment\";\nimport Card from \"@material-ui/core/Card\";\nimport CardHeader from \"@material-ui/core/CardHeader\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport numeral from \"numeral\";\nimport { red, green, orange, grey } from \"@material-ui/core/colors\";\nimport gql from \"graphql-tag\";\n\nimport {\n  GetReportDataQuery,\n  GetReportDataQueryVariables,\n  JournalEntryType,\n  OnEntryUpsert_2Subscription as OnEntryUpsert,\n} from \"../../apollo/graphTypes\";\nimport {\n  GET_REPORT_DATA,\n  GET_REPORT_DATA_ENTRY_FRAGMENT,\n} from \"./ReportData.gql\";\nimport { DEPT_ENTRY_OPT_FRAGMENT } from \"../Journal/Upsert/upsertEntry.gql\";\nimport AddEntry from \"../Journal/Upsert/Entries/AddEntry\";\n\nconst colorMeter = (percentSpent: number, shade = 800) => {\n  if (percentSpent < 0.75) {\n    return green[shade];\n  } else if (percentSpent < 0.9) {\n    return orange[shade];\n  } else {\n    return red[shade];\n  }\n};\n\nconst BudgetMeter = (props: { spentPercentage: number; height: number }) => {\n  const { spentPercentage, height } = props;\n\n  return (\n    <Box\n      height={height}\n      bgcolor={colorMeter(spentPercentage)}\n      display=\"flex\"\n      justifyContent=\"flex-start\"\n    >\n      <Box\n        height=\"100%\"\n        width={`${100 * spentPercentage}%`}\n        bgcolor={grey[400]}\n      />\n    </Box>\n  );\n};\n\ninterface DeptReportObj {\n  name: string;\n  spent: number;\n  budget: number | null;\n}\n\nexport const DEPT_FOR_UPSERT_ADD = gql`\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ${DEPT_ENTRY_OPT_FRAGMENT}\n`;\n\nconst ON_ENTRY_UPSERT = gql`\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ${GET_REPORT_DATA_ENTRY_FRAGMENT}\n`;\n\nconst Dashboard = function (props: { deptId: string }) {\n  const { deptId } = props;\n\n  const [addEntryOpen, setAddEntryOpen] = useState<boolean>(false);\n  const addEntryOnClose = useCallback(() => void setAddEntryOpen(false), [\n    setAddEntryOpen,\n  ]);\n\n  const variables = useMemo(\n    () => ({\n      deptId,\n      where: {\n        department: { eq: deptId },\n        deleted: false,\n      },\n    }),\n    [deptId]\n  );\n\n  const { loading, error, data, subscribeToMore } = useQuery<\n    GetReportDataQuery,\n    GetReportDataQueryVariables\n  >(GET_REPORT_DATA, {\n    variables,\n    fetchPolicy: \"cache-and-network\",\n  });\n\n  const isLoading = loading && !data?.journalEntries;\n\n  // Subscribe to updates\n  useEffect(() => {\n    return subscribeToMore<OnEntryUpsert>({\n      document: ON_ENTRY_UPSERT,\n      updateQuery: (prev, { subscriptionData }) => {\n        if (!subscriptionData.data) {\n          return prev;\n        }\n\n        const upsertEntry = subscriptionData.data.journalEntryUpserted;\n\n        const ancestors = upsertEntry.department.ancestors;\n\n        if (\n          deptId &&\n          upsertEntry.department.id !== deptId &&\n          ancestors.every((dept) => (dept as any).id !== deptId)\n        ) {\n          // Filter entry out of query results if department changes.\n          const journalEntriesFiltered = prev.journalEntries.filter(\n            (entry) => entry.id !== upsertEntry.id\n          );\n\n          if (journalEntriesFiltered.length === prev.journalEntries.length) {\n            return prev;\n          }\n\n          return Object.assign({}, prev, {\n            journalEntries: journalEntriesFiltered,\n          });\n        }\n\n        // Apollo will take care of updating if entry already exists in cache.\n        if (prev.journalEntries.some((entry) => entry.id === upsertEntry.id)) {\n          return prev;\n        }\n\n        return Object.assign({}, prev, {\n          journalEntries: [upsertEntry, ...prev.journalEntries],\n        });\n      },\n    });\n  }, [deptId, subscribeToMore]);\n\n  const entries = useMemo(() => {\n    return (data?.journalEntries || []).filter((entry) => !entry.deleted);\n  }, [data]);\n  const deptName = data?.department?.name || \"\";\n\n  useEffect(() => {\n    document.title = deptName;\n  }, [deptName]);\n\n  const department = data?.department || null;\n\n  const {\n    totalRemaining,\n    budget,\n    spentToBudgetRatio,\n    deptReport,\n  } = useMemo(() => {\n    // Generate department report objects\n    const deptReport = new Map<string, DeptReportObj>();\n    let subDeptBudgetAg = 0;\n\n    if (department) {\n      const budget = (() => {\n        if (department.budget) {\n          const { num, den } = department.budget.amount;\n          return num / den;\n        }\n        return null;\n      })();\n\n      deptReport.set(department.id, {\n        name: department.name,\n        spent: 0,\n        budget,\n      });\n\n      for (const subDept of department.descendants) {\n        let budget: null | number = null;\n\n        if (subDept.budget) {\n          const { num, den } = subDept.budget.amount;\n          const subBudgetDec = num / den;\n          subDeptBudgetAg += subBudgetDec;\n          budget = subBudgetDec;\n        }\n\n        deptReport.set(subDept.id, {\n          name: subDept.name,\n          spent: 0,\n          budget,\n        });\n      }\n    }\n\n    // Calculating aggregate depts and credits\n    let spent = 0;\n    for (const entry of entries) {\n      if (entry.deleted) {\n        continue;\n      }\n      const deptReportObj = deptReport.get(\n        entry.department.id\n      ) as DeptReportObj;\n\n      let entryTotal = entry.total.num / entry.total.den;\n\n      // Aggregate refunds\n      for (const refund of entry.refunds) {\n        if (refund.deleted) {\n          continue;\n        }\n        entryTotal -= refund.total.num / refund.total.den;\n      }\n\n      if (entry.type === JournalEntryType.Credit) {\n        spent -= entryTotal;\n        deptReportObj.spent -= entryTotal;\n      } else {\n        spent += entryTotal;\n\n        deptReportObj.spent += entryTotal;\n      }\n    }\n\n    // Format values\n    const budgetDec = (() => {\n      if (department?.budget) {\n        const { num, den } = department?.budget?.amount || { num: 0, den: 1 };\n        return num / den;\n      }\n\n      return subDeptBudgetAg;\n    })();\n\n    const totalRemaining = numeral(budgetDec - spent).format(\"$0,0.00\");\n    const budget = numeral(budgetDec).format(\"$0,0.00\");\n    const spentToBudgetRatio = spent / budgetDec;\n\n    return {\n      totalRemaining,\n      budget,\n      spentToBudgetRatio,\n      deptReport,\n    };\n  }, [entries, department]);\n\n  const subDeptCards = useMemo(() => {\n    const subDeptCards: JSX.Element[] = [];\n\n    for (const [id, { budget, spent, name }] of deptReport) {\n      // Do not include root department\n      if (id === department?.id) {\n        continue;\n      }\n\n      const card = (\n        <Grid key={id} item xs={12} md={4} lg={3}>\n          <Card>\n            <CardHeader\n              titleTypographyProps={{\n                noWrap: true,\n              }}\n              title={name}\n            />\n            <CardContent>\n              {(() => {\n                if (budget === null) {\n                  return (\n                    <Box color={spent > 0 ? red[900] : green[900]} clone>\n                      <Typography variant=\"h6\">\n                        {`Spent: ${numeral(Math.abs(spent)).format(\"$0,0.00\")}`}\n                      </Typography>\n                    </Box>\n                  );\n                }\n\n                const totalRemaining = budget - spent;\n\n                return (\n                  <React.Fragment>\n                    <Box color={colorMeter(spent / budget, 900)} clone>\n                      <Typography variant=\"h6\">{`${numeral(\n                        totalRemaining\n                      ).format(\"$0,0.00\")} Remaining`}</Typography>\n                    </Box>\n                    <Typography variant=\"body1\">{`of ${numeral(budget).format(\n                      \"$0,0.00\"\n                    )}`}</Typography>\n                    <BudgetMeter spentPercentage={spent / budget} height={5} />\n                  </React.Fragment>\n                );\n              })()}\n            </CardContent>\n          </Card>\n        </Grid>\n      );\n\n      subDeptCards.push(card);\n    }\n\n    return subDeptCards;\n  }, [deptReport, department]);\n\n  const onClickAddEntry = useCallback((event?) => setAddEntryOpen(true), [\n    setAddEntryOpen,\n  ]);\n\n  if (isLoading) {\n    return <p>Loading...</p>;\n  } else if (error) {\n    console.error(error);\n    return <p>{error.message}</p>;\n  }\n\n  return (\n    <Box display=\"flex\" flexDirection=\"column\" overflow=\"hidden\" clone>\n      <Container>\n        <Box padding={8}>\n          <Grid container alignItems=\"center\" justify=\"center\" spacing={4}>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                color=\"secondary\"\n                startIcon={<AddIcon />}\n                children={\"New Entry\"}\n                onClick={onClickAddEntry}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}/reconcile`}\n                variant=\"contained\"\n                startIcon={<DoneAllIcon />}\n                children={\"Reconcile\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                variant=\"contained\"\n                startIcon={<AssessmentIcon />}\n                children={\"Reports\"}\n              />\n            </Grid>\n            <Grid item>\n              <Button\n                component={Link}\n                to={`/journal/${deptId}`}\n                variant=\"contained\"\n                startIcon={<TableChartIcon />}\n                children={\"Journal\"}\n              />\n            </Grid>\n          </Grid>\n        </Box>\n        <Box flexGrow={1} overflow=\"auto\">\n          <Grid justify=\"center\" container spacing={2}>\n            <Grid item xs={12}>\n              <Typography align=\"center\" variant=\"h3\">\n                {deptName}\n              </Typography>\n              <Box color={colorMeter(spentToBudgetRatio)}>\n                <Typography align=\"center\" variant=\"h4\">\n                  {`${totalRemaining} Remaining`}\n                </Typography>\n              </Box>\n              <Typography align=\"center\" variant=\"subtitle1\">\n                {`of ${budget}`}\n              </Typography>\n              <BudgetMeter spentPercentage={spentToBudgetRatio} height={10} />\n            </Grid>\n            {subDeptCards}\n          </Grid>\n        </Box>\n        <AddEntry\n          deptId={deptId}\n          open={addEntryOpen}\n          onClose={addEntryOnClose}\n        />\n      </Container>\n    </Box>\n  );\n};\n\nexport default Dashboard;\n","import React, {useCallback, useEffect, useState, useMemo} from \"react\";\nimport {useQuery} from \"@apollo/react-hooks\";\nimport gql from \"graphql-tag\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nimport {DeptsForNav_1Query as DeptsForNavQuery} from \"../apollo/graphTypes\";\n\nconst DEPTS_FOR_NAV = gql`\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ...on Business {\n          id\n        }\n        ...on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n`;\n\nconst TopNav = function(props) {\n\n  const {loading, error, data} = useQuery<DeptsForNavQuery>(DEPTS_FOR_NAV);\n\n  const [value, setValue] = useState<string | null>(null);\n\n  const depts = (data?.departments || []);\n\n  type Department = typeof depts[0];\n\n  const {rootDepts, virtualRoots} = useMemo(() => {\n    \n    const rootDepts:Department[] = [];\n    const virtualRoots = new Set<string>();\n\n    for(const dept of depts) {\n      \n      if(dept.parent.__typename === \"Business\") {\n        rootDepts.push(dept);\n      }\n\n      if(dept.virtualRoot) {\n        virtualRoots.add(dept.id);\n      }\n\n    }\n\n    return {rootDepts, virtualRoots};\n\n  },[depts]);\n\n  const subDepts =  useMemo(() => {\n\n    const subDepts:Department[] = [];\n\n    if(value && virtualRoots.has(value)) {\n      \n      for(const dept of depts) {\n  \n        if(dept.parent.id === value) {\n  \n          subDepts.push(dept);\n  \n        }\n  \n      }\n\n    }\n\n    return subDepts;\n\n  }, [virtualRoots, value, depts]);\n\n  useEffect(() => { document.title = \"Select Department\"; });\n\n  const onChange = useCallback((event?) => {\n    setValue(event?.target?.value || null);\n  },[setValue]);\n  \n  if(loading) {\n    return <p>Loading...</p>;\n  } else if(error) {\n    return <p>{error.message}</p>;\n  }\n\n\n  const showSubDepts = subDepts.length > 0;\n\n  return <Box\n    flexGrow={1}\n    display=\"flex\"\n    justifyContent=\"center\"\n    alignItems=\"center\"\n    flexDirection=\"column\"\n    clone\n  >\n    <Container>\n      <Box padding={4} clone>\n        <Typography align=\"center\" color=\"primary\" variant=\"h3\">\n          Select Department\n        </Typography>\n      </Box>\n      <Box minWidth=\"250px !important\" clone>\n        <FormControl variant=\"filled\">\n          <InputLabel>Department</InputLabel>\n          <Select\n            value={value} \n            onChange={onChange}\n            autoWidth\n          >{rootDepts.map((dept) => {\n            \n            const props = {\n              component:Link,\n              to:`/department/${dept.id}`,\n              key:dept.id,\n              value:dept.id,\n              children:dept.name\n            }  as any;\n\n            if(dept.virtualRoot) {\n              delete props.component;\n              delete props.to;\n            }\n\n            return <MenuItem {...props}/>;\n          \n          })}</Select>\n        </FormControl>\n      </Box>\n      {showSubDepts &&\n        <Box pt={2}>\n          <Box pt={2} minWidth=\"250px !important\" clone>\n            <FormControl variant=\"filled\">\n              <InputLabel>Sub Department</InputLabel>\n              <Select autoWidth>{subDepts.map((dept) => {\n                  const props = {\n                    component:Link,\n                    to:`/department/${dept.id}`,\n                    key:dept.id,\n                    value:dept.id,\n                    children:dept.name\n                  }  as any;\n      \n                  return <MenuItem {...props}/>;\n              })}</Select>\n            </FormControl>\n        </Box>\n      </Box>}\n        \n    </Container>\n   </Box>;\n\n}\n\nexport default TopNav;","import React from \"react\";\nimport { Route, Switch, useParams } from \"react-router-dom\";\n\n// import Journal from \"./components/Journal/Table/Journal\";\nimport Journal from \"./components/Journal/MaterialTable/Journal\";\nimport { JournalMode } from \"./components/Journal/MaterialTable/Journal\";\nimport Dashboard from \"./components/Dashboard/Dashboard\";\nimport TopNav from \"./components/TopNav\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport { DepartmentName_1Query as DepartmentName } from \"./apollo/graphTypes\";\nimport gql from \"graphql-tag\";\n\nconst DashBoardRender = (props) => {\n  const { id } = useParams();\n  return id ? <Dashboard deptId={id} /> : <div>Error: No Dept ID!</div>;\n};\n\nconst DEPARTMENT_NAME = gql`\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n`;\n\nconst JournalViewRender = (props) => {\n  const { id } = useParams();\n  const { loading, error, data } = useQuery<DepartmentName>(DEPARTMENT_NAME, {\n    variables: { id },\n  });\n  const journalTitle = data?.department?.name\n    ? data.department.name\n    : undefined;\n  return (\n    <Journal mode={JournalMode.View} deptId={id} journalTitle={journalTitle} />\n  );\n};\n\nconst JournalReconcileRender = (props) => {\n  const { id } = useParams();\n  const { loading, error, data } = useQuery<DepartmentName>(DEPARTMENT_NAME, {\n    variables: { id },\n  });\n  const journalTitle = data?.department?.name\n    ? `Reconcile ${data.department.name}`\n    : \"Reconcile\";\n  return (\n    <Journal\n      mode={JournalMode.Reconcile}\n      deptId={id}\n      journalTitle={journalTitle}\n    />\n  );\n};\n\nconst Routes = (props) => {\n  return (\n    <Switch>\n      <Route exact path=\"/\" component={TopNav} />\n      <Route exact path=\"/department/:id\" component={DashBoardRender} />\n      <Route exact path=\"/journal\" component={Journal} />\n      <Route exact path=\"/journal/:id\" component={JournalViewRender} />\n      <Route\n        exact\n        path=\"/journal/:id/reconcile\"\n        component={JournalReconcileRender}\n      />\n    </Switch>\n  );\n};\n\nexport default Routes;\n","import {combineReducers} from \"redux\";\nimport * as _ from  \"lodash\"; \nimport isEqual from \"lodash.isequal\";\n\nimport {JournalEntrySourceType, JournalEntrySourceInput, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {\n  \n  Create, CREATE, Cancel, CANCEL, Clear, CLEAR,\n\n  SET_SUBMIT_STATUS, SetSubmitStatus, SET_SUBMIT_ERROR, SetSubmitError, \n  CLEAR_SUBMIT_ERROR, ClearSubmitError,\n\n  SET_TYPE_VALUE, SetTypeValue, SET_TYPE_ERROR,SetTypeError,\n  CLEAR_TYPE_ERROR, ClearTypeError,\n  \n  SetDateInput, SET_DATE_INPUT, ClearDateInput, CLEAR_DATE_INPUT,\n  SetDateValue, SET_DATE_VALUE, ClearDateValue, CLEAR_DATE_VALUE,\n  SetDateError, SET_DATE_ERROR, ClearDateError, CLEAR_DATE_ERROR,\n  \n  SetDeptInput, SET_DEPT_INPUT, ClearDeptInput, CLEAR_DEPT_INPUT,\n  SetDeptValue, SET_DEPT_VALUE, ClearDeptValue, CLEAR_DEPT_VALUE,\n  SetDeptError, SET_DEPT_ERROR, ClearDeptError, CLEAR_DEPT_ERROR,\n  SetDeptOpen , SET_DEPT_OPEN,\n\n  SET_CAT_INPUT, SetCatInput, CLEAR_CAT_INPUT, ClearCatInput, SET_CAT_VALUE,\n  SetCatValue, CLEAR_CAT_VALUE, ClearCatValue, SET_CAT_ERROR, SetCatError,\n  CLEAR_CAT_ERROR, ClearCatError, SET_CAT_OPEN, SetCatOpen,\n  \n  SetSrcType, SET_SRC_TYPE,\n  SetSrcInput, SET_SRC_INPUT, ClearSrcInput, CLEAR_SRC_INPUT,\n  SetSrcValue, SET_SRC_VALUE, ClearSrcValue, CLEAR_SRC_VALUE,\n  SetSrcError, SET_SRC_ERROR, ClearSrcError, CLEAR_SRC_ERROR,\n  SetSrcOpen , SET_SRC_OPEN,\n\n  SetPayMethodValue, SET_PAY_METHOD_VALUE, ClearPayMethodValue, \n  CLEAR_PAY_METHOD_VALUE, SET_PAY_METHOD_ERROR, SetPayMethodError,\n  CLEAR_PAY_METHOD_ERROR, ClearPayMethodError,\n\n  SET_DSCRPT_VALUE, SetDscrptValue, CLEAR_DSCRPT_VALUE, ClearDscrptValue,\n\n  SET_TOTAL_INPUT, SetTotalInput, CLEAR_TOTAL_INPUT, ClearTotalInput,\n  SET_TOTAL_VALUE, SetTotalValue, CLEAR_TOTAL_VALUE, ClearTotalValue,\n  SET_TOTAL_ERROR, SetTotalError, CLEAR_TOTAL_ERROR, ClearTotalError,\n\n  SET_RECONCILED_VALUE, SetReconciledValue,\n  CLEAR_RECONCILED_VALUE, ClearReconciledValue\n\n} from \"../actionTypes/journalEntryUpsert\";\nimport {InputValue, reduceOneById} from \"./utils\";\n\ntype Actions = Create | Cancel | Clear |\n  SetSrcInput | SetDateInput |  ClearDateInput | SetDateValue | ClearDateValue |\n  SetDateError | ClearDateError | SetSrcInput | ClearSrcInput | SetSrcValue |\n  ClearSrcValue | SetSrcError | ClearSrcError | SetSrcOpen | SetDeptInput |\n  ClearDeptInput | SetDeptValue | ClearDeptValue | SetDeptError |\n  ClearDeptError | SetDeptOpen | SetPayMethodValue | ClearPayMethodValue |\n  SetTotalInput | ClearTotalInput | SetTotalValue | ClearTotalValue |\n  SetTotalError | ClearTotalError | SetSubmitStatus | SetSubmitError | \n  ClearSubmitError | SetSrcType | SetPayMethodError | ClearPayMethodError |\n  SetDscrptValue | ClearDscrptValue | SetReconciledValue |\n  ClearReconciledValue | SetCatInput | ClearCatInput | SetCatValue |\n  ClearCatValue | SetCatError | ClearCatError | SetCatOpen | SetTypeValue |\n  SetTypeError | ClearTypeError;\n\n\nconst type = (state = new InputValue<JournalEntryType, null>(null)\n  , action:Actions):InputValue<JournalEntryType, null>  =>\n{\n\n  switch(action.type) {\n    case SET_TYPE_VALUE:\n      return state.value === action.payload.type ?\n        state : {...state, value:action.payload.type};\n    case SET_TYPE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TYPE_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\nconst date = (state = new InputValue<Date, null>(null), action:Actions)\n  :InputValue<Date, null> => \n{\n\n  switch(action.type) {\n    case SET_DATE_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DATE_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DATE_VALUE:\n      return state.value?.getTime() === action.payload.value.getTime() ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DATE_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DATE_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DATE_ERROR:\n      return state.error ? {...state, error:null} : state;\n    default:\n      return state;\n  }\n\n}\n\nconst department = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case CREATE:\n      if(action.payload.fromDept) {\n        return {...state, value:action.payload.fromDept};\n      }\n      return state;\n    case SET_DEPT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_DEPT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_DEPT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_DEPT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_DEPT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_DEPT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_DEPT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\n\nconst category = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_CAT_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_CAT_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_CAT_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_CAT_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_CAT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_CAT_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_CAT_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n      \n}\nconst source = (state = Object.assign(\n  new InputValue<JournalEntrySourceInput, null>(null),{open:false}),\n  action:Actions):InputValue<JournalEntrySourceInput, null> & {open:boolean} => \n{\n\n  switch(action.type) {\n    case SET_SRC_INPUT:{\n      const input = action.payload.input.trimStart();\n      return state.input === input ? state : {...state, input};\n    }\n    case CLEAR_SRC_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_SRC_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_SRC_VALUE:\n      return state.value ? {...state, value:null} : state;\n    case SET_SRC_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SRC_ERROR:\n      return state.error ? {...state, error:null} : state;\n    case SET_SRC_OPEN:{\n      const open = action.payload.open;\n      return open === state.open ? state : {...state, open};\n    }\n    default:\n      return state;\n  }\n\n}\n\nconst paymentMethod = (state = Object.assign(new InputValue<string, null>(null),\n  {open:false}), action:Actions):InputValue<string, null> & {open:boolean} =>\n{\n\n  switch(action.type) {\n    case SET_PAY_METHOD_VALUE:\n      return action.payload.value && state.value !== action.payload.value ?\n        {...state, value:action.payload.value} : state;\n    case CLEAR_PAY_METHOD_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_PAY_METHOD_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_PAY_METHOD_ERROR:\n        return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst description = (state = new InputValue<string, null>(null), \n  action:Actions ):InputValue<string, null> => \n{\n\n  switch(action.type) {\n    case SET_DSCRPT_VALUE:{\n      const value = action.payload.value.trimStart();\n      return !value || state.value === value ? state : {...state, value};\n    }\n    case CLEAR_DSCRPT_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst total = (state = new InputValue<RationalInput, null>(null), \n  action:Actions ):InputValue<RationalInput, null> => \n{\n\n  switch(action.type) {\n    case SET_TOTAL_INPUT:\n      return state.input === action.payload.input ?\n        state : {...state, input:action.payload.input};\n    case CLEAR_TOTAL_INPUT:\n      return state.input === \"\" ? state : {...state, input:\"\"};\n    case SET_TOTAL_VALUE:\n      return isEqual(state.value, action.payload.value) ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_TOTAL_VALUE:\n      return state.value === null ? state : {...state, value:null};\n    case SET_TOTAL_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_TOTAL_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n  \n}\n\nconst reconciled = (state = new InputValue<boolean, false>(false), \n  action:Actions ):InputValue<boolean, false> => \n{\n\n  switch(action.type) {\n    case SET_RECONCILED_VALUE:\n      return state.value === action.payload.value ?\n        state : {...state, value:action.payload.value};\n    case CLEAR_RECONCILED_VALUE:\n      return state.value === false ? state : {...state, value:false};\n    default:\n      return state;\n  }\n  \n}\n\nconst values = combineReducers({\n  id:(state:string | null = null, action:Actions) => action.type === CREATE ?\n    (action.payload.entryId || null) : state,\n  type,\n  date,\n  department,\n  category,\n  srcType:(state:JournalEntrySourceType | null = null, action:Actions) => \n    action.type === SET_SRC_TYPE ? action.payload.srcType : state,\n  source,\n  paymentMethod,\n  description,\n  total,\n  reconciled\n});\n\nexport enum SubmitStatus {\n  NotSubmitted,\n  Submitting,\n  Submitted,\n}\n\nconst submit = (state = {\n    status:SubmitStatus.NotSubmitted,\n    error:null as null | Error,\n  }, action:Actions) => \n{\n\n  switch(action.type) {\n    case SET_SUBMIT_STATUS:\n      return state.status === action.payload.status \n        ? state : {...state, status:action.payload.status};\n    case SET_SUBMIT_ERROR:\n      return state.error?.message === action.payload.error.message ?\n        state : {...state, error:action.payload.error};\n    case CLEAR_SUBMIT_ERROR:\n      return state.error === null ? state : {...state, error:null};\n    default:\n      return state;\n  }\n\n}\n\n\nconst journalEntryUpsert = combineReducers({\n  id:(state:string = \"\", action:Actions) => \n    action.type === CREATE ? action.payload.upsertId : state,\n  values,\n  fromDept:(state:string = \"\", action:Actions):string => {\n    if(action.type === CREATE && action.payload.fromDept) {\n      return action.payload.fromDept;\n    }\n    return state;\n  },\n  submit\n});\n\nexport type JournalEntryUpsert = ReturnType<typeof journalEntryUpsert>;\n\nexport const journalEntryUpserts = (state:JournalEntryUpsert[] = [],\n  action:Actions):JournalEntryUpsert[] => \n{\n\n  switch(action.type) {\n    \n    case CREATE:\n      return [...state, journalEntryUpsert(undefined, action)];\n    case CANCEL:\n    case CLEAR:{\n      const id = action.payload.upsertId;\n      for(let i = 0, len = state.length; i < len; i++){\n        if(state[i].id === id){\n          return [\n            ...state.slice(0, i),\n            ...state.slice(i + 1)\n          ];\n        }\n      }\n      return state;\n    }\n    \n    case SET_TYPE_VALUE:\n    case SET_TYPE_ERROR:\n    case CLEAR_TYPE_ERROR:\n    case SET_DATE_INPUT:\n    case CLEAR_DATE_INPUT:\n    case SET_DATE_VALUE:\n    case CLEAR_DATE_VALUE:\n    case SET_DATE_ERROR:\n    case CLEAR_DATE_ERROR:\n    case SET_DEPT_INPUT:\n    case SET_DEPT_VALUE:\n    case SET_DEPT_ERROR:\n    case SET_DEPT_OPEN:\n    case CLEAR_DEPT_INPUT:\n    case CLEAR_DEPT_VALUE:\n    case CLEAR_DEPT_ERROR:\n    case SET_CAT_INPUT:\n    case CLEAR_CAT_INPUT:\n    case SET_CAT_VALUE:\n    case CLEAR_CAT_VALUE:\n    case SET_CAT_ERROR:\n    case CLEAR_CAT_ERROR:\n    case SET_CAT_OPEN:\n    case SET_SRC_TYPE:\n    case SET_SRC_INPUT:\n    case CLEAR_SRC_INPUT:\n    case SET_SRC_VALUE:\n    case CLEAR_SRC_VALUE:\n    case SET_SRC_ERROR:\n    case CLEAR_SRC_ERROR:\n    case SET_SRC_OPEN:\n    case SET_PAY_METHOD_VALUE:\n    case CLEAR_PAY_METHOD_VALUE:\n    case SET_DSCRPT_VALUE:\n    case CLEAR_DSCRPT_VALUE:\n    case SET_TOTAL_INPUT:\n    case CLEAR_TOTAL_INPUT:\n    case SET_TOTAL_VALUE:\n    case CLEAR_TOTAL_VALUE:\n    case SET_TOTAL_ERROR:\n    case CLEAR_TOTAL_ERROR:\n    case SET_SUBMIT_STATUS:\n    case SET_SUBMIT_ERROR:\n    case CLEAR_SUBMIT_ERROR:\n    case SET_PAY_METHOD_ERROR:\n    case CLEAR_PAY_METHOD_ERROR:\n    case SET_RECONCILED_VALUE:\n    case CLEAR_RECONCILED_VALUE:\n      return reduceOneById(state, action, \n        action.payload.upsertId, \"id\", journalEntryUpsert);\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\nimport {JournalEntrySourceInput, JournalEntrySourceType, RationalInput,\n  JournalEntryType\n} from \"../../apollo/graphTypes\";\nimport {SubmitStatus} from \"../reducers/journalEntryUpserts\";\n\ntype SetInputAction<A> = Action<A, {upsertId:string, input:string}>;\ntype SetValueAction<A, T> = Action<A, {upsertId:string, value:T}>;\ntype SetErrorAction<A> = Action<A, {upsertId:string, error:Error}>;\ntype ClearAction<A> = Action<A, {upsertId:string}>;\n\n// Upsert Life cycle\nexport const CREATE = \"journalEntryUpsert/CREATE\";\nexport type Create = Action<typeof CREATE, {upsertId:string, entryId?:string,\n  fromDept?:string}>;\n\nexport const CANCEL = \"journalEntryUpsert/CANCEL\";\nexport type Cancel = Action<typeof CANCEL, {upsertId:string}>;\n\nexport const CLEAR = \"journalEntryUpsert/CLEAR\";\nexport type Clear = ClearAction<typeof CLEAR>;\n\n// Submit\nexport const SET_SUBMIT_STATUS = \"journalEntryUpsert/SUBMIT\";\nexport type SetSubmitStatus = \n  Action<typeof SET_SUBMIT_STATUS, {upsertId:string, status:SubmitStatus}>;\n\nexport const SET_SUBMIT_ERROR = \"journalEntryUpsert/SET_SUBMIT_ERROR\";\nexport type SetSubmitError = \n  Action<typeof SET_SUBMIT_ERROR, {upsertId:string, error:Error}>;\n\nexport const CLEAR_SUBMIT_ERROR = \"journalEntryUpsert/CLEAR_SUBMIT_ERROR\";\nexport type ClearSubmitError = \n  Action<typeof CLEAR_SUBMIT_ERROR, {upsertId:string}>;\n\n// Date\nexport const SET_DATE_INPUT = \"journalEntryUpsert/SET_DATE_INPUT\";\nexport type SetDateInput = SetInputAction<typeof SET_DATE_INPUT>;\n\nexport const CLEAR_DATE_INPUT = \"journalEntryUpsert/CLEAR_DATE_INPUT\";\nexport type ClearDateInput = ClearAction<typeof CLEAR_DATE_INPUT>;\n\nexport const SET_DATE_VALUE = \"journalEntryUpsert/SET_DATE_VALUE\";\nexport type SetDateValue = SetValueAction<typeof SET_DATE_VALUE, Date>;\n\nexport const CLEAR_DATE_VALUE = \"journalEntryUpsert/CLEAR_DATE_VALUE\";\nexport type ClearDateValue = ClearAction<typeof CLEAR_DATE_VALUE>;\n\nexport const SET_DATE_ERROR = \"journalEntryUpsert/SET_DATE_ERROR\";\nexport type SetDateError = SetErrorAction<typeof SET_DATE_ERROR>;\n\nexport const CLEAR_DATE_ERROR = \"journalEntryUpsert/CLEAR_DATE_ERROR\";\nexport type ClearDateError = ClearAction<typeof CLEAR_DATE_ERROR>;\n\n// Department\nexport const SET_DEPT_INPUT = \"journalEntryUpsert/SET_DEPT_INPUT\";\nexport type SetDeptInput = SetInputAction<typeof SET_DEPT_INPUT>;\n\nexport const CLEAR_DEPT_INPUT = \"journalEntryUpsert/CLEAR_DEPT_INPUT\";\nexport type ClearDeptInput = ClearAction<typeof CLEAR_DEPT_INPUT>;\n\nexport const SET_DEPT_VALUE = \"journalEntryUpsert/SET_DEPT_VALUE\";\nexport type SetDeptValue = SetValueAction<typeof SET_DEPT_VALUE, string>;\n\nexport const CLEAR_DEPT_VALUE = \"journalEntryUpsert/CLEAR_DEPT_VALUE\";\nexport type ClearDeptValue = ClearAction<typeof CLEAR_DEPT_VALUE>;\n\nexport const SET_DEPT_ERROR = \"journalEntryUpsert/SET_DEPT_ERROR\";\nexport type SetDeptError = SetErrorAction<typeof SET_DEPT_ERROR>;\n\nexport const CLEAR_DEPT_ERROR = \"journalEntryUpsert/CLEAR_DEPT_ERROR\";\nexport type ClearDeptError = ClearAction<typeof CLEAR_DEPT_ERROR>;\n\nexport const SET_DEPT_OPEN = \"journalEntryUpsert/SET_DEPT_OPEN\";\nexport type SetDeptOpen = \n  Action<typeof SET_DEPT_OPEN, {upsertId:string, open:boolean}>;\n\n// Type\nexport const SET_TYPE_VALUE = \"journalEntryUpsert/SET_TYPE_VALUE\";\nexport type SetTypeValue = Action<typeof SET_TYPE_VALUE,{upsertId:string,\n  type:JournalEntryType}>;\n\nexport const SET_TYPE_ERROR = \"journalEntryUpsert/SET_TYPE_ERROR\";\nexport type SetTypeError = SetErrorAction<typeof SET_TYPE_ERROR>;\n\nexport const CLEAR_TYPE_ERROR = \"journalEntryUpsert/CLEAR_TYPE_ERROR\";\nexport type ClearTypeError = ClearAction<typeof CLEAR_TYPE_ERROR>;\n\n// Category\nexport const SET_CAT_INPUT = \"journalEntryUpsert/SET_CAT_INPUT\";\nexport type SetCatInput = SetInputAction<typeof SET_CAT_INPUT>;\n\nexport const CLEAR_CAT_INPUT = \"journalEntryUpsert/CLEAR_CAT_INPUT\";\nexport type ClearCatInput = ClearAction<typeof CLEAR_CAT_INPUT>;\n\nexport const SET_CAT_VALUE = \"journalEntryUpsert/SET_CAT_VALUE\";\nexport type SetCatValue = SetValueAction<typeof SET_CAT_VALUE, string>;\n\nexport const CLEAR_CAT_VALUE = \"journalEntryUpsert/CLEAR_CAT_VALUE\";\nexport type ClearCatValue = ClearAction<typeof CLEAR_CAT_VALUE>;\n\nexport const SET_CAT_ERROR = \"journalEntryUpsert/SET_CAT_ERROR\";\nexport type SetCatError = SetErrorAction<typeof SET_CAT_ERROR>;\n\nexport const CLEAR_CAT_ERROR = \"journalEntryUpsert/CLEAR_CAT_ERROR\";\nexport type ClearCatError = ClearAction<typeof CLEAR_CAT_ERROR>;\n\nexport const SET_CAT_OPEN = \"journalEntryUpsert/SET_CAT_OPEN\";\nexport type SetCatOpen = \n  Action<typeof SET_CAT_OPEN, {upsertId:string, open:boolean}>;\n\n// Source\nexport const SET_SRC_TYPE = \"journalEntryUpsert/SET_SRC_TYPE\";\nexport type SetSrcType =\n  Action<typeof SET_SRC_TYPE,{upsertId:string, srcType:JournalEntrySourceType}>;\nexport const CLEAR_SRC_TYPE = \"journalEntryUpsert/CLEAR_SRC_TYPE\";\nexport type ClearSrcType = Action<typeof CLEAR_SRC_TYPE,{upsertId:string}>;\n\nexport const SET_SRC_INPUT = \"journalEntryUpsert/SET_SRC_INPUT\";\nexport type SetSrcInput = SetInputAction<typeof SET_SRC_INPUT>;\n\nexport const CLEAR_SRC_INPUT = \"journalEntryUpsert/CLEAR_SRC_INPUT\";\nexport type ClearSrcInput = ClearAction<typeof CLEAR_SRC_INPUT>;\n\nexport const SET_SRC_VALUE = \"journalEntryUpsert/SET_SRC_VALUE\";\nexport type SetSrcValue = SetValueAction<typeof SET_SRC_VALUE, \n  JournalEntrySourceInput>;\n\nexport const CLEAR_SRC_VALUE = \"journalEntryUpsert/CLEAR_SRC_VALUE\";\nexport type ClearSrcValue = ClearAction<typeof CLEAR_SRC_VALUE>;\n\nexport const SET_SRC_ERROR = \"journalEntryUpsert/SET_SRC_ERROR\";\nexport type SetSrcError = SetErrorAction<typeof SET_SRC_ERROR>;\n\nexport const CLEAR_SRC_ERROR = \"journalEntryUpsert/CLEAR_SRC_ERROR\";\nexport type ClearSrcError = ClearAction<typeof CLEAR_SRC_ERROR>;\n\nexport const SET_SRC_OPEN = \"journalEntryUpsert/SET_SRC_OPEN\";\nexport type SetSrcOpen = \n  Action<typeof SET_SRC_OPEN, {upsertId:string, open:boolean}>;\n\n// Payment Method\nexport const SET_PAY_METHOD_VALUE = \"journalEntryUpsert/SET_PAY_METHOD_VALUE\";\nexport type SetPayMethodValue = \n  SetValueAction<typeof SET_PAY_METHOD_VALUE, string>;\nexport const CLEAR_PAY_METHOD_VALUE = \n  \"journalEntryUpsert/CLEAR_PAY_METHOD_VALUE\";\nexport type ClearPayMethodValue = ClearAction<typeof CLEAR_PAY_METHOD_VALUE>;\n\nexport const SET_PAY_METHOD_ERROR = \"journalEntryUpsert/SET_PAY_METHOD_ERROR\";\nexport type SetPayMethodError = SetErrorAction<typeof SET_PAY_METHOD_ERROR>;\nexport const CLEAR_PAY_METHOD_ERROR \n  = \"journalEntryUpsert/CLEAR_PAY_METHOD_ERROR\";\nexport type ClearPayMethodError = ClearAction<typeof CLEAR_PAY_METHOD_ERROR>;\n\n// Description\nexport const SET_DSCRPT_VALUE = \"journalEntryUpsert/SET_DSCRPT_VALUE\";\nexport type SetDscrptValue = SetValueAction<typeof SET_DSCRPT_VALUE, \n  string>;\n\nexport const CLEAR_DSCRPT_VALUE = \"journalEntryUpsert/CLEAR_DSCRPT_VALUE\";\nexport type ClearDscrptValue = ClearAction<typeof CLEAR_DSCRPT_VALUE>;\n\n// Total\nexport const SET_TOTAL_INPUT = \"journalEntryUpsert/SET_TOTAL_INPUT\";\nexport type SetTotalInput = SetInputAction<typeof SET_TOTAL_INPUT>;\n\nexport const CLEAR_TOTAL_INPUT = \"journalEntryUpsert/CLEAR_TOTAL_INPUT\";\nexport type ClearTotalInput = ClearAction<typeof CLEAR_TOTAL_INPUT>;\n\nexport const SET_TOTAL_VALUE = \"journalEntryUpsert/SET_TOTAL_VALUE\";\nexport type SetTotalValue = SetValueAction<typeof SET_TOTAL_VALUE, \n  RationalInput>;\n\nexport const CLEAR_TOTAL_VALUE = \"journalEntryUpsert/CLEAR_TOTAL_VALUE\";\nexport type ClearTotalValue = ClearAction<typeof CLEAR_TOTAL_VALUE>;\n\nexport const SET_TOTAL_ERROR = \"journalEntryUpsert/SET_TOTAL_ERROR\";\nexport type SetTotalError = SetErrorAction<typeof SET_TOTAL_ERROR>;\n\nexport const CLEAR_TOTAL_ERROR = \"journalEntryUpsert/CLEAR_TOTAL_ERROR\";\nexport type ClearTotalError = ClearAction<typeof CLEAR_TOTAL_ERROR>;\n\n// Reconciled\nexport const SET_RECONCILED_VALUE = \"journalEntryUpsert/SET_RECONCILED_VALUE\";\nexport type SetReconciledValue =\n  SetValueAction<typeof SET_RECONCILED_VALUE, boolean>;\n\nexport const CLEAR_RECONCILED_VALUE = \n  \"journalEntryUpsert/CLEAR_RECONCILED_VALUE\";\nexport type ClearReconciledValue = ClearAction<typeof CLEAR_RECONCILED_VALUE>;","\nexport class InputValue<T, Tnull> {\n  input = \"\";\n  value:T | Tnull;\n  error:Error | null = null;\n  constructor(nullValue:Tnull) {\n    this.value = nullValue;\n  }\n}\n\nexport const reduceOneById = <T, A>(state:T[], action:A, id:string,\n  idKey:keyof T, reducer:(state:T, action:A) => T):T[] =>\n{ \n  for(let i = 0, len = state.length; i < len; i++){\n    const entry = state[i];\n    if(entry[idKey as string] === id) {\n      const newEntry = reducer(entry, action);\n      if(newEntry !== entry) {\n        return [\n          ...state.slice(0, i),\n          newEntry,\n          ...state.slice(i + 1)\n        ];\n      } else {\n        return state;\n      }\n    }\n  }\n  return state;\n}","import {Action} from \"./types\";\nimport {TableCellIni} from \"../reducers/tableRows\";\n\nexport const CREATE = \"tableCells/CREATE\";\nexport type Create = Action<typeof CREATE, TableCellIni>;\n\nexport const SET_INDEX = \"tableCells/SET_INDEX\";\nexport type SetIndex =\n  Action<typeof SET_INDEX, {id:string, rowId:string, index:number}>;\nexport const SET_DEFAULT_INDEX = \"tableCells/SET_DEFAULT_INDEX\";\nexport type SetDefaultIndex =\n  Action<typeof SET_DEFAULT_INDEX, {id:string, rowId:string}>;\n\nexport const SET_NAME = \"tableCells/SET_NAME\";\nexport type SetName =\n  Action<typeof SET_NAME, {id:string, rowId:string, name:string}>;\nexport const SET_DEFAULT_NAME = \"tableCells/SET_DEFAULT_NAME\";\nexport type SetDefaultName =\n  Action<typeof SET_DEFAULT_NAME, {id:string, rowId:string}>;\n\nexport const SET_WIDTH = \"tableCells/SET_WIDTH\";\nexport type SetWidth =\n  Action<typeof SET_WIDTH, {id:string, rowId:string, width:number}>;\nexport const SET_DEFAULT_WIDTH = \"tableCells/SET_DEFAULT_WIDTH\";\nexport type SetDefaultWidth =\n  Action<typeof SET_DEFAULT_WIDTH, {id:string, rowId:string}>;\n\nexport const COLLAPSE = \"tableCells/COLLAPSE\";\nexport type Collapse = Action<typeof COLLAPSE, {id:string, rowId:string}>;\nexport const EXPAND = \"tableCells/EXPAND\";\nexport type Expand = Action<typeof EXPAND, {id:string, rowId:string}>;\n\nexport const HIDE = \"tableCells/HIDE\";\nexport type Hide = Action<typeof HIDE, {id:string, rowId:string}>;\nexport const SHOW = \"tableCells/SHOW\";\nexport type Show = Action<typeof SHOW, {id:string, rowId:string}>;\n\nexport const RESTORE_DEFAULTS = \"tableCells/RESTORE_DEFAULTS\";\nexport type RestoreDefaults =\n  Action<typeof RESTORE_DEFAULTS, {id:string, rowId:string}>;","import isEqual from \"lodash.isequal\";\n\nimport {CREATE, Create, SET_INDEX, SetIndex, SET_DEFAULT_INDEX, SetDefaultIndex,\n SET_NAME, SetName, SET_DEFAULT_NAME, SetDefaultName, SET_WIDTH, SetWidth,\n SET_DEFAULT_WIDTH, SetDefaultWidth, COLLAPSE, Collapse, EXPAND, Expand,\n HIDE, Hide, SHOW, Show, RESTORE_DEFAULTS,\n RestoreDefaults,\n} from \"../actionTypes/tableRow\";\nimport { TableRow } from \"@material-ui/core\";\n\ntype Actions = Create | SetIndex | SetDefaultIndex | SetName | SetDefaultName |\n  SetWidth | SetDefaultWidth | Collapse | Expand | Hide | Show |\n  RestoreDefaults;\n\nexport interface TableCellIni {\n  rowId:string;\n  id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed?:boolean;\n  hidden?:boolean;\n}\nexport class TableCell {\n  \n  readonly ini:Readonly<TableCellIni>;\n  readonly rowId:string;\n  readonly id:string;\n  index:number;\n  name:string;\n  width:number;\n  collapsed:boolean;\n  hidden:boolean;\n  \n  constructor(ini:TableCellIni) {\n    this.ini = {...ini} as const;\n    this.rowId = ini.rowId\n    this.id = ini.id;\n    this.index = ini.index;\n    this.name = ini.name;\n    this.width = ini.width;\n    this.collapsed = ini?.collapsed ?? false;\n    this.hidden = ini?.hidden ?? false;\n  }\n\n}\n\nexport const tableCell = (state:TableCell, action:Actions):TableCell => {\n  \n  switch(action.type) {\n    case SET_INDEX:\n      return state.index === action.payload.index ?\n        state : {...state, index:action.payload.index};\n    case SET_DEFAULT_INDEX:\n      return state.index === state.ini.index ?\n        state : {...state, index:state.ini.index};\n    case SET_NAME:\n      return state.name === action.payload.name ?\n        state : {...state, name:action.payload.name};\n    case SET_DEFAULT_NAME:\n      return state.name === state.ini.name ?\n        state : {...state, name:state.ini.name};\n    case SET_WIDTH:\n      return state.width === action.payload.width ?\n        state : {...state, width:action.payload.width};\n    case SET_DEFAULT_WIDTH:\n      return state.width === state.ini.width ?\n        state : {...state, width:state.ini.width};\n    case COLLAPSE:\n      return state.collapsed === true ? state : {...state, collapsed:true};\n    case EXPAND:\n      return state.collapsed === false ? state : {...state, collapsed:false};\n    case HIDE:\n      return state.hidden === true ? state : {...state, hidden:true};\n    case SHOW:\n      return state.hidden === false ? state : {...state, hidden:false};\n    case RESTORE_DEFAULTS:{\n      const defaultState = new TableCell(state.ini);\n      return isEqual(state, defaultState) ? state : defaultState;\n    }\n    default:\n      return state;\n  }\n  \n}\n\ninterface TableRow {\n  [cellId:string]:TableCell;\n}\n\n\nexport const iterateCellByIndex = function*(row:TableRow) {\n\n  const unIndexedCells:TableCell[] = [];\n  const indexedCells = new Map<number, TableCell>();\n\n  let nextIndex = 0;\n  for(const key in row) {\n    \n    if(row.hasOwnProperty(key)) {\n      \n      const cell = row[key];\n      const {index = null} = cell;\n      \n      if(index === null) {\n      \n        continue;\n      \n      } else if(nextIndex === index) {\n        \n        yield cell;\n        \n        while(indexedCells.has(++nextIndex)) {\n        \n          yield indexedCells.get(nextIndex) as TableCell;\n        \n        }\n      \n      } else if(index > 0) {\n      \n        indexedCells.set(index, cell);\n      \n      } else {\n\n        unIndexedCells.push(cell);\n\n      }\n\n    }\n  \n  }\n\n  return unIndexedCells;\n\n}\n\nexport const tableRow = (state:TableRow = {}, action:Actions):TableRow =>\n{\n  switch(action.type) {\n    case CREATE:\n      return action.payload.id in state \n        ? state : {...state, [action.payload.id]:new TableCell(action.payload)};\n    case SET_INDEX:{\n      \n      const curIndex = state[action.payload.id].index;\n      const newIndex = action.payload.index;\n      \n      if(curIndex === newIndex) {\n      \n        return state;\n      \n      } else if(curIndex < newIndex) {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > newIndex) {\n            break;\n          } else if(row.index < curIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index - 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      } else {\n        \n        const newState = {} as TableRow;\n        \n        for(const row of iterateCellByIndex(state)) {\n\n          if(row.index > curIndex) {\n            break;\n          } else if(row.index < newIndex) {\n            continue;\n          } else if(row.index === curIndex) {\n            newState[row.id] =  tableCell(row, {...action, payload:{\n              ...action.payload, index:newIndex}});\n          } else {\n            newState[row.id] = tableCell(row, {...action, payload:{\n              ...action.payload, index:row.index + 1}});\n          }\n\n        }\n\n        return {...state, ...newState};\n\n      }\n\n    }\n    case SET_DEFAULT_INDEX:{\n\n      const newState = {} as TableRow;\n\n      for(const row of iterateCellByIndex(state)) {\n\n        newState[row.id] = tableCell(row, action);\n\n      }\n\n      return {...state, ...newState};\n\n    }\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:\n      if(action.payload.id in state) {\n        const curCell = state[action.payload.id];\n        const newCell = tableCell(curCell, action);\n        return newCell === curCell ? \n          state : {...state, [action.payload.id]:newCell};\n      }\n      return state;\n    default:\n      return state;\n  }\n}\n\ninterface TableRows {\n  [rowId:string]:TableRow;\n}\n\nexport const tableRows = (state:TableRows = {}, action:Actions)\n  :TableRows =>\n{\n\n  switch(action.type) {\n    case CREATE:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return {...state, [rowId]:tableRow(undefined, action)};\n    }\n    case SET_INDEX:\n    case SET_DEFAULT_INDEX:\n    case SET_NAME:\n    case SET_DEFAULT_NAME:\n    case SET_WIDTH:\n    case SET_DEFAULT_WIDTH:\n    case COLLAPSE:\n    case EXPAND:\n    case HIDE:\n    case SHOW:\n    case RESTORE_DEFAULTS:{\n      const {rowId} = action.payload;\n      if(rowId in state) {\n        const curRow = state[rowId];\n        const newRow = tableRow(curRow, action);\n        return curRow === newRow ? state : {...state, [rowId]:newRow};\n      }\n      return state;\n    }\n    default:\n      return state;\n  }\n\n}","import {Action} from \"./types\";\n\nexport const CREATE_PAB = \"journal/CREATE_PAB\";\nexport type CreatePAB = Action<typeof CREATE_PAB, {pabId:string}>;\n\nexport const OPEN_PAB = \"journal/OPEN_PAB\";\nexport type OpenPAB = Action<typeof OPEN_PAB, {pabId:string}>;\n\nexport const CLOSE_PAB = \"journal/CLOSE_PAB\";\nexport type ClosePAB = Action<typeof CLOSE_PAB, {pabId:string}>;","import {combineReducers} from \"redux\";\n\nimport {CREATE_PAB, CreatePAB, OPEN_PAB, OpenPAB, CLOSE_PAB, ClosePAB\n} from \"../actionTypes/journal\";\n\ntype Actions = CreatePAB | OpenPAB | ClosePAB;\n\nconst pab = (state = {open:false}, action:Actions) => {\n\n  switch(action.type) {\n    case OPEN_PAB:\n      return state.open === true ? state : {...state, open:true};\n    case CLOSE_PAB:\n      return state.open === false ? state : {...state, open:false};\n    default:\n    return state;\n  }\n\n}\n\nexport type PAB = ReturnType<typeof pab>;\n\ninterface PABs {\n  [key:string]:PAB\n}\n\nexport const pabs = (state:PABs = {}, action:Actions) => {\n\n  switch(action.type) {\n    case CREATE_PAB:\n      // Create ONLY once\n      if(action.payload.pabId in state) {\n        return state;\n      }\n      return {...state, [action.payload.pabId]:pab(undefined, action)}\n    case OPEN_PAB:\n    case CLOSE_PAB:\n      if(action.payload.pabId in state) {\n        const {pabId} = action.payload;\n        const curPAB = state[pabId];\n        const newPAB = pab(curPAB, action);\n        return curPAB === newPAB ? state : {...state, [pabId]:newPAB}\n      }\n      return state;\n    default:\n      return state;\n\n  }\n\n}\n\nexport const journal = combineReducers({\n  pabs\n});\n\nexport type Journal = typeof journal;","import {combineReducers} from \"redux\";\n\nimport {journalEntryUpserts} from \"./journalEntryUpserts\";\nimport {tableRows} from \"./tableRows\";\nimport {journal} from \"./journal\";\n\nconst root = combineReducers({\n  journal,\n  journalEntryUpserts,\n  tableRows\n});\nexport default root;\n\nexport type Root = ReturnType<typeof root>;","import { configureStore } from \"@reduxjs/toolkit\";\n// import { createStore, applyMiddleware } from \"redux\";\n// import { composeWithDevTools } from \"redux-devtools-extension\";\n// import thunk from \"redux-thunk\";\n\nimport root from \"./reducers/root\";\n\n// const store = createStore(root, composeWithDevTools(\n//   applyMiddleware(thunk)\n// ));\n\nconst store = configureStore({\n  reducer: root,\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport default store;\n","import React, { Fragment } from \"react\";\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from \"@apollo/react-hooks\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Box from \"@material-ui/core/Box\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport client from \"./apollo/apollo\";\nimport Routes from \"./Routes\";\nimport store from \"./redux/store\";\n\nexport default function App() {\n  return (\n    <Fragment>\n      <CssBaseline />\n      <Provider store={store}>\n        <ApolloProvider client={client}>\n          <Router>\n            {/* <Box\n            position=\"fixed\"\n            top={0}\n            left={0}\n            height=\"100vh\"\n            width=\"100vw\"\n            overflow=\"hidden\"\n            display=\"flex\"\n            flexDirection=\"column\"\n            justifyContent=\"flex-start\"\n            alignItems=\"center\"\n          >\n            <Routes/>\n          </Box> */}\n            <Routes />\n          </Router>\n        </ApolloProvider>\n      </Provider>\n    </Fragment>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n    \nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n"],"sourceRoot":""}