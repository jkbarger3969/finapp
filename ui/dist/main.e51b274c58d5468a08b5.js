"use strict";(self.webpackChunkaccounting=self.webpackChunkaccounting||[]).push([[179],{9685:(e,t,n)=>{var r=n(7294),a=n(3935),o=n(3768),l=n(5834),i=n(9711),u=n(8330),c=n(4942),s=n(9896);const d=JSON.parse('{"possibleTypes":{"AccountInterface":["AccountChecking","AccountCreditCard"],"AccountWithCardsInterface":["AccountChecking","AccountCreditCard"],"Aliasable":["AccountCard"],"BudgetOwner":["Business","Department"],"DepartmentAncestor":["Business","Department"],"Entity":["Business","Department","Person"],"PaymentCardInterface":["AccountCard","PaymentCard"],"PaymentCheckInterface":["AccountCheck","PaymentCheck"],"PaymentMethodInterface":["PaymentMethodCard","PaymentMethodCash","PaymentMethodCheck","PaymentMethodCombination","PaymentMethodOnline","PaymentMethodUnknown"],"Source":["Business","Department","Person"]}}');function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=new s.h(p(p({},d),{},{addTypename:!0}));var v=n(8066),y=n(3200),h=n(6765),b=n(6308),g=n(3581),O=new v.A({uri:"/graphql",credentials:"same-origin"}),E=new b.u({uri:"ws://".concat(window.location.host,"/graphql")});const w=g.i.from([(0,y.q)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,r=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r))})),n&&console.error("[Network error]: ".concat(n))})),g.i.split((function(e){var t=e.query,n=(0,h.p$)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),E,O)]),P=new u.f({link:w,cache:m,resolvers:{}});var C,Z,k,j,S,D,M,I=n(168),R=n(6974),_=n(9098),N=n(1641),x=n(9439),F=n(3433),V=n(5987),A=n(1002),T=n(9895),B=n(8994),q=n(9683),W=n(8334),L=n(5920),U=n(1120),$=n(9474),Y=n(5628),z=n.n(Y),G=n(4014),H=n.n(G),K=n(1549),Q=n.n(K);!function(e){e.Checking="CHECKING",e.CreditCard="CREDIT_CARD"}(C||(C={})),function(e){e.Usd="USD"}(Z||(Z={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(k||(k={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(j||(j={})),function(e){e.AmericanExpress="AMERICAN_EXPRESS",e.Discover="DISCOVER",e.MasterCard="MASTER_CARD",e.Visa="VISA"}(S||(S={})),function(e){e.Card="CARD",e.Cash="CASH",e.Check="CHECK",e.Combination="COMBINATION",e.Online="ONLINE",e.Unknown="UNKNOWN"}(D||(D={})),function(e){e.G="G",e.I="I",e.M="M",e.S="S"}(M||(M={}));var J,X,ee,te,ne,re,ae,oe,le,ie,ue=function(e){return JSON.stringify(e)},ce=function(e){return new(z())(JSON.parse(e))},se=function(e){return e.toISOString()},de=function(e){return new Date(e)},fe=(0,_.ZP)(J||(J=(0,I.Z)(["\n  fragment GridEntrySrcPerson on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]))),pe=(0,_.ZP)(X||(X=(0,I.Z)(["\n  fragment GridEntrySrcBusiness on Business {\n    __typename\n    id\n    name\n  }\n"]))),me=(0,_.ZP)(ee||(ee=(0,I.Z)(["\n  fragment GridEntrySrcDept on Department {\n    __typename\n    id\n    name\n  }\n"]))),ve=(0,_.ZP)(te||(te=(0,I.Z)(["\n  fragment GridPaymentMethodCard on PaymentMethodCard {\n    __typename\n    card {\n      __typename\n      ... on AccountCard {\n        id\n        active\n        account {\n          __typename\n          ... on AccountCreditCard {\n            id\n            name\n          }\n          ... on AccountChecking {\n            id\n            name\n          }\n        }\n        trailingDigits\n        type\n        aliases {\n          name\n        }\n      }\n      ... on PaymentCard {\n        trailingDigits\n        type\n      }\n    }\n  }\n\n  fragment GridPaymentMethodCheck on PaymentMethodCheck {\n    __typename\n    check {\n      __typename\n      ... on AccountCheck {\n        checkNumber\n        account {\n          __typename\n          id\n          name\n          accountNumber\n        }\n      }\n      ... on PaymentCheck {\n        checkNumber\n      }\n    }\n  }\n\n  fragment GridPaymentMethod on PaymentMethodInterface {\n    __typename\n    currency\n    ...GridPaymentMethodCard\n    ...GridPaymentMethodCheck\n  }\n"]))),ye=(0,_.ZP)(ne||(ne=(0,I.Z)(["\n  fragment GridRefund on EntryRefund {\n    __typename\n    id\n    date\n    dateOfRecord {\n      date\n    }\n    description\n    paymentMethod {\n      ...GridPaymentMethod\n    }\n    total\n    reconciled\n    deleted\n  }\n  ","\n"])),ve),he=(0,_.ZP)(re||(re=(0,I.Z)(["\n  fragment GridEntrySansRefunds on Entry {\n    __typename\n    id\n    date\n    dateOfRecord {\n      date\n    }\n    department {\n      __typename\n      id\n      name\n      disable {\n        __typename\n        id\n      }\n    }\n    category {\n      __typename\n      id\n      name\n      type\n    }\n    paymentMethod {\n      ...GridPaymentMethod\n    }\n    description\n    total\n    source {\n      ...GridEntrySrcPerson\n      ...GridEntrySrcBusiness\n      ...GridEntrySrcDept\n    }\n    reconciled\n    deleted\n  }\n  ","\n  ","\n  ","\n  ","\n"])),fe,pe,me,ve),be=(0,_.ZP)(ae||(ae=(0,I.Z)(["\n  fragment GridEntry on Entry {\n    ...GridEntrySansRefunds\n    refunds {\n      ...GridRefund\n    }\n  }\n  ","\n  ","\n"])),he,ye),ge=(0,_.ZP)(oe||(oe=(0,I.Z)(["\n  query GridEntries($where: EntriesWhere, $filterRefunds: Boolean) {\n    entries(where: $where, filterRefunds: $filterRefunds) {\n      ...GridEntry\n    }\n  }\n  ","\n"])),be),Oe=(0,_.ZP)(le||(le=(0,I.Z)(["\n  fragment GridEntryRefund on EntryRefund {\n    ...GridRefund\n    entry {\n      ...GridEntrySansRefunds\n    }\n  }\n  ","\n  ","\n"])),ye,he),Ee=(0,_.ZP)(ie||(ie=(0,I.Z)(["\n  query GridEntryRefunds(\n    $where: EntryRefundsWhere\n    $entriesWhere: EntriesWhere\n  ) {\n    entryRefunds(where: $where, entriesWhere: $entriesWhere) {\n      ...GridEntryRefund\n    }\n  }\n  ","\n"])),Oe),we=n(5477),Pe=n(1041),Ce=n(8889),Ze=n(9114),ke=["opacity"];function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Se=function(e){var t=(0,Pe.Z)(),n=e.opacity,a=void 0===n?.62:n,o=(0,V.Z)(e,ke);return r.createElement(Ce.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:(0,Ze.fade)(t.palette.background.paper,a)},o))};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Me=function(e){return r.createElement(Se,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r.createElement(we.Z,null))},Ie=function(e){var t=e.defaultValue,n=e.cacheKey,a=e.serializer,o=(0,r.useState)((function(){if(window.localStorage){var e=window.localStorage.getItem(n);return e?((null==a?void 0:a.deserialize)||JSON.parse)(e).item:t}return t})),l=(0,x.Z)(o,2),i=l[0],u=l[1];return[i,(0,r.useCallback)((function(e){u((function(t){var r="function"==typeof e?e(t):e;return window.localStorage&&window.localStorage.setItem(n,((null==a?void 0:a.serialize)||JSON.stringify)({item:r})),r}))}),[n,null==a?void 0:a.serialize])]};var Re=n(3998),_e=n(7855),Ne=["filters","onFiltersChange","namedFilters","onNamedFiltersChange"];function xe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e,t,n){return n.reduce((function(n,r){if("operator"in r){var a=Be(e,r);a.operator===t?n.push.apply(n,(0,F.Z)(a.filters)):n.push(a)}else n.push(Ae({columnName:e},r));return n}),[])},Be=function(e,t){return{operator:t.operator,filters:Te(e,t.operator,t.filters)}},qe=function e(t){return t.some((function(t){return"operator"in t?e(t.filters):void 0!==t.value}))},We=function(e){var t=e.filters,n=e.onFiltersChange,a=e.namedFilters,o=e.onNamedFiltersChange,l=(0,V.Z)(e,Ne),i=(0,r.useState)(null),u=(0,x.Z)(i,2),s=u[0],d=u[1],f=(0,r.useCallback)((function(e){var t=e;a&&t in a&&t!==s&&(d(t),n(a[t]))}),[s,a,n]),p=(0,r.useState)([]),m=(0,x.Z)(p,2),v=m[0],y=m[1],h=(0,r.useCallback)((function(e){y(e)}),[]),b=(0,r.useCallback)((function(e){if(v.length){var t,n=Ae({},a),r=function(e){if(e){var t=Array.isArray(e)?[e,null]:[e.names||v.map((function(e){return e.name})),e.load||null],n=(0,x.Z)(t,2),r=n[0],a=n[1];return[].concat((0,F.Z)(v.reduce((function(e,t){return r.includes(t.name)?e[0].push(t):e[1].push(t),e}),[[],[]])),[a])}return[(0,F.Z)(v),[],null]}(e),l=(0,x.Z)(r,3),i=l[0],u=l[1],c=l[2],s=xe(i);try{for(s.s();!(t=s.n()).done;){var f=t.value,p=f.name,m=f.filters;n[p]=m}}catch(e){s.e(e)}finally{s.f()}o&&o(n),y(u),c&&d(c)}}),[v,a,o]),g=(0,r.useCallback)((function(e){for(var t=e.name,n=e.change,r=0;r<v.length;r++)if(v[r].name===t){var a=(0,F.Z)(v);a.splice(r,1,Ae(Ae({},v[r]),n)),y(a)}}),[v]),O=(0,r.useCallback)((function(e){y(v.filter((function(t){var n=t.name;return!e.includes(n)})))}),[v]),E=(0,r.useState)(null),w=(0,x.Z)(E,2),P=w[0],C=w[1],Z=(0,r.useCallback)((function(e){if(e){var t=e.name,n=e.change;C(P?Ae(Ae({},P),{},(0,c.Z)({},t,n)):(0,c.Z)({},t,n))}else P||C({})}),[P]),k=(0,r.useCallback)((function(e){if(P)if(e){var t,n=Ae({},P),r=xe(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;Reflect.deleteProperty(n,a)}}catch(e){r.e(e)}finally{r.f()}C(Object.keys(n).length?n:null)}else C(null)}),[P]),j=(0,r.useCallback)((function(e){if(P){var t=e||Object.keys(P);if(t.length){var n,r=Ae({},P),l=Ae({},a),i=xe(t);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(u in P){var c=P[u],s=c.name,d=c.filters||(a||{})[u];d&&(s&&s!==u?(l[s]=d,Reflect.deleteProperty(l,u)):l[u]=d,Reflect.deleteProperty(r,u))}}}catch(e){i.e(e)}finally{i.f()}o&&o(l),C(Object.keys(r).length?r:null)}else Object.keys(P).length||C(null)}}),[P,a,o]),S=(0,r.useState)([]),D=(0,x.Z)(S,2),M=D[0],I=D[1],R=(0,r.useCallback)((function(e){I((function(t){return(0,F.Z)(new Set([].concat((0,F.Z)(t),(0,F.Z)(e))))}))}),[]),_=(0,r.useCallback)((function(e){I((function(t){return e?t.filter((function(t){return!e.includes(t)})):[]}))}),[]),N=(0,r.useCallback)((function(e){if(M.length){var t,r=Ae({},a),l=new Set((0,F.Z)(M)),i=xe(M);try{for(i.s();!(t=i.n()).done;){var u=t.value;e&&!e.includes(u)||(Reflect.deleteProperty(r,u),l.delete(u))}}catch(e){i.e(e)}finally{i.f()}s&&M.includes(s)&&(n([]),d(null)),o&&o(r),I((0,F.Z)(l))}}),[M,s,a,n,o]),A=(0,r.useMemo)((function(){return t.reduce((function(e,t){return"operator"in t?e[1].push(t):e[0].push(t),e}),[[],[]])}),[t]),T=(0,x.Z)(A,2),q=T[0],W=T[1],L=(0,r.useCallback)((function(e){var t=e.filters;return(0,F.Z)(new Set(t?[].concat((0,F.Z)(t),(0,F.Z)(W)):(0,F.Z)(W)))}),[W]),U=(0,r.useCallback)((function(e){var t=e.filterExpression,n=[];if(t&&("and"===t.operator?n.push.apply(n,(0,F.Z)(t.filters)):n.push(t)),W.length){var r,a=xe(W);try{for(a.s();!(r=a.n()).done;){var o=r.value,l=Te(o.columnName,o.operator,o.filters);"and"===o.operator?n.push.apply(n,(0,F.Z)(l)):n.push({operator:o.operator,filters:l})}}catch(e){a.e(e)}finally{a.f()}}return{operator:"and",filters:n}}),[W]),$=(0,r.useCallback)((function(e,t){var r=t.filters,a=(0,_e.YZN)(r||[],e);d(null),n(a)}),[n]),Y=(0,r.useCallback)((function(){n([]),d(null)}),[n]),z=(0,r.useMemo)((function(){return qe(t)}),[t]),G=(0,r.useMemo)((function(){return!!a&&!!Object.keys(a).length}),[a]);return r.createElement(Re.Sy,{name:"FilteringState"},r.createElement(B.IQ,Ae({filters:q},l)),r.createElement(Re.aD,{name:"filters",computed:L}),r.createElement(Re.aD,{name:"filterExpression",computed:U}),r.createElement(Re.aD,{name:"hasColumnFilters",value:z}),r.createElement(Re.aD,{name:"hasNamedFilters",value:G}),r.createElement(Re.aU,{name:"changeColumnFilter",action:$}),r.createElement(Re.aU,{name:"clearColumnFilters",action:Y}),r.createElement(Re.aD,{name:"namedFilters",value:G?a:null}),r.createElement(Re.aD,{name:"loadedNamedFilter",value:s}),r.createElement(Re.aD,{name:"addedNamedFilters",value:v}),r.createElement(Re.aD,{name:"deletedNamedFilters",value:M}),r.createElement(Re.aD,{name:"namedFilterChanges",value:P}),r.createElement(Re.aU,{name:"addNamedFilters",action:h}),r.createElement(Re.aU,{name:"changeAddedNamedFilter",action:g}),r.createElement(Re.aU,{name:"cancelAddedNamedFilters",action:O}),r.createElement(Re.aU,{name:"commitAddedNamedFilters",action:b}),r.createElement(Re.aU,{name:"changeNamedFilter",action:Z}),r.createElement(Re.aU,{name:"cancelChangedNamedFilters",action:k}),r.createElement(Re.aU,{name:"commitChangedNamedFilters",action:j}),r.createElement(Re.aU,{name:"loadNamedFilter",action:f}),r.createElement(Re.aU,{name:"deleteNamedFilters",action:R}),r.createElement(Re.aU,{name:"cancelDeletedNamedFilters",action:_}),r.createElement(Re.aU,{name:"commitDeletedNamedFilters",action:N}))},Le=["dataCellProviderCellOptions"],Ue=["cellProviderCellOptions","changeColumnFilterState"],$e=["columnName"];function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.cO.ROW_TYPE&&n.type===q.cO.COLUMN_TYPE},He=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.B0.ROW_TYPE&&n.type===q.cO.COLUMN_TYPE},Ke=r.memo((function(e){return r.createElement(Re.Sy,{name:"DataCellProvider"},r.createElement(Re.YS,{name:"tableCell",predicate:Ge},(0,r.useCallback)((function(t){var n,a=(null===(n=t.tableColumn.column)||void 0===n?void 0:n.name)||"",o=e[a];return r.createElement(Re.jf,{params:ze(ze({},t),{},{dataCellProviderCellOptions:o})})}),[e])))})),Qe=function(e){return r.createElement(Re.Sy,{name:"FilterCellProvider"},r.createElement(Re.YS,{name:"tableCell",predicate:He},(0,r.useCallback)((function(t){var n,a=(null===(n=t.tableColumn.column)||void 0===n?void 0:n.name)||"",o=e[a];return r.createElement(Re.eT,null,(function(){return r.createElement(Re.jf,{params:ze(ze({},t),{},{cellProviderCellOptions:o})})}))}),[e])))},Je=r.memo((function(e){var t=e.dataCellProviderCellOptions,n=(0,V.Z)(e,Le),a=(null==t?void 0:t.cell)||q.cO.Cell,o=null==t?void 0:t.props;return r.createElement(a,ze({},"function"==typeof o?o(n):ze(ze({},n),o)))})),Xe=r.memo((function(e){var t,n=e.cellProviderCellOptions,a=e.changeColumnFilterState,o=(0,V.Z)(e,Ue),l=n||{},i=l.cell,u=void 0===i?q.B0.Cell:i,c=l.props,s=void 0===c?{}:c,d="function"==typeof s?s(o):ze(ze({},o),s),f=(0,r.useMemo)((function(){return a?function(e){var t;if(e){var n=e.columnName,r=(0,V.Z)(e,$e);a({columnName:n,config:r})}else a({columnName:(null===(t=d.tableColumn.column)||void 0===t?void 0:t.name)||"",config:null})}:d.onFilter}),[d.onFilter,a,null===(t=d.tableColumn.column)||void 0===t?void 0:t.name]);return r.createElement(u,ze(ze({},d),{},{onFilter:f}))})),et=n(2087),tt=n(8222),nt=n(7812),rt=n(8396),at=n(5639),ot=n(6869),lt=n(5757),it=n(868),ut=n(2663),ct=n(6083),st=n(9525),dt=n(9803),ft=n(6856),pt=n(282),mt=n(5517),vt=n(2318),yt=n(2822),ht=n(998),bt=n(1860),gt=n(5485),Ot=n(4126),Et=n(387),wt=n(6945),Pt=n(3829),Ct=n(9956),Zt=n(8965),kt=n(8770),jt=n(5861),St=n(7757),Dt=n.n(St),Mt=n(7212),It=n(1749),Rt=n(1906),_t=n(3430),Nt=n(8769),xt=n(319),Ft=n(2644),Vt=n(6843),At=n(9119),Tt=n(3914),Bt=n(7827),qt=n(1991),Wt=n(8986),Lt=n(9599),Ut=n(5671),$t=n(3144),Yt=n(6486),zt=["children"];function Gt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jt,Xt,en,tn,nn,rn,an,on,ln,un,cn,sn,dn,fn,pn,mn,vn,yn,hn,bn,gn,On,En,wn,Pn,Cn,Zn=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},kn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},jn=function(){function e(t){var n,r=this,a=t.nameOrField,o=t.form,l=t.watcher,i=t.isValueEqual,u=void 0===i?function(e,t){return e===t}:i;if((0,Ut.Z)(this,e),this._watcher_=l,a instanceof Dn)this._name_=a.props.name,this._stateTracker_=(n=Dt().mark((function e(){var t,n,r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{props:{value:a.props.value},state:{isValid:a.state.isValid,isValidating:a.state.isValidating,isTouched:a.state.isTouched,isDirty:a.state.isDirty,isLoading:a.state.isLoading,errors:a.state.errors}}})(),r=Dt().mark((function e(){var r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!(Object.keys(n.props).every((function(e){return"value"===e?u(n.props[e],r.props[e]):n.props[e]===r.props[e]}))&&Object.keys(n.state).every((function(e){return"errors"===e?n.state[e].length===r.state[e].length&&n.state[e].every((function(t,n){return t===r.state[e][n]})):n.state[e]===r.state[e]})));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)}))(),n.next(),function(){return n.next().value});else{var c=o;this._name_=a,this._stateTracker_=function(){var e=Dt().mark((function e(){var t,n,r,a=this;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{value:c.getFieldValue(a.name,!1),errors:(0,F.Z)(c.getFieldErrors(a.name))}})(),r=Dt().mark((function e(){var r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!Object.keys(n).every((function(e){switch(e){case"errors":return n[e].length===r[e].length&&n[e].every((function(t,n){return t===r[e][n]}));case"value":return u(n[e],r[e]);default:return n[e]===r[e]}}));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)})).call(r);return e.next(),function(){return e.next().value}}()}}return(0,$t.Z)(e,[{key:"name",get:function(){return this._name_}},{key:"run",value:function(e){this._stateTracker_()&&this._watcher_(e)}},{key:"valueOf",value:function(){return this._watcher_}}]),e}(),Sn=function(){function e(t){var n,r=t.field,a=t.form,o=t.validators;(0,Ut.Z)(this,e),this._field_=void 0,this._validators_=[],this._errors_=[],this._validating_=null,this._hasRun_=!1,r instanceof Dn?(this._name_=r.props.name,this._field_=r):this._name_=r,(n=this._validators_).push.apply(n,(0,F.Z)(o)),this._form_=a}return(0,$t.Z)(e,[{key:"name",get:function(){return this._name_}},{key:"errors",value:function(){return this._errors_.values()}},{key:"reset",value:function(){this._validating_=null,this._errors_.splice(0),this._hasRun_=!1}},{key:"validate",value:function(){var e,t=this,n=!1,r=this._form_.getFieldValue(this._name_,!0),a=this._validators_.reduce((function(e,a){var o=a(r,{name:t._name_,form:t._form_,field:t._field_});return o instanceof Promise?(n=!0,e.push(o)):o&&e.push(o),e}),[]);if(n){var o=Promise.all(a).then((function(e){var n;if(t._validating_!==o)return t._validating_||!t._errors_.length;t._validating_=null,t._hasRun_=!0;var r=e.filter((function(e){return!!e}));return(n=t._errors_).splice.apply(n,[0,t._errors_.length].concat((0,F.Z)(r))),!r.length}));return this._validating_=o,o}return this._validating_=null,this._hasRun_=!0,(e=this._errors_).splice.apply(e,[0,this._errors_.length].concat((0,F.Z)(a))),!a.length}},{key:"hasRun",get:function(){return this._hasRun_}}]),e}(),Dn=function(){function e(t){var n,r,a=this,o=t.name,l=t.form,i=t.shouldUnregister,u=void 0!==i&&i;(0,Ut.Z)(this,e),Jt.set(this,void 0),Xt.set(this,void 0),en.set(this,(n={value:{get:function(){return kn(a,Xt,"f").getFieldValue(a.props.name,!1)},enumerable:!0},name:{get:function(){return kn(a,Jt,"f")},enumerable:!0}},Object.create(null,n))),tn.set(this,(r={isValid:{get:function(){return kn(a,Xt,"f").isFieldValid(a.props.name)},enumerable:!0},isValidating:{get:function(){return kn(a,Xt,"f").isFieldValidating(a.props.name)},enumerable:!0},isTouched:{get:function(){return kn(a,Xt,"f").isFieldTouched(a)},enumerable:!0},isDirty:{get:function(){return kn(a,Xt,"f").isFieldDirty(a.props.name)},enumerable:!0},isLoading:{get:function(){return kn(a,Xt,"f").isFieldLoading(a.props.name)},enumerable:!0},errors:{get:function(){return(0,F.Z)(kn(a,Xt,"f").getFieldErrors(a.props.name))},enumerable:!0}},Object.create(null,r))),nn.set(this,void 0),this.setValue=function(e){return kn(a,Xt,"f").setFieldValue(a.props.name,e)},this.setTouched=function(e){return kn(a,Xt,"f").setFieldTouched(a,e)},this.validate=function(){return kn(a,Xt,"f").validateField(a.props.name)},this.reset=function(){return kn(a,Xt,"f").resetField(a.props.name)},Zn(this,Jt,o,"f"),Zn(this,Xt,l,"f"),Zn(this,nn,u,"f"),Object.defineProperties(this,["props","state"].reduce((function(e,t){return e[t]=Qt(Qt({},Object.getOwnPropertyDescriptor(Object.getPrototypeOf(a),t)),{},{enumerable:!0}),e}),{}))}return(0,$t.Z)(e,[{key:"props",get:function(){return kn(this,en,"f")}},{key:"state",get:function(){return kn(this,tn,"f")}},{key:"shouldUnregister",get:function(){return kn(this,nn,"f")}}]),e}();Jt=new WeakMap,Xt=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap;var Mn=function(){function e(t){(0,Ut.Z)(this,e),rn.set(this,void 0),Zn(this,rn,t,"f")}return(0,$t.Z)(e,[{key:"valueOf",value:function(){return kn(this,rn,"f")}},{key:"toString",value:function(){return String(kn(this,rn,"f"))}}],[{key:"value",value:function(t){return new e(t)}}]),e}();rn=new WeakMap,Mn.value;var In=new WeakMap,Rn=new WeakMap,_n=new WeakMap,Nn=new WeakMap,xn=new WeakMap,Fn=new WeakMap,Vn=new WeakMap,An=new WeakMap,Tn=new WeakMap,Bn=new WeakMap,qn=function(e,t){return e===t},Wn=function(){function e(t){var n,r=this,a=t.onSubmit,o=t.validateOn;(0,Ut.Z)(this,e),an.set(this,new Map),on.set(this,new Map),ln.set(this,new Set),un.set(this,new Map),cn.set(this,new Map),sn.set(this,new WeakSet),dn.set(this,new Map),fn.set(this,void 0),pn.set(this,null),mn.set(this,0),vn.set(this,!1),yn.set(this,!1),hn.set(this,null),bn.set(this,new Map),gn.set(this,new Map),On.set(this,new Map),En.set(this,new Set),wn.set(this,(function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol(),o=Gt((null===(t=kn(r,On,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(o.s();!(n=o.n()).done;){var l=n.value;l.run(a)}}catch(e){o.e(e)}finally{o.f()}kn(r,Cn,"f").call(r,a)})),Pn.set(this,void 0),this.isFieldRegistered=function(e){return!!r.getRegisteredField(e)},this.getRegisteredField=function(e){return kn(r,an,"f").get(e)},this.setFieldValue=function(e,t){if(null==t)kn(r,ln,"f").add(e),kn(r,on,"f").delete(e);else{var n=r.getFieldValue(e,!0),a=r.getFieldDefaultValue(e),o=r.getFieldIsEqual(e);if(void 0!==n&&o(t,n))return;void 0!==a&&o(t,a)?kn(r,on,"f").delete(e):kn(r,on,"f").set(e,t),kn(r,ln,"f").delete(e)}switch(kn(r,fn,"f")){case"submit":if(r.submitCount>0&&!r.isFieldValid(e))return void r.validateField(e);break;case"blur":if(!r.isFieldRegistered(e))return void r.validateField(e);break;case"touched":var l=r.getRegisteredField(e);if(!l||r.isFieldTouched(l))return void r.validateField(e);break;case"all":case"change":return void r.validateField(e)}kn(r,wn,"f").call(r,e)},this.getFieldValue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return kn(r,on,"f").has(e)||t?kn(r,on,"f").get(e):kn(r,ln,"f").has(e)?void 0:r.getFieldDefaultValue(e)},this.getFieldDefaultValue=function(e){var t,n=Gt(kn(r,un,"f").values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.has(e))return a.get(e)}}catch(e){n.e(e)}finally{n.f()}},this.getFieldIsEqual=function(e){var t,n=Gt(kn(r,cn,"f").values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.has(e))return a.get(e)}}catch(e){n.e(e)}finally{n.f()}return qn},this.isFieldValid=function(e){return!!r.getFieldErrors(e).next().done},this.isFieldValidating=function(e){return kn(r,dn,"f").has(e)},this.isFieldTouched=function(e){return kn(r,sn,"f").has(e)},this.setFieldTouched=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.updateId;if(t){var o=!r.isFieldTouched(e);switch(o&&kn(r,sn,"f").add(e),kn(r,fn,"f")){case"blur":case"all":return void r.validateField(e.props.name,{updateId:a});case"touched":if(o)return void r.validateField(e.props.name,{updateId:a})}kn(r,wn,"f").call(r,e.props.name,a)}else r.isFieldTouched(e)&&(kn(r,sn,"f").delete(e),kn(r,wn,"f").call(r,e.props.name,a))},this.setTouchedAll=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.updateId,o=void 0===a?Symbol():a,l=Gt(r.fields());try{for(l.s();!(t=l.n()).done;){var i=t.value;r.setFieldTouched(i,e,{updateId:o})}}catch(e){l.e(e)}finally{l.f()}},this.isFieldDirty=function(e){return kn(r,on,"f").has(e)||kn(r,ln,"f").has(e)},this.isFieldLoading=function(e){return kn(r,bn,"f").has(e)},this.isFieldCleared=function(e){return kn(r,ln,"f").has(e)},this.getFieldErrors=Dt().mark((function e(t){var n,r,a,o;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Gt((null===(n=kn(this,gn,"f").get(t))||void 0===n?void 0:n.values())||[]),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=8;break}return o=a.value,e.delegateYield(o.errors(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])})).bind(this),this.validateField=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.updateId,l=!1,i=[],u=Gt((null===(t=kn(r,gn,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(u.s();!(n=u.n()).done;){var c=n.value,s=c.validate();s instanceof Promise?(l=!0,i.push(s)):i.push(s)}}catch(e){u.e(e)}finally{u.f()}if(l){var d=Promise.all(i).then((function(t){return kn(r,dn,"f").get(e)!==d?kn(r,dn,"f").get(e)||r.isFieldValid(e):(kn(r,dn,"f").delete(e),kn(r,wn,"f").call(r,e,o),t.every((function(e){return e})))}));return kn(r,dn,"f").set(e,d),kn(r,wn,"f").call(r,e),d}return kn(r,dn,"f").delete(e),kn(r,wn,"f").call(r,e,o),i.every((function(e){return e}))},this.validateAll=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=!1,l=[],i=Gt(kn(r,gn,"f").keys());try{for(i.s();!(e=i.n()).done;){var u=e.value,c=r.validateField(u,{updateId:a});c instanceof Promise&&(o=!0),l.push(c)}}catch(e){i.e(e)}finally{i.f()}if(o){var s=Promise.all(l).then((function(e){return kn(r,pn,"f")!==s?kn(r,pn,"f")||r.isValid:(Zn(r,pn,null,"f"),e.every((function(e){return e})))}));return Zn(r,pn,s,"f"),s}return Zn(r,pn,null,"f"),l.every((function(e){return e}))},this.submit=function(){var e=(0,jt.Z)(Dt().mark((function e(t){var n,a,o,l;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!kn(r,Pn,"f").onStart){e.next=3;break}return e.next=3,kn(r,Pn,"f").onStart({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 3:if(a=Symbol(),Zn(r,vn,!0,"f"),Zn(r,mn,(n=kn(r,mn,"f"),++n),"f"),r.setTouchedAll(!0),o=r.validateAll({updateId:a}),kn(r,Cn,"f").call(r,a),!(o instanceof Promise)){e.next=15;break}return e.next=12,o;case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=o;case 16:if(e.t0){e.next=28;break}if(Zn(r,vn,!1,"f"),l=r.getErrorsObject(),kn(r,Cn,"f").call(r),!kn(r,Pn,"f").onInvalid){e.next=24;break}return e.next=24,kn(r,Pn,"f").onInvalid({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r,errors:l});case 24:if(!kn(r,Pn,"f").finally){e.next=27;break}return e.next=27,kn(r,Pn,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 27:return e.abrupt("return",l);case 28:return e.prev=28,e.next=31,kn(r,Pn,"f").onSubmit({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 31:e.next=45;break;case 33:if(e.prev=33,e.t1=e.catch(28),Zn(r,hn,e.t1?"message"in e.t1?e.t1:new Error(String(e.t1)):new Error("Unknown Submission Error."),"f"),Zn(r,vn,!1,"f"),kn(r,Cn,"f").call(r),!kn(r,Pn,"f").onError){e.next=41;break}return e.next=41,kn(r,Pn,"f").onError({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r,error:e.t1});case 41:if(!kn(r,Pn,"f").finally){e.next=44;break}return e.next=44,kn(r,Pn,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 44:return e.abrupt("return",e.t1);case 45:if(Zn(r,vn,!1,"f"),Zn(r,yn,!0,"f"),kn(r,Cn,"f").call(r),!kn(r,Pn,"f").onSuccess){e.next=51;break}return e.next=51,kn(r,Pn,"f").onSuccess({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 51:if(!kn(r,Pn,"f").finally){e.next=54;break}return e.next=54,kn(r,Pn,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 54:case"end":return e.stop()}}),e,null,[[28,33]])})));return function(t){return e.apply(this,arguments)}}(),this.handleSubmit=function(e){null==e||e.preventDefault(),r.submit(e)},this.fields=function(){return kn(r,an,"f").values()},this.values=Dt().mark((function e(){var t,n,r,a,o,l,i,u,c,s,d,f,p,m,v,y,h,b,g=arguments;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(g.length>0&&void 0!==g[0])||g[0],n=new Set,r=Gt(kn(this,on,"f")),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=12;break}return o=(0,x.Z)(a.value,2),l=o[0],i=o[1],n.add(l),e.next=10,[l,i];case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:if(t){e.next=57;break}u=Gt(kn(this,ln,"f"));try{for(u.s();!(c=u.n()).done;)s=c.value,n.add(s)}catch(e){u.e(e)}finally{u.f()}d=Gt(kn(this,un,"f").values()),e.prev=24,d.s();case 26:if((f=d.n()).done){e.next=49;break}p=f.value,m=Gt(p),e.prev=29,m.s();case 31:if((v=m.n()).done){e.next=39;break}if(y=(0,x.Z)(v.value,2),h=y[0],b=y[1],n.has(h)){e.next=37;break}return n.add(h),e.next=37,[h,b];case 37:e.next=31;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(29),m.e(e.t1);case 44:return e.prev=44,m.f(),e.finish(44);case 47:e.next=26;break;case 49:e.next=54;break;case 51:e.prev=51,e.t2=e.catch(24),d.e(e.t2);case 54:return e.prev=54,d.f(),e.finish(54);case 57:case"end":return e.stop()}}),e,this,[[3,14,17,20],[24,51,54,57],[29,41,44,47]])})).bind(this),this.clearedFields=function(){return kn(r,ln,"f").values()},this.errors=Dt().mark((function e(){var t,n,r,a;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Gt(kn(this,gn,"f").keys()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(r=n.value,!(a=(0,F.Z)(this.getFieldErrors(r))).length){e.next=9;break}return e.next=9,[r,a];case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})).bind(this),this.getValuesObject=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={},a=Gt(r.values(t));try{for(a.s();!(e=a.n()).done;){var o=(0,x.Z)(e.value,2),l=o[0],i=o[1];(0,Yt.set)(n,l,i)}}catch(e){a.e(e)}finally{a.f()}return n},this.getErrorsObject=function(){var e,t={},n=Gt(r.errors());try{for(n.s();!(e=n.n()).done;){var a=(0,x.Z)(e.value,2),o=a[0],l=a[1];(0,Yt.set)(t,o,l)}}catch(e){n.e(e)}finally{n.f()}return t},this.resetFieldErrors=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.updateId,l=Gt((null===(t=kn(r,gn,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(l.s();!(n=l.n()).done;){var i=n.value;i.reset()}}catch(e){l.e(e)}finally{l.f()}kn(r,wn,"f").call(r,e,o)},this.resetErrors=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=Gt(kn(r,gn,"f").keys());try{for(o.s();!(e=o.n()).done;){var l=e.value;r.resetFieldErrors(l,{updateId:a})}}catch(e){o.e(e)}finally{o.f()}},this.resetField=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.updateId,a=void 0===n?Symbol():n;r.resetFieldErrors(e,{updateId:a}),kn(r,on,"f").delete(e),kn(r,ln,"f").delete(e);var o=r.getRegisteredField(e);o&&r.setFieldTouched(o,!1,{updateId:a}),kn(r,wn,"f").call(r,e,a)},this.resetSubmitCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;Zn(r,mn,0,"f"),kn(r,Cn,"f").call(r,t)},this.resetSubmitted=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;Zn(r,yn,!1,"f"),kn(r,Cn,"f").call(r,t)},this.resetSubmissionError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;Zn(r,hn,null,"f"),kn(r,Cn,"f").call(r,t)},this.reset=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=t.exclude,l=new Set,i=Gt(kn(r,an,"f").values());try{for(i.s();!(e=i.n()).done;){var u=e.value.props.name;l.add(u),r.resetField(u,{updateId:a})}}catch(e){i.e(e)}finally{i.f()}var c,s=Gt(kn(r,gn,"f").keys());try{for(s.s();!(c=s.n()).done;){var d=c.value;l.add(d)||(l.add(d),r.resetField(d,{updateId:a}))}}catch(e){s.e(e)}finally{s.f()}var f,p=Gt(kn(r,on,"f").keys());try{for(p.s();!(f=p.n()).done;){var m=f.value;l.has(m)||(l.add(m),r.resetField(m,{updateId:a}))}}catch(e){p.e(e)}finally{p.f()}(null==o?void 0:o.submitCount)||r.resetSubmitCount({updateId:a}),(null==o?void 0:o.submitted)||r.resetSubmitted({updateId:a}),r.resetSubmissionError({updateId:a}),kn(r,Cn,"f").call(r,a)},Cn.set(this,((n=Dt().mark((function e(){var t,n,r,a=this;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{isDirty:a.isDirty,isValid:a.isValid,isValidating:a.isValidating,isSubmitted:a.isSubmitted,isSubmitting:a.isSubmitting,submitCount:a.submitCount,submissionError:a.submissionError,loading:a.loading}})(),r=Dt().mark((function e(){var r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!Object.keys(n).every((function(e){return n[e]===r[e]}));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)})).call(r)).next(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Symbol();if(n.next()){var t,a=Gt(kn(r,En,"f"));try{for(a.s();!(t=a.n()).done;){var o=t.value;o(e)}}catch(e){a.e(e)}finally{a.f()}}})),Zn(this,Pn,"function"==typeof a?{onSubmit:a}:a,"f"),Zn(this,fn,o,"f"),In.set(this,kn(this,an,"f")),Rn.set(this,kn(this,on,"f")),_n.set(this,kn(this,un,"f")),Nn.set(this,kn(this,cn,"f")),xn.set(this,kn(this,bn,"f")),Fn.set(this,kn(this,gn,"f")),Vn.set(this,kn(this,On,"f")),An.set(this,kn(this,En,"f")),Tn.set(this,kn(this,wn,"f")),Bn.set(this,kn(this,Cn,"f")),Object.defineProperties(this,["isDirty","isValid","isValidating","isSubmitted","isSubmitting","submitCount","submissionError","loading"].reduce((function(e,t){return e[t]=Qt(Qt({},Object.getOwnPropertyDescriptor(Object.getPrototypeOf(r),t)),{},{enumerable:!0}),e}),{}))}return(0,$t.Z)(e,[{key:"isDirty",get:function(){return!!kn(this,on,"f").size||!!kn(this,ln,"f").size}},{key:"isValid",get:function(){return!!this.errors().next().done}},{key:"isValidating",get:function(){return!!kn(this,dn,"f").size}},{key:"isSubmitted",get:function(){return kn(this,yn,"f")}},{key:"isSubmitting",get:function(){return kn(this,vn,"f")}},{key:"submitCount",get:function(){return kn(this,mn,"f")}},{key:"submissionError",get:function(){return kn(this,hn,"f")}},{key:"loading",get:function(){return!!kn(this,bn,"f").size}},{key:"validateOn",get:function(){return kn(this,fn,"f")}}]),e}();an=new WeakMap,on=new WeakMap,ln=new WeakMap,un=new WeakMap,cn=new WeakMap,sn=new WeakMap,dn=new WeakMap,fn=new WeakMap,pn=new WeakMap,mn=new WeakMap,vn=new WeakMap,yn=new WeakMap,hn=new WeakMap,bn=new WeakMap,gn=new WeakMap,On=new WeakMap,En=new WeakMap,wn=new WeakMap,Pn=new WeakMap,Cn=new WeakMap;var Ln=Object.prototype.hasOwnProperty,Un=Dt().mark((function e(t,n){var r,a,o;return Dt().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=Dt().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!Ln.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,!(a instanceof Mn)){l.next=11;break}return l.next=9,[o,a.valueOf()];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),$n=Dt().mark((function e(t,n){var r,a,o;return Dt().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=Dt().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!Ln.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,"function"!=typeof a&&!(Symbol.iterator in a)){l.next=11;break}return l.next=9,[o,a];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),Yn=Dt().mark((function e(t,n){var r,a,o;return Dt().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=Dt().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!Ln.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,"function"!=typeof a){l.next=11;break}return l.next=9,[o,a];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),zn=(0,r.createContext)(null);zn.displayName="FormContext";var Gn=function(e){var t=e.children,n=(0,V.Z)(e,zt),r=Jn(n);return Hn({form:r,children:t})},Hn=function(e){return"form"in e?r.createElement(zn.Provider,{value:e.form},e.children):r.createElement(Gn,Qt({},e))},Kn=(0,r.createContext)(null);Kn.displayName="NamePrefixContext";var Qn=function(e){var t=(0,r.useContext)(Kn),n=t?tr(e.namePrefix,t):e.namePrefix;return r.createElement(Kn.Provider,{value:n},e.children)},Jn=function(e){var t=e.onSubmit,n=e.defaultValues,a=e.validators,o=e.isEqual,l=e.validateOn,i=void 0===l?"submit":l,u=(0,r.useState)(Symbol()),c=(0,x.Z)(u,2)[1],s=(0,r.useState)((function(){var e=new Wn({onSubmit:t,validateOn:i});return An.get(e).add(c),e})),d=(0,x.Z)(s,1)[0];return rr((0,r.useMemo)((function(){return{defaultValues:n||{},form:d,updateIds:{mount:Symbol(),unMount:Symbol()}}}),[n,d])),or((0,r.useMemo)((function(){return{validators:a||{},form:d,updateIds:{mount:Symbol(),unMount:Symbol()}}}),[d,a])),ir((0,r.useMemo)((function(){return{isEqual:o||{},form:d}}),[d,o])),d},Xn=function(e){var t=er({form:e,hookName:"useFormContext"}),n=(0,r.useState)(Symbol()),a=(0,x.Z)(n,2)[1];return(0,r.useEffect)((function(){return function(){t&&An.get(t).delete(a)}}),[t]),(0,r.useMemo)((function(){return t&&An.get(t).add(a),t||void 0}),[t])},er=function(e){var t=e.form,n=(e.hookName,(0,r.useContext)(zn));return t||n},tr=function(e,t){return"".concat(t,".").concat(e)},nr=function(e){var t=(0,r.useContext)(Kn);return t?e?tr(e,t):t:e||""},rr=function(e){var t=er({form:e.form,hookName:"useDefaultValues"}),n=(0,r.useState)((function(){var e=Symbol(),n=new Map;return _n.get(t).set(e,n),{id:e,defaultValuesMap:n}})),a=(0,x.Z)(n,1)[0],o=nr(),l=(0,r.useRef)();l.current=e.updateIds;var i=(0,r.useMemo)((function(){var t=a.defaultValuesMap,n=new Set(t.keys());t.clear();var r,l=Gt(Un(e.defaultValues));try{for(l.s();!(r=l.n()).done;){var i=(0,x.Z)(r.value,2),u=i[0],c=i[1],s=o?tr(u,o):u;n.add(s),t.set(s,c)}}catch(e){l.e(e)}finally{l.f()}return n}),[o,e.defaultValues,a]);(0,r.useEffect)((function(){var e,n,r=(null===(e=l.current)||void 0===e?void 0:e.mount)||Symbol(),a=Tn.get(t),o=Gt(i);try{for(o.s();!(n=o.n()).done;)a(n.value,r)}catch(e){o.e(e)}finally{o.f()}}),[t,i]),(0,r.useEffect)((function(){return function(){var e,n=a.defaultValuesMap,r=a.id;_n.get(t).delete(r);var o,i=(null===(e=l.current)||void 0===e?void 0:e.unMount)||Symbol(),u=Tn.get(t),c=Gt(n.keys());try{for(c.s();!(o=c.n()).done;)u(o.value,i)}catch(e){c.e(e)}finally{c.f()}}}),[t,a])},ar=function(e){return rr(e)},or=function(e){var t=er({form:e.form,hookName:"useValidators"}),n=nr(),a=(0,r.useRef)();a.current=e.updateIds;var o=(0,r.useMemo)((function(){return Dt().mark((function r(){var a,o,l,i,u;return Dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=Gt($n(e.validators)),r.prev=1,a.s();case 3:if((o=a.n()).done){r.next=9;break}return l=(0,x.Z)(o.value,2),i=l[0],u=l[1],r.next=7,new Sn({field:n?tr(i,n):i,form:t,validators:"function"==typeof u?[u]:u});case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),a.e(r.t0);case 14:return r.prev=14,a.f(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])}))}),[t,n,e.validators]);(0,r.useEffect)((function(){var n,r,l=Fn.get(t),i=(null===(n=a.current)||void 0===n?void 0:n.mount)||Symbol(),u=[],c=Gt(o());try{var s=function(){var n=r.value;u.push(n);var a=function(){var t;if("auto"===e.shouldRunValidation){var r,a=Gt(l.get(n.name)||[]);try{for(a.s();!(r=a.n()).done;)if(r.value.hasRun)return!0}catch(e){a.e(e)}finally{a.f()}return!1}return null!==(t=e.shouldRunValidation)&&void 0!==t&&t}();l.has(n.name)?l.get(n.name).add(n):l.set(n.name,new Set([n])),a&&t.validateField(n.name,{updateId:i})};for(c.s();!(r=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}return function(){var e,t=Gt(u);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=l.get(n.name);r&&(r.delete(n),r.size||l.delete(n.name))}}catch(e){t.e(e)}finally{t.f()}}}),[o,t,e.shouldRunValidation])},lr=function(e){return or(e)},ir=function(e){var t=er({form:e.form,hookName:"useIsEqual"}),n=(0,r.useState)((function(){var e=Symbol(),n=new Map;return Nn.get(t).set(e,n),{id:e,isEqualFnsMap:n}})),a=(0,x.Z)(n,1)[0],o=nr();(0,r.useMemo)((function(){var t=a.isEqualFnsMap;t.clear();var n,r=Gt(Yn(e.isEqual));try{for(r.s();!(n=r.n()).done;){var l=(0,x.Z)(n.value,2),i=l[0],u=l[1],c=o?tr(i,o):i;t.set(c,u)}}catch(e){r.e(e)}finally{r.f()}}),[o,e.isEqual,a]),(0,r.useEffect)((function(){return function(){var e=a.id;Nn.get(t).delete(e)}}),[t,a])},ur=function(e){var t=er({form:e.form,hookName:"useWatcher"}),n=nr(),a=(0,r.useState)(Symbol()),o=(0,x.Z)(a,2),l=o[0],i=o[1],u=(0,r.useMemo)((function(){var r=e.name;return new jn({nameOrField:r instanceof Dn||!n?r:tr(r,n),form:t,watcher:i})}),[t,n,e.name]);return(0,r.useEffect)((function(){var e=Vn.get(t);return e.has(u.name)?e.get(u.name).add(u):e.set(u.name,new Set([u])),function(){var t=e.get(u.name);t&&(t.delete(u),t.size||e.delete(u.name))}}),[u,t]),(0,r.useMemo)((function(){return{value:t.getFieldValue(u.name),defaultValue:t.getFieldDefaultValue(u.name),errors:(0,F.Z)(t.getFieldErrors(u.name))}}),[u,t,l])},cr=new WeakMap,sr=function(e){var t=er({form:e.form,hookName:"useField"}),n=nr(),a=(0,r.useState)(Symbol()),o=(0,x.Z)(a,2)[1],l=(0,r.useRef)();l.current=e.shouldUnregister;var i=(0,r.useMemo)((function(){var r,a=n?tr(e.name,n):e.name,o=t.getRegisteredField(a)||new Dn({name:a,form:t,shouldUnregister:l.current});return cr.set(o,(null!==(r=cr.get(o))&&void 0!==r?r:0)+1),In.get(t).set(o.props.name,o),o}),[t,n,e.name]),u=(0,r.useRef)();u.current={mount:Symbol(),unMount:Symbol()};var s=(0,r.useMemo)((function(){return{defaultValues:void 0===e.defaultValue?{}:(0,c.Z)({},e.name,new Mn(e.defaultValue)),form:t,updateIds:u.current}}),[t,e.defaultValue,e.name]),d=(0,r.useMemo)((function(){return void 0===e.validator?{}:(0,c.Z)({},e.name,e.validator)}),[e.name,e.validator]),f=(0,r.useMemo)((function(){return{validators:d,form:t,updateIds:u.current,shouldRunValidation:e.shouldRunValidation}}),[t,e.shouldRunValidation,d]),p=(0,r.useMemo)((function(){return{isEqual:e.isEqual?(0,c.Z)({},e.name,e.isEqual):{},form:t}}),[t,e.isEqual,e.name]);return(0,r.useEffect)((function(){var e=Vn.get(t),n=new jn({nameOrField:i,watcher:o});return e.has(n.name)?e.get(n.name).add(n):e.set(i.props.name,new Set([n])),function(){var r=e.get(n.name);r&&(r.delete(n),r.size||e.delete(n.name));var a=cr.get(i)-1;cr.set(i,a),0===a&&(In.get(t).delete(i.props.name),i.shouldUnregister&&i.reset())}}),[i,t]),rr(s),or(f),ir(p),i},dr=function(e){var t=er({form:e.form,hookName:"useLoading"}),n=nr(),a=(0,r.useState)(Symbol()),o=(0,x.Z)(a,1)[0],l=(0,r.useCallback)((function(r){var a,l=Array.isArray(e.name)?e.name:[e.name],i=xn.get(t),u=Symbol(),c=Tn.get(t),s=Gt(l);try{for(s.s();!(a=s.n()).done;){var d=a.value,f=d instanceof Dn?d.props.name:d,p=n?tr(f,n):f;if(r)i.has(p)?i.get(p).add(o):i.set(p,new Set([o]));else if(i.has(p)){var m=i.get(p);m.delete(o),m.size||i.delete(p)}c(p,u)}}catch(e){s.e(e)}finally{s.f()}Bn.get(t)(u)}),[t,o,n,e.name]);(0,r.useEffect)((function(){l(e.loading)}),[e.loading,l]),(0,r.useEffect)((function(){return function(){l(!1)}}),[l])},fr=["defaultValue","name","form","onBlur","onChange","disabled"];function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vr=function(e){if(void 0!==e&&!(0,Lt.Z)(e))return new TypeError("Invalid Date")},yr=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.name,i=void 0===l?"date":l,u=e.form,c=e.onBlur,s=e.onChange,d=e.disabled,f=(0,V.Z)(e,fr),p=null!==(a=null===(n=Xn(u))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,m=sr({name:i,defaultValue:o,isEqual:Vt.Z,validator:vr,form:u}),v=m.props,y=v.name,h=v.value,b=m.state,g=b.isTouched,O=b.errors,E=m.setValue,w=m.setTouched,P=(0,r.useCallback)((function(){var e;E(null!==(e=arguments.length<=0?void 0:arguments[0])&&void 0!==e?e:void 0),s&&s.apply(void 0,arguments)}),[E,s]),C=(0,r.useCallback)((function(){w(!0),c&&c.apply(void 0,arguments)}),[w,c]);return r.createElement(Bt.M,{utils:Wt.Z},r.createElement(qt.e,mr(mr(mr({ref:t},f),g&&O.length?{error:!0,helperText:O[0].message}:{}),{},{name:y,value:null!=h?h:null,onChange:P,onBlur:C,disabled:p||d})))})),hr=n(5251),br=["renderInput","classes","closeIcon","forcePopupIcon","fullWidth","popupIcon","size"],gr=["name","defaultValue","validator","shouldRunValidation","shouldUnregister","form","onBlur","onChange","disabled","children","setValueAs"];function Or(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Er(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Or(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wr,Pr,Cr,Zr,kr,jr=[],Sr=(0,r.forwardRef)((function(e,t){var n=e.renderInput,a=void 0===n?G.defaultInput:n,o=e.classes,l=e.closeIcon,i=e.forcePopupIcon,u=e.fullWidth,c=e.popupIcon,s=e.size;return(0,V.Z)(e,br),r.createElement(hr.ZP,{ref:t,classes:o,closeIcon:l,forcePopupIcon:i,fullWidth:u,popupIcon:c,size:s,defaultValue:void 0,value:null,inputValue:"",disabled:!0,options:jr,renderInput:(0,r.useCallback)((function(e){return a(Er(Er({},e),{},{InputProps:(0,G.mergeInputEndAdornment)("append",r.createElement(we.Z,{size:20,color:"inherit"}),e.InputProps)}))}),[a])})})),Dr=((0,r.forwardRef)((function(e,t){var n=e.classes,a=e.color,o=e.error,l=e.FormHelperTextProps,i=e.fullWidth,u=e.helperText,c=e.id,s=e.InputLabelProps,d=e.inputProps,f=e.InputProps,p=e.inputRef,m=e.label,v=e.margin,y=e.maxRows,h=e.minRows,b=e.multiline,g=e.name,O=e.placeholder,E=e.size,w=e.hiddenLabel,P=function(){switch(e.variant){case"dialog":case"inline":case"static":return e.inputVariant;default:return e.variant||e.inputVariant}}();return r.createElement(dt.Z,{classes:n,color:a,error:o,FormHelperTextProps:l,fullWidth:i,helperText:u,id:c,InputLabelProps:s,inputProps:d,inputRef:p,label:m,margin:v,maxRows:y,minRows:h,multiline:b,name:g,placeholder:O,size:E,variant:P,hiddenLabel:w,ref:t,disabled:!0,InputProps:(0,r.useMemo)((function(){return(0,G.mergeInputEndAdornment)("append",r.createElement(we.Z,{size:20,color:"inherit"}),f)}),[f])})})),function(e,t){var n=e instanceof G.BranchNode,r=t instanceof G.BranchNode;return n?r?0:-1:r?n?0:1:0}),Mr=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.defaultValue,i=e.validator,u=e.shouldRunValidation,c=e.shouldUnregister,s=e.form,d=e.onBlur,f=e.onChange,p=e.disabled,m=e.children,v=e.setValueAs,y=(0,V.Z)(e,gr),h=null!==(a=null===(n=Xn(s))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,b=sr({name:o,defaultValue:l,validator:i,shouldRunValidation:u,shouldUnregister:c,form:s}),g=b.props,O=g.value,E=g.name,w=b.state,P=w.isTouched,C=w.errors,Z=b.setValue,k=b.setTouched;return r.createElement(dt.Z,Er(Er(Er({},y),{},{name:E,value:null!=O?O:"",ref:t,disabled:p||h},P&&C.length?{error:!0,helperText:C[0].message}:{}),{},{onBlur:(0,r.useCallback)((function(){k(!0),d&&d.apply(void 0,arguments)}),[k,d]),onChange:(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Z(v?v.apply(void 0,t):t[0].target.value||void 0),f&&f.apply(void 0,t)}),[v,f,Z])}),m)})),Ir=new Error("Required"),Rr=function(e,t){var n=t.form,r=t.name,a=n.getFieldValue(r,!1);if(null==a||"string"==typeof a&&""===a.trim())return Ir},_r=new RangeError("Must be greater than zero."),Nr=function(e){if(e&&e.compare(0)<=0)return _r},xr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.defaultInput;return(0,r.useCallback)((function(n){return t(Er(Er({},n),e?{error:!0,helperText:"string"==typeof e?e:e.message}:{}))}),[e,t])},Fr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.defaultInput;return(0,r.useCallback)((function(n){return t(Er({label:e},n))}),[e,t])},Vr=n(2775),Ar=["root","renderInput","branch","onBranchChange","loading","fyID"],Tr=["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"];function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wr,Lr,Ur,$r,Yr=(0,_.Ps)(wr||(wr=(0,I.Z)(["\n  fragment DepartmentInputOpt on Department {\n    __typename\n    id\n    name\n    children {\n      __typename\n      id\n    }\n    disable {\n      __typename\n      id\n    }\n  }\n"]))),zr=(0,_.Ps)(Pr||(Pr=(0,I.Z)(["\n  fragment DepartmentInputDefaultValue on Department {\n    ...DepartmentInputOpt\n    ancestors(root: $deptRoot) {\n      __typename\n      ... on Department {\n        ...DepartmentInputOpt\n      }\n    }\n  }\n  ","\n"])),Yr),Gr=((0,_.Ps)(Cr||(Cr=(0,I.Z)(["\n  query DepartmentInputDefaultValues(\n    $where: DepartmentsWhere!\n    $deptRoot: DepartmentsWhere\n  ) {\n    departments(where: $where) {\n      ...DepartmentInputDefaultValue\n    }\n  }\n"]))),(0,_.Ps)(Zr||(Zr=(0,I.Z)(["\n  query DepartmentInputOpts($where: DepartmentsWhere!) {\n    departments(where: $where) {\n      ...DepartmentInputOpt\n    }\n  }\n  ","\n"])),Yr)),Hr=((0,_.Ps)(kr||(kr=(0,I.Z)(["\n  query DepartmentInputFiscalYear($where: FiscalYearsWhere) {\n    fiscalYears(where: $where) {\n      __typename\n      id\n    }\n  }\n"]))),function(e,t){var n=function(e,t){return e&&t?e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode?e.valueOf()===t.valueOf():e.valueOf().id===t.valueOf().id:e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)}),Kr=function(e){return e instanceof G.FreeSoloNode?e.toString():e.valueOf().name},Qr=function(e,t){return!(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode||e.valueOf().id!==t.valueOf().id)},Jr=(0,r.forwardRef)((function(e,t){var n,a,o=e.root,l=e.renderInput,i=void 0===l?G.defaultInput:l,u=e.branch,c=e.onBranchChange,s=e.loading,d=e.fyID,f=(0,V.Z)(e,Ar),p=(0,Vr.Z)({controlled:u,default:null,name:"CategoryInputBaseProps",state:"branch"}),m=(0,x.Z)(p,2),v=m[0],y=m[1];(0,r.useRef)(v).current=v;var h=(0,N.a)(Gr,(0,r.useMemo)((function(){return{variables:{where:o}}}),[o])),b=(0,N.a)(Gr,(0,r.useMemo)((function(){var e;return{skip:!v,variables:{where:{parent:{eq:{type:"Department",id:null===(e=null==v?void 0:v.valueOf())||void 0===e?void 0:e.id}}}}}}),[v])),g=(0,r.useCallback)((function(){y(arguments.length<=1?void 0:arguments[1]),c&&c.apply(void 0,arguments)}),[c,y]),O=(0,r.useCallback)((function(e){var t,n;return i(qr(qr({name:"department"},e),h.error||b.error?{error:!0,helperText:(null===(t=h.error)||void 0===t?void 0:t.message)||(null===(n=b.error)||void 0===n?void 0:n.message)}:{}))}),[b.error,i,h.error]),E=(0,r.useMemo)((function(){var e,t,n=[];return h.loading?n:((v?null===(e=b.data)||void 0===e?void 0:e.departments:null===(t=h.data)||void 0===t?void 0:t.departments)||[]).filter((function(e){return e.disable.every((function(e){return e.id!==d}))})).reduce((function(e,t){return t.children.length&&e.push(new G.BranchNode(t,v)),e.push(t),e}),n).sort(Dr)}),[h.loading,null===(n=h.data)||void 0===n?void 0:n.departments,v,null===(a=b.data)||void 0===a?void 0:a.departments,d]);return h.loading?r.createElement(Sr,qr({},e)):r.createElement(H(),qr(qr({getOptionLabel:Kr,getOptionSelected:Qr},f),{},{ref:t,loading:b.loading||!!s,onBranchChange:g,branch:v,renderInput:O,options:E}))})),Xr=Symbol(),ea="department",ta=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,i=e.renderInput,u=void 0===i?G.defaultInput:i,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,V.Z)(e,Tr),m=null!==(a=null===(n=Xn(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=sr({name:ea,form:l,isEqual:Hr,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),Z=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),k=(0,r.useCallback)((function(e){return u(qr(qr({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[u,b,O,E]),j=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[w,d]),S=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:Xr})),D=(0,x.Z)(S,2),M=D[0],I=D[1],R=(0,r.useCallback)((function(){I(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(Jr,qr(qr({},p),{},{value:C,disabled:m||c,ref:t,onChange:j,branch:M===Xr?C instanceof G.ValueNode?C.parent:null:M,onBranchChange:R,renderInput:k,onBlur:Z}))})),na=["inputValue","onInputChange","branch","onBranchChange","loading","autoSelect","renderInput","allowNewBusiness","allowNewPerson"],ra=["name","defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"];function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la,ia,ua,ca,sa=function(e,t){var n=function(e,t){if(e&&t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return e.valueOf()===t.valueOf();var n=e.valueOf(),r=t.valueOf();return n.id===r.id&&n.__typename===r.__typename}return e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},da=(0,_.Ps)(Wr||(Wr=(0,I.Z)(["\n  fragment EntityBusinessInputOpt on Business {\n    __typename\n    id\n    name\n    departments(root: true) {\n      __typename\n      id\n    }\n  }\n\n  fragment EntityPersonInputOpt on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n    email\n    phone\n  }\n"]))),fa=(0,_.Ps)(Lr||(Lr=(0,I.Z)(["\n  fragment EntityInputDefaultValue on Entity {\n    ...EntityBusinessInputOpt\n    ...EntityPersonInputOpt\n    ...DepartmentInputDefaultValue\n    ... on Department {\n      ancestors(root: $deptRoot) {\n        ...EntityBusinessInputOpt\n        ...DepartmentInputOpt\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),da,zr,Yr),pa=(0,_.Ps)(Ur||(Ur=(0,I.Z)(["\n  query EntityInputOpts($where: EntitiesWhere!) {\n    entities(where: $where) {\n      ...EntityBusinessInputOpt\n      ...DepartmentInputOpt\n      ...EntityPersonInputOpt\n    }\n  }\n  ","\n  ","\n"])),Yr,da),ma=((0,_.Ps)($r||($r=(0,I.Z)(["\n  query EntityInputDefaultValue(\n    $where: EntitiesWhere!\n    $deptRoot: DepartmentsWhere\n  ) {\n    entities(where: $where) {\n      ...EntityInputDefaultValue\n    }\n  }\n  ","\n"])),fa),function(e){if(e instanceof G.FreeSoloNode)return e.toString();var t=e.valueOf();if("string"==typeof t)return t;switch(t.__typename){case"Business":return t.name;case"Person":return"".concat(t.personName.first," ").concat(t.personName.last);case"Department":return Kr(e)}}),va=function(e,t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return!1;var n=e.valueOf(),r=t.valueOf();return"string"==typeof n?n===r:"string"!=typeof r&&n.id===r.id},ya=new G.BranchNode("Business"),ha=new G.BranchNode("Person"),ba=[ya,ha],ga=(0,r.forwardRef)((function(e,t){var n,a=e.inputValue,o=e.onInputChange,l=e.branch,i=e.onBranchChange,u=e.loading,c=e.autoSelect,s=e.renderInput,d=void 0===s?G.defaultInput:s,f=e.allowNewBusiness,p=e.allowNewPerson,m=(0,V.Z)(e,na),v=(0,Vr.Z)({controlled:a,default:"",name:"EntityInputBase",state:"inputValue"}),y=(0,x.Z)(v,2),h=y[0],b=y[1],g=(0,Vr.Z)({controlled:l,default:null,name:"EntityInputBase",state:"branch"}),O=(0,x.Z)(g,2),E=O[0],w=O[1],P=h.trim().slice(0,1),C=(0,N.a)(pa,(0,r.useMemo)((function(){var e="cache-and-network",t=null==E?void 0:E.valueOf();return t?"Business"===t?{skip:!P,variables:{where:{businesses:{name:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}}},fetchPolicy:e}:"Person"===t?{skip:!P,variables:{where:{people:{or:[{name:{first:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}},{name:{last:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}}]}}},fetchPolicy:e}:"Business"===t.__typename?{skip:!t.departments.length,variables:{where:{departments:{parent:{eq:{type:t.__typename,id:t.id}}}}},fetchPolicy:e}:"Department"===t.__typename?{skip:!t.children.length,variables:{where:{departments:{parent:{eq:{type:t.__typename,id:t.id}}}}},fetchPolicy:e}:void 0:{skip:!0,variables:{where:{}}}}),[E,P])),Z=(0,r.useCallback)((function(){w(arguments.length<=1?void 0:arguments[1]),i&&i.apply(void 0,arguments)}),[i,w]),k=(0,r.useCallback)((function(){b(arguments.length<=1?void 0:arguments[1]),o&&o.apply(void 0,arguments)}),[o,b]),j=(0,r.useCallback)((function(e){var t=null==E?void 0:E.valueOf();return d(oa(oa(oa({name:"entity"},e),"Business"===t?{placeholder:"Business Name...",label:"Business"}:"Person"===t?{placeholder:"First... Last...",label:"Person"}:t?{label:"Department"}:{}),(null==C?void 0:C.error)?{error:!0,helperText:C.error.message}:{}))}),[C.error,d,E]),S=(0,r.useCallback)((function(e,t,n){if(t instanceof G.ValueNode){var a=t.valueOf();if("string"!=typeof a&&"Person"===a.__typename&&(a.email||a.phone))return r.createElement(G.DefaultOption,{props:e,option:t,state:n,ListItemTextProps:{secondary:a.email||a.phone}})}return r.createElement(G.DefaultOption,{props:e,option:t,state:n})}),[]),D=(0,r.useMemo)((function(){var e;return E?((null===(e=C.data)||void 0===e?void 0:e.entities)||[]).reduce((function(e,t){switch(t.__typename){case"Business":t.departments.length&&e.push(new G.BranchNode(t,E)),e.push(t);break;case"Department":t.children.length&&e.push(new G.BranchNode(t,E)),e.push(t);break;case"Person":e.push(t)}return e}),[]):ba}),[null===(n=C.data)||void 0===n?void 0:n.entities,E]),I=(0,r.useMemo)((function(){var e=null==E?void 0:E.valueOf();return"Person"===e&&p?[!0,"Add Person:"]:"Business"===e&&f?[!0,"Add Business:"]:[!1]}),[E,p,f]),R=(0,x.Z)(I,2),_=R[0],F=R[1];return r.createElement(H(),oa(oa({getOptionSelected:va,getOptionLabel:ma},m),{},{ref:t,onBranchChange:Z,branch:E,loading:C.loading||u,renderInput:j,renderOption:S,inputValue:h,onInputChange:k,options:D,freeSolo:_,addFreeSoloText:F,autoSelect:null!=c&&c||_&&!e.value}))})),Oa=Symbol(),Ea=function(e){if(e&&(Array.isArray(e)?e:[e]).some((function(e){return e instanceof G.FreeSoloNode&&e.valueOf().length<3})))return RangeError("Too Short")},wa=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=void 0===o?"entity":o,i=e.defaultValue,u=e.form,c=e.renderInput,s=void 0===c?G.defaultInput:c,d=e.disabled,f=e.onBlur,p=e.onChange,m=e.onBranchChange,v=(0,V.Z)(e,ra),y=null!==(a=null===(n=Xn(u))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,h=sr({name:l,form:u,isEqual:sa,validator:Ea,defaultValue:i}),b=h.props,g=b.value,O=b.name,E=h.state,w=E.isTouched,P=E.errors,C=h.setValue,Z=h.setTouched,k=(0,r.useMemo)((function(){return g||(v.multiple?[]:null)}),[g,v.multiple]),j=(0,r.useCallback)((function(){Z(!0),f&&f.apply(void 0,arguments)}),[Z,f]),S=(0,r.useCallback)((function(e){return s(oa(oa({},e),{},{name:O},w&&P.length?{error:!0,helperText:P[0].message}:{}))}),[s,O,w,P]),D=(0,r.useCallback)((function(){var e;C(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),p&&p.apply(void 0,arguments)}),[p,C]),M=(0,r.useState)((function(){return k instanceof G.ValueNode?k.parent:Oa})),I=(0,x.Z)(M,2),R=I[0],_=I[1],N=(0,r.useCallback)((function(){_(arguments.length<=1?void 0:arguments[1]),m&&m.apply(void 0,arguments)}),[m]);return r.createElement(ga,oa(oa({},v),{},{value:k,disabled:y||d,ref:t,onChange:D,branch:R===Oa?k instanceof G.ValueNode?k.parent:null:R,onBranchChange:N,renderInput:S,onBlur:j}))})),Pa=["renderInput","onBranchChange","branch","loading"],Ca=["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"];function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Za(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ja,Sa,Da,Ma,Ia,Ra,_a,Na,xa=(0,_.Ps)(la||(la=(0,I.Z)(["\n  fragment CategoryInputOpt on Category {\n    __typename\n    id\n    name\n    type\n    children {\n      __typename\n      id\n    }\n    parent {\n      __typename\n      id\n    }\n  }\n"]))),Fa=(0,_.Ps)(ia||(ia=(0,I.Z)(["\n  fragment CategoryInputDefaultValue on Category {\n    ...CategoryInputOpt\n    ancestors {\n      ...CategoryInputOpt\n    }\n  }\n  ","\n"])),xa),Va=((0,_.Ps)(ua||(ua=(0,I.Z)(["\n  query CategoryInputDefaultValues($where: CategoriesWhere!) {\n    categories(where: $where) {\n      ...CategoryInputDefaultValue\n    }\n  }\n  ","\n"])),Fa),(0,_.Ps)(ca||(ca=(0,I.Z)(["\n  query CategoryInputOpts($where: CategoriesWhere!) {\n    categories(where: $where) {\n      ...CategoryInputOpt\n    }\n  }\n  ","\n"])),xa)),Aa=function(e,t){var n=function(e,t){return e&&t?e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode?e.valueOf()===t.valueOf():e.valueOf().id===t.valueOf().id:e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},Ta=function(e){return e instanceof G.FreeSoloNode?e.toString():e.valueOf().name},Ba=function(e,t){return!(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode||e.valueOf().id!==t.valueOf().id)},qa=(0,r.forwardRef)((function(e,t){var n,a=e.renderInput,o=void 0===a?G.defaultInput:a,l=e.onBranchChange,i=e.branch,u=e.loading,c=(0,V.Z)(e,Pa),s=(0,Vr.Z)({controlled:i,default:null,name:"CategoryInputBaseProps",state:"branch"}),d=(0,x.Z)(s,2),f=d[0],p=d[1],m=(0,N.a)(Va,(0,r.useMemo)((function(){return f?{skip:!1,variables:{where:{parent:{eq:f.valueOf().id},active:!0}}}:{skip:!1,variables:{where:{root:!0,active:!0}}}}),[f])),v=(0,r.useCallback)((function(){p(arguments.length<=1?void 0:arguments[1]),l&&l.apply(void 0,arguments)}),[l,p]),y=(0,r.useCallback)((function(e){return o(ka(ka({name:"category"},e),m.error?{error:!0,helperText:m.error.message}:{}))}),[m.error,o]),h=(0,r.useMemo)((function(){var e;return((null===(e=m.data)||void 0===e?void 0:e.categories)||[]).reduce((function(e,t){return t.children.length&&e.push(new G.BranchNode(t,f)),t.parent&&e.push(t),e}),[]).sort(Dr)}),[null===(n=m.data)||void 0===n?void 0:n.categories,f]);return r.createElement(H(),ka(ka({getOptionLabel:Ta,getOptionSelected:Ba},c),{},{ref:t,loading:m.loading||!!u,onBranchChange:v,branch:f,renderInput:y,options:h}))})),Wa=Symbol(),La="category",Ua=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,i=e.renderInput,u=void 0===i?G.defaultInput:i,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,V.Z)(e,Ca),m=null!==(a=null===(n=Xn(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=sr({name:La,form:l,isEqual:Aa,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),Z=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),k=(0,r.useCallback)((function(e){return u(ka(ka({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[u,b,O,E]),j=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[d,w]),S=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:Wa})),D=(0,x.Z)(S,2),M=D[0],I=D[1],R=(0,r.useCallback)((function(){I(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(qa,ka(ka({},p),{},{value:null!=C?C:null,disabled:m||c,ref:t,onChange:j,branch:M===Wa?C instanceof G.ValueNode?C.parent:null:M,onBranchChange:R,renderInput:k,onBlur:Z}))})),$a=n(6568),Ya=function(e){switch(e){case S.Visa:return"VISA";case S.MasterCard:return"MC";case S.AmericanExpress:return"AMEX";case S.Discover:return"DS"}},za=function(e){var t,n,r,a="";return(null===(t=e.aliases)||void 0===t?void 0:t.length)&&(null===(n=e.aliases[0])||void 0===n?void 0:n.name)&&(a=null===(r=e.aliases[0])||void 0===r?void 0:r.name),void 0!==e.type&&(a=a?"".concat(a," ").concat(Ya(e.type)):Ya(e.type)),e.trailingDigits&&(a=a?"".concat(a,"-").concat(e.trailingDigits):e.trailingDigits),a||JSON.stringify(e)},Ga=["accounts","autoSelect","entryType","isRefund","renderInput","inputValue","branch","onBranchChange","onInputChange","disabled"],Ha=["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"];function Ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ka(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ja(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xa(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function Xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var eo=Symbol("NULLISH"),to=(0,_.Ps)(ja||(ja=(0,I.Z)(["\n  fragment AccountCardPayMethodInputOpt on AccountCard {\n    __typename\n    id\n    active\n    type\n    trailingDigits\n    aliases {\n      name\n    }\n  }\n"]))),no=(0,_.Ps)(Sa||(Sa=(0,I.Z)(["\n  fragment AccountOwnerPayMethodInputOpt on Entity {\n    __typename\n    ... on Business {\n      id\n      name\n    }\n    ... on Department {\n      id\n      name\n    }\n    ... on Person {\n      id\n      personName: name {\n        first\n        last\n      }\n    }\n  }\n"]))),ro=(0,_.Ps)(Da||(Da=(0,I.Z)(["\n  fragment AccountCheckingPayMethodInputOpt on AccountChecking {\n    __typename\n    id\n    accountNumber\n    active\n    cards {\n      ...AccountCardPayMethodInputOpt\n    }\n    name\n    owner {\n      ...AccountOwnerPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"])),no,to),ao=(0,_.Ps)(Ma||(Ma=(0,I.Z)(["\n  fragment AccountCreditCardPayMethodInputOpt on AccountCreditCard {\n    __typename\n    id\n    active\n    cards {\n      ...AccountCardPayMethodInputOpt\n    }\n    name\n    owner {\n      ...AccountOwnerPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"])),no,to),oo=(0,_.Ps)(Ia||(Ia=(0,I.Z)(["\n  query AccountPayMethodInputOpts($where: AccountsWhere!) {\n    accounts(where: $where) {\n      ...AccountCheckingPayMethodInputOpt\n      ...AccountCreditCardPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"])),ro,ao),lo=(0,_.Ps)(Ra||(Ra=(0,I.Z)(["\n  fragment PayMethodDefaultValue on PaymentMethodInterface {\n    __typename\n    currency\n    ... on PaymentMethodCard {\n      card {\n        __typename\n        trailingDigits\n        type\n        ...AccountCardPayMethodInputOpt\n      }\n    }\n    ... on PaymentMethodCheck {\n      check {\n        __typename\n        checkNumber\n        ... on AccountCheck {\n          account {\n            ...AccountCheckingPayMethodInputOpt\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),to,ro),io=((0,_.Ps)(_a||(_a=(0,I.Z)(["\n  query PayMethodDefaultValueFromEntry($where: EntriesWhere!) {\n    entries(where: $where) {\n      __typename\n      id\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n    }\n  }\n  ","\n"])),lo),(0,_.Ps)(Na||(Na=(0,I.Z)(["\n  query PayMethodDefaultValueFromRefund($where: EntryRefundsWhere!) {\n    entryRefunds(where: $where) {\n      __typename\n      id\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n    }\n  }\n  ","\n"])),lo),function(e){return(0,r.useMemo)((function(){switch(null==e?void 0:e.__typename){case void 0:return;case"PaymentMethodCash":return new G.ValueNode(D.Cash);case"PaymentMethodCombination":return new G.ValueNode(D.Combination);case"PaymentMethodOnline":return new G.ValueNode(D.Online);case"PaymentMethodUnknown":return new G.ValueNode(D.Unknown);case"PaymentMethodCard":var t=null==e?void 0:e.card;return"AccountCard"===t.__typename?new G.ValueNode(t,new G.BranchNode(t.type,vo)):new G.FreeSoloNode(t.trailingDigits,new G.BranchNode(t.type,vo));case"PaymentMethodCheck":var n=null==e?void 0:e.check;return"AccountCheck"===n.__typename?new G.FreeSoloNode(n.checkNumber,new G.BranchNode(n.account,yo)):new G.FreeSoloNode(n.checkNumber,yo)}}),[e])}),uo=function(e,t){var n=function(e,t){var n,r;if(e&&t){var a=e.valueOf(),o=t.valueOf(),l=null===(n=e.parent)||void 0===n?void 0:n.valueOf(),i=null===(r=t.parent)||void 0===r?void 0:r.valueOf();if("string"==typeof l||"string"==typeof i){if(l!==i)return!1}else if((null==l?void 0:l.__typename)!==(null==i?void 0:i.__typename)||(null==l?void 0:l.id)!==(null==i?void 0:i.id))return!1;return"string"==typeof a?"string"==typeof o&&a.trim()===o.trim():"string"!=typeof o&&a.__typename===o.__typename&&a.id===o.id}return e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},co=function(e){var t,n=e.paymentMethodInput,r=null===(t=n.parent)||void 0===t?void 0:t.valueOf(),a=n.valueOf();if("string"==typeof r)switch(r){case D.Check:return{check:{currency:Z.Usd,check:{checkNumber:a}}};case S.AmericanExpress:case S.Discover:case S.MasterCard:case S.Visa:return"string"==typeof a?{card:{currency:Z.Usd,card:{type:r,trailingDigits:a}}}:{accountCard:{currency:Z.Usd,card:a.id}}}else{if("AccountChecking"===(null==r?void 0:r.__typename))return{accountCheck:{currency:Z.Usd,check:{account:r.id,checkNumber:a}}};switch(a){case D.Cash:return{cash:{currency:Z.Usd}};case D.Combination:return{combination:{currency:Z.Usd}};case D.Online:return{online:{currency:Z.Usd}};case D.Unknown:return{unknown:{currency:Z.Usd}}}}return null},so=function(e){var t;if(e instanceof G.FreeSoloNode)return e.toString();var n=e.valueOf();return"string"==typeof n?(0,$a.I)(n):"AccountChecking"===n.__typename?"Acct# ...".concat(null===(t=n.accountNumber)||void 0===t?void 0:t.slice(-4)):za(n)},fo=function(e){var t,n=so(e);if(e instanceof G.FreeSoloNode){var r=null===(t=e.parent)||void 0===t?void 0:t.valueOf();if(r)if("string"==typeof r)switch(r){case D.Check:return"CK-".concat(n);case S.Visa:case S.MasterCard:case S.AmericanExpress:case S.Discover:return"".concat(mo(r),"-").concat(n)}else if("AccountChecking"===r.__typename)return"CK-".concat(n);return n}var a=e.valueOf();return"string"==typeof a||a.__typename,n},po=function(e,t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return!1;var n=e.valueOf(),r=t.valueOf();return"string"==typeof n||"string"==typeof r?n===r:n.id===r.id},mo=function(e){switch(e){case S.Visa:return"VISA";case S.MasterCard:return"MC";case S.AmericanExpress:return"AMEX";case S.Discover:return"DS"}},vo=new G.BranchNode(D.Card),yo=new G.BranchNode(D.Check),ho=[vo,yo,D.Cash,D.Combination,D.Online],bo=[new G.BranchNode(S.Visa,vo),new G.BranchNode(S.MasterCard,vo),new G.BranchNode(S.AmericanExpress,vo),new G.BranchNode(S.Discover,vo)],go=(0,r.forwardRef)((function(e,t){var n=e.accounts,a=e.autoSelect,o=e.entryType,l=e.isRefund,i=e.renderInput,u=void 0===i?G.defaultInput:i,c=e.inputValue,s=e.branch,d=e.onBranchChange,f=e.onInputChange,p=e.disabled,m=(0,V.Z)(e,Ga),v=(null!=o?o:eo)===eo,y=(0,Vr.Z)({controlled:c,default:"",name:"PaymentMethodInputBase",state:"inputValue"}),h=(0,x.Z)(y,2),b=h[0],g=h[1],O=(0,Vr.Z)({controlled:s,default:null,name:"PaymentMethodInputBase",state:"branch"}),E=(0,x.Z)(O,2),w=E[0],P=E[1],C=(0,r.useState)({checkingAccountBranchOpts:[],cardBranchOpts:[],cardOpts:new Map}),Z=(0,x.Z)(C,2),k=Z[0],M=Z[1],I=(0,N.a)(oo,(0,r.useMemo)((function(){return{variables:{where:n},onCompleted:function(e){var t,n=[],r=new Map,a=Ja(e.accounts);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o.active){"AccountChecking"===o.__typename&&n.push(new G.BranchNode(o,yo));var l,i=Ja(o.cards);try{for(i.s();!(l=i.n()).done;){var u=l.value;if(u.active){var c=r.get(u.type)||[];c.push(u),r.set(u.type,c)}}}catch(e){i.e(e)}finally{i.f()}}}}catch(e){a.e(e)}finally{a.f()}M((function(e){return Qa(Qa({},e),{},{checkingAccountBranchOpts:n,cardOpts:r,cardBranchOpts:bo.filter((function(e){return r.has(e.valueOf())}))})}))}}}),[n])),R=(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];g(""),f&&f(t[0],"","reset");var r=function(){var e=t[1],n=t[2];if(o===j.Credit&&!l||!e)return t;switch(e.valueOf()){case D.Card:if(1===k.cardBranchOpts.length){var r=[].concat(t);return"up"===n?(r[1]=null,r):(r[1]=k.cardBranchOpts[0],r)}break;case D.Check:if(1===k.checkingAccountBranchOpts.length){var a=[].concat(t);return"up"===n?(a[1]=null,a):(a[1]=k.checkingAccountBranchOpts[0],a)}}return t}();P(r[1]),d&&d.apply(void 0,(0,F.Z)(r))}),[g,f,P,d,o,l,k.cardBranchOpts,k.checkingAccountBranchOpts]),_=(0,r.useCallback)((function(){g(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[g,f]),A=(0,r.useCallback)((function(e,t,n){return r.createElement(G.DefaultOption,{props:e,option:t,state:Qa(Qa({},n),{},{getOptionLabel:t instanceof G.BranchNode?n.getOptionLabel:fo})})}),[]),T=(0,r.useCallback)((function(e){return u(function(){var t=Qa(Qa({name:"paymentMethod"},v?{helperText:"Category Required"}:{}),e),n=I.error?{error:!0,helperText:I.error.message}:{},r=null==w?void 0:w.valueOf();if("string"==typeof r)switch(r){case D.Check:if(o===j.Credit)return Qa(Qa({},t),{},{placeholder:"####",InputProps:(0,G.mergeInputStartAdornment)("append","CK-",t.InputProps||{})},n);break;case S.AmericanExpress:case S.Discover:case S.MasterCard:case S.Visa:return Qa(Qa({},t),{},{placeholder:o!==j.Credit||l?void 0:"Last 4 Digits",InputProps:o===j.Debit?t.InputProps||{}:(0,G.mergeInputStartAdornment)("append","".concat(mo(r),"-"),t.InputProps||{})},n)}else if("AccountChecking"===(null==r?void 0:r.__typename))return Qa(Qa({},t),{},{placeholder:"####",InputProps:(0,G.mergeInputStartAdornment)("append","CK-",t.InputProps||{})},n);return t}())}),[l,o,v,u,I.error,w]),B=(0,r.useMemo)((function(){var e=null==w?void 0:w.valueOf();if(I.loading||v)return[[],!1];if(!e)return[ho,!1];if("string"!=typeof e)return[[],!0];switch(e){case D.Card:return[o!==j.Credit||l?k.cardBranchOpts:bo,!1];case D.Check:return o===j.Credit?[[],!0]:[k.checkingAccountBranchOpts,!1];case S.AmericanExpress:case S.Discover:case S.MasterCard:case S.Visa:return o!==j.Credit||l?[k.cardOpts.get(e)||[],!1]:[[],!0]}}),[w,I.loading,v,o,l,k.cardBranchOpts,k.checkingAccountBranchOpts,k.cardOpts]),q=(0,x.Z)(B,2),W=q[0],L=q[1];return I.loading?r.createElement(Sr,Qa({},e)):r.createElement(H(),Qa(Qa({getOptionLabel:so,getOptionSelected:po},m),{},{disabled:p||v,autoSelect:null!=a&&a||L,ref:t,options:W,onBranchChange:R,branch:w,renderOption:A,renderInput:T,freeSolo:L,onInputChange:_,inputValue:b}))})),Oo=Symbol(),Eo="paymentMethod",wo=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,i=e.renderInput,u=void 0===i?G.defaultInput:i,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,V.Z)(e,Ha),m=null!==(a=null===(n=Xn(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=sr({name:Eo,form:l,isEqual:uo,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),Z=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),k=(0,r.useCallback)((function(e){return u(Qa(Qa({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[u,b,O,E]),j=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[w,d]),S=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:Oo})),D=(0,x.Z)(S,2),M=D[0],I=D[1],R=(0,r.useCallback)((function(){I(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(go,Qa(Qa({},p),{},{value:null!=C?C:null,disabled:m||c,ref:t,onChange:j,branch:M===Oo?C instanceof G.ValueNode?C.parent:null:M,onBranchChange:R,renderInput:k,onBlur:Z}))})),Po=["name"];function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ko=function(e,t){return e===t},jo="description",So=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?jo:n,o=(0,V.Z)(e,Po);return ir({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,ko)}),[a]),form:e.form}),r.createElement(Mr,Zo(Zo({},o),{},{name:a,ref:t,type:"text"}))})),Do=["defaultValue","onChange","decimals","showDecimalZeros","onBlur","value"],Mo=["name","form","onBlur","onChange","disabled","defaultValue"];function Io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Io(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _o=function(e,t){return void 0===t?e.valueOf().toString():e.valueOf().toFixed(t)},No=(0,r.forwardRef)((function(e,t){var n=e.defaultValue,a=e.onChange,o=e.decimals,l=e.showDecimalZeros,i=void 0===l||l,u=e.onBlur,c=e.value,s=(0,V.Z)(e,Do),d=(0,Vr.Z)({controlled:c,default:n,name:"RationalInputBase",state:"value"}),f=(0,x.Z)(d,2),p=f[0],m=f[1],v=(0,r.useState)((function(){return p?_o(p,o):""})),y=(0,x.Z)(v,2),h=y[0],b=y[1];(0,r.useEffect)((function(){p?h&&p.equals(h)||b(_o(p,o)):h&&b("")}),[o,h,p]);var g=(0,r.useCallback)((function(e){var t,n=function(e,t){if((e=e.trim())&&void 0!==t){var n=e.split("."),r=(0,x.Z)(n,2),a=r[0],o=r[1],l=void 0===o?"":o;if(0===t)return a;if(l.length>t)return"".concat(a,".").concat(l.slice(0,t))}return e}(null!==(t=e.target.value)&&void 0!==t?t:"",o),r=function(){try{return n?new(z())(n):null}catch(e){return null}}();b(n),m(r),a&&a(e,r,n)}),[o,a,m]),O=(0,r.useCallback)((function(){void 0!==o&&i&&p&&b(_o(p,o)),u&&u.apply(void 0,arguments)}),[o,u,i,p]);return r.createElement(dt.Z,Ro(Ro({},s),{},{ref:t,onChange:g,onBlur:O,type:"number",value:h}))})),xo=function(e,t){return e.equals(t)},Fo=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.form,i=e.onBlur,u=e.onChange,c=e.disabled,s=e.defaultValue,d=(0,V.Z)(e,Mo),f=null!==(a=null===(n=Xn(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,p=sr({name:o,isEqual:xo,defaultValue:(0,r.useMemo)((function(){if(void 0!==s)return new(z())(s)}),[s]),form:l}),m=p.props,v=m.name,y=m.value,h=p.state,b=h.isTouched,g=h.errors,O=p.setValue,E=p.setTouched,w=(0,r.useCallback)((function(){E(!0),i&&i.apply(void 0,arguments)}),[E,i]),P=(0,r.useCallback)((function(){var e;O(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),u&&u.apply(void 0,arguments)}),[O,u]);return r.createElement(No,Ro(Ro(Ro({},d),b&&g.length?{error:!0,helperText:g[0].message}:{}),{},{ref:t,name:v,value:null!=y?y:null,disabled:f||c,onBlur:w,onChange:P}))})),Vo=n(4436),Ao=n(553),To=n(3258),Bo=n(9570),qo=n(585),Wo=["boolVariant","name","label","helperText","onChange","checked","error","id","color","inputRef","FormHelperTextProps","FormControlLabelProps","CheckboxProps","SwitchProps"],Lo=["name","defaultValue","form","onBlur","onChange","disabled"];function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo,zo=(0,r.forwardRef)((function(e,t){var n=e.boolVariant,a=void 0===n?"checkbox":n,o=e.name,l=e.label,i=e.helperText,u=e.onChange,c=e.checked,s=e.error,d=e.id,f=e.color,p=e.inputRef,m=e.FormHelperTextProps,v=void 0===m?{}:m,y=e.FormControlLabelProps,h=void 0===y?{}:y,b=e.CheckboxProps,g=void 0===b?{}:b,O=e.SwitchProps,E=void 0===O?{}:O,w=(0,V.Z)(e,Wo),P=i?v.id||(d?"".concat(d,"-helper-text"):void 0):void 0,C=l?h.id||(d?"".concat(d,"-label"):void 0):void 0;return r.createElement(Vo.Z,$o({ref:t,error:s},w),r.createElement(Ao.Z,$o({htmlFor:d,id:C,label:l,control:"checkbox"===a?r.createElement(To.Z,$o($o({id:d,"aria-describedby":P,color:f,onChange:u,checked:c,inputRef:p},g),{},{inputProps:$o({name:o},g.inputProps||{})})):r.createElement(Bo.Z,$o($o({id:d,"aria-describedby":P,color:f,onChange:u,checked:c,inputRef:p},E),{},{inputProps:$o({name:o},E.inputProps||{})}))},h)),i&&r.createElement(qo.Z,$o({id:P},v),i))})),Go=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.defaultValue,i=e.form,u=e.onBlur,c=e.onChange,s=e.disabled,d=(0,V.Z)(e,Lo),f=null!==(a=null===(n=Xn(i))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,p=sr({name:o,defaultValue:l,form:i}),m=p.props,v=m.name,y=m.value,h=p.state,b=h.isTouched,g=h.errors,O=p.setValue,E=p.setTouched,w=(0,r.useCallback)((function(){O(arguments.length<=1?void 0:arguments[1]),c&&c.apply(void 0,arguments)}),[O,c]),P=(0,r.useCallback)((function(){E(!0),u&&u.apply(void 0,arguments)}),[E,u]);return r.createElement(zo,$o($o($o({ref:t},d),b&&g.length?{error:!0,helperText:g[0].message}:{}),{},{name:v,checked:null!=y&&y,onChange:w,onBlur:P,disabled:f||s}))})),Ho=["allowNewSource"];function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ko(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jo=(0,Tt.Z)({adornedStart:{alignItems:"baseline"}}),Xo=new RangeError("Transaction cannot be recorded in the future."),el=function(e){if(e&&(0,Ft.Z)(e))return Xo},tl=(0,_.Ps)(Yo||(Yo=(0,I.Z)(["\n  query UpdateEntryDefaultValues($id: ID!, $deptRoot: DepartmentsWhere) {\n    entry(id: $id) {\n      __typename\n      id\n      date\n      dateOfRecord {\n        date\n      }\n      category {\n        ...CategoryInputDefaultValue\n      }\n      description\n      department {\n        ...DepartmentInputDefaultValue\n      }\n      source {\n        ...EntityInputDefaultValue\n      }\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n      reconciled\n      total\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"])),zr,Fa,fa,lo),nl="date",rl="dateOfRecord",al="source",ol="total",ll="reconciled",il="entry",ul=function(e,t){return(0,Vt.Z)((0,At.Z)(e),(0,At.Z)(t))},cl=n(7536),sl=["name","control","defaultValue","rules","shouldUnregister","onBlur","onChange","disabled","children","setValueAs"],dl=["onBlur","onChange","ref"];function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ml={keepMounted:!1,maxWidth:"lg",fullWidth:!0},vl=(Symbol(),{item:!0,lg:4,sm:6,xs:12}),yl=((0,r.forwardRef)((function(e,t){var n=e.name,a=e.control,o=e.defaultValue,l=e.rules,i=e.shouldUnregister,u=e.onBlur,c=e.onChange,s=e.disabled,d=e.children,f=e.setValueAs,p=(0,V.Z)(e,sl),m=(0,cl.bc)({name:n,control:a,defaultValue:o,rules:l,shouldUnregister:i}),v=m.field,y=v.onBlur,h=v.onChange,b=v.ref,g=(0,V.Z)(v,dl),O=m.fieldState,E=O.isTouched,w=O.error,P=m.formState.isSubmitting;return r.createElement(dt.Z,pl(pl(pl(pl({},p),g),{},{ref:t,disabled:s||P,innerRef:b},E&&w?{error:!0,helperText:w.message}:{}),{},{onBlur:(0,r.useCallback)((function(){y(),u&&u.apply(void 0,arguments)}),[y,u]),onChange:(0,r.useCallback)((function(){f?h(f.apply(void 0,arguments)):h.apply(void 0,arguments),c&&c.apply(void 0,arguments)}),[h,c,f])}),d)})),{TextFieldProps:{variant:"filled",fullWidth:!0},TreeSelectProps:{fullWidth:!0,renderInput:function(e){return(0,G.defaultInput)(pl({variant:"filled",fullWidth:!0},e))}},DateInputProps:pl({inputVariant:"filled",fullWidth:!0},{autoOk:!0,disableToolbar:!0,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",variant:"inline"})}),hl=function(){return yl},bl=["showLabels","insertNamePrefix","required","firstName","lastName"];function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var El=function(e,t){var n=t.form,r=t.name,a=n.getFieldValue(r,!1);if(void 0!==a)return/^[.A-Za-z\s]+$/i.test(a)?a.length<3?RangeError("Too Short"):void 0:new RangeError("Letters Only")},wl=function(e,t){return(null==e?void 0:e.trim())===(null==t?void 0:t.trim())},Pl="name",Cl=n(3868),Zl=n.n(Cl),kl=n(2900),jl=n.n(kl),Sl=["name"];function Dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ml(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Il=function(e,t){return(null==e?void 0:e.trim().toLowerCase())===(null==t?void 0:t.trim().toLowerCase())},Rl=function(e){if(e&&!Zl()(e))return new TypeError("Invalid Email")},_l={gmail_remove_dots:!1},Nl=function(e){var t=e.target.value.trim();return(Zl()(t)?jl()(t,_l):t)||void 0},xl="email",Fl=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?xl:n,o=(0,V.Z)(e,Sl);return ir({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,Il)}),[a]),form:e.form}),r.createElement(Mr,Ml(Ml({setValueAs:Nl},o),{},{name:a,validator:Rl,ref:t,type:"email"}))})),Vl=n(6311),Al=n(7044),Tl=["name"];function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wl=function(e,t){return(null==e?void 0:e.trim().toLowerCase())===(null==t?void 0:t.trim().toLowerCase())},Ll=function(e){if(e&&!(0,Vl.t)(e,"US"))return new TypeError("Invalid Phone Number")},Ul=function(e){var t,n=e.target.value.trim();return n?(null===(t=(0,Al._)(n,"US"))||void 0===t?void 0:t.format("NATIONAL"))||n:void 0},$l="phone",Yl=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?$l:n,o=(0,V.Z)(e,Tl);return ir({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,Wl)}),[a]),form:e.form}),r.createElement(Mr,ql(ql({setValueAs:Ul},o),{},{name:a,validator:Ll,ref:t,type:"tel"}))})),zl=["showLabels","insertNamePrefix","required","form","name","email","phone"];function Gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kl="person",Ql=n(5117),Jl=["showProgress","progressColor","className","children","size","disabled"],Xl=["showProgress","progressColor","className","children","disabled","size"];function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ni,ri,ai=(0,U.Z)((function(){return(0,Ql.Z)({asyncButton:{position:"relative"}})})),oi=r.forwardRef((function(e,t){var n=ai(),a=e.showProgress,o=void 0!==a&&a,l=e.progressColor,i=void 0===l?"inherit":l,u=e.className,c=void 0===u?"":u,s=e.children,d=e.size,f=e.disabled,p=(0,V.Z)(e,Jl),m=(0,r.useMemo)((function(){switch(d){case"medium":default:return 20;case"small":return 16;case"large":return 24}}),[d]);return r.createElement(pt.Z,ti(ti({},p),{},{ref:t,className:"".concat(c," ").concat(n.asyncButton),size:d,disabled:f||o}),o&&r.createElement(Ce.Z,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0},r.createElement(we.Z,{color:i,size:m})),s)}));function li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?li(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):li(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}r.forwardRef((function(e,t){var n=ai(),a=e.showProgress,o=void 0!==a&&a,l=e.progressColor,i=void 0===l?"inherit":l,u=e.className,c=void 0===u?"":u,s=e.children,d=e.disabled,f=e.size,p=(0,V.Z)(e,Xl);return r.createElement(nt.Z,ti(ti({},p),{},{ref:t,className:"".concat(c," ").concat(n.asyncButton),size:f,disabled:d||o}),o&&r.createElement(Ce.Z,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0},r.createElement(we.Z,{color:i,size:"small"===f?24:40})),s)}));var ui,ci=(0,_.Ps)(ni||(ni=(0,I.Z)(["\n  mutation NewEntry($newEntry: NewEntry!) {\n    addNewEntry(input: $newEntry) {\n      newEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"])),be),si=(0,_.Ps)(ri||(ri=(0,I.Z)(["\n  mutation UpdateEntry($updateEntry: UpdateEntry!) {\n    updateEntry(input: $updateEntry) {\n      updatedEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"])),be),di=function(e){var t=hl(),n=e.form,a=e.sourceValue,o=function(e){var t=e.showLabels,n=e.insertNamePrefix,a=e.required,o=e.form,l=e.name,i=e.email,u=e.phone,s=(0,V.Z)(e,zl),d=n?tr(Kl,n):Kl,f=nr(d),p=function(e){var t=e.showLabels,n=e.insertNamePrefix,a=e.required,o=e.firstName,l=e.lastName,i=(0,V.Z)(e,bl),u=n?tr(Pl,n):Pl,s=nr(u),d=(0,r.useMemo)((function(){return a?[Rr,El]:El}),[a]);return ir({isEqual:(0,r.useMemo)((function(){var e;return e={},(0,c.Z)(e,tr("first",u),wl),(0,c.Z)(e,tr("last",u),wl),e}),[u]),form:e.form}),{firstNameInput:r.createElement(Mr,Ol(Ol(Ol({label:t&&"First Name"},i),o),{},{validator:d,name:tr("first",u),type:"text"})),firstNameInputName:tr("first",s),lastNameInput:r.createElement(Mr,Ol(Ol(Ol({label:t&&"Last Name"},i),{},{required:a},l),{},{validator:d,name:tr("last",u),type:"text"})),lastNameInputName:tr("last",s)}}(Hl(Hl({showLabels:t,insertNamePrefix:d,required:a,form:o},s),l)),m=tr(xl,f),v=tr($l,f);return{name:p,emailInput:r.createElement(Qn,{namePrefix:d},r.createElement(Fl,Hl(Hl(Hl({label:t&&"Email"},s),i||{}),{},{form:o}))),emailInputName:m,phoneInput:r.createElement(Qn,{namePrefix:d},r.createElement(Yl,Hl(Hl(Hl({label:t&&"Phone"},s),u||{}),{},{form:o}))),phoneInputName:v}}(ii({form:n,required:!0,showLabels:!0,shouldUnregister:!0},t.TextFieldProps)),l=a.valueOf().trim();return ar((0,r.useMemo)((function(){var e;if(!l)return{defaultValues:{},form:n};var t=(0,Rt.parseName)(l),r=t.firstName,a=t.lastName;return{defaultValues:(e={},(0,c.Z)(e,o.name.firstNameInputName,new Mn(r)),(0,c.Z)(e,o.name.lastNameInputName,new Mn(a)),e),form:n}}),[n,l,o.name.firstNameInputName,o.name.lastNameInputName])),r.createElement(r.Fragment,null,r.createElement(Ce.Z,{marginTop:2.5,clone:!0},r.createElement(Mt.Z,{component:"h2",variant:"h6"},"Add New Person")),r.createElement(It.Z,{spacing:3,container:!0},r.createElement(It.Z,ii({},vl),o.name.firstNameInput),r.createElement(It.Z,ii({},vl),o.name.lastNameInput),r.createElement(It.Z,ii({},vl),o.phoneInput),r.createElement(It.Z,ii({},vl),o.emailInput)))},fi=(0,U.Z)({dialogContent:{position:"relative"}}),pi=function(e){var t,n=e.entryProps,a=e.dialogProps.onClose,o=e.formRef,l=e.refetchQueries,i=fi(),u=(0,r.useRef)(n.updateEntryId).current,s=!!u,d=(0,r.useRef)(null),f=(0,r.useRef)(null),p=(0,r.useState)(null),m=(0,x.Z)(p,2),v=m[0],y=m[1],h=(0,r.useRef)(null);h.current=v;var b=(0,xt.D)(ci,(0,r.useMemo)((function(){return(null==l?void 0:l.onNewEntry)?{refetchQueries:null==l?void 0:l.onNewEntry}:void 0}),[null==l?void 0:l.onNewEntry])),g=(0,x.Z)(b,1)[0],O=(0,xt.D)(si,(0,r.useMemo)((function(){return(null==l?void 0:l.onUpdateEntry)?{refetchQueries:null==l?void 0:l.onUpdateEntry}:void 0}),[null==l?void 0:l.onUpdateEntry])),E=(0,x.Z)(O,1)[0],w=Jn({onSubmit:{onSubmit:(0,r.useCallback)(function(){var e=(0,jt.Z)(Dt().mark((function e(t){var r,a,o,l,i,u,c,s,d,f,p,m,v,y,h,b,O,w;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.dirtyValues.entry,p=t.values.person,f||p){e.next=3;break}return e.abrupt("return");case 3:if(m=(null==f?void 0:f.source)||p?function(){var e,t,n;if(p)return{person:{name:{first:(null===(e=null==p?void 0:p.name)||void 0===e?void 0:e.first)||"",last:(null===(t=null==p?void 0:p.name)||void 0===t?void 0:t.last)||""},email:p.email||null,phone:p.phone||null}};if(!(null==f?void 0:f.source))return null;if(f.source instanceof G.FreeSoloNode)return"Business"===(null===(n=f.source.parent)||void 0===n?void 0:n.valueOf())?{business:{name:f.source.valueOf()}}:null;var r=f.source.valueOf();switch(r.__typename){case"Business":return{source:{type:k.Business,id:r.id}};case"Department":return{source:{type:k.Department,id:r.id}};case"Person":return{source:{type:k.Person,id:r.id}}}}():null,!n.updateEntryId){e.next=14;break}return v={id:n.updateEntryId,date:(null==f?void 0:f.date)?se(f.date):null,dateOfRecord:(null==f?void 0:f.dateOfRecord)?{date:se(f.dateOfRecord),overrideFiscalYear:!0}:null,department:(null===(r=null==f?void 0:f.department)||void 0===r?void 0:r.valueOf().id)||null,category:(null===(a=null==f?void 0:f.category)||void 0===a?void 0:a.valueOf().id)||null,paymentMethod:(null==f?void 0:f.paymentMethod)?co({paymentMethodInput:f.paymentMethod}):null,description:null!==(l=null===(o=null==f?void 0:f.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:null,total:(null==f?void 0:f.total)?ue(f.total):null,source:m,reconciled:null!==(i=null==f?void 0:f.reconciled)&&void 0!==i?i:null},e.next=8,E({variables:{updateEntry:v}});case 8:if(y=e.sent,!(null==(h=y.errors)?void 0:h.length)){e.next=12;break}throw new Error(h.map((function(e){return e.message})).join(".\n"));case 12:e.next=21;break;case 14:return b={date:se(null==f?void 0:f.date),dateOfRecord:(null==f?void 0:f.dateOfRecord)?{date:se(f.dateOfRecord),overrideFiscalYear:!0}:null,department:null===(u=null==f?void 0:f.department)||void 0===u?void 0:u.valueOf().id,category:null===(c=null==f?void 0:f.category)||void 0===c?void 0:c.valueOf().id,paymentMethod:co({paymentMethodInput:null==f?void 0:f.paymentMethod}),description:(null===(s=null==f?void 0:f.description)||void 0===s?void 0:s.trim())||null,total:ue(null==f?void 0:f.total),source:m,reconciled:null!==(d=null==f?void 0:f.reconciled)&&void 0!==d?d:null},e.next=17,g({variables:{newEntry:b}});case 17:if(O=e.sent,!(null==(w=O.errors)?void 0:w.length)){e.next=21;break}throw new Error(w.map((function(e){return e.message})).join(".\n"));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,n.updateEntryId,E]),onSuccess:(0,r.useCallback)((function(e){var t=e.event,n=e.form;d.current===h.current?a&&a(t,"success"):f.current===h.current&&n.reset({exclude:{submitCount:!0,submitted:!0}})}),[a]),finally:(0,r.useCallback)((function(){return y(null)}),[])},validateOn:"submit"});o.current=w,(0,r.useEffect)((function(){return function(){o.current=null}}),[o]);var P=hl(),C=function(e){var t,n,a,o,l,i,u,s,d,f,p,m,v,y,h,b,g,O=e.updateEntryId,E=e.required,w=e.form,P=e.showLabels,C=e.insertNamePrefix,Z=e.date,k=e.dateOfRecord,j=e.department,S=e.description,D=e.source,M=(D=void 0===D?{}:D).allowNewSource,I=(0,V.Z)(D,Ho),R=e.category,_=e.paymentMethod,x=e.total,A=e.reconciled,T=Jo(),B=(0,N.a)(tl,{skip:!O,variables:{id:O,deptRoot:j.root}}),q=B.loading,W=B.error,L=B.data,U=C?tr(il,C):il,$=nr(U),Y=ur({name:tr(La,il),form:w});lr((0,r.useMemo)((function(){return E?{validators:{entry:{date:[Rr,el],department:Rr,source:Rr,category:Rr,paymentMethod:Rr,total:[Rr,Nr]}},form:w}:{validators:{entry:{date:el,total:Nr}},form:w}}),[w,E])),ir((0,r.useMemo)((function(){return{isEqual:{"entry.date":ul,"entry.dateOfRecord":ul},form:w}}),[w]));var z=ur({name:tr(nl,il),form:w}),H=z.value,K=z.defaultValue;ar((0,r.useMemo)((function(){var e,t;return{defaultValues:(null===(t=null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)||!H&&!K?{}:(0,c.Z)({},tr(rl,il),new Mn(H||K)),form:w}}),[null===(n=null===(t=null==L?void 0:L.entry)||void 0===t?void 0:t.dateOfRecord)||void 0===n?void 0:n.date,H,K,w]));var Q,J=null!==(u=null===(i=null!==(o=null===(a=Y.value)||void 0===a?void 0:a.valueOf())&&void 0!==o?o:null===(l=Y.defaultValue)||void 0===l?void 0:l.valueOf())||void 0===i?void 0:i.type)&&void 0!==u?u:null,X=(0,r.useMemo)((function(){var e;return(null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.date)?de(L.entry.date):void 0}),[null===(s=null==L?void 0:L.entry)||void 0===s?void 0:s.date]),ee=(0,r.useMemo)((function(){var e,t;return(null===(t=null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)?de(L.entry.dateOfRecord.date):void 0}),[null===(f=null===(d=null==L?void 0:L.entry)||void 0===d?void 0:d.dateOfRecord)||void 0===f?void 0:f.date]),te=xr(W,Fr(P?"Department":void 0,null==R?void 0:R.renderInput)),ne=(Q=null===(p=null==L?void 0:L.entry)||void 0===p?void 0:p.department,(0,r.useMemo)((function(){return Q?new G.ValueNode(Q,Q.ancestors.reduceRight((function(e,t){return"Business"!==t.__typename&&e.push(t),e}),[]).reverse()):void 0}),[Q])),re=xr(W,Fr(P?"Category":void 0,null==R?void 0:R.renderInput)),ae=function(e){return(0,r.useMemo)((function(){return e?new G.ValueNode(e,(0,F.Z)(e.ancestors).reverse()):void 0}),[e])}(null===(m=null==L?void 0:L.entry)||void 0===m?void 0:m.category),oe=xr(W,Fr(P?"Source":void 0,null==I?void 0:I.renderInput)),le=function(e){return(0,r.useMemo)((function(){switch(null==e?void 0:e.__typename){case void 0:return;case"Business":return new G.ValueNode(e,ya);case"Department":return new G.ValueNode(e,e.ancestors.reduceRight((function(e,t){return new G.BranchNode(t,e)}),ya));case"Person":return new G.ValueNode(e,ha)}}),[e])}(null===(v=null==L?void 0:L.entry)||void 0===v?void 0:v.source),ie=xr(W,Fr(P?"Payment Method":void 0,null==_?void 0:_.renderInput)),ue=io(null===(y=null==L?void 0:L.entry)||void 0===y?void 0:y.paymentMethod),se=(0,r.useMemo)((function(){var e;return(null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.total)?ce(L.entry.total):void 0}),[null===(h=null==L?void 0:L.entry)||void 0===h?void 0:h.total]);return dr({loading:q,name:(0,r.useMemo)((function(){return[tr(nl,U),tr(rl,U),tr(ea,U),tr(jo,U),tr(al,U),tr(La,U),tr(Eo,U),tr(ol,U),tr(ll,U)]}),[U]),form:w}),{dateInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(yr,Qo(Qo({label:P&&"Date",disableFuture:!0,defaultValue:X},Z),{},{disabled:q||(null==Z?void 0:Z.disabled),name:nl,form:w})))}),[X,Z,U,w,q,P]),dateInputName:tr(nl,$),dateOfRecordInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(yr,Qo(Qo({label:P&&"Date of Record",defaultValue:ee},k),{},{disabled:q||(null==k?void 0:k.disabled),name:rl,form:w})))}),[ee,k,U,w,q,P]),dateOfRecordInputName:tr(rl,$),departmentInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(ta,Qo(Qo({defaultValue:ne},j),{},{disabled:q||j.loading,renderInput:te,multiple:!1,form:w})))}),[j,ne,te,U,w,q]),departmentInputName:tr(ea,$),sourceInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(wa,Qo(Qo({allowNewBusiness:M,allowNewPerson:M,defaultValue:le},I),{},{disabled:q||I.disabled,renderInput:oe,multiple:!1,name:al,form:w})))}),[M,U,w,q,I,le,oe]),sourceInputName:tr(al,$),categoryInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(Ua,Qo(Qo({defaultValue:ae},R),{},{disabled:q||(null==R?void 0:R.disabled),renderInput:re,multiple:!1,form:w})))}),[ae,R,re,U,w,q]),categoryInputName:tr(La,$),paymentMethodInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(wo,Qo(Qo({defaultValue:ue},_),{},{disabled:q||_.disabled,isRefund:!1,renderInput:ie,entryType:J,multiple:!1,form:w})))}),[U,J,w,q,ue,ie,_]),paymentMethodInputName:tr(Eo,$),descriptionInput:(0,r.useMemo)((function(){var e,t;return r.createElement(Qn,{namePrefix:U},r.createElement(So,Qo(Qo({label:P&&"Description",defaultValue:null!==(t=null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.description)&&void 0!==t?t:void 0},S),{},{name:jo,form:w})))}),[null===(b=null==L?void 0:L.entry)||void 0===b?void 0:b.description,S,U,w,P]),descriptionInputName:tr(jo,$),totalInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:U},r.createElement(Fo,Qo(Qo({label:P&&"Total",decimals:2,defaultValue:se},x),{},{InputProps:Qo({startAdornment:"$",classes:{adornedStart:T.adornedStart}},null==x?void 0:x.InputProps),disabled:q||(null==x?void 0:x.disabled),name:ol,form:w})))}),[T.adornedStart,U,w,q,P,se,x]),totalInputName:tr(ol,$),reconciledInput:(0,r.useMemo)((function(){var e,t;return r.createElement(Qn,{namePrefix:U},r.createElement(Go,Qo(Qo({label:P&&"Reconciled",defaultValue:null!==(t=null===(e=null==L?void 0:L.entry)||void 0===e?void 0:e.reconciled)&&void 0!==t?t:void 0},A),{},{disabled:q||(null==A?void 0:A.disabled),name:ll,form:w})))}),[null===(g=null==L?void 0:L.entry)||void 0===g?void 0:g.reconciled,U,w,q,A,P]),reconciledInputName:tr(ll,$)}}((0,r.useMemo)((function(){return ii(ii({form:w,showLabels:!0},n),{},{updateEntryId:u,required:!0,date:ii(ii({},P.DateInputProps),n.date),dateOfRecord:ii(ii({},P.DateInputProps),n.dateOfRecord),department:ii(ii({},P.TreeSelectProps),n.department),description:ii(ii({},P.TextFieldProps),n.description),source:ii(ii(ii({},P.TreeSelectProps),n.source),{},{allowNewSource:!0}),category:ii(ii({},P.TreeSelectProps),n.category),paymentMethod:ii(ii(ii({},P.TreeSelectProps),n.paymentMethod),{},{isRefund:!1}),total:ii(ii({},P.TextFieldProps),n.total),reconciled:ii(ii({},P.TextFieldProps),n.reconciled)})}),[n,w,P.DateInputProps,P.TextFieldProps,P.TreeSelectProps,u])),Z=ur({name:C.sourceInputName,form:w}).value,j=(0,r.useCallback)((function(){w.isSubmitting||a&&a.apply(void 0,arguments)}),[w.isSubmitting,a]),S=(0,r.useCallback)((function(){y(f.current)}),[]),D=w.submissionError;return r.createElement(Hn,{form:w},r.createElement(ct.Z,null,s?w.isSubmitting?"Updating Entry...":"Update Entry":w.isSubmitting?"Adding Entry...":w.submitCount>0&&w.submit?"Add Another Entry":"Add Entry"),D?r.createElement(st.Z,{dividers:!0},r.createElement(vt.Z,{color:"error"},"Submission Error:"),r.createElement(vt.Z,{color:"error"},D.message)):r.createElement(st.Z,{dividers:!0,className:i.dialogContent},w.loading&&r.createElement(Me,{zIndex:"modal"}),r.createElement(It.Z,{spacing:3,container:!0},r.createElement(It.Z,ii({},vl),C.dateInput),r.createElement(It.Z,ii({},vl),C.dateOfRecordInput),r.createElement(It.Z,ii({},vl),C.departmentInput),r.createElement(It.Z,ii({},vl),C.sourceInput),r.createElement(It.Z,ii({},vl),C.categoryInput),r.createElement(It.Z,ii({},vl),C.paymentMethodInput),r.createElement(It.Z,ii({},vl),C.descriptionInput),r.createElement(It.Z,ii({},vl),C.totalInput),s&&r.createElement(It.Z,ii({},vl),C.reconciledInput)),Z instanceof G.FreeSoloNode&&"Person"===(null===(t=Z.parent)||void 0===t?void 0:t.valueOf())&&r.createElement(di,{form:w,sourceValue:Z})),r.createElement(ft.Z,null,r.createElement(oi,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===d.current,disabled:w.isSubmitting||w.loading||!!D,type:"submit",variant:"contained",startIcon:r.createElement(_t.Z,null),ref:d,onClick:(0,r.useCallback)((function(){y(d.current)}),[])},s?"Update":"Add"),!s&&r.createElement(oi,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===f.current,disabled:w.isSubmitting||w.loading||!!D,type:"submit",variant:"outlined",startIcon:r.createElement(Nt.Z,null),ref:f,onClick:S},"Add & New"),r.createElement(pt.Z,{type:"reset",disabled:w.isSubmitting,variant:"text",onClick:(0,r.useCallback)((function(e){j(e,"cancel")}),[j])},D?"Ok":"Cancel")))},mi=(0,r.forwardRef)((function(e,t){var n,a=(0,r.useRef)(null),o=e.dialogProps.onClose,l=(0,r.useCallback)((function(){var e;(null===(e=a.current)||void 0===e?void 0:e.isSubmitting)||o&&o.apply(void 0,arguments)}),[o]);return r.createElement(ut.Z,ii(ii({},e.dialogProps),{},{onClose:l,PaperProps:(0,r.useMemo)((function(){return{component:"form",onSubmit:function(e){var t,n;e.preventDefault(),(null===(t=a.current)||void 0===t?void 0:t.isSubmitting)||null===(n=a.current)||void 0===n||n.handleSubmit(e)}}}),[]),ref:t,disableEscapeKeyDown:null===(n=a.current)||void 0===n?void 0:n.isSubmitting}),r.createElement(pi,ii(ii({},e),{},{formRef:a})))})),vi=n(313);function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bi,gi,Oi=(0,U.Z)({adornedStart:{alignItems:"baseline"}}),Ei="date",wi="total",Pi="reconciled",Ci="refund",Zi=(0,_.Ps)(ui||(ui=(0,I.Z)(["\n  fragment UpdateRefundDefaultValues on EntryRefund {\n    __typename\n    id\n    date\n    deleted\n    description\n    paymentMethod {\n      ...PayMethodDefaultValue\n    }\n    reconciled\n    total\n  }\n\n  query RefundEntryState($where: EntriesWhere!) {\n    entries(where: $where) {\n      __typename\n      id\n      date\n      category {\n        __typename\n        id\n        type\n      }\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n      total\n      refunds {\n        ...UpdateRefundDefaultValues\n      }\n    }\n  }\n  ","\n"])),lo);function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si,Di,Mi,Ii,Ri=(0,_.Ps)(bi||(bi=(0,I.Z)(["\n  mutation NewEntryRefund($newEntryRefund: NewEntryRefund!) {\n    addNewEntryRefund(input: $newEntryRefund) {\n      newEntryRefund {\n        __typename\n        id\n        entry {\n          ...GridEntry\n        }\n      }\n    }\n  }\n  ","\n"])),be),_i=(0,_.Ps)(gi||(gi=(0,I.Z)(["\n  mutation UpdateEntryRefund($updateEntryRefund: UpdateEntryRefund!) {\n    updateEntryRefund(input: $updateEntryRefund) {\n      updatedEntryRefund {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n"])),ye),Ni=(0,U.Z)({dialogContent:{position:"relative"}}),xi=function(e){var t=e.refundProps,n=e.formRef,a=e.dialogProps.onClose,o=e.refetchQueries,l=Ni(),i="updateRefundId"in t?[void 0,t.updateRefundId]:[t.entryId,void 0],u=(0,x.Z)(i,2),c=u[0],s=u[1],d=(0,r.useRef)(!!s).current,f=(0,r.useRef)(null),p=(0,r.useState)(null),m=(0,x.Z)(p,2),v=m[0],y=m[1],h=(0,r.useRef)(null);h.current=v;var b=(0,xt.D)(Ri,(0,r.useMemo)((function(){return(null==o?void 0:o.onNewEntryRefund)?{refetchQueries:null==o?void 0:o.onNewEntryRefund}:void 0}),[null==o?void 0:o.onNewEntryRefund])),g=(0,x.Z)(b,1)[0],O=(0,xt.D)(_i,(0,r.useMemo)((function(){return(null==o?void 0:o.onUpdateEntryRefund)?{refetchQueries:null==o?void 0:o.onUpdateEntryRefund}:void 0}),[null==o?void 0:o.onUpdateEntryRefund])),E=(0,x.Z)(O,1)[0],w=Jn({onSubmit:{onSubmit:(0,r.useCallback)(function(){var e=(0,jt.Z)(Dt().mark((function e(t){var n,r,a,o,l,i,u,d,f,p,m,v,y;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=13;break}if(i=t.dirtyValues.refund){e.next=4;break}return e.abrupt("return");case 4:return u={id:s,date:(null==i?void 0:i.date)?se(i.date):null,dateOfRecord:(null==i?void 0:i.dateOfRecord)?{date:se(i.dateOfRecord),overrideFiscalYear:!0}:null,paymentMethod:(null==i?void 0:i.paymentMethod)?co({paymentMethodInput:i.paymentMethod}):null,description:null!==(r=null===(n=null==i?void 0:i.description)||void 0===n?void 0:n.trim())&&void 0!==r?r:null,total:(null==i?void 0:i.total)?ue(i.total):null,reconciled:null!==(a=null==i?void 0:i.reconciled)&&void 0!==a?a:null},e.next=7,E({variables:{updateEntryRefund:u}});case 7:if(d=e.sent,!(null==(f=d.errors)?void 0:f.length)){e.next=11;break}throw new Error(f.map((function(e){return e.message})).join(".\n"));case 11:e.next=23;break;case 13:if(p=t.values.refund){e.next=16;break}return e.abrupt("return");case 16:return m={entry:c,date:se(null==p?void 0:p.date),dateOfRecord:(null==p?void 0:p.dateOfRecord)?{date:se(p.dateOfRecord),overrideFiscalYear:!0}:null,paymentMethod:co({paymentMethodInput:null==p?void 0:p.paymentMethod}),description:(null===(o=null==p?void 0:p.description)||void 0===o?void 0:o.trim())||null,total:ue(null==p?void 0:p.total),reconciled:null!==(l=null==p?void 0:p.reconciled)&&void 0!==l?l:null},e.next=19,g({variables:{newEntryRefund:m}});case 19:if(v=e.sent,!(null==(y=v.errors)?void 0:y.length)){e.next=23;break}throw new Error(y.map((function(e){return e.message})).join(".\n"));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,c,E,s]),onSuccess:(0,r.useCallback)((function(e){var t=e.event;f.current===h.current&&a&&a(t,"success")}),[a])},validateOn:"submit"});n.current=w,(0,r.useEffect)((function(){return function(){n.current=null}}),[n]);var P=hl(),C=function(e){var t,n,a=e.form,o=e.required,l=e.showLabels,i=e.insertNamePrefix,u=e.date,c=void 0===u?{}:u,s=e.paymentMethod,d=e.description,f=e.total,p=void 0===f?{}:f,m=e.reconciled,v=void 0===m?{}:m,y=Oi(),h="entryId"in e?[e.entryId,null]:[null,e.updateRefundId],b=(0,x.Z)(h,2),g=b[0],O=b[1],E=i?tr(Ci,i):Ci,w=nr(E),P=(0,N.a)(Zi,(0,r.useMemo)((function(){return g?{variables:{where:{id:{eq:g}}}}:O?{variables:{where:{refunds:{id:{eq:O}}}}}:{skip:!0}}),[g,O])),C=P.loading,Z=P.error,k=P.data;dr({loading:C,name:(0,r.useMemo)((function(){return[tr(Ei,E),tr(Eo,E),tr(wi,E),tr(Pi,E)]}),[E]),form:a});var j=(null==k?void 0:k.entries)||[],S=(0,x.Z)(j,1)[0],D=null!==(n=null===(t=null==S?void 0:S.category)||void 0===t?void 0:t.type)&&void 0!==n?n:null,M=(0,r.useMemo)((function(){var e;return[((null==S?void 0:S.refunds)||[]).reduce((function(t,n){return n.id===O?(e=n,t):n.deleted?t:t.sub(ce(n.total))}),(null==S?void 0:S.total)?ce(null==S?void 0:S.total):new(z())(0)),e]}),[null==S?void 0:S.refunds,null==S?void 0:S.total,O]),I=(0,x.Z)(M,2),R=I[0],_=I[1],F=(0,r.useMemo)((function(){return S?de(S.date):new Date("1900-01-01")}),[S]);lr((0,r.useMemo)((function(){var e=new RangeError("Refund cannot exceed $".concat(R.toString(2))),t=function(t){if(t&&t.compare(R)>0)return e},n=new RangeError("Refund cannot be given before originating transaction."),r=new RangeError("Refund cannot recorded in the future."),l=function(e){if(e)return(0,Ft.Z)(e)?r:(0,vi.Z)(e,(0,At.Z)(F))?n:void 0};return o?{validators:{refund:{date:[Rr,l],paymentMethod:Rr,total:[Rr,Nr,t]}},form:a}:{validators:{refund:{date:l,total:[Nr,t]}},form:a}}),[a,R,F,o]));var V=(0,r.useMemo)((function(){return(null==_?void 0:_.date)?de(_.date):void 0}),[null==_?void 0:_.date]),A=xr(Z,Fr(l?"Payment Method":void 0,null==s?void 0:s.renderInput)),T=io(function(){var e;return(null==_?void 0:_.paymentMethod)?null==_?void 0:_.paymentMethod:"PaymentMethodCard"===(null===(e=null==S?void 0:S.paymentMethod)||void 0===e?void 0:e.__typename)?null==S?void 0:S.paymentMethod:void 0}()),B=(0,r.useMemo)((function(){return(null==_?void 0:_.total)?ce(_.total):void 0}),[null==_?void 0:_.total]);return{error:Z,dateInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:E},r.createElement(yr,hi(hi({label:l&&"Date",defaultValue:V,minDate:F},c),{},{name:Ei,form:a})))}),[V,c,a,F,E,l]),dateInputName:tr(Ei,w),paymentMethodInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:E},r.createElement(wo,hi(hi({defaultValue:T},s),{},{isRefund:!0,renderInput:A,entryType:D,multiple:!1,form:a})))}),[D,a,T,A,s,E]),paymentMethodInputName:tr(Eo,w),descriptionInput:(0,r.useMemo)((function(){var e;return r.createElement(Qn,{namePrefix:E},r.createElement(So,hi(hi({label:l&&"Description",defaultValue:null!==(e=null==_?void 0:_.description)&&void 0!==e?e:void 0},d),{},{name:jo,form:a})))}),[E,l,null==_?void 0:_.description,d,a]),descriptionInputName:tr(jo,w),totalInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:E},r.createElement(Fo,hi(hi({label:l&&"Total",decimals:2,helperText:"Max $".concat(R.toString(2)),defaultValue:B},p),{},{InputProps:hi({startAdornment:"$",classes:{adornedStart:y.adornedStart}},null==p?void 0:p.InputProps),name:wi,form:a})))}),[y.adornedStart,a,R,E,l,B,p]),totalInputName:tr(wi,w),reconciledInput:(0,r.useMemo)((function(){return r.createElement(Qn,{namePrefix:E},r.createElement(Go,hi(hi({label:l&&"Reconciled",defaultValue:!!(null==_?void 0:_.reconciled)},v),{},{name:Pi,form:a})))}),[a,v,E,l,null==_?void 0:_.reconciled]),reconciledInputName:tr(Pi,w)}}((0,r.useMemo)((function(){return ji(ji({},t),{},{showLabels:!0,required:!0,form:w,date:ji(ji({},P.DateInputProps),t.date),dateOfRecord:ji(ji({},P.DateInputProps),t.date),paymentMethod:ji(ji({},P.TreeSelectProps),t.paymentMethod),description:ji(ji({},P.TextFieldProps),t.description),total:ji(ji({},P.TextFieldProps),t.total),reconciled:ji(ji({},P.TextFieldProps),t.reconciled)})}),[w,t,P.DateInputProps,P.TextFieldProps,P.TreeSelectProps])),Z=(0,r.useCallback)((function(){w.isSubmitting||a&&a.apply(void 0,arguments)}),[w.isSubmitting,a]),k=w.submissionError;return r.createElement(Hn,{form:w},r.createElement(ct.Z,null,d?w.isSubmitting?"Updating Refund...":"Update Refund":w.isSubmitting?"Adding Refund...":"Add Refund"),k?r.createElement(st.Z,{dividers:!0},r.createElement(vt.Z,{color:"error"},"Submission Error:"),r.createElement(vt.Z,{color:"error"},k.message)):r.createElement(st.Z,{dividers:!0,className:l.dialogContent},w.loading&&r.createElement(Me,{zIndex:"modal"}),r.createElement(It.Z,{spacing:3,container:!0},r.createElement(It.Z,ji({},vl),C.dateInput),r.createElement(It.Z,ji({},vl),C.paymentMethodInput),r.createElement(It.Z,ji({},vl),C.descriptionInput),r.createElement(It.Z,ji({},vl),C.totalInput),d&&r.createElement(It.Z,ji({},vl),C.reconciledInput))),r.createElement(ft.Z,null,r.createElement(oi,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===f.current,disabled:w.isSubmitting||w.loading||!!k,type:"submit",variant:"contained",startIcon:r.createElement(_t.Z,null),ref:f,onClick:(0,r.useCallback)((function(){y(f.current)}),[])},d?"Update":"Add"),r.createElement(pt.Z,{type:"reset",disabled:w.isSubmitting,variant:"text",onClick:(0,r.useCallback)((function(e){Z(e,"cancel")}),[Z])},w.submissionError?"Ok":"Cancel")))},Fi=(0,r.forwardRef)((function(e,t){var n,a=(0,r.useRef)(null),o=e.dialogProps.onClose,l=(0,r.useCallback)((function(){var e;(null===(e=a.current)||void 0===e?void 0:e.isSubmitting)||o&&o.apply(void 0,arguments)}),[o]);return r.createElement(ut.Z,ji(ji({},e.dialogProps),{},{onClose:l,PaperProps:(0,r.useMemo)((function(){return{component:"form",onSubmit:function(e){var t,n;e.preventDefault(),(null===(t=a.current)||void 0===t?void 0:t.isSubmitting)||null===(n=a.current)||void 0===n||n.handleSubmit(e)}}}),[]),disableEscapeKeyDown:null===(n=a.current)||void 0===n?void 0:n.isSubmitting,ref:t}),r.createElement(xi,ji(ji({},e),{},{formRef:a})))})),Vi=["deleteEntryId"],Ai=["deleteRefundId"];function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qi,Wi=(0,_.Ps)(Si||(Si=(0,I.Z)(["\n  query DeleteEntryState($id: ID!) {\n    entry(id: $id) {\n      __typename\n      id\n      total\n    }\n  }\n"]))),Li=(0,_.Ps)(Di||(Di=(0,I.Z)(["\n  query DeleteRefundState($id: ID!) {\n    entryRefund(id: $id) {\n      __typename\n      id\n      total\n    }\n  }\n"]))),Ui=(0,_.Ps)(Mi||(Mi=(0,I.Z)(["\n  mutation DeleteEntry($id: ID!) {\n    deleteEntry(id: $id) {\n      deletedEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"])),be),$i=(0,_.Ps)(Ii||(Ii=(0,I.Z)(["\n  mutation DeleteEntryRefund($id: ID!) {\n    deleteEntryRefund(id: $id) {\n      deletedEntryRefund {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n"])),ye),Yi=(0,U.Z)({dialogContent:{position:"relative"}}),zi=function(e){var t,n,a,o,l=Yi(),i="deleteEntryId"in e?[e.deleteEntryId,void 0,(0,V.Z)(e,Vi)]:"deleteRefundId"in e?[void 0,e.deleteRefundId,(0,V.Z)(e,Ai)]:[void 0,void 0,e],u=(0,x.Z)(i,3),c=u[0],s=u[1],d=u[2],f=(0,N.a)(Wi,(0,r.useMemo)((function(){return{skip:!c,variables:{id:c}}}),[c])),p=(0,N.a)(Li,(0,r.useMemo)((function(){return{skip:!s,variables:{id:s}}}),[s])),m=(0,xt.D)(Ui),v=(0,x.Z)(m,2),y=v[0],h=v[1],b=(0,xt.D)($i),g=(0,x.Z)(b,2),O=g[0],E=g[1],w=f.loading||p.loading||h.loading||E.loading,P=f.error||p.error||h.error||E.error,C=d.onClose,Z=(0,r.useCallback)((function(){w&&"success"!==(arguments.length<=1?void 0:arguments[1])||C&&C.apply(void 0,arguments)}),[w,C]);e.handleCloseRef.current=Z;var k=(0,r.useRef)(null);return r.createElement(r.Fragment,null,r.createElement(ct.Z,null,h.loading||E.loading?s?"Deleting refund...":"Deleting entry...":s?"Delete refund":"Delete entry"),r.createElement(st.Z,{className:l.dialogContent},(0,r.useMemo)((function(){var e,t,n,a,o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),l=(null===(t=null===(e=null==f?void 0:f.data)||void 0===e?void 0:e.entry)||void 0===t?void 0:t.total)||(null===(a=null===(n=null==p?void 0:p.data)||void 0===n?void 0:n.entryRefund)||void 0===a?void 0:a.total),i="Delete ".concat(s?"Refund":"Entry");return P?r.createElement(vt.Z,{color:"error"},P.message):l?"".concat(i," in the amount of ").concat(o.format(ce(l).valueOf())):i}),[null===(n=null===(t=null==f?void 0:f.data)||void 0===t?void 0:t.entry)||void 0===n?void 0:n.total,s,null===(o=null===(a=null==p?void 0:p.data)||void 0===a?void 0:a.entryRefund)||void 0===o?void 0:o.total,P]),(f.loading||p.loading||w)&&r.createElement(Me,{zIndex:"modal"})),r.createElement(ft.Z,null,r.createElement(oi,{color:"primary",showProgress:w,disabled:!c&&!s||w||!!P,type:"submit",variant:"contained",startIcon:r.createElement(wt.Z,null),ref:k,onClick:(0,r.useCallback)(function(){var e=(0,jt.Z)(Dt().mark((function e(t){var n,r,a;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return e.next=3,y({variables:{id:c}});case 3:r=e.sent,n=r.errors,e.next=12;break;case 7:if(!s){e.next=12;break}return e.next=10,O({variables:{id:s}});case 10:a=e.sent,n=a.errors;case 12:(null==n?void 0:n.length)||Z(t,"success");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,c,O,s,Z])},"Delete"),r.createElement(pt.Z,{type:"reset",disabled:w,variant:"text",onClick:(0,r.useCallback)((function(e){Z(e,"cancel")}),[Z])},P?"Ok":"Cancel")))},Gi=function(e){var t=(0,r.useRef)();return r.createElement(ut.Z,Bi(Bi({},e),{},{onClose:(0,r.useCallback)((function(){t.current&&t.current.apply(t,arguments)}),[])}),r.createElement(zi,Bi(Bi({},e),{},{handleCloseRef:t})))};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qi=(0,U.Z)({dialogContent:{position:"relative"}}),Ji=(0,_.Ps)(qi||(qi=(0,I.Z)(["\n  mutation ReconcileEntries($input: ReconcileEntries!) {\n    reconcileEntries(input: $input) {\n      reconciledEntries {\n        ...GridEntry\n      }\n      reconciledRefunds {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n  ","\n"])),be,ye),Xi=function(e){var t=Qi(),n=e.entryIds,a=e.refundIds,o=e.dialogProps.onClose,l=(0,xt.D)(Ji,(0,r.useMemo)((function(){return{variables:{input:{entries:n,refunds:a}}}}),[n,a])),i=(0,x.Z)(l,2),u=i[0],c=i[1],s=c.loading,d=c.error,f=(0,r.useCallback)((function(){s&&"success"!==(arguments.length<=1?void 0:arguments[1])||o&&o.apply(void 0,arguments)}),[s,o]);e.handleCloseRef.current=f;var p=(0,r.useRef)(null);return r.createElement(r.Fragment,null,r.createElement(ct.Z,null,"Reconcile"),r.createElement(st.Z,{className:t.dialogContent},(0,r.useMemo)((function(){if(d)return r.createElement(vt.Z,{color:"error"},d.message);var e="";return(null==n?void 0:n.length)&&(e="".concat(n.length," ").concat(1===n.length?"entry":"entries")),(null==a?void 0:a.length)&&(e+="".concat(e?" and ":"").concat(a.length," ").concat(1===a.length?"refund":"refunds")),"".concat(e,".")}),[null==n?void 0:n.length,d,null==a?void 0:a.length]),s&&r.createElement(Me,{zIndex:"modal"})),r.createElement(ft.Z,null,r.createElement(oi,{color:"primary",showProgress:s,disabled:!(null==n?void 0:n.length)&&!(null==a?void 0:a.length)||s||!!d,type:"submit",variant:"contained",startIcon:r.createElement(gt.Z,null),ref:p,onClick:(0,r.useCallback)(function(){var e=(0,jt.Z)(Dt().mark((function e(t){var n,r;return Dt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:n=e.sent,(null==(r=n.errors)?void 0:r.length)||f(t,"success");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,u])},"Reconcile"),r.createElement(pt.Z,{type:"reset",disabled:s,variant:"text",onClick:(0,r.useCallback)((function(e){f(e,"cancel")}),[f])},d?"Ok":"Cancel")))},eu=function(e){var t=(0,r.useRef)();return r.createElement(ut.Z,Ki(Ki({},e.dialogProps),{},{onClose:(0,r.useCallback)((function(){t.current&&t.current.apply(t,arguments)}),[])}),r.createElement(Xi,Ki(Ki({},e),{},{handleCloseRef:t})))},tu=["allSelected","tableColumn","tableRow","disabled","onToggle","someSelected","toggleConfirmReconcile"],nu=["addedRows","addRow","startEditRows","changeAddedRow","deleteRows"],ru=["addRow"],au=["filters","hasNamedFilters","hasColumnFilters","namedFilters","namedFilterChanges","loadedNamedFilter","addedNamedFilters","deletedNamedFilters","clearColumnFilters","addNamedFilters","cancelAddedNamedFilters","commitAddedNamedFilters","changeAddedNamedFilter","changeNamedFilter","cancelChangedNamedFilters","commitChangedNamedFilters","loadNamedFilter","deleteNamedFilters","cancelDeletedNamedFilters","commitDeletedNamedFilters"];function ou(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ou(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var iu=function(e){return r.createElement(et.Z,lu({},e),r.createElement("path",{d:"M2,15V12H5V10L9,13.5L5,17V15H2M22,8.7V10H10V8.7L16,5L22,8.7M10,17H22V19H10V17M15,11H17V16H15V11M11,11H13V16H11V11M19,11H21V16H19V11Z"}))},uu=function(e){return r.createElement(et.Z,lu({},e),r.createElement("path",{d:"M15,15V12H18V10L22,13.5L18,17V15H15M14,8.7V10H2V8.7L8,5L14,8.7M2,17H14V19H2V17M7,11H9V16H7V11M3,11H5V16H3V11M11,11H13V16H11V11Z"}))},cu=function(){},su=function(e){var t=e.reconcileMode,n=e.upsertEntryProps,a=e.upsertRefundProps,o=e.deleteEntryProps,l=e.reconcileEntriesProps,i=(0,r.useState)(!!t),u=(0,x.Z)(i,2),c=u[0],s=u[1],d=(0,r.useState)(!1),f=(0,x.Z)(d,2),p=f[0],m=f[1];return r.createElement(Re.Sy,{name:"EntryActionState"},r.createElement(B.fP,null),r.createElement(Re.aD,{name:"reconcileMode",value:c}),r.createElement(Re.aD,{name:"confirmReconcile",value:p}),r.createElement(Re.aU,{name:"toggleConfirmReconcile",action:(0,r.useCallback)((function(e,t){var n=t.selection;t.reconcileMode&&e&&!n.length||m(e)}),[])}),r.createElement(Re.aD,{name:"selection",computed:(0,r.useCallback)((function(e){var t=e.selection;return e.reconcileMode?t:[]}),[])}),r.createElement(B.xO,null),r.createElement(Re.aU,{name:"changeReconcileMode",action:(0,r.useCallback)((function(e,t,n){var r=t.selection,a=n.toggleSelectAll;s(e),r.length&&a(!1)}),[])}),r.createElement(Re.aD,{name:"rows",computed:(0,r.useCallback)((function(e){var t=e.rows;return e.reconcileMode?t.filter((function(e){return!e.reconciled})):t}),[])}),r.createElement(B.C7,{onCommitChanges:cu}),r.createElement(Re.aD,{name:"upsertEntryProps",value:n}),r.createElement(Re.aD,{name:"upsertRefundProps",value:a}),r.createElement(Re.aD,{name:"deleteEntryProps",value:o}),r.createElement(Re.aD,{name:"reconcileEntriesProps",value:l}))},du=r.memo((function(e){e.allSelected,e.tableColumn,e.tableRow,e.disabled,e.onToggle;var t=e.someSelected,n=e.toggleConfirmReconcile,a=(0,V.Z)(e,tu);return r.createElement(tt.Z,lu(lu({},a),{},{align:"center",padding:"checkbox",variant:"head"}),r.createElement(nt.Z,{onClick:(0,r.useCallback)((function(){return n(!0)}),[n]),disabled:!t,size:"small",color:"secondary"},r.createElement(gt.Z,null)))})),fu=r.memo((function(e){var t=e.addedRows,n=e.addRow,a=e.startEditRows,o=e.changeAddedRow,l=e.deleteRows,i=(0,V.Z)(e,nu),u=r.useState(null),c=(0,x.Z)(u,2),s=c[0],d=c[1],f=Boolean(s),p=e.row,m=(0,r.useCallback)((function(){d(null),a({rowIds:[p.id]})}),[p.id,a]),v=(0,r.useCallback)((function(){d(null),n(),o({rowId:t.length,change:{__typename:"EntryRefund",id:p.id}})}),[n,t.length,o,p.id]),y=(0,r.useCallback)((function(){d(null),l({rowIds:[p.id]})}),[l,p.id]);return r.createElement(q.Al.Cell,lu({},i),r.createElement(nt.Z,{onClick:function(e){d(e.currentTarget)}},r.createElement(Ot.Z,null)),r.createElement(rt.Z,{anchorEl:s,keepMounted:!0,open:f,onClose:function(){d(null)}},r.createElement(at.Z,{onClick:m},r.createElement(ot.Z,null,r.createElement(Et.Z,{fontSize:"small"})),r.createElement(lt.Z,{primary:"Edit"})),"Entry"===p.__typename&&(p.category.type===j.Credit?r.createElement(at.Z,{onClick:v},r.createElement(ot.Z,null,r.createElement(uu,{fontSize:"small"})),r.createElement(lt.Z,{primary:"Give Refund"})):r.createElement(at.Z,{onClick:v},r.createElement(ot.Z,null,r.createElement(iu,{fontSize:"small"})),r.createElement(lt.Z,{primary:"Add Refund"}))),r.createElement(at.Z,{onClick:y},r.createElement(ot.Z,null,r.createElement(wt.Z,{fontSize:"small"})),r.createElement(lt.Z,{primary:"Delete"}))))})),pu=r.memo((function(e){var t=e.addRow,n=(0,V.Z)(e,ru),a=(0,r.useCallback)((function(){return t()}),[t]);return r.createElement(q.Al.HeaderCell,lu({},n),r.createElement(nt.Z,{onClick:a,color:"secondary",size:"medium"},r.createElement(Pt.Z,null)))})),mu={component:"form",onSubmit:function(e){e.preventDefault()}},vu=function(e){var t,n,a=e.filters,o=e.hasNamedFilters,l=e.hasColumnFilters,i=e.namedFilters,u=e.namedFilterChanges,c=e.loadedNamedFilter,s=e.addedNamedFilters,d=e.deletedNamedFilters,f=e.clearColumnFilters,p=e.addNamedFilters,m=e.cancelAddedNamedFilters,v=e.commitAddedNamedFilters,y=e.changeAddedNamedFilter,h=e.changeNamedFilter,b=e.cancelChangedNamedFilters,g=e.commitChangedNamedFilters,O=e.loadNamedFilter,E=e.deleteNamedFilters,w=e.cancelDeletedNamedFilters,P=e.commitDeletedNamedFilters,C=(0,V.Z)(e,au),Z=(0,x.Z)(s,1)[0],k=(0,r.useCallback)((function(){p([{name:"",filters:a}])}),[p,a]),j=(0,r.useCallback)((function(e){y({name:Z.name,change:{name:e.target.value||""}})}),[null==Z?void 0:Z.name,y]),S=(0,r.useCallback)((function(){m(s.map((function(e){return e.name})))}),[s,m]),D=(0,r.useState)(new Set),M=(0,x.Z)(D,2),I=M[0],R=M[1],_=(0,r.useCallback)((function(){h(),L(!1)}),[h]),N=(0,r.useCallback)((function(){b(),w()}),[b,w]),A=(0,r.useCallback)((function(){g(),P()}),[g,P]),T=(0,r.useState)(!1),B=(0,x.Z)(T,2),W=B[0],L=B[1],U=(0,r.useCallback)((function(){L(!0)}),[]),$=(0,r.useCallback)((function(){L(!1)}),[]),Y=(0,r.useRef)(null),z=(0,r.useMemo)((function(){return{onExited:function(){R(new Set)}}}),[]);return r.createElement(q.Al.HeaderCell,lu({},C),l?r.createElement(r.Fragment,null,r.createElement(it.ZP,{title:"Clear Filters"},r.createElement(nt.Z,{size:"medium",onClick:f},r.createElement(Ct.Z,null))),!c&&r.createElement(it.ZP,{title:"Save Filter"},r.createElement(nt.Z,{size:"medium",onClick:k},r.createElement(Zt.Z,null))),r.createElement(ut.Z,{open:!!Z,maxWidth:"xs",fullWidth:!0,keepMounted:!1,PaperProps:mu},r.createElement(ct.Z,null,"Save Filter"),r.createElement(st.Z,null,r.createElement(dt.Z,{variant:"filled",autoFocus:!0,margin:"dense",id:"name",label:"Filter Name",type:"text",fullWidth:!0,value:(null==Z?void 0:Z.name)||"",onChange:j})),r.createElement(ft.Z,null,r.createElement(pt.Z,{type:"submit",variant:"contained",disabled:!(null==Z?void 0:Z.name),onClick:function(){v({load:Z.name})},color:"primary"},"Save"),r.createElement(pt.Z,{onClick:S},"Cancel")))):o?r.createElement(r.Fragment,null,r.createElement(it.ZP,{title:"Saved Filters"},r.createElement(nt.Z,{ref:Y,size:"medium",onClick:U},r.createElement(kt.Z,null))),r.createElement(rt.Z,{anchorEl:Y.current,keepMounted:!1,open:W&&Boolean(Y.current),onClose:$},((n=Object.keys(i||{}).map((function(e){return r.createElement(at.Z,{key:e,selected:e===c,onClick:function(){L(!1),O(e)}},e)}))).push(r.createElement(mt.Z,{key:"_divider"}),r.createElement(at.Z,{key:"_edit",onClick:_},r.createElement(ot.Z,null,r.createElement(Et.Z,{fontSize:"small"})),r.createElement(vt.Z,{variant:"inherit"},"Edit"))),n)),r.createElement(ut.Z,{open:!!u,maxWidth:"xs",fullWidth:!0,keepMounted:!1,TransitionProps:z,PaperProps:mu},r.createElement(st.Z,null,r.createElement(ct.Z,null,"Edit Filters"),r.createElement(yt.Z,null,(t=new Set((0,F.Z)(Object.keys(i||{}))),Object.keys(u||{}).forEach((function(e){return t.add(e)})),(0,F.Z)(t).reduce((function(e,t){var n,a;if(d.includes(t))return e;var o=null!==(a=null===(n=(u||{})[t])||void 0===n?void 0:n.name)&&void 0!==a?a:t;return e.push(r.createElement(ht.Z,{button:!0,key:t,onClick:function(){return R((function(e){return new Set([].concat((0,F.Z)(e),[t]))}))}},I.has(t)?r.createElement(dt.Z,{variant:"standard",margin:"none",size:"small",fullWidth:!0,autoFocus:!0,value:o,onBlur:function(){return R((function(e){var n=new Set((0,F.Z)(e));return n.delete(t),n}))},onChange:function(e){return h({name:t,change:{name:e.target.value||""}})}}):r.createElement(r.Fragment,null,r.createElement(lt.Z,{primary:o}),r.createElement(bt.Z,{onClick:function(e){e.stopPropagation(),E([t])}},r.createElement(nt.Z,{edge:"end"},r.createElement(wt.Z,null)))))),e}),[])))),r.createElement(ft.Z,null,r.createElement(pt.Z,{type:"submit",disabled:!(Object.keys(u||{}).length||d.length),variant:"contained",color:"primary",onClick:A},"Save"),r.createElement(pt.Z,{onClick:N},"Cancel")))):null)},yu=r.memo((function(e){return Eu(e)?r.createElement(vu,lu({},e)):r.createElement(q.cO.StubHeaderCell,lu({},e))})),hu=[{name:"EntryActionState",optional:!1}],bu=function(e){return e.tableRow.type===q.cO.ROW_TYPE},gu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.cO.ROW_TYPE&&n.type===q.Al.COLUMN_TYPE},Ou=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.KA.ROW_TYPE&&n.type===q.Al.COLUMN_TYPE},Eu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===B.B0.ROW_TYPE&&n.type===q.Al.COLUMN_TYPE},wu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.KA.ROW_TYPE&&n.type===q.vN.COLUMN_TYPE},Pu=function(){return r.createElement(Re.Sy,{name:"EntryActionDialog",dependencies:hu},r.createElement(q.vN,{showSelectAll:!0,selectByRowClick:!0,highlightRow:!0,showSelectionColumn:!0,headerCellComponent:du}),r.createElement(q.Al,{cellComponent:fu,headerCellComponent:pu,showEditCommand:!0,showAddCommand:!0,showDeleteCommand:!0}),r.createElement(q.a$,{leftColumns:(0,r.useMemo)((function(){return[q.Al.COLUMN_TYPE]}),[])}),r.createElement(Re.aD,{name:"tableColumns",computed:(0,r.useCallback)((function(e){var t=e.tableColumns,n=e.reconcileMode;return t.reduce((function(e,t){var r;return n?t.type!==q.Al.COLUMN_TYPE&&"reconciled"!==(null===(r=t.column)||void 0===r?void 0:r.name)&&e.push(t.type===q.vN.COLUMN_TYPE?lu(lu({},t),{},{fixed:"left"}):t):t.type!==q.vN.COLUMN_TYPE&&e.push(t.type===q.Al.COLUMN_TYPE?lu(lu({},t),{},{fixed:"left"}):t),e}),[])}),[])}),r.createElement(Re.aD,{name:"hiddenColumnNames",computed:(0,r.useCallback)((function(e){var t=e.hiddenColumnNames;return e.reconcileMode?(0,F.Z)(new Set([].concat((0,F.Z)(t),["reconciled"]))):t}),[])}),r.createElement(Re.aD,{name:"isColumnTogglingEnabled",computed:(0,r.useCallback)((function(e){var t=e.isColumnTogglingEnabled,n=e.reconcileMode;return n?function(e){return(!n||"reconciled"!==e)&&t(e)}:t}),[])}),r.createElement(Re.YS,{name:"tableRow",predicate:bu},(0,r.useCallback)((function(e){return r.createElement(Re.eT,null,(function(t,n){var a=t.reconcileMode,o=n.startEditRows,l=e.tableRow.row;return r.createElement(Re.jf,{params:lu(lu({},e),a?{}:{onDoubleClick:function(){o({rowIds:[l.id]})}})})}))}),[])),r.createElement(Re.YS,{name:"tableCell",predicate:gu},(0,r.useCallback)((function(e){return r.createElement(Re.eT,null,(function(t,n){var a=t.addedRows,o=n.addRow,l=n.startEditRows,i=n.changeAddedRow,u=n.deleteRows;return r.createElement(Re.jf,{params:lu(lu({},e),{},{addRow:o,addedRows:a,startEditRows:l,changeAddedRow:i,deleteRows:u})})}))}),[])),r.createElement(Re.YS,{name:"tableCell",predicate:Ou},(0,r.useCallback)((function(e){return r.createElement(Re.eT,null,(function(t,n){var a=n.addRow;return r.createElement(Re.jf,{params:lu(lu({},e),{},{addRow:a})})}))}),[])),r.createElement(Re.YS,{name:"tableCell",predicate:Eu},(0,r.useCallback)((function(e){return r.createElement(Re.eT,null,(function(t,n){var a=t.filters,o=t.hasColumnFilters,l=t.hasNamedFilters,i=t.namedFilters,u=t.loadedNamedFilter,c=t.addedNamedFilters,s=t.namedFilterChanges,d=t.deletedNamedFilters,f=n.clearColumnFilters,p=n.addNamedFilters,m=n.cancelAddedNamedFilters,v=n.commitAddedNamedFilters,y=n.changeAddedNamedFilter,h=n.changeNamedFilter,b=n.cancelChangedNamedFilters,g=n.commitChangedNamedFilters,O=n.loadNamedFilter,E=n.deleteNamedFilters,w=n.cancelDeletedNamedFilters,P=n.commitDeletedNamedFilters;return r.createElement(Re.jf,{params:lu(lu({},e),{},{filters:a,hasNamedFilters:l,hasColumnFilters:o,namedFilters:i,loadedNamedFilter:u,addedNamedFilters:c,namedFilterChanges:s,deletedNamedFilters:d,clearColumnFilters:f,addNamedFilters:p,cancelAddedNamedFilters:m,commitAddedNamedFilters:v,changeAddedNamedFilter:y,changeNamedFilter:h,cancelChangedNamedFilters:b,commitChangedNamedFilters:g,loadNamedFilter:O,deleteNamedFilters:E,cancelDeletedNamedFilters:w,commitDeletedNamedFilters:P})})}))}),[])),r.createElement(Re.YS,{name:"tableCell",predicate:wu},(0,r.useCallback)((function(e){return r.createElement(Re.eT,null,(function(t,n){var a=n.toggleConfirmReconcile;return r.createElement(Re.jf,{params:lu(lu({},e),{},{toggleConfirmReconcile:a})})}))}),[])),r.createElement(Re.YS,{name:"entryActionDialog"},r.createElement(Re.eT,null,(0,r.useCallback)((function(e,t){var n,a=e.rows,o=e.addedRows,l=e.editingRowIds,i=e.deletedRowIds,u=e.upsertEntryProps,c=e.upsertRefundProps,s=e.deleteEntryProps,d=e.reconcileEntriesProps,f=e.confirmReconcile,p=e.selection,m=t.stopEditRows,v=t.cancelAddedRows,y=t.cancelChangedRows,h=t.cancelDeletedRows,b=t.toggleConfirmReconcile,g=t.toggleSelectAll,O=f,E=!O&&!!i.length,w=!O&&!E&&!!o.length,P=w?null===(n=o[0])||void 0===n?void 0:n.id:E?i[0]:l[0],C=w?o[0]:a.find((function(e){return e.id===P})),Z=!!C||O,k="EntryRefund"===(null==C?void 0:C.__typename),j=function(e,t){O?(b(!1),"success"===t&&g(!1)):w?v({rowIds:o.map((function(e,t){return t}))}):E?h({rowIds:i}):(m({rowIds:l}),y({rowIds:l}))},S=new Set(p),D=a.reduce((function(e,t){var n=t.id,r=t.__typename;return S.has(n)&&("Entry"===r?e[0].push(n):e[1].push(n)),e}),[[],[]]);return r.createElement(r.Fragment,null,r.createElement(mi,lu(lu({},u),{},{entryProps:lu(lu({},u.entryProps),{},{updateEntryId:P}),dialogProps:lu(lu({},u.dialogProps),{},{onClose:j,open:Z&&!k&&!E&&!O})})),r.createElement(Fi,lu(lu({},c),{},{refundProps:lu(lu({},c.refundProps),w?{entryId:P}:{updateRefundId:P}),dialogProps:lu(lu({},c.dialogProps),{},{onClose:j,open:Z&&k&&!E})})),r.createElement(Gi,lu(lu(lu({},s),k?{deleteRefundId:P||""}:{deleteEntryId:P||""}),{},{onClose:j,open:Z&&E})),r.createElement(eu,lu(lu({},d),{},{entryIds:D[0],refundIds:D[1],dialogProps:lu(lu({},d.dialogProps),{},{onClose:j,open:Z&&O})})))}),[]))),r.createElement(Re.YS,{name:"root"},r.createElement(Re.jf,null),r.createElement(Re.jf,{name:"entryActionDialog"})))},Cu=n(1336);function Zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ku(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ju={margin:"dense"},Su=function(e){return(0,G.defaultInput)(ku(ku({},e),{},{InputProps:ku(ku({},e.InputProps||{}),ju)}))},Du={paddingLeft:"8px",paddingRight:"8px"},Mu={paddingRight:"8px"},Iu={size:"small",fullWidth:!0},Ru=["value"],_u=["boolLabels"];function Nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fu={width:"100%",display:"flex",justifyContent:"center"},Vu=function(e){var t=e.value,n=(0,V.Z)(e,Ru);return r.createElement(q.cO.Cell,xu({},n),r.createElement("div",{style:Fu},t&&r.createElement(Cu.Z,{fontSize:"small"})))},Au=function(e){var t=xu(xu({},e),{},{InputProps:xu(xu({},ju),e.InputProps)});return r.createElement(dt.Z,xu({},t))},Tu=[!0,!1],Bu=function(e){var t=e.boolLabels,n=(0,V.Z)(e,_u),a=e.column.name,o=e.onFilter,l=e.filter,i=(0,r.useMemo)((function(){var e;return l&&"operation"in l&&null!==(e=l.value)&&void 0!==e?e:null}),[l]),u=(0,r.useCallback)((function(e,t){o(null===t?null:{columnName:a,operation:"equal",value:t})}),[a,o]),c=(0,r.useCallback)((function(e){return t?e?t.trueLabel:t.falseLabel:e?"True":"False"}),[t]);return r.createElement(q.B0.Cell,xu(xu({},n),{},{style:Du}),r.createElement(hr.ZP,xu({getOptionLabel:c,renderInput:Au,onChange:u,options:Tu,value:i},Iu)))},qu=["value"],Wu=["categoryFilterOpts"];function Lu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $u=function(e){var t=e.value,n=(0,V.Z)(e,qu);return r.createElement(q.cO.Cell,Uu(Uu({},n),{},{value:t.name}))},Yu=[new G.BranchNode(j.Credit),new G.BranchNode(j.Debit)],zu=function(e){return e===j.Credit||e===j.Debit},Gu=function(e){var t=e.valueOf();return zu(t)?(0,$a.I)(t):Ta(t)},Hu=function(e,t){var n=e.valueOf(),r=t.valueOf(),a=zu(n),o=zu(r);return a||o?n===r:!a&&!o&&Ba(n,r)},Ku=function(e){var t=e.categoryFilterOpts,n=(0,V.Z)(e,Wu),a=e.filter,o=e.onFilter,l=e.column.name,i=(0,r.useState)({branch:null}),u=(0,x.Z)(i,2),c=u[0],s=u[1],d=(0,r.useCallback)((function(e,t){s((function(e){return Uu(Uu({},e),{},{branch:t})}))}),[s]),f=(0,r.useMemo)((function(){return t?t.reduce((function(e,t){return t.type===j.Credit?e[0].push(t):e[1].push(t),e}),[[],[]]):[[],[]]}),[t]),p=(0,x.Z)(f,2),m=p[0],v=p[1],y=(0,r.useMemo)((function(){return c.branch?c.branch.valueOf()===j.Credit?m:v:Yu.reduce((function(e,t){return t.valueOf()===j.Credit?(m.length&&e.push(t),e.push(t.valueOf())):(v.length&&e.push(t),e.push(t.valueOf())),e}),[])}),[m,v,c.branch]),h=(0,r.useCallback)((function(e,t){t.length?o({columnName:l,operator:"or",filters:t.map((function(e){return{operation:"equal",value:e.valueOf()}}))}):o(null)}),[l,o]),b=(0,r.useMemo)((function(){return a?"operator"in a?a.filters.reduce((function(e,t){return"operation"in t&&t.value&&e.push(new G.ValueNode(t.value,c.branch)),e}),[]):"operation"in a&&a.value?[new G.ValueNode(a.value,c.branch)]:[]:[]}),[a,c.branch]);return r.createElement(q.B0.Cell,Uu(Uu({},n),{},{style:Du}),r.createElement(H(),Uu({branch:c.branch,disabled:!e.filteringEnabled,getOptionLabel:Gu,getOptionSelected:Hu,multiple:!0,onBranchChange:d,onChange:h,options:y,renderInput:Su,value:b},Iu)))},Qu=n(3151),Ju=n(6220),Xu=["type"];function ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nc=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M19,10H5V8H19V10M19,16H5V14H19V16Z"}))},rc=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M14.08,4.61L15.92,5.4L14.8,8H19V10H13.95L12.23,14H19V16H11.38L9.92,19.4L8.08,18.61L9.2,16H5V14H10.06L11.77,10H5V8H12.63L14.08,4.61Z"}))},ac=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M6.5,2.27L20,10.14L6.5,18L5.5,16.27L16.03,10.14L5.5,4L6.5,2.27M20,20V22H5V20H20Z"}))},oc=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M5.5,4.14L4.5,5.86L15,12L4.5,18.14L5.5,19.86L19,12L5.5,4.14Z"}))},lc=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M18.5,2.27L5,10.14L18.5,18L19.5,16.27L8.97,10.14L19.5,4L18.5,2.27M5,20V22H20V20H5Z"}))},ic=function(e){return r.createElement(et.Z,tc({},e),r.createElement("path",{d:"M18.5,4.14L19.5,5.86L8.97,12L19.5,18.14L18.5,19.86L5,12L18.5,4.14Z"}))},uc=["equal","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual"],cc=["lessThan","lessThanOrEqual"],sc=["greaterThan","greaterThanOrEqual"],dc=function(e){switch(e){case"greaterThan":case"greaterThanOrEqual":return cc;case"lessThan":case"lessThanOrEqual":return sc;default:return}},fc=function(e){return sc.includes(e)||cc.includes(e)},pc=function(e){var t=e.type,n=(0,V.Z)(e,Xu);switch(t){case"addRangeBound":return r.createElement(Ju.Z,tc({},n));case"equal":return r.createElement(nc,tc({},n));case"notEqual":return r.createElement(rc,tc({},n));case"greaterThan":return r.createElement(oc,tc({},n));case"greaterThanOrEqual":return r.createElement(ac,tc({},n));case"lessThan":return r.createElement(ic,tc({},n));case"lessThanOrEqual":return r.createElement(lc,tc({},n));default:return r.createElement(q.B0.Icon,tc({type:t},n))}},mc=["value","formatter"];function vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hc=function(e){var t=e.value,n=e.formatter,a=(0,V.Z)(e,mc);return r.createElement(q.cO.Cell,yc(yc({},a),{},{value:(null==n?void 0:n.format(t))||t.toLocaleString()}))},bc={autoOk:!0,disableFuture:!0,disableToolbar:!0,format:"MM/dd/yyyy",fullWidth:!0,inputVariant:"standard",margin:"dense",placeholder:"mm/dd/yyyy",size:"small",variant:"inline"},gc=uc.filter((function(e){return"notEqual"!==e})),Oc=(0,U.Z)((function(e){return{keyboardDatePicker:{position:"relative",top:"-1px",marginLeft:e.spacing(1)},tableCell:{paddingLeft:"0px !important"}}})),Ec=function(e){var t=e.filteringEnabled,n=e.getMessage,a=e.filter,o=e.onFilter,l=e.column.name,i=Oc(),u=(0,r.useMemo)((function(){var e={date:null,dateSelector:"equal",rangeDate:null};if(!a)return e;if("operation"in a)e.date=a.value||null,e.dateSelector=a.operation;else{var t=(0,x.Z)(a.filters,2),n=t[0],r=t[1];"operation"in n&&(e.date=n.value||null,e.dateSelector=n.operation),"operation"in r&&(e.rangeDate=r.value||null,e.rangeDateSelector=r.operation)}switch(e.availableRangeDateSelectors=dc(e.dateSelector),e.dateSelector){case"greaterThan":case"greaterThanOrEqual":e.minRangeDate=e.date||void 0;break;case"lessThan":case"lessThanOrEqual":e.maxRangeDate=e.date||void 0}return e}),[a]),c=u.date,s=u.dateSelector,d=u.rangeDate,f=u.rangeDateSelector,p=u.availableRangeDateSelectors,m=u.maxRangeDate,v=u.minRangeDate,y=(0,r.useCallback)((function(e){null!==e&&null!==c&&(0,Vt.Z)(e,c)||e===c||o(e?d&&f?{columnName:l,operator:"and",filters:[{operation:s,value:e},{operation:f,value:d}]}:{columnName:l,operation:s,value:e||void 0}:null)}),[c,d,f,o,l,s]),h=(0,r.useCallback)((function(e){null!==e&&null!==d&&(0,Vt.Z)(e,d)||e===d||o({columnName:l,operator:"and",filters:[{operation:s,value:c},{operation:f,value:e||void 0}]})}),[d,o,l,s,c,f]),b=(0,r.useCallback)((function(e){e!==s&&o({columnName:l,operation:e,value:c||void 0})}),[l,c,s,o]),g=(0,r.useCallback)((function(e){e!==f&&o({columnName:l,operator:"and",filters:[{operation:s,value:c},{operation:e,value:d||void 0}]})}),[l,c,s,o,d,f]),O=(0,r.useCallback)((function(e){switch(e){case"equal":return"On";case"greaterThan":return"After";case"greaterThanOrEqual":return"On or After";case"lessThan":return"Before";case"lessThanOrEqual":return"On or Before";default:return n(e)}}),[n]),E=fc(s);return r.createElement(q.B0.Cell,yc(yc({},e),{},{style:Mu}),r.createElement(Ce.Z,{width:"100%"},r.createElement(Ce.Z,{display:"flex",alignItems:"end",justifyItems:"flex-start"},r.createElement(Bt.M,{utils:Wt.Z},r.createElement(q.B0.FilterSelector,{availableValues:gc,disabled:!t,getMessage:O,iconComponent:pc,onChange:b,toggleButtonComponent:q.B0.ToggleButton,value:s,get:!0}),r.createElement(qt.e,yc(yc({},bc),{},{className:i.keyboardDatePicker,disabled:!t,initialFocusedDate:(0,At.Z)(new Date).toISOString(),onChange:y,value:c})))),E&&!!c&&r.createElement(Ce.Z,{display:"flex",alignItems:"center"},r.createElement(Bt.M,{utils:Wt.Z},r.createElement(q.B0.FilterSelector,{availableValues:p||[],disabled:!t,getMessage:O,iconComponent:pc,onChange:g,toggleButtonComponent:q.B0.ToggleButton,value:f||"addRangeBound"}),r.createElement(qt.e,yc(yc({},bc),{},{disabled:!t||!f,className:i.keyboardDatePicker,initialFocusedDate:(0,At.Z)(new Date).toISOString(),inputVariant:"standard",maxDate:m,minDate:v,onChange:h,value:d}))))))},wc=function(e,t){return{columnName:e,predicate:function(e,n,r){var a=n.value;if(void 0===a)return!0;switch(n.operation){case"equal":return(0,Qu.Z)(e,a);case"notEqual":return!(0,Qu.Z)(e,a);case"greaterThan":return(0,At.Z)(e)>(0,At.Z)(a);case"greaterThanOrEqual":return(0,At.Z)(e)>=(0,At.Z)(a);case"lessThan":return(0,At.Z)(e)<(0,At.Z)(a);case"lessThanOrEqual":return(0,At.Z)(e)<=(0,At.Z)(a);default:return B.Eb.defaultPredicate(t(e),n,r)}}}},Pc=["value"],Cc=["deptFilterOpts"];function Zc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jc=function(e){var t=e.value,n=(0,V.Z)(e,Pc);return r.createElement(q.cO.Cell,kc(kc({},n),{},{value:t.name}))},Sc=function(e){var t=kc(kc({},e),{},{InputProps:kc(kc({},ju),e.InputProps)});return r.createElement(dt.Z,kc({},t))},Dc=function(e){return e.name},Mc=function(e){var t=e.deptFilterOpts,n=(0,V.Z)(e,Cc),a=e.filter,o=e.onFilter,l=e.column.name,i=(0,r.useMemo)((function(){return t||[]}),[t]),u=(0,r.useCallback)((function(e,t){t.length?o({columnName:l,operator:"or",filters:t.map((function(e){return{operation:"equal",value:e}}))}):o(null)}),[l,o]),c=(0,r.useMemo)((function(){return a?"operator"in a?a.filters.reduce((function(e,t){return"operation"in t&&t.value&&e.push(t.value),e}),[]):"operation"in a&&a.value?[a.value]:[]:[]}),[a]);return r.createElement(q.B0.Cell,kc(kc({},n),{},{style:Du}),r.createElement(hr.ZP,kc({getOptionLabel:Dc,multiple:!0,renderInput:Sc,onChange:u,options:i,value:c},Iu)))},Ic=["value"],Rc=["payMethodFilterOpts"];function _c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_c(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xc=function(e){switch(e.__typename){case"PaymentMethodCard":if("AccountCard"===e.card.__typename)return za(e.card);switch(e.card.type){case S.Visa:case S.AmericanExpress:case S.MasterCard:case S.Discover:return"".concat(Ya(e.card.type),"-").concat(e.card.trailingDigits);default:return e.card.trailingDigits}case"PaymentMethodCheck":return"CK-".concat(e.check.checkNumber);default:return(0,$a.I)(e.__typename.replace(/^PaymentMethod/i,""))}},Fc=function(e){var t=e.value,n=(0,V.Z)(e,Ic);return r.createElement(q.cO.Cell,Nc(Nc({},n),{},{value:xc(t)}))},Vc=function(e,t){switch(e.__typename){case"PaymentMethodCash":case"PaymentMethodCombination":case"PaymentMethodOnline":case"PaymentMethodUnknown":return e.__typename===t.__typename;case"PaymentMethodCard":return e.__typename===t.__typename&&e.card.__typename===t.card.__typename&&e.card.type===t.card.type&&e.card.trailingDigits===t.card.trailingDigits;case"PaymentMethodCheck":return e.__typename===t.__typename&&("AccountCheck"===e.check.__typename&&"AccountCheck"===t.check.__typename?e.check.checkNumber===t.check.checkNumber&&e.check.account.id===t.check.account.id:e.check.__typename===t.check.__typename&&e.check.checkNumber===t.check.checkNumber)}},Ac=function(e){var t=e.payMethodFilterOpts,n=(0,V.Z)(e,Rc),a=e.onFilter,o=e.filter,l=(0,r.useState)(null),i=(0,x.Z)(l,2),u=i[0],c=i[1],s=(0,r.useMemo)((function(){var e,n=t||[];if(!u)return(0,F.Z)(n.reduce((function(e,t){switch(t.__typename){case"PaymentMethodCard":case"PaymentMethodCheck":e.has(t.__typename)||e.set(t.__typename,new G.BranchNode(t.__typename));break;default:e.has(t.__typename)||e.set(t.__typename,t)}return e}),new Map).values());var r=u.valueOf();switch(r){case"External":return(0,F.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||"PaymentCard"!==t.card.__typename||e.has(t.card.type)||e.set(t.card.type,new G.BranchNode(t.card.type,u)),e}),new Map).values());case"Internal":return(0,F.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||"AccountCard"!==t.card.__typename||e.has(t.card.type)||e.set(t.card.type,new G.BranchNode(t.card.type,u)),e}),new Map).values());case"PaymentMethodCard":return[new G.BranchNode("Internal",u),new G.BranchNode("External",u)];case"PaymentMethodCheck":return n.reduce((function(e,t){var n=(0,x.Z)(e,1)[0];return"PaymentMethodCheck"===t.__typename&&("AccountCheck"===t.check.__typename?n.accounts.has(t.check.account.id)||n.accounts.set(t.check.account.id,new G.BranchNode({checkingAccountId:t.check.account.id,accountNumber:t.check.account.accountNumber},u)):n.externalChecks.set(t.check.checkNumber,t)),[n]}),[{accounts:new Map,externalChecks:new Map}]).map((function(e){var t=e.accounts,n=e.externalChecks;return[].concat((0,F.Z)(t.values()),(0,F.Z)(n.values()))}))[0];case S.AmericanExpress:case S.Discover:case S.MasterCard:case S.Visa:var a="External"===(null===(e=u.parent)||void 0===e?void 0:e.valueOf())?"PaymentCard":"AccountCard";return(0,F.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||t.card.type!==r||t.card.__typename!==a||e.has(t.card.trailingDigits)||e.set(t.card.trailingDigits,t),e}),new Map).values());default:var o=r.checkingAccountId;return(0,F.Z)(n.reduce((function(e,t){return"PaymentMethodCheck"!==t.__typename||"AccountCheck"!==t.check.__typename||t.check.account.id!==o||e.has(t.check.checkNumber)||e.set(t.check.checkNumber,t),e}),new Map).values())}}),[u,t]),d=e.column.name,f=(0,r.useCallback)((function(e,t){t.length?a({columnName:d,operator:"or",filters:t.map((function(e){return{operation:"equal",value:e.valueOf()}}))}):a(null)}),[d,a]),p=(0,r.useCallback)((function(e,t){return c(t)}),[]),m=(0,r.useCallback)((function(e){var t;if(e instanceof G.BranchNode){var n=e.valueOf();if("string"!=typeof n)return"Acct# ...".concat(null===(t=n.accountNumber)||void 0===t?void 0:t.slice(-4));switch(n){case"PaymentMethodCheck":return"Check";case"PaymentMethodCard":return"Card";case"External":case"Internal":return n;default:return(0,$a.I)(n)}}else{var r=e.valueOf();switch(r.__typename){case"PaymentMethodCard":return"AccountCard"===r.card.__typename?za(r.card):"".concat(Ya(r.card.type),"-").concat(r.card.trailingDigits);case"PaymentMethodCheck":return"CK-".concat(r.check.checkNumber);case"PaymentMethodCash":return"Cash";case"PaymentMethodCombination":return"Combination";case"PaymentMethodOnline":return"Online";case"PaymentMethodUnknown":return"Unknown"}}}),[]),v=(0,r.useCallback)((function(e,t){return Vc(e.valueOf(),t.valueOf())}),[]),y=(0,r.useMemo)((function(){return o?"operator"in o?o.filters.reduce((function(e,t){return"operation"in t&&t.value&&e.push(u?new G.ValueNode(t.value,u):new G.ValueNode(t.value)),e}),[]):"operation"in o&&o.value?[u?new G.ValueNode(o.value,u):new G.ValueNode(o.value)]:[]:[]}),[o,u]);return r.createElement(q.B0.Cell,Nc(Nc({},n),{},{style:Du}),r.createElement(H(),Nc({onBranchChange:p,branch:u,onChange:f,options:s,multiple:!0,getOptionLabel:m,getOptionSelected:v,renderInput:Su,value:y},Iu)))},Tc=["value","formatter"],Bc=["rationalInputProps"];function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lc=function(e){var t=e.value,n=e.formatter,a=(0,V.Z)(e,Tc);return r.createElement(q.cO.Cell,Wc(Wc({},a),{},{value:(null==n?void 0:n.format(t.valueOf()))||t.valueOf()}))},Uc=function(e){var t=e.rationalInputProps,n=(0,V.Z)(e,Bc),a=e.filteringEnabled,o=e.getMessage,l=e.filter,i=e.onFilter,u=e.column.name,c=(0,r.useMemo)((function(){var e={rational:null,rationalSelector:"equal",rangeRational:null};if(!l)return e;if("operation"in l)e.rational=l.value||null,e.rationalSelector=l.operation;else{var t=(0,x.Z)(l.filters,2),n=t[0],r=t[1];"operation"in n&&(e.rational=n.value||null,e.rationalSelector=n.operation),"operation"in r&&(e.rangeRational=r.value||null,e.rangeRationalSelector=r.operation)}switch(e.availableRangeRationalSelectors=dc(e.rationalSelector),e.rationalSelector){case"greaterThan":case"greaterThanOrEqual":e.minRangeRational=e.rational||void 0;break;case"lessThan":case"lessThanOrEqual":e.maxRangeRational=e.rational||void 0}return e}),[l]),s=c.rational,d=c.rationalSelector,f=c.rangeRational,p=c.rangeRationalSelector,m=c.availableRangeRationalSelectors,v=(0,r.useCallback)((function(e,t){null!==t&&null!==s&&t.equals(s)||t===s||i(t?f&&p?{columnName:u,operator:"and",filters:[{operation:d,value:t},{operation:p,value:f}]}:{columnName:u,operation:d,value:t||void 0}:null)}),[u,i,f,p,s,d]),y=(0,r.useCallback)((function(e,t){null!==t&&null!==f&&t.equals(f)||t===f||i({columnName:u,operator:"and",filters:[{operation:d,value:s},{operation:p,value:t||void 0}]})}),[f,i,u,d,s,p]),h=(0,r.useCallback)((function(e){e!==d&&i({columnName:u,operation:e,value:s||void 0})}),[u,s,d,i]),b=(0,r.useCallback)((function(e){e!==p&&i({columnName:u,operator:"and",filters:[{operation:d,value:s},{operation:e,value:f||void 0}]})}),[u,s,d,i,f,p]),g=(0,r.useMemo)((function(){return t?Wc(Wc({},t),{},{InputProps:Wc(Wc({},ju),t.InputProps||{})}):{InputProps:ju}}),[t]),O=fc(d);return r.createElement(q.B0.Cell,Wc(Wc({},n),{},{style:Mu}),r.createElement(Ce.Z,{width:"100%"},r.createElement(Ce.Z,{display:"flex",alignItems:"center"},r.createElement(q.B0.FilterSelector,{availableValues:uc,disabled:!a,getMessage:o,iconComponent:pc,onChange:h,toggleButtonComponent:q.B0.ToggleButton,value:d}),r.createElement(No,Wc({disabled:!a,fullWidth:!0,onChange:v,size:"small",value:s},g))),O&&!!s&&r.createElement(Ce.Z,{display:"flex",alignItems:"center"},r.createElement(q.B0.FilterSelector,{availableValues:m||[],disabled:!a,getMessage:o,iconComponent:pc,onChange:b,toggleButtonComponent:q.B0.ToggleButton,value:p||"addRangeBound"}),r.createElement(No,Wc({disabled:!a||!p,fullWidth:!0,onChange:y,size:"small",value:f},g||{})))))},$c=["value"],Yc=["srcFilterOpts"];function zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kc=function(e){switch(e.__typename){case"Business":case"Department":return e.name;case"Person":return"".concat(e.personName.first," ").concat(e.personName.last)}},Qc=function(e){var t=e.value,n=(0,V.Z)(e,$c);return r.createElement(q.cO.Cell,Hc(Hc({},n),{},{value:Kc(t)}))},Jc=function(e){var t=e.valueOf();if("string"==typeof t)return t;if("Person"===(null==t?void 0:t.__typename)){var n=t.personName,r=n.first,a=n.last;return"".concat(r," ").concat(a)}return ma(e)},Xc=function(e,t){var n=e.valueOf(),r=t.valueOf();return"string"==typeof n||"string"==typeof r?n===r:va(e,t)},es=function(e){var t=e.srcFilterOpts,n=(0,V.Z)(e,Yc),a=e.onFilter,o=e.filter,l=e.column.name,i=(0,r.useState)(null),u=(0,x.Z)(i,2),c=u[0],s=u[1],d=(0,r.useMemo)((function(){if(t){if(c){var e=c.valueOf();return t.filter((function(t){return t.__typename===e}))}var n,r=new Set,a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}(t);try{for(a.s();!(n=a.n()).done;){var o=n.value.__typename;if(r.add(o),3===r.size)break}}catch(e){a.e(e)}finally{a.f()}return 1===r.size?t:(0,F.Z)(r.values()).map((function(e){return new G.BranchNode(e)}))}return[]}),[t,c]),f=(0,r.useCallback)((function(e,t){s(t)}),[s]),p=(0,r.useCallback)((function(e,t){t.length?a({columnName:l,operator:"or",filters:t.map((function(e){return{operation:"equal",value:e.valueOf()}}))}):a(null)}),[a,l]),m=(0,r.useCallback)((function(e){return(0,G.defaultInput)(Hc(Hc({},e),{},{InputProps:Hc(Hc({},e.InputProps||{}),ju)}))}),[]),v=(0,r.useMemo)((function(){return o?"operator"in o?o.filters.reduce((function(e,t){return"operation"in t&&t.value&&e.push(c?new G.ValueNode(t.value,c):new G.ValueNode(t.value)),e}),[]):"operation"in o&&o.value?[c?new G.ValueNode(o.value,c):new G.ValueNode(o.value)]:[]:[]}),[o,c]);return r.createElement(q.B0.Cell,Hc(Hc({},n),{},{style:Du}),r.createElement(H(),Hc({getOptionLabel:Jc,getOptionSelected:Xc,onBranchChange:f,multiple:!0,onChange:p,options:d,renderInput:m,value:v},Iu)))},ts=["getMessage","value","onChange"];function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rs={paddingRight:"8px"},as={margin:"dense"},os=function(e){e.getMessage;var t=e.value,n=e.onChange,a=(0,V.Z)(e,ts),o=(0,r.useCallback)((function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:"")}),[n]);return r.createElement(dt.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({size:"small",fullWidth:!0,InputProps:as,onChange:o,style:rs,value:null!=t?t:""},a))},ls=[{name:"SummaryState",optional:!1},{name:"IntegratedSummary",optional:!1}],is=function(e){var t=e.title;return r.createElement(Re.Sy,{name:"GridTitle",dependencies:ls},r.createElement(Re.YS,{name:"toolbarContent"},r.createElement(Re.eT,null,(function(e){var n,a=e.totalSummaryValues,o=e.totalSummaryItems,l=e.loadedNamedFilter,i=a[o.findIndex((function(e){var t=e.type;return"total"===e.columnName&&"totalAggregate"===t}))];return r.createElement(r.Fragment,null,r.createElement(vt.Z,{variant:"h6"},(n="",t&&(n=t),l&&(n=n?"".concat(n," (").concat(l,")"):"".concat(l)),n?"".concat(n,": ").concat(i):i)),r.createElement(Re.jf,null))}))))},us=n(8513),cs=n(9805),ss=n(3375),ds=n(7460),fs=n(3162),ps=n(8813),ms=function(){return r.createElement(Re.Sy,{name:"ExportGrid"},r.createElement(Re.aU,{name:"exportGrid",action:(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[1],a=r.rows,o=r.loadedNamedFilter;if(a.length){var l=(0,ds.unparse)(a.map((function(e){var t=e.__typename,n=e.date,r=e.dateOfRecord,a=e.department.name,o=e.category,l=e.paymentMethod,i=e.description,u=e.total,c=e.source,s=e.reconciled;return{Date:(0,ps.Z)(n,"PP"),"Date off Record":(0,ps.Z)((null==r?void 0:r.date)||n,"PP"),Category:o.name,Department:a,Source:Kc(c),"Payment Method":xc(l),Description:i,Reconciled:s?"Y":"N",Total:"EntryRefund"===t?o.type===j.Credit?"(".concat(u.toString(),")"):u:o.type===j.Credit?u:"(".concat(u.toString(),")")}}))),i=new Blob([l],{type:"text/csv;charset=utf-8"});o?(0,fs.saveAs)(i,"".concat(o,"-").concat((0,ps.Z)(new Date,"yyyy-MM-dd"),".csv")):(0,fs.saveAs)(i,"journal-".concat((0,ps.Z)(new Date,"yyyy-MM-dd"),".csv"))}}),[])}))},vs={vertical:"top",horizontal:"right"},ys={vertical:"top",horizontal:"right"},hs=[{name:"EntryActionState",optional:!1}],bs=function(){var e=(0,r.useState)(null),t=(0,x.Z)(e,2),n=t[0],a=t[1],o=(0,r.useState)(!1),l=(0,x.Z)(o,2),i=l[0],u=l[1];return r.createElement(Re.Sy,{name:"GridMenu",dependencies:hs},r.createElement(ms,null),r.createElement(Re.YS,{name:"toolbarContent"},r.createElement(Re.jf,null),r.createElement(Re.eT,null,(0,r.useCallback)((function(e,t){var o=e.reconcileMode,l=t.changeReconcileMode,c=t.exportGrid;return r.createElement(r.Fragment,null,r.createElement(nt.Z,{ref:a,onClick:function(){u(!0)},edge:"end"},r.createElement(us.Z,null)),r.createElement(rt.Z,{anchorEl:n,open:i,anchorOrigin:vs,transformOrigin:ys,onClose:function(){u(!1)}},r.createElement(at.Z,{style:{minWidth:"300px"},button:!1},r.createElement(ot.Z,null,r.createElement(cs.Z,null)),r.createElement(lt.Z,{primary:"Reconcile Mode"}),r.createElement(bt.Z,null,r.createElement(Bo.Z,{checked:o,edge:"end",onChange:function(e,t){l(t)}}))),r.createElement(at.Z,{button:!0,onClick:function(){c(),u(!1)}},r.createElement(ot.Z,null,r.createElement(ss.Z,null)),r.createElement(lt.Z,{primary:"Save to Disk"}))))}),[n,i]))))},gs=["entry"],Os=["className","row"];function Es(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ws(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ps(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zs,ks=function(e){return r.createElement(q.rj.Root,Cs(Cs({},e),{},{style:{height:"100%"}}))},js=function(e){return Cs(Cs({},e),{},{date:de(e.date),dateOfRecord:e.dateOfRecord?Cs(Cs({},e.dateOfRecord),{},{date:de(e.dateOfRecord.date)}):void 0,total:ce(e.total)})},Ss=function(e){return Cs(Cs({},e),{},{date:de(e.date),dateOfRecord:e.dateOfRecord?Cs(Cs({},e.dateOfRecord),{},{date:de(e.dateOfRecord.date)}):void 0,total:ce(e.total),refunds:("refunds"in e?e.refunds:[]).map((function(e){return js(e)}))})},Ds=function(e){return e.id},Ms=(0,U.Z)({creditCell:{color:W.Z[900]},debitCell:{color:L.Z[900]},paper:{height:"100vh"}}),Is={locales:"en-US",options:{month:"short",day:"2-digit",year:"numeric"}},Rs=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}),_s=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),Ns=[{name:"date",title:"Date",getCellValue:function(e){return(null==e?void 0:e.date)||null}},{name:"dateOfRecord",title:"Date of Record",getCellValue:function(e){var t;return(null===(t=null==e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)||(null==e?void 0:e.date)||null}},{name:"department",title:"Department"},{name:"category",title:"Category"},{name:"paymentMethod",title:"Payment Method"},{name:"description",title:"Description"},{name:"total",title:"Total",getCellValue:function(e){return(null==e?void 0:e.total)||null}},{name:"source",title:"Source"},{name:"reconciled",title:"Reconciled"}],xs=function(e,t,n){return"totalAggregate"===e?_s.format(t.reduce((function(e,t){return"EntryRefund"===t.__typename?t.category.type===j.Credit?e.sub(n(t)):e.add(n(t)):t.category.type===j.Credit?e.add(n(t)):e.sub(n(t))}),new(z())(0)).valueOf()):B.Y5.defaultCalculator(e,t,n)},Fs={totalAggregate:"Balance",count:"Transactions"},Vs=[{columnName:"total",type:"count"},{columnName:"total",type:"totalAggregate"}],As=[{columnName:"id",width:"50px"},{columnName:"date",width:"135px"},{columnName:"dateOfRecord",width:"135px"},{columnName:"type",width:"85px"},{columnName:"department",width:"180px"},{columnName:"category",width:"180px"},{columnName:"paymentMethod",width:"135px"},{columnName:"description",width:"300px"},{columnName:"total",width:"175px"},{columnName:"source",width:"180px"},{columnName:"reconciled",width:"135px"}],Ts=Ns.map((function(e){return e.name})),Bs={serialize:function(e){return JSON.stringify(e,(function(e,t){var n=this[e];return n instanceof Date?{_TYPE_:"Date",value:this[e].toISOString()}:n instanceof z()?{_TYPE_:"Rational",value:{s:n.s,n:n.n,d:n.d}}:t}))},deserialize:function(e){return JSON.parse(e,(function(e,t){if(t&&"object"===(0,A.Z)(t)&&"_TYPE_"in t&&"value"in t)switch(t._TYPE_){case"Date":return new Date(t.value);case"Rational":return new(z())(t.value)}return t}))}},qs=[{columnName:"dateOfRecord",direction:"asc"}],Ws=[{columnName:"total",compare:function(e,t){return e.compare(t)}},{columnName:"date",compare:$.Z},{columnName:"dateOfRecord",compare:$.Z},{columnName:"dateOfRecord",compare:$.Z}],Ls=new Intl.DateTimeFormat(null==Is?void 0:Is.locales,null==Is?void 0:Is.options),Us=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),$s=[wc("date",(function(e){return Ls.format(e)})),wc("dateOfRecord",(function(e){return Ls.format(e)})),("category",Zs=function(e){return Ta(new G.ValueNode(e))},{columnName:"category",predicate:function(e,t,n){var r=t.value;if(void 0===r)return!0;switch(t.operation){case"equal":return zu(r)?r===e.type||"EntryRefund"===n.__typename:Ba(new G.ValueNode(e),new G.ValueNode(r));case"notEqual":return zu(r)?r!==e.type&&"Entry"===n.__typename:!Ba(new G.ValueNode(e),new G.ValueNode(r));default:return B.Eb.defaultPredicate(Zs(e),t,n)}}}),function(e,t){return{columnName:"department",predicate:function(e,n,r){var a=n.value;if(void 0===a)return B.Eb.defaultPredicate(t(e),n,r);switch(n.operation){case"equal":return a.id===e.id;case"notEqual":return a.id!==e.id;default:return B.Eb.defaultPredicate(t(e),n,r)}}}}(0,(function(e){return e.name})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xc;return{columnName:e,predicate:function(e,n,r){var a=n.value;if(void 0===a)return!0;switch(n.operation){case"equal":case"notEqual":return Vc(a,e);default:return B.Eb.defaultPredicate(t(e),n,r)}}}}("paymentMethod"),{columnName:"total",predicate:function(e,t,n){var r=t.value;if(void 0===r)return!0;switch(t.operation){case"equal":return e.equals(r);case"notEqual":return!e.equals(r);case"greaterThan":return e.compare(r)>0;case"greaterThanOrEqual":return e.compare(r)>=0;case"lessThan":return e.compare(r)<0;case"lessThanOrEqual":return e.compare(r)<=0;default:return B.Eb.defaultPredicate(function(e){return"".concat(e.toString()," ").concat(Us.format(e.valueOf()))}(e),t,n)}}},function(e,t){return{columnName:"source",predicate:function(e,n,r){var a=n.value;if(null==a)return!0;switch(n.operation){case"equal":return a.__typename===e.__typename&&a.id===e.id;case"notEqual":return a.__typename!==e.__typename||a.id!==e.id;default:return B.Eb.defaultPredicate(t(e),n,r)}}}}(0,Kc)];const Ys=function(e){var t,n,a=Ms(),o=e.fiscalYear,l=(0,r.useMemo)((function(){return{where:e.where,filterRefunds:!0}}),[e.where]),i=null==e?void 0:e.refundsWhere,u=(0,r.useMemo)((function(){var t;return null!==(t=e.layoutCacheKey)&&void 0!==t?t:"".concat(Q()(JSON.stringify(e.where)))}),[e.where,e.layoutCacheKey]),c=(0,N.a)(ge,{variables:l,fetchPolicy:"cache-and-network"}),s=(0,N.a)(Ee,{skip:!i,variables:i,fetchPolicy:"cache-and-network"}),d=c.loading||s.loading,f=c.error||s.error,p=(0,r.useMemo)((function(){var e,t,n=((null===(e=s.data)||void 0===e?void 0:e.entryRefunds)||[]).reduce((function(e,t){var n=t.entry,r=(0,V.Z)(t,gs);if(!r.deleted){var a=js(r);e.set(a.id,Cs(Cs(Cs({},Ss(n)),a),{},{refunds:[a],entryId:n.id}))}return e}),new Map),r=((null===(t=c.data)||void 0===t?void 0:t.entries)||[]).reduce((function(e,t){if(t.deleted)return e;var r=Ss(t);if(e.push(r),r.refunds.length>0){var a,o=Es(r.refunds);try{var l=function(){var t=a.value;if(!t.deleted){var o=function(){if(n.has(t.id)){var e=n.get(t.id);return n.delete(t.id),e}return Cs(Cs(Cs({},r),t),{},{entryId:r.id})}();e.push(o)}};for(o.s();!(a=o.n()).done;)l()}catch(e){o.e(e)}finally{o.f()}}return e}),[]);return r.push.apply(r,(0,F.Z)(n.values())),r}),[null===(t=s.data)||void 0===t?void 0:t.entryRefunds,null===(n=c.data)||void 0===n?void 0:n.entries]),m=(0,r.useMemo)((function(){var e,t=new Map,n=[],r=new Map,a=new Map,l=Es(p);try{for(l.s();!(e=l.n()).done;){var i=e.value,u=i.department,c=i.category,s=i.source,d=i.paymentMethod;!t.has(u.id)&&u.disable.every((function(e){return e.id!==o}))&&t.set(u.id,u),n.push(d),r.has(c.id)||r.set(c.id,c);var f="".concat(s.__typename,"_").concat(s.id);a.has(f)||a.set(f,s)}}catch(e){l.e(e)}finally{l.f()}return{category:{cell:Ku,props:{categoryFilterOpts:(0,F.Z)(r.values())}},date:{cell:Ec},dateOfRecord:{cell:Ec},department:{cell:Mc,props:{deptFilterOpts:(0,F.Z)(t.values())}},paymentMethod:{cell:Ac,props:{payMethodFilterOpts:n}},reconciled:{cell:Bu,props:{boolLabels:{trueLabel:"Reconciled",falseLabel:"Unreconciled"}}},source:{cell:es,props:{srcFilterOpts:(0,F.Z)(a.values())}},total:{cell:Uc,props:{rationalInputProps:{InputProps:{startAdornment:"$"}}}}}}),[p,o]),v=Ie({defaultValue:Ts,cacheKey:"column_order_".concat(u)}),y=(0,x.Z)(v,2),h=y[0],b=y[1],g=Ie({defaultValue:As,cacheKey:"column_widths_".concat(u)}),O=(0,x.Z)(g,2),E=O[0],w=O[1],P=Ie({defaultValue:[],cacheKey:"column_visibility_".concat(u)}),C=(0,x.Z)(P,2),Z=C[0],k=C[1],S=Ie({defaultValue:qs,cacheKey:"column_visibility_sorting".concat(u)}),D=(0,x.Z)(S,2),M=D[0],I=D[1],R=(0,r.useState)([]),_=(0,x.Z)(R,2),A=_[0],W=_[1],L=Ie({defaultValue:{},cacheKey:"named_filters_".concat(u),serializer:Bs}),U=(0,x.Z)(L,2),$=U[0],Y=U[1],z=(0,r.useCallback)((function(e){var t=e.className,n=void 0===t?"":t,r=e.row,o=(0,V.Z)(e,Os),l="EntryRefund"===r.__typename?r.category.type===j.Credit?a.debitCell:a.creditCell:r.category.type===j.Credit?a.creditCell:a.debitCell;return Cs({className:"".concat(n," ").concat(l).trim(),row:r},o)}),[a.creditCell,a.debitCell]),G=(0,r.useMemo)((function(){return{date:{cell:hc,props:function(e){return z(Cs(Cs({},e),{},{formatter:Rs}))}},dateOfRecord:{cell:hc,props:function(e){return z(Cs(Cs({},e),{},{formatter:Rs}))}},department:{cell:jc,props:z},category:{cell:$u,props:z},paymentMethod:{cell:Fc,props:z},description:{props:z},total:{cell:Lc,props:function(e){return z(Cs(Cs({},e),{},{formatter:_s}))}},source:{cell:Qc,props:z},reconciled:{cell:Vu,props:z}}}),[z]),H=(0,r.useMemo)((function(){return[{dialogProps:ml,entryProps:{paymentMethod:{accounts:e.selectableAccounts},department:{root:e.selectableDepts,fyID:o}},refetchQueries:{onNewEntry:[{query:ge,variables:l}]}},{dialogProps:ml,refundProps:{paymentMethod:{accounts:e.selectableAccounts}},refetchQueries:i?{onNewEntryRefund:[{query:Ee,variables:i}],onUpdateEntryRefund:[{query:Ee,variables:i},{query:ge,variables:l}]}:void 0},{keepMounted:!1,maxWidth:"sm",fullWidth:!0},{dialogProps:{keepMounted:!1,maxWidth:"sm",fullWidth:!0}}]}),[e.selectableAccounts,e.selectableDepts,l,i,o]),K=(0,x.Z)(H,4),J=K[0],X=K[1],ee=K[2],te=K[3];return f?r.createElement("div",null,f.message):r.createElement(T.Z,{className:a.paper},r.createElement(q.rj,{columns:Ns,rows:p,getRowId:Ds,rootComponent:ks},r.createElement(q.wz,null),r.createElement(su,{reconcileMode:e.reconcileMode,upsertEntryProps:J,upsertRefundProps:X,deleteEntryProps:ee,reconcileEntriesProps:te}),r.createElement(B.po,null),r.createElement(We,{filters:A,onFiltersChange:W,namedFilters:$,onNamedFiltersChange:Y}),r.createElement(B.tU,{sorting:M,onSortingChange:I}),r.createElement(B.RX,{totalItems:Vs}),r.createElement(B.Eb,{columnExtensions:$s}),r.createElement(B.Y5,{calculator:xs}),r.createElement(B.qf,{columnExtensions:Ws}),r.createElement(q.dV,{height:"auto",cellComponent:Je,stubHeaderCellComponent:yu}),r.createElement(q.ad,{columnWidths:E,onColumnWidthsChange:w}),r.createElement(q.nM,{order:h,onOrderChange:b}),r.createElement(q.KA,{showSortingControls:!0}),r.createElement(q.B0,{showFilterSelector:!0,cellComponent:Xe,editorComponent:os}),r.createElement(Ke,Cs({},G)),r.createElement(Qe,Cs({},m)),r.createElement(q.W3,{hiddenColumnNames:Z,onHiddenColumnNamesChange:k}),r.createElement(q.o8,null),r.createElement(is,{title:e.title}),r.createElement(q.EG,null),r.createElement(q.kU,null),r.createElement(q.RA,{messages:Fs}),r.createElement(Pu,null),r.createElement(bs,null)),(d||!!e.loading)&&r.createElement(Me,{zIndex:"modal"}))};var zs,Gs,Hs,Ks,Qs,Js,Xs,ed,td,nd,rd,ad=n(3832),od=n(3957),ld=n(4122),id=n(8463),ud=n(4697),cd=n(9912),sd=n(2077),dd=n.n(sd),fd=n(9546),pd=n(8105),md=n(6394),vd=n(110),yd=(0,_.ZP)(zs||(zs=(0,I.Z)(["\n  fragment GetReportDataDept on Department {\n    __typename\n    id\n    name\n    disable {\n      id\n    }\n    budgets {\n      id\n      __typename\n      amount\n      fiscalYear {\n        __typename\n        id\n      }\n    }\n  }\n"]))),hd=(0,_.ZP)(Gs||(Gs=(0,I.Z)(["\n  fragment ReportDataEntryRefund on EntryRefund {\n    __typename\n    id\n    total\n    deleted\n    lastUpdate\n  }\n"]))),bd=(0,_.ZP)(Hs||(Hs=(0,I.Z)(["\n  fragment ReportDataEntryCategory on Category {\n    __typename\n    id\n    name\n    type\n  }\n"]))),gd=(0,_.ZP)(Ks||(Ks=(0,I.Z)(["\n  fragment ReportDataEntryDept on Department {\n    __typename\n    id\n    ancestors {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]))),Od=(0,_.ZP)(Qs||(Qs=(0,I.Z)(["\n  fragment GetReportDataEntrySansRefunds on Entry {\n    id\n    __typename\n    category {\n      ...ReportDataEntryCategory\n    }\n    total\n    fiscalYear {\n      __typename\n      id\n    }\n    department {\n      ...ReportDataEntryDept\n    }\n    items {\n      __typename\n      id\n      total\n      department {\n        __typename\n        id\n      }\n      deleted\n    }\n    lastUpdate\n    deleted\n  }\n  ","\n  ","\n"])),bd,gd),Ed=(0,_.ZP)(Js||(Js=(0,I.Z)(["\n  fragment GetReportDataEntry on Entry {\n    ...GetReportDataEntrySansRefunds\n    refunds {\n      ...ReportDataEntryRefund\n    }\n  }\n  ","\n  ","\n"])),Od,hd),wd=(0,_.ZP)(Xs||(Xs=(0,I.Z)(["\n  fragment ReportDataOtherEntryRefund on EntryRefund {\n    ...ReportDataEntryRefund\n    entry {\n      __typename\n      id\n      category {\n        ...ReportDataEntryCategory\n      }\n      department {\n        ...ReportDataEntryDept\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"])),hd,bd,gd),Pd=(0,_.ZP)(ed||(ed=(0,I.Z)(["\n \n  query GetReportData($deptId:ID!, $where:EntriesWhere!, $filterRefunds:Boolean, $whereRefunds:EntryRefundsWhere!, $whereRefundEntries:EntriesWhere!) {\n    department(id:$deptId) {\n      ...GetReportDataDept\n      descendants {\n        ...GetReportDataDept\n      }\n    }\n    entries(where:$where, filterRefunds:$filterRefunds) {\n      ...GetReportDataEntry\n    }\n  \n    entryRefunds(where:$whereRefunds, entriesWhere:$whereRefundEntries) {\n      ...ReportDataOtherEntryRefund\n    }\n\n    fiscalYears {\n      __typename\n      id\n      name\n      begin\n      end\n    }\n  }\n  ",",\n  ","\n  ","\n"])),yd,Ed,wd),Cd=(0,_.ZP)(td||(td=(0,I.Z)(["\n  query GetFiscalYears($where: FiscalYearsWhere) {\n    fiscalYears(where: $where) {\n      __typename\n      id\n      begin\n      end\n    }\n  }\n"])));function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Sd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function Sd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(0,_.ZP)(nd||(nd=(0,I.Z)(["\n  subscription EntryAdded_2 {\n    entryAdded {\n      ...GetReportDataEntry\n    }\n  }\n  ","\n"])),Ed),(0,_.ZP)(rd||(rd=(0,I.Z)(["\n  subscription EntryUpdated_2 {\n    entryUpdated {\n      ...GetReportDataEntry\n    }\n  }\n  ","\n"])),Ed);var Dd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?W.Z[t]:e<.9?fd.Z[t]:L.Z[t]},Md=function(e){var t=e.spentPercentage,n=e.height;return r.createElement(Ce.Z,{height:n,bgcolor:Dd(t),display:"flex",justifyContent:"flex-start"},r.createElement(Ce.Z,{height:"100%",width:"".concat(100*t,"%"),bgcolor:pd.Z[400]}))};const Id=function(e){var t,n,a=e.deptId,o=e.selectableAccounts,l=e.selectableDepts,u=(0,r.useState)(!1),c=(0,x.Z)(u,2),s=c[0],d=c[1],f=(0,r.useState)(new Date((new Date).toDateString())),p=(0,x.Z)(f,2),m=p[0],v=p[1],y=(0,N.a)(Cd,{variables:{where:{date:{eq:se(m)}}},fetchPolicy:"cache-and-network"}),h=y.loading,b=y.error,g=y.data,O=null===(t=null==g?void 0:g.fiscalYears)||void 0===t?void 0:t[0],E=(0,r.useMemo)((function(){return{deptId:a,where:{fiscalYear:{id:{eq:null==O?void 0:O.id}},department:{id:{lte:a}},deleted:!1},whereRefunds:{fiscalYear:{id:{eq:null==O?void 0:O.id}},deleted:!1},whereRefundEntries:{department:{id:{lte:a}},fiscalYear:{nor:[{id:{eq:null==O?void 0:O.id}}]},deleted:!1},filterRefunds:!0}}),[a,null==O?void 0:O.id]),w=(0,N.a)(Pd,{variables:E,fetchPolicy:"cache-and-network",skip:h}),P=w.loading,C=w.error,Z=w.data,k=h||P,S=(0,r.useMemo)((function(){return(null==Z?void 0:Z.entries)||[]}),[null==Z?void 0:Z.entries]),D=(0,r.useMemo)((function(){return(null==Z?void 0:Z.entryRefunds)||[]}),[null==Z?void 0:Z.entryRefunds]),M=(null===(n=null==Z?void 0:Z.department)||void 0===n?void 0:n.name)||"";(0,r.useEffect)((function(){document.title=M}),[M]);var I=(null==Z?void 0:Z.department)||null,R=(0,r.useMemo)((function(){var e,t=new Map,n=new(z())(0),r=new(z())(0),a=[];(null==I?void 0:I.disable.every((function(e){return e.id!==(null==O?void 0:O.id)})))&&function(){var r=new Set;a.push.apply(a,[I].concat((0,F.Z)(I.descendants.filter((function(e){return e.disable.every((function(e){return e.id!==(null==O?void 0:O.id)}))})))));var o,l=jd(a);try{for(l.s();!(o=l.n()).done;){var i=o.value,u=null!==(e=i.budgets.find((function(e){return e.fiscalYear.id===(null==O?void 0:O.id)&&!r.has(e.id)})))&&void 0!==e?e:null,c=null;if(u){var s=u.amount;r.add(u.id),c=ce(s),n=n.add(c)}t.set(i.id,{name:i.name,spent:new(z())(0),budget:c})}}catch(e){l.e(e)}finally{l.f()}}();var o,l=D.reduce((function(e,t){return e.set(t.id,t),e}),new Map),i=jd(S);try{for(i.s();!(o=i.n()).done;){var u=o.value;if(!u.deleted){var c=t.get(u.department.id);if(c){var s,d=ce(u.total),f=jd(u.refunds);try{for(f.s();!(s=f.n()).done;){var p=s.value;p.deleted||(l.delete(p.id),d=d.sub(ce(p.total)))}}catch(e){f.e(e)}finally{f.f()}if(I){var m,v=jd(u.items);try{var y=function(){var e=m.value;if(e.deleted||!e.department||a.some((function(t){var n;return t.id===(null===(n=e.department)||void 0===n?void 0:n.id)})))return"continue";d=d.sub(ce(e.total))};for(v.s();!(m=v.n()).done;)y()}catch(e){v.e(e)}finally{v.f()}}u.category.type===j.Credit?(r=r.sub(d),c.spent=c.spent.sub(d)):(r=r.add(d),c.spent=c.spent.add(d))}}}}catch(e){i.e(e)}finally{i.f()}var h,b=jd(l.values());try{for(b.s();!(h=b.n()).done;){var g=h.value,E=g.entry,w=ce(g.total),P=t.get(E.department.id);E.category.type===j.Debit?(r=r.sub(w),P.spent=P.spent.sub(w)):(r=r.add(w),P.spent=P.spent.add(w))}}catch(e){b.e(e)}finally{b.f()}return{totalRemaining:dd()(n.sub(r).valueOf()).format("$0,0.00"),budget:dd()(n.valueOf()).format("$0,0.00"),spentToBudgetRatio:0===n.n?-1===r.s?0:1:r.div(n).valueOf(),deptReports:t,uBudget:n}}),[I,D,null==O?void 0:O.id,S]),_=R.totalRemaining,V=R.budget,A=R.spentToBudgetRatio,T=R.deptReports,B=R.uBudget,q=(0,r.useMemo)((function(){var e,t=[],n=jd(T);try{var a=function(){var n=(0,x.Z)(e.value,2),a=n[0],o=n[1],l=o.budget,i=o.spent,u=o.name;if(a===(null==I?void 0:I.id)&&(!l||l.equals(B)))return"continue";var c=r.createElement(It.Z,{key:a,item:!0,xs:12,md:4,lg:3},r.createElement(id.Z,null,r.createElement(ud.Z,{titleTypographyProps:{noWrap:!0},title:u}),r.createElement(cd.Z,null,function(){if(null===l||0===l.n)return r.createElement(Ce.Z,{color:i.compare(new(z())(0))>0?L.Z[900]:W.Z[900],clone:!0},r.createElement(vt.Z,{variant:"h6"},"Spent: ".concat(dd()(i.abs().valueOf()).format("$0,0.00"))));var e=l.sub(i),t=i.div(l).valueOf();return r.createElement(r.Fragment,null,r.createElement(Ce.Z,{color:Dd(t,900),clone:!0},r.createElement(vt.Z,{variant:"h6"},"".concat(dd()(e.valueOf()).format("$0,0.00")," Remaining"))),r.createElement(vt.Z,{variant:"body1"},"of ".concat(dd()(l.valueOf()).format("$0,0.00"))),r.createElement(Md,{spentPercentage:t,height:5}))}())));t.push(c)};for(n.s();!(e=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}return t}),[T,I,B]),U=(0,r.useCallback)((function(){return d(!0)}),[d]),$=(0,r.useMemo)((function(){return r.createElement(Ce.Z,{minWidth:120,clone:!0},r.createElement(Vo.Z,{variant:"outlined"},r.createElement(md.Z,null,"Fiscal Year"),r.createElement(vd.Z,{label:"Fiscal Year<",variant:"outlined",value:(null==O?void 0:O.id)||"",onChange:function(e){var t=e.target.value;if(t){var n,r=jd((null==Z?void 0:Z.fiscalYears)||[]);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.id===t)return void v(new Date(a.begin))}}catch(e){r.e(e)}finally{r.f()}}}},(0,F.Z)((null==Z?void 0:Z.fiscalYears)||[]).sort((function(e,t){return new Date(e.begin).getTime()-new Date(t.begin).getTime()})).map((function(e){var t=e.id,n=e.begin,a=e.end;return r.createElement(at.Z,{key:t,value:t},"".concat((0,ps.Z)(de(n),"uuuu"),"-").concat((0,ps.Z)(de(a),"uuuu")))})))))}),[Z,v,O]),Y=(0,r.useMemo)((function(){return{dialogProps:kd(kd({},ml),{},{open:s,onClose:function(){return d(!1)}}),entryProps:{paymentMethod:{accounts:o},department:{root:l,fyID:null==O?void 0:O.id}},refetchQueries:{onNewEntry:[{query:Pd,variables:E}]}}}),[s,o,null==O?void 0:O.id,l,E]);return k?r.createElement("p",null,"Loading..."):C||b?r.createElement("p",null,(null==C?void 0:C.message)||(null==b?void 0:b.message)):r.createElement(Ce.Z,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.createElement(ad.Z,null,r.createElement(Ce.Z,{padding:8},r.createElement(It.Z,{container:!0,alignItems:"center",justify:"center",spacing:4},r.createElement(It.Z,{item:!0},r.createElement(pt.Z,{variant:"contained",color:"secondary",startIcon:r.createElement(od.Z,null),onClick:U},"New Entry")),r.createElement(It.Z,{item:!0},r.createElement(pt.Z,{disabled:!O,component:i.rU,to:"/journal/".concat(a,"/").concat((null==O?void 0:O.id)||"","/reconcile"),variant:"contained",startIcon:r.createElement(cs.Z,null)},"Reconcile")),r.createElement(It.Z,{item:!0},r.createElement(pt.Z,{disabled:!O,component:i.rU,to:"/journal/".concat(a,"/").concat((null==O?void 0:O.id)||""),variant:"contained",startIcon:r.createElement(ld.Z,null)},"Journal")),r.createElement(It.Z,{item:!0},$))),r.createElement(Ce.Z,{flexGrow:1,overflow:"auto"},r.createElement(It.Z,{justify:"center",container:!0,spacing:2},r.createElement(It.Z,{item:!0,xs:12},r.createElement(vt.Z,{align:"center",variant:"h3"},M),r.createElement(Ce.Z,{color:Dd(A.valueOf())},r.createElement(vt.Z,{align:"center",variant:"h4"},"".concat(_," Remaining"))),r.createElement(vt.Z,{align:"center",variant:"subtitle1"},"of ".concat(V)),r.createElement(Md,{spentPercentage:A.valueOf(),height:10})),q)),r.createElement(mi,kd({},Y))))};var Rd;function _d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_d(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xd(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fd(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw o}}}}function Fd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Vd=(0,_.ZP)(Rd||(Rd=(0,I.Z)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"])));const Ad=function(e){var t=(0,N.a)(Vd),n=t.loading,a=t.error,o=t.data,l=(0,r.useState)(""),u=(0,x.Z)(l,2),c=u[0],s=u[1],d=(0,r.useMemo)((function(){return(null==o?void 0:o.departments)||[]}),[null==o?void 0:o.departments]),f=(0,r.useMemo)((function(){var e,t=[],n=new Set,r=xd(d);try{for(r.s();!(e=r.n()).done;){var a=e.value;"Business"===a.parent.__typename&&t.push(a),a.virtualRoot&&n.add(a.id)}}catch(e){r.e(e)}finally{r.f()}return{rootDepts:t,virtualRoots:n}}),[d]),p=f.rootDepts,m=f.virtualRoots,v=(0,r.useMemo)((function(){var e=[];if(c&&m.has(c)){var t,n=xd(d);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parent.id===c&&e.push(r)}}catch(e){n.e(e)}finally{n.f()}}return e}),[m,c,d]);(0,r.useEffect)((function(){document.title="Select Department"}));var y=(0,r.useCallback)((function(e){var t;s((null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||"")}),[s]);if(n)return r.createElement("p",null,"Loading...");if(a)return r.createElement("p",null,a.message);var h=v.length>0;return r.createElement(Ce.Z,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.createElement(ad.Z,{style:{display:"flex"}},r.createElement(Ce.Z,{padding:4,clone:!0},r.createElement(vt.Z,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.createElement(Ce.Z,{minWidth:"250px !important",clone:!0},r.createElement(Vo.Z,{variant:"filled"},r.createElement(md.Z,null,"Department"),r.createElement(vd.Z,{value:c,onChange:y,autoWidth:!0},p.map((function(e){var t=e.virtualRoot?{value:e.id,children:e.name}:{component:i.rU,to:"/department/".concat(e.id),value:e.id,children:e.name};return r.createElement(at.Z,Nd({key:e.id},t))}))))),h&&r.createElement(Ce.Z,{pt:2},r.createElement(Ce.Z,{pt:2,minWidth:"250px !important",clone:!0},r.createElement(Vo.Z,{variant:"filled"},r.createElement(md.Z,null,"Sub Department"),r.createElement(vd.Z,{autoWidth:!0},v.map((function(e){var t={component:i.rU,to:"/department/".concat(e.id),value:e.id,children:e.name};return r.createElement(at.Z,Nd({key:e.id},t))}))))))))};var Td,Bd=function(){var e=(0,R.UO)().id,t=(0,r.useMemo)((function(){return{id:{eq:e}}}),[e]),n=(0,r.useMemo)((function(){return{}}),[]);return e?r.createElement(Id,{selectableDepts:t,selectableAccounts:n,deptId:e}):r.createElement("div",null,"Error: No Dept ID!")},qd=(0,_.Ps)(Td||(Td=(0,I.Z)(["\n  query DepartmentName($id: ID!) {\n    department(id: $id) {\n      __typename\n      id\n      name\n    }\n  }\n"]))),Wd=function(e){var t,n=e.reconcileMode,a=(0,R.UO)(),o=a.id,l=void 0===o?"":o,i=a.fiscalYear,u=(0,r.useMemo)((function(){return{department:{id:{lte:l}},fiscalYear:{id:{eq:i}},deleted:!1}}),[l,i]),c=(0,r.useMemo)((function(){return{where:{fiscalYear:{id:{eq:i}},deleted:!1},entriesWhere:{department:{id:{lte:l}},fiscalYear:{nor:[{id:{eq:i}}]},deleted:!1}}}),[i,l]),s=(0,r.useMemo)((function(){return{id:{eq:l}}}),[l]),d=(0,r.useMemo)((function(){return{}}),[]),f=(0,N.a)(qd,(0,r.useMemo)((function(){return{skip:!l,variables:{id:l}}}),[l])),p=f.loading,m=f.error,v=f.data;return m?r.createElement(vt.Z,{color:"error"},m.message):r.createElement(Ys,{fiscalYear:i,title:null===(t=null==v?void 0:v.department)||void 0===t?void 0:t.name,reconcileMode:n,loading:p,where:u,refundsWhere:c,selectableDepts:s,selectableAccounts:d})},Ld=function(){return r.createElement(Wd,{reconcileMode:!0})};const Ud=function(){return r.createElement(R.Z5,null,r.createElement(R.AW,{path:"/",element:r.createElement(Ad,null)}),r.createElement(R.AW,{path:"department/:id",element:r.createElement(Bd,null)}),r.createElement(R.AW,{path:"journal"},r.createElement(R.AW,{path:":id/:fiscalYear",element:r.createElement(Wd,null)}),r.createElement(R.AW,{path:":id/:fiscalYear/reconcile",element:r.createElement(Ld,null)})))};a.render(r.createElement((function(){return r.createElement(r.Fragment,null,r.createElement(l.ZP,null),r.createElement(o.e,{client:P},r.createElement(i.VK,null,r.createElement(Ud,null))))}),null),document.getElementById("root"))}},e=>{e.O(0,[693],(()=>(9685,e(e.s=9685)))),e.O()}]);
//# sourceMappingURL=main.e51b274c58d5468a08b5.js.map