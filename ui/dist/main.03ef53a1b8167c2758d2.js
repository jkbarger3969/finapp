(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{397:function(e){e.exports=JSON.parse('{"__schema":{"types":[{"kind":"UNION","name":"BudgetOwner","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"DepartmentAncestor","possibleTypes":[{"name":"Department"},{"name":"Business"}]},{"kind":"UNION","name":"PaymentMethodAuthorizedEntity","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]},{"kind":"UNION","name":"JournalEntrySource","possibleTypes":[{"name":"Person"},{"name":"Business"},{"name":"Department"}]}]}}')},5771:function(e,n,t){"use strict";t.r(n);var a,r,l,o,i,u,c,d,s,m=t(0),f=t.n(m),p=t(33),v=t.n(p),b=t(75),y=t(5809),E=t(120),O=t(134),h=t(303),g=t(397),j=new h.b({introspectionQueryResultData:g}),w=new h.a({fragmentMatcher:j,addTypename:!0}),R={},C=t(420),M=t(399),A=t(62),k=t(401),_=t(158),S=new C.a({uri:"/graphql",credentials:"same-origin"}),I=new M.a({uri:"ws://".concat(window.location.host,"/graphql"),options:{reconnect:!0}}),D=A.a.from([Object(k.a)((function(e){var n=e.graphQLErrors,t=e.networkError;n&&n.forEach((function(e){var n=e.message,t=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(n,", Location: ").concat(t,", Path: ").concat(a))})),t&&console.log("[Network error]: ".concat(t))})),A.a.split((function(e){var n=e.query,t=Object(_.a)(n);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),I,S)]),F=new O.a({link:D,cache:w,resolvers:R}),T=t(17),x=t.n(T),P=t(133),$=t(41),N=t.n($),q=t(53),L=t.n(q),B=t(10),U=t.n(B),W=t(20),V=t.n(W),J=t(38),G=t.n(J),z=t(173),Y=t.n(z),K=t(25),X=t(63),Q=t.n(X),H=t(5845),Z=t(409),ee=t(5841),ne=t(5842),te=t(5837),ae=t(5820),re=t(5838),le=t(289),oe=t(362),ie=t(363),ue=t(359),ce=t(64),de=t(167),se=t(164),me=t(42),fe=t(18),pe=t.n(fe),ve=t(419),be=t(174),ye=t(23),Ee=t.n(ye),Oe=(t(5770),t(171)),he=t(410),ge=t(411);function je(){var e=x()(["\n  subscription JournalEntryUpdated_1 {\n    journalEntryUpdated {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return je=function(){return e},e}function we(){var e=x()(["\n  subscription JournalEntryAdded_1 {\n    journalEntryAdded {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return we=function(){return e},e}function Re(){var e=x()(['\n  query JournalEntries_1($where: JournalEntiresWhere!) {\n    journalEntries(where: $where)\n      @connection(key: "JournalEntries_1", filter: ["where"]) {\n      ...JournalEntry_1Fragment\n    }\n    fiscalYears {\n      __typename\n      id\n      name\n      begin\n      end\n    }\n  }\n  ',"\n"]);return Re=function(){return e},e}function Ce(){var e=x()(["\n  fragment JournalEntry_1Fragment on JournalEntry {\n    __typename\n    id\n    date\n    dateOfRecord {\n      date\n      overrideFiscalYear\n    }\n    department {\n      __typename\n      id\n      name\n      ancestors {\n        __typename\n        ... on Business {\n          id\n          bizName: name\n        }\n        ... on Department {\n          id\n          deptName: name\n        }\n      }\n    }\n    type\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    description\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    source {\n      __typename\n      ... on Person {\n        id\n        name {\n          first\n          last\n        }\n      }\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n    total {\n      n\n      d\n      s\n    }\n    refunds {\n      ...JournalEntryRefund_1Fragment\n    }\n    items {\n      ...JournalEntryItem_1Fragment\n    }\n    deleted\n    lastUpdate\n    reconciled\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Ce=function(){return e},e}function Me(){var e=x()(["\n  fragment JournalEntryItem_1Fragment on JournalEntryItem {\n    __typename\n    id\n    category {\n      ...JournalEntryCategory_1Fragment\n    }\n    department {\n      ...JournalEntryDept_1Fragment\n    }\n    total {\n      n\n      d\n      s\n    }\n    units\n    description\n    lastUpdate\n    deleted\n  }\n  ","\n  ","\n"]);return Me=function(){return e},e}function Ae(){var e=x()(["\n  fragment JournalEntryRefund_1Fragment on JournalEntryRefund {\n    __typename\n    id\n    date\n    description\n    total {\n      n\n      d\n      s\n    }\n    paymentMethod {\n      ...JournalEntryPayMethod_1Fragment\n    }\n    reconciled\n    lastUpdate\n    deleted\n  }\n  ","\n"]);return Ae=function(){return e},e}function ke(){var e=x()(["\n  fragment JournalEntryDept_1Fragment on Department {\n    __typename\n    id\n    name\n    ancestors {\n      __typename\n      ... on Business {\n        id\n        bizName: name\n      }\n      ... on Department {\n        id\n        deptName: name\n      }\n    }\n  }\n"]);return ke=function(){return e},e}function _e(){var e=x()(["\n  fragment JournalEntryCategory_1Fragment on JournalEntryCategory {\n    __typename\n    id\n    type\n    name\n  }\n"]);return _e=function(){return e},e}function Se(){var e=x()(["\n  fragment JournalEntryPayMethod_1Fragment on PaymentMethod {\n    __typename\n    id\n    name\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Se=function(){return e},e}!function(e){e.Business="BUSINESS",e.Department="DEPARTMENT"}(a||(a={})),function(e){e.Public="PUBLIC",e.Private="PRIVATE"}(r||(r={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT"}(l||(l={})),function(e){e.Include="INCLUDE",e.Exclude="EXCLUDE"}(o||(o={})),function(e){e.Business="BUSINESS",e.Department="DEPARTMENT",e.Person="PERSON"}(i||(i={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(u||(u={})),function(e){e.Pos="POS",e.Neg="NEG"}(c||(c={})),function(e){e.CaseInsensitive="CaseInsensitive",e.Multiline="Multiline",e.Extended="Extended",e.DotAll="DotAll",e.I="I",e.M="M",e.X="X",e.S="S"}(d||(d={})),function(e){e.Asc="ASC",e.Desc="DESC"}(s||(s={}));var Ie=pe()(Se()),De=pe()(_e()),Fe=pe()(ke()),Te=pe()(Ae(),Ie),xe=pe()(Me(),De,Fe),Pe=pe()(Ce(),Ie,Fe,De,Te,xe),$e=pe()(Re(),Pe),Ne=(pe()(we(),Pe),pe()(je(),Pe),"5dc46d0af74afb2c2805bd54"),qe=t(5815),Le=t(5816),Be=t(5817),Ue=t(5818),We=t(5819),Ve=t(5821),Je=t(5822),Ge=t(5823),ze=t(5824),Ye=t(5825),Ke=t(5826),Xe=t(5827),Qe=t(5828),He=t(5829),Ze={Add:Object(m.forwardRef)((function(e,n){return f.a.createElement(qe.a,Object.assign({},e,{ref:n}))})),Check:Object(m.forwardRef)((function(e,n){return f.a.createElement(Le.a,Object.assign({},e,{ref:n}))})),Clear:Object(m.forwardRef)((function(e,n){return f.a.createElement(Be.a,Object.assign({},e,{ref:n}))})),Delete:Object(m.forwardRef)((function(e,n){return f.a.createElement(Ue.a,Object.assign({},e,{ref:n}))})),DetailPanel:Object(m.forwardRef)((function(e,n){return f.a.createElement(We.a,Object.assign({},e,{ref:n}))})),Edit:Object(m.forwardRef)((function(e,n){return f.a.createElement(ae.a,Object.assign({},e,{ref:n}))})),Export:Object(m.forwardRef)((function(e,n){return f.a.createElement(Ve.a,Object.assign({},e,{ref:n}))})),Filter:Object(m.forwardRef)((function(e,n){return f.a.createElement(Je.a,Object.assign({},e,{ref:n}))})),FirstPage:Object(m.forwardRef)((function(e,n){return f.a.createElement(Ge.a,Object.assign({},e,{ref:n}))})),LastPage:Object(m.forwardRef)((function(e,n){return f.a.createElement(ze.a,Object.assign({},e,{ref:n}))})),NextPage:Object(m.forwardRef)((function(e,n){return f.a.createElement(We.a,Object.assign({},e,{ref:n}))})),PreviousPage:Object(m.forwardRef)((function(e,n){return f.a.createElement(Ye.a,Object.assign({},e,{ref:n}))})),ResetSearch:Object(m.forwardRef)((function(e,n){return f.a.createElement(Be.a,Object.assign({},e,{ref:n}))})),Search:Object(m.forwardRef)((function(e,n){return f.a.createElement(Ke.a,Object.assign({},e,{ref:n}))})),SortArrow:Object(m.forwardRef)((function(e,n){return f.a.createElement(Xe.a,Object.assign({},e,{ref:n}))})),ThirdStateCheck:Object(m.forwardRef)((function(e,n){return f.a.createElement(Qe.a,Object.assign({},e,{ref:n}))})),ViewColumn:Object(m.forwardRef)((function(e,n){return f.a.createElement(He.a,Object.assign({},e,{ref:n}))}))},en=t(27),nn=t(34),tn=t(5785),an=t(5811),rn=t(5810),ln=t(5787),on=t(5802),un=t(5788),cn=t(148),dn=t(5833),sn=t(5834);function mn(){var e=x()(["\n  mutation AddEntryRefund(\n    $id: ID!\n    $fields: JournalEntryAddRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n  ) {\n    journalEntryAddRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return mn=function(){return e},e}var fn,pn=pe()(mn(),Te),vn=function(){var e=N()(V.a.mark((function e(n,t,a){var r,l,o,i,u,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=void 0,d=a.paymentMethod.value[a.paymentMethod.value.length-1],o="string"==typeof d?{paymentMethod:"",paymentMethodAdd:{parent:a.paymentMethod.value[a.paymentMethod.value.length-2].id,refId:d,name:d,active:!1}}:{paymentMethod:d.id,paymentMethodAdd:null},i=o.paymentMethod,u=o.paymentMethodAdd,c={id:t,fields:{date:a.date.value,description:(null===(r=a.description)||void 0===r?void 0:r.trim())?a.description.trim():null,paymentMethod:i,total:a.total.value,reconciled:null!==(l=a.reconciled)&&void 0!==l?l:null},paymentMethodAdd:u},e.next=4,n.mutate({mutation:pn,variables:c});case 4:case"end":return e.stop()}var d}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),bn=t(30),yn=t.n(bn),En=t(45),On=t(287),hn=t(119),gn=t(169),jn=t(5830),wn=t(5831),Rn=t(5832),Cn=function(e){return function(n){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return{inputValue:n,value:e.apply(void 0,[n].concat(a))}}};!function(e){e[e.NOTIFICATION=0]="NOTIFICATION",e[e.ERROR=1]="ERROR",e[e.FATAL_ERROR=2]="FATAL_ERROR"}(fn||(fn={}));var Mn=function(){var e=Object(en.c)(),n=e.setStatus,t=e.status,a=Object(m.useCallback)((function(e){t?e&&!Object.keys(e).some((function(n){return e[n]!==t[n]}))||n(e):e&&n(e)}),[n,t]);return[null!=t?t:null,a]};function An(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function kn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?An(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):An(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var _n={inputMode:"numeric"},Sn={tabIndex:-1},In=Cn((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0],r=n[1];return a&&Object(gn.a)(a)?Object(jn.a)(a):r||""})),Dn=function(e){var n,t,a,r=e.autoFocus,l=void 0!==r&&r,o=e.disabled,i=void 0!==o&&o,u=e.maxDate,c=void 0===u?new Date:u,d=e.minDate,s=e.variant,p=void 0===s?"filled":s,v=yn()(e,["variant"]),b=Object(en.c)().isSubmitting,y=Object(m.useCallback)((function(e){var n=((null==e?void 0:e.value)||"").trim();if(!n)return"Date is Required";var t=Object(wn.a)(n);return Object(gn.a)(t)?d&&t<d?"Cannot be before ".concat(Object(ve.a)(d,"MM/dd/yyyy")):c<t?"Cannot be after ".concat(Object(ve.a)(c,"MM/dd/yyyy")):void 0:"Invalid Date"}),[d,c]),E=Object(en.b)({name:"date",validate:y}),O=U()(E,3),h=O[0],g=O[1],j=O[2],w=null!==(t=null===(n=h.value)||void 0===n?void 0:n.inputValue)&&void 0!==t?t:null,R=g.error,C=g.touched,M=j.setValue,A=j.setTouched,k=null===(a=g.initialValue)||void 0===a?void 0:a.inputValue,_=Object(m.useMemo)((function(){return k&&Object(gn.a)(k)?k:new Date}),[k]),S=Object(m.useMemo)((function(){return{autoFocus:l}}),[l]),I=Object(m.useRef)(!1),D=Object(m.useCallback)((function(){return setTimeout((function(){I.current||A(!0)}),0)}),[A,I]),F=Object(m.useCallback)((function(){return I.current=!0}),[I]),T=Object(m.useCallback)((function(){I.current=!1,D()}),[I,D]),x=Object(m.useCallback)((function(e,n){M(In(e&&Object(gn.a)(e)?Object(Rn.a)([new Date,e]):e,n))}),[M]),P=Mn(),$=U()(P,1)[0],N=Object(m.useMemo)((function(){return kn(kn({},h),{},{disabled:b||i||(null==$?void 0:$.type)===fn.FATAL_ERROR,value:w,error:C&&!!R,helperText:C?R:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:p,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date",initialFocusedDate:_,autoOk:!0,InputProps:S,inputProps:_n,placeholder:"mm/dd/yyyy",KeyboardButtonProps:Sn,onBlur:D,onOpen:F,onClose:T,onChange:x})}),[w,_,D,R,p,S,b,h,F,T,x,C,i,$]);return f.a.createElement(En.a,{utils:hn.default},f.a.createElement(On.b,Object.assign({maxDate:c},v,N)))},Fn=t(247),Tn=function(e){var n,t=e.autoFocus,a=void 0!==t&&t,r=e.disabled,l=void 0!==r&&r,o=e.variant,i=void 0===o?"filled":o,u=yn()(e,["autoFocus","disabled","variant"]),c=Object(en.b)({name:"description"}),d=U()(c,3),s=d[0],p=d[2].setValue,v=Object(m.useCallback)((function(e){var n,t;p((null===(t=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.value)||void 0===t?void 0:t.trimLeft())||null)}),[p]),b=Object(m.useMemo)((function(){return{type:"text",autoFocus:a}}),[a]),y=Mn(),E=U()(y,1)[0];return f.a.createElement(Fn.a,Object.assign({},u,s,{disabled:l||(null==E?void 0:E.type)===fn.FATAL_ERROR,onChange:v,value:null!==(n=s.value)&&void 0!==n?n:"",variant:i,label:"Description",name:"description",InputProps:b}))},xn=t(295),Pn=(t(292),function(e){return{n:Math.abs(e.n),d:Math.abs(e.d),s:-1===e.s?c.Neg:c.Pos}}),$n=function(e){return new Ee.a({n:e.s===c.Neg?-Math.abs(e.n):Math.abs(e.n),d:Math.abs(e.d)})},Nn={min:"0.00",step:"0.01"},qn=Cn((function(e){return"string"!=typeof e||e.trim()?Pn(new Ee.a(e).round(2)):Pn(new Ee.a(0))})),Ln=function(e){var n,t,a=e.autoFocus,r=void 0!==a&&a,l=e.disabled,o=void 0!==l&&l,i=e.variant,u=void 0===i?"filled":i,c=e.maxTotal,d=void 0===c?new Ee.a(Number.MAX_SAFE_INTEGER):c,s=e.minTotal,p=void 0===s?new Ee.a(0):s,v=yn()(e,["autoFocus","disabled","variant","maxTotal","minTotal"]),b=new Ee.a(1,100).compare(p)>0?new Ee.a(1,100):p,y=Object(m.useCallback)((function(e){var n,t;if(!e||null===(t=null===(n=e.inputValue)||void 0===n?void 0:n.trim())||void 0===t||!t)return"Total Required";var a=$n(e.value);return Number.isNaN(Number.parseInt(e.inputValue))?"Invalid Number":a.compare(d)>0?"Cannot be greater than ".concat(Q()(d.valueOf()).format("$0,0.00")):0===a.compare(new Ee.a(0))?"Cannot be 0":a.compare(b)<0?"Cannot be less than ".concat(Q()(b.valueOf()).format("$0,0.00")):void 0}),[b,d]),E=Object(en.b)({name:"total",validate:y}),O=U()(E,3),h=O[0],g=O[1],j=O[2].setValue,w=null!==(t=null===(n=h.value)||void 0===n?void 0:n.inputValue)&&void 0!==t?t:"",R=g.error,C=g.touched,M=Object(m.useMemo)((function(){return{type:"number",autoFocus:r,startAdornment:f.a.createElement(xn.a,{position:"start"},"$")}}),[r]),A=Object(m.useCallback)((function(e){var n,t;j(qn((null===(t=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.value)||void 0===t?void 0:t.toString())||""))}),[j]),k=Object(m.useMemo)((function(){var e=new Ee.a(Number.MAX_SAFE_INTEGER),n=new Ee.a(1,100);return C&&R?R:0!==d.compare(e)&&b.compare(n)>0?"Max ".concat(Q()(d.valueOf()).format("$0,0.00")," & Min ").concat(Q()(b.valueOf()).format("$0,0.00")):0!==d.compare(e)?"Max ".concat(Q()(d.valueOf()).format("$0,0.00")):b.compare(n)>0?"Min ".concat(Q()(b.valueOf()).format("$0,0.00")):""}),[C,R,d,b]),_=Mn(),S=U()(_,1)[0];return f.a.createElement(Fn.a,Object.assign({},v,h,{disabled:o||(null==S?void 0:S.type)===fn.FATAL_ERROR,type:"number",value:w,error:C&&!!R,helperText:k,placeholder:"0.00",label:"Total",name:"total",required:!0,variant:u,inputProps:Nn,InputProps:M,onChange:A}))},Bn=t(377),Un=t(392),Wn={type:"checkbox"},Vn=function(e){var n,t=e.label,a=e.disabled,r=void 0!==a&&a,l=yn()(e,["label","disabled"]),o=Object(en.b)({name:"reconciled",type:"checkbox"}),i=U()(o,1)[0],u=null!==(n=i.value)&&void 0!==n&&n,c=Mn(),d=U()(c,1)[0];return t?f.a.createElement(Bn.a,Object.assign({},l,i,{value:u,disabled:r||(null==d?void 0:d.type)===fn.FATAL_ERROR,label:"Reconcile",control:f.a.createElement(Un.a,{inputProps:Wn})})):f.a.createElement(Un.a,Object.assign({},l,i,{value:u,disabled:r||(null==d?void 0:d.type)===fn.FATAL_ERROR,inputProps:Wn}))},Jn=t(395);function Gn(){var e=x()(["\n  fragment PayMethodEntryOptFragment on PaymentMethod {\n    __typename\n    id\n    refId\n    name\n    active\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Gn=function(){return e},e}function zn(){var e=x()(["\n  fragment SrcEntryBizOptFragment on Business {\n    __typename\n    id\n    name\n    vendor {\n      approved\n      vendorId\n    }\n    departments {\n      ...SrcEntryDeptOptFragment\n    }\n  }\n  ","\n"]);return zn=function(){return e},e}function Yn(){var e=x()(["\n  fragment SrcEntryDeptOptFragment on Department {\n    __typename\n    id\n    name\n    parent {\n      ... on Business {\n        __typename\n        id\n      }\n      ... on Department {\n        __typename\n        id\n      }\n    }\n  }\n"]);return Yn=function(){return e},e}function Kn(){var e=x()(["\n  fragment SrcEntryPersonOptFragment on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return Kn=function(){return e},e}function Xn(){var e=x()(["\n  fragment CatEntryOptFragment on JournalEntryCategory {\n    __typename\n    id\n    name\n    type\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Xn=function(){return e},e}function Qn(){var e=x()(["\n  fragment DeptEntryOptFragment on Department {\n    __typename\n    id\n    name\n    budgets {\n      id\n      __typename\n      fiscalYear {\n        __typename\n        id\n      }\n    }\n    parent {\n      __typename\n      ... on Business {\n        id\n      }\n      ... on Department {\n        id\n      }\n    }\n  }\n"]);return Qn=function(){return e},e}function Hn(){var e=x()(["\n  query FiscalYear($date: String) {\n    fiscalYears(where: { hasDate: { eq: $date } }) {\n      __typename\n      id\n    }\n  }\n"]);return Hn=function(){return e},e}var Zn=pe()(Hn()),et=pe()(Qn()),nt=pe()(Xn()),tt=pe()(Kn()),at=pe()(Yn()),rt=pe()(zn(),at),lt=pe()(Gn()),ot=t(5844);function it(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ut(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?it(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):it(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function ct(){var e=x()(["\n  query PayMethodEntryOpts($where: PaymentMethodWhereInput!) {\n    paymentMethods(where: $where) {\n      ...PayMethodEntryOptFragment\n    }\n  }\n  ","\n"]);return ct=function(){return e},e}var dt=pe()(ct(),lt),st=function(e){var n,t,a=null!==(n=null==e?void 0:e.value)&&void 0!==n?n:[],r=a.length,l=a[r-1],o=a[r-2];if(void 0===l)return"Method Required";if("string"==typeof l){if((null==o?void 0:o.id)===Ne&&!(null!==(t=l.match(/[0-9]/g))&&void 0!==t?t:[]).join(""))return"Check # Required"}else if(l.id===Ne)return"Check # Required"},mt=function(e){return"string"==typeof e?e:e.name},ft=function(e,n){var t=e.length-1;return e.map((function(a,r){var l,o,i=t===r,u=n({index:r}),c=u.key,d=yn()(u,["key"]),s=e[r-1],m="string"==typeof a;switch(null==s?void 0:s.id){case Ne:l="CK-"+(m?a:a.name);break;default:l=mt(a)}if(i){if(!m)switch(a.id){case Ne:o=f.a.createElement("span",null,"CK-")}}else o=f.a.createElement(We.a,{fontSize:"small"});return f.a.createElement(le.a,{key:c,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(Jn.a,Object.assign({color:i?"primary":"default",variant:i?"default":"outlined",label:l,size:"medium"},d,{disabled:!i}))," ",o)}))},pt=function(e){var n,t,a,r,l,o=e.disabled,i=void 0!==o&&o,u=yn()(e,["disabled"]),c=Object(m.useState)(!1),d=U()(c,2),s=d[0],p=d[1],v=Object(en.b)({name:"paymentMethod",validate:st}),b=U()(v,3),y=b[0],E=b[1],O=b[2],h=y.onBlur,g=null!==(t=null===(n=y.value)||void 0===n?void 0:n.value)&&void 0!==t?t:[],j=null!==(r=null===(a=y.value)||void 0===a?void 0:a.inputValue)&&void 0!==r?r:"",w=E.error,R=E.touched,C=O.setValue,M=null!==(l=g[g.length-1])&&void 0!==l?l:null,A=Object(m.useMemo)((function(){return null===M?{where:{hasParent:!1}}:{where:{parent:{eq:M.id}}}}),[M]),k=Mn(),_=U()(k,2),S=_[0],I=_[1],D=Object(m.useCallback)((function(e){I({msg:e.message,type:fn.FATAL_ERROR})}),[I]),F=Object(K.c)(dt,{skip:"string"==typeof M,variables:A,onError:D}),T=F.loading,x=F.error,P=F.data,$=Object(m.useMemo)((function(){return(null==P?void 0:P.paymentMethods)&&"string"!=typeof M&&(null==M?void 0:M.id)!==Ne?P.paymentMethods:[]}),[P,M]),N=$.length>0,q=Object(m.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Ne}),[M]),L=Object(m.useMemo)((function(){return!N&&!q}),[N,q]),B=Object(m.useMemo)((function(){var e;return"string"==typeof M||(null===(e=M)||void 0===e?void 0:e.id)===Ne?"Check #":"Payment Method"}),[M]),W=Object(m.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Ne?{type:"number"}:{}}),[M]),V=Object(m.useMemo)((function(){var e;return(null===(e=M)||void 0===e?void 0:e.id)===Ne?{min:"0",step:"1"}:{}}),[M]),J=Object(m.useCallback)((function(e){var n,t;e.InputProps=ut(ut({},null!==(n=e.InputProps)&&void 0!==n?n:{}),W),e.inputProps=ut(ut({},null!==(t=e.inputProps)&&void 0!==t?t:{}),V);var a=x?x.message:R?w:void 0;return f.a.createElement(Fn.a,Object.assign({},u,e,{variant:u.variant||"filled",error:R&&!!w||!!x,helperText:a,name:"paymentMethod",label:B}))}),[u,R,x,w,B,W,V]),G=Object(m.useCallback)((function(){return p(!0)}),[p]),z=Object(m.useCallback)((function(e){p(!1),e.persist(),setTimeout((function(){h(e)}),0)}),[p,h]),Y=Object(m.useCallback)((function(e,n){C({inputValue:j,value:n})}),[C,j]),X=Object(m.useCallback)((function(e,n){n=(n||"").trimStart(),L||C({inputValue:n,value:g})}),[C,g,L]),Q=Object(m.useMemo)((function(){return{value:g,disabled:!!x||T||(null==S?void 0:S.type)===fn.FATAL_ERROR||i,multiple:!0,options:$,renderInput:J,renderTags:ft,freeSolo:q,getOptionLabel:mt,onChange:Y,onInputChange:X,inputValue:L?"":j,onFocus:G,onBlur:z,open:s&&N&&(null==S?void 0:S.type)!==fn.FATAL_ERROR,loading:T,autoSelect:!0,name:"paymentMethod"}}),[$,g,J,q,Y,X,j,L,G,z,s,N,T,x,i,S]);return f.a.createElement(ot.a,Object.assign({},Q))},vt=t(356),bt=t(188),yt=function(e){var n=Object(nn.a)(),t=e.opacity,a=void 0===t?.62:t,r=yn()(e,["opacity"]);return f.a.createElement(le.a,Object.assign({},r,{overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:Object(bt.fade)(n.palette.background.paper,a)}))},Et=function(e){return f.a.createElement(yt,Object.assign({},e),f.a.createElement(vt.a,null))};function Ot(){var e=x()(["\n  fragment JournalEntry_2Fragment on JournalEntry {\n    __typename\n    id\n    date\n    type\n    total {\n      n\n      d\n      s\n    }\n    refunds {\n      id\n      __typename\n      deleted\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n"]);return Ot=function(){return e},e}var ht=pe()(Ot());function gt(){var e=x()(["\n  query GetEntryRefundInfo_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_2Fragment\n    }\n  }\n  ","\n"]);return gt=function(){return e},e}var jt=pe()(gt(),ht),wt=Symbol(),Rt=function(e){var n,t,a,r,l=e.entryId,o=e.open,i=e.onClose,c=e.onExited,d=e.handleSubmit,s=Object(en.c)(),p=s.resetForm,v=s.isSubmitting,b=s.isValid,y=Mn(),E=U()(y,2),O=E[0],h=E[1],g=Object(m.useCallback)((function(e){return h({msg:e.message,type:fn.FATAL_ERROR})}),[h]),j=Object(K.c)(jt,{skip:!l,variables:{id:l},onError:g}),w=j.loading,R=j.error,C=j.data,M=null===(n=null==C?void 0:C.journalEntry)||void 0===n?void 0:n.total,A=(null===(t=null==C?void 0:C.journalEntry)||void 0===t?void 0:t.refunds)||[],k=Object(m.useMemo)((function(){if(M){var e=A.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:e.add($n(a))}),new Ee.a(0));return $n(M).sub(e)}return new Ee.a(Number.MAX_SAFE_INTEGER)}),[M,A]),_=null===(a=null==C?void 0:C.journalEntry)||void 0===a?void 0:a.date,S=Object(m.useMemo)((function(){return _?new Date(_):void 0}),[_]),I=Object(m.useCallback)((function(){c(),p(),h(null)}),[p,c,h]),D=Object(m.useMemo)((function(){return!O||O.type!==fn.FATAL_ERROR&&O.type!==fn.ERROR?[null,null]:[O.msg,O.type===fn.FATAL_ERROR]}),[O]),F=U()(D,2),T=F[0],x=F[1],P=null===(r=null==C?void 0:C.journalEntry)||void 0===r?void 0:r.type,$=Object(m.useMemo)((function(){var e=w||R||(null!=P?P:wt)===wt?"Refund":"".concat(P===u.Credit?"Give":"Add"," Refund");return x?"Fatal Error":w?"Loading ".concat(e,"..."):v?"Submitting ".concat(e):e}),[w,R,P,x,v]),N=Object(nn.a)();return f.a.createElement(tn.a,{open:o,onClose:i,onExited:I,disableBackdropClick:v,disableEscapeKeyDown:v,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:d}},f.a.createElement(an.a,{style:T?{color:N.palette.error.main}:void 0},$),f.a.createElement(le.a,{position:"relative"},(w||v)&&!T&&f.a.createElement(Et,{zIndex:"modal"}),!!T&&x&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},T)),f.a.createElement(ln.a,{dividers:!0},!!T&&!x&&f.a.createElement(rn.a,{color:"error"},T),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Dn,{minDate:S,disabled:w||v,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Tn,{disabled:w||v,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(pt,{disabled:w||v,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Ln,{disabled:w||v,fullWidth:!0,maxTotal:k})),f.a.createElement(on.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},f.a.createElement(Vn,{disabled:w||v,label:!0}))))),f.a.createElement(un.a,null,!x&&f.a.createElement(cn.a,{disabled:w||v||!b,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Add"),f.a.createElement(cn.a,{disabled:w||v,color:x?"primary":"default",startIcon:!x&&f.a.createElement(sn.a,null),onClick:i},x?"Ok":"Cancel")))},Ct=function(e){var n=e.entryId,t=e.open,a=e.onClose,r=e.onExited,l=Object(m.useMemo)((function(){return{}}),[]),o=Object(K.a)(),i=Object(m.useCallback)(function(){var e=N()(V.a.mark((function e(t,r){var l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r.setStatus(null),e.next=4,vn(o,n||"",t,r);case 4:a(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r.setStatus({msg:null!==(l=e.t0.message)&&void 0!==l?l:"".concat(e.t0),type:fn.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[o,n,a]),u=Object(m.useCallback)((function(e){return f.a.createElement(Rt,{entryId:n,open:t,onClose:a,onExited:r,handleSubmit:e.handleSubmit})}),[n,t,a,r]);return f.a.createElement(en.a,{initialValues:l,initialStatus:null,enableReinitialize:!0,onSubmit:i},u)},Mt=t(407);function At(){var e=x()(["\n  mutation UpdateRefund(\n    $id: ID!\n    $fields: JournalEntryUpdateRefundFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n  ) {\n    journalEntryUpdateRefund(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n    ) {\n      id\n      __typename\n      refunds {\n        ...JournalEntryRefund_1Fragment\n      }\n    }\n  }\n  ","\n"]);return At=function(){return e},e}var kt=pe()(At(),Te),_t=function(){var e=N()(V.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,m;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(Mt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,u=r.description!==t.description?null!==(o=null===(l=r.description)||void 0===l?void 0:l.trim())&&void 0!==o?o:"":null,c=0===$n(r.total.value).compare($n(t.total.value))?null:r.total.value,d=r.reconciled===t.reconciled?null:r.reconciled,f=void 0,p=void 0,v=void 0,b=void 0,y=void 0,f=t.paymentMethod.value[t.paymentMethod.value.length-1],p=r.paymentMethod.value.slice(-2).reverse(),v=U()(p,2),b=v[0],y=v[1],s="string"==typeof b?f.parent&&f.parent.id===Ne?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:f.id,fields:{active:null,refId:b,name:b}}}:{paymentMethod:null,paymentMethodAdd:{parent:y.id,refId:b,name:b,active:!1},paymentMethodUpdate:null}:b.id!==f.id?{paymentMethod:b.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null},m={id:a,fields:{date:i,description:u,total:c,reconciled:d,paymentMethod:s.paymentMethod},paymentMethodAdd:s.paymentMethodAdd,paymentMethodUpdate:s.paymentMethodUpdate},e.next=8,n.mutate({mutation:kt,variables:m});case 8:case"end":return e.stop()}var f,p,v,b,y}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function St(){var e=x()(["\n  query UpdateRefundIniState($entryId: ID!, $refundId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_2Fragment\n    }\n    journalEntryRefund(id: $refundId) {\n      __typename\n      id\n      date\n      description\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      total {\n        n\n        d\n        s\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n"]);return St=function(){return e},e}var It=pe()(St(),ht,lt),Dt=function(e){var n=e.refundId,t=e.open,a=e.onClose,r=e.onExited,l=e.journalEntry,o=e.loading,i=e.handleSubmit,u=Object(en.c)(),c=u.resetForm,d=u.isSubmitting,s=u.isValid,p=Mn(),v=U()(p,2),b=v[0],y=v[1],E=null==l?void 0:l.total,O=(null==l?void 0:l.refunds)||[],h=Object(m.useMemo)((function(){if(E){var e=O.reduce((function(e,t){var a=t.id,r=t.deleted,l=t.total;return r||a===n?e:e.add($n(l))}),new Ee.a(0));return $n(E).sub(e)}return new Ee.a(Number.MAX_SAFE_INTEGER)}),[E,O,n]),g=null==l?void 0:l.date,j=Object(m.useMemo)((function(){return g?new Date(g):void 0}),[g]),w=Object(m.useCallback)((function(){r(),c(),y(null)}),[c,r,y]),R=Object(m.useMemo)((function(){return!b||b.type!==fn.FATAL_ERROR&&b.type!==fn.ERROR?[null,null]:[b.msg,b.type===fn.FATAL_ERROR]}),[b]),C=U()(R,2),M=C[0],A=C[1],k=Object(m.useMemo)((function(){var e="Refund Update";return A?"Fatal Error":o?"Loading ".concat(e,"..."):d?"Submitting ".concat(e):e}),[o,A,d]),_=Object(nn.a)();return f.a.createElement(tn.a,{open:t,onClose:a,onExited:w,disableBackdropClick:d,disableEscapeKeyDown:d,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:i}},f.a.createElement(an.a,{style:M?{color:_.palette.error.main}:void 0},k),f.a.createElement(le.a,{position:"relative"},(o||d)&&!M&&f.a.createElement(Et,{zIndex:"modal"}),!!M&&A&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},M)),f.a.createElement(ln.a,{dividers:!0},!!M&&!A&&f.a.createElement(rn.a,{color:"error"},M),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Dn,{minDate:j,disabled:o||d||!!A,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Tn,{disabled:o||d||!!A,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(pt,{disabled:o||d||!!A,fullWidth:!0})),f.a.createElement(on.a,{item:!0,lg:4,sm:6,xs:12},f.a.createElement(Ln,{disabled:o||d||!!A,fullWidth:!0,maxTotal:h})),f.a.createElement(on.a,{item:!0,container:!0,justify:"center",alignItems:"flex-start",lg:4,md:6,sm:12},f.a.createElement(Vn,{disabled:o||d||!!A,label:!0}))))),f.a.createElement(un.a,null,!A&&f.a.createElement(cn.a,{disabled:o||d||!s,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Update"),f.a.createElement(cn.a,{disabled:o||d||!!A,color:A?"primary":"default",startIcon:!A&&f.a.createElement(sn.a,null),onClick:a},A?"Ok":"Cancel")))},Ft=function(e){var n=e.entryId,t=e.refundId,a=e.open,r=e.onClose,l=e.onExited,o=Object(K.c)(It,{skip:!n,variables:{entryId:n,refundId:t}}),i=o.loading,u=o.error,c=o.data,d=Object(m.useMemo)((function(){return u?{msg:u.message,type:fn.FATAL_ERROR}:null}),[u]),s=null==c?void 0:c.journalEntryRefund,p=Object(m.useMemo)((function(){var e;return s?{date:{inputValue:new Date(s.date),value:s.date},paymentMethod:function(){var e=s.paymentMethod,n=e.ancestors,t=yn()(e,["ancestors"]),a=L()(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),total:{inputValue:$n(s.total).round(2).toString(),value:s.total},reconciled:s.reconciled,description:null!==(e=s.description)&&void 0!==e?e:null}:{}}),[s]),v=Object(K.a)(),b=Object(m.useCallback)(function(){var e=N()(V.a.mark((function e(n,a){var l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for refund "'.concat(t,'".'),type:fn.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No refund ID.",type:fn.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,_t(v,p,t,n,a);case 12:r(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(l=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==l?l:"".concat(e.t0),type:fn.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,p,r,t]),y=Object(m.useCallback)((function(e){var o;return f.a.createElement(Dt,{entryId:n,refundId:t,open:a,onClose:r,onExited:l,journalEntry:null!==(o=null==c?void 0:c.journalEntry)&&void 0!==o?o:null,loading:i,handleSubmit:e.handleSubmit})}),[c,n,i,r,l,a,t]);return f.a.createElement(en.a,{initialValues:null!=p?p:{},initialStatus:d,enableReinitialize:!0,onSubmit:b},y)},Tt=t(5836),xt=t(172);function Pt(){var e=x()(["\n  mutation AddEntry(\n    $fields: JournalEntryAddFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryAdd(\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Pt=function(){return e},e}var $t=pe()(Pt(),Pe),Nt=function(){var e=N()(V.a.mark((function e(n,t){var a,r,l,o,u,c,d,s,m,f;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=void 0,p=t.paymentMethod.value[t.paymentMethod.value.length-1],l="string"==typeof p?{paymentMethod:"",paymentMethodAdd:{parent:t.paymentMethod.value[t.paymentMethod.value.length-2].id,refId:p,name:p,active:!1}}:{paymentMethod:p.id,paymentMethodAdd:null},o=l.paymentMethod,u=l.paymentMethodAdd,c=function(){var e=t.source.value[0],n=t.source.value[t.source.value.length-1];if("string"==typeof n){if(e===i.Person){var a=Object(xt.parseName)(n);return{source:{sourceType:i.Person,id:""},businessAdd:null,personAdd:{name:{first:a.firstName,last:a.lastName}}}}return{source:{sourceType:i.Business,id:""},businessAdd:{name:n},personAdd:null}}return{source:{sourceType:function(){switch(n.__typename){case"Business":return i.Business;case"Department":return i.Department;case"Person":return i.Person}}(),id:n.id},personAdd:null,businessAdd:null}}(),d=c.source,s=c.personAdd,m=c.businessAdd,f={fields:{date:t.date.value,dateOfRecord:null,department:t.department.id,type:t.type,category:t.category.value[t.category.value.length-1].id,description:(null===(a=t.description)||void 0===a?void 0:a.trim())||null,total:t.total.value,reconciled:null!==(r=t.reconciled)&&void 0!==r?r:null,paymentMethod:o,source:d},paymentMethodAdd:u,personAdd:s,businessAdd:m},e.next=5,n.mutate({mutation:$t,variables:f});case 5:case"end":return e.stop()}var p}),e)})));return function(n,t){return e.apply(this,arguments)}}();function qt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Lt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qt(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Bt(){var e=x()(["\n  query CatEntryOpts($where: JournalEntryCategoryWhereInput!) {\n    catOpts: journalEntryCategories(where: $where) {\n      ...CatEntryOptFragment\n    }\n  }\n  ","\n"]);return Bt=function(){return e},e}var Ut=pe()(Bt(),nt),Wt=function(e){return e.name},Vt=function(e,n){var t=e.length-1;return e.map((function(e,a){var r=t===a,l=n({index:a}),o=l.key,i=yn()(l,["key"]);return f.a.createElement(le.a,{key:o,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(Jn.a,Object.assign({color:r?"primary":"default",variant:r?"default":"outlined",label:e.name,size:"medium"},i,{disabled:!r}))," ",!r&&f.a.createElement(We.a,{fontSize:"small"}))}))},Jt=Symbol(),Gt=function(e){var n,t,a,r,l,o,i=Object(en.c)(),u=e.disabled,c=void 0!==u&&u,d=e.required,s=e.entryType,p=yn()(e,["entryType"]),v=(null===(t=null===(n=i.values)||void 0===n?void 0:n.category)||void 0===t?void 0:t.value)||[],b=(null===(r=null===(a=i.values)||void 0===a?void 0:a.category)||void 0===r?void 0:r.inputValue.trimLeft())||"",y=null!==(o=null!=s?s:null===(l=i.values)||void 0===l?void 0:l.type)&&void 0!==o?o:null,E=v[v.length-1],O=Object(m.useMemo)((function(){return(null==E?void 0:E.id)?{where:{parent:{eq:E.id},type:{eq:y}}}:{where:{hasParent:!1,type:{eq:y}}}}),[E,y]),h=Mn(),g=U()(h,2),j=g[0],w=g[1],R=Object(m.useCallback)((function(e){w({msg:e.message,type:fn.FATAL_ERROR})}),[w]),C=Object(K.c)(Ut,{skip:(null!=y?y:Jt)===Jt,variables:O,onCompleted:function(){return setTimeout((function(){return i.validateField("category")}),0)},onError:R}),M=C.loading,A=C.error,k=C.data,_=null==k?void 0:k.catOpts,S=Object(m.useMemo)((function(){return _||[]}),[_]),I=Object(m.useCallback)((function(e){var n=(null==e?void 0:e.value)||[];return n[n.length-1]||null?S.length>0?"Sub-category Required":void 0:d?"Category Required":void 0}),[S,d]),D=Object(en.b)({name:"category",validate:I}),F=U()(D,3),T=F[0],x=F[1],P=F[2],$=T.onBlur,N=x.error,q=x.touched,L=P.setValue;Object(m.useEffect)((function(){E&&y!==E.type&&L({inputValue:"",value:[]})}),[y,E,L]);var B=Object(m.useMemo)((function(){return N&&q?N:(null!=y?y:Jt)===Jt?"Category requires entry type.":A?A.message:""}),[y,N,q,A]),W=Object(m.useMemo)((function(){return M||(null==j?void 0:j.type)===fn.FATAL_ERROR||(null!=y?y:Jt)===Jt||c||v.length>0&&0===S.length}),[c,y,j,M,S.length,v.length]),V=Object(m.useCallback)((function(e){return f.a.createElement(Fn.a,Object.assign({},p,{variant:p.variant||"filled"},e,{error:q&&!!N||!!A,disabled:W,helperText:B,name:"category",label:"Category"}))}),[p,q,N,A,W,B]),J=Object(m.useState)(!1),G=U()(J,2),z=G[0],Y=G[1],X=Object(m.useCallback)((function(){return Y(!0)}),[Y]),Q=Object(m.useCallback)((function(e){Y(!1),e.persist(),setTimeout((function(){$(e)}),0)}),[Y,$]),H=Object(m.useCallback)((function(e,n){L({inputValue:b,value:n})}),[L,b]),Z=Object(m.useCallback)((function(e,n){n=(n||"").trimStart(),L({inputValue:n,value:v})}),[L,v]),ee=Object(m.useMemo)((function(){return Lt(Lt({},T),{},{open:z&&S.length>0,onFocus:X,onBlur:Q,options:S,renderTags:Vt,forcePopupIcon:!1,disabled:W,value:v,renderInput:V,loading:M,autoSelect:!0,multiple:!0,getOptionLabel:Wt,onInputChange:Z,inputValue:b,onChange:H,name:"category"})}),[T,z,S,X,Q,M,W,v,V,Z,b,H]);return f.a.createElement(ot.a,Object.assign({},ee))};function zt(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Yt(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?zt(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Kt(){var e=x()(["\n  query DeptEntryOpts($bizId: ID!) {\n    deptOpts: business(id: $bizId) {\n      __typename\n      id\n      departments {\n        ...DeptEntryOptFragment\n      }\n    }\n  }\n  ","\n"]);return Kt=function(){return e},e}var Xt=pe()(Kt(),et),Qt=function(e){return e.name},Ht=function(e,n){var t=e.length-1;return e.map((function(e,a){var r=t===a,l=n({index:a}),o=l.key,i=yn()(l,["key"]);return f.a.createElement(le.a,{key:o,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(Jn.a,Object.assign({color:r?"primary":"default",variant:r?"default":"outlined",label:e.name,size:"medium"},i,{disabled:!r}))," ",!r&&f.a.createElement(We.a,{fontSize:"small"}))}))},Zt=function(e){var n=e.disabled,t=void 0!==n&&n,a=e.required,r=e.fiscalYearId,l=yn()(e,["disabled","required","fiscalYearId"]),o="string"==typeof r,i=Mn(),u=U()(i,2),c=u[0],d=u[1],s=Object(m.useCallback)((function(e){d({msg:e.message,type:fn.FATAL_ERROR})}),[d]),p=Object(K.c)(Xt,{onError:s,variables:{bizId:"5dc4b09bcf96e166daaa0090"}}),v=p.loading,b=p.error,y=p.data,E=(null==y?void 0:y.deptOpts.departments)||[],O=Object(m.useState)(!1),h=U()(O,2),g=h[0],j=h[1],w=Object(m.useState)(""),R=U()(w,2),C=R[0],M=R[1],A=Object(m.useCallback)((function(e){return e?o?e.budgets.every((function(e){return e.fiscalYear.id!==r}))?"Department has no budget.":void 0:E.some((function(n){var t=n.parent;return"Department"===t.__typename&&t.id===e.id}))?"Sub-department Required":void 0:a?"Department Required":void 0}),[E,a,o,r]),k=Object(en.b)({name:"department",validate:A}),_=U()(k,3),S=_[0],I=_[1],D=_[2],F=S.value,T=S.onBlur,x=I.error,P=I.touched,$=D.setValue,N=Object(m.useMemo)((function(){return!!F&&!F.budgets.every((function(e){return e.fiscalYear.id!==r}))}),[F,r]),q=Object(m.useMemo)((function(){return new Map(E.reduce((function(e,n){return e.push([n.id,n]),e}),[]))}),[E]),L=Object(m.useMemo)((function(){if(!F)return[];for(var e=[F],n=F.parent,t=n.__typename,a=n.id;"Business"!==t&&q.has(a);){var r=q.get(a);e.unshift(r);var l=r.parent;t=l.__typename,a=l.id}return e}),[F,q]),B=Object(m.useMemo)((function(){var e,n=null===(e=L[L.length-1])||void 0===e?void 0:e.id;return E.filter((function(e){return n?e.parent.id===n:"Business"===e.parent.__typename}))}),[E,L]),W=Object(m.useMemo)((function(){return L.length>0&&0===B.length}),[L,B]),V=Object(m.useMemo)((function(){return x&&P?x:b?b.message:""===r?"Department requires a date.":""}),[x,P,b,r]),J=Object(m.useMemo)((function(){return v||W||(null==c?void 0:c.type)===fn.FATAL_ERROR||t||o&&!r}),[W,t,c,v,o,r]),G=Object(m.useCallback)((function(n){return f.a.createElement(Fn.a,Object.assign({},l,{required:o?!N:!!e.required,variant:e.variant||"filled"},n,{error:P&&!!x,helperText:V,name:"department",label:"Department",disabled:J}))}),[e,P,x,V,l,J,o,N]),z=Object(m.useCallback)((function(){return j(!0)}),[j]),Y=Object(m.useCallback)((function(e){j(!1),T(e)}),[j,T]),X=Object(m.useCallback)((function(e,n){if(n)if(Array.isArray(n)){var t=n.length;$(0===t?null:n[t-1])}else $(n);else $(null)}),[$]),Q=Object(m.useCallback)((function(e,n){M((n||"").trimStart())}),[M]),H=Object(m.useMemo)((function(){return Yt(Yt({},S),{},{open:g&&B.length>0,onFocus:z,onBlur:Y,options:B,renderTags:Ht,forcePopupIcon:!1,disabled:J,value:L,renderInput:G,loading:v,autoSelect:!1,multiple:!0,getOptionLabel:Qt,onChange:X,onInputChange:Q,inputValue:W?"":C,name:"department"})}),[S,g,B,z,Y,W,J,L,G,v,X,Q,C]);return b?f.a.createElement("pre",null,JSON.stringify(b,null,2)):f.a.createElement(ot.a,Object.assign({},H))},ea=t(300);function na(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ta(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?na(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):na(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function aa(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return ra(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ra(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function ra(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function la(){var e=x()(["\n  query SrcEntryOpts($name: String!, $isBiz: Boolean!) {\n    businesses(where: { name: { pattern: $name, options: I } })\n      @include(if: $isBiz) {\n      ...SrcEntryBizOptFragment\n    }\n    people(\n      where: {\n        or: [\n          { firstName: { pattern: $name, options: I } }\n          { lastName: { pattern: $name, options: I } }\n        ]\n      }\n    ) @skip(if: $isBiz) {\n      ...SrcEntryPersonOptFragment\n    }\n  }\n  ","\n  ","\n  ","\n"]);return la=function(){return e},e}var oa=pe()(la(),tt,rt,at),ia=function(e){switch(e){case i.Business:case i.Department:case i.Person:break;default:return"string"==typeof e}return!1},ua=function(e){switch(e){case i.Business:return"Vendor";case i.Department:return"Department";case i.Person:return"Person";default:if("string"==typeof e)return e}return"Person"===e.__typename?"".concat(e.personName.first," ").concat(e.personName.last):e.name},ca=function(e,n){var t=e.length-1;return e.map((function(e,a){var r=t===a,l=n({index:a}),o=l.key,i=yn()(l,["key"]);return ia(e)?e:f.a.createElement(le.a,{key:o,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},f.a.createElement(Jn.a,Object.assign({color:r?"primary":"default",variant:r?"default":"outlined",label:ua(e),size:"medium"},i,{disabled:!r}))," ",!r&&f.a.createElement(We.a,{fontSize:"small"}))}))},da=function(e,n){var t=n.inputValue,a=new RegExp("(^|\\s)".concat(t),"i");return e.filter((function(e){return a.test(ua(e))}))},sa=function(e){var n,t=(null==e?void 0:e.value)||[],a=null!==(n=t[0])&&void 0!==n?n:null,r=t.length>1?t[t.length-1]:null;if(null===a||null===r||""===r)return"Source Required";if(ia(r)&&a===i.Person){var l=Object(xt.parseName)(r);if(!l.firstName.trim())return"First Name Required";if(!l.lastName.trim())return"Last Name Required"}},ma=function(e){var n,t,a,r,l,o=e.disabled,u=void 0!==o&&o,c=Object(m.useState)(!1),d=U()(c,2),s=d[0],p=d[1],v=Object(en.b)({name:"source",validate:sa}),b=U()(v,3),y=b[0],E=b[1],O=b[2],h=y.onBlur,g=null!==(t=null===(n=y.value)||void 0===n?void 0:n.value)&&void 0!==t?t:[],j=null!==(r=null===(a=y.value)||void 0===a?void 0:a.inputValue)&&void 0!==r?r:"",w=E.error,R=E.touched,C=O.setValue,M=null!==(l=g[0])&&void 0!==l?l:null,A=g.length>1?g[g.length-1]:null,k=Object(m.useRef)(""),_=Mn(),S=U()(_,2),I=S[0],D=S[1],F=Object(m.useCallback)((function(e){D({msg:e.message,type:fn.FATAL_ERROR})}),[D]),T=Object(K.c)(oa,{skip:!k.current&&!g[1],variables:{name:k.current,isBiz:M!==i.Person},onError:F}),x=T.loading,P=T.error,$=T.data,N=Object(m.useMemo)((function(){var e,n=new Map,t=aa((null==$?void 0:$.businesses)||[]);try{for(t.s();!(e=t.n()).done;){var a,r=aa(e.value.departments);try{for(r.s();!(a=r.n()).done;){var l=a.value;n.set(l.id,l)}}catch(e){r.e(e)}finally{r.f()}}}catch(e){t.e(e)}finally{t.f()}return n}),[$]),q=Object(m.useMemo)((function(){if(null===M)return[i.Business,i.Person];if(M===i.Person)return null===A&&(null==$?void 0:$.people)||[];if(!A)return(null==$?void 0:$.businesses)||[];if("string"==typeof A)return[];var e,n=[],t=aa(N.values());try{for(t.s();!(e=t.n()).done;){var a=e.value;a.parent.__typename===A.__typename&&a.parent.id===A.id&&n.push(a)}}catch(e){t.e(e)}finally{t.f()}return n}),[M,$,N,A]),L=Object(m.useMemo)((function(){return null!==M&&null===A}),[M,A]),B=Object(m.useMemo)((function(){return g.length>0&&0===q.length&&!L}),[g,q,L]),W=Object(m.useMemo)((function(){return null===M?"Source Type":M===i.Person?"Person Name":1===g.length?"Vendor":2===g.length&&q.length>0?"Department":q.length>0?"Sub-Department":"Vendor"}),[g,q,M]),V=Object(m.useMemo)((function(){return u||B||(null==I?void 0:I.type)===fn.FATAL_ERROR}),[B,u,I]),J=Object(m.useCallback)((function(n){var t;return A&&"string"!=typeof A&&"Person"!==A.__typename&&0===q.length&&(n=ta(ta({},n),{},{inputProps:ta(ta({},(null==n?void 0:n.inputProps)||{}),{},{style:ta(ta({},(null===(t=null==n?void 0:n.inputProps)||void 0===t?void 0:t.style)||{}),{},{display:"none"})})})),f.a.createElement(Fn.a,Object.assign({},e,{variant:e.variant||"filled"},n,{error:R&&!!w,helperText:R?w:void 0,name:"source",label:W,disabled:V}))}),[A,q.length,e,R,w,W,V]),G=Object(m.useCallback)((function(){return p(!0)}),[p]),z=Object(m.useCallback)((function(e){p(!1),e.persist(),setTimeout((function(){return h(e)}),0)}),[p,h]),Y=Object(m.useCallback)((function(e,n){var t=n.length-1,a=n[t];if(ia(a)){var r,l=[],o=aa(a.split(" "));try{for(o.s();!(r=o.n()).done;){var i=r.value;i&&(ea.checkName(i)&&(i=ea(i)),l.push(i))}}catch(e){o.e(e)}finally{o.f()}var u=l.join(" ").trim();n[t]=u.charAt(0).toUpperCase()+u.substring(1)}C({inputValue:j,value:n})}),[C,j]),X=Object(m.useCallback)((function(e,n){n=(n||"").trimStart(),B||C({inputValue:n,value:g}),null!==M&&null===A&&n&&(k.current=n[0].toLowerCase())}),[C,M,A,g,B,k]),Q=Object(m.useMemo)((function(){return ta(ta({},y),{},{inputValue:B?"":j,open:s&&q.length>0,onFocus:G,onBlur:z,options:q,renderTags:ca,forcePopupIcon:!1,freeSolo:L,value:g,renderInput:J,loading:x,autoSelect:!0,multiple:!0,getOptionLabel:ua,onInputChange:X,onChange:Y,filterOptions:da,name:"source",disabled:V})}),[y,B,j,s,q,G,z,L,g,J,x,X,Y,V]);return P?f.a.createElement("pre",null,JSON.stringify(P,null,2)):f.a.createElement(ot.a,Object.assign({},Q))},fa=t(5847),pa=t(5835),va=t(361),ba=t(293),ya=t(5783);function Ea(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Oa(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ea(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ea(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ha=Symbol(),ga=function(e){if((null!=e?e:ha)===ha)return"Type Required"},ja=function(e){var n=e.disabled,t=void 0!==n&&n,a=Mn(),r=U()(a,1)[0],l=e.label,o=void 0!==l&&l,i=Object(en.c)().isSubmitting,c=Object(en.b)({name:"type",validate:ga}),d=U()(c,3),s=d[0],p=d[1],v=d[2],b=p.error,y=p.touched,E=v.setValue,O=v.setTouched,h=Object(m.useMemo)((function(){return Oa(Oa({size:"small",exclusive:!0,disabled:i},s),{},{onChange:(e=N()(V.a.mark((function e(n,t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null!=t?t:ha)!==ha){e.next=2;break}return e.abrupt("return");case 2:return E(t),e.next=5,new Promise((function(e){return setTimeout(e,0)}));case 5:O(!0);case 6:case"end":return e.stop()}}),e)}))),function(n,t){return e.apply(this,arguments)})});var e}),[s,i,E,O]),g=i||t||(null==r?void 0:r.type)===fn.FATAL_ERROR,j=Object(m.useMemo)((function(){return f.a.createElement(le.a,{pl:1,clone:!0},f.a.createElement(fa.a,Object.assign({},e,h),f.a.createElement(pa.a,{disabled:g,value:u.Credit},f.a.createElement(va.a,{arrow:!0,placement:"top",title:"Credit"},f.a.createElement(me.b,null))),f.a.createElement(pa.a,{disabled:g,value:u.Debit},f.a.createElement(va.a,{arrow:!0,placement:"top",title:"Debit"},f.a.createElement(me.a,null)))))}),[e,h,g]);return o?f.a.createElement(ba.a,null,f.a.createElement(Bn.a,Object.assign({},e,{labelPlacement:"boolean"==typeof o?void 0:o,control:j,label:"Type"})),y&&!!b&&f.a.createElement(ya.a,{error:!0},b)):f.a.createElement(ba.a,null,j,!!b&&f.a.createElement(ya.a,{error:!0},b))};function wa(){var e=x()(["\n  query DeptIniValueForAddEntry($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return wa=function(){return e},e}var Ra={item:!0,lg:4,sm:6,xs:12},Ca=pe()(wa(),et),Ma=function(e){var n=e.open,t=e.onClose,a=e.loading,r=Object(en.c)(),l=r.resetForm,o=r.isSubmitting,i=r.isValid,u=r.submitForm,c=r.values.date,d=Mn(),s=U()(d,2),p=s[0],v=s[1],b=Object(m.useCallback)((function(e){v({msg:e.message,type:fn.FATAL_ERROR})}),[v]),y=Object(K.c)(Zn,{skip:!(null==c?void 0:c.inputValue),variables:{date:(null==c?void 0:c.value)||""},onError:b}).data,E=Object(m.useMemo)((function(){var e,n;return null!==(n=null===(e=null==y?void 0:y.fiscalYears[0])||void 0===e?void 0:e.id)&&void 0!==n?n:""}),[y]),O=Object(m.useMemo)((function(){return!p||p.type!==fn.FATAL_ERROR&&p.type!==fn.ERROR?[null,null]:[p.msg,p.type===fn.FATAL_ERROR]}),[p]),h=U()(O,2),g=h[0],j=h[1],w=Object(m.useCallback)((function(){l(),v(null)}),[l,v]),R=Object(m.useMemo)((function(){return j?"Fatal Error":o?"Submitting Add Entry...":a?"Loading Add Entry...":"Add Entry"}),[j,o,a]),C=Object(nn.a)(),M=Object(m.useCallback)(N()(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(null),e.next=4,u();case 4:t(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:fn.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[u,t,v]),A=Object(m.useCallback)(N()(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,v(null),e.next=4,u();case 4:l(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:fn.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[u,l,v]),k=Object(m.useCallback)((function(e){return e.preventDefault()}),[]);return f.a.createElement(tn.a,{open:n,onClose:t,onExited:w,disableBackdropClick:o,disableEscapeKeyDown:o,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:k}},f.a.createElement(an.a,{style:g?{color:C.palette.error.main}:void 0},R),f.a.createElement(le.a,{position:"relative"},(o||a)&&!g&&f.a.createElement(Et,{zIndex:"modal"}),!!g&&j&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},g)),f.a.createElement(ln.a,{dividers:!0},!!g&&!j&&f.a.createElement(rn.a,{color:"error"},g),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,Object.assign({},Ra,{justify:"center",container:!0}),f.a.createElement(ja,{style:{margin:C.spacing(1)},label:"start",disabled:a||o||!!j})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(Dn,{disabled:a||o||!!j,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(ma,{disabled:a||o||!!j,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(Gt,{disabled:a||o||!!j,fullWidth:!0,required:!0})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(Zt,{disabled:a||o||!!j,fullWidth:!0,required:!0,fiscalYearId:E})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(Tn,{disabled:a||o||!!j,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(pt,{disabled:a||o||!!j,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Ra),f.a.createElement(Ln,{disabled:a||o||!!j,fullWidth:!0})),f.a.createElement(on.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},Ra),f.a.createElement(Vn,{disabled:a||o||!!j,label:!0}))))),f.a.createElement(un.a,null,!j&&f.a.createElement(f.a.Fragment,null,f.a.createElement(cn.a,{onClick:M,disabled:a||o||!i,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Add"),f.a.createElement(cn.a,{onClick:A,disabled:a||o||!i,type:"submit",startIcon:f.a.createElement(Tt.a,null),variant:"outlined"},"Add & New")),f.a.createElement(cn.a,{disabled:o,color:j?"primary":"default",startIcon:!j&&f.a.createElement(sn.a,null),onClick:t},j?"Ok":"Cancel")))},Aa=function(e){var n=e.open,t=e.onClose,a=e.deptId,r=Object(K.c)(Ca,{skip:!a,variables:{id:a}}),l=r.loading,o=r.error,i=r.data,u=null==i?void 0:i.department,c=Object(m.useMemo)((function(){return u?{department:u}:{}}),[u]),d=Object(m.useMemo)((function(){return o?{msg:o.message,type:fn.FATAL_ERROR}:null}),[o]),s=Object(K.a)(),p=Object(m.useCallback)((function(e,n){return Nt(s,e,n)}),[s]),v=Object(m.useCallback)((function(){return f.a.createElement(Ma,{open:n,onClose:t,loading:l})}),[n,t,l]);return f.a.createElement(en.a,{initialValues:c,initialStatus:d,enableReinitialize:!0,onSubmit:p},v)};function ka(){var e=x()(["\n  mutation UpdateEntry(\n    $id: ID!\n    $fields: JournalEntryUpdateFields!\n    $paymentMethodAdd: PaymentMethodAddFields\n    $paymentMethodUpdate: JournalEntryUpdatePaymentMethod\n    $personAdd: PersonAddFields\n    $businessAdd: BusinessAddFields\n  ) {\n    journalEntryUpdate(\n      id: $id\n      fields: $fields\n      paymentMethodAdd: $paymentMethodAdd\n      paymentMethodUpdate: $paymentMethodUpdate\n      personAdd: $personAdd\n      businessAdd: $businessAdd\n    ) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ka=function(){return e},e}var _a=Symbol(),Sa=pe()(ka(),Pe),Ia=function(){var e=N()(V.a.mark((function e(n,t,a,r){var l,o,u,c,d,s,m,f,p,v,b,y,E,O,h,g,j,w;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e,n,a,l,o=null!==(n=null===(e=r.category.value[r.category.value.length-1])||void 0===e?void 0:e.id)&&void 0!==n?n:null;return o===(null!==(l=null===(a=t.category.value[t.category.value.length-1])||void 0===a?void 0:a.id)&&void 0!==l?l:null)?null:o}(),u=Object(Mt.a)(t.date.inputValue,r.date.inputValue)?null:r.date.value,c=function(){var e,n,a,l,o,i,u,c,d,s,m,f,p,v,b,y,E,O,h,g={};return Object(Mt.a)(null!==(a=null===(n=null===(e=null==t?void 0:t.dateOfRecord)||void 0===e?void 0:e.date)||void 0===n?void 0:n.inputValue)&&void 0!==a?a:0,null!==(i=null===(o=null===(l=null==r?void 0:r.dateOfRecord)||void 0===l?void 0:l.date)||void 0===o?void 0:o.inputValue)&&void 0!==i?i:0)||(g.date=null!==(d=null===(c=null===(u=null==r?void 0:r.dateOfRecord)||void 0===u?void 0:u.date)||void 0===c?void 0:c.value)&&void 0!==d?d:null),(null===(s=null==t?void 0:t.dateOfRecord)||void 0===s?void 0:s.overrideFiscalYear)!==(null===(m=null==r?void 0:r.dateOfRecord)||void 0===m?void 0:m.overrideFiscalYear)&&(g.overrideFiscalYear=null!==(p=null===(f=null==r?void 0:r.dateOfRecord)||void 0===f?void 0:f.overrideFiscalYear)&&void 0!==p?p:null),(null===(v=null==t?void 0:t.dateOfRecord)||void 0===v?void 0:v.clear)!==(null===(b=null==r?void 0:r.dateOfRecord)||void 0===b?void 0:b.clear)&&(g.clear=null!==(E=null===(y=null==r?void 0:r.dateOfRecord)||void 0===y?void 0:y.clear)&&void 0!==E?E:null),g.date||(null!==(O=g.clear)&&void 0!==O?O:_a)!==_a||(null!==(h=g.overrideFiscalYear)&&void 0!==h?h:_a)!==_a?g:null}(),d=r.department.id===t.department.id?null:r.department.id,s=(null===(l=r.description)||void 0===l?void 0:l.trim())&&r.description!==t.description?r.description.trim():null,m=0===$n(r.total.value).compare($n(t.total.value))?null:r.total.value,f=r.type===t.type?null:r.type,p=r.reconciled===t.reconciled?null:r.reconciled,R=void 0,C=void 0,M=void 0,A=void 0,k=void 0,R=t.paymentMethod.value[t.paymentMethod.value.length-1],C=r.paymentMethod.value.slice(-2).reverse(),M=U()(C,2),A=M[0],k=M[1],v="string"==typeof A?R.parent&&R.parent.id===Ne?{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:{id:R.id,fields:{active:null,refId:A,name:A}}}:{paymentMethod:null,paymentMethodAdd:{parent:k.id,refId:A,name:A,active:!1},paymentMethodUpdate:null}:A.id!==R.id?{paymentMethod:A.id,paymentMethodAdd:null,paymentMethodUpdate:null}:{paymentMethod:null,paymentMethodAdd:null,paymentMethodUpdate:null},b=v.paymentMethod,y=v.paymentMethodAdd,E=v.paymentMethodUpdate,O=function(){var e=r.source.value[0],n=r.source.value[r.source.value.length-1],a=t.source.value[0],l=t.source.value[t.source.value.length-1];if("string"==typeof n){if(e===i.Person){var o=Object(xt.parseName)(n);return{source:{sourceType:i.Person,id:""},businessAdd:null,personAdd:{name:{first:o.firstName,last:o.lastName}}}}return{source:{sourceType:i.Business,id:""},businessAdd:{name:n},personAdd:null}}return e===a&&n.id===l.id?{source:null,businessAdd:null,personAdd:null}:{source:{sourceType:function(){switch(n.__typename){case"Business":return i.Business;case"Department":return i.Department;case"Person":return i.Person}}(),id:n.id},personAdd:null,businessAdd:null}}(),h=O.source,g=O.personAdd,j=O.businessAdd,w={id:a,fields:{category:o,date:u,dateOfRecord:c,department:d,description:s,total:m,type:f,source:h,reconciled:p,paymentMethod:b},paymentMethodAdd:y,paymentMethodUpdate:E,personAdd:g,businessAdd:j},e.next=13,n.mutate({mutation:Sa,variables:w});case 13:case"end":return e.stop()}var R,C,M,A,k}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}(),Da=t(5814);function Fa(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function Ta(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Fa(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Fa(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var xa={inputMode:"numeric"},Pa={tabIndex:-1},$a=Cn((function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=n[0],r=n[1];return a&&Object(gn.a)(a)?Object(jn.a)(a):r||""})),Na=function(e){var n,t,a,r,l,o=e.autoFocus,i=void 0!==o&&o,u=e.disabled,c=void 0!==u&&u,d=e.maxDate,s=void 0===d?new Date:d,p=e.minDate,v=e.variant,b=void 0===v?"filled":v,y=yn()(e,["variant"]),E=Object(en.c)().isSubmitting,O=Object(m.useCallback)((function(e){var n=((null==e?void 0:e.value)||"").trim();if(n){var t=Object(wn.a)(n);if(!Object(gn.a)(t))return"Invalid Date";if(p&&t<p)return"Cannot be before ".concat(Object(ve.a)(p,"MM/dd/yyyy"));if(s<t)return"Cannot be after ".concat(Object(ve.a)(s,"MM/dd/yyyy"))}}),[p,s]),h=Object(en.b)({name:"dateOfRecord",validate:O}),g=U()(h,3),j=g[0],w=g[1],R=g[2],C=j.value,M=null!==(t=null===(n=null==C?void 0:C.date)||void 0===n?void 0:n.value)&&void 0!==t?t:null,A=w.error,k=w.touched,_=R.setValue,S=R.setTouched,I=null===(r=null===(a=w.initialValue)||void 0===a?void 0:a.date)||void 0===r?void 0:r.inputValue,D=Object(m.useMemo)((function(){return I&&Object(gn.a)(I)?I:new Date}),[I]),F=Object(m.useMemo)((function(){return{autoFocus:i}}),[i]),T=Object(m.useRef)(!1),x=Object(m.useCallback)((function(){return setTimeout((function(){T.current||S(!0)}),0)}),[S,T]),P=Object(m.useCallback)((function(){return T.current=!0}),[T]),$=Object(m.useCallback)((function(){T.current=!1,x()}),[T,x]),N=Object(m.useCallback)((function(e,n){_({date:$a(e&&Object(gn.a)(e)?Object(Rn.a)([new Date,e]):e,n),clear:!e,overrideFiscalYear:!!e&&(null==C?void 0:C.overrideFiscalYear)})}),[_,C]),q=Object(m.useCallback)((function(e,n){_(Ta(Ta({},C),{},{overrideFiscalYear:n}))}),[C,_]),L=Mn(),B=U()(L,1)[0],W=Object(m.useMemo)((function(){return Ta(Ta({},j),{},{disabled:E||c||(null==B?void 0:B.type)===fn.FATAL_ERROR,value:M,error:k&&!!A,helperText:k?A:void 0,animateYearScrolling:!0,disableToolbar:!0,disableFuture:!0,inputVariant:b,variant:"inline",format:"MM/dd/yyyy",margin:"none",label:"Date of Record",initialFocusedDate:D,autoOk:!0,InputProps:F,inputProps:xa,placeholder:"mm/dd/yyyy",KeyboardButtonProps:Pa,onBlur:x,onOpen:P,onClose:$,onChange:N})}),[M,D,x,A,b,F,E,j,P,$,N,k,c,B]);return f.a.createElement(on.a,{container:!0,direction:"row",justify:"center",alignItems:"center"},f.a.createElement(le.a,{flexGrow:"1",marginRight:1,clone:!0},f.a.createElement(on.a,{item:!0},f.a.createElement(En.a,{utils:hn.default},f.a.createElement(On.b,Object.assign({maxDate:s},y,W))))),f.a.createElement(on.a,{item:!0},f.a.createElement(va.a,{title:"Override fiscal year with date of record."},f.a.createElement(Bn.a,{label:"As Year",disabled:!M||E||c||(null==B?void 0:B.type)===fn.FATAL_ERROR,control:f.a.createElement(Da.a,{checked:null!==(l=null==C?void 0:C.overrideFiscalYear)&&void 0!==l&&l,name:"overrideFiscalYear",onChange:q})}))))};function qa(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return La(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return La(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function La(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function Ba(){var e=x()(["\n  query UpdateEntryIniState($id: ID!) {\n    journalEntry(id: $id) {\n      id\n      __typename\n      type\n      date\n      dateOfRecord {\n        date\n        overrideFiscalYear\n      }\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      source {\n        ...SrcEntryPersonOptFragment\n        ...SrcEntryBizOptFragment\n        ...SrcEntryDeptOptFragment\n        ... on Department {\n          ancestors {\n            ...SrcEntryDeptOptFragment\n            ...SrcEntryBizOptFragment\n          }\n        }\n      }\n      paymentMethod {\n        ...PayMethodEntryOptFragment\n        ancestors {\n          ...PayMethodEntryOptFragment\n        }\n      }\n      description\n      total {\n        n\n        d\n        s\n      }\n      refunds {\n        id\n        __typename\n        deleted\n        date\n        total {\n          n\n          d\n          s\n        }\n      }\n      reconciled\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Ba=function(){return e},e}var Ua=pe()(Ba(),et,nt,tt,rt,at,lt),Wa=new Date(864e13),Va={item:!0,lg:4,sm:6,xs:12},Ja=function(e){var n=e.open,t=e.onClose,a=e.onExited,r=e.journalEntry,l=e.loading,o=e.handleSubmit,i=Object(en.c)(),u=i.resetForm,c=i.isSubmitting,d=i.isValid,s=i.values,p=s.date,v=s.dateOfRecord,b=Mn(),y=U()(b,2),E=y[0],O=y[1],h=Object(m.useCallback)((function(e){O({msg:e.message,type:fn.FATAL_ERROR})}),[O]),g=Object(m.useMemo)((function(){var e,n,t;return(null==v?void 0:v.overrideFiscalYear)?null!==(n=null===(e=null==v?void 0:v.date)||void 0===e?void 0:e.value)&&void 0!==n?n:"":null!==(t=null==p?void 0:p.value)&&void 0!==t?t:""}),[p,v]),j=Object(K.c)(Zn,{skip:!g,variables:{date:g||""},returnPartialData:!0,onError:h}).data,w=Object(m.useMemo)((function(){var e,n,t;return null!==(t=null===(n=(null!==(e=null==j?void 0:j.fiscalYears)&&void 0!==e?e:[])[0])||void 0===n?void 0:n.id)&&void 0!==t?t:""}),[j]),R=(null==r?void 0:r.refunds)||[],C=Object(m.useMemo)((function(){return R.reduce((function(e,n){var t=U()(e,2),a=t[0],r=t[1],l=n.deleted,o=n.total,i=n.date;return[l?a:a.add($n(o)),l?r:Object(Rn.a)([r,new Date(i)])]}),[new Ee.a(0),Wa])}),[R]),M=U()(C,2),A=M[0],k=M[1],_=Object(m.useCallback)((function(){a(),u(),O(null)}),[u,a,O]),S=Object(m.useMemo)((function(){return!E||E.type!==fn.FATAL_ERROR&&E.type!==fn.ERROR?[null,null]:[E.msg,E.type===fn.FATAL_ERROR]}),[E]),I=U()(S,2),D=I[0],F=I[1],T=Object(m.useMemo)((function(){var e="Entry Update";return F?"Fatal Error":l?"Loading ".concat(e,"..."):c?"Submitting ".concat(e):e}),[l,F,c]),x=Object(nn.a)();return f.a.createElement(tn.a,{open:n,onClose:t,onExited:_,fullWidth:!0,disableBackdropClick:c,disableEscapeKeyDown:c,maxWidth:"lg",PaperProps:{component:"form",onSubmit:o}},f.a.createElement(an.a,{style:D?{color:x.palette.error.main}:void 0},T),f.a.createElement(le.a,{position:"relative"},(c||l)&&!D&&f.a.createElement(Et,{zIndex:"modal"}),!!D&&F&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},D)),f.a.createElement(ln.a,{dividers:!0},!!D&&!F&&f.a.createElement(rn.a,{color:"error"},D),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,Object.assign({},Va,{justify:"center",container:!0}),f.a.createElement(ja,{style:{margin:x.spacing(1)},label:"start",disabled:c||l||!!F})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Dn,{disabled:c||l||!!F,maxDate:k===Wa?void 0:k,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Na,{disabled:c||l||!!F,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(ma,{disabled:c||l||!!F,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Gt,{disabled:c||l||!!F,fullWidth:!0,required:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Zt,{disabled:c||l||!!F,fullWidth:!0,required:!0,fiscalYearId:w})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Tn,{disabled:c||l||!!F,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(pt,{disabled:c||l||!!F,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Va),f.a.createElement(Ln,{disabled:c||l||!!F,minTotal:A,fullWidth:!0})),f.a.createElement(on.a,Object.assign({container:!0,justify:"center",alignItems:"flex-start"},Va),f.a.createElement(Vn,{disabled:c||l||!!F,label:!0}))))),f.a.createElement(un.a,null,!F&&f.a.createElement(cn.a,{disabled:c||!d||l,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Update"),f.a.createElement(cn.a,{disabled:c,color:F?"primary":"default",startIcon:!F&&f.a.createElement(sn.a,null),onClick:t},F?"Ok":"Cancel")))},Ga=function(e){var n,t=e.entryId,a=e.open,r=e.onClose,l=e.onExited,o=Object(K.c)(Ua,{skip:!t,variables:{id:t}}),u=o.loading,c=o.error,d=o.data,s=Object(m.useMemo)((function(){return c?{msg:c.message,type:fn.FATAL_ERROR}:null}),[c]),p=null==d?void 0:d.journalEntry,v=Object(m.useMemo)((function(){var e;if(!p)return{};var n={inputValue:new Date(p.date),value:p.date},t=p.dateOfRecord?{date:{inputValue:new Date(p.dateOfRecord.date),value:p.dateOfRecord.date},overrideFiscalYear:p.dateOfRecord.overrideFiscalYear,clear:!1}:null,a=function(){var e=p.category,n=e.ancestors,t=yn()(e,["ancestors"]),a=L()(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),r=function(){var e=p.paymentMethod,n=e.ancestors,t=yn()(e,["ancestors"]),a=L()(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),l={inputValue:$n(p.total).round(2).toString(),value:p.total};return{date:n,dateOfRecord:t,category:a,paymentMethod:r,department:p.department,total:l,reconciled:p.reconciled,description:null!==(e=p.description)&&void 0!==e?e:null,type:p.type,source:function(){var e=[],n=null==p?void 0:p.source;switch(null==n?void 0:n.__typename){case"Person":e.push(i.Person,n);break;case"Business":e.push(i.Business,n);break;case"Department":e.push(i.Business);var t,a=[],r=qa(n.ancestors);try{for(r.s();!(t=r.n()).done;){var l=t.value;"Business"===l.__typename?e.push(l):a.push(l.id)}}catch(e){r.e(e)}finally{r.f()}var o=e[1];if(a.length>0){var u,c=[],d=qa(o.departments);try{for(d.s();!(u=d.n()).done;){var s=u.value;if(-1!==a.indexOf(s.id)&&c.push(s)===a.length)break}}catch(e){d.e(e)}finally{d.f()}c.sort((function(e,n){return e.id===n.parent.id||o.id||e.parent.id?-1:n.id===e.parent.id?1:0})),e.push.apply(e,c.concat([n]))}}return{inputValue:"",value:e}}()}}),[p]),b=Object(K.a)(),y=Object(m.useCallback)(function(){var e=N()(V.a.mark((function e(n,a){var l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setStatus(null),e.next=4,Ia(b,v,t,n,a);case 4:r(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),a.setStatus({msg:null!==(l=e.t0.message)&&void 0!==l?l:"".concat(e.t0),type:fn.ERROR});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}(),[b,v,t,r]),E=Object(m.useCallback)((function(e){return f.a.createElement(Ja,{open:a,onClose:r,onExited:l,loading:u,journalEntry:null!=p?p:null,handleSubmit:e.handleSubmit})}),[a,r,l,u,p]);return f.a.createElement(en.a,{initialValues:v,initialStatus:s,journalEntry:null!==(n=null==d?void 0:d.journalEntry)&&void 0!==n?n:null,loading:u,onSubmit:y,enableReinitialize:!0},E)};function za(){var e=x()(["\n  mutation DeleteEntry($id: ID!) {\n    journalEntryDelete(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return za=function(){return e},e}var Ya=pe()(za(),Pe),Ka=function(e){var n=e.entryId,t=e.onClose,a=Object(K.b)(Ya),r=U()(a,2),l=r[0],o=r[1],i=o.loading,u=o.error,c=!!u,d=Object(m.useCallback)((function(){l({variables:{id:n}}).then((function(){return t()}))}),[n,l,t]),s=Object(m.useMemo)((function(){return c?"Error":i?"Deleting Entry...":"Delete Entry"}),[c,i]),p=Object(nn.a)();return f.a.createElement(tn.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:i,disableEscapeKeyDown:i,onClose:t},f.a.createElement(an.a,{style:c?{color:p.palette.error.main}:void 0},s),f.a.createElement(le.a,{position:"relative"},i&&f.a.createElement(Et,{zIndex:"modal"}),f.a.createElement(ln.a,null,c&&f.a.createElement(rn.a,{color:"error"},null==u?void 0:u.message),!c&&f.a.createElement(rn.a,null,"Are you sure you want to delete this entry?"))),f.a.createElement(un.a,null,!c&&f.a.createElement(cn.a,{disabled:i,onClick:d,startIcon:f.a.createElement(te.a,null),color:"primary",variant:"contained"},"Delete"),f.a.createElement(cn.a,{disabled:i,startIcon:!c&&f.a.createElement(sn.a,null),onClick:t},c?"Close":"Cancel")))};function Xa(){var e=x()(["\n  mutation DeleteRefund($id: ID!) {\n    journalEntryDeleteRefund(id: $id) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return Xa=function(){return e},e}var Qa=pe()(Xa(),Pe),Ha=function(e){var n=e.refundId,t=e.onClose,a=Object(K.b)(Qa),r=U()(a,2),l=r[0],o=r[1],i=o.loading,u=o.error,c=!!u,d=Object(m.useCallback)((function(){l({variables:{id:n}}).then((function(){return t()}))}),[n,l,t]),s=Object(m.useMemo)((function(){return c?"Error":i?"Deleting Refund...":"Delete Refund"}),[c,i]),p=Object(nn.a)();return f.a.createElement(tn.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:i,disableEscapeKeyDown:i,onClose:t},f.a.createElement(an.a,{style:c?{color:p.palette.error.main}:void 0},s),f.a.createElement(le.a,{position:"relative"},i&&f.a.createElement(Et,{zIndex:"modal"}),f.a.createElement(ln.a,null,c&&f.a.createElement(rn.a,{color:"error"},null==u?void 0:u.message),!c&&f.a.createElement(rn.a,null,"Are you sure you want to delete this refund?"))),f.a.createElement(un.a,null,!c&&f.a.createElement(cn.a,{disabled:i,onClick:d,startIcon:f.a.createElement(te.a,null),color:"primary",variant:"contained"},"Delete"),f.a.createElement(cn.a,{disabled:i,startIcon:!c&&f.a.createElement(sn.a,null),onClick:t},c?"Close":"Cancel")))},Za=t(5812);function er(){var e=x()(["\n  mutation AddEntryItem($id: ID!, $fields: JournalEntryAddItemFields!) {\n    journalEntryAddItem(id: $id, fields: $fields) {\n      journalEntry {\n        ...JournalEntry_1Fragment\n      }\n    }\n  }\n  ","\n"]);return er=function(){return e},e}var nr=pe()(er(),Pe),tr=function(){var e=N()(V.a.mark((function e(n,t,a){var r,l,o,i,u;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){var e,n,t,r=(null===(e=a.category)||void 0===e?void 0:e.value)||[];return null!==(t=null===(n=r[r.length-1])||void 0===n?void 0:n.id)&&void 0!==t?t:null}(),o=function(){var e;return(null===(e=a.department)||void 0===e?void 0:e.id)||null}(),i=a.units,u={id:t,fields:{units:i,category:l,department:o,description:(null===(r=a.description)||void 0===r?void 0:r.trim())||null,total:a.total.value}},e.next=6,n.mutate({mutation:nr,variables:u});case 6:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),ar={min:"1",step:"1",type:"number"},rr=Symbol(),lr=function(e){var n,t=e.autoFocus,a=void 0!==t&&t,r=e.disabled,l=void 0!==r&&r,o=e.variant,i=void 0===o?"filled":o,u=yn()(e,["autoFocus","disabled","variant"]),c=Object(m.useCallback)((function(e){return(null!=(e=e||null)?e:rr)===rr?"Units Required":0===e?"Cannot be 0":e<0?"Units must be 1 or greater":void 0}),[]),d=Object(en.b)({name:"units",validate:c}),s=U()(d,3),p=s[0],v=s[1],b=s[2].setValue,y=null!==(n=p.value)&&void 0!==n?n:"",E=v.error,O=v.touched,h=Mn(),g=U()(h,1)[0],j=Object(m.useMemo)((function(){return{type:"number",autoFocus:a}}),[a]),w=Object(m.useCallback)((function(e){var n,t=(null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.value)||0;b(Math.max("number"==typeof t?t:Number.parseInt(t),0))}),[b]);return f.a.createElement(Fn.a,Object.assign({},u,p,{disabled:l||(null==g?void 0:g.type)===fn.FATAL_ERROR,type:"number",value:y,error:O&&!!E,helperText:O&&E?E:void 0,placeholder:"1",label:"Units",name:"units",required:!0,variant:i,inputProps:ar,InputProps:j,onChange:w}))};function or(){var e=x()(["\n  fragment JournalEntry_3Fragment on JournalEntry {\n    __typename\n    id\n    type\n    total {\n      n\n      d\n      s\n    }\n    date\n    items {\n      id\n      __typename\n      deleted\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n"]);return or=function(){return e},e}var ir=pe()(or());function ur(){var e=x()(["\n  query GetEntryItemState_1($id: ID!) {\n    journalEntry(id: $id) {\n      ...JournalEntry_3Fragment\n    }\n  }\n  ","\n"]);return ur=function(){return e},e}var cr=pe()(ur(),ir),dr={item:!0,lg:4,sm:6,xs:12},sr=function(e){var n,t,a,r,l,o=e.entryId,i=e.open,u=e.onClose,c=e.onExited,d=Object(en.c)(),s=d.resetForm,p=d.isSubmitting,v=d.isValid,b=d.submitForm,y=Mn(),E=U()(y,2),O=E[0],h=E[1],g=Object(m.useCallback)((function(e){return h({msg:e.message,type:fn.FATAL_ERROR})}),[h]),j=Object(K.c)(cr,{skip:!o,variables:{id:o},onError:g}),w=j.loading,R=j.data,C=Object(m.useCallback)((function(e){h({msg:e.message,type:fn.FATAL_ERROR})}),[h]),M=(null===(n=null==R?void 0:R.journalEntry)||void 0===n?void 0:n.date)||"",A=Object(K.c)(Zn,{skip:!M,variables:{date:M},onError:C}).data,k=Object(m.useMemo)((function(){var e,n;return null!==(n=null===(e=null==A?void 0:A.fiscalYears[0])||void 0===e?void 0:e.id)&&void 0!==n?n:""}),[A]),_=null!==(a=null===(t=null==R?void 0:R.journalEntry)||void 0===t?void 0:t.type)&&void 0!==a?a:null,S=null===(r=null==R?void 0:R.journalEntry)||void 0===r?void 0:r.total,I=(null===(l=null==R?void 0:R.journalEntry)||void 0===l?void 0:l.items)||[],D=Object(m.useMemo)((function(){if(S){var e=I.reduce((function(e,n){var t=n.deleted,a=n.total;return t?e:e.add($n(a))}),new Ee.a(0));return $n(S).sub(e)}return new Ee.a(Number.MAX_SAFE_INTEGER)}),[S,I]),F=Object(m.useCallback)((function(){c(),s(),h(null)}),[s,c,h]),T=Object(m.useMemo)((function(){return!O||O.type!==fn.FATAL_ERROR&&O.type!==fn.ERROR?[null,null]:[O.msg,O.type===fn.FATAL_ERROR]}),[O]),x=U()(T,2),P=x[0],$=x[1],q=Object(m.useMemo)((function(){return $?"Fatal Error":w?"Loading ".concat("Add Item","..."):p?"Submitting ".concat("Add Item"):"Add Item"}),[w,$,p]),L=Object(nn.a)(),B=Object(m.useCallback)(N()(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(null),e.next=4,b();case 4:u(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:fn.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,u,h]),W=Object(m.useCallback)(N()(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,h(null),e.next=4,b();case 4:s(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),h({msg:null!==(n=e.t0.message)&&void 0!==n?n:"".concat(e.t0),type:fn.ERROR});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[b,s,h]),J=Object(m.useCallback)((function(e){return e.preventDefault()}),[]);return f.a.createElement(tn.a,{open:i,onClose:u,onExited:F,disableBackdropClick:p,disableEscapeKeyDown:p,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:J}},f.a.createElement(an.a,{style:P?{color:L.palette.error.main}:void 0},q),f.a.createElement(le.a,{position:"relative"},(w||p)&&!P&&f.a.createElement(Et,{zIndex:"modal"}),!!P&&$&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},P)),f.a.createElement(ln.a,{dividers:!0},!!P&&!$&&f.a.createElement(rn.a,{color:"error"},P),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,Object.assign({},dr),f.a.createElement(Ln,{disabled:w||p,fullWidth:!0,maxTotal:D})),f.a.createElement(on.a,Object.assign({},dr),f.a.createElement(lr,{disabled:w||p,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},dr),f.a.createElement(Tn,{disabled:w||p,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},dr),f.a.createElement(Gt,{disabled:w||p||!!$,entryType:_,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},dr),f.a.createElement(Zt,{disabled:w||p||!!$,fullWidth:!0,fiscalYearId:k}))))),f.a.createElement(un.a,null,!$&&f.a.createElement(f.a.Fragment,null,f.a.createElement(cn.a,{onClick:B,disabled:w||p||!v,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Add"),f.a.createElement(cn.a,{onClick:W,disabled:w||p||!v,type:"submit",startIcon:f.a.createElement(Tt.a,null),variant:"outlined"},"Add & New")),f.a.createElement(cn.a,{disabled:w||p,color:$?"primary":"default",startIcon:!$&&f.a.createElement(sn.a,null),onClick:u},$?"Ok":"Cancel")))},mr=function(e){var n=e.entryId,t=e.open,a=e.onClose,r=e.onExited,l=Object(m.useMemo)((function(){return{}}),[]),o=Object(K.a)(),i=Object(m.useCallback)((function(e,t){return tr(o,n||"",e,t)}),[o,n]),u=Object(m.useCallback)((function(e){return f.a.createElement(sr,{entryId:n,open:t,onClose:a,onExited:r,handleSubmit:e.handleSubmit})}),[n,t,a,r]);return f.a.createElement(en.a,{initialValues:l,initialStatus:null,enableReinitialize:!0,onSubmit:i},u)};function fr(){var e=x()(["\n  mutation UpdateEntryItem($id: ID!, $fields: JournalEntryUpdateItemFields!) {\n    journalEntryUpdateItem(id: $id, fields: $fields) {\n      journalEntryItem {\n        ...JournalEntryItem_1Fragment\n      }\n    }\n  }\n  ","\n"]);return fr=function(){return e},e}var pr=pe()(fr(),xe),vr=function(){var e=N()(V.a.mark((function e(n,t,a,r){var l,o,i,u,c,d,s,m,f,p,v;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=r.description!==t.description&&(null===(l=r.description)||void 0===l?void 0:l.trim())||null,s=(null===(o=r.department)||void 0===o?void 0:o.id)===(null===(i=t.department)||void 0===i?void 0:i.id)?null:null!==(c=null===(u=r.department)||void 0===u?void 0:u.id)&&void 0!==c?c:null,m=function(){var e,n,a,l,o=null!==(n=null===(e=r.category.value[r.category.value.length-1])||void 0===e?void 0:e.id)&&void 0!==n?n:null;return o===(null!==(l=null===(a=t.category.value[t.category.value.length-1])||void 0===a?void 0:a.id)&&void 0!==l?l:null)?null:o}(),f=r.units===t.units?null:r.units,p=0===$n(r.total.value).compare($n(t.total.value))?null:r.total.value,v={id:a,fields:{units:f,description:d,department:s,category:m,total:p}},e.next=8,n.mutate({mutation:pr,variables:v});case 8:case"end":return e.stop()}}),e)})));return function(n,t,a,r){return e.apply(this,arguments)}}();function br(){var e=x()(["\n  query UpdateItemIniState($entryId: ID!, $itemId: ID!) {\n    journalEntry(id: $entryId) {\n      ...JournalEntry_3Fragment\n    }\n    journalEntryItem(id: $itemId) {\n      __typename\n      id\n      department {\n        ...DeptEntryOptFragment\n      }\n      category {\n        ...CatEntryOptFragment\n        ancestors {\n          ...CatEntryOptFragment\n        }\n      }\n      description\n      units\n      total {\n        n\n        d\n        s\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return br=function(){return e},e}var yr=pe()(br(),ir,et,nt),Er={item:!0,lg:4,sm:6,xs:12},Or=function(e){var n,t=e.itemId,a=e.open,r=e.onClose,l=e.onExited,o=e.journalEntry,i=e.loading,u=e.handleSubmit,c=Object(en.c)(),d=c.resetForm,s=c.isSubmitting,p=c.isValid,v=Mn(),b=U()(v,2),y=b[0],E=b[1],O=Object(m.useCallback)((function(e){E({msg:e.message,type:fn.FATAL_ERROR})}),[E]),h=(null==o?void 0:o.date)||"",g=Object(K.c)(Zn,{skip:!h,variables:{date:h},onError:O}).data,j=Object(m.useMemo)((function(){var e,n;return null!==(n=null===(e=null==g?void 0:g.fiscalYears[0])||void 0===e?void 0:e.id)&&void 0!==n?n:""}),[g]),w=null!==(n=null==o?void 0:o.type)&&void 0!==n?n:null,R=null==o?void 0:o.total,C=(null==o?void 0:o.items)||[],M=Object(m.useMemo)((function(){if(R){var e=C.reduce((function(e,n){var a=n.id,r=n.deleted,l=n.total;return r||a===t?e:e.add($n(l))}),new Ee.a(0));return $n(R).sub(e)}return new Ee.a(Number.MAX_SAFE_INTEGER)}),[R,C,t]),A=Object(m.useCallback)((function(){l(),d(),E(null)}),[d,l,E]),k=Object(m.useMemo)((function(){return!y||y.type!==fn.FATAL_ERROR&&y.type!==fn.ERROR?[null,null]:[y.msg,y.type===fn.FATAL_ERROR]}),[y]),_=U()(k,2),S=_[0],I=_[1],D=Object(m.useMemo)((function(){var e="Item Update";return I?"Fatal Error":i?"Loading ".concat(e,"..."):s?"Submitting ".concat(e):e}),[i,I,s]),F=Object(nn.a)();return f.a.createElement(tn.a,{open:a,onClose:r,onExited:A,disableBackdropClick:s,disableEscapeKeyDown:s,fullWidth:!0,maxWidth:"lg",PaperProps:{component:"form",onSubmit:u}},f.a.createElement(an.a,{style:S?{color:F.palette.error.main}:void 0},D),f.a.createElement(le.a,{position:"relative"},(i||s)&&!S&&f.a.createElement(Et,{zIndex:"modal"}),!!S&&I&&f.a.createElement(yt,{opacity:.78,zIndex:"modal",padding:2},f.a.createElement(rn.a,{color:"error"},S)),f.a.createElement(ln.a,{dividers:!0},!!S&&!I&&f.a.createElement(rn.a,{color:"error"},S),f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,Object.assign({},Er),f.a.createElement(Ln,{disabled:i||s,fullWidth:!0,maxTotal:M})),f.a.createElement(on.a,Object.assign({},Er),f.a.createElement(lr,{disabled:i||s,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Er),f.a.createElement(Tn,{disabled:i||s,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Er),f.a.createElement(Gt,{disabled:i||s||!!I,entryType:w,fullWidth:!0})),f.a.createElement(on.a,Object.assign({},Er),f.a.createElement(Zt,{disabled:i||s||!!I,fullWidth:!0,fiscalYearId:j}))))),f.a.createElement(un.a,null,!I&&f.a.createElement(cn.a,{disabled:i||s||!p,type:"submit",startIcon:f.a.createElement(dn.a,null),color:"primary",variant:"contained"},"Update"),f.a.createElement(cn.a,{disabled:i||s||!!I,color:I?"primary":"default",startIcon:!I&&f.a.createElement(sn.a,null),onClick:r},I?"Ok":"Cancel")))},hr=function(e){var n=e.entryId,t=e.itemId,a=e.open,r=e.onClose,l=e.onExited,o=Object(K.c)(yr,{skip:!n,variables:{entryId:n,itemId:t}}),i=o.loading,u=o.error,c=o.data,d=Object(m.useMemo)((function(){return u?{msg:u.message,type:fn.FATAL_ERROR}:null}),[u]),s=null==c?void 0:c.journalEntryItem,p=Object(m.useMemo)((function(){var e,n;if(!s)return{};var t={inputValue:$n(s.total).round(2).toString(),value:s.total},a=function(){if(!s.category)return{inputValue:"",value:[]};var e=s.category,n=e.ancestors,t=yn()(e,["ancestors"]),a=L()(n).sort((function(e,n){var t,a;return e.id===(null===(t=n.parent)||void 0===t?void 0:t.id)?-1:n.id===(null===(a=e.parent)||void 0===a?void 0:a.id)?1:0}));return a.push(t),{inputValue:"",value:a}}(),r=null!==(e=s.department)&&void 0!==e?e:null,l=null!==(n=s.description)&&void 0!==n?n:null;return{total:t,units:s.units,category:a,department:r,description:l}}),[s]),v=Object(K.a)(),b=Object(m.useCallback)(function(){var e=N()(V.a.mark((function e(n,a){var l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p){e.next=5;break}return a.setStatus({msg:'Failed to load initial values for item "'.concat(t,'".'),type:fn.FATAL_ERROR}),e.abrupt("return");case 5:if(t){e.next=8;break}return a.setStatus({msg:"No item ID.",type:fn.FATAL_ERROR}),e.abrupt("return");case 8:return e.prev=8,a.setStatus(null),e.next=12,vr(v,p,t,n,a);case 12:r(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),a.setStatus({msg:null!==(l=null===e.t0||void 0===e.t0?void 0:e.t0.message)&&void 0!==l?l:"".concat(e.t0),type:fn.FATAL_ERROR});case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(n,t){return e.apply(this,arguments)}}(),[v,p,r,t]),y=Object(m.useCallback)((function(e){var o;return f.a.createElement(Or,{entryId:n,itemId:t,open:a,onClose:r,onExited:l,journalEntry:null!==(o=null==c?void 0:c.journalEntry)&&void 0!==o?o:null,loading:i,handleSubmit:e.handleSubmit})}),[c,n,i,r,l,a,t]);return f.a.createElement(en.a,{initialValues:null!=p?p:{},initialStatus:d,enableReinitialize:!0,onSubmit:b},y)};function gr(){var e=x()(["\n  mutation DeleteItem($id: ID!) {\n    journalEntryDeleteItem(id: $id) {\n      journalEntryItem {\n        id\n        __typename\n        deleted\n      }\n    }\n  }\n"]);return gr=function(){return e},e}var jr=pe()(gr()),wr=function(e){var n=e.itemId,t=e.onClose,a=Object(K.b)(jr),r=U()(a,2),l=r[0],o=r[1],i=o.loading,u=o.error,c=!!u,d=Object(m.useCallback)((function(){l({variables:{id:n}}).then((function(){return t()}))}),[n,l,t]),s=Object(m.useMemo)((function(){return c?"Error":i?"Deleting Item...":"Delete Item"}),[c,i]),p=Object(nn.a)();return f.a.createElement(tn.a,{open:!!n,maxWidth:"sm",fullWidth:!0,disableBackdropClick:i,disableEscapeKeyDown:i,onClose:t},f.a.createElement(an.a,{style:c?{color:p.palette.error.main}:void 0},s),f.a.createElement(le.a,{position:"relative"},i&&f.a.createElement(Et,{zIndex:"modal"}),f.a.createElement(ln.a,null,c&&f.a.createElement(rn.a,{color:"error"},null==u?void 0:u.message),!c&&f.a.createElement(rn.a,null,"Are you sure you want to delete this item?"))),f.a.createElement(un.a,null,!c&&f.a.createElement(cn.a,{disabled:i,onClick:d,startIcon:f.a.createElement(te.a,null),color:"primary",variant:"contained"},"Delete"),f.a.createElement(cn.a,{disabled:i,startIcon:!c&&f.a.createElement(sn.a,null),onClick:t},c?"Close":"Cancel")))},Rr=function(e){var n,t,a=e.entry,r=a.items,l=a.category,o=a.description,i=a.department,u=a.id,c=Object(m.useState)(!1),d=U()(c,2),s=d[0],p=d[1],v=Object(m.useState)(null),b=U()(v,2),y=b[0],E=b[1],O=Object(m.useCallback)((function(){p(!1)}),[p]),h=Object(m.useCallback)((function(){E(null)}),[E]),g=Object(m.useState)(!1),j=U()(g,2),w=j[0],R=j[1],C=Object(m.useState)(null),M=U()(C,2),A=M[0],k=M[1],_=Object(m.useState)(null),S=U()(_,2),I=S[0],D=S[1],F=Object(m.useCallback)((function(){D(null)}),[D]),T=Object(m.useCallback)((function(){R(!1)}),[R]),x=Object(m.useCallback)((function(){k(null)}),[k]),P=Object(m.useMemo)((function(){return[{icon:te.a,tooltip:"Delete Item",onClick:function(e,n){return D(n.id)}},{icon:ae.a,tooltip:"Edit Item",onClick:function(e,n){R(!0),k({entryId:u,itemId:n.id})}},{icon:function(e){return f.a.createElement(re.a,Object.assign({},e))},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Item",isFreeAction:!0,onClick:function(){p(!0),E(u)}}]}),[u]),$=Object(m.useMemo)((function(){return[{field:"total",title:"Total",render:function(e){var n=e.total;return Q()($n(n).valueOf()).format("$0,0.00")}},{field:"units",title:"Units"},{field:"description",title:"Description",render:function(e){var n;return(null===(n=e.description)||void 0===n?void 0:n.trim())||o}},{field:"category",title:"Category",render:function(e){var n,t,a=null!==(t=null===(n=e.category)||void 0===n?void 0:n.name)&&void 0!==t?t:l.name;return Object(H.a)(a)}},{field:"department",title:"Department",render:function(e){var n,t,a=null!==(t=null===(n=e.department)||void 0===n?void 0:n.name)&&void 0!==t?t:i.name;return Object(H.a)(a)}}]}),[l,o,i]),N=Object(m.useMemo)((function(){return{search:!1,emptyRowsWhenPaging:!1}}),[]),q=Object(m.useMemo)((function(){return r.filter((function(e){return!e.deleted}))}),[r]),L=Object(nn.a)(),B=Object(m.useMemo)((function(){return{boxShadow:L.shadows[0]}}),[L.shadows]),W=Object(m.useMemo)((function(){return{backgroundColor:L.palette.primary.main}}),[L.palette.primary.main]);return f.a.createElement(le.a,null,f.a.createElement(Y.a,{title:"Items",actions:P,options:N,columns:$,icons:Ze,data:q,style:B}),f.a.createElement(mr,{entryId:y,open:s,onClose:O,onExited:h}),f.a.createElement(hr,{entryId:null!==(n=null==A?void 0:A.entryId)&&void 0!==n?n:null,itemId:null!==(t=null==A?void 0:A.itemId)&&void 0!==t?t:null,open:w,onClose:T,onExited:x}),f.a.createElement(wr,{itemId:I,onClose:F}),f.a.createElement(Za.a,{style:W}))},Cr=t(296),Mr=t(360),Ar=function(e){var n=e.setFilter,t=Object(m.useState)("None"),a=U()(t,2),r=a[0],l=a[1],o=Object(m.useCallback)((function(e){var t=e.target.value;switch(t){case"Reconciled":n({reconciled:{$eq:!0}});break;case"Unreconciled":n({reconciled:{$eq:!1}});break;case"None":n({})}l(t)}),[n,l]);return f.a.createElement(va.a,{title:"None"===r?"No Filter":r},f.a.createElement(Cr.a,{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),onChange:o,fullWidth:!0,value:"None"===r?"":r},f.a.createElement(Mr.a,{value:"None"},"None"),f.a.createElement(Mr.a,{value:"Reconciled"},"Reconciled"),f.a.createElement(Mr.a,{value:"Unreconciled"},"Unreconciled")))},kr=t(375),_r=t(240);function Sr(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Ir(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ir(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Ir(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var Dr=function(e){var n=e.setFilter,t=e.options,a=Object(m.useState)([]),r=U()(a,2),l=r[0],o=r[1],i=Object(m.useMemo)((function(){var e,n=[],a=new Map,r=Sr(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;a.set(o.id,o.name),n.push(f.a.createElement(Mr.a,{key:o.id,value:o.id},f.a.createElement(Un.a,{checked:l.includes(o.id)}),f.a.createElement(kr.a,{primary:o.name})))}}catch(e){r.e(e)}finally{r.f()}return[n,a]}),[t,l]),u=U()(i,2),c=u[0],d=u[1],s=Object(m.useCallback)((function(e){return e.map((function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:""})).join(", ")}),[d]),p=Object(m.useCallback)((function(e){var t=e.target.value||[];0===t.length?n({}):n({"category.id":{$in:t}}),o(t)}),[n]);return f.a.createElement(va.a,{title:0===l.length?"No Filter":s(l)},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Cr.a,{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),fullWidth:!0,multiple:!0,value:l,onChange:p,input:f.a.createElement(_r.a,null),renderValue:s},c)))};function Fr(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Tr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Tr(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Tr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var xr=function(e){var n=e.setFilter,t=e.options,a=Object(m.useState)([]),r=U()(a,2),l=r[0],o=r[1],i=Object(m.useMemo)((function(){var e,n=[],a=new Map,r=Fr(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;a.set(o.id,o.name),n.push(f.a.createElement(Mr.a,{key:o.id,value:o.id},f.a.createElement(Un.a,{checked:l.includes(o.id)}),f.a.createElement(kr.a,{primary:o.name})))}}catch(e){r.e(e)}finally{r.f()}return[n,a]}),[t,l]),u=U()(i,2),c=u[0],d=u[1],s=Object(m.useCallback)((function(e){return e.map((function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:""})).join(", ")}),[d]),p=Object(m.useCallback)((function(e){var t=e.target.value||[];0===t.length?n({}):n({$or:[{"paymentMethod.id":{$in:t}},{"paymentMethod.parent.id":{$in:t}}]}),o(t)}),[n]);return f.a.createElement(va.a,{title:0===l.length?"No Filter":s(l)},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Cr.a,{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),fullWidth:!0,multiple:!0,value:l,onChange:p,input:f.a.createElement(_r.a,null),renderValue:s},c)))};function Pr(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return $r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $r(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function $r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var Nr=function(e){var n=e.setFilter,t=e.options,a=Object(m.useState)([]),r=U()(a,2),l=r[0],o=r[1],i=Object(m.useMemo)((function(){var e,n=[],a=new Map,r=Pr(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;a.set(o.id,o.name),n.push(f.a.createElement(Mr.a,{key:o.id,value:o.id},f.a.createElement(Un.a,{checked:l.includes(o.id)}),f.a.createElement(kr.a,{primary:o.name})))}}catch(e){r.e(e)}finally{r.f()}return[n,a]}),[t,l]),u=U()(i,2),c=u[0],d=u[1],s=Object(m.useCallback)((function(e){return e.map((function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:""})).join(", ")}),[d]),p=Object(m.useCallback)((function(e){var t=e.target.value||[];0===t.length?n({}):n({"department.id":{$in:t}}),o(t)}),[n]);return f.a.createElement(va.a,{title:0===l.length?"No Filter":s(l)},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Cr.a,{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),fullWidth:!0,multiple:!0,value:l,onChange:p,input:f.a.createElement(_r.a,null),renderValue:s},c)))};function qr(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Lr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lr(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Lr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}var Br,Ur=function(e){var n=e.setFilter,t=e.options,a=Object(m.useState)([]),r=U()(a,2),l=r[0],o=r[1],i=Object(m.useMemo)((function(){var e,n,a,r,o=[],i=new Map,u=qr(t);try{for(u.s();!(e=u.n()).done;)n=void 0,a=void 0,r=void 0,n=e.value,a=function(){switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}}(),r="".concat(n.__typename,"-").concat(n.id),i.set(r,a),o.push(f.a.createElement(Mr.a,{key:r,value:r},f.a.createElement(Un.a,{checked:l.includes(r)}),f.a.createElement(kr.a,{primary:a})))}catch(e){u.e(e)}finally{u.f()}return[o,i]}),[t,l]),u=U()(i,2),c=u[0],d=u[1],s=Object(m.useCallback)((function(e){return e.map((function(e){var n;return null!==(n=d.get(e))&&void 0!==n?n:""})).join(", ")}),[d]),p=Object(m.useCallback)((function(e){var t=e.target.value||[];0===t.length?n({}):n({$or:t.map((function(e){var n=e.split("-"),t=U()(n,2),a=t[0];return{"source.id":t[1],"source.__typename":a}}))}),o(t)}),[n]);return f.a.createElement(va.a,{title:0===l.length?"No Filter":s(l)},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Cr.a,{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),fullWidth:!0,multiple:!0,value:l,onChange:p,input:f.a.createElement(_r.a,null),renderValue:s},c)))},Wr=t(194),Vr=t(423),Jr=t(5840),Gr=t(195),zr=t(5839);function Yr(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Kr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Kr(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Kr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}!function(e){e[e.None=1]="None",e[e.Equal=2]="Equal",e[e.GreaterThan=3]="GreaterThan",e[e.LessThan=4]="LessThan",e[e.GreaterThanOrEqual=5]="GreaterThanOrEqual",e[e.LessThanOrEqual=6]="LessThanOrEqual"}(Br||(Br={}));var Xr,Qr=function(e,n){if(!e)return[void 0,void 0,[Br.None]];switch(n){case Br.None:case Br.Equal:return[void 0,void 0,[Br.None]];case Br.GreaterThan:case Br.GreaterThanOrEqual:return[Object(Gr.a)(e,1),void 0,[Br.None,Br.LessThan,Br.LessThanOrEqual]];case Br.LessThan:case Br.LessThanOrEqual:return[void 0,Object(zr.a)(e,1),[Br.None,Br.GreaterThan,Br.GreaterThanOrEqual]]}},Hr=new Date(864e13),Zr=new Date(-864e13),el=function(e){var n=e.setFilter,t=Object(m.useState)(""),a=U()(t,2),r=a[0],l=a[1],o=Object(m.useState)(Br.Equal),i=U()(o,2),u=i[0],c=i[1],d=Object(m.useState)(null),s=U()(d,2),p=s[0],v=s[1],b=Object(m.useState)(Br.None),y=U()(b,2),E=y[0],O=y[1],h=Object(m.useState)(null),g=U()(h,2),j=g[0],w=g[1],R=Object(m.useMemo)((function(){return Qr(p,u)}),[p,u]),C=U()(R,3),M=C[0],A=C[1],k=C[2],_=Object(m.useCallback)((function(e){if(0===e.length)return l(""),void n({});var t,a,r,o,i,u,c,d,s=[],m=[],f=Yr(e);try{for(f.s();!(t=f.n()).done;)a=void 0,r=void 0,o=void 0,i=void 0,u=void 0,c=void 0,d=void 0,a=t.value,r=a.op,o=a.date,i=function(){switch(r){case Br.Equal:return["$eq","="];case Br.GreaterThan:return["$gt",">"];case Br.GreaterThanOrEqual:return["$gte",">="];case Br.LessThan:return["$lt","<"];case Br.LessThanOrEqual:return["$lte","<="];case Br.None:return["",""]}}(),u=U()(i,2),c=u[0],d=u[1],s.push({date:G()({},c,Object(be.a)(o))}),m.push("".concat(d,"[").concat(Object(ve.a)(o,"d/M/yy"),"]"))}catch(e){f.e(e)}finally{f.f()}l(m.join(" & ")),n({$and:s})}),[n]),S=Object(m.useCallback)((function(e){var n,t=null!==(n=e.target.value)&&void 0!==n?n:Br.Equal;c(t);var a=Qr(p,t),r=U()(a,3)[2].includes(E);if(r||(O(Br.None),w(null)),p){var l=[{op:t,date:p}];r&&E!==Br.None&&E!==Br.Equal&&j&&l.push({op:E,date:j}),_(l)}}),[p,j,E,_]),I=Object(m.useCallback)((function(e){var n,t=null!==(n=e.target.value)&&void 0!==n?n:Br.None;O(t),t===Br.None?(w(null),_(p?[{op:u,date:p}]:[])):j&&_([{op:u,date:p},{op:t,date:j}])}),[p,j,u,_]),D=Object(m.useCallback)((function(e){if(!e||Object(gn.a)(e))if(v(e),e){var n=[{op:u,date:e}];if(j){var t=Qr(e,u),a=U()(t,2),r=a[0],l=a[1];E!==Br.None&&E!==Br.Equal&&r&&j>=r||l&&j<=l?n.push({op:E,date:j}):(O(Br.None),w(null))}_(n)}else _([]),O(Br.None),w(null)}),[j,u,E,_]),F=Object(m.useCallback)((function(e){e&&!Object(gn.a)(e)||(w(e),e?_([{op:u,date:p},{op:E,date:e}]):(_(p?[{op:u,date:p}]:[]),w(null)))}),[p,u,E,_]),T=Object(m.useCallback)((function(e){e.stopPropagation(),c(Br.Equal),v(null),O(Br.None),w(null),_([])}),[_]),x=Object(m.useMemo)((function(){return{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),endAdornment:p?f.a.createElement(xn.a,{position:"end"},f.a.createElement(Wr.a,{onClick:T},f.a.createElement(Be.a,null))):f.a.createElement(xn.a,{disablePointerEvents:!0,position:"end"},f.a.createElement(Jr.a,null))}}),[p,T]),P=Object(m.useState)(null),$=U()(P,2),N=$[0],q=$[1],L=Object(m.useCallback)((function(e){q(e.currentTarget)}),[]),B=Object(m.useCallback)((function(){q(null)}),[]);return f.a.createElement(le.a,null,f.a.createElement(va.a,{title:r||"No Filter"},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Fn.a,{fullWidth:!0,value:r,InputProps:x,onClick:L}))),f.a.createElement(Vr.a,{onClose:B,open:!!N,anchorEl:N},f.a.createElement(le.a,{maxWidth:350,margin:2,clone:!0},f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,{xs:12,item:!0},f.a.createElement(le.a,{marginTop:1},f.a.createElement(Cr.a,{value:u,onChange:S},f.a.createElement(Mr.a,{value:Br.Equal},f.a.createElement(me.e,null)),f.a.createElement(Mr.a,{value:Br.GreaterThan},f.a.createElement(me.h,null)),f.a.createElement(Mr.a,{value:Br.LessThan},f.a.createElement(me.j,null)),f.a.createElement(Mr.a,{value:Br.GreaterThanOrEqual},f.a.createElement(me.i,null)),f.a.createElement(Mr.a,{value:Br.LessThanOrEqual},f.a.createElement(me.k,null)))),f.a.createElement(En.a,{utils:hn.default},f.a.createElement(On.b,{onChange:D,value:p,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",margin:"none",label:"Date",animateYearScrolling:!0,disableToolbar:!0,autoOk:!0,variant:"inline"}))),!!p&&u!==Br.Equal&&f.a.createElement(on.a,{xs:12,item:!0},f.a.createElement(le.a,{marginTop:1},f.a.createElement(Cr.a,{value:E,onChange:I},f.a.createElement(Mr.a,{value:Br.None},"None"),f.a.createElement(Mr.a,{style:{display:"None"},value:Br.Equal},f.a.createElement(me.e,null)),f.a.createElement(Mr.a,{style:k.includes(Br.GreaterThan)?void 0:{display:"none"},disabled:!k.includes(Br.GreaterThan),value:Br.GreaterThan},f.a.createElement(me.h,null)),f.a.createElement(Mr.a,{style:k.includes(Br.LessThan)?void 0:{display:"none"},disabled:!k.includes(Br.LessThan),value:Br.LessThan},f.a.createElement(me.j,null)),f.a.createElement(Mr.a,{style:k.includes(Br.GreaterThanOrEqual)?void 0:{display:"none"},disabled:!k.includes(Br.GreaterThanOrEqual),value:Br.GreaterThanOrEqual},f.a.createElement(me.i,null)),f.a.createElement(Mr.a,{style:k.includes(Br.LessThanOrEqual)?void 0:{display:"none"},disabled:!k.includes(Br.LessThanOrEqual),value:Br.LessThanOrEqual},f.a.createElement(me.k,null)))),f.a.createElement(En.a,{utils:hn.default},f.a.createElement(On.b,{disabled:E===Br.None,minDate:M||Zr,maxDate:A||Hr,onChange:F,value:j,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",margin:"none",label:"Date",animateYearScrolling:!0,disableToolbar:!0,autoOk:!0,variant:"inline"})))))))};function nl(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return tl(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return tl(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function tl(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}!function(e){e[e.None=1]="None",e[e.Equal=2]="Equal",e[e.GreaterThan=3]="GreaterThan",e[e.LessThan=4]="LessThan",e[e.GreaterThanOrEqual=5]="GreaterThanOrEqual",e[e.LessThanOrEqual=6]="LessThanOrEqual"}(Xr||(Xr={}));var al,rl=function(e,n){if(!e)return[void 0,void 0,[Xr.None]];switch(n){case Xr.None:case Xr.Equal:return[void 0,void 0,[Xr.None]];case Xr.GreaterThan:case Xr.GreaterThanOrEqual:return[e.add(new Ee.a({n:1,d:100})),void 0,[Xr.None,Xr.LessThan,Xr.LessThanOrEqual]];case Xr.LessThan:case Xr.LessThanOrEqual:return[void 0,e.sub(new Ee.a({n:1,d:100})),[Xr.None,Xr.GreaterThan,Xr.GreaterThanOrEqual]]}},ll={type:"number",startAdornment:f.a.createElement(xn.a,{position:"start"},"$")},ol=function(e){var n=e.setFilter,t=Object(m.useState)(""),a=U()(t,2),r=a[0],l=a[1],o=Object(m.useState)(Xr.Equal),i=U()(o,2),u=i[0],c=i[1],d=Object(m.useState)(""),s=U()(d,2),p=s[0],v=s[1],b=Object(m.useState)(Xr.None),y=U()(b,2),E=y[0],O=y[1],h=Object(m.useState)(""),g=U()(h,2),j=g[0],w=g[1],R=Object(m.useMemo)((function(){return rl(p?new Ee.a(p):null,u)}),[p,u]),C=U()(R,3),M=C[0],A=C[1],k=C[2],_=Object(m.useMemo)((function(){return{min:M?M.toString():"0.00",max:A?A.toString():void 0,step:"0.01"}}),[M,A]),S=Object(m.useCallback)((function(e){if(0===e.length)return l(""),void n({});var t,a,r,o,i,u,c,d,s=[],m=[],f=nl(e);try{for(f.s();!(t=f.n()).done;)a=void 0,r=void 0,o=void 0,i=void 0,u=void 0,c=void 0,d=void 0,a=t.value,r=a.op,o=a.total,i=function(){switch(r){case Xr.Equal:return["$eq","="];case Xr.GreaterThan:return["$gt",">"];case Xr.GreaterThanOrEqual:return["$gte",">="];case Xr.LessThan:return["$lt","<"];case Xr.LessThanOrEqual:return["$lte","<="];case Xr.None:return["",""]}}(),u=U()(i,2),c=u[0],d=u[1],s.push({total:G()({},c,o)}),m.push("".concat(d,"[").concat(o,"]"))}catch(e){f.e(e)}finally{f.f()}l(m.join(" & ")),n({$and:s})}),[n]),I=Object(m.useCallback)((function(e){var n,t=null!==(n=e.target.value)&&void 0!==n?n:Xr.Equal;c(t);var a=rl(p?new Ee.a(p):null,t),r=U()(a,3)[2].includes(E);if(r||(O(Xr.None),w("")),p){var l=[{op:t,total:new Ee.a(p).valueOf()}];if(r&&E!==Xr.None&&E!==Xr.Equal&&j){var o=new Ee.a(j);l.push({op:E,total:o.valueOf()})}S(l)}}),[p,j,E,S]),D=Object(m.useCallback)((function(e){var n,t=null!==(n=e.target.value)&&void 0!==n?n:Xr.None;if(O(t),t===Xr.None)if(w(""),p){var a=new Ee.a(p);S([{op:u,total:a.valueOf()}])}else S([]);else if(j){var r=new Ee.a(p),l=new Ee.a(j);S([{op:u,total:r.valueOf()},{op:t,total:l.valueOf()}])}}),[p,j,u,S]),F=Object(m.useCallback)((function(e){var n=e.target.value.trim();if(n){var t=new Ee.a(n).round(2);l(t.toString()),v(n);var a=[{op:u,total:t.valueOf()}];if(j){var r=rl(t,u),o=U()(r,2),i=o[0],c=o[1],d=new Ee.a(j);E!==Xr.None&&E!==Xr.Equal&&i&&d.compare(i)>=0||c&&d.compare(c)<=0?a.push({op:E,total:d.valueOf()}):(O(Xr.None),w(""))}S(a)}else l(n),S([]),O(Xr.None),w("")}),[u,j,S,E]),T=Object(m.useCallback)((function(e){var n=e.target.value.trim();if(n){var t=new Ee.a(p),a=new Ee.a(n).round(2);w(n),S([{op:u,total:t.valueOf()},{op:E,total:a.valueOf()}])}else{if(p){var r=new Ee.a(p);S([{op:u,total:r.valueOf()}])}else S([]);w("")}}),[p,u,E,S]),x=Object(m.useCallback)((function(e){e.stopPropagation(),c(Xr.Equal),v(""),O(Xr.None),w(""),S([])}),[S]),P=Object(m.useMemo)((function(){return{startAdornment:f.a.createElement(xn.a,{disablePointerEvents:!0,position:"start"},f.a.createElement(Je.a,null)),endAdornment:p?f.a.createElement(xn.a,{position:"end"},f.a.createElement(Wr.a,{onClick:x},f.a.createElement(Be.a,null))):f.a.createElement(xn.a,{disablePointerEvents:!0,position:"end"},f.a.createElement(Jr.a,null))}}),[p,x]),$=Object(m.useState)(null),N=U()($,2),q=N[0],L=N[1],B=Object(m.useCallback)((function(e){L(e.currentTarget)}),[]),W=Object(m.useCallback)((function(){L(null)}),[]);return f.a.createElement(le.a,null,f.a.createElement(va.a,{title:r||"No Filter"},f.a.createElement(le.a,{maxWidth:250},f.a.createElement(Fn.a,{fullWidth:!0,value:r,InputProps:P,onClick:B}))),f.a.createElement(Vr.a,{onClose:W,open:!!q,anchorEl:q},f.a.createElement(le.a,{maxWidth:350,margin:2,clone:!0},f.a.createElement(on.a,{container:!0,spacing:2},f.a.createElement(on.a,{xs:12,item:!0},f.a.createElement(Cr.a,{value:u,onChange:I},f.a.createElement(Mr.a,{value:Xr.Equal},f.a.createElement(me.e,null)),f.a.createElement(Mr.a,{value:Xr.GreaterThan},f.a.createElement(me.h,null)),f.a.createElement(Mr.a,{value:Xr.LessThan},f.a.createElement(me.j,null)),f.a.createElement(Mr.a,{value:Xr.GreaterThanOrEqual},f.a.createElement(me.i,null)),f.a.createElement(Mr.a,{value:Xr.LessThanOrEqual},f.a.createElement(me.k,null))),f.a.createElement(le.a,{marginTop:2},f.a.createElement(Fn.a,{placeholder:"0.00",label:"Total",type:"number",inputProps:_,InputProps:ll,value:p,onChange:F}))),!!p&&u!==Xr.Equal&&f.a.createElement(on.a,{xs:12,item:!0},f.a.createElement(Cr.a,{value:E,onChange:D},f.a.createElement(Mr.a,{value:Xr.None},"None"),f.a.createElement(Mr.a,{style:{display:"None"},value:Xr.Equal},f.a.createElement(me.e,null)),f.a.createElement(Mr.a,{style:k.includes(Xr.GreaterThan)?void 0:{display:"none"},disabled:!k.includes(Xr.GreaterThan),value:Xr.GreaterThan},f.a.createElement(me.h,null)),f.a.createElement(Mr.a,{style:k.includes(Xr.LessThan)?void 0:{display:"none"},disabled:!k.includes(Xr.LessThan),value:Xr.LessThan},f.a.createElement(me.j,null)),f.a.createElement(Mr.a,{style:k.includes(Xr.GreaterThanOrEqual)?void 0:{display:"none"},disabled:!k.includes(Xr.GreaterThanOrEqual),value:Xr.GreaterThanOrEqual},f.a.createElement(me.i,null)),f.a.createElement(Mr.a,{style:k.includes(Xr.LessThanOrEqual)?void 0:{display:"none"},disabled:!k.includes(Xr.LessThanOrEqual),value:Xr.LessThanOrEqual},f.a.createElement(me.k,null))),f.a.createElement(le.a,{marginTop:2},f.a.createElement(Fn.a,{disabled:E===Xr.None,placeholder:"0.00",label:"Total",type:"number",inputProps:_,InputProps:ll,value:j,onChange:T})))))))},il=t(8);function ul(){var e=x()(["\n  mutation ReconcileRefund($id: ID!) {\n    journalEntryUpdateRefund(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return ul=function(){return e},e}function cl(){var e=x()(["\n  mutation ReconcileEntry($id: ID!) {\n    journalEntryUpdate(id: $id, fields: { reconciled: true }) {\n      ...JournalEntry_1Fragment\n    }\n  }\n  ","\n"]);return cl=function(){return e},e}function dl(){var e=x()(["\n  subscription OnEntryUpsert_1 {\n    journalEntryUpserted {\n      ...JournalEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return dl=function(){return e},e}function sl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function ml(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?sl(Object(t),!0).forEach((function(n){G()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):sl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function fl(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return pl(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pl(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function pl(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}Object(il.b)(il.a.EXPRESSION,(function(e){return{$expressionCb:function(n,t,a){return t(n,a,e)}}})),Object(il.b)(il.a.QUERY,(function(e){return{$queryCb:function(n,t,a,r){return a(n,t,r,e)}}})),function(e){e[e.View=0]="View",e[e.Reconcile=1]="Reconcile"}(al||(al={}));var vl=V.a.mark((function e(n){var t,a,r,l,o,i,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=fl(n),e.prev=1,t.s();case 3:if((a=t.n()).done){e.next=27;break}return r=a.value,e.next=7,r;case 7:l=r.type===u.Credit?u.Debit:u.Credit,o=fl(r.refunds),e.prev=9,o.s();case 11:if((i=o.n()).done){e.next=17;break}return c=i.value,e.next=15,ml(ml(ml({},r),c),{},{type:l,description:c.description||r.description,refunds:r.id});case 15:e.next=11;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(9),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:e.next=3;break;case 27:e.next=32;break;case 29:e.prev=29,e.t1=e.catch(1),t.e(e.t1);case 32:return e.prev=32,t.f(),e.finish(32);case 35:case"end":return e.stop()}}),e,null,[[1,29,32,35],[9,19,22,25]])})),bl=(Symbol(),pe()(dl(),Pe)),yl=pe()(cl(),Pe),El=pe()(ul(),Pe),Ol=function(e){var n,t,a=e.journalTitle,r=void 0===a?null:a,l=e.deptId,o=void 0===l?null:l,i=e.fiscalYearId,c=void 0===i?null:i,d=e.mode,s=Object(m.useState)(!1),p=U()(s,2),v=p[0],b=p[1],y=Object(m.useCallback)((function(){b(!1)}),[b]),E=Object(m.useState)(!1),O=U()(E,2),h=O[0],g=O[1],j=Object(m.useState)(null),w=U()(j,2),R=w[0],C=w[1],M=Object(m.useCallback)((function(){g(!1)}),[g]),A=Object(m.useCallback)((function(){C(null)}),[C]),k=Object(m.useState)(null),_=U()(k,2),S=_[0],I=_[1],D=Object(m.useCallback)((function(){I(null)}),[I]),F=Object(m.useState)(!1),T=U()(F,2),x=T[0],P=T[1],$=Object(m.useState)(null),q=U()($,2),B=q[0],W=q[1],J=Object(m.useCallback)((function(){P(!1)}),[P]),G=Object(m.useCallback)((function(){W(null)}),[W]),X=Object(m.useState)(!1),fe=U()(X,2),pe=fe[0],ye=fe[1],je=Object(m.useState)(null),we=U()(je,2),Re=we[0],Ce=we[1],Me=Object(m.useCallback)((function(){ye(!1)}),[ye]),Ae=Object(m.useCallback)((function(){Ce(null)}),[Ce]),ke=Object(m.useState)(null),_e=U()(ke,2),Se=_e[0],Ie=_e[1],De=Object(m.useCallback)((function(){Ie(null)}),[Ie]),Fe=Object(K.b)(yl),Te=U()(Fe,2),xe=Te[0],Pe=Te[1].loading,qe=Object(K.b)(El),Le=U()(qe,2),Be=Le[0],Ue=Le[1].loading,We=Object(m.useMemo)((function(){return o&&c?{where:{department:{eq:{id:o,matchDescendants:!0}},fiscalYear:{eq:c}}}:o?{where:{department:{eq:{id:o,matchDescendants:!0}}}}:c?{where:{fiscalYear:{eq:c}}}:void 0}),[o,c]),Ve=Object(K.c)($e,{variables:We,fetchPolicy:"cache-and-network"}),Je=Ve.loading,Ge=Ve.error,ze=Ve.data,Ye=Ve.subscribeToMore,Ke=Je&&!(null==ze?void 0:ze.journalEntries),Xe=Object(m.useMemo)((function(){var e;return null!==(e=((null==ze?void 0:ze.fiscalYears)||[]).find((function(e){return e.id===c})))&&void 0!==e?e:null}),[c,ze]);Object(m.useEffect)((function(){return Ye({document:bl,updateQuery:function(e,n){var t,a=n.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(o&&r.department.id!==o&&l.every((function(e){return"Department"===e.__typename&&e.id!==o}))){var i=e.journalEntries.filter((function(e){return e.id!==r.id}));return Object.assign({},e,{journalEntries:i})}if(Xe){var u=(null===(t=r.dateOfRecord)||void 0===t?void 0:t.overrideFiscalYear)?new Date(r.dateOfRecord.date):new Date(r.date);if(u<new Date(Xe.begin)||u>=new Date(Xe.end)){var c=e.journalEntries.filter((function(e){return e.id!==r.id}));return Object.assign({},e,{journalEntries:c})}}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(L()(e.journalEntries))})}})}),[o,Xe,Ye]);var Qe=(null==ze?void 0:ze.journalEntries)||[],He=Object(m.useMemo)((function(){var e,n={category:new Map,paymentMethod:new Map,source:new Map,department:new Map},t=[],a=fl(vl(Qe));try{for(a.s();!(e=a.n()).done;){var r=e.value;r.deleted||d===al.Reconcile&&r.reconciled||(n.category.set(r.category.id,r.category),n.department.set(r.department.id,r.department),n.paymentMethod.set(r.paymentMethod.id,r.paymentMethod),n.source.set("".concat(r.source.__typename,"-").concat(r.source.id),r.source),t.push(r))}}catch(e){a.e(e)}finally{a.f()}return[t,{category:L()(n.category.values()),department:L()(n.department.values()),paymentMethod:L()(n.paymentMethod.values()).filter((function(e){var n;return"5dc46d0af74afb2c2805bd54"!==(null===(n=e.parent)||void 0===n?void 0:n.id)})),source:L()(n.source.values())}]}),[Qe,d]),en=U()(He,2),nn=en[0],tn=en[1],an=Object(m.useMemo)((function(){return[{field:"reconciled",title:"Reconciled",render:function(e){return e.reconciled?f.a.createElement(ee.a,null):null},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(Ar,{setFilter:function(e){var a,r;return t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"0",e)}})},hidden:d===al.Reconcile,filtering:!0},{field:"total",title:"Total",render:function(e){var n=e.total;return Q()($n(n).valueOf()).format("$0,0.00")},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(ol,{setFilter:function(e){var a,r;t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"1",e)}})}},{field:"date",title:"Date",render:function(e){var n=e.date;return Object(ve.a)(new Date(n),"MMM dd, yyyy")},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(el,{setFilter:function(e){var a,r;t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"2",e)}})},defaultSort:"desc"},{field:"dateOfRecord",title:"Date Of record",render:function(e){var n=e.date,t=e.dateOfRecord;return Object(ve.a)(new Date((null==t?void 0:t.date)||n),"MMM dd, yyyy")},searchable:!1,filtering:!1,sorting:!1},{field:"category",title:"Category",render:function(e,n){var t="group"===n?e.name:e.category.name;return Object(H.a)(t)},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(Dr,{options:tn.category,setFilter:function(e){var a,r;return t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"3",e)}})}},{field:"source",title:"Source",render:function(e){var n=e.source;switch(n.__typename){case"Person":return"".concat(n.name.first," ").concat(n.name.last);case"Business":return n.bizName;case"Department":return n.deptName}},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(Ur,{options:tn.source,setFilter:function(e){var a,r;return t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"4",e)}})}},{field:"paymentMethod",title:"Payment Method",render:function(e){var n,t=e.paymentMethod;return(null===(n=t.parent)||void 0===n?void 0:n.id)===Ne?"CK-".concat(t.name):t.name},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(xr,{options:tn.paymentMethod,setFilter:function(e){var a,r;return t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"5",e)}})}},{field:"description",title:"Description",render:function(e){return e.description},searchable:!1,filtering:!1,sorting:!1},{field:"department",title:"Department",render:function(e){var n=e.department;return Object(H.a)(n.name)},searchable:!1,filterComponent:function(e){var n=e.columnDef,t=e.onFilterChanged;return f.a.createElement(Nr,{options:tn.department,setFilter:function(e){var a,r;return t(null!==(r=null===(a=n.tableData)||void 0===a?void 0:a.id)&&void 0!==r?r:"5",e)}})}}]}),[tn.category,tn.department,tn.paymentMethod,tn.source,d]),rn=Object(m.useMemo)((function(){return{toolbar:{searchTooltip:f.a.createElement(le.a,{fontSize:12,component:"span"},'[abc] | [efg] = "abc" OR "efg"',f.a.createElement("br",null),'\'[abc] = EXACTLY "abc"',f.a.createElement("br",null),'![abc] = NOT "abc"',f.a.createElement("br",null),'^[abc] = STARTS WITH "abc"',f.a.createElement("br",null),'!^[abc] = DOES NOT START WITH "abc"',f.a.createElement("br",null),'[abc]$ = ENDS WITH "abc"',f.a.createElement("br",null),'![abc]$ = DOES NOT END WITH "abc"'),nRowsSelected:"Reconcile {0} Entry(s)"}}}),[]),ln=Object(m.useState)(0),on=U()(ln,2),un=on[0],cn=on[1],dn=Object(m.useMemo)((function(){return{rowStyle:function(e){var n={};return n.color=e.type===u.Credit?de.a[900]:se.a[900],n},maxBodyHeight:"calc(100vh - 53px - 64px)",headerStyle:{position:"sticky",top:0},pageSize:25,pageSizeOptions:un?[25,50,100,un]:[25,50,100],showTitle:!!r,selection:d===al.Reconcile,showSelectAllCheckbox:!1,debounceInterval:500,emptyRowsWhenPaging:!1,columnsButton:!0,filtering:!0,sorting:!0,thirdSortClick:!1,exportAllData:!0,exportButton:!0,exportFileName:r||"lsccBudgetTracking",exportCsv:function(e,n){var t=he.unparse(n.reduce((function(n,t){return n.push(e.reduce((function(e,n){var a=n.field,r=n.title,l=n.render;switch(a){case"reconciled":case"date":e[r||a]=t[a];break;default:e[r||a]=l?l(t,"row"):t[a]}return e}),{})),n}),[]));Object(ge.saveAs)(new Blob([t],{type:"text/plain;charset=utf-8"}),"".concat(r||"budgetTracking",".csv"))}}}),[r,d,un]),sn=Object(m.useMemo)((function(){return d===al.Reconcile?[{icon:function(e){return f.a.createElement(ne.a,Object.assign({},e))},tooltip:"Reconcile Selected",position:"toolbarOnSelect",iconProps:{color:"secondary",fontSize:"large"},onClick:(e=N()(V.a.mark((function e(n,t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all((Array.isArray(t)?t:[t]).map(function(){var e=N()(V.a.mark((function e(n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.reconciled){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"JournalEntryRefund"!==n.__typename){e.next=8;break}return e.next=6,Be({variables:{id:n.id}});case 6:e.next=10;break;case 8:return e.next=10,xe({variables:{id:n.id}});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(n,t){return e.apply(this,arguments)})}]:[function(e){var n=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Delete Entry",onClick:function(e,n){return I(n.id)}};case"JournalEntryRefund":return{tooltip:"Delete Refund",onClick:function(e,n){return Ie(n.id)}}}}(),t=n.tooltip,a=n.onClick;return{icon:te.a,tooltip:t,onClick:a}},function(e){var n=function(){switch(e.__typename){case"JournalEntry":return{tooltip:"Edit Entry",onClick:function(e,n){g(!0),C(n.id)}};case"JournalEntryRefund":return{tooltip:"Edit Refund",onClick:function(e,n){ye(!0),Ce({entryId:n.refunds,refundId:n.id})}}}}(),t=n.tooltip,a=n.onClick;return{icon:ae.a,tooltip:t,onClick:a}},function(e){if("JournalEntry"!==e.__typename)return null;var n=e.type===u.Credit;return{icon:function(e){return n?f.a.createElement(me.d,Object.assign({},e)):f.a.createElement(me.c,Object.assign({},e))},tooltip:n?"Give Refund":"Add Refund",iconProps:{style:{color:n?se.a[900]:de.a[900]}},onClick:function(e,n){P(!0),W(n.id)}}},{icon:function(e){return f.a.createElement(re.a,Object.assign({},e))},iconProps:{color:"secondary",fontSize:"large"},tooltip:"Add Entry",isFreeAction:!0,onClick:function(){b(!0)}}];var e}),[d,Be,xe,Ie,I]),mn=Object(m.useMemo)((function(){return new Map}),[]),fn=Object(m.useMemo)((function(){return{Body:Ge?function(e){return f.a.createElement(oe.a,Object.assign({},e),f.a.createElement(ie.a,null,f.a.createElement(ue.a,{colSpan:an.length+(Array.isArray(sn)&&sn.length>0?1:0),align:"left"},f.a.createElement(ce.a,{align:"center",color:"error",variant:"h4"},"Error Loading Entries"),f.a.createElement(ce.a,{variant:"body1"},Ge.message))))}:function(e){return f.a.createElement(z.MTableBody,Object.assign({},e))},Row:function(e){var n=ml(ml({},e),{},{onToggleDetailPanel:function(n,t){mn.has(e.data.id)?mn.delete(e.data.id):mn.set(e.data.id,t);for(var a=arguments.length,r=new Array(a>2?a-2:0),l=2;l<a;l++)r[l-2]=arguments[l];return e.onToggleDetailPanel.apply(e,[n,t].concat(r))}});return f.a.createElement(z.MTableBodyRow,Object.assign({},n))}}}),[Ge,an.length,sn,mn]),pn=Object(m.useMemo)((function(){return[function(e){var n="JournalEntry"===e.__typename,t=!!n&&e.items.length>0;return{icon:function(e){return n?t?f.a.createElement(me.f,Object.assign({},e)):f.a.createElement(me.g,Object.assign({},e)):null},openIcon:function(e){return t?f.a.createElement(me.f,Object.assign({},e,{color:"primary"})):f.a.createElement(me.g,Object.assign({},e,{color:"primary"}))},disabled:!n,tooltip:n?"Itemize":void 0,render:function(e){return"JournalEntry"!==e.__typename?null:f.a.createElement(Rr,{entry:e})}}}]}),[]),vn=Object(m.useState)(new Ee.a(0)),bn=U()(vn,2),yn=bn[0],En=bn[1],On=Object(m.useMemo)((function(){var e=(null==Xe?void 0:Xe.name)?"".concat(null==Xe?void 0:Xe.name," "):"",n=yn.compare(new Ee.a(0)),t=f.a.createElement(le.a,{color:0===n?void 0:n>0?de.a[900]:se.a[900],component:"span"},Q()(yn.valueOf()).format("$0,0.00"));return r?f.a.createElement(ce.a,{variant:"h6"},"".concat(e).concat(r,": "),t):f.a.createElement(ce.a,{variant:"h6"},e,t)}),[Xe,yn,r]),hn=Object(m.useRef)(null),gn=Object(m.useCallback)(function(){var e=N()(V.a.mark((function e(n){var t,a,r,l,i,c,d,s,m,f,p,v,b,y,E,O,h,g,j,w,R,C,M;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.filters,r=n.page,l=n.pageSize,i=n.orderBy,c=n.orderDirection,d=null===(t=n.search)||void 0===t?void 0:t.trim(),s=d?new Z.a(nn,{keys:["date","total","description","department","category","paymentMethod","source"],threshold:.4,useExtendedSearch:!0,getFn:function(e,n){var t;switch(n){case"date":var a=new Date(e.date);return[e.date,Object(ve.a)(a,"M/d/yy"),Object(ve.a)(a,"MM/d/yy"),Object(ve.a)(a,"M/d/yyyy"),Object(ve.a)(a,"MM/d/yyyy"),Object(ve.a)(a,"MMM dd, yyyy")];case"total":var r=$n(e.total).valueOf();return[Q()(r).format("$0,0.00"),r.toFixed(2)];case"description":return(null===(t=e.description)||void 0===t?void 0:t.trim())||"";case"department":return e.department.name;case"category":return e.category.name;case"paymentMethod":return e.paymentMethod.name;case"source":switch(e.source.__typename){case"Person":return[e.source.name.first,e.source.name.last];case"Business":return e.source.bizName;case"Department":return e.source.deptName}break;default:return""}}}).search(d).map((function(e){return e.item})):nn,m=[],f={$and:[]},a.length>0){p=f.$and,v=fl(a);try{for(v.s();!(b=v.n()).done;)y=b.value,Object.keys(y.value).length>0&&p.push(y.value)}catch(e){v.e(e)}finally{v.f()}}if(f.$and.length>0&&m.push({$addFields:{_dateStr_:"$date",date:{$expressionCb:function(e){return Object(be.a)(new Date(e.date))}},_totalRational_:"$total",total:{$expressionCb:function(e){return $n(e.total).valueOf()}}}},{$match:f},{$addFields:{date:"$_dateStr_",total:"$_totalRational_"}},{$project:{_dateStr_:!1,_totalRational_:!1}}),E={data:[],raw:[]},!i){e.next=29;break}O=i.field,e.t0=O,e.next="date"===e.t0?13:"total"===e.t0?15:"reconciled"===e.t0?17:"department"===e.t0?19:"category"===e.t0?21:"paymentMethod"===e.t0?23:"source"===e.t0?25:27;break;case 13:return E.data.push({$addFields:{_sortBy_:{$toDate:"$date"}}}),e.abrupt("break",28);case 15:return E.data.push({$addFields:{_sortBy_:{$expressionCb:function(e){return $n(e.total).valueOf()}}}}),e.abrupt("break",28);case 17:return E.data.push({$addFields:{_sortBy_:"$reconciled"}}),e.abrupt("break",28);case 19:return E.data.push({$addFields:{_sortBy_:"$department.name"}}),e.abrupt("break",28);case 21:return E.data.push({$addFields:{_sortBy_:"$category.name"}}),e.abrupt("break",28);case 23:return E.data.push({$addFields:{_sortBy_:"$paymentMethod.name"}}),e.abrupt("break",28);case 25:return E.data.push({$addFields:{_sortBy_:{$cond:{if:{$eq:[{$ifNull:["$source.name.first",null]},null]},then:"$source.name",else:{$concat:["$source.name.first"," ","$source.name.last"]}}}}}),e.abrupt("break",28);case 27:E.data.push({$addFields:{_sortBy_:{$toDate:"$date"}}});case 28:E.data.push({$sort:{_sortBy_:"asc"===c?1:-1}},{$project:{_sortBy_:!1}});case 29:return E.data.push({$skip:r*l},{$limit:l}),m.push({$facet:E}),h=new Oe.a(m).run(s),g=U()(h,1),j=g[0],w=j.data.map((function(e){return mn.has(e.id)?ml(ml({},e),{},{tableData:{showDetailPanel:mn.get(e.id)}}):e})),R=j.raw,function(){var e=new Map(mn);mn.clear();var n,t=fl(R);try{for(t.s();!(n=t.n()).done;){var a=n.value.id;e.has(a)&&mn.set(a,e.get(a))}}catch(e){t.e(e)}finally{t.f()}}(),C=R.length,M=function(){var e,n=new Ee.a(0),t=fl(R);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(!a.deleted){var r=$n(a.total);if(o){var l,i=fl(a.items);try{for(i.s();!(l=i.n()).done;){var c=l.value;c.deleted||!c.department||c.department.id===o||c.department.ancestors.some((function(e){return"Department"===e.__typename&&e.id===o}))||(r=r.sub($n(c.total)))}}catch(e){i.e(e)}finally{i.f()}}n=a.type===u.Credit?n.add(r):n.sub(r)}}}catch(e){t.e(e)}finally{t.f()}return n}(),0!==yn.compare(M)&&En(M),cn(C),e.abrupt("return",{data:w,page:r,totalCount:C});case 40:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[yn,o,nn,mn,cn]);return Object(m.useEffect)((function(){hn.current&&hn.current.onQueryChange(null)}),[hn,nn]),f.a.createElement(f.a.Fragment,null,f.a.createElement(Y.a,{icons:Ze,isLoading:Ke||Pe||Ue,columns:an,data:gn,options:dn,localization:rn,actions:sn,components:fn,title:On,detailPanel:pn,tableRef:hn}),f.a.createElement(Aa,{deptId:o,open:v,onClose:y}),f.a.createElement(Ga,{entryId:R,open:h,onClose:M,onExited:A}),f.a.createElement(Ka,{entryId:S,onClose:D}),f.a.createElement(Ct,{entryId:B,open:x,onClose:J,onExited:G}),f.a.createElement(Ft,{entryId:null!==(n=null==Re?void 0:Re.entryId)&&void 0!==n?n:null,refundId:null!==(t=null==Re?void 0:Re.refundId)&&void 0!==t?t:null,open:pe,onClose:Me,onExited:Ae}),f.a.createElement(Ha,{refundId:Se,onClose:De}))},hl=t(5808),gl=t(414),jl=t.n(gl),wl=t(416),Rl=t.n(wl),Cl=t(418),Ml=t.n(Cl),Al=t(417),kl=t.n(Al),_l=t(5805),Sl=t(5807),Il=t(5806),Dl=t(165),Fl=t(161),Tl=t(294);function xl(){var e=x()(["\n  subscription JournalEntryUpdated_2 {\n    journalEntryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return xl=function(){return e},e}function Pl(){var e=x()(["\n  subscription JournalEntryAdded_2 {\n    journalEntryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return Pl=function(){return e},e}function $l(){var e=x()(["\n  query GetReportData($deptId:ID!, $where:JournalEntiresWhere!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    journalEntries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n    fiscalYears {\n      __typename\n      id\n      name\n      begin\n      end\n    }\n  }\n  ",",\n  ","\n"]);return $l=function(){return e},e}function Nl(){var e=x()(["\n  fragment GetReportDataEntry_1Fragment on JournalEntry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n    }\n    type\n    total {\n      n\n      d\n      s\n    }\n    fiscalYear {\n      __typename\n      id\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total {\n        n\n        d\n        s\n      }\n      deleted\n      lastUpdate\n    }\n    items {\n      __typename\n      id\n      total {\n        n\n        d\n        s\n      }\n      department {\n        __typename\n        id\n      }\n      deleted\n    }\n    lastUpdate\n    deleted\n  }\n"]);return Nl=function(){return e},e}function ql(){var e=x()(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budgets {\n      id\n      __typename\n      amount {\n        n\n        d\n        s\n      }\n      fiscalYear {\n        __typename\n        id\n      }\n    }\n  }\n"]);return ql=function(){return e},e}var Ll=pe()(ql()),Bl=pe()(Nl()),Ul=pe()($l(),Ll,Bl);pe()(Pl(),Bl),pe()(xl(),Bl);function Wl(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Vl(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Vl(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Vl(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function Jl(){var e=x()(["\n  subscription OnEntryUpsert_2 {\n    journalEntryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Jl=function(){return e},e}function Gl(){var e=x()(["\n  query DeptForUpsertAdd($id: ID!) {\n    department(id: $id) {\n      ...DeptEntryOptFragment\n    }\n  }\n  ","\n"]);return Gl=function(){return e},e}var zl=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?de.a[n]:e<.9?Dl.a[n]:se.a[n]},Yl=function(e){var n=e.spentPercentage,t=e.height;return f.a.createElement(le.a,{height:t,bgcolor:zl(n),display:"flex",justifyContent:"flex-start"},f.a.createElement(le.a,{height:"100%",width:"".concat(100*n,"%"),bgcolor:Fl.a[400]}))},Kl=(pe()(Gl(),et),pe()(Jl(),Bl)),Xl=function(e){var n,t=e.deptId,a=Object(m.useState)(!1),r=U()(a,2),l=r[0],o=r[1],i=Object(m.useCallback)((function(){o(!1)}),[o]),c=Object(m.useMemo)((function(){return{deptId:t,where:{department:{eq:{id:t,matchDescendants:!0}},deleted:!1}}}),[t]),d=Object(K.c)(Ul,{variables:c,fetchPolicy:"cache-and-network"}),s=d.loading,p=d.error,v=d.data,b=d.subscribeToMore,y=s&&!(null==v?void 0:v.journalEntries);Object(m.useEffect)((function(){return b({document:Kl,updateQuery:function(e,n){var a=n.subscriptionData;if(!a.data)return e;var r=a.data.journalEntryUpserted,l=r.department.ancestors;if(t&&r.department.id!==t&&l.every((function(e){return"Department"===e.__typename&&e.id!==t}))){var o=e.journalEntries.filter((function(e){return e.id!==r.id}));return o.length===e.journalEntries.length?e:Object.assign({},e,{journalEntries:o})}return e.journalEntries.some((function(e){return e.id===r.id}))?e:Object.assign({},e,{journalEntries:[r].concat(L()(e.journalEntries))})}})}),[t,b]);var O=Object(m.useState)(new Date((new Date).toDateString())),h=U()(O,2),g=h[0],j=h[1],w=Object(m.useMemo)((function(){var e,n=Wl((null==v?void 0:v.fiscalYears)||[]);try{for(n.s();!(e=n.n()).done;){var t=e.value;if(g>=new Date(t.begin)&&g<new Date(t.end))return t}}catch(e){n.e(e)}finally{n.f()}return null}),[g,v]),R=Object(m.useMemo)((function(){return((null==v?void 0:v.journalEntries)||[]).filter((function(e){return!e.deleted&&(null==w?void 0:w.id)===e.fiscalYear.id}))}),[v,w]),C=(null===(n=null==v?void 0:v.department)||void 0===n?void 0:n.name)||"";Object(m.useEffect)((function(){document.title=C}),[C]);var M=(null==v?void 0:v.department)||null,A=Object(m.useMemo)((function(){var e,n=new Map,t=new Ee.a(0),a=new Ee.a(0),r=[];M&&function(){var a=new Set;r.push.apply(r,[M].concat(L()(M.descendants)));var l,o=Wl(r);try{for(o.s();!(l=o.n()).done;){var i=l.value,u=null!==(e=i.budgets.find((function(e){return e.fiscalYear.id===(null==w?void 0:w.id)&&!a.has(e.id)})))&&void 0!==e?e:null,c=null;if(u){var d=u.amount;a.add(u.id),c=$n(d),t=t.add(c)}n.set(i.id,{name:i.name,spent:new Ee.a(0),budget:c})}}catch(e){o.e(e)}finally{o.f()}}();var l,o=Wl(R);try{for(o.s();!(l=o.n()).done;){var i=l.value;if(!i.deleted){var c,d=n.get(i.department.id),s=$n(i.total),m=Wl(i.refunds);try{for(m.s();!(c=m.n()).done;){var f=c.value;f.deleted||(s=s.sub($n(f.total)))}}catch(e){m.e(e)}finally{m.f()}if(M){var p,v=Wl(i.items);try{var b=function(){var e=p.value;if(e.deleted||!e.department||r.some((function(n){var t;return n.id===(null===(t=e.department)||void 0===t?void 0:t.id)})))return"continue";s=s.sub($n(e.total))};for(v.s();!(p=v.n()).done;)b()}catch(e){v.e(e)}finally{v.f()}}i.type===u.Credit?(a=a.sub(s),d.spent=d.spent.sub(s)):(a=a.add(s),d.spent=d.spent.add(s))}}}catch(e){o.e(e)}finally{o.f()}return{totalRemaining:Q()(t.sub(a).valueOf()).format("$0,0.00"),budget:Q()(t.valueOf()).format("$0,0.00"),spentToBudgetRatio:0===t.n?1:a.div(t).valueOf(),deptReports:n,uBudget:t}}),[R,M]),k=A.totalRemaining,_=A.budget,S=A.spentToBudgetRatio,I=A.deptReports,D=A.uBudget,F=Object(m.useMemo)((function(){var e,n=[],t=Wl(I);try{var a=function(){var t=U()(e.value,2),a=t[0],r=t[1],l=r.budget,o=r.spent,i=r.name;if(a===(null==M?void 0:M.id)&&(!l||l.equals(D)))return"continue";var u=f.a.createElement(on.a,{key:a,item:!0,xs:12,md:4,lg:3},f.a.createElement(_l.a,null,f.a.createElement(Sl.a,{titleTypographyProps:{noWrap:!0},title:i}),f.a.createElement(Il.a,null,function(){if(null===l||0===l.n)return f.a.createElement(le.a,{color:o.compare(new Ee.a(0))>0?se.a[900]:de.a[900],clone:!0},f.a.createElement(ce.a,{variant:"h6"},"Spent: ".concat(Q()(o.abs().valueOf()).format("$0,0.00"))));var e=l.sub(o),n=o.div(l).valueOf();return f.a.createElement(f.a.Fragment,null,f.a.createElement(le.a,{color:zl(n,900),clone:!0},f.a.createElement(ce.a,{variant:"h6"},"".concat(Q()(e.valueOf()).format("$0,0.00")," Remaining"))),f.a.createElement(ce.a,{variant:"body1"},"of ".concat(Q()(l.valueOf()).format("$0,0.00"))),f.a.createElement(Yl,{spentPercentage:n,height:5}))}())));n.push(u)};for(t.s();!(e=t.n()).done;)a()}catch(e){t.e(e)}finally{t.f()}return n}),[I,M,D]),T=Object(m.useCallback)((function(){return o(!0)}),[o]),x=Object(m.useMemo)((function(){return f.a.createElement(le.a,{minWidth:120,clone:!0},f.a.createElement(ba.a,{variant:"outlined"},f.a.createElement(Tl.a,null,"Fiscal Year"),f.a.createElement(Cr.a,{label:"Fiscal Year<",variant:"outlined",value:(null==w?void 0:w.id)||"",onChange:function(e){var n=e.target.value;if(n){var t,a=Wl((null==v?void 0:v.fiscalYears)||[]);try{for(a.s();!(t=a.n()).done;){var r=t.value;if(r.id===n)return void j(new Date(r.begin))}}catch(e){a.e(e)}finally{a.f()}}}},((null==v?void 0:v.fiscalYears)||[]).sort((function(e,n){return new Date(e.begin).getTime()-new Date(n.begin).getTime()})).map((function(e){return f.a.createElement(Mr.a,{key:e.id,value:e.id},e.name)})))))}),[v,j,w]);return y?f.a.createElement("p",null,"Loading..."):p?(console.error(p),f.a.createElement("p",null,p.message)):f.a.createElement(le.a,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},f.a.createElement(hl.a,null,f.a.createElement(le.a,{padding:8},f.a.createElement(on.a,{container:!0,alignItems:"center",justify:"center",spacing:4},f.a.createElement(on.a,{item:!0},f.a.createElement(cn.a,{variant:"contained",color:"secondary",startIcon:f.a.createElement(jl.a,null),onClick:T},"New Entry")),f.a.createElement(on.a,{item:!0},f.a.createElement(cn.a,{disabled:!w,component:E.b,to:"/journal/".concat(t,"/").concat((null==w?void 0:w.id)||"","/reconcile"),variant:"contained",startIcon:f.a.createElement(Rl.a,null)},"Reconcile")),f.a.createElement(on.a,{item:!0},f.a.createElement(cn.a,{variant:"contained",startIcon:f.a.createElement(kl.a,null)},"Reports")),f.a.createElement(on.a,{item:!0},f.a.createElement(cn.a,{disabled:!w,component:E.b,to:"/journal/".concat(t,"/").concat((null==w?void 0:w.id)||""),variant:"contained",startIcon:f.a.createElement(Ml.a,null)},"Journal")),f.a.createElement(on.a,{item:!0},x))),f.a.createElement(le.a,{flexGrow:1,overflow:"auto"},f.a.createElement(on.a,{justify:"center",container:!0,spacing:2},f.a.createElement(on.a,{item:!0,xs:12},f.a.createElement(ce.a,{align:"center",variant:"h3"},C),f.a.createElement(le.a,{color:zl(S.valueOf())},f.a.createElement(ce.a,{align:"center",variant:"h4"},"".concat(k," Remaining"))),f.a.createElement(ce.a,{align:"center",variant:"subtitle1"},"of ".concat(_)),f.a.createElement(Yl,{spentPercentage:S.valueOf(),height:10})),F)),f.a.createElement(Aa,{deptId:t,open:l,onClose:i})))};function Ql(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,n){if(!e)return;if("string"==typeof e)return Hl(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Hl(e,n)}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,i=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){i=!0,l=e},f:function(){try{o||null==t.return||t.return()}finally{if(i)throw l}}}}function Hl(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function Zl(){var e=x()(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return Zl=function(){return e},e}var eo=pe()(Zl()),no=function(e){var n=Object(K.c)(eo),t=n.loading,a=n.error,r=n.data,l=Object(m.useState)(""),o=U()(l,2),i=o[0],u=o[1],c=(null==r?void 0:r.departments)||[],d=Object(m.useMemo)((function(){var e,n=[],t=new Set,a=Ql(c);try{for(a.s();!(e=a.n()).done;){var r=e.value;"Business"===r.parent.__typename&&n.push(r),r.virtualRoot&&t.add(r.id)}}catch(e){a.e(e)}finally{a.f()}return{rootDepts:n,virtualRoots:t}}),[c]),s=d.rootDepts,p=d.virtualRoots,v=Object(m.useMemo)((function(){var e=[];if(i&&p.has(i)){var n,t=Ql(c);try{for(t.s();!(n=t.n()).done;){var a=n.value;a.parent.id===i&&e.push(a)}}catch(e){t.e(e)}finally{t.f()}}return e}),[p,i,c]);Object(m.useEffect)((function(){document.title="Select Department"}));var b=Object(m.useCallback)((function(e){var n;u((null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.value)||"")}),[u]);if(t)return f.a.createElement("p",null,"Loading...");if(a)return f.a.createElement("p",null,a.message);var y=v.length>0;return f.a.createElement(le.a,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},f.a.createElement(hl.a,null,f.a.createElement(le.a,{padding:4,clone:!0},f.a.createElement(ce.a,{align:"center",color:"primary",variant:"h3"},"Select Department")),f.a.createElement(le.a,{minWidth:"250px !important",clone:!0},f.a.createElement(ba.a,{variant:"filled"},f.a.createElement(Tl.a,null,"Department"),f.a.createElement(Cr.a,{value:i,onChange:b,autoWidth:!0},s.map((function(e){var n=e.virtualRoot?{value:e.id,children:e.name}:{component:E.b,to:"/department/".concat(e.id),value:e.id,children:e.name};return f.a.createElement(Mr.a,Object.assign({key:e.id},n))}))))),y&&f.a.createElement(le.a,{pt:2},f.a.createElement(le.a,{pt:2,minWidth:"250px !important",clone:!0},f.a.createElement(ba.a,{variant:"filled"},f.a.createElement(Tl.a,null,"Sub Department"),f.a.createElement(Cr.a,{autoWidth:!0},v.map((function(e){var n={component:E.b,to:"/department/".concat(e.id),value:e.id,children:e.name};return f.a.createElement(Mr.a,Object.assign({key:e.id},n))}))))))))};function to(){var e=x()(["\n  query DepartmentName_1($id: ID!) {\n    department(id: $id) {\n      id\n      __typename\n      name\n    }\n  }\n"]);return to=function(){return e},e}var ao=function(){var e=Object(P.f)().id;return e?f.a.createElement(Xl,{deptId:e}):f.a.createElement("div",null,"Error: No Dept ID!")},ro=pe()(to()),lo=function(){var e,n=Object(P.f)(),t=n.id,a=n.year,r=Object(K.c)(ro,{variables:{id:t}}).data,l=(null===(e=null==r?void 0:r.department)||void 0===e?void 0:e.name)?r.department.name:void 0;return f.a.createElement(Ol,{mode:al.View,deptId:t,fiscalYearId:a,journalTitle:l})},oo=function(){var e,n=Object(P.f)(),t=n.id,a=n.year,r=Object(K.c)(ro,{variables:{id:t}}).data,l=(null===(e=null==r?void 0:r.department)||void 0===e?void 0:e.name)?"Reconcile ".concat(r.department.name):"Reconcile";return f.a.createElement(Ol,{mode:al.Reconcile,deptId:t,fiscalYearId:a,journalTitle:l})},io=function(){return f.a.createElement(P.c,null,f.a.createElement(P.a,{exact:!0,path:"/",component:no}),f.a.createElement(P.a,{exact:!0,path:"/department/:id",component:ao}),f.a.createElement(P.a,{exact:!0,path:"/journal",component:Ol}),f.a.createElement(P.a,{exact:!0,path:"/journal/:id/:year",component:lo}),f.a.createElement(P.a,{exact:!0,path:"/journal/:id/:year/reconcile",component:oo}))},uo=function(){return f.a.createElement(m.Fragment,null,f.a.createElement(y.a,null),f.a.createElement(b.a,{client:F},f.a.createElement(E.a,null,f.a.createElement(io,null))))};v.a.render(f.a.createElement(uo,null),document.getElementById("root"))}},[[5771,1,2]]]);
//# sourceMappingURL=main.03ef53a1b8167c2758d2.js.map