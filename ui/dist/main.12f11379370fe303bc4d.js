"use strict";(self.webpackChunkaccounting=self.webpackChunkaccounting||[]).push([[179],{6057:(e,t,n)=>{var r=n(7294),a=n(3935),o=n(6689),l=n(5834),u=n(3727),i=n(1310),c=n(4942),s=n(4846);const d=JSON.parse('{"possibleTypes":{"AccountInterface":["AccountChecking","AccountCreditCard"],"AccountWithCardsInterface":["AccountChecking","AccountCreditCard"],"AliasTarget":["Category","Department"],"BudgetOwner":["Department","Business"],"DepartmentAncestor":["Department","Business"],"Entity":["Person","Business","Department"],"PaymentCardInterface":["AccountCard","PaymentCard"],"PaymentCheckInterface":["AccountCheck","PaymentCheck"],"PaymentMethodInterface":["PaymentMethodCard","PaymentMethodCheck","PaymentMethodCash","PaymentMethodOnline","PaymentMethodCombination","PaymentMethodUnknown"],"Source":["Person","Business","Department"]}}');function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const m=new s.h(p(p({},d),{},{addTypename:!0}));var v=n(8056),y=n(3984),h=n(4604),b=n(7716),g=n(6706),O=new v.A({uri:"/graphql",credentials:"same-origin"}),E=new b.u({uri:"ws://".concat(window.location.host,"/graphql")});const w=g.i.from([(0,y.q)((function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.forEach((function(e){var t=e.message,n=e.locations,r=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(r))})),n&&console.error("[Network error]: ".concat(n))})),g.i.split((function(e){var t=e.query,n=(0,h.p$)(t);return"OperationDefinition"===n.kind&&"subscription"===n.operation}),E,O)]),P=new i.f({link:w,cache:m,resolvers:{}});var C,j,Z,S,k,D,I,M,_=n(168),V=n(5977),R=n(291),N=n(570),x=n(5987),T=n(6465),A=n(5129),F=n(9895),B=n(8994),q=n(7822),U=n(8334),W=n(3581),L=n(1120),$=n(9474),z=n(5628),Y=n.n(z),G=n(4014),H=n.n(G),K=n(1549),Q=n.n(K);!function(e){e.CreditCard="CREDIT_CARD",e.Checking="CHECKING"}(C||(C={})),function(e){e.Alias="ALIAS",e.PrefixDescendants="PREFIX_DESCENDANTS",e.PostfixDescendants="POSTFIX_DESCENDANTS"}(j||(j={})),function(e){e.Usd="USD"}(Z||(Z={})),function(e){e.Person="PERSON",e.Business="BUSINESS",e.Department="DEPARTMENT"}(S||(S={})),function(e){e.Credit="CREDIT",e.Debit="DEBIT"}(k||(k={})),function(e){e.Visa="VISA",e.MasterCard="MASTER_CARD",e.AmericanExpress="AMERICAN_EXPRESS",e.Discover="DISCOVER"}(D||(D={})),function(e){e.Card="CARD",e.Check="CHECK",e.Cash="CASH",e.Online="ONLINE",e.Combination="COMBINATION",e.Unknown="UNKNOWN"}(I||(I={})),function(e){e.G="G",e.I="I",e.M="M",e.S="S"}(M||(M={}));var J=function(e){return JSON.stringify(e)},X=function(e){return new(Y())(JSON.parse(e))},ee=function(e){return e.toISOString()},te=function(e){return new Date(e)};function ne(){var e=(0,_.Z)(["\n  query GridEntries($where: EntriesWhere) {\n    entries(where: $where) {\n      ...GridEntry\n    }\n  }\n  ","\n"]);return ne=function(){return e},e}function re(){var e=(0,_.Z)(["\n  fragment GridEntry on Entry {\n    __typename\n    id\n    date\n    dateOfRecord {\n      date\n    }\n    department {\n      __typename\n      id\n      name\n    }\n    category {\n      __typename\n      id\n      name\n      type\n    }\n    paymentMethod {\n      ...GridPaymentMethod\n    }\n    description\n    total\n    source {\n      ...GridEntrySrcPerson\n      ...GridEntrySrcBusiness\n      ...GridEntrySrcDept\n    }\n    reconciled\n    refunds {\n      ...GridRefund\n    }\n    deleted\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return re=function(){return e},e}function ae(){var e=(0,_.Z)(["\n  fragment GridRefund on EntryRefund {\n    __typename\n    id\n    date\n    description\n    paymentMethod {\n      ...GridPaymentMethod\n    }\n    total\n    reconciled\n    deleted\n  }\n  ","\n"]);return ae=function(){return e},e}function oe(){var e=(0,_.Z)(["\n  fragment GridPaymentMethodCard on PaymentMethodCard {\n    __typename\n    card {\n      __typename\n      ... on AccountCard {\n        id\n        active\n        account {\n          __typename\n          ... on AccountCreditCard {\n            id\n            name\n          }\n          ... on AccountChecking {\n            id\n            name\n          }\n        }\n        trailingDigits\n        type\n      }\n      ... on PaymentCard {\n        trailingDigits\n        type\n      }\n    }\n  }\n\n  fragment GridPaymentMethodCheck on PaymentMethodCheck {\n    __typename\n    check {\n      __typename\n      ... on AccountCheck {\n        checkNumber\n        account {\n          __typename\n          id\n          name\n          accountNumber\n        }\n      }\n      ... on PaymentCheck {\n        checkNumber\n      }\n    }\n  }\n\n  fragment GridPaymentMethod on PaymentMethodInterface {\n    __typename\n    currency\n    ...GridPaymentMethodCard\n    ...GridPaymentMethodCheck\n  }\n"]);return oe=function(){return e},e}function le(){var e=(0,_.Z)(["\n  fragment GridEntrySrcDept on Department {\n    __typename\n    id\n    name\n  }\n"]);return le=function(){return e},e}function ue(){var e=(0,_.Z)(["\n  fragment GridEntrySrcBusiness on Business {\n    __typename\n    id\n    name\n  }\n"]);return ue=function(){return e},e}function ie(){var e=(0,_.Z)(["\n  fragment GridEntrySrcPerson on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return ie=function(){return e},e}var ce=(0,R.ZP)(ie()),se=(0,R.ZP)(ue()),de=(0,R.ZP)(le()),fe=(0,R.ZP)(oe()),pe=(0,R.ZP)(ae(),fe),me=(0,R.ZP)(re(),ce,se,de,fe,pe),ve=(0,R.ZP)(ne(),me),ye=n(5477),he=n(1041),be=n(8889),ge=n(9114);function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Ee=function(e){var t=(0,he.Z)(),n=e.opacity,a=void 0===n?.62:n,o=(0,x.Z)(e,["opacity"]);return r.createElement(be.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({overflow:"auto",position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",top:"0px",bottom:"0px",bgcolor:(0,ge.fade)(t.palette.background.paper,a)},o))};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Pe=function(e){return r.createElement(Ee,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),r.createElement(ye.Z,null))},Ce=function(e){var t=e.defaultValue,n=e.cacheKey,a=e.serializer,o=e.cacheUpdater,l=(0,r.useState)((function(){if(window.localStorage){var e=window.localStorage.getItem(n);if(e){var r=((null==a?void 0:a.deserialize)||JSON.parse)(e),l=r.item,u=r.date;if(o){var i=o(l,t,new Date(u));return window.localStorage.setItem(n,((null==a?void 0:a.serialize)||JSON.stringify)({item:i,date:(new Date).toISOString()})),i}return l}return t}return t})),u=(0,T.Z)(l,2),i=u[0],c=u[1];return[i,(0,r.useCallback)((function(e){c((function(t){var r="function"==typeof e?e(t):e;return window.localStorage&&window.localStorage.setItem(n,((null==a?void 0:a.serialize)||JSON.stringify)({item:r,date:(new Date).toISOString()})),r}))}),[n,null==a?void 0:a.serialize])]};var je=n(3998);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ke(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return De(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function e(t,n,r){var a,o=ke(n);try{for(o.s();!(a=o.n()).done;){var l=a.value;if("operator"in l){var u={operator:l.operator,filters:[]};e(t,l.filters,u.filters),r.push(u)}else r.push(Se({columnName:t},l))}}catch(e){o.e(e)}finally{o.f()}},Me=function(e){var t,n=e.columnFilters,r=e.filterExpression,a=e.isColumnFilteringEnabled,o={operator:"and",filters:[]},l=ke(n);try{for(l.s();!(t=l.n()).done;){var u=t.value;a&&!a(u.columnName)||Ie(u.columnName,u.filters,o.filters)}}catch(e){l.e(e)}finally{l.f()}return r?"and"===r.operator?{operator:"and",filters:[].concat((0,A.Z)(r.filters),[o])}:{operator:"and",filters:[r,o]}:o},_e=function(e){var t=e.filters,n=e.defaultFilters,a=e.onFiltersChange,o=(0,x.Z)(e,["filters","defaultFilters","onFiltersChange"]),l=(0,r.useState)(n||[]),u=(0,T.Z)(l,2),i=u[0],c=u[1],s=t||i,d=(0,r.useMemo)((function(){return s.reduce((function(e,t){return"filters"in t?e[1].push(t):e[0].push(t),e}),[[],[]])}),[s]),f=(0,T.Z)(d,2),p=f[0],m=f[1],v=(0,r.useCallback)((function(e){var t=e.columnName,n=e.config,r=s.findIndex((function(e){return e.columnName===t})),o=(0,A.Z)(s);if(n){var l=Se({columnName:t},n);r>-1?o.splice(r,1,l):o.push(l)}else r>-1&&o.splice(r,1);a&&a(o),s===i&&c(o)}),[s,a,i]);return r.createElement(je.Sy,{name:"FilteringState"},r.createElement(B.IQ,Se({filters:p},o)),r.createElement(je.aD,{name:"columnFilters",value:m}),r.createElement(je.aD,{name:"filterExpression",computed:Me}),r.createElement(je.aU,{name:"changeColumnFilter",action:v}),r.createElement(je.aU,{name:"changeColumnFilterState",action:v}))};function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.cO.ROW_TYPE&&n.type===q.cO.COLUMN_TYPE},xe=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.B0.ROW_TYPE&&n.type===q.cO.COLUMN_TYPE},Te=r.memo((function(e){return r.createElement(je.Sy,{name:"DataCellProvider"},r.createElement(je.YS,{name:"tableCell",predicate:Ne},(0,r.useCallback)((function(t){var n,a=(null===(n=t.tableColumn.column)||void 0===n?void 0:n.name)||"",o=e[a];return r.createElement(je.jf,{params:Re(Re({},t),{},{dataCellProviderCellOptions:o})})}),[e])))})),Ae=function(e){return r.createElement(je.Sy,{name:"FilterCellProvider"},r.createElement(je.YS,{name:"tableCell",predicate:xe},(0,r.useCallback)((function(t){var n,a=(null===(n=t.tableColumn.column)||void 0===n?void 0:n.name)||"",o=e[a];return r.createElement(je.eT,null,(function(e,n){var a=n.changeColumnFilterState;return r.createElement(je.jf,{params:Re(Re({},t),{},{cellProviderCellOptions:o,changeColumnFilterState:a})})}))}),[e])))},Fe=r.memo((function(e){var t=e.dataCellProviderCellOptions,n=(0,x.Z)(e,["dataCellProviderCellOptions"]),a=(null==t?void 0:t.cell)||q.cO.Cell,o=null==t?void 0:t.props;return r.createElement(a,Re({},"function"==typeof o?o(n):Re(Re({},n),o)))})),Be=r.memo((function(e){var t,n=e.cellProviderCellOptions,a=e.changeColumnFilterState,o=(0,x.Z)(e,["cellProviderCellOptions","changeColumnFilterState"]),l=n||{},u=l.cell,i=void 0===u?q.B0.Cell:u,c=l.props,s=void 0===c?{}:c,d="function"==typeof s?s(o):Re(Re({},o),s),f=(0,r.useMemo)((function(){return a?function(e){var t;if(e){var n=e.columnName,r=(0,x.Z)(e,["columnName"]);a({columnName:n,config:r})}else a({columnName:(null===(t=d.tableColumn.column)||void 0===t?void 0:t.name)||"",config:null})}:d.onFilter}),[d.onFilter,a,null===(t=d.tableColumn.column)||void 0===t?void 0:t.name]);return r.createElement(i,Re(Re({},d),{},{onFilter:f}))})),qe=n(2087),Ue=n(8222),We=n(7812),Le=n(8396),$e=n(5639),ze=n(6869),Ye=n(5757),Ge=n(5485),He=n(4126),Ke=n(387),Qe=n(6945),Je=n(3829),Xe=n(7757),et=n.n(Xe),tt=n(5861),nt=n(7212),rt=n(1749),at=n(6083),ot=n(9525),lt=n(2318),ut=n(6856),it=n(282),ct=n(2663),st=n(1906),dt=n(3430),ft=n(8769),pt=n(5709),mt=n(2644),vt=n(6843),yt=n(9119),ht=n(3914),bt=n(7827),gt=n(6012),Ot=n(5365),Et=n(2274),wt=n(5671),Pt=n(3144),Ct=n(6486);function jt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function Zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt,It,Mt,_t,Vt,Rt,Nt,xt,Tt,At,Ft,Bt,qt,Ut,Wt,Lt,$t,zt,Yt,Gt,Ht,Kt,Qt,Jt,Xt,en,tn=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},nn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},rn=function(){function e(t){var n,r=this,a=t.nameOrField,o=t.form,l=t.watcher,u=t.isValueEqual,i=void 0===u?function(e,t){return e===t}:u;if((0,wt.Z)(this,e),this._watcher_=l,a instanceof on)this._name_=a.props.name,this._stateTracker_=((n=et().mark((function e(){var t,n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{props:{value:a.props.value},state:{isValid:a.state.isValid,isValidating:a.state.isValidating,isTouched:a.state.isTouched,isDirty:a.state.isDirty,isLoading:a.state.isLoading,errors:a.state.errors}}})(),r=et().mark((function e(){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!(Object.keys(n.props).every((function(e){switch(e){case"value":return i(n.props[e],r.props[e]);default:return n.props[e]===r.props[e]}}))&&Object.keys(n.state).every((function(e){switch(e){case"errors":return n.state[e].length===r.state[e].length&&n.state[e].every((function(t,n){return t===r.state[e][n]}));default:return n.state[e]===r.state[e]}})));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)}))()).next(),function(){return n.next().value});else{var c=o;this._name_=a,this._stateTracker_=function(){var e=et().mark((function e(){var t,n,r,a=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{value:c.getFieldValue(a.name,!1),errors:(0,A.Z)(c.getFieldErrors(a.name))}})(),r=et().mark((function e(){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!Object.keys(n).every((function(e){switch(e){case"errors":return n[e].length===r[e].length&&n[e].every((function(t,n){return t===r[e][n]}));case"value":return i(n[e],r[e]);default:return n[e]===r[e]}}));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)})).call(r);return e.next(),function(){return e.next().value}}()}}return(0,Pt.Z)(e,[{key:"run",value:function(e){this._stateTracker_()&&this._watcher_(e)}},{key:"valueOf",value:function(){return this._watcher_}},{key:"name",get:function(){return this._name_}}]),e}(),an=function(){function e(t){var n,r=t.field,a=t.form,o=t.validators;(0,wt.Z)(this,e),this._field_=void 0,this._validators_=[],this._errors_=[],this._validating_=null,this._hasRun_=!1,r instanceof on?(this._name_=r.props.name,this._field_=r):this._name_=r,(n=this._validators_).push.apply(n,(0,A.Z)(o)),this._form_=a}return(0,Pt.Z)(e,[{key:"errors",value:function(){return this._errors_.values()}},{key:"reset",value:function(){this._validating_=null,this._errors_.splice(0),this._hasRun_=!1}},{key:"validate",value:function(){var e,t=this,n=!1,r=this._form_.getFieldValue(this._name_,!0),a=this._validators_.reduce((function(e,a){var o=a(r,{name:t._name_,form:t._form_,field:t._field_});return o instanceof Promise?(n=!0,e.push(o)):o&&e.push(o),e}),[]);if(n){var o=Promise.all(a).then((function(e){var n;if(t._validating_!==o)return t._validating_||!t._errors_.length;t._validating_=null,t._hasRun_=!0;var r=e.filter((function(e){return!!e}));return(n=t._errors_).splice.apply(n,[0,t._errors_.length].concat((0,A.Z)(r))),!r.length}));return this._validating_=o,o}return this._validating_=null,this._hasRun_=!0,(e=this._errors_).splice.apply(e,[0,this._errors_.length].concat((0,A.Z)(a))),!a.length}},{key:"name",get:function(){return this._name_}},{key:"hasRun",get:function(){return this._hasRun_}}]),e}(),on=function(){function e(t){var n,r,a=this,o=t.name,l=t.form,u=t.shouldUnregister,i=void 0!==u&&u;(0,wt.Z)(this,e),Dt.set(this,void 0),It.set(this,void 0),Mt.set(this,(n={value:{get:function(){return nn(a,It,"f").getFieldValue(a.props.name,!1)},enumerable:!0},name:{get:function(){return nn(a,Dt,"f")},enumerable:!0}},Object.create(null,n))),_t.set(this,(r={isValid:{get:function(){return nn(a,It,"f").isFieldValid(a.props.name)},enumerable:!0},isValidating:{get:function(){return nn(a,It,"f").isFieldValidating(a.props.name)},enumerable:!0},isTouched:{get:function(){return nn(a,It,"f").isFieldTouched(a)},enumerable:!0},isDirty:{get:function(){return nn(a,It,"f").isFieldDirty(a.props.name)},enumerable:!0},isLoading:{get:function(){return nn(a,It,"f").isFieldLoading(a.props.name)},enumerable:!0},errors:{get:function(){return(0,A.Z)(nn(a,It,"f").getFieldErrors(a.props.name))},enumerable:!0}},Object.create(null,r))),Vt.set(this,void 0),this.setValue=function(e){return nn(a,It,"f").setFieldValue(a.props.name,e)},this.setTouched=function(e){return nn(a,It,"f").setFieldTouched(a,e)},this.validate=function(){return nn(a,It,"f").validateField(a.props.name)},this.reset=function(){return nn(a,It,"f").resetField(a.props.name)},tn(this,Dt,o,"f"),tn(this,It,l,"f"),tn(this,Vt,i,"f"),Object.defineProperties(this,["props","state"].reduce((function(e,t){return e[t]=kt(kt({},Object.getOwnPropertyDescriptor(Object.getPrototypeOf(a),t)),{},{enumerable:!0}),e}),{}))}return(0,Pt.Z)(e,[{key:"props",get:function(){return nn(this,Mt,"f")}},{key:"state",get:function(){return nn(this,_t,"f")}},{key:"shouldUnregister",get:function(){return nn(this,Vt,"f")}}]),e}();Dt=new WeakMap,It=new WeakMap,Mt=new WeakMap,_t=new WeakMap,Vt=new WeakMap;var ln=function(){function e(t){(0,wt.Z)(this,e),Rt.set(this,void 0),tn(this,Rt,t,"f")}return(0,Pt.Z)(e,[{key:"valueOf",value:function(){return nn(this,Rt,"f")}},{key:"toString",value:function(){return String(nn(this,Rt,"f"))}}],[{key:"value",value:function(t){return new e(t)}}]),e}();Rt=new WeakMap,ln.value;var un=new WeakMap,cn=new WeakMap,sn=new WeakMap,dn=new WeakMap,fn=new WeakMap,pn=new WeakMap,mn=new WeakMap,vn=new WeakMap,yn=new WeakMap,hn=new WeakMap,bn=function(e,t){return e===t},gn=function(){function e(t){var n,r=this,a=t.onSubmit,o=t.validateOn;(0,wt.Z)(this,e),Nt.set(this,new Map),xt.set(this,new Map),Tt.set(this,new Set),At.set(this,new Map),Ft.set(this,new Map),Bt.set(this,new WeakSet),qt.set(this,new Map),Ut.set(this,void 0),Wt.set(this,null),Lt.set(this,0),$t.set(this,!1),zt.set(this,!1),Yt.set(this,null),Gt.set(this,new Map),Ht.set(this,new Map),Kt.set(this,new Map),Qt.set(this,new Set),Jt.set(this,(function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Symbol(),o=jt((null===(t=nn(r,Kt,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(o.s();!(n=o.n()).done;){var l=n.value;l.run(a)}}catch(e){o.e(e)}finally{o.f()}nn(r,en,"f").call(r,a)})),Xt.set(this,void 0),this.isFieldRegistered=function(e){return!!r.getRegisteredField(e)},this.getRegisteredField=function(e){return nn(r,Nt,"f").get(e)},this.setFieldValue=function(e,t){if(null==t)nn(r,Tt,"f").add(e),nn(r,xt,"f").delete(e);else{var n=r.getFieldValue(e,!0),a=r.getFieldDefaultValue(e),o=r.getFieldIsEqual(e);if(void 0!==n&&o(t,n))return;void 0!==a&&o(t,a)?nn(r,xt,"f").delete(e):nn(r,xt,"f").set(e,t),nn(r,Tt,"f").delete(e)}switch(nn(r,Ut,"f")){case"submit":if(r.submitCount>0&&!r.isFieldValid(e))return void r.validateField(e);break;case"blur":if(!r.isFieldRegistered(e))return void r.validateField(e);break;case"touched":var l=r.getRegisteredField(e);if(!l||r.isFieldTouched(l))return void r.validateField(e);break;case"all":case"change":return void r.validateField(e)}nn(r,Jt,"f").call(r,e)},this.getFieldValue=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return nn(r,xt,"f").has(e)||t?nn(r,xt,"f").get(e):nn(r,Tt,"f").has(e)?void 0:r.getFieldDefaultValue(e)},this.getFieldDefaultValue=function(e){var t,n=jt(nn(r,At,"f").values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.has(e))return a.get(e)}}catch(e){n.e(e)}finally{n.f()}},this.getFieldIsEqual=function(e){var t,n=jt(nn(r,Ft,"f").values());try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.has(e))return a.get(e)}}catch(e){n.e(e)}finally{n.f()}return bn},this.isFieldValid=function(e){return!!r.getFieldErrors(e).next().done},this.isFieldValidating=function(e){return nn(r,qt,"f").has(e)},this.isFieldTouched=function(e){return nn(r,Bt,"f").has(e)},this.setFieldTouched=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.updateId;if(t){var o=!r.isFieldTouched(e);switch(o&&nn(r,Bt,"f").add(e),nn(r,Ut,"f")){case"blur":case"all":return void r.validateField(e.props.name,{updateId:a});case"touched":if(o)return void r.validateField(e.props.name,{updateId:a})}nn(r,Jt,"f").call(r,e.props.name,a)}else r.isFieldTouched(e)&&(nn(r,Bt,"f").delete(e),nn(r,Jt,"f").call(r,e.props.name,a))},this.setTouchedAll=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.updateId,o=void 0===a?Symbol():a,l=jt(r.fields());try{for(l.s();!(t=l.n()).done;){var u=t.value;r.setFieldTouched(u,e,{updateId:o})}}catch(e){l.e(e)}finally{l.f()}},this.isFieldDirty=function(e){return nn(r,xt,"f").has(e)||nn(r,Tt,"f").has(e)},this.isFieldLoading=function(e){return nn(r,Gt,"f").has(e)},this.isFieldCleared=function(e){return nn(r,Tt,"f").has(e)},this.getFieldErrors=et().mark((function e(t){var n,r,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=jt((null===(n=nn(this,Ht,"f").get(t))||void 0===n?void 0:n.values())||[]),e.prev=1,r.s();case 3:if((a=r.n()).done){e.next=8;break}return o=a.value,e.delegateYield(o.errors(),"t0",6);case 6:e.next=3;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),r.e(e.t1);case 13:return e.prev=13,r.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,10,13,16]])})).bind(this),this.validateField=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.updateId,l=!1,u=[],i=jt((null===(t=nn(r,Ht,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(i.s();!(n=i.n()).done;){var c=n.value,s=c.validate();s instanceof Promise?(l=!0,u.push(s)):u.push(s)}}catch(e){i.e(e)}finally{i.f()}if(l){var d=Promise.all(u).then((function(t){return nn(r,qt,"f").get(e)!==d?nn(r,qt,"f").get(e)||r.isFieldValid(e):(nn(r,qt,"f").delete(e),nn(r,Jt,"f").call(r,e,o),t.every((function(e){return e})))}));return nn(r,qt,"f").set(e,d),nn(r,Jt,"f").call(r,e),d}return nn(r,qt,"f").delete(e),nn(r,Jt,"f").call(r,e,o),u.every((function(e){return e}))},this.validateAll=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=!1,l=[],u=jt(nn(r,Ht,"f").keys());try{for(u.s();!(e=u.n()).done;){var i=e.value,c=r.validateField(i,{updateId:a});c instanceof Promise&&(o=!0),l.push(c)}}catch(e){u.e(e)}finally{u.f()}if(o){var s=Promise.all(l).then((function(e){return nn(r,Wt,"f")!==s?nn(r,Wt,"f")||r.isValid:(tn(r,Wt,null,"f"),e.every((function(e){return e})))}));return tn(r,Wt,s,"f"),s}return tn(r,Wt,null,"f"),l.every((function(e){return e}))},this.submit=function(){var e=(0,tt.Z)(et().mark((function e(t){var n,a,o;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!nn(r,Xt,"f").onStart){e.next=3;break}return e.next=3,nn(r,Xt,"f").onStart({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 3:if(n=Symbol(),tn(r,$t,!0,"f"),tn(r,Lt,+nn(r,Lt,"f")+1,"f"),r.setTouchedAll(!0),a=r.validateAll({updateId:n}),nn(r,en,"f").call(r,n),!(a instanceof Promise)){e.next=15;break}return e.next=12,a;case 12:e.t0=e.sent,e.next=16;break;case 15:e.t0=a;case 16:if(e.t0){e.next=28;break}if(tn(r,$t,!1,"f"),o=r.getErrorsObject(),nn(r,en,"f").call(r),!nn(r,Xt,"f").onInvalid){e.next=24;break}return e.next=24,nn(r,Xt,"f").onInvalid({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r,errors:o});case 24:if(!nn(r,Xt,"f").finally){e.next=27;break}return e.next=27,nn(r,Xt,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 27:return e.abrupt("return",o);case 28:return e.prev=28,e.next=31,nn(r,Xt,"f").onSubmit({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 31:e.next=45;break;case 33:if(e.prev=33,e.t1=e.catch(28),tn(r,Yt,e.t1?"message"in e.t1?e.t1:new Error(String(e.t1)):new Error("Unknown Submission Error."),"f"),tn(r,$t,!1,"f"),nn(r,en,"f").call(r),!nn(r,Xt,"f").onError){e.next=41;break}return e.next=41,nn(r,Xt,"f").onError({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r,error:e.t1});case 41:if(!nn(r,Xt,"f").finally){e.next=44;break}return e.next=44,nn(r,Xt,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 44:return e.abrupt("return",e.t1);case 45:if(tn(r,$t,!1,"f"),tn(r,zt,!0,"f"),nn(r,en,"f").call(r),!nn(r,Xt,"f").onSuccess){e.next=51;break}return e.next=51,nn(r,Xt,"f").onSuccess({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 51:if(!nn(r,Xt,"f").finally){e.next=54;break}return e.next=54,nn(r,Xt,"f").finally({event:t,dirtyValues:r.getValuesObject(!0),values:r.getValuesObject(!1),form:r});case 54:case"end":return e.stop()}}),e,null,[[28,33]])})));return function(t){return e.apply(this,arguments)}}(),this.handleSubmit=function(e){null==e||e.preventDefault(),r.submit(e)},this.fields=function(){return nn(r,Nt,"f").values()},this.values=et().mark((function e(){var t,n,r,a,o,l,u,i,c,s,d,f,p,m,v,y,h,b,g=arguments;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!(g.length>0&&void 0!==g[0])||g[0],n=new Set,r=jt(nn(this,xt,"f")),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=12;break}return o=(0,T.Z)(a.value,2),l=o[0],u=o[1],n.add(l),e.next=10,[l,u];case 10:e.next=5;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(3),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:if(t){e.next=57;break}i=jt(nn(this,Tt,"f"));try{for(i.s();!(c=i.n()).done;)s=c.value,n.add(s)}catch(e){i.e(e)}finally{i.f()}d=jt(nn(this,At,"f").values()),e.prev=24,d.s();case 26:if((f=d.n()).done){e.next=49;break}p=f.value,m=jt(p),e.prev=29,m.s();case 31:if((v=m.n()).done){e.next=39;break}if(y=(0,T.Z)(v.value,2),h=y[0],b=y[1],n.has(h)){e.next=37;break}return n.add(h),e.next=37,[h,b];case 37:e.next=31;break;case 39:e.next=44;break;case 41:e.prev=41,e.t1=e.catch(29),m.e(e.t1);case 44:return e.prev=44,m.f(),e.finish(44);case 47:e.next=26;break;case 49:e.next=54;break;case 51:e.prev=51,e.t2=e.catch(24),d.e(e.t2);case 54:return e.prev=54,d.f(),e.finish(54);case 57:case"end":return e.stop()}}),e,this,[[3,14,17,20],[24,51,54,57],[29,41,44,47]])})).bind(this),this.clearedFields=function(){return nn(r,Tt,"f").values()},this.errors=et().mark((function e(){var t,n,r,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=jt(nn(this,Ht,"f").keys()),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=11;break}if(r=n.value,!(a=(0,A.Z)(this.getFieldErrors(r))).length){e.next=9;break}return e.next=9,[r,a];case 9:e.next=3;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,this,[[1,13,16,19]])})).bind(this),this.getValuesObject=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n={},a=jt(r.values(t));try{for(a.s();!(e=a.n()).done;){var o=(0,T.Z)(e.value,2),l=o[0],u=o[1];(0,Ct.set)(n,l,u)}}catch(e){a.e(e)}finally{a.f()}return n},this.getErrorsObject=function(){var e,t={},n=jt(r.errors());try{for(n.s();!(e=n.n()).done;){var a=(0,T.Z)(e.value,2),o=a[0],l=a[1];(0,Ct.set)(t,o,l)}}catch(e){n.e(e)}finally{n.f()}return t},this.resetFieldErrors=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.updateId,l=jt((null===(t=nn(r,Ht,"f").get(e))||void 0===t?void 0:t.values())||[]);try{for(l.s();!(n=l.n()).done;){var u=n.value;u.reset()}}catch(e){l.e(e)}finally{l.f()}nn(r,Jt,"f").call(r,e,o)},this.resetErrors=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=jt(nn(r,Ht,"f").keys());try{for(o.s();!(e=o.n()).done;){var l=e.value;r.resetFieldErrors(l,{updateId:a})}}catch(e){o.e(e)}finally{o.f()}},this.resetField=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.updateId,a=void 0===n?Symbol():n;r.resetFieldErrors(e,{updateId:a}),nn(r,xt,"f").delete(e),nn(r,Tt,"f").delete(e);var o=r.getRegisteredField(e);o&&r.setFieldTouched(o,!1,{updateId:a}),nn(r,Jt,"f").call(r,e,a)},this.resetSubmitCount=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;tn(r,Lt,0,"f"),nn(r,en,"f").call(r,t)},this.resetSubmitted=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;tn(r,zt,!1,"f"),nn(r,en,"f").call(r,t)},this.resetSubmissionError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateId;tn(r,Yt,null,"f"),nn(r,en,"f").call(r,t)},this.reset=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.updateId,a=void 0===n?Symbol():n,o=t.exclude,l=new Set,u=jt(nn(r,Nt,"f").values());try{for(u.s();!(e=u.n()).done;){var i=e.value.props.name;l.add(i),r.resetField(i,{updateId:a})}}catch(e){u.e(e)}finally{u.f()}var c,s=jt(nn(r,Ht,"f").keys());try{for(s.s();!(c=s.n()).done;){var d=c.value;l.add(d)||(l.add(d),r.resetField(d,{updateId:a}))}}catch(e){s.e(e)}finally{s.f()}var f,p=jt(nn(r,xt,"f").keys());try{for(p.s();!(f=p.n()).done;){var m=f.value;l.has(m)||(l.add(m),r.resetField(m,{updateId:a}))}}catch(e){p.e(e)}finally{p.f()}(null==o?void 0:o.submitCount)||r.resetSubmitCount({updateId:a}),(null==o?void 0:o.submitted)||r.resetSubmitted({updateId:a}),r.resetSubmissionError({updateId:a}),nn(r,en,"f").call(r,a)},en.set(this,((n=et().mark((function e(){var t,n,r,a=this;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(t=function(){return{isDirty:a.isDirty,isValid:a.isValid,isValidating:a.isValidating,isSubmitted:a.isSubmitted,isSubmitting:a.isSubmitting,submitCount:a.submitCount,submissionError:a.submissionError,loading:a.loading}})(),r=et().mark((function e(){var r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),e.next=3,!Object.keys(n).every((function(e){return n[e]===r[e]}));case 3:n=r;case 4:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(r(),"t0",5);case 5:e.next=3;break;case 7:case"end":return e.stop()}}),e)})).call(r)).next(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Symbol();if(n.next()){var t,a=jt(nn(r,Qt,"f"));try{for(a.s();!(t=a.n()).done;){var o=t.value;o(e)}}catch(e){a.e(e)}finally{a.f()}}})),tn(this,Xt,"function"==typeof a?{onSubmit:a}:a,"f"),tn(this,Ut,o,"f"),un.set(this,nn(this,Nt,"f")),cn.set(this,nn(this,xt,"f")),sn.set(this,nn(this,At,"f")),dn.set(this,nn(this,Ft,"f")),fn.set(this,nn(this,Gt,"f")),pn.set(this,nn(this,Ht,"f")),mn.set(this,nn(this,Kt,"f")),vn.set(this,nn(this,Qt,"f")),yn.set(this,nn(this,Jt,"f")),hn.set(this,nn(this,en,"f")),Object.defineProperties(this,["isDirty","isValid","isValidating","isSubmitted","isSubmitting","submitCount","submissionError","loading"].reduce((function(e,t){return e[t]=kt(kt({},Object.getOwnPropertyDescriptor(Object.getPrototypeOf(r),t)),{},{enumerable:!0}),e}),{}))}return(0,Pt.Z)(e,[{key:"isDirty",get:function(){return!!nn(this,xt,"f").size||!!nn(this,Tt,"f").size}},{key:"isValid",get:function(){return!!this.errors().next().done}},{key:"isValidating",get:function(){return!!nn(this,qt,"f").size}},{key:"isSubmitted",get:function(){return nn(this,zt,"f")}},{key:"isSubmitting",get:function(){return nn(this,$t,"f")}},{key:"submitCount",get:function(){return nn(this,Lt,"f")}},{key:"submissionError",get:function(){return nn(this,Yt,"f")}},{key:"loading",get:function(){return!!nn(this,Gt,"f").size}},{key:"validateOn",get:function(){return nn(this,Ut,"f")}}]),e}();Nt=new WeakMap,xt=new WeakMap,Tt=new WeakMap,At=new WeakMap,Ft=new WeakMap,Bt=new WeakMap,qt=new WeakMap,Ut=new WeakMap,Wt=new WeakMap,Lt=new WeakMap,$t=new WeakMap,zt=new WeakMap,Yt=new WeakMap,Gt=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Jt=new WeakMap,Xt=new WeakMap,en=new WeakMap;var On=Object.prototype.hasOwnProperty,En=et().mark((function e(t,n){var r,a,o;return et().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=et().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!On.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,!(a instanceof ln)){l.next=11;break}return l.next=9,[o,a.valueOf()];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),wn=et().mark((function e(t,n){var r,a,o;return et().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=et().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!On.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,"function"!=typeof a&&!(Symbol.iterator in a)){l.next=11;break}return l.next=9,[o,a];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),Pn=et().mark((function e(t,n){var r,a,o;return et().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:l.t0=et().keys(t);case 1:if((l.t1=l.t0()).done){l.next=14;break}if(r=l.t1.value,!On.call(t,r)){l.next=12;break}if(a=t[r],o=n?"".concat(n,".").concat(r):r,"function"!=typeof a){l.next=11;break}return l.next=9,[o,a];case 9:l.next=12;break;case 11:return l.delegateYield(e(a,o),"t2",12);case 12:l.next=1;break;case 14:case"end":return l.stop()}}),e)})),Cn=(0,r.createContext)(null);Cn.displayName="FormContext";var jn=function(e){var t=e.children,n=(0,x.Z)(e,["children"]),r=Dn(n);return Zn({form:r,children:t})},Zn=function(e){return"form"in e?r.createElement(Cn.Provider,{value:e.form},e.children):r.createElement(jn,kt({},e))},Sn=(0,r.createContext)(null);Sn.displayName="NamePrefixContext";var kn=function(e){var t=(0,r.useContext)(Sn),n=t?_n(e.namePrefix,t):e.namePrefix;return r.createElement(Sn.Provider,{value:n},e.children)},Dn=function(e){var t=e.onSubmit,n=e.defaultValues,a=e.validators,o=e.isEqual,l=e.validateOn,u=void 0===l?"submit":l,i=(0,r.useState)(Symbol()),c=(0,T.Z)(i,2)[1],s=(0,r.useState)((function(){var e=new gn({onSubmit:t,validateOn:u});return vn.get(e).add(c),e})),d=(0,T.Z)(s,1)[0];return Rn((0,r.useMemo)((function(){return{defaultValues:n||{},form:d,updateIds:{mount:Symbol(),unMount:Symbol()}}}),[n,d])),xn((0,r.useMemo)((function(){return{validators:a||{},form:d,updateIds:{mount:Symbol(),unMount:Symbol()}}}),[d,a])),An((0,r.useMemo)((function(){return{isEqual:o||{},form:d}}),[d,o])),d},In=function(e){var t=Mn({form:e,hookName:"useFormContext"}),n=(0,r.useState)(Symbol()),a=(0,T.Z)(n,2)[1];return(0,r.useEffect)((function(){return function(){t&&vn.get(t).delete(a)}}),[t]),(0,r.useMemo)((function(){return t&&vn.get(t).add(a),t||void 0}),[t])},Mn=function(e){var t=e.form,n=(e.hookName,(0,r.useContext)(Cn));return t||n},_n=function(e,t){return"".concat(t,".").concat(e)},Vn=function(e){var t=(0,r.useContext)(Sn);return t?e?_n(e,t):t:e||""},Rn=function(e){var t=Mn({form:e.form,hookName:"useDefaultValues"}),n=(0,r.useState)((function(){var e=Symbol(),n=new Map;return sn.get(t).set(e,n),{id:e,defaultValuesMap:n}})),a=(0,T.Z)(n,1)[0],o=Vn(),l=(0,r.useRef)();l.current=e.updateIds;var u=(0,r.useMemo)((function(){var t=a.defaultValuesMap,n=new Set(t.keys());t.clear();var r,l=jt(En(e.defaultValues));try{for(l.s();!(r=l.n()).done;){var u=(0,T.Z)(r.value,2),i=u[0],c=u[1],s=o?_n(i,o):i;n.add(s),t.set(s,c)}}catch(e){l.e(e)}finally{l.f()}return n}),[o,e.defaultValues,a]);(0,r.useEffect)((function(){var e,n,r=(null===(e=l.current)||void 0===e?void 0:e.mount)||Symbol(),a=yn.get(t),o=jt(u);try{for(o.s();!(n=o.n()).done;)a(n.value,r)}catch(e){o.e(e)}finally{o.f()}}),[t,u]),(0,r.useEffect)((function(){return function(){var e,n=a.defaultValuesMap,r=a.id;sn.get(t).delete(r);var o,u=(null===(e=l.current)||void 0===e?void 0:e.unMount)||Symbol(),i=yn.get(t),c=jt(n.keys());try{for(c.s();!(o=c.n()).done;)i(o.value,u)}catch(e){c.e(e)}finally{c.f()}}}),[t,a])},Nn=function(e){return Rn(e)},xn=function(e){var t=Mn({form:e.form,hookName:"useValidators"}),n=Vn(),a=(0,r.useRef)();a.current=e.updateIds;var o=(0,r.useMemo)((function(){return et().mark((function r(){var a,o,l,u,i;return et().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=jt(wn(e.validators)),r.prev=1,a.s();case 3:if((o=a.n()).done){r.next=9;break}return l=(0,T.Z)(o.value,2),u=l[0],i=l[1],r.next=7,new an({field:n?_n(u,n):u,form:t,validators:"function"==typeof i?[i]:i});case 7:r.next=3;break;case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(1),a.e(r.t0);case 14:return r.prev=14,a.f(),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[1,11,14,17]])}))}),[t,n,e.validators]);(0,r.useEffect)((function(){var n,r,l=pn.get(t),u=(null===(n=a.current)||void 0===n?void 0:n.mount)||Symbol(),i=[],c=jt(o());try{var s=function(){var n=r.value;i.push(n);var a=function(){var t;if("auto"===e.shouldRunValidation){var r,a=jt(l.get(n.name)||[]);try{for(a.s();!(r=a.n()).done;)if(r.value.hasRun)return!0}catch(e){a.e(e)}finally{a.f()}return!1}return null!==(t=e.shouldRunValidation)&&void 0!==t&&t}();l.has(n.name)?l.get(n.name).add(n):l.set(n.name,new Set([n])),a&&t.validateField(n.name,{updateId:u})};for(c.s();!(r=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}return function(){var e,t=jt(i);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=l.get(n.name);r&&(r.delete(n),r.size||l.delete(n.name))}}catch(e){t.e(e)}finally{t.f()}}}),[o,t,e.shouldRunValidation])},Tn=function(e){return xn(e)},An=function(e){var t=Mn({form:e.form,hookName:"useIsEqual"}),n=(0,r.useState)((function(){var e=Symbol(),n=new Map;return dn.get(t).set(e,n),{id:e,isEqualFnsMap:n}})),a=(0,T.Z)(n,1)[0],o=Vn();(0,r.useMemo)((function(){var t=a.isEqualFnsMap;t.clear();var n,r=jt(Pn(e.isEqual));try{for(r.s();!(n=r.n()).done;){var l=(0,T.Z)(n.value,2),u=l[0],i=l[1],c=o?_n(u,o):u;t.set(c,i)}}catch(e){r.e(e)}finally{r.f()}}),[o,e.isEqual,a]),(0,r.useEffect)((function(){return function(){var e=a.id;dn.get(t).delete(e)}}),[t,a])},Fn=function(e){var t=Mn({form:e.form,hookName:"useWatcher"}),n=Vn(),a=(0,r.useState)(Symbol()),o=(0,T.Z)(a,2),l=o[0],u=o[1],i=(0,r.useMemo)((function(){var r=e.name;return new rn({nameOrField:r instanceof on||!n?r:_n(r,n),form:t,watcher:u})}),[t,n,e.name]);return(0,r.useEffect)((function(){var e=mn.get(t);return e.has(i.name)?e.get(i.name).add(i):e.set(i.name,new Set([i])),function(){var t=e.get(i.name);t&&(t.delete(i),t.size||e.delete(i.name))}}),[i,t]),(0,r.useMemo)((function(){return{value:t.getFieldValue(i.name),defaultValue:t.getFieldDefaultValue(i.name),errors:(0,A.Z)(t.getFieldErrors(i.name))}}),[i,t,l])},Bn=new WeakMap,qn=function(e){var t=Mn({form:e.form,hookName:"useField"}),n=Vn(),a=(0,r.useState)(Symbol()),o=(0,T.Z)(a,2)[1],l=(0,r.useRef)();l.current=e.shouldUnregister;var u=(0,r.useMemo)((function(){var r,a=n?_n(e.name,n):e.name,o=t.getRegisteredField(a)||new on({name:a,form:t,shouldUnregister:l.current});return Bn.set(o,(null!==(r=Bn.get(o))&&void 0!==r?r:0)+1),un.get(t).set(o.props.name,o),o}),[t,n,e.name]),i=(0,r.useRef)();i.current={mount:Symbol(),unMount:Symbol()};var s=(0,r.useMemo)((function(){return{defaultValues:void 0===e.defaultValue?{}:(0,c.Z)({},e.name,new ln(e.defaultValue)),form:t,updateIds:i.current}}),[t,e.defaultValue,e.name]),d=(0,r.useMemo)((function(){return void 0===e.validator?{}:(0,c.Z)({},e.name,e.validator)}),[e.name,e.validator]),f=(0,r.useMemo)((function(){return{validators:d,form:t,updateIds:i.current,shouldRunValidation:e.shouldRunValidation}}),[t,e.shouldRunValidation,d]),p=(0,r.useMemo)((function(){return{isEqual:e.isEqual?(0,c.Z)({},e.name,e.isEqual):{},form:t}}),[t,e.isEqual,e.name]);return(0,r.useEffect)((function(){var e=mn.get(t),n=new rn({nameOrField:u,watcher:o});return e.has(n.name)?e.get(n.name).add(n):e.set(u.props.name,new Set([n])),function(){var r=e.get(n.name);r&&(r.delete(n),r.size||e.delete(n.name));var a=Bn.get(u)-1;Bn.set(u,a),0===a&&(un.get(t).delete(u.props.name),u.shouldUnregister&&u.reset())}}),[u,t]),Rn(s),xn(f),An(p),u},Un=function(e){var t=Mn({form:e.form,hookName:"useLoading"}),n=Vn(),a=(0,r.useState)(Symbol()),o=(0,T.Z)(a,1)[0],l=(0,r.useCallback)((function(r){var a,l=Array.isArray(e.name)?e.name:[e.name],u=fn.get(t),i=Symbol(),c=yn.get(t),s=jt(l);try{for(s.s();!(a=s.n()).done;){var d=a.value,f=d instanceof on?d.props.name:d,p=n?_n(f,n):f;if(r)u.has(p)?u.get(p).add(o):u.set(p,new Set([o]));else if(u.has(p)){var m=u.get(p);m.delete(o),m.size||u.delete(p)}c(p,i)}}catch(e){s.e(e)}finally{s.f()}hn.get(t)(i)}),[t,o,n,e.name]);(0,r.useEffect)((function(){l(e.loading)}),[e.loading,l]),(0,r.useEffect)((function(){return function(){l(!1)}}),[l])};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $n=function(e){if(void 0!==e&&!(0,Et.Z)(e))return new TypeError("Invalid Date")},zn=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.name,u=void 0===l?"date":l,i=e.form,c=e.onBlur,s=e.onChange,d=e.disabled,f=(0,x.Z)(e,["defaultValue","name","form","onBlur","onChange","disabled"]),p=null!==(a=null===(n=In(i))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,m=qn({name:u,defaultValue:o,isEqual:vt.Z,validator:$n,form:i}),v=m.props,y=v.name,h=v.value,b=m.state,g=b.isTouched,O=b.errors,E=m.setValue,w=m.setTouched,P=(0,r.useCallback)((function(){var e;E(null!==(e=arguments.length<=0?void 0:arguments[0])&&void 0!==e?e:void 0),s&&s.apply(void 0,arguments)}),[E,s]),C=(0,r.useCallback)((function(){w(!0),c&&c.apply(void 0,arguments)}),[w,c]);return r.createElement(bt.M,{utils:Ot.Z},r.createElement(gt.e,Ln(Ln(Ln({ref:t},f),g&&O.length?{error:!0,helperText:O[0].message}:{}),{},{name:y,value:null!=h?h:null,onChange:P,onBlur:C,disabled:p||d})))})),Yn=n(9803),Gn=n(5251);function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=[],Jn=(0,r.forwardRef)((function(e,t){var n=e.renderInput,a=void 0===n?G.defaultInput:n,o=e.classes,l=e.closeIcon,u=e.forcePopupIcon,i=e.fullWidth,c=e.popupIcon,s=e.size;return(0,x.Z)(e,["renderInput","classes","closeIcon","forcePopupIcon","fullWidth","popupIcon","size"]),r.createElement(Gn.ZP,{ref:t,classes:o,closeIcon:l,forcePopupIcon:u,fullWidth:i,popupIcon:c,size:s,defaultValue:void 0,value:null,inputValue:"",disabled:!0,options:Qn,renderInput:(0,r.useCallback)((function(e){return a(Kn(Kn({},e),{},{InputProps:(0,G.mergeInputEndAdornment)("append",r.createElement(ye.Z,{size:20,color:"inherit"}),e.InputProps)}))}),[a])})})),Xn=((0,r.forwardRef)((function(e,t){var n=e.classes,a=e.color,o=e.error,l=e.FormHelperTextProps,u=e.fullWidth,i=e.helperText,c=e.id,s=e.InputLabelProps,d=e.inputProps,f=e.InputProps,p=e.inputRef,m=e.label,v=e.margin,y=e.maxRows,h=e.minRows,b=e.multiline,g=e.name,O=e.placeholder,E=e.size,w=e.hiddenLabel,P=function(){switch(e.variant){case"dialog":case"inline":case"static":return e.inputVariant;default:return e.variant||e.inputVariant}}();return r.createElement(Yn.Z,{classes:n,color:a,error:o,FormHelperTextProps:l,fullWidth:u,helperText:i,id:c,InputLabelProps:s,inputProps:d,inputRef:p,label:m,margin:v,maxRows:y,minRows:h,multiline:b,name:g,placeholder:O,size:E,variant:P,hiddenLabel:w,ref:t,disabled:!0,InputProps:(0,r.useMemo)((function(){return(0,G.mergeInputEndAdornment)("append",r.createElement(ye.Z,{size:20,color:"inherit"}),f)}),[f])})})),function(e,t){var n=e instanceof G.BranchNode,r=t instanceof G.BranchNode;return n?r?0:-1:r?n?0:1:0}),er=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.defaultValue,u=e.validator,i=e.shouldRunValidation,c=e.shouldUnregister,s=e.form,d=e.onBlur,f=e.onChange,p=e.disabled,m=e.children,v=e.setValueAs,y=(0,x.Z)(e,["name","defaultValue","validator","shouldRunValidation","shouldUnregister","form","onBlur","onChange","disabled","children","setValueAs"]),h=null!==(a=null===(n=In(s))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,b=qn({name:o,defaultValue:l,validator:u,shouldRunValidation:i,shouldUnregister:c,form:s}),g=b.props,O=g.value,E=g.name,w=b.state,P=w.isTouched,C=w.errors,j=b.setValue,Z=b.setTouched;return r.createElement(Yn.Z,Kn(Kn(Kn({},y),{},{name:E,value:null!=O?O:"",ref:t,disabled:p||h},P&&C.length?{error:!0,helperText:C[0].message}:{}),{},{onBlur:(0,r.useCallback)((function(){Z(!0),d&&d.apply(void 0,arguments)}),[Z,d]),onChange:(0,r.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];j(v?v.apply(void 0,t):t[0].target.value||void 0),f&&f.apply(void 0,t)}),[v,f,j])}),m)})),tr=new Error("Required"),nr=function(e,t){var n=t.form,r=t.name,a=n.getFieldValue(r,!1);if(null==a||"string"==typeof a&&""===a.trim())return tr},rr=new RangeError("Must be greater than zero."),ar=function(e){if(e&&e.compare(0)<=0)return rr},or=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.defaultInput;return(0,r.useCallback)((function(n){return t(Kn(Kn({},n),e?{error:!0,helperText:"string"==typeof e?e:e.message}:{}))}),[e,t])},lr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G.defaultInput;return(0,r.useCallback)((function(n){return t(Kn({label:e},n))}),[e,t])},ur=n(2775);function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sr(){var e=(0,_.Z)(["\n  query DepartmentInputOpts($where: DepartmentsWhere!) {\n    departments(where: $where) {\n      ...DepartmentInputOpt\n    }\n  }\n  ","\n"]);return sr=function(){return e},e}function dr(){var e=(0,_.Z)(["\n  query DepartmentInputDefaultValues(\n    $where: DepartmentsWhere!\n    $deptRoot: DepartmentsWhere\n  ) {\n    departments(where: $where) {\n      ...DepartmentInputDefaultValue\n    }\n  }\n"]);return dr=function(){return e},e}function fr(){var e=(0,_.Z)(["\n  fragment DepartmentInputDefaultValue on Department {\n    ...DepartmentInputOpt\n    ancestors(root: $deptRoot) {\n      __typename\n      ... on Department {\n        ...DepartmentInputOpt\n      }\n    }\n  }\n  ","\n"]);return fr=function(){return e},e}function pr(){var e=(0,_.Z)(["\n  fragment DepartmentInputOpt on Department {\n    __typename\n    id\n    name\n    children {\n      __typename\n      id\n    }\n  }\n"]);return pr=function(){return e},e}var mr=(0,R.Ps)(pr()),vr=(0,R.Ps)(fr(),mr),yr=((0,R.Ps)(dr()),(0,R.Ps)(sr(),mr)),hr=function(e,t){var n=function(e,t){return e&&t?e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode?e.valueOf()===t.valueOf():e.valueOf().id===t.valueOf().id:e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},br=function(e){return e instanceof G.FreeSoloNode?e.toString():e.valueOf().name},gr=function(e,t){return!(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode||e.valueOf().id!==t.valueOf().id)},Or=(0,r.forwardRef)((function(e,t){var n,a,o=e.root,l=e.renderInput,u=void 0===l?G.defaultInput:l,i=e.branch,c=e.onBranchChange,s=e.loading,d=(0,x.Z)(e,["root","renderInput","branch","onBranchChange","loading"]),f=(0,ur.Z)({controlled:i,default:null,name:"CategoryInputBaseProps",state:"branch"}),p=(0,T.Z)(f,2),m=p[0],v=p[1];(0,r.useRef)(m).current=m;var y=(0,N.a)(yr,(0,r.useMemo)((function(){return{variables:{where:o}}}),[o])),h=(0,N.a)(yr,(0,r.useMemo)((function(){var e;return{skip:!m,variables:{where:{parent:{eq:{type:"Department",id:null===(e=null==m?void 0:m.valueOf())||void 0===e?void 0:e.id}}}}}}),[m])),b=(0,r.useCallback)((function(){v(arguments.length<=1?void 0:arguments[1]),c&&c.apply(void 0,arguments)}),[c,v]),g=(0,r.useCallback)((function(e){var t,n;return u(cr(cr({name:"department"},e),y.error||h.error?{error:!0,helperText:(null===(t=y.error)||void 0===t?void 0:t.message)||(null===(n=h.error)||void 0===n?void 0:n.message)}:{}))}),[h.error,u,y.error]),O=(0,r.useMemo)((function(){var e,t,n=[];return y.loading?n:((m?null===(e=h.data)||void 0===e?void 0:e.departments:null===(t=y.data)||void 0===t?void 0:t.departments)||[]).reduce((function(e,t){return t.children.length&&e.push(new G.BranchNode(t,m)),e.push(t),e}),n).sort(Xn)}),[y.loading,null===(n=y.data)||void 0===n?void 0:n.departments,m,null===(a=h.data)||void 0===a?void 0:a.departments]);return y.loading?r.createElement(Jn,cr({},e)):r.createElement(H(),cr(cr({getOptionLabel:br,getOptionSelected:gr},d),{},{ref:t,loading:h.loading||!!s,onBranchChange:b,branch:m,renderInput:g,options:O}))})),Er=Symbol(),wr="department",Pr=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,u=e.renderInput,i=void 0===u?G.defaultInput:u,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,x.Z)(e,["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"]),m=null!==(a=null===(n=In(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=qn({name:wr,form:l,isEqual:hr,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),j=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),Z=(0,r.useCallback)((function(e){return i(cr(cr({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[i,b,O,E]),S=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[w,d]),k=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:Er})),D=(0,T.Z)(k,2),I=D[0],M=D[1],_=(0,r.useCallback)((function(){M(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(Or,cr(cr({},p),{},{value:C,disabled:m||c,ref:t,onChange:S,branch:I===Er?C instanceof G.ValueNode?C.parent:null:I,onBranchChange:_,renderInput:Z,onBlur:j}))}));function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zr(){var e=(0,_.Z)(["\n  query EntityInputDefaultValue(\n    $where: EntitiesWhere!\n    $deptRoot: DepartmentsWhere\n  ) {\n    entities(where: $where) {\n      ...EntityInputDefaultValue\n    }\n  }\n  ","\n"]);return Zr=function(){return e},e}function Sr(){var e=(0,_.Z)(["\n  query EntityInputOpts($where: EntitiesWhere!) {\n    entities(where: $where) {\n      ...EntityBusinessInputOpt\n      ...DepartmentInputOpt\n      ...EntityPersonInputOpt\n    }\n  }\n  ","\n  ","\n"]);return Sr=function(){return e},e}function kr(){var e=(0,_.Z)(["\n  fragment EntityInputDefaultValue on Entity {\n    ...EntityBusinessInputOpt\n    ...EntityPersonInputOpt\n    ...DepartmentInputDefaultValue\n    ... on Department {\n      ancestors(root: $deptRoot) {\n        ...EntityBusinessInputOpt\n        ...DepartmentInputOpt\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return kr=function(){return e},e}function Dr(){var e=(0,_.Z)(["\n  fragment EntityBusinessInputOpt on Business {\n    __typename\n    id\n    name\n    departments(root: true) {\n      __typename\n      id\n    }\n  }\n\n  fragment EntityPersonInputOpt on Person {\n    __typename\n    id\n    personName: name {\n      first\n      last\n    }\n  }\n"]);return Dr=function(){return e},e}var Ir=function(e,t){var n=function(e,t){if(e&&t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return e.valueOf()===t.valueOf();var n=e.valueOf(),r=t.valueOf();return n.id===r.id&&n.__typename===r.__typename}return e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},Mr=(0,R.Ps)(Dr()),_r=(0,R.Ps)(kr(),Mr,vr,mr),Vr=(0,R.Ps)(Sr(),mr,Mr),Rr=((0,R.Ps)(Zr(),_r),function(e){if(e instanceof G.FreeSoloNode)return e.toString();var t=e.valueOf();if("string"==typeof t)return t;switch(t.__typename){case"Business":return t.name;case"Person":return"".concat(t.personName.first," ").concat(t.personName.last);case"Department":return br(e)}}),Nr=function(e,t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return!1;var n=e.valueOf(),r=t.valueOf();return"string"==typeof n?n===r:"string"!=typeof r&&n.id===r.id},xr=new G.BranchNode("Business"),Tr=new G.BranchNode("Person"),Ar=[xr,Tr],Fr=(0,r.forwardRef)((function(e,t){var n,a=e.inputValue,o=e.onInputChange,l=e.branch,u=e.onBranchChange,i=e.loading,c=e.autoSelect,s=e.renderInput,d=void 0===s?G.defaultInput:s,f=e.allowNewBusiness,p=e.allowNewPerson,m=(0,x.Z)(e,["inputValue","onInputChange","branch","onBranchChange","loading","autoSelect","renderInput","allowNewBusiness","allowNewPerson"]),v=(0,ur.Z)({controlled:a,default:"",name:"EntityInputBase",state:"inputValue"}),y=(0,T.Z)(v,2),h=y[0],b=y[1],g=(0,ur.Z)({controlled:l,default:null,name:"EntityInputBase",state:"branch"}),O=(0,T.Z)(g,2),E=O[0],w=O[1],P=h.trim().slice(0,1),C=(0,N.a)(Vr,(0,r.useMemo)((function(){var e="cache-and-network",t=null==E?void 0:E.valueOf();return t?"Business"===t?{skip:!P,variables:{where:{businesses:{name:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}}},fetchPolicy:e}:"Person"===t?{skip:!P,variables:{where:{people:{or:[{name:{first:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}},{name:{last:{pattern:"^".concat(P,"|[^A-z0-9]+").concat(P),flags:[M.I]}}}]}}},fetchPolicy:e}:"Business"===t.__typename?{skip:!t.departments.length,variables:{where:{departments:{parent:{eq:{type:t.__typename,id:t.id}}}}},fetchPolicy:e}:"Department"===t.__typename?{skip:!t.children.length,variables:{where:{departments:{parent:{eq:{type:t.__typename,id:t.id}}}}},fetchPolicy:e}:void 0:{skip:!0,variables:{where:{}}}}),[E,P])),j=(0,r.useCallback)((function(){w(arguments.length<=1?void 0:arguments[1]),u&&u.apply(void 0,arguments)}),[u,w]),Z=(0,r.useCallback)((function(){b(arguments.length<=1?void 0:arguments[1]),o&&o.apply(void 0,arguments)}),[o,b]),S=(0,r.useCallback)((function(e){var t=null==E?void 0:E.valueOf();return d(jr(jr(jr({name:"entity"},e),"Business"===t?{placeholder:"Business Name...",label:"Business"}:"Person"===t?{placeholder:"First... Last...",label:"Person"}:t?{label:"Department"}:{}),(null==C?void 0:C.error)?{error:!0,helperText:C.error.message}:{}))}),[C.error,d,E]),k=(0,r.useMemo)((function(){var e;return E?((null===(e=C.data)||void 0===e?void 0:e.entities)||[]).reduce((function(e,t){switch(t.__typename){case"Business":t.departments.length&&e.push(new G.BranchNode(t,E)),e.push(t);break;case"Department":t.children.length&&e.push(new G.BranchNode(t,E)),e.push(t);break;case"Person":e.push(t)}return e}),[]):Ar}),[null===(n=C.data)||void 0===n?void 0:n.entities,E]),D=(0,r.useMemo)((function(){var e=null==E?void 0:E.valueOf();return"Person"===e&&p?[!0,"Add Person:"]:"Business"===e&&f?[!0,"Add Business:"]:[!1]}),[E,p,f]),I=(0,T.Z)(D,2),_=I[0],V=I[1];return r.createElement(H(),jr(jr({getOptionSelected:Nr,getOptionLabel:Rr},m),{},{ref:t,onBranchChange:j,branch:E,loading:C.loading||i,renderInput:S,inputValue:h,onInputChange:Z,options:k,freeSolo:_,addFreeSoloText:V,autoSelect:null!=c&&c||_&&!e.value}))})),Br=Symbol(),qr=function(e){if(e&&(Array.isArray(e)?e:[e]).some((function(e){return e instanceof G.FreeSoloNode&&e.valueOf().length<3})))return RangeError("Too Short")},Ur=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=void 0===o?"entity":o,u=e.defaultValue,i=e.form,c=e.renderInput,s=void 0===c?G.defaultInput:c,d=e.disabled,f=e.onBlur,p=e.onChange,m=e.onBranchChange,v=(0,x.Z)(e,["name","defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"]),y=null!==(a=null===(n=In(i))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,h=qn({name:l,form:i,isEqual:Ir,validator:qr,defaultValue:u}),b=h.props,g=b.value,O=b.name,E=h.state,w=E.isTouched,P=E.errors,C=h.setValue,j=h.setTouched,Z=(0,r.useMemo)((function(){return g||(v.multiple?[]:null)}),[g,v.multiple]),S=(0,r.useCallback)((function(){j(!0),f&&f.apply(void 0,arguments)}),[j,f]),k=(0,r.useCallback)((function(e){return s(jr(jr({},e),{},{name:O},w&&P.length?{error:!0,helperText:P[0].message}:{}))}),[s,O,w,P]),D=(0,r.useCallback)((function(){var e;C(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),p&&p.apply(void 0,arguments)}),[p,C]),I=(0,r.useState)((function(){return Z instanceof G.ValueNode?Z.parent:Br})),M=(0,T.Z)(I,2),_=M[0],V=M[1],R=(0,r.useCallback)((function(){V(arguments.length<=1?void 0:arguments[1]),m&&m.apply(void 0,arguments)}),[m]);return r.createElement(Fr,jr(jr({},v),{},{value:Z,disabled:y||d,ref:t,onChange:D,branch:_===Br?Z instanceof G.ValueNode?Z.parent:null:_,onBranchChange:R,renderInput:k,onBlur:S}))}));function Wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $r(){var e=(0,_.Z)(["\n  query CategoryInputOpts($where: CategoriesWhere!) {\n    categories(where: $where) {\n      ...CategoryInputOpt\n    }\n  }\n  ","\n"]);return $r=function(){return e},e}function zr(){var e=(0,_.Z)(["\n  query CategoryInputDefaultValues($where: CategoriesWhere!) {\n    categories(where: $where) {\n      ...CategoryInputDefaultValue\n    }\n  }\n  ","\n"]);return zr=function(){return e},e}function Yr(){var e=(0,_.Z)(["\n  fragment CategoryInputDefaultValue on Category {\n    ...CategoryInputOpt\n    ancestors {\n      ...CategoryInputOpt\n    }\n  }\n  ","\n"]);return Yr=function(){return e},e}function Gr(){var e=(0,_.Z)(["\n  fragment CategoryInputOpt on Category {\n    __typename\n    id\n    name\n    type\n    children {\n      __typename\n      id\n    }\n    parent {\n      __typename\n      id\n    }\n  }\n"]);return Gr=function(){return e},e}var Hr=(0,R.Ps)(Gr()),Kr=(0,R.Ps)(Yr(),Hr),Qr=((0,R.Ps)(zr(),Kr),(0,R.Ps)($r(),Hr)),Jr=function(e,t){var n=function(e,t){return e&&t?e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode?e.valueOf()===t.valueOf():e.valueOf().id===t.valueOf().id:e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},Xr=function(e){return e instanceof G.FreeSoloNode?e.toString():e.valueOf().name},ea=function(e,t){return!(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode||e.valueOf().id!==t.valueOf().id)},ta=(0,r.forwardRef)((function(e,t){var n,a=e.renderInput,o=void 0===a?G.defaultInput:a,l=e.onBranchChange,u=e.branch,i=e.loading,c=(0,x.Z)(e,["renderInput","onBranchChange","branch","loading"]),s=(0,ur.Z)({controlled:u,default:null,name:"CategoryInputBaseProps",state:"branch"}),d=(0,T.Z)(s,2),f=d[0],p=d[1],m=(0,N.a)(Qr,(0,r.useMemo)((function(){return f?{skip:!1,variables:{where:{parent:{eq:f.valueOf().id}}}}:{skip:!1,variables:{where:{root:!0}}}}),[f])),v=(0,r.useCallback)((function(){p(arguments.length<=1?void 0:arguments[1]),l&&l.apply(void 0,arguments)}),[l,p]),y=(0,r.useCallback)((function(e){return o(Lr(Lr({name:"category"},e),m.error?{error:!0,helperText:m.error.message}:{}))}),[m.error,o]),h=(0,r.useMemo)((function(){var e;return((null===(e=m.data)||void 0===e?void 0:e.categories)||[]).reduce((function(e,t){return t.children.length&&e.push(new G.BranchNode(t,f)),t.parent&&e.push(t),e}),[]).sort(Xn)}),[null===(n=m.data)||void 0===n?void 0:n.categories,f]);return r.createElement(H(),Lr(Lr({getOptionLabel:Xr,getOptionSelected:ea},c),{},{ref:t,loading:m.loading||!!i,onBranchChange:v,branch:f,renderInput:y,options:h}))})),na=Symbol(),ra="category",aa=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,u=e.renderInput,i=void 0===u?G.defaultInput:u,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,x.Z)(e,["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"]),m=null!==(a=null===(n=In(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=qn({name:ra,form:l,isEqual:Jr,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),j=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),Z=(0,r.useCallback)((function(e){return i(Lr(Lr({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[i,b,O,E]),S=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[d,w]),k=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:na})),D=(0,T.Z)(k,2),I=D[0],M=D[1],_=(0,r.useCallback)((function(){M(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(ta,Lr(Lr({},p),{},{value:null!=C?C:null,disabled:m||c,ref:t,onChange:S,branch:I===na?C instanceof G.ValueNode?C.parent:null:I,onBranchChange:_,renderInput:Z,onBlur:j}))})),oa=n(5426);function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ia(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ca(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ca(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function ca(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sa(){var e=(0,_.Z)(["\n  query PayMethodDefaultValueFromRefund($where: EntryRefundsWhere!) {\n    entryRefunds(where: $where) {\n      __typename\n      id\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n    }\n  }\n  ","\n"]);return sa=function(){return e},e}function da(){var e=(0,_.Z)(["\n  query PayMethodDefaultValueFromEntry($where: EntriesWhere!) {\n    entries(where: $where) {\n      __typename\n      id\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n    }\n  }\n  ","\n"]);return da=function(){return e},e}function fa(){var e=(0,_.Z)(["\n  fragment PayMethodDefaultValue on PaymentMethodInterface {\n    __typename\n    currency\n    ... on PaymentMethodCard {\n      card {\n        __typename\n        trailingDigits\n        type\n        ...AccountCardPayMethodInputOpt\n      }\n    }\n    ... on PaymentMethodCheck {\n      check {\n        __typename\n        checkNumber\n        ... on AccountCheck {\n          account {\n            ...AccountCheckingPayMethodInputOpt\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return fa=function(){return e},e}function pa(){var e=(0,_.Z)(["\n  query AccountPayMethodInputOpts($where: AccountsWhere!) {\n    accounts(where: $where) {\n      ...AccountCheckingPayMethodInputOpt\n      ...AccountCreditCardPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"]);return pa=function(){return e},e}function ma(){var e=(0,_.Z)(["\n  fragment AccountCreditCardPayMethodInputOpt on AccountCreditCard {\n    __typename\n    id\n    active\n    cards {\n      ...AccountCardPayMethodInputOpt\n    }\n    name\n    owner {\n      ...AccountOwnerPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"]);return ma=function(){return e},e}function va(){var e=(0,_.Z)(["\n  fragment AccountCheckingPayMethodInputOpt on AccountChecking {\n    __typename\n    id\n    accountNumber\n    active\n    cards {\n      ...AccountCardPayMethodInputOpt\n    }\n    name\n    owner {\n      ...AccountOwnerPayMethodInputOpt\n    }\n  }\n  ","\n  ","\n"]);return va=function(){return e},e}function ya(){var e=(0,_.Z)(["\n  fragment AccountOwnerPayMethodInputOpt on Entity {\n    __typename\n    ... on Business {\n      id\n      name\n    }\n    ... on Department {\n      id\n      name\n    }\n    ... on Person {\n      id\n      personName: name {\n        first\n        last\n      }\n    }\n  }\n"]);return ya=function(){return e},e}function ha(){var e=(0,_.Z)(["\n  fragment AccountCardPayMethodInputOpt on AccountCard {\n    __typename\n    id\n    active\n    type\n    trailingDigits\n  }\n"]);return ha=function(){return e},e}var ba=Symbol("NULLISH"),ga=(0,R.Ps)(ha()),Oa=(0,R.Ps)(ya()),Ea=(0,R.Ps)(va(),Oa,ga),wa=(0,R.Ps)(ma(),Oa,ga),Pa=(0,R.Ps)(pa(),Ea,wa),Ca=(0,R.Ps)(fa(),ga,Ea),ja=((0,R.Ps)(da(),Ca),(0,R.Ps)(sa(),Ca),function(e){return(0,r.useMemo)((function(){switch(null==e?void 0:e.__typename){case void 0:return;case"PaymentMethodCash":return new G.ValueNode(I.Cash);case"PaymentMethodCombination":return new G.ValueNode(I.Combination);case"PaymentMethodOnline":return new G.ValueNode(I.Online);case"PaymentMethodUnknown":return new G.ValueNode(I.Unknown);case"PaymentMethodCard":var t=null==e?void 0:e.card;return"AccountCard"===t.__typename?new G.ValueNode(t,new G.BranchNode(t.type,_a)):new G.FreeSoloNode(t.trailingDigits,new G.BranchNode(t.type,_a));case"PaymentMethodCheck":var n=null==e?void 0:e.check;return"AccountCheck"===n.__typename?new G.FreeSoloNode(n.checkNumber,new G.BranchNode(n.account,Va)):new G.FreeSoloNode(n.checkNumber,Va)}}),[e])}),Za=function(e,t){var n=function(e,t){var n,r;if(e&&t){var a=e.valueOf(),o=t.valueOf(),l=null===(n=e.parent)||void 0===n?void 0:n.valueOf(),u=null===(r=t.parent)||void 0===r?void 0:r.valueOf();if("string"==typeof l||"string"==typeof u){if(l!==u)return!1}else if((null==l?void 0:l.__typename)!==(null==u?void 0:u.__typename)||(null==l?void 0:l.id)!==(null==u?void 0:u.id))return!1;return"string"==typeof a?"string"==typeof o&&a.trim()===o.trim():"string"!=typeof o&&a.__typename===o.__typename&&a.id===o.id}return e===t};return Array.isArray(e)||Array.isArray(t)?e.length===t.length&&e.every((function(e,r){return n(e,t[r])})):n(e,t)},Sa=function(e){var t,n=e.paymentMethodInput,r=null===(t=n.parent)||void 0===t?void 0:t.valueOf(),a=n.valueOf();if("string"==typeof r)switch(r){case I.Check:return{check:{currency:Z.Usd,check:{checkNumber:a}}};case D.AmericanExpress:case D.Discover:case D.MasterCard:case D.Visa:return"string"==typeof a?{card:{currency:Z.Usd,card:{type:r,trailingDigits:a}}}:{accountCard:{currency:Z.Usd,card:a.id}}}else{if("AccountChecking"===(null==r?void 0:r.__typename))return{accountCheck:{currency:Z.Usd,check:{account:r.id,checkNumber:a}}};switch(a){case I.Cash:return{cash:{currency:Z.Usd}};case I.Combination:return{combination:{currency:Z.Usd}};case I.Online:return{online:{currency:Z.Usd}};case I.Unknown:return{unknown:{currency:Z.Usd}}}}return null},ka=function(e){var t;if(e instanceof G.FreeSoloNode)return e.toString();var n=e.valueOf();return"string"==typeof n?(0,oa.I)(n):"AccountChecking"===n.__typename?"Acct# ...".concat(null===(t=n.accountNumber)||void 0===t?void 0:t.slice(-4)):n.trailingDigits},Da=function(e){var t,n=ka(e);if(e instanceof G.FreeSoloNode){var r=null===(t=e.parent)||void 0===t?void 0:t.valueOf();if(r)if("string"==typeof r)switch(r){case I.Check:return"CK-".concat(n);case D.Visa:case D.MasterCard:case D.AmericanExpress:case D.Discover:return"".concat(Ma(r),"-").concat(n)}else if("AccountChecking"===r.__typename)return"CK-".concat(n);return n}var a=e.valueOf();return"string"==typeof a||"AccountChecking"===a.__typename?n:"".concat(Ma(a.type),"-").concat(n)},Ia=function(e,t){if(e instanceof G.FreeSoloNode||t instanceof G.FreeSoloNode)return!1;var n=e.valueOf(),r=t.valueOf();return"string"==typeof n||"string"==typeof r?n===r:n.id===r.id},Ma=function(e){switch(e){case D.Visa:return"VISA";case D.MasterCard:return"MC";case D.AmericanExpress:return"AMEX";case D.Discover:return"DS"}},_a=new G.BranchNode(I.Card),Va=new G.BranchNode(I.Check),Ra=[_a,Va,I.Cash,I.Combination,I.Online],Na=[new G.BranchNode(D.Visa,_a),new G.BranchNode(D.MasterCard,_a),new G.BranchNode(D.AmericanExpress,_a),new G.BranchNode(D.Discover,_a)],xa=(0,r.forwardRef)((function(e,t){var n=e.accounts,a=e.autoSelect,o=e.entryType,l=e.isRefund,u=e.renderInput,i=void 0===u?G.defaultInput:u,c=e.inputValue,s=e.branch,d=e.onBranchChange,f=e.onInputChange,p=e.disabled,m=(0,x.Z)(e,["accounts","autoSelect","entryType","isRefund","renderInput","inputValue","branch","onBranchChange","onInputChange","disabled"]),v=(null!=o?o:ba)===ba,y=(0,ur.Z)({controlled:c,default:"",name:"PaymentMethodInputBase",state:"inputValue"}),h=(0,T.Z)(y,2),b=h[0],g=h[1],O=(0,ur.Z)({controlled:s,default:null,name:"PaymentMethodInputBase",state:"branch"}),E=(0,T.Z)(O,2),w=E[0],P=E[1],C=(0,r.useState)({checkingAccountBranchOpts:[],cardOpts:new Map}),j=(0,T.Z)(C,2),Z=j[0],S=j[1],M=(0,N.a)(Pa,(0,r.useMemo)((function(){return{variables:{where:n},onCompleted:function(e){var t,n=[],r=new Map,a=ia(e.accounts);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o.active){"AccountChecking"===o.__typename&&n.push(new G.BranchNode(o,Va));var l,u=ia(o.cards);try{for(u.s();!(l=u.n()).done;){var i=l.value;if(i.active){var c=r.get(i.type)||[];c.push(i),r.set(i.type,c)}}}catch(e){u.e(e)}finally{u.f()}}}}catch(e){a.e(e)}finally{a.f()}S((function(e){return ua(ua({},e),{},{checkingAccountBranchOpts:n,cardOpts:r})}))}}}),[n])),_=(0,r.useCallback)((function(){g(""),f&&f(arguments.length<=0?void 0:arguments[0],"","reset"),P(arguments.length<=1?void 0:arguments[1]),d&&d.apply(void 0,arguments)}),[g,f,P,d]),V=(0,r.useCallback)((function(){g(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[g,f]),R=(0,r.useCallback)((function(e,t,n){return r.createElement(G.DefaultOption,{props:e,option:t,state:ua(ua({},n),{},{getOptionLabel:t instanceof G.BranchNode?n.getOptionLabel:Da})})}),[]),A=(0,r.useCallback)((function(e){return i(function(){var t=ua(ua({name:"paymentMethod"},v?{helperText:"Category Required"}:{}),e),n=M.error?{error:!0,helperText:M.error.message}:{},r=null==w?void 0:w.valueOf();if("string"==typeof r)switch(r){case I.Check:if(o===k.Credit)return ua(ua({},t),{},{placeholder:"####",InputProps:(0,G.mergeInputStartAdornment)("append","CK-",t.InputProps||{})},n);break;case D.AmericanExpress:case D.Discover:case D.MasterCard:case D.Visa:return ua(ua({},t),{},{placeholder:o!==k.Credit||l?void 0:"Last 4 Digits",InputProps:(0,G.mergeInputStartAdornment)("append","".concat(Ma(r),"-"),t.InputProps||{})},n)}else if("AccountChecking"===(null==r?void 0:r.__typename))return ua(ua({},t),{},{placeholder:"####",InputProps:(0,G.mergeInputStartAdornment)("append","CK-",t.InputProps||{})},n);return t}())}),[l,o,v,i,M.error,w]),F=(0,r.useMemo)((function(){var e=null==w?void 0:w.valueOf();if(M.loading||v)return[[],!1];if(!e)return[Ra,!1];if("string"!=typeof e)return[[],!0];switch(e){case I.Card:return[Na,!1];case I.Check:return o===k.Credit?[[],!0]:[Z.checkingAccountBranchOpts,!1];case D.AmericanExpress:case D.Discover:case D.MasterCard:case D.Visa:return o!==k.Credit||l?[Z.cardOpts.get(e)||[],!1]:[[],!0]}}),[l,v,o,M.loading,Z.checkingAccountBranchOpts,Z.cardOpts,w]),B=(0,T.Z)(F,2),q=B[0],U=B[1];return M.loading?r.createElement(Jn,ua({},e)):r.createElement(H(),ua(ua({getOptionLabel:ka,getOptionSelected:Ia},m),{},{disabled:p||v,autoSelect:null!=a&&a||U,ref:t,options:q,onBranchChange:_,branch:w,renderOption:R,renderInput:A,freeSolo:U,onInputChange:V,inputValue:b}))})),Ta=Symbol(),Aa="paymentMethod",Fa=(0,r.forwardRef)((function(e,t){var n,a,o=e.defaultValue,l=e.form,u=e.renderInput,i=void 0===u?G.defaultInput:u,c=e.disabled,s=e.onBlur,d=e.onChange,f=e.onBranchChange,p=(0,x.Z)(e,["defaultValue","form","renderInput","disabled","onBlur","onChange","onBranchChange"]),m=null!==(a=null===(n=In(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,v=qn({name:Aa,form:l,isEqual:Za,defaultValue:o}),y=v.props,h=y.value,b=y.name,g=v.state,O=g.isTouched,E=g.errors,w=v.setValue,P=v.setTouched,C=(0,r.useMemo)((function(){return h||(p.multiple?[]:null)}),[h,p.multiple]),j=(0,r.useCallback)((function(){P(!0),s&&s.apply(void 0,arguments)}),[P,s]),Z=(0,r.useCallback)((function(e){return i(ua(ua({},e),{},{name:b},O&&E.length?{error:!0,helperText:E[0].message}:{}))}),[i,b,O,E]),S=(0,r.useCallback)((function(){var e;w(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),d&&d.apply(void 0,arguments)}),[w,d]),k=(0,r.useState)((function(){return C instanceof G.ValueNode?C.parent:Ta})),D=(0,T.Z)(k,2),I=D[0],M=D[1],_=(0,r.useCallback)((function(){M(arguments.length<=1?void 0:arguments[1]),f&&f.apply(void 0,arguments)}),[f]);return r.createElement(xa,ua(ua({},p),{},{value:null!=C?C:null,disabled:m||c,ref:t,onChange:S,branch:I===Ta?C instanceof G.ValueNode?C.parent:null:I,onBranchChange:_,renderInput:Z,onBlur:j}))}));function Ba(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ba(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ba(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ua=function(e,t){return e===t},Wa="description",La=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?Wa:n,o=(0,x.Z)(e,["name"]);return An({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,Ua)}),[a]),form:e.form}),r.createElement(er,qa(qa({},o),{},{name:a,ref:t,type:"text"}))}));function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ya=function(e,t){return void 0===t?e.valueOf().toString():e.valueOf().toFixed(t)},Ga=(0,r.forwardRef)((function(e,t){var n=e.defaultValue,a=e.onChange,o=e.decimals,l=e.showDecimalZeros,u=void 0===l||l,i=e.onBlur,c=e.value,s=(0,x.Z)(e,["defaultValue","onChange","decimals","showDecimalZeros","onBlur","value"]),d=(0,ur.Z)({controlled:c,default:n,name:"RationalInputBase",state:"value"}),f=(0,T.Z)(d,2),p=f[0],m=f[1],v=(0,r.useState)((function(){return p?Ya(p,o):""})),y=(0,T.Z)(v,2),h=y[0],b=y[1];(0,r.useEffect)((function(){p?h&&p.equals(h)||b(Ya(p,o)):h&&b("")}),[o,h,p]);var g=(0,r.useCallback)((function(e){var t,n=function(e,t){if((e=e.trim())&&void 0!==t){var n=e.split("."),r=(0,T.Z)(n,2),a=r[0],o=r[1],l=void 0===o?"":o;if(0===t)return a;if(l.length>t)return"".concat(a,".").concat(l.slice(0,t))}return e}(null!==(t=e.target.value)&&void 0!==t?t:"",o),r=function(){try{return n?new(Y())(n):null}catch(e){return null}}();b(n),m(r),a&&a(e,r,n)}),[o,a,m]),O=(0,r.useCallback)((function(){void 0!==o&&u&&p&&b(Ya(p,o)),i&&i.apply(void 0,arguments)}),[o,i,u,p]);return r.createElement(Yn.Z,za(za({},s),{},{ref:t,onChange:g,onBlur:O,type:"number",value:h}))})),Ha=function(e,t){return e.equals(t)},Ka=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.form,u=e.onBlur,i=e.onChange,c=e.disabled,s=e.defaultValue,d=(0,x.Z)(e,["name","form","onBlur","onChange","disabled","defaultValue"]),f=null!==(a=null===(n=In(l))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,p=qn({name:o,isEqual:Ha,defaultValue:(0,r.useMemo)((function(){if(void 0!==s)return new(Y())(s)}),[s]),form:l}),m=p.props,v=m.name,y=m.value,h=p.state,b=h.isTouched,g=h.errors,O=p.setValue,E=p.setTouched,w=(0,r.useCallback)((function(){E(!0),u&&u.apply(void 0,arguments)}),[E,u]),P=(0,r.useCallback)((function(){var e;O(null!==(e=arguments.length<=1?void 0:arguments[1])&&void 0!==e?e:void 0),i&&i.apply(void 0,arguments)}),[O,i]);return r.createElement(Ga,za(za(za({},d),b&&g.length?{error:!0,helperText:g[0].message}:{}),{},{ref:t,name:v,value:null!=y?y:null,disabled:f||c,onBlur:w,onChange:P}))})),Qa=n(4436),Ja=n(553),Xa=n(3258),eo=n(9570),to=n(585);function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ao=(0,r.forwardRef)((function(e,t){var n=e.boolVariant,a=void 0===n?"checkbox":n,o=e.name,l=e.label,u=e.helperText,i=e.onChange,c=e.checked,s=e.error,d=e.id,f=e.color,p=e.inputRef,m=e.FormHelperTextProps,v=void 0===m?{}:m,y=e.FormControlLabelProps,h=void 0===y?{}:y,b=e.CheckboxProps,g=void 0===b?{}:b,O=e.SwitchProps,E=void 0===O?{}:O,w=(0,x.Z)(e,["boolVariant","name","label","helperText","onChange","checked","error","id","color","inputRef","FormHelperTextProps","FormControlLabelProps","CheckboxProps","SwitchProps"]),P=u?v.id||(d?"".concat(d,"-helper-text"):void 0):void 0,C=l?h.id||(d?"".concat(d,"-label"):void 0):void 0;return r.createElement(Qa.Z,ro({ref:t,error:s},w),r.createElement(Ja.Z,ro({htmlFor:d,id:C,label:l,control:"checkbox"===a?r.createElement(Xa.Z,ro(ro({id:d,"aria-describedby":P,color:f,onChange:i,checked:c,inputRef:p},g),{},{inputProps:ro({name:o},g.inputProps||{})})):r.createElement(eo.Z,ro(ro({id:d,"aria-describedby":P,color:f,onChange:i,checked:c,inputRef:p},E),{},{inputProps:ro({name:o},E.inputProps||{})}))},h)),u&&r.createElement(to.Z,ro({id:P},v),u))})),oo=(0,r.forwardRef)((function(e,t){var n,a,o=e.name,l=e.defaultValue,u=e.form,i=e.onBlur,c=e.onChange,s=e.disabled,d=(0,x.Z)(e,["name","defaultValue","form","onBlur","onChange","disabled"]),f=null!==(a=null===(n=In(u))||void 0===n?void 0:n.isSubmitting)&&void 0!==a&&a,p=qn({name:o,defaultValue:l,form:u}),m=p.props,v=m.name,y=m.value,h=p.state,b=h.isTouched,g=h.errors,O=p.setValue,E=p.setTouched,w=(0,r.useCallback)((function(){O(arguments.length<=1?void 0:arguments[1]),c&&c.apply(void 0,arguments)}),[O,c]),P=(0,r.useCallback)((function(){E(!0),i&&i.apply(void 0,arguments)}),[E,i]);return r.createElement(ao,ro(ro(ro({ref:t},d),b&&g.length?{error:!0,helperText:g[0].message}:{}),{},{name:v,checked:null!=y&&y,onChange:w,onBlur:P,disabled:f||s}))}));function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(){var e=(0,_.Z)(["\n  query UpdateEntryDefaultValues($id: ID!, $deptRoot: DepartmentsWhere) {\n    entry(id: $id) {\n      __typename\n      id\n      date\n      dateOfRecord {\n        date\n      }\n      category {\n        ...CategoryInputDefaultValue\n      }\n      description\n      department {\n        ...DepartmentInputDefaultValue\n      }\n      source {\n        ...EntityInputDefaultValue\n      }\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n      reconciled\n      total\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return io=function(){return e},e}var co=(0,ht.Z)({adornedStart:{alignItems:"baseline"}}),so=new RangeError("Transaction cannot be recorded in the future."),fo=function(e){if(e&&(0,mt.Z)(e))return so},po=(0,R.Ps)(io(),vr,Kr,_r,Ca),mo="date",vo="dateOfRecord",yo="source",ho="total",bo="reconciled",go="entry",Oo=function(e,t){return(0,vt.Z)((0,yt.Z)(e),(0,yt.Z)(t))},Eo=n(2283);function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Co={keepMounted:!1,maxWidth:"lg",fullWidth:!0},jo=(Symbol(),{item:!0,lg:4,sm:6,xs:12}),Zo=((0,r.forwardRef)((function(e,t){var n=e.name,a=e.control,o=e.defaultValue,l=e.rules,u=e.shouldUnregister,i=e.onBlur,c=e.onChange,s=e.disabled,d=e.children,f=e.setValueAs,p=(0,x.Z)(e,["name","control","defaultValue","rules","shouldUnregister","onBlur","onChange","disabled","children","setValueAs"]),m=(0,Eo.bc)({name:n,control:a,defaultValue:o,rules:l,shouldUnregister:u}),v=m.field,y=v.onBlur,h=v.onChange,b=v.ref,g=(0,x.Z)(v,["onBlur","onChange","ref"]),O=m.fieldState,E=O.isTouched,w=O.error,P=m.formState.isSubmitting;return r.createElement(Yn.Z,Po(Po(Po(Po({},p),g),{},{ref:t,disabled:s||P,innerRef:b},E&&w?{error:!0,helperText:w.message}:{}),{},{onBlur:(0,r.useCallback)((function(){y(),i&&i.apply(void 0,arguments)}),[y,i]),onChange:(0,r.useCallback)((function(){f?h(f.apply(void 0,arguments)):h.apply(void 0,arguments),c&&c.apply(void 0,arguments)}),[h,c,f])}),d)})),{TextFieldProps:{variant:"filled",fullWidth:!0},TreeSelectProps:{fullWidth:!0,renderInput:function(e){return(0,G.defaultInput)(Po({variant:"filled",fullWidth:!0},e))}},DateInputProps:Po({inputVariant:"filled",fullWidth:!0},{autoOk:!0,disableToolbar:!0,format:"MM/dd/yyyy",placeholder:"mm/dd/yyyy",variant:"inline"})}),So=function(){return Zo};function ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Do(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ko(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ko(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Io=function(e,t){var n=t.form,r=t.name,a=n.getFieldValue(r,!1);if(void 0!==a)return/^[.A-Za-z\s]+$/i.test(a)?a.length<3?RangeError("Too Short"):void 0:new RangeError("Letters Only")},Mo=function(e,t){return(null==e?void 0:e.trim())===(null==t?void 0:t.trim())},_o="name",Vo=n(3868),Ro=n.n(Vo),No=n(2900),xo=n.n(No);function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fo=function(e,t){return(null==e?void 0:e.trim().toLowerCase())===(null==t?void 0:t.trim().toLowerCase())},Bo=function(e){if(e&&!Ro()(e))return new TypeError("Invalid Email")},qo=function(e){var t=e.target.value.trim();return(Ro()(t)?xo()(t):t)||void 0},Uo="email",Wo=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?Uo:n,o=(0,x.Z)(e,["name"]);return An({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,Fo)}),[a]),form:e.form}),r.createElement(er,Ao(Ao({setValueAs:qo},o),{},{name:a,validator:Bo,ref:t,type:"email"}))})),Lo=n(6311),$o=n(7044);function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Go=function(e,t){return(null==e?void 0:e.trim().toLowerCase())===(null==t?void 0:t.trim().toLowerCase())},Ho=function(e){if(e&&!(0,Lo.t)(e,"US"))return new TypeError("Invalid Phone Number")},Ko=function(e){var t,n=e.target.value.trim();return n?(null===(t=(0,$o._)(n,"US"))||void 0===t?void 0:t.format("NATIONAL"))||n:void 0},Qo="phone",Jo=(0,r.forwardRef)((function(e,t){var n=e.name,a=void 0===n?Qo:n,o=(0,x.Z)(e,["name"]);return An({isEqual:(0,r.useMemo)((function(){return(0,c.Z)({},a,Go)}),[a]),form:e.form}),r.createElement(er,Yo(Yo({setValueAs:Ko},o),{},{name:a,validator:Ho,ref:t,type:"tel"}))}));function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xo(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tl="person",nl=n(5117);function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ol=(0,L.Z)((function(){return(0,nl.Z)({asyncButton:{position:"relative"}})})),ll=r.forwardRef((function(e,t){var n=ol(),a=e.showProgress,o=void 0!==a&&a,l=e.progressColor,u=void 0===l?"inherit":l,i=e.className,c=void 0===i?"":i,s=e.children,d=e.size,f=e.disabled,p=(0,x.Z)(e,["showProgress","progressColor","className","children","size","disabled"]),m=(0,r.useMemo)((function(){switch(d){case"medium":return 20;case"small":return 16;case"large":return 24;default:return 20}}),[d]);return r.createElement(it.Z,al(al({},p),{},{ref:t,className:"".concat(c," ").concat(n.asyncButton),size:d,disabled:f||o}),o&&r.createElement(be.Z,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0},r.createElement(ye.Z,{color:u,size:m})),s)}));function ul(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ul(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cl(){var e=(0,_.Z)(["\n  mutation UpdateEntry($updateEntry: UpdateEntry!) {\n    updateEntry(input: $updateEntry) {\n      updatedEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"]);return cl=function(){return e},e}function sl(){var e=(0,_.Z)(["\n  mutation NewEntry($newEntry: NewEntry!) {\n    addNewEntry(input: $newEntry) {\n      newEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"]);return sl=function(){return e},e}r.forwardRef((function(e,t){var n=ol(),a=e.showProgress,o=void 0!==a&&a,l=e.progressColor,u=void 0===l?"inherit":l,i=e.className,c=void 0===i?"":i,s=e.children,d=e.disabled,f=e.size,p=(0,x.Z)(e,["showProgress","progressColor","className","children","disabled","size"]);return r.createElement(We.Z,al(al({},p),{},{ref:t,className:"".concat(c," ").concat(n.asyncButton),size:f,disabled:d||o}),o&&r.createElement(be.Z,{position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",top:0,bottom:0,left:0,right:0},r.createElement(ye.Z,{color:u,size:"small"===f?24:40})),s)}));var dl=(0,R.Ps)(sl(),me),fl=(0,R.Ps)(cl(),me),pl=function(e){var t=So(),n=e.form,a=e.sourceValue,o=function(e){var t=e.showLabels,n=e.insertNamePrefix,a=e.required,o=e.form,l=e.name,u=e.email,i=e.phone,s=(0,x.Z)(e,["showLabels","insertNamePrefix","required","form","name","email","phone"]),d=n?_n(tl,n):tl,f=Vn(d),p=function(e){var t=e.showLabels,n=e.insertNamePrefix,a=e.required,o=e.firstName,l=e.lastName,u=(0,x.Z)(e,["showLabels","insertNamePrefix","required","firstName","lastName"]),i=n?_n(_o,n):_o,s=Vn(i),d=(0,r.useMemo)((function(){return a?[nr,Io]:Io}),[a]);return An({isEqual:(0,r.useMemo)((function(){var e;return e={},(0,c.Z)(e,_n("first",i),Mo),(0,c.Z)(e,_n("last",i),Mo),e}),[i]),form:e.form}),{firstNameInput:r.createElement(er,Do(Do(Do({label:t&&"First Name"},u),o),{},{validator:d,name:_n("first",i),type:"text"})),firstNameInputName:_n("first",s),lastNameInput:r.createElement(er,Do(Do(Do({label:t&&"Last Name"},u),{},{required:a},l),{},{validator:d,name:_n("last",i),type:"text"})),lastNameInputName:_n("last",s)}}(el(el({showLabels:t,insertNamePrefix:d,required:a,form:o},s),l)),m=_n(Uo,f),v=_n(Qo,f);return Tn((0,r.useMemo)((function(){if(a){var e,t=new Error("Email or Phone Required"),n=new Error("Phone or Email Required");return{validators:(e={},(0,c.Z)(e,_n(Uo,d),(function(e,n){var r,a,o=n.form,l=n.name,u=null===(r=o.getFieldValue(l,!1))||void 0===r?void 0:r.trim(),i=null===(a=o.getFieldValue(v,!1))||void 0===a?void 0:a.trim();if(!i&&!u)return t;o.isFieldValid(v)||i||o.validateField(v)})),(0,c.Z)(e,_n(Qo,d),(function(e,t){var r,a,o=t.form,l=t.name,u=null===(r=o.getFieldValue(l,!1))||void 0===r?void 0:r.trim(),i=null===(a=o.getFieldValue(m,!1))||void 0===a?void 0:a.trim();if(!u&&!i)return n;o.isFieldValid(m)||i||o.validateField(m)})),e),form:o}}return{validators:{},form:o}}),[m,o,d,v,a])),{name:p,emailInput:r.createElement(kn,{namePrefix:d},r.createElement(Wo,el(el(el({label:t&&"Email"},s),u||{}),{},{form:o}))),emailInputName:m,phoneInput:r.createElement(kn,{namePrefix:d},r.createElement(Jo,el(el(el({label:t&&"Phone"},s),i||{}),{},{form:o}))),phoneInputName:v}}(il({form:n,required:!0,showLabels:!0,shouldUnregister:!0},t.TextFieldProps)),l=a.valueOf().trim();return Nn((0,r.useMemo)((function(){var e;if(!l)return{defaultValues:{},form:n};var t=(0,st.parseName)(l),r=t.firstName,a=t.lastName;return{defaultValues:(e={},(0,c.Z)(e,o.name.firstNameInputName,new ln(r)),(0,c.Z)(e,o.name.lastNameInputName,new ln(a)),e),form:n}}),[n,l,o.name.firstNameInputName,o.name.lastNameInputName])),r.createElement(r.Fragment,null,r.createElement(be.Z,{marginTop:2.5,clone:!0},r.createElement(nt.Z,{component:"h2",variant:"h6"},"Add New Person")),r.createElement(rt.Z,{spacing:3,container:!0},r.createElement(rt.Z,il({},jo),o.name.firstNameInput),r.createElement(rt.Z,il({},jo),o.name.lastNameInput),r.createElement(rt.Z,il({},jo),o.phoneInput),r.createElement(rt.Z,il({},jo),o.emailInput)))},ml=(0,L.Z)({dialogContent:{position:"relative"}}),vl=function(e){var t,n=e.entryProps,a=e.dialogProps.onClose,o=e.formRef,l=e.refetchQueries,u=ml(),i=(0,r.useRef)(n.updateEntryId).current,s=!!i,d=(0,r.useRef)(null),f=(0,r.useRef)(null),p=(0,r.useState)(null),m=(0,T.Z)(p,2),v=m[0],y=m[1],h=(0,r.useRef)(null);h.current=v;var b=(0,pt.D)(dl,(0,r.useMemo)((function(){return(null==l?void 0:l.onNewEntry)?{refetchQueries:null==l?void 0:l.onNewEntry}:void 0}),[null==l?void 0:l.onNewEntry])),g=(0,T.Z)(b,1)[0],O=(0,pt.D)(fl,(0,r.useMemo)((function(){return(null==l?void 0:l.onUpdateEntry)?{refetchQueries:null==l?void 0:l.onUpdateEntry}:void 0}),[null==l?void 0:l.onUpdateEntry])),E=(0,T.Z)(O,1)[0],w=Dn({onSubmit:{onSubmit:(0,r.useCallback)(function(){var e=(0,tt.Z)(et().mark((function e(t){var r,a,o,l,u,i,c,s,d,f,p,m,v,y,h,b,O,w;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.dirtyValues.entry,p=t.values.person,f||p){e.next=3;break}return e.abrupt("return");case 3:if(m=(null==f?void 0:f.source)||p?function(){var e,t,n;if(p)return{person:{name:{first:(null===(e=null==p?void 0:p.name)||void 0===e?void 0:e.first)||"",last:(null===(t=null==p?void 0:p.name)||void 0===t?void 0:t.last)||""},email:p.email||null,phone:p.phone||null}};if(!(null==f?void 0:f.source))return null;if(f.source instanceof G.FreeSoloNode)return"Business"===(null===(n=f.source.parent)||void 0===n?void 0:n.valueOf())?{business:{name:f.source.valueOf()}}:null;var r=f.source.valueOf();switch(r.__typename){case"Business":return{source:{type:S.Business,id:r.id}};case"Department":return{source:{type:S.Department,id:r.id}};case"Person":return{source:{type:S.Person,id:r.id}}}}():null,!n.updateEntryId){e.next=15;break}return v={id:n.updateEntryId,date:(null==f?void 0:f.date)?ee(f.date):null,dateOfRecord:(null==f?void 0:f.dateOfRecord)?{date:ee(f.dateOfRecord),overrideFiscalYear:!0}:null,department:(null===(r=null==f?void 0:f.department)||void 0===r?void 0:r.valueOf().id)||null,category:(null===(a=null==f?void 0:f.category)||void 0===a?void 0:a.valueOf().id)||null,paymentMethod:(null==f?void 0:f.paymentMethod)?Sa({paymentMethodInput:f.paymentMethod}):null,description:null!==(l=null===(o=null==f?void 0:f.description)||void 0===o?void 0:o.trim())&&void 0!==l?l:null,total:(null==f?void 0:f.total)?J(f.total):null,source:m,reconciled:null!==(u=null==f?void 0:f.reconciled)&&void 0!==u?u:null},console.log(v),e.next=9,E({variables:{updateEntry:v}});case 9:if(y=e.sent,!(null==(h=y.errors)?void 0:h.length)){e.next=13;break}throw new Error(h.map((function(e){return e.message})).join(".\n"));case 13:e.next=22;break;case 15:return b={date:ee(null==f?void 0:f.date),dateOfRecord:(null==f?void 0:f.dateOfRecord)?{date:ee(f.dateOfRecord),overrideFiscalYear:!0}:null,department:null===(i=null==f?void 0:f.department)||void 0===i?void 0:i.valueOf().id,category:null===(c=null==f?void 0:f.category)||void 0===c?void 0:c.valueOf().id,paymentMethod:Sa({paymentMethodInput:null==f?void 0:f.paymentMethod}),description:(null===(s=null==f?void 0:f.description)||void 0===s?void 0:s.trim())||null,total:J(null==f?void 0:f.total),source:m,reconciled:null!==(d=null==f?void 0:f.reconciled)&&void 0!==d?d:null},e.next=18,g({variables:{newEntry:b}});case 18:if(O=e.sent,!(null==(w=O.errors)?void 0:w.length)){e.next=22;break}throw new Error(w.map((function(e){return e.message})).join(".\n"));case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,n.updateEntryId,E]),onSuccess:(0,r.useCallback)((function(e){var t=e.event,n=e.form;d.current===h.current?a&&a(t,"success"):f.current===h.current&&n.reset({exclude:{submitCount:!0,submitted:!0}})}),[a]),finally:(0,r.useCallback)((function(){return y(null)}),[])},validateOn:"submit"});o.current=w,(0,r.useEffect)((function(){return function(){o.current=null}}),[o]);var P=So(),C=function(e){var t,n,a,o,l,u,i,s,d,f,p,m,v,y,h,b,g,O=e.updateEntryId,E=e.required,w=e.form,P=e.showLabels,C=e.insertNamePrefix,j=e.date,Z=e.dateOfRecord,S=e.department,k=e.description,D=e.source,I=(D=void 0===D?{}:D).allowNewSource,M=(0,x.Z)(D,["allowNewSource"]),_=e.category,V=e.paymentMethod,R=e.total,T=e.reconciled,F=co(),B=(0,N.a)(po,{skip:!O,variables:{id:O,deptRoot:S.root}}),q=B.loading,U=B.error,W=B.data,L=C?_n(go,C):go,$=Vn(L),z=Fn({name:_n(ra,go),form:w});Tn((0,r.useMemo)((function(){return E?{validators:{entry:{date:[nr,fo],department:nr,source:nr,category:nr,paymentMethod:nr,total:[nr,ar]}},form:w}:{validators:{entry:{date:fo,total:ar}},form:w}}),[w,E])),An((0,r.useMemo)((function(){return{isEqual:{"entry.date":Oo,"entry.dateOfRecord":Oo},form:w}}),[w]));var Y=Fn({name:_n(mo,go),form:w}),H=Y.value,K=Y.defaultValue;Nn((0,r.useMemo)((function(){var e,t;return{defaultValues:(null===(t=null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)||!H&&!K?{}:(0,c.Z)({},_n(vo,go),new ln(H||K)),form:w}}),[null===(n=null===(t=null==W?void 0:W.entry)||void 0===t?void 0:t.dateOfRecord)||void 0===n?void 0:n.date,H,K,w]));var Q,J=null!==(i=null===(u=null!==(o=null===(a=z.value)||void 0===a?void 0:a.valueOf())&&void 0!==o?o:null===(l=z.defaultValue)||void 0===l?void 0:l.valueOf())||void 0===u?void 0:u.type)&&void 0!==i?i:null,ee=(0,r.useMemo)((function(){var e;return(null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.date)?te(W.entry.date):void 0}),[null===(s=null==W?void 0:W.entry)||void 0===s?void 0:s.date]),ne=(0,r.useMemo)((function(){var e,t;return(null===(t=null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)?te(W.entry.dateOfRecord.date):void 0}),[null===(f=null===(d=null==W?void 0:W.entry)||void 0===d?void 0:d.dateOfRecord)||void 0===f?void 0:f.date]),re=or(U,lr(P?"Department":void 0,null==_?void 0:_.renderInput)),ae=(Q=null===(p=null==W?void 0:W.entry)||void 0===p?void 0:p.department,(0,r.useMemo)((function(){return Q?new G.ValueNode(Q,Q.ancestors.reduceRight((function(e,t){return"Business"!==t.__typename&&e.push(t),e}),[]).reverse()):void 0}),[Q])),oe=or(U,lr(P?"Category":void 0,null==_?void 0:_.renderInput)),le=function(e){return(0,r.useMemo)((function(){return e?new G.ValueNode(e,(0,A.Z)(e.ancestors).reverse()):void 0}),[e])}(null===(m=null==W?void 0:W.entry)||void 0===m?void 0:m.category),ue=or(U,lr(P?"Source":void 0,null==M?void 0:M.renderInput)),ie=function(e){return(0,r.useMemo)((function(){switch(null==e?void 0:e.__typename){case void 0:return;case"Business":return new G.ValueNode(e,xr);case"Department":return new G.ValueNode(e,e.ancestors.reduceRight((function(e,t){return new G.BranchNode(t,e)}),xr));case"Person":return new G.ValueNode(e,Tr)}}),[e])}(null===(v=null==W?void 0:W.entry)||void 0===v?void 0:v.source),ce=or(U,lr(P?"Payment Method":void 0,null==V?void 0:V.renderInput)),se=ja(null===(y=null==W?void 0:W.entry)||void 0===y?void 0:y.paymentMethod),de=(0,r.useMemo)((function(){var e;return(null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.total)?X(W.entry.total):void 0}),[null===(h=null==W?void 0:W.entry)||void 0===h?void 0:h.total]);return Un({loading:q,name:(0,r.useMemo)((function(){return[_n(mo,L),_n(vo,L),_n(wr,L),_n(Wa,L),_n(yo,L),_n(ra,L),_n(Aa,L),_n(ho,L),_n(bo,L)]}),[L]),form:w}),{dateInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(zn,uo(uo({label:P&&"Date",disableFuture:!0,defaultValue:ee},j),{},{disabled:q||(null==j?void 0:j.disabled),name:mo,form:w})))}),[ee,j,L,w,q,P]),dateInputName:_n(mo,$),dateOfRecordInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(zn,uo(uo({label:P&&"Date of Record",defaultValue:ne},Z),{},{disabled:q||(null==Z?void 0:Z.disabled),name:vo,form:w})))}),[ne,Z,L,w,q,P]),dateOfRecordInputName:_n(vo,$),departmentInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(Pr,uo(uo({defaultValue:ae},S),{},{disabled:q||S.loading,renderInput:re,multiple:!1,form:w})))}),[S,ae,re,L,w,q]),departmentInputName:_n(wr,$),sourceInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(Ur,uo(uo({allowNewBusiness:I,allowNewPerson:I,defaultValue:ie},M),{},{disabled:q||M.disabled,renderInput:ue,multiple:!1,name:yo,form:w})))}),[I,L,w,q,M,ie,ue]),sourceInputName:_n(yo,$),categoryInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(aa,uo(uo({defaultValue:le},_),{},{disabled:q||(null==_?void 0:_.disabled),renderInput:oe,multiple:!1,form:w})))}),[le,_,oe,L,w,q]),categoryInputName:_n(ra,$),paymentMethodInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(Fa,uo(uo({defaultValue:se},V),{},{disabled:q||V.disabled,isRefund:!1,renderInput:ce,entryType:J,multiple:!1,form:w})))}),[L,J,w,q,se,ce,V]),paymentMethodInputName:_n(Aa,$),descriptionInput:(0,r.useMemo)((function(){var e,t;return r.createElement(kn,{namePrefix:L},r.createElement(La,uo(uo({label:P&&"Description",defaultValue:null!==(t=null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.description)&&void 0!==t?t:void 0},k),{},{name:Wa,form:w})))}),[null===(b=null==W?void 0:W.entry)||void 0===b?void 0:b.description,k,L,w,P]),descriptionInputName:_n(Wa,$),totalInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:L},r.createElement(Ka,uo(uo({label:P&&"Total",decimals:2,defaultValue:de},R),{},{InputProps:uo({startAdornment:"$",classes:{adornedStart:F.adornedStart}},null==R?void 0:R.InputProps),disabled:q||(null==R?void 0:R.disabled),name:ho,form:w})))}),[F.adornedStart,L,w,q,P,de,R]),totalInputName:_n(ho,$),reconciledInput:(0,r.useMemo)((function(){var e,t;return r.createElement(kn,{namePrefix:L},r.createElement(oo,uo(uo({label:P&&"Reconciled",defaultValue:null!==(t=null===(e=null==W?void 0:W.entry)||void 0===e?void 0:e.reconciled)&&void 0!==t?t:void 0},T),{},{disabled:q||(null==T?void 0:T.disabled),name:bo,form:w})))}),[null===(g=null==W?void 0:W.entry)||void 0===g?void 0:g.reconciled,L,w,q,T,P]),reconciledInputName:_n(bo,$)}}((0,r.useMemo)((function(){return il(il({form:w,showLabels:!0},n),{},{updateEntryId:i,required:!0,date:il(il({},P.DateInputProps),n.date),dateOfRecord:il(il({},P.DateInputProps),n.dateOfRecord),department:il(il({},P.TreeSelectProps),n.department),description:il(il({},P.TextFieldProps),n.description),source:il(il(il({},P.TreeSelectProps),n.source),{},{allowNewSource:!0}),category:il(il({},P.TreeSelectProps),n.category),paymentMethod:il(il(il({},P.TreeSelectProps),n.paymentMethod),{},{isRefund:!1}),total:il(il({},P.TextFieldProps),n.total),reconciled:il(il({},P.TextFieldProps),n.reconciled)})}),[n,w,P.DateInputProps,P.TextFieldProps,P.TreeSelectProps,i])),j=Fn({name:C.sourceInputName,form:w}).value,Z=(0,r.useCallback)((function(){w.isSubmitting||a&&a.apply(void 0,arguments)}),[w.isSubmitting,a]),k=(0,r.useCallback)((function(){y(f.current)}),[]),D=w.submissionError;return r.createElement(Zn,{form:w},r.createElement(at.Z,null,s?w.isSubmitting?"Updating Entry...":"Update Entry":w.isSubmitting?"Adding Entry...":w.submitCount>0&&w.submit?"Add Another Entry":"Add Entry"),D?r.createElement(ot.Z,{dividers:!0},r.createElement(lt.Z,{color:"error"},"Submission Error:"),r.createElement(lt.Z,{color:"error"},D.message)):r.createElement(ot.Z,{dividers:!0,className:u.dialogContent},w.loading&&r.createElement(Pe,{zIndex:"modal"}),r.createElement(rt.Z,{spacing:3,container:!0},r.createElement(rt.Z,il({},jo),C.dateInput),r.createElement(rt.Z,il({},jo),C.dateOfRecordInput),r.createElement(rt.Z,il({},jo),C.departmentInput),r.createElement(rt.Z,il({},jo),C.sourceInput),r.createElement(rt.Z,il({},jo),C.categoryInput),r.createElement(rt.Z,il({},jo),C.paymentMethodInput),r.createElement(rt.Z,il({},jo),C.descriptionInput),r.createElement(rt.Z,il({},jo),C.totalInput),r.createElement(rt.Z,il({},jo),C.reconciledInput)),j instanceof G.FreeSoloNode&&"Person"===(null===(t=j.parent)||void 0===t?void 0:t.valueOf())&&r.createElement(pl,{form:w,sourceValue:j})),r.createElement(ut.Z,null,r.createElement(ll,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===d.current,disabled:w.isSubmitting||w.loading||!!D,type:"submit",variant:"contained",startIcon:r.createElement(dt.Z,null),ref:d,onClick:(0,r.useCallback)((function(){y(d.current)}),[])},s?"Update":"Add"),!s&&r.createElement(ll,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===f.current,disabled:w.isSubmitting||w.loading||!!D,type:"submit",variant:"outlined",startIcon:r.createElement(ft.Z,null),ref:f,onClick:k},"Add & New"),r.createElement(it.Z,{type:"reset",disabled:w.isSubmitting,variant:"text",onClick:(0,r.useCallback)((function(e){Z(e,"cancel")}),[Z])},D?"Ok":"Cancel")))},yl=(0,r.forwardRef)((function(e,t){var n,a=(0,r.useRef)(null),o=e.dialogProps.onClose,l=(0,r.useCallback)((function(){var e;(null===(e=a.current)||void 0===e?void 0:e.isSubmitting)||o&&o.apply(void 0,arguments)}),[o]);return r.createElement(ct.Z,il(il({},e.dialogProps),{},{onClose:l,PaperProps:(0,r.useMemo)((function(){return{component:"form",onSubmit:function(e){var t,n;e.preventDefault(),(null===(t=a.current)||void 0===t?void 0:t.isSubmitting)||null===(n=a.current)||void 0===n||n.handleSubmit(e)}}}),[]),ref:t,disableEscapeKeyDown:null===(n=a.current)||void 0===n?void 0:n.isSubmitting}),r.createElement(vl,il(il({},e),{},{formRef:a})))})),hl=n(313);function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ol(){var e=(0,_.Z)(["\n  fragment UpdateRefundDefaultValues on EntryRefund {\n    __typename\n    id\n    date\n    deleted\n    description\n    paymentMethod {\n      ...PayMethodDefaultValue\n    }\n    reconciled\n    total\n  }\n\n  query RefundEntryState($where: EntriesWhere!) {\n    entries(where: $where) {\n      __typename\n      id\n      date\n      dateOfRecord {\n        date\n      }\n      category {\n        __typename\n        id\n        type\n      }\n      paymentMethod {\n        ...PayMethodDefaultValue\n      }\n      total\n      refunds {\n        ...UpdateRefundDefaultValues\n      }\n    }\n  }\n  ","\n"]);return Ol=function(){return e},e}var El=(0,L.Z)({adornedStart:{alignItems:"baseline"}}),wl="date",Pl="total",Cl="reconciled",jl="refund",Zl=(0,R.Ps)(Ol(),Ca);function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dl(){var e=(0,_.Z)(["\n  mutation UpdateEntryRefund($updateEntryRefund: UpdateEntryRefund!) {\n    updateEntryRefund(input: $updateEntryRefund) {\n      updatedEntryRefund {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n"]);return Dl=function(){return e},e}function Il(){var e=(0,_.Z)(["\n  mutation NewEntryRefund($newEntryRefund: NewEntryRefund!) {\n    addNewEntryRefund(input: $newEntryRefund) {\n      newEntryRefund {\n        __typename\n        id\n        entry {\n          ...GridEntry\n        }\n      }\n    }\n  }\n  ","\n"]);return Il=function(){return e},e}var Ml=(0,R.Ps)(Il(),me),_l=(0,R.Ps)(Dl(),pe),Vl=(0,L.Z)({dialogContent:{position:"relative"}}),Rl=function(e){var t=e.refundProps,n=e.formRef,a=e.dialogProps.onClose,o=e.refetchQueries,l=Vl(),u="updateRefundId"in t?[void 0,t.updateRefundId]:[t.entryId,void 0],i=(0,T.Z)(u,2),c=i[0],s=i[1],d=(0,r.useRef)(!!s).current,f=(0,r.useRef)(null),p=(0,r.useState)(null),m=(0,T.Z)(p,2),v=m[0],y=m[1],h=(0,r.useRef)(null);h.current=v;var b=(0,pt.D)(Ml,(0,r.useMemo)((function(){return(null==o?void 0:o.onNewEntry)?{refetchQueries:null==o?void 0:o.onNewEntry}:void 0}),[null==o?void 0:o.onNewEntry])),g=(0,T.Z)(b,1)[0],O=(0,pt.D)(_l,(0,r.useMemo)((function(){return(null==o?void 0:o.onUpdateEntry)?{refetchQueries:null==o?void 0:o.onUpdateEntry}:void 0}),[null==o?void 0:o.onUpdateEntry])),E=(0,T.Z)(O,1)[0],w=Dn({onSubmit:{onSubmit:(0,r.useCallback)(function(){var e=(0,tt.Z)(et().mark((function e(t){var n,r,a,o,l,u,i,d,f,p,m,v,y;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=13;break}if(u=t.dirtyValues.refund){e.next=4;break}return e.abrupt("return");case 4:return i={id:s,date:(null==u?void 0:u.date)?ee(u.date):null,paymentMethod:(null==u?void 0:u.paymentMethod)?Sa({paymentMethodInput:u.paymentMethod}):null,description:null!==(r=null===(n=null==u?void 0:u.description)||void 0===n?void 0:n.trim())&&void 0!==r?r:null,total:(null==u?void 0:u.total)?J(u.total):null,reconciled:null!==(a=null==u?void 0:u.reconciled)&&void 0!==a?a:null},e.next=7,E({variables:{updateEntryRefund:i}});case 7:if(d=e.sent,!(null==(f=d.errors)?void 0:f.length)){e.next=11;break}throw new Error(f.map((function(e){return e.message})).join(".\n"));case 11:e.next=23;break;case 13:if(p=t.values.refund){e.next=16;break}return e.abrupt("return");case 16:return m={entry:c,date:ee(null==p?void 0:p.date),paymentMethod:Sa({paymentMethodInput:null==p?void 0:p.paymentMethod}),description:(null===(o=null==p?void 0:p.description)||void 0===o?void 0:o.trim())||null,total:J(null==p?void 0:p.total),reconciled:null!==(l=null==p?void 0:p.reconciled)&&void 0!==l?l:null},e.next=19,g({variables:{newEntryRefund:m}});case 19:if(v=e.sent,!(null==(y=v.errors)?void 0:y.length)){e.next=23;break}throw new Error(y.map((function(e){return e.message})).join(".\n"));case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[g,c,E,s]),onSuccess:(0,r.useCallback)((function(e){var t=e.event;f.current===h.current&&a&&a(t,"success")}),[a])},validateOn:"submit"});n.current=w,(0,r.useEffect)((function(){return function(){n.current=null}}),[n]);var P=So(),C=function(e){var t,n,a=e.form,o=e.required,l=e.showLabels,u=e.insertNamePrefix,i=e.date,c=void 0===i?{}:i,s=e.paymentMethod,d=e.description,f=e.total,p=void 0===f?{}:f,m=e.reconciled,v=void 0===m?{}:m,y=El(),h="entryId"in e?[e.entryId,null]:[null,e.updateRefundId],b=(0,T.Z)(h,2),g=b[0],O=b[1],E=u?_n(jl,u):jl,w=Vn(E),P=(0,N.a)(Zl,(0,r.useMemo)((function(){return g?{variables:{where:{id:{eq:g}}}}:O?{variables:{where:{refunds:{id:{eq:O}}}}}:{skip:!0}}),[g,O])),C=P.loading,j=P.error,Z=P.data;Un({loading:C,name:(0,r.useMemo)((function(){return[_n(wl,E),_n(Aa,E),_n(Pl,E),_n(Cl,E)]}),[E]),form:a});var S=(null==Z?void 0:Z.entries)||[],k=(0,T.Z)(S,1)[0],D=null!==(n=null===(t=null==k?void 0:k.category)||void 0===t?void 0:t.type)&&void 0!==n?n:null,I=(0,r.useMemo)((function(){var e;return[((null==k?void 0:k.refunds)||[]).reduce((function(t,n){return n.id===O?(e=n,t):n.deleted?t:t.sub(X(n.total))}),(null==k?void 0:k.total)?X(null==k?void 0:k.total):new(Y())(0)),e]}),[null==k?void 0:k.refunds,null==k?void 0:k.total,O]),M=(0,T.Z)(I,2),_=M[0],V=M[1],R=(0,r.useMemo)((function(){return k?te(k.date):new Date("1900-01-01")}),[k]);Tn((0,r.useMemo)((function(){var e=new RangeError("Refund cannot exceed $".concat(_.toString(2))),t=function(t){if(t&&t.compare(_)>0)return e},n=new RangeError("Refund cannot be given before originating transaction."),r=new RangeError("Refund cannot recorded in the future."),l=function(e){if(e)return(0,mt.Z)(e)?r:(0,hl.Z)(e,(0,yt.Z)(R))?n:void 0};return o?{validators:{refund:{date:[nr,l],paymentMethod:nr,total:[nr,ar,t]}},form:a}:{validators:{refund:{date:l,total:[ar,t]}},form:a}}),[a,_,R,o]));var x=(0,r.useMemo)((function(){return(null==V?void 0:V.date)?te(V.date):void 0}),[null==V?void 0:V.date]),A=or(j,lr(l?"Payment Method":void 0,null==s?void 0:s.renderInput)),F=ja(function(){var e;return(null==V?void 0:V.paymentMethod)?null==V?void 0:V.paymentMethod:"PaymentMethodCard"===(null===(e=null==k?void 0:k.paymentMethod)||void 0===e?void 0:e.__typename)?null==k?void 0:k.paymentMethod:void 0}()),B=(0,r.useMemo)((function(){return(null==V?void 0:V.total)?X(V.total):void 0}),[null==V?void 0:V.total]);return{error:j,dateInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:E},r.createElement(zn,gl(gl({label:l&&"Date",defaultValue:x,minDate:R},c),{},{name:wl,form:a})))}),[x,c,a,R,E,l]),dateInputName:_n(wl,w),paymentMethodInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:E},r.createElement(Fa,gl(gl({defaultValue:F},s),{},{isRefund:!0,renderInput:A,entryType:D,multiple:!1,form:a})))}),[D,a,F,A,s,E]),paymentMethodInputName:_n(Aa,w),descriptionInput:(0,r.useMemo)((function(){var e;return r.createElement(kn,{namePrefix:E},r.createElement(La,gl(gl({label:l&&"Description",defaultValue:null!==(e=null==V?void 0:V.description)&&void 0!==e?e:void 0},d),{},{name:Wa,form:a})))}),[E,l,null==V?void 0:V.description,d,a]),descriptionInputName:_n(Wa,w),totalInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:E},r.createElement(Ka,gl(gl({label:l&&"Total",decimals:2,helperText:"Max $".concat(_.toString(2)),defaultValue:B},p),{},{InputProps:gl({startAdornment:"$",classes:{adornedStart:y.adornedStart}},null==p?void 0:p.InputProps),name:Pl,form:a})))}),[y.adornedStart,a,_,E,l,B,p]),totalInputName:_n(Pl,w),reconciledInput:(0,r.useMemo)((function(){return r.createElement(kn,{namePrefix:E},r.createElement(oo,gl(gl({label:l&&"Reconciled",defaultValue:!!(null==V?void 0:V.reconciled)},v),{},{name:Cl,form:a})))}),[a,v,E,l,null==V?void 0:V.reconciled]),reconciledInputName:_n(Cl,w)}}((0,r.useMemo)((function(){return kl(kl({},t),{},{showLabels:!0,required:!0,form:w,date:kl(kl({},P.DateInputProps),t.date),paymentMethod:kl(kl({},P.TreeSelectProps),t.paymentMethod),description:kl(kl({},P.TextFieldProps),t.description),total:kl(kl({},P.TextFieldProps),t.total),reconciled:kl(kl({},P.TextFieldProps),t.reconciled)})}),[w,t,P.DateInputProps,P.TextFieldProps,P.TreeSelectProps])),j=(0,r.useCallback)((function(){w.isSubmitting||a&&a.apply(void 0,arguments)}),[w.isSubmitting,a]),Z=w.submissionError;return r.createElement(Zn,{form:w},r.createElement(at.Z,null,d?w.isSubmitting?"Updating Refund...":"Update Refund":w.isSubmitting?"Adding Refund...":"Add Refund"),Z?r.createElement(ot.Z,{dividers:!0},r.createElement(lt.Z,{color:"error"},"Submission Error:"),r.createElement(lt.Z,{color:"error"},Z.message)):r.createElement(ot.Z,{dividers:!0,className:l.dialogContent},w.loading&&r.createElement(Pe,{zIndex:"modal"}),r.createElement(rt.Z,{spacing:3,container:!0},r.createElement(rt.Z,kl({},jo),C.dateInput),r.createElement(rt.Z,kl({},jo),C.paymentMethodInput),r.createElement(rt.Z,kl({},jo),C.descriptionInput),r.createElement(rt.Z,kl({},jo),C.totalInput),r.createElement(rt.Z,kl({},jo),C.reconciledInput))),r.createElement(ut.Z,null,r.createElement(ll,{color:"primary",showProgress:w.isSubmitting&&!!v&&v===f.current,disabled:w.isSubmitting||w.loading||!!Z,type:"submit",variant:"contained",startIcon:r.createElement(dt.Z,null),ref:f,onClick:(0,r.useCallback)((function(){y(f.current)}),[])},d?"Update":"Add"),r.createElement(it.Z,{type:"reset",disabled:w.isSubmitting,variant:"text",onClick:(0,r.useCallback)((function(e){j(e,"cancel")}),[j])},w.submissionError?"Ok":"Cancel")))},Nl=(0,r.forwardRef)((function(e,t){var n,a=(0,r.useRef)(null),o=e.dialogProps.onClose,l=(0,r.useCallback)((function(){var e;(null===(e=a.current)||void 0===e?void 0:e.isSubmitting)||o&&o.apply(void 0,arguments)}),[o]);return r.createElement(ct.Z,kl(kl({},e.dialogProps),{},{onClose:l,PaperProps:(0,r.useMemo)((function(){return{component:"form",onSubmit:function(e){var t,n;e.preventDefault(),(null===(t=a.current)||void 0===t?void 0:t.isSubmitting)||null===(n=a.current)||void 0===n||n.handleSubmit(e)}}}),[]),disableEscapeKeyDown:null===(n=a.current)||void 0===n?void 0:n.isSubmitting,ref:t}),r.createElement(Rl,kl(kl({},e),{},{formRef:a})))}));function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Al(){var e=(0,_.Z)(["\n  mutation DeleteEntryRefund($id: ID!) {\n    deleteEntryRefund(id: $id) {\n      deletedEntryRefund {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n"]);return Al=function(){return e},e}function Fl(){var e=(0,_.Z)(["\n  mutation DeleteEntry($id: ID!) {\n    deleteEntry(id: $id) {\n      deletedEntry {\n        ...GridEntry\n      }\n    }\n  }\n  ","\n"]);return Fl=function(){return e},e}function Bl(){var e=(0,_.Z)(["\n  query DeleteRefundState($id: ID!) {\n    entryRefund(id: $id) {\n      __typename\n      id\n      total\n    }\n  }\n"]);return Bl=function(){return e},e}function ql(){var e=(0,_.Z)(["\n  query DeleteEntryState($id: ID!) {\n    entry(id: $id) {\n      __typename\n      id\n      total\n    }\n  }\n"]);return ql=function(){return e},e}var Ul=(0,R.Ps)(ql()),Wl=(0,R.Ps)(Bl()),Ll=(0,R.Ps)(Fl(),me),$l=(0,R.Ps)(Al(),pe),zl=(0,L.Z)({dialogContent:{position:"relative"}}),Yl=function(e){var t,n,a,o,l=zl(),u="deleteEntryId"in e?[e.deleteEntryId,void 0,(0,x.Z)(e,["deleteEntryId"])]:"deleteRefundId"in e?[void 0,e.deleteRefundId,(0,x.Z)(e,["deleteRefundId"])]:[void 0,void 0,e],i=(0,T.Z)(u,3),c=i[0],s=i[1],d=i[2],f=(0,N.a)(Ul,(0,r.useMemo)((function(){return{skip:!c,variables:{id:c}}}),[c])),p=(0,N.a)(Wl,(0,r.useMemo)((function(){return{skip:!s,variables:{id:s}}}),[s])),m=(0,pt.D)(Ll),v=(0,T.Z)(m,2),y=v[0],h=v[1],b=(0,pt.D)($l),g=(0,T.Z)(b,2),O=g[0],E=g[1],w=f.loading||p.loading||h.loading||E.loading,P=f.error||p.error||h.error||E.error,C=d.onClose,j=(0,r.useCallback)((function(){w&&"success"!==(arguments.length<=1?void 0:arguments[1])||C&&C.apply(void 0,arguments)}),[w,C]);e.handleCloseRef.current=j;var Z=(0,r.useRef)(null);return r.createElement(r.Fragment,null,r.createElement(at.Z,null,h.loading||E.loading?s?"Deleting refund...":"Deleting entry...":s?"Delete refund":"Delete entry"),r.createElement(ot.Z,{className:l.dialogContent},(0,r.useMemo)((function(){var e,t,n,a,o=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),l=(null===(t=null===(e=null==f?void 0:f.data)||void 0===e?void 0:e.entry)||void 0===t?void 0:t.total)||(null===(a=null===(n=null==p?void 0:p.data)||void 0===n?void 0:n.entryRefund)||void 0===a?void 0:a.total),u="Delete ".concat(s?"Refund":"Entry");return P?r.createElement(lt.Z,{color:"error"},P.message):l?"".concat(u," in the amount of ").concat(o.format(X(l).valueOf())):u}),[null===(n=null===(t=null==f?void 0:f.data)||void 0===t?void 0:t.entry)||void 0===n?void 0:n.total,s,null===(o=null===(a=null==p?void 0:p.data)||void 0===a?void 0:a.entryRefund)||void 0===o?void 0:o.total,P]),(f.loading||p.loading||w)&&r.createElement(Pe,{zIndex:"modal"})),r.createElement(ut.Z,null,r.createElement(ll,{color:"primary",showProgress:w,disabled:!c&&!s||w||!!P,type:"submit",variant:"contained",startIcon:r.createElement(Qe.Z,null),ref:Z,onClick:(0,r.useCallback)(function(){var e=(0,tt.Z)(et().mark((function e(t){var n,r,a;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return e.next=3,y({variables:{id:c}});case 3:r=e.sent,n=r.errors,e.next=12;break;case 7:if(!s){e.next=12;break}return e.next=10,O({variables:{id:s}});case 10:a=e.sent,n=a.errors;case 12:(null==n?void 0:n.length)||j(t,"success");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,c,O,s,j])},"Delete"),r.createElement(it.Z,{type:"reset",disabled:w,variant:"text",onClick:(0,r.useCallback)((function(e){j(e,"cancel")}),[j])},P?"Ok":"Cancel")))},Gl=function(e){var t=(0,r.useRef)();return r.createElement(ct.Z,Tl(Tl({},e),{},{onClose:(0,r.useCallback)((function(){t.current&&t.current.apply(t,arguments)}),[])}),r.createElement(Yl,Tl(Tl({},e),{},{handleCloseRef:t})))};function Hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hl(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ql(){var e=(0,_.Z)(["\n  mutation ReconcileEntries($input: ReconcileEntries!) {\n    reconcileEntries(input: $input) {\n      reconciledEntries {\n        ...GridEntry\n      }\n      reconciledRefunds {\n        ...GridRefund\n      }\n    }\n  }\n  ","\n  ","\n"]);return Ql=function(){return e},e}var Jl=(0,L.Z)({dialogContent:{position:"relative"}}),Xl=(0,R.Ps)(Ql(),me,pe),eu=function(e){var t=Jl(),n=e.entryIds,a=e.refundIds,o=e.dialogProps.onClose,l=(0,pt.D)(Xl,(0,r.useMemo)((function(){return{variables:{input:{entries:n,refunds:a}}}}),[n,a])),u=(0,T.Z)(l,2),i=u[0],c=u[1],s=c.loading,d=c.error,f=(0,r.useCallback)((function(){s&&"success"!==(arguments.length<=1?void 0:arguments[1])||o&&o.apply(void 0,arguments)}),[s,o]);e.handleCloseRef.current=f;var p=(0,r.useRef)(null);return r.createElement(r.Fragment,null,r.createElement(at.Z,null,"Reconcile"),r.createElement(ot.Z,{className:t.dialogContent},(0,r.useMemo)((function(){if(d)return r.createElement(lt.Z,{color:"error"},d.message);var e="";return(null==n?void 0:n.length)&&(e="".concat(n.length," ").concat(1===n.length?"entry":"entries")),(null==a?void 0:a.length)&&(e+="".concat(e?" and ":"").concat(a.length," ").concat(1===a.length?"refund":"refunds")),"".concat(e,".")}),[null==n?void 0:n.length,d,null==a?void 0:a.length]),s&&r.createElement(Pe,{zIndex:"modal"})),r.createElement(ut.Z,null,r.createElement(ll,{color:"primary",showProgress:s,disabled:!(null==n?void 0:n.length)&&!(null==a?void 0:a.length)||s||!!d,type:"submit",variant:"contained",startIcon:r.createElement(Ge.Z,null),ref:p,onClick:(0,r.useCallback)(function(){var e=(0,tt.Z)(et().mark((function e(t){var n,r;return et().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:n=e.sent,(null==(r=n.errors)?void 0:r.length)||f(t,"success");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[f,i])},"Reconcile"),r.createElement(it.Z,{type:"reset",disabled:s,variant:"text",onClick:(0,r.useCallback)((function(e){f(e,"cancel")}),[f])},d?"Ok":"Cancel")))},tu=function(e){var t=(0,r.useRef)();return r.createElement(ct.Z,Kl(Kl({},e.dialogProps),{},{onClose:(0,r.useCallback)((function(){t.current&&t.current.apply(t,arguments)}),[])}),r.createElement(eu,Kl(Kl({},e),{},{handleCloseRef:t})))};function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var au=function(e){return r.createElement(qe.Z,ru({},e),r.createElement("path",{d:"M2,15V12H5V10L9,13.5L5,17V15H2M22,8.7V10H10V8.7L16,5L22,8.7M10,17H22V19H10V17M15,11H17V16H15V11M11,11H13V16H11V11M19,11H21V16H19V11Z"}))},ou=function(e){return r.createElement(qe.Z,ru({},e),r.createElement("path",{d:"M15,15V12H18V10L22,13.5L18,17V15H15M14,8.7V10H2V8.7L8,5L14,8.7M2,17H14V19H2V17M7,11H9V16H7V11M3,11H5V16H3V11M11,11H13V16H11V11Z"}))},lu=function(){},uu=function(e){var t=e.reconcileMode,n=e.upsertEntryProps,a=e.upsertRefundProps,o=e.deleteEntryProps,l=e.reconcileEntriesProps,u=(0,r.useState)(!!t),i=(0,T.Z)(u,2),c=i[0],s=i[1],d=(0,r.useState)(!1),f=(0,T.Z)(d,2),p=f[0],m=f[1];return r.createElement(je.Sy,{name:"EntryActionState"},r.createElement(B.fP,null),r.createElement(je.aD,{name:"reconcileMode",value:c}),r.createElement(je.aD,{name:"confirmReconcile",value:p}),r.createElement(je.aU,{name:"toggleConfirmReconcile",action:(0,r.useCallback)((function(e,t){var n=t.selection;t.reconcileMode&&e&&!n.length||m(e)}),[])}),r.createElement(je.aD,{name:"selection",computed:(0,r.useCallback)((function(e){var t=e.selection;return e.reconcileMode?t:[]}),[])}),r.createElement(B.xO,null),r.createElement(je.aU,{name:"changeReconcileMode",action:(0,r.useCallback)((function(e,t,n){var r=t.selection,a=n.toggleSelectAll;s(e),r.length&&a(!1)}),[])}),r.createElement(je.aD,{name:"rows",computed:(0,r.useCallback)((function(e){var t=e.rows;return e.reconcileMode?t.filter((function(e){return!e.reconciled})):t}),[])}),r.createElement(B.C7,{onCommitChanges:lu}),r.createElement(je.aD,{name:"upsertEntryProps",value:n}),r.createElement(je.aD,{name:"upsertRefundProps",value:a}),r.createElement(je.aD,{name:"deleteEntryProps",value:o}),r.createElement(je.aD,{name:"reconcileEntriesProps",value:l}))},iu=r.memo((function(e){e.allSelected,e.tableColumn,e.tableRow,e.disabled,e.onToggle;var t=e.someSelected,n=e.toggleConfirmReconcile,a=(0,x.Z)(e,["allSelected","tableColumn","tableRow","disabled","onToggle","someSelected","toggleConfirmReconcile"]);return r.createElement(Ue.Z,ru(ru({},a),{},{align:"center",padding:"checkbox",variant:"head"}),r.createElement(We.Z,{onClick:(0,r.useCallback)((function(){return n(!0)}),[n]),disabled:!t,size:"small",color:"secondary"},r.createElement(Ge.Z,null)))})),cu=r.memo((function(e){var t=e.addedRows,n=e.addRow,a=e.startEditRows,o=e.changeAddedRow,l=e.deleteRows,u=(0,x.Z)(e,["addedRows","addRow","startEditRows","changeAddedRow","deleteRows"]),i=r.useState(null),c=(0,T.Z)(i,2),s=c[0],d=c[1],f=Boolean(s),p=e.row,m=(0,r.useCallback)((function(){d(null),a({rowIds:[p.id]})}),[p.id,a]),v=(0,r.useCallback)((function(){d(null),n(),o({rowId:t.length,change:{__typename:"EntryRefund",id:p.id}})}),[n,t.length,o,p.id]),y=(0,r.useCallback)((function(){d(null),l({rowIds:[p.id]})}),[l,p.id]);return r.createElement(q.Al.Cell,ru({},u),r.createElement(We.Z,{onClick:function(e){d(e.currentTarget)}},r.createElement(He.Z,null)),r.createElement(Le.Z,{anchorEl:s,keepMounted:!0,open:f,onClose:function(){d(null)}},r.createElement($e.Z,{onClick:m},r.createElement(ze.Z,null,r.createElement(Ke.Z,{fontSize:"small"})),r.createElement(Ye.Z,{primary:"Edit"})),"Entry"===p.__typename&&(p.category.type===k.Credit?r.createElement($e.Z,{onClick:v},r.createElement(ze.Z,null,r.createElement(ou,{fontSize:"small"})),r.createElement(Ye.Z,{primary:"Give Refund"})):r.createElement($e.Z,{onClick:v},r.createElement(ze.Z,null,r.createElement(au,{fontSize:"small"})),r.createElement(Ye.Z,{primary:"Add Refund"}))),r.createElement($e.Z,{onClick:y},r.createElement(ze.Z,null,r.createElement(Qe.Z,{fontSize:"small"})),r.createElement(Ye.Z,{primary:"Delete"}))))})),su=r.memo((function(e){var t=e.addRow,n=(0,x.Z)(e,["addRow"]),a=(0,r.useCallback)((function(){return t()}),[t]);return r.createElement(q.Al.HeaderCell,ru({},n),r.createElement(We.Z,{onClick:a,color:"secondary",size:"medium"},r.createElement(Je.Z,null)))})),du=[{name:"EntryActionState",optional:!1}],fu=function(e){return e.tableRow.type===q.cO.ROW_TYPE},pu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.cO.ROW_TYPE&&n.type===q.Al.COLUMN_TYPE},mu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.KA.ROW_TYPE&&n.type===q.Al.COLUMN_TYPE},vu=function(e){var t=e.tableRow,n=e.tableColumn;return t.type===q.KA.ROW_TYPE&&n.type===q.vN.COLUMN_TYPE},yu=function(){return r.createElement(je.Sy,{name:"EntryActionDialog",dependencies:du},r.createElement(q.vN,{showSelectAll:!0,selectByRowClick:!0,highlightRow:!0,showSelectionColumn:!0,headerCellComponent:iu}),r.createElement(q.Al,{cellComponent:cu,headerCellComponent:su,showEditCommand:!0,showAddCommand:!0,showDeleteCommand:!0}),r.createElement(q.a$,{leftColumns:(0,r.useMemo)((function(){return[q.Al.COLUMN_TYPE]}),[])}),r.createElement(je.aD,{name:"tableColumns",computed:(0,r.useCallback)((function(e){var t=e.tableColumns,n=e.reconcileMode;return t.reduce((function(e,t){var r;return n?t.type!==q.Al.COLUMN_TYPE&&"reconciled"!==(null===(r=t.column)||void 0===r?void 0:r.name)&&e.push(t.type===q.vN.COLUMN_TYPE?ru(ru({},t),{},{fixed:"left"}):t):t.type!==q.vN.COLUMN_TYPE&&e.push(t.type===q.Al.COLUMN_TYPE?ru(ru({},t),{},{fixed:"left"}):t),e}),[])}),[])}),r.createElement(je.aD,{name:"hiddenColumnNames",computed:(0,r.useCallback)((function(e){var t=e.hiddenColumnNames;return e.reconcileMode?(0,A.Z)(new Set([].concat((0,A.Z)(t),["reconciled"]))):t}),[])}),r.createElement(je.aD,{name:"isColumnTogglingEnabled",computed:(0,r.useCallback)((function(e){var t=e.isColumnTogglingEnabled,n=e.reconcileMode;return n?function(e){return(!n||"reconciled"!==e)&&t(e)}:t}),[])}),r.createElement(je.YS,{name:"tableRow",predicate:fu},(0,r.useCallback)((function(e){return r.createElement(je.eT,null,(function(t,n){var a=t.reconcileMode,o=n.startEditRows,l=e.tableRow.row;return r.createElement(je.jf,{params:ru(ru({},e),a?{}:{onDoubleClick:function(){o({rowIds:[l.id]})}})})}))}),[])),r.createElement(je.YS,{name:"tableCell",predicate:pu},(0,r.useCallback)((function(e){return r.createElement(je.eT,null,(function(t,n){var a=t.addedRows,o=n.addRow,l=n.startEditRows,u=n.changeAddedRow,i=n.deleteRows;return r.createElement(je.jf,{params:ru(ru({},e),{},{addRow:o,addedRows:a,startEditRows:l,changeAddedRow:u,deleteRows:i})})}))}),[])),r.createElement(je.YS,{name:"tableCell",predicate:mu},(0,r.useCallback)((function(e){return r.createElement(je.eT,null,(function(t,n){var a=n.addRow;return r.createElement(je.jf,{params:ru(ru({},e),{},{addRow:a})})}))}),[])),r.createElement(je.YS,{name:"tableCell",predicate:vu},(0,r.useCallback)((function(e){return r.createElement(je.eT,null,(function(t,n){var a=n.toggleConfirmReconcile;return r.createElement(je.jf,{params:ru(ru({},e),{},{toggleConfirmReconcile:a})})}))}),[])),r.createElement(je.YS,{name:"entryActionDialog"},r.createElement(je.eT,null,(0,r.useCallback)((function(e,t){var n,a=e.rows,o=e.addedRows,l=e.editingRowIds,u=e.deletedRowIds,i=e.upsertEntryProps,c=e.upsertRefundProps,s=e.deleteEntryProps,d=e.reconcileEntriesProps,f=e.confirmReconcile,p=e.selection,m=t.stopEditRows,v=t.cancelAddedRows,y=t.cancelChangedRows,h=t.cancelDeletedRows,b=t.toggleConfirmReconcile,g=t.toggleSelectAll,O=f,E=!O&&!!u.length,w=!O&&!E&&!!o.length,P=w?null===(n=o[0])||void 0===n?void 0:n.id:E?u[0]:l[0],C=w?o[0]:a.find((function(e){return e.id===P})),j=!!C||O,Z="EntryRefund"===(null==C?void 0:C.__typename),S=function(e,t){O?(b(!1),"success"===t&&g(!1)):w?v({rowIds:o.map((function(e,t){return t}))}):E?h({rowIds:u}):(m({rowIds:l}),y({rowIds:l}))},k=new Set(p),D=a.reduce((function(e,t){var n=t.id,r=t.__typename;return k.has(n)&&("Entry"===r?e[0].push(n):e[1].push(n)),e}),[[],[]]);return r.createElement(r.Fragment,null,r.createElement(yl,ru(ru({},i),{},{entryProps:ru(ru({},i.entryProps),{},{updateEntryId:P}),dialogProps:ru(ru({},i.dialogProps),{},{onClose:S,open:j&&!Z&&!E&&!O})})),r.createElement(Nl,ru(ru({},c),{},{refundProps:ru(ru({},c.refundProps),w?{entryId:P}:{updateRefundId:P}),dialogProps:ru(ru({},c.dialogProps),{},{onClose:S,open:j&&Z&&!E})})),r.createElement(Gl,ru(ru(ru({},s),Z?{deleteRefundId:P||""}:{deleteEntryId:P||""}),{},{onClose:S,open:j&&E})),r.createElement(tu,ru(ru({},d),{},{entryIds:D[0],refundIds:D[1],dialogProps:ru(ru({},d.dialogProps),{},{onClose:S,open:j&&O})})))}),[]))),r.createElement(je.YS,{name:"root"},r.createElement(je.jf,null),r.createElement(je.jf,{name:"entryActionDialog"})))},hu=n(1336);function bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ou={margin:"dense"},Eu=function(e){return(0,G.defaultInput)(gu(gu({},e),{},{InputProps:gu(gu({},e.InputProps||{}),Ou)}))},wu={paddingLeft:"8px",paddingRight:"8px"},Pu={paddingRight:"8px"},Cu={size:"small",fullWidth:!0};function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Su={width:"100%",display:"flex",justifyContent:"center"},ku=function(e){var t=e.value,n=(0,x.Z)(e,["value"]);return r.createElement(q.cO.Cell,Zu({},n),r.createElement("div",{style:Su},t&&r.createElement(hu.Z,{fontSize:"small"})))},Du=function(e){var t=Zu(Zu({},e),{},{InputProps:Zu(Zu({},Ou),e.InputProps)});return r.createElement(Yn.Z,Zu({},t))},Iu=[!0,!1],Mu=function(e){var t=e.boolLabels,n=(0,x.Z)(e,["boolLabels"]),a=e.column.name,o=e.onFilter,l=(0,r.useCallback)((function(e,t){o(!0===t||!1===t?{columnName:a,value:t.toString()}:null)}),[a,o]),u=(0,r.useCallback)((function(e){return t?e?t.trueLabel:t.falseLabel:e?"True":"False"}),[t]);return r.createElement(q.B0.Cell,Zu(Zu({},n),{},{style:wu}),r.createElement(Gn.ZP,Zu({getOptionLabel:u,renderInput:Du,onChange:l,options:Iu},Cu)))};function _u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nu=function(e){var t=e.value,n=(0,x.Z)(e,["value"]);return r.createElement(q.cO.Cell,Ru(Ru({},n),{},{value:t.name}))},xu=[new G.BranchNode(k.Credit),new G.BranchNode(k.Debit)],Tu=function(e){return e===k.Credit||e===k.Debit},Au=function(e){var t=e.valueOf();return Tu(t)?(0,oa.I)(t):Xr(t)},Fu=function(e,t){var n=e.valueOf(),r=t.valueOf(),a=Tu(n),o=Tu(r);return a||o?n===r:!a&&!o&&ea(n,r)},Bu=function(e){var t=e.categoryFilterOpts,n=(0,x.Z)(e,["categoryFilterOpts"]),a=e.column.name,o=(0,r.useState)({branch:null}),l=(0,T.Z)(o,2),u=l[0],i=l[1],c=(0,r.useCallback)((function(e,t){i((function(e){return Ru(Ru({},e),{},{branch:t})}))}),[i]),s=(0,r.useMemo)((function(){return t?t.reduce((function(e,t){return t.type===k.Credit?e[0].push(t):e[1].push(t),e}),[[],[]]):[[],[]]}),[t]),d=(0,T.Z)(s,2),f=d[0],p=d[1],m=(0,r.useMemo)((function(){return u.branch?u.branch.valueOf()===k.Credit?f:p:xu.reduce((function(e,t){return t.valueOf()===k.Credit?(f.length&&e.push(t),e.push(t.valueOf())):(p.length&&e.push(t),e.push(t.valueOf())),e}),[])}),[f,p,u.branch]),v=e.onFilter,y=(0,r.useCallback)((function(e,t){if(t.length){var n,r={operator:"or",filters:[]},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}(t);try{for(o.s();!(n=o.n()).done;){var l=n.value;r.filters.push({operation:"equal",value:l.valueOf()})}}catch(e){o.e(e)}finally{o.f()}v({columnName:a,filters:[r]})}else v(null)}),[a,v]);return r.createElement(q.B0.Cell,Ru(Ru({},n),{},{style:wu}),r.createElement(H(),Ru({branch:u.branch,disabled:!e.filteringEnabled,getOptionLabel:Au,getOptionSelected:Fu,multiple:!0,onBranchChange:c,onChange:y,options:m,renderInput:Eu},Cu)))},qu=n(6127),Uu=n(7349),Wu=n(7069),Lu=n(3151),$u=n(6220);function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gu=["equal","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual"],Hu=["lessThan","lessThanOrEqual"],Ku=["greaterThan","greaterThanOrEqual"],Qu=function(e){switch(e){case"greaterThan":case"greaterThanOrEqual":return Hu;case"lessThan":case"lessThanOrEqual":return Ku;default:return}},Ju=function(e){var t=e.type,n=(0,x.Z)(e,["type"]);return"addRangeBound"===t?r.createElement($u.Z,Yu({},n)):r.createElement(q.B0.Icon,Yu({type:t},n))};function Xu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xu(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ti=function(e){var t=e.value,n=e.formatter,a=(0,x.Z)(e,["value","formatter"]);return r.createElement(q.cO.Cell,ei(ei({},a),{},{value:(null==n?void 0:n.format(t))||t.toLocaleString()}))},ni={autoOk:!0,disableFuture:!0,disableToolbar:!0,format:"MM/dd/yyyy",fullWidth:!0,inputVariant:"standard",margin:"dense",placeholder:"mm/dd/yyyy",size:"small",variant:"inline"},ri=(0,L.Z)((function(e){return{keyboardDatePicker:{position:"relative",top:"-1px",marginLeft:e.spacing(1)},tableCell:{paddingLeft:"0px !important"}}})),ai=function(e,t,n,r){if("equal"===e||"notEqual"===e)return!1;switch(e){case"greaterThan":return"greaterThan"!==n&&"greaterThanOrEqual"!==n&&(0,qu.Z)(r,t)>0;case"greaterThanOrEqual":return"greaterThan"!==n&&"greaterThanOrEqual"!==n&&("lessThanOrEqual"===n?(0,qu.Z)(r,t)>=0:(0,qu.Z)(r,t)>0);case"lessThan":return"lessThan"!==n&&"lessThanOrEqual"!==n&&(0,qu.Z)(t,r)>0;case"lessThanOrEqual":return"lessThan"!==n&&"lessThanOrEqual"!==n&&("greaterThanOrEqual"===n?(0,qu.Z)(t,r)>=0:(0,qu.Z)(t,r)>0)}},oi=function(e,t,n,r,a){if(!n)return[null];var o={operator:"and",filters:[{operation:t,value:n}]};return r&&a&&o.filters.push({operation:r,value:a}),[{columnName:e,filters:[o]}]},li=function(e){var t=e.filteringEnabled,n=e.getMessage,a=e.column.name,o=ri(),l=(0,r.useState)({date:null,boundDate:null,selectorValue:"equal"}),u=(0,T.Z)(l,2),i=u[0],c=u[1],s=e.onFilter,d=(0,r.useCallback)((function(e){if(e&&i.rangeSelectorValue&&i.boundDate&&!ai(i.selectorValue,e,i.rangeSelectorValue,i.boundDate)){var t=Qu(i.selectorValue);c((function(n){return ei(ei({},n),{},{date:e,boundDate:null,rangeSelectorValue:void 0,availableRangeValues:t})}))}else c((function(t){return ei(ei({},t),{},{date:e})}));s.apply(void 0,(0,A.Z)(oi(a,i.selectorValue,e,i.rangeSelectorValue,i.boundDate)))}),[i.rangeSelectorValue,i.boundDate,i.selectorValue,s,a]),f=(0,r.useCallback)((function(e){c((function(t){return ei(ei({},t),{},{boundDate:e,rangeSelectorValue:e?t.rangeSelectorValue:void 0})})),s.apply(void 0,(0,A.Z)(oi(a,i.selectorValue,i.date,i.rangeSelectorValue,e)))}),[s,a,i.selectorValue,i.date,i.rangeSelectorValue]),p=(0,r.useCallback)((function(e){var t=Qu(e);if(i.date&&i.rangeSelectorValue&&i.boundDate&&!ai(e,i.date,i.rangeSelectorValue,i.boundDate))c((function(n){return ei(ei({},n),{},{selectorValue:e,boundDate:null,rangeSelectorValue:void 0,availableRangeValues:t})}));else switch(e){case"greaterThan":case"greaterThanOrEqual":c((function(n){return ei(ei({},n),{},{selectorValue:e,availableRangeValues:t})}));break;case"lessThan":case"lessThanOrEqual":c((function(n){return ei(ei({},n),{},{selectorValue:e,availableRangeValues:t})}));break;default:c((function(n){return ei(ei({},n),{},{selectorValue:e,boundDate:null,rangeSelectorValue:void 0,availableRangeValues:t})}))}s.apply(void 0,(0,A.Z)(oi(a,e,i.date,i.rangeSelectorValue,i.boundDate)))}),[i.date,i.rangeSelectorValue,i.boundDate,s,a]),m=(0,r.useCallback)((function(e){i.date&&i.boundDate&&!ai(i.selectorValue,i.date,e,i.boundDate)?c((function(t){return ei(ei({},t),{},{rangeSelectorValue:e,boundDate:null})})):c((function(t){return ei(ei({},t),{},{rangeSelectorValue:e})})),s.apply(void 0,(0,A.Z)(oi(a,i.selectorValue,i.date,e,i.boundDate)))}),[i.date,i.boundDate,i.selectorValue,s,a]),v=(0,r.useMemo)((function(){if(i.date)switch(i.selectorValue){case"greaterThan":return(0,Uu.Z)(i.date,1);case"greaterThanOrEqual":return"lessThanOrEqual"===i.rangeSelectorValue?i.date:(0,Uu.Z)(i.date,1);default:return}}),[i.selectorValue,i.rangeSelectorValue,i.date]),y=(0,r.useMemo)((function(){if(i.date)switch(i.selectorValue){case"lessThan":return(0,Wu.Z)(i.date,1);case"lessThanOrEqual":return"greaterThanOrEqual"===i.rangeSelectorValue?i.date:(0,Wu.Z)(i.date,1);default:return}}),[i.selectorValue,i.rangeSelectorValue,i.date]),h="equal"!==i.selectorValue&&"notEqual"!==i.selectorValue;return r.createElement(q.B0.Cell,ei(ei({},e),{},{style:Pu}),r.createElement(be.Z,{width:"100%"},r.createElement(be.Z,{display:"flex",alignItems:"end",justifyItems:"flex-start"},r.createElement(bt.M,{utils:Ot.Z},r.createElement(q.B0.FilterSelector,{availableValues:Gu,disabled:!t,getMessage:n,iconComponent:Ju,onChange:p,toggleButtonComponent:q.B0.ToggleButton,value:i.selectorValue}),r.createElement(gt.e,ei(ei({},ni),{},{className:o.keyboardDatePicker,disabled:!t,initialFocusedDate:(0,yt.Z)(new Date).toISOString(),onChange:d,value:i.date})))),h&&!!i.date&&r.createElement(be.Z,{display:"flex",alignItems:"center"},r.createElement(bt.M,{utils:Ot.Z},r.createElement(q.B0.FilterSelector,{availableValues:i.availableRangeValues||[],disabled:!t||!h,getMessage:n,iconComponent:Ju,onChange:m,toggleButtonComponent:q.B0.ToggleButton,value:i.rangeSelectorValue||"addRangeBound"}),r.createElement(gt.e,ei(ei({},ni),{},{disabled:!t||!h||!i.rangeSelectorValue,className:o.keyboardDatePicker,initialFocusedDate:(0,yt.Z)(new Date).toISOString(),inputVariant:"standard",maxDate:y,minDate:v,onChange:f,value:i.boundDate}))))))},ui=function(e,t){return{columnName:e,predicate:function(e,n,r){var a=n.value;switch(n.operation){case"equal":return(0,Lu.Z)(e,a);case"notEqual":return!(0,Lu.Z)(e,a);case"greaterThan":return(0,yt.Z)(e)>(0,yt.Z)(a);case"greaterThanOrEqual":return(0,yt.Z)(e)>=(0,yt.Z)(a);case"lessThan":return(0,yt.Z)(e)<(0,yt.Z)(a);case"lessThanOrEqual":return(0,yt.Z)(e)<=(0,yt.Z)(a);default:return B.Eb.defaultPredicate(t(e),n,r)}}}};function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var di=function(e){var t=e.value,n=(0,x.Z)(e,["value"]);return r.createElement(q.cO.Cell,si(si({},n),{},{value:t.name}))},fi=function(e){var t=si(si({},e),{},{InputProps:si(si({},Ou),e.InputProps)});return r.createElement(Yn.Z,si({},t))},pi=function(e){return e.name},mi=function(e){var t=e.deptFilterOpts,n=(0,x.Z)(e,["deptFilterOpts"]),a=e.column.name,o=(0,r.useMemo)((function(){return t||[]}),[t]),l=e.onFilter,u=(0,r.useCallback)((function(e,t){if(t.length){var n,r={operator:"or",filters:[]},o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ii(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ii(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}(t);try{for(o.s();!(n=o.n()).done;){var u=n.value;r.filters.push({operation:"equal",value:u})}}catch(e){o.e(e)}finally{o.f()}l({columnName:a,filters:[r]})}else l(null)}),[a,l]);return r.createElement(q.B0.Cell,si(si({},n),{},{style:wu}),r.createElement(Gn.ZP,si({getOptionLabel:pi,multiple:!0,renderInput:fi,onChange:u,options:o},Cu)))};function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yi(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bi=function(e){switch(e.__typename){case"PaymentMethodCard":switch(e.card.type){case D.Visa:case D.AmericanExpress:case D.MasterCard:case D.Discover:return"".concat(Ma(e.card.type),"-").concat(e.card.trailingDigits);default:return e.card.trailingDigits}case"PaymentMethodCheck":return"CK-".concat(e.check.checkNumber);default:return(0,oa.I)(e.__typename.replace(/^PaymentMethod/i,""))}},gi=function(e){var t=e.value,n=(0,x.Z)(e,["value"]);return r.createElement(q.cO.Cell,hi(hi({},n),{},{value:bi(t)}))},Oi=function(e,t){switch(e.__typename){case"PaymentMethodCash":case"PaymentMethodCombination":case"PaymentMethodOnline":case"PaymentMethodUnknown":return e.__typename===t.__typename;case"PaymentMethodCard":return e.__typename===t.__typename&&e.card.__typename===t.card.__typename&&e.card.type===t.card.type&&e.card.trailingDigits===t.card.trailingDigits;case"PaymentMethodCheck":return e.__typename===t.__typename&&("AccountCheck"===e.check.__typename&&"AccountCheck"===t.check.__typename?e.check.checkNumber===t.check.checkNumber&&e.check.account.id===t.check.account.id:e.check.__typename===t.check.__typename&&e.check.checkNumber===t.check.checkNumber)}},Ei=function(e){var t=e.payMethodFilterOpts,n=(0,x.Z)(e,["payMethodFilterOpts"]),a=(0,r.useState)(null),o=(0,T.Z)(a,2),l=o[0],u=o[1],i=(0,r.useMemo)((function(){var e,n=t||[];if(!l)return(0,A.Z)(n.reduce((function(e,t){switch(t.__typename){case"PaymentMethodCard":case"PaymentMethodCheck":e.has(t.__typename)||e.set(t.__typename,new G.BranchNode(t.__typename));break;default:e.has(t.__typename)||e.set(t.__typename,t)}return e}),new Map).values());var r=l.valueOf();switch(r){case"External":return(0,A.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||"PaymentCard"!==t.card.__typename||e.has(t.card.type)||e.set(t.card.type,new G.BranchNode(t.card.type,l)),e}),new Map).values());case"Internal":return(0,A.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||"AccountCard"!==t.card.__typename||e.has(t.card.type)||e.set(t.card.type,new G.BranchNode(t.card.type,l)),e}),new Map).values());case"PaymentMethodCard":return[new G.BranchNode("Internal",l),new G.BranchNode("External",l)];case"PaymentMethodCheck":return n.reduce((function(e,t){var n=(0,T.Z)(e,1)[0];return"PaymentMethodCheck"===t.__typename&&("AccountCheck"===t.check.__typename?n.accounts.has(t.check.account.id)||n.accounts.set(t.check.account.id,new G.BranchNode({checkingAccountId:t.check.account.id,accountNumber:t.check.account.accountNumber},l)):n.externalChecks.set(t.check.checkNumber,t)),[n]}),[{accounts:new Map,externalChecks:new Map}]).map((function(e){var t=e.accounts,n=e.externalChecks;return[].concat((0,A.Z)(t.values()),(0,A.Z)(n.values()))}))[0];case D.AmericanExpress:case D.Discover:case D.MasterCard:case D.Visa:var a="External"===(null===(e=l.parent)||void 0===e?void 0:e.valueOf())?"PaymentCard":"AccountCard";return(0,A.Z)(n.reduce((function(e,t){return"PaymentMethodCard"!==t.__typename||t.card.type!==r||t.card.__typename!==a||e.has(t.card.trailingDigits)||e.set(t.card.trailingDigits,t),e}),new Map).values());default:var o=r.checkingAccountId;return(0,A.Z)(n.reduce((function(e,t){return"PaymentMethodCheck"!==t.__typename||"AccountCheck"!==t.check.__typename||t.check.account.id!==o||e.has(t.check.checkNumber)||e.set(t.check.checkNumber,t),e}),new Map).values())}}),[l,t]),c=e.column.name,s=e.onFilter,d=(0,r.useCallback)((function(e,t){if(t.length){var n,r={operator:"or",filters:[]},a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.filters.push({operation:"equal",value:o.valueOf()})}}catch(e){a.e(e)}finally{a.f()}s({columnName:c,filters:[r]})}else s(null)}),[c,s]),f=(0,r.useCallback)((function(e,t){return u(t)}),[]),p=(0,r.useCallback)((function(e){var t;if(e instanceof G.BranchNode){var n=e.valueOf();if("string"!=typeof n)return"Acct# ...".concat(null===(t=n.accountNumber)||void 0===t?void 0:t.slice(-4));switch(n){case"PaymentMethodCheck":return"Check";case"PaymentMethodCard":return"Card";case"External":case"Internal":return n;default:return(0,oa.I)(n)}}else{var r=e.valueOf();switch(r.__typename){case"PaymentMethodCard":return"".concat(Ma(r.card.type),"-").concat(r.card.trailingDigits);case"PaymentMethodCheck":return"CK-".concat(r.check.checkNumber);case"PaymentMethodCash":return"Cash";case"PaymentMethodCombination":return"Combination";case"PaymentMethodOnline":return"Online";case"PaymentMethodUnknown":return"Unknown"}}}),[]),m=(0,r.useCallback)((function(e,t){return Oi(e.valueOf(),t.valueOf())}),[]);return r.createElement(q.B0.Cell,hi(hi({},n),{},{style:wu}),r.createElement(H(),hi({onBranchChange:f,branch:l,onChange:d,options:i,multiple:!0,getOptionLabel:p,getOptionSelected:m,renderInput:Eu},Cu)))};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ci=function(e){var t=e.value,n=e.formatter,a=(0,x.Z)(e,["value","formatter"]);return r.createElement(q.cO.Cell,Pi(Pi({},a),{},{value:(null==n?void 0:n.format(t.valueOf()))||t.valueOf()}))},ji=function(e,t,n,r){if("equal"===e||"notEqual"===e)return!1;switch(e){case"greaterThan":return"greaterThan"!==n&&"greaterThanOrEqual"!==n&&r.compare(t)>0;case"greaterThanOrEqual":return"greaterThan"!==n&&"greaterThanOrEqual"!==n&&("lessThanOrEqual"===n?r.compare(t)>=0:r.compare(t)>0);case"lessThan":return"lessThan"!==n&&"lessThanOrEqual"!==n&&t.compare(r)>0;case"lessThanOrEqual":return"lessThan"!==n&&"lessThanOrEqual"!==n&&("greaterThanOrEqual"===n?t.compare(r)>=0:t.compare(r)>0)}},Zi=function(e,t,n,r,a){if(!n)return[null];var o={operator:"and",filters:[{operation:t,value:n}]};return r&&a&&o.filters.push({operation:r,value:a}),[{columnName:e,filters:[o]}]},Si=function(e){var t=e.rationalInputProps,n=(0,x.Z)(e,["rationalInputProps"]),a=e.filteringEnabled,o=e.getMessage,l=e.onFilter,u=e.column.name,i=(0,r.useState)({total:null,boundTotal:null,selectorValue:"equal"}),c=(0,T.Z)(i,2),s=c[0],d=c[1],f=(0,r.useCallback)((function(e,t){if(t&&s.rangeSelectorValue&&s.boundTotal&&!ji(s.selectorValue,t,s.rangeSelectorValue,s.boundTotal)){var n=Qu(s.selectorValue);d((function(e){return Pi(Pi({},e),{},{total:t,boundTotal:null,rangeSelectorValue:void 0,availableRangeValues:n})}))}else d((function(e){return Pi(Pi({},e),{},{total:t})}));l.apply(void 0,(0,A.Z)(Zi(u,s.selectorValue,t,s.rangeSelectorValue,s.boundTotal)))}),[u,l,d,s.selectorValue,s.rangeSelectorValue,s.boundTotal]),p=(0,r.useCallback)((function(e,t){d((function(e){return Pi(Pi({},e),{},{boundTotal:t,rangeSelectorValue:t?e.rangeSelectorValue:void 0})})),l.apply(void 0,(0,A.Z)(Zi(u,s.selectorValue,s.total,s.rangeSelectorValue,t)))}),[d,s.selectorValue,s.total,s.rangeSelectorValue,u,l]),m=(0,r.useCallback)((function(e){var t=Qu(e);if(s.total&&s.rangeSelectorValue&&s.boundTotal&&!ji(e,s.total,s.rangeSelectorValue,s.boundTotal))d((function(n){return Pi(Pi({},n),{},{selectorValue:e,boundTotal:null,rangeSelectorValue:void 0,availableRangeValues:t})}));else switch(e){case"greaterThan":case"greaterThanOrEqual":d((function(n){return Pi(Pi({},n),{},{selectorValue:e,availableRangeValues:t})}));break;case"lessThan":case"lessThanOrEqual":d((function(n){return Pi(Pi({},n),{},{selectorValue:e,availableRangeValues:t})}));break;default:d((function(n){return Pi(Pi({},n),{},{selectorValue:e,boundTotal:null,rangeSelectorValue:void 0,availableRangeValues:t})}))}l.apply(void 0,(0,A.Z)(Zi(u,e,s.total,s.rangeSelectorValue,s.boundTotal)))}),[d,s.total,s.rangeSelectorValue,s.boundTotal,u,l]),v=(0,r.useCallback)((function(e){s.total&&s.boundTotal&&!ji(s.selectorValue,s.total,e,s.boundTotal)?d((function(t){return Pi(Pi({},t),{},{rangeSelectorValue:e,boundTotal:null})})):d((function(t){return Pi(Pi({},t),{},{rangeSelectorValue:e})})),l.apply(void 0,(0,A.Z)(Zi(u,s.selectorValue,s.total,e,s.boundTotal)))}),[d,s.total,s.boundTotal,s.selectorValue,u,l]),y="equal"!==s.selectorValue&&"notEqual"!==s.selectorValue,h=(0,r.useMemo)((function(){return t?Pi(Pi({},t),{},{InputProps:Pi(Pi({},Ou),t.InputProps||{})}):{InputProps:Ou}}),[t]);return r.createElement(q.B0.Cell,Pi(Pi({},n),{},{style:Pu}),r.createElement(be.Z,{width:"100%"},r.createElement(be.Z,{display:"flex",alignItems:"center"},r.createElement(q.B0.FilterSelector,{availableValues:Gu,disabled:!a,getMessage:o,iconComponent:Ju,onChange:m,toggleButtonComponent:q.B0.ToggleButton,value:s.selectorValue}),r.createElement(Ga,Pi({disabled:!a,fullWidth:!0,onChange:f,size:"small"},h))),y&&!!s.total&&r.createElement(be.Z,{display:"flex",alignItems:"center"},r.createElement(q.B0.FilterSelector,{availableValues:s.availableRangeValues||[],disabled:!a||!y,getMessage:o,iconComponent:Ju,onChange:v,toggleButtonComponent:q.B0.ToggleButton,value:s.rangeSelectorValue||"addRangeBound"}),r.createElement(Ga,Pi({disabled:!a||!y||!s.rangeSelectorValue,fullWidth:!0,onChange:p,size:"small"},h||{})))))};function ki(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Di(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function Di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _i=function(e){switch(e.__typename){case"Business":case"Department":return e.name;case"Person":return"".concat(e.personName.first," ").concat(e.personName.last)}},Vi=function(e){var t=e.value,n=(0,x.Z)(e,["value"]);return r.createElement(q.cO.Cell,Mi(Mi({},n),{},{value:_i(t)}))},Ri=function(e){var t=e.valueOf();if("string"==typeof t)return t;if("Person"===(null==t?void 0:t.__typename)){var n=t.personName,r=n.first,a=n.last;return"".concat(r," ").concat(a)}return Rr(e)},Ni=function(e,t){var n=e.valueOf(),r=t.valueOf();return"string"==typeof n||"string"==typeof r?n===r:Nr(e,t)},xi=function(e){var t=e.srcFilterOpts,n=(0,x.Z)(e,["srcFilterOpts"]),a=e.onFilter,o=e.column.name,l=(0,r.useState)({}),u=(0,T.Z)(l,2),i=u[0],c=u[1],s=(0,r.useMemo)((function(){if(t){if(i.branch){var e=i.branch.valueOf();return t.filter((function(t){return t.__typename===e}))}var n,r=new Set,a=ki(t);try{for(a.s();!(n=a.n()).done;){var o=n.value.__typename;if(r.add(o),3===r.size)break}}catch(e){a.e(e)}finally{a.f()}return 1===r.size?t:(0,A.Z)(r.values()).map((function(e){return new G.BranchNode(e)}))}return[]}),[t,i.branch]),d=(0,r.useCallback)((function(e,t){c((function(e){return Mi(Mi({},e),{},{branch:t})}))}),[c]),f=(0,r.useCallback)((function(e,t){if(t.length){var n,r={operator:"or",filters:[]},l=ki(t);try{for(l.s();!(n=l.n()).done;){var u=n.value;r.filters.push({operation:"equal",value:u.valueOf()})}}catch(e){l.e(e)}finally{l.f()}a({columnName:o,filters:[r]})}else a(null)}),[a,o]),p=(0,r.useCallback)((function(e){return(0,G.defaultInput)(Mi(Mi({},e),{},{InputProps:Mi(Mi({},e.InputProps||{}),Ou)}))}),[]);return r.createElement(q.B0.Cell,Mi(Mi({},n),{},{style:wu}),r.createElement(H(),Mi({getOptionLabel:Ri,getOptionSelected:Ni,onBranchChange:d,multiple:!0,onChange:f,options:s,renderInput:p},Cu)))};function Ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ai={paddingRight:"8px"},Fi={margin:"dense"},Bi=function(e){e.getMessage;var t=e.value,n=e.onChange,a=(0,x.Z)(e,["getMessage","value","onChange"]),o=(0,r.useCallback)((function(e){var t;n(null!==(t=e.target.value)&&void 0!==t?t:"")}),[n]);return r.createElement(Yn.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ti(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({size:"small",fullWidth:!0,InputProps:Fi,onChange:o,style:Ai,value:null!=t?t:""},a))},qi=[{name:"SummaryState",optional:!1},{name:"IntegratedSummary",optional:!1}],Ui=function(e){var t=e.title;return r.createElement(je.Sy,{name:"GridTitle",dependencies:qi},r.createElement(je.YS,{name:"toolbarContent"},r.createElement(je.eT,null,(function(e){var n=e.totalSummaryValues[e.totalSummaryItems.findIndex((function(e){var t=e.type;return"total"===e.columnName&&"totalAggregate"===t}))];return r.createElement(r.Fragment,null,r.createElement(lt.Z,{variant:"h6"},t?"".concat(t,": ").concat(n):n),r.createElement(je.jf,null))}))))},Wi=n(1860),Li=n(8513),$i=n(9805),zi={vertical:"top",horizontal:"right"},Yi={vertical:"top",horizontal:"right"},Gi=[{name:"EntryActionState",optional:!1}],Hi=function(){var e=(0,r.useState)(null),t=(0,T.Z)(e,2),n=t[0],a=t[1],o=(0,r.useState)(!1),l=(0,T.Z)(o,2),u=l[0],i=l[1];return r.createElement(je.Sy,{name:"GridMenu",dependencies:Gi},r.createElement(je.YS,{name:"toolbarContent"},r.createElement(je.jf,null),r.createElement(je.eT,null,(0,r.useCallback)((function(e,t){var o=e.reconcileMode,l=t.changeReconcileMode;return r.createElement(r.Fragment,null,r.createElement(We.Z,{ref:a,onClick:function(){i(!0)},edge:"end"},r.createElement(Li.Z,null)),r.createElement(Le.Z,{anchorEl:n,open:u,anchorOrigin:zi,transformOrigin:Yi,onClose:function(){i(!1)}},r.createElement($e.Z,{style:{minWidth:"300px"},button:!1},r.createElement(ze.Z,null,r.createElement($i.Z,null)),r.createElement(Ye.Z,{primary:"Reconcile Mode"}),r.createElement(Wi.Z,null,r.createElement(eo.Z,{checked:o,edge:"end",onChange:function(e,t){l(t)}})))))}),[n,u]))))};function Ki(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ji(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ec,tc=function(e){return r.createElement(q.rj.Root,Xi(Xi({},e),{},{style:{height:"100%"}}))},nc=function(e){return e.id},rc=(0,L.Z)({creditCell:{color:U.Z[900]},debitCell:{color:W.Z[900]},paper:{height:"100vh"}}),ac={locales:"en-US",options:{month:"short",day:"2-digit",year:"numeric"}},oc=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric"}),lc=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),uc=[{name:"date",title:"Date",getCellValue:function(e){return(null==e?void 0:e.date)||null}},{name:"dateOfRecord",title:"Date of Record",getCellValue:function(e){var t;return(null===(t=null==e?void 0:e.dateOfRecord)||void 0===t?void 0:t.date)||(null==e?void 0:e.date)||null}},{name:"department",title:"Department"},{name:"category",title:"Category"},{name:"paymentMethod",title:"Payment Method"},{name:"description",title:"Description"},{name:"total",title:"Total",getCellValue:function(e){return(null==e?void 0:e.total)||null}},{name:"source",title:"Source"},{name:"reconciled",title:"Reconciled"}],ic=function(e,t,n){return"totalAggregate"===e?lc.format(t.reduce((function(e,t){return"EntryRefund"===t.__typename?t.category.type===k.Credit?e.sub(n(t)):e.add(n(t)):t.category.type===k.Credit?e.add(n(t)):e.sub(n(t))}),new(Y())(0)).valueOf()):B.Y5.defaultCalculator(e,t,n)},cc={totalAggregate:"Balance",count:"Transactions"},sc=[{columnName:"total",type:"count"},{columnName:"total",type:"totalAggregate"}],dc=[{columnName:"id",width:"50px"},{columnName:"date",width:"135px"},{columnName:"dateOfRecord",width:"135px"},{columnName:"type",width:"85px"},{columnName:"department",width:"180px"},{columnName:"category",width:"180px"},{columnName:"paymentMethod",width:"135px"},{columnName:"description",width:"300px"},{columnName:"total",width:"175px"},{columnName:"source",width:"180px"},{columnName:"reconciled",width:"135px"}],fc=function(e,t){var n=t.reduce((function(e,t){return e.set(t.columnName,t)}),new Map),r=e.filter((function(e){return!!n.has(e.columnName)&&(n.delete(e.columnName),!0)}));return r.push.apply(r,(0,A.Z)(n.values())),r},pc=uc.map((function(e){return e.name})),mc=[{columnName:"dateOfRecord",direction:"asc"}],vc=[{columnName:"total",compare:function(e,t){return e.compare(t)}},{columnName:"date",compare:$.Z},{columnName:"dateOfRecord",compare:$.Z},{columnName:"dateOfRecord",compare:$.Z}],yc=new Intl.DateTimeFormat(null==ac?void 0:ac.locales,null==ac?void 0:ac.options),hc=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),bc=[ui("date",(function(e){return yc.format(e)})),ui("dateOfRecord",(function(e){return yc.format(e)})),("category",ec=function(e){return Xr(new G.ValueNode(e))},{columnName:"category",predicate:function(e,t,n){var r=t.value;switch(t.operation){case"equal":return Tu(r)?r===e.type||"EntryRefund"===n.__typename:ea(new G.ValueNode(e),new G.ValueNode(r));case"notEqual":return Tu(r)?r!==e.type&&"Entry"===n.__typename:!ea(new G.ValueNode(e),new G.ValueNode(r));default:return B.Eb.defaultPredicate(ec(e),t,n)}}}),{columnName:"department",predicate:function(e,t,n){switch(t.operation){case"equal":return t.value.id===e.id;case"notEqual":return t.value.id!==e.id;default:return B.Eb.defaultPredicate(function(e){return e.name}(e),t,n)}}},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:bi;return{columnName:e,predicate:function(e,n,r){switch(n.operation){case"equal":case"notEqual":return Oi(n.value,e);default:return B.Eb.defaultPredicate(t(e),n,r)}}}}("paymentMethod"),{columnName:"total",predicate:function(e,t,n){var r=t.value;switch(t.operation){case"equal":return e.equals(r);case"notEqual":return!e.equals(r);case"greaterThan":return e.compare(r)>0;case"greaterThanOrEqual":return e.compare(r)>=0;case"lessThan":return e.compare(r)<0;case"lessThanOrEqual":return e.compare(r)<=0;default:return B.Eb.defaultPredicate(function(e){return"".concat(e.toString()," ").concat(hc.format(e.valueOf()))}(e),t,n)}}},function(e,t){return{columnName:"source",predicate:function(e,n,r){switch(n.operation){case"equal":var a=n.value;return a.__typename===e.__typename&&a.id===e.id;case"notEqual":var o=n.value;return o.__typename!==e.__typename||o.id!==e.id;default:return B.Eb.defaultPredicate(t(e),n,r)}}}}(0,_i)];const gc=function(e){var t=rc(),n=(0,r.useMemo)((function(){return{where:e.where}}),[e.where]),a=(0,r.useMemo)((function(){var t;return null!==(t=e.layoutCacheKey)&&void 0!==t?t:"".concat(Q()(JSON.stringify(e.where)))}),[e.where,e.layoutCacheKey]),o=(0,N.a)(ve,{variables:n}),l=o.loading,u=o.error,i=o.data,c=(0,r.useMemo)((function(){return(null==i?void 0:i.entries)?i.entries.reduce((function(e,t){if(t.deleted)return e;var n=Xi(Xi({},t),{},{date:te(t.date),dateOfRecord:t.dateOfRecord?Xi(Xi({},t.dateOfRecord),{},{date:te(t.dateOfRecord.date)}):void 0,total:X(t.total),refunds:t.refunds.map((function(e){return Xi(Xi({},e),{},{date:te(e.date),total:X(e.total)})}))});if(e.push(n),n.refunds.length>0){var r,a=Ki(n.refunds);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(!o.deleted){var l=Xi(Xi(Xi({},n),o),{},{entryId:n.id});e.push(l)}}}catch(e){a.e(e)}finally{a.f()}}return e}),[]):[]}),[null==i?void 0:i.entries]),s=(0,r.useMemo)((function(){var e,t=new Map,n=[],r=new Map,a=new Map,o=Ki(c);try{for(o.s();!(e=o.n()).done;){var l=e.value,u=l.department,i=l.category,s=l.source,d=l.paymentMethod;t.has(u.id)||t.set(u.id,u),n.push(d),r.has(i.id)||r.set(i.id,i);var f="".concat(s.__typename,"_").concat(s.id);a.has(f)||a.set(f,s)}}catch(e){o.e(e)}finally{o.f()}return{category:{cell:Bu,props:{categoryFilterOpts:(0,A.Z)(r.values())}},date:{cell:li},dateOfRecord:{cell:li},department:{cell:mi,props:{deptFilterOpts:(0,A.Z)(t.values())}},paymentMethod:{cell:Ei,props:{payMethodFilterOpts:n}},reconciled:{cell:Mu,props:{boolLabels:{trueLabel:"Reconciled",falseLabel:"Unreconciled"}}},source:{cell:xi,props:{srcFilterOpts:(0,A.Z)(a.values())}},total:{cell:Si,props:{rationalInputProps:{InputProps:{startAdornment:"$"}}}}}}),[c]),d=Ce({defaultValue:pc,cacheKey:"column_order_".concat(a)}),f=(0,T.Z)(d,2),p=f[0],m=f[1],v=Ce({defaultValue:dc,cacheKey:"column_widths_".concat(a),cacheUpdater:fc}),y=(0,T.Z)(v,2),h=y[0],b=y[1],g=Ce({defaultValue:[],cacheKey:"column_visibility_".concat(a)}),O=(0,T.Z)(g,2),E=O[0],w=O[1],P=Ce({defaultValue:mc,cacheKey:"column_visibility_sorting".concat(a)}),C=(0,T.Z)(P,2),j=C[0],Z=C[1],S=(0,r.useState)([]),D=(0,T.Z)(S,2),I=D[0],M=D[1],_=(0,r.useCallback)((function(e){var n=e.className,r=void 0===n?"":n,a=e.row,o=(0,x.Z)(e,["className","row"]),l="EntryRefund"===a.__typename?a.category.type===k.Credit?t.debitCell:t.creditCell:a.category.type===k.Credit?t.creditCell:t.debitCell;return Xi({className:"".concat(r," ").concat(l).trim(),row:a},o)}),[t.creditCell,t.debitCell]),V=(0,r.useMemo)((function(){return{date:{cell:ti,props:function(e){return _(Xi(Xi({},e),{},{formatter:oc}))}},dateOfRecord:{cell:ti,props:function(e){return _(Xi(Xi({},e),{},{formatter:oc}))}},department:{cell:di,props:_},category:{cell:Nu,props:_},paymentMethod:{cell:gi,props:_},description:{props:_},total:{cell:Ci,props:function(e){return _(Xi(Xi({},e),{},{formatter:lc}))}},source:{cell:Vi,props:_},reconciled:{cell:ku,props:_}}}),[_]),R=(0,r.useMemo)((function(){return[{dialogProps:Co,entryProps:{paymentMethod:{accounts:e.selectableAccounts},department:{root:e.selectableDepts}},refetchQueries:{onNewEntry:[{query:ve,variables:n}]}},{dialogProps:Co,refundProps:{paymentMethod:{accounts:e.selectableAccounts}}},{keepMounted:!1,maxWidth:"sm",fullWidth:!0},{dialogProps:{keepMounted:!1,maxWidth:"sm",fullWidth:!0}}]}),[e.selectableAccounts,e.selectableDepts,n]),U=(0,T.Z)(R,4),W=U[0],L=U[1],$=U[2],z=U[3];return u?r.createElement("div",null,u.message):r.createElement(F.Z,{className:t.paper},r.createElement(q.rj,{columns:uc,rows:c,getRowId:nc,rootComponent:tc},r.createElement(q.wz,null),r.createElement(uu,{reconcileMode:e.reconcileMode,upsertEntryProps:W,upsertRefundProps:L,deleteEntryProps:$,reconcileEntriesProps:z}),r.createElement(B.po,null),r.createElement(_e,{filters:I,onFiltersChange:M}),r.createElement(B.tU,{sorting:j,onSortingChange:Z}),r.createElement(B.RX,{totalItems:sc}),r.createElement(B.Eb,{columnExtensions:bc}),r.createElement(B.Y5,{calculator:ic}),r.createElement(B.qf,{columnExtensions:vc}),r.createElement(q.dV,{height:"auto",cellComponent:Fe}),r.createElement(q.ad,{columnWidths:h,onColumnWidthsChange:b}),r.createElement(q.nM,{order:p,onOrderChange:m}),r.createElement(q.KA,{showSortingControls:!0}),r.createElement(q.B0,{showFilterSelector:!0,cellComponent:Be,editorComponent:Bi}),r.createElement(Te,Xi({},V)),r.createElement(Ae,Xi({},s)),r.createElement(q.W3,{hiddenColumnNames:E,onHiddenColumnNamesChange:w}),r.createElement(q.o8,null),r.createElement(Ui,{title:e.title}),r.createElement(q.EG,null),r.createElement(q.kU,null),r.createElement(q.RA,{messages:cc}),r.createElement(yu,null),r.createElement(Hi,null)),(l||!!e.loading)&&r.createElement(Pe,{zIndex:"modal"}))};var Oc=n(3832),Ec=n(3957),wc=n(4122),Pc=n(8463),Cc=n(4697),jc=n(9912),Zc=n(2077),Sc=n.n(Zc),kc=n(9546),Dc=n(8105),Ic=n(6394),Mc=n(110);function _c(){var e=(0,_.Z)(["\n  subscription EntryUpdated_2 {\n    entryUpdated {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return _c=function(){return e},e}function Vc(){var e=(0,_.Z)(["\n  subscription EntryAdded_2 {\n    entryAdded {\n      ...GetReportDataEntry_1Fragment\n    }\n  }\n  ","\n"]);return Vc=function(){return e},e}function Rc(){var e=(0,_.Z)(["\n  query GetReportData($deptId:ID!, $where:EntriesWhere!) {\n    department(id:$deptId) {\n      ...GetReportDataDept_1Fragment\n      descendants {\n        ...GetReportDataDept_1Fragment\n      }\n    }\n    entries(where:$where) {\n      ...GetReportDataEntry_1Fragment\n    }\n    fiscalYears {\n      __typename\n      id\n      name\n      begin\n      end\n    }\n  }\n  ",",\n  ","\n"]);return Rc=function(){return e},e}function Nc(){var e=(0,_.Z)(["\n  fragment GetReportDataEntry_1Fragment on Entry {\n    id\n    __typename\n    category {\n      __typename\n      id\n      name\n      type\n    }\n    total\n    fiscalYear {\n      __typename\n      id\n    }\n    department {\n      __typename\n      id\n      ancestors {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n    }\n    refunds {\n      __typename\n      id\n      total\n      deleted\n      lastUpdate\n    }\n    items {\n      __typename\n      id\n      total\n      department {\n        __typename\n        id\n      }\n      deleted\n    }\n    lastUpdate\n    deleted\n  }\n"]);return Nc=function(){return e},e}function xc(){var e=(0,_.Z)(["\n  fragment GetReportDataDept_1Fragment on Department {\n    __typename\n    id\n    name\n    budgets {\n      id\n      __typename\n      amount\n      fiscalYear {\n        __typename\n        id\n      }\n    }\n  }\n"]);return xc=function(){return e},e}var Tc=(0,R.ZP)(xc()),Ac=(0,R.ZP)(Nc()),Fc=(0,R.ZP)(Rc(),Tc,Ac);function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Uc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Wc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function Wc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lc(){var e=(0,_.Z)(["\n  subscription OnEntryUpsert_2 {\n    entryUpserted {\n      ...GetReportDataEntry_1Fragment\n      department {\n        ancestors {\n          ... on Department {\n            __typename\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Lc=function(){return e},e}(0,R.ZP)(Vc(),Ac),(0,R.ZP)(_c(),Ac);var $c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:800;return e<.75?U.Z[t]:e<.9?kc.Z[t]:W.Z[t]},zc=function(e){var t=e.spentPercentage,n=e.height;return r.createElement(be.Z,{height:n,bgcolor:$c(t),display:"flex",justifyContent:"flex-start"},r.createElement(be.Z,{height:"100%",width:"".concat(100*t,"%"),bgcolor:Dc.Z[400]}))},Yc=(0,R.ZP)(Lc(),Ac);const Gc=function(e){var t,n=e.deptId,a=e.selectableAccounts,o=e.selectableDepts,l=(0,r.useState)(!1),i=(0,T.Z)(l,2),c=i[0],s=i[1],d=(0,r.useMemo)((function(){return{deptId:n,where:{department:{id:{lte:n}},deleted:!1}}}),[n]),f=(0,N.a)(Fc,{variables:d,fetchPolicy:"cache-and-network"}),p=f.loading,m=f.error,v=f.data,y=f.subscribeToMore,h=p&&!(null==v?void 0:v.entries);(0,r.useEffect)((function(){return y({document:Yc,updateQuery:function(e,t){var r=t.subscriptionData;if(!r.data)return e;var a=r.data.entryUpserted,o=a.department.ancestors;if(n&&a.department.id!==n&&o.every((function(e){return"Department"===e.__typename&&e.id!==n}))){var l=e.entries.filter((function(e){return e.id!==a.id}));return l.length===e.entries.length?e:Object.assign({},e,{entries:l})}return e.entries.some((function(e){return e.id===a.id}))?e:Object.assign({},e,{entries:[a].concat((0,A.Z)(e.entries))})}})}),[n,y]);var b=(0,r.useState)(new Date((new Date).toDateString())),g=(0,T.Z)(b,2),O=g[0],E=g[1],w=(0,r.useMemo)((function(){var e,t=Uc((null==v?void 0:v.fiscalYears)||[]);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(O>=new Date(n.begin)&&O<new Date(n.end))return n}}catch(e){t.e(e)}finally{t.f()}return null}),[O,v]),P=(0,r.useMemo)((function(){return((null==v?void 0:v.entries)||[]).filter((function(e){return!e.deleted&&(null==w?void 0:w.id)===e.fiscalYear.id}))}),[v,w]),C=(null===(t=null==v?void 0:v.department)||void 0===t?void 0:t.name)||"";(0,r.useEffect)((function(){document.title=C}),[C]);var j=(null==v?void 0:v.department)||null,Z=(0,r.useMemo)((function(){var e,t=new Map,n=new(Y())(0),r=new(Y())(0),a=[];j&&function(){var r=new Set;a.push.apply(a,[j].concat((0,A.Z)(j.descendants)));var o,l=Uc(a);try{for(l.s();!(o=l.n()).done;){var u=o.value,i=null!==(e=u.budgets.find((function(e){return e.fiscalYear.id===(null==w?void 0:w.id)&&!r.has(e.id)})))&&void 0!==e?e:null,c=null;if(i){var s=i.amount;r.add(i.id),c=X(s),n=n.add(c)}t.set(u.id,{name:u.name,spent:new(Y())(0),budget:c})}}catch(e){l.e(e)}finally{l.f()}}();var o,l=Uc(P);try{for(l.s();!(o=l.n()).done;){var u=o.value;if(!u.deleted){var i,c=t.get(u.department.id),s=X(u.total),d=Uc(u.refunds);try{for(d.s();!(i=d.n()).done;){var f=i.value;f.deleted||(s=s.sub(X(f.total)))}}catch(e){d.e(e)}finally{d.f()}if(j){var p,m=Uc(u.items);try{var v=function(){var e=p.value;if(e.deleted||!e.department||a.some((function(t){var n;return t.id===(null===(n=e.department)||void 0===n?void 0:n.id)})))return"continue";s=s.sub(X(e.total))};for(m.s();!(p=m.n()).done;)v()}catch(e){m.e(e)}finally{m.f()}}u.category.type===k.Credit?(r=r.sub(s),c.spent=c.spent.sub(s)):(r=r.add(s),c.spent=c.spent.add(s))}}}catch(e){l.e(e)}finally{l.f()}return{totalRemaining:Sc()(n.sub(r).valueOf()).format("$0,0.00"),budget:Sc()(n.valueOf()).format("$0,0.00"),spentToBudgetRatio:0===n.n?1:r.div(n).valueOf(),deptReports:t,uBudget:n}}),[j,null==w?void 0:w.id,P]),S=Z.totalRemaining,D=Z.budget,I=Z.spentToBudgetRatio,M=Z.deptReports,_=Z.uBudget,V=(0,r.useMemo)((function(){var e,t=[],n=Uc(M);try{var a=function(){var n=(0,T.Z)(e.value,2),a=n[0],o=n[1],l=o.budget,u=o.spent,i=o.name;if(a===(null==j?void 0:j.id)&&(!l||l.equals(_)))return"continue";var c=r.createElement(rt.Z,{key:a,item:!0,xs:12,md:4,lg:3},r.createElement(Pc.Z,null,r.createElement(Cc.Z,{titleTypographyProps:{noWrap:!0},title:i}),r.createElement(jc.Z,null,function(){if(null===l||0===l.n)return r.createElement(be.Z,{color:u.compare(new(Y())(0))>0?W.Z[900]:U.Z[900],clone:!0},r.createElement(lt.Z,{variant:"h6"},"Spent: ".concat(Sc()(u.abs().valueOf()).format("$0,0.00"))));var e=l.sub(u),t=u.div(l).valueOf();return r.createElement(r.Fragment,null,r.createElement(be.Z,{color:$c(t,900),clone:!0},r.createElement(lt.Z,{variant:"h6"},"".concat(Sc()(e.valueOf()).format("$0,0.00")," Remaining"))),r.createElement(lt.Z,{variant:"body1"},"of ".concat(Sc()(l.valueOf()).format("$0,0.00"))),r.createElement(zc,{spentPercentage:t,height:5}))}())));t.push(c)};for(n.s();!(e=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}return t}),[M,j,_]),R=(0,r.useCallback)((function(){return s(!0)}),[s]),x=(0,r.useMemo)((function(){return r.createElement(be.Z,{minWidth:120,clone:!0},r.createElement(Qa.Z,{variant:"outlined"},r.createElement(Ic.Z,null,"Fiscal Year"),r.createElement(Mc.Z,{label:"Fiscal Year<",variant:"outlined",value:(null==w?void 0:w.id)||"",onChange:function(e){var t=e.target.value;if(t){var n,r=Uc((null==v?void 0:v.fiscalYears)||[]);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.id===t)return void E(new Date(a.begin))}}catch(e){r.e(e)}finally{r.f()}}}},(0,A.Z)((null==v?void 0:v.fiscalYears)||[]).sort((function(e,t){return new Date(e.begin).getTime()-new Date(t.begin).getTime()})).map((function(e){return r.createElement($e.Z,{key:e.id,value:e.id},e.name)})))))}),[v,E,w]),F=(0,r.useMemo)((function(){return{dialogProps:qc(qc({},Co),{},{open:c,onClose:function(){return s(!1)}}),entryProps:{paymentMethod:{accounts:a},department:{root:o}},refetchQueries:{onNewEntry:[{query:Fc,variables:d}]}}}),[c,a,o,d]);return h?r.createElement("p",null,"Loading..."):m?(console.error(m),r.createElement("p",null,m.message)):r.createElement(be.Z,{display:"flex",flexDirection:"column",overflow:"hidden",clone:!0},r.createElement(Oc.Z,null,r.createElement(be.Z,{padding:8},r.createElement(rt.Z,{container:!0,alignItems:"center",justify:"center",spacing:4},r.createElement(rt.Z,{item:!0},r.createElement(it.Z,{variant:"contained",color:"secondary",startIcon:r.createElement(Ec.Z,null),onClick:R},"New Entry")),r.createElement(rt.Z,{item:!0},r.createElement(it.Z,{disabled:!w,component:u.rU,to:"/journal/".concat(n,"/").concat((null==w?void 0:w.id)||"","/reconcile"),variant:"contained",startIcon:r.createElement($i.Z,null)},"Reconcile")),r.createElement(rt.Z,{item:!0},r.createElement(it.Z,{disabled:!w,component:u.rU,to:"/journal/".concat(n,"/").concat((null==w?void 0:w.id)||""),variant:"contained",startIcon:r.createElement(wc.Z,null)},"Journal")),r.createElement(rt.Z,{item:!0},x))),r.createElement(be.Z,{flexGrow:1,overflow:"auto"},r.createElement(rt.Z,{justify:"center",container:!0,spacing:2},r.createElement(rt.Z,{item:!0,xs:12},r.createElement(lt.Z,{align:"center",variant:"h3"},C),r.createElement(be.Z,{color:$c(I.valueOf())},r.createElement(lt.Z,{align:"center",variant:"h4"},"".concat(S," Remaining"))),r.createElement(lt.Z,{align:"center",variant:"subtitle1"},"of ".concat(D)),r.createElement(zc,{spentPercentage:I.valueOf(),height:10})),V)),r.createElement(yl,qc({},F))))};function Hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qc(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Jc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function Jc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xc(){var e=(0,_.Z)(["\n  query DeptsForNav_1 {\n    departments {\n      __typename\n      id\n      name\n      parent {\n        __typename\n        ... on Business {\n          id\n        }\n        ... on Department {\n          id\n        }\n      }\n      virtualRoot\n    }\n  }\n"]);return Xc=function(){return e},e}var es=(0,R.ZP)(Xc());const ts=function(e){var t=(0,N.a)(es),n=t.loading,a=t.error,o=t.data,l=(0,r.useState)(""),i=(0,T.Z)(l,2),c=i[0],s=i[1],d=(0,r.useMemo)((function(){return(null==o?void 0:o.departments)||[]}),[null==o?void 0:o.departments]),f=(0,r.useMemo)((function(){var e,t=[],n=new Set,r=Qc(d);try{for(r.s();!(e=r.n()).done;){var a=e.value;"Business"===a.parent.__typename&&t.push(a),a.virtualRoot&&n.add(a.id)}}catch(e){r.e(e)}finally{r.f()}return{rootDepts:t,virtualRoots:n}}),[d]),p=f.rootDepts,m=f.virtualRoots,v=(0,r.useMemo)((function(){var e=[];if(c&&m.has(c)){var t,n=Qc(d);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parent.id===c&&e.push(r)}}catch(e){n.e(e)}finally{n.f()}}return e}),[m,c,d]);(0,r.useEffect)((function(){document.title="Select Department"}));var y=(0,r.useCallback)((function(e){var t;s((null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||"")}),[s]);if(n)return r.createElement("p",null,"Loading...");if(a)return r.createElement("p",null,a.message);var h=v.length>0;return r.createElement(be.Z,{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",clone:!0},r.createElement(Oc.Z,{style:{display:"flex"}},r.createElement(be.Z,{padding:4,clone:!0},r.createElement(lt.Z,{align:"center",color:"primary",variant:"h3"},"Select Department")),r.createElement(be.Z,{minWidth:"250px !important",clone:!0},r.createElement(Qa.Z,{variant:"filled"},r.createElement(Ic.Z,null,"Department"),r.createElement(Mc.Z,{value:c,onChange:y,autoWidth:!0},p.map((function(e){var t=e.virtualRoot?{value:e.id,children:e.name}:{component:u.rU,to:"/department/".concat(e.id),value:e.id,children:e.name};return r.createElement($e.Z,Kc({key:e.id},t))}))))),h&&r.createElement(be.Z,{pt:2},r.createElement(be.Z,{pt:2,minWidth:"250px !important",clone:!0},r.createElement(Qa.Z,{variant:"filled"},r.createElement(Ic.Z,null,"Sub Department"),r.createElement(Mc.Z,{autoWidth:!0},v.map((function(e){var t={component:u.rU,to:"/department/".concat(e.id),value:e.id,children:e.name};return r.createElement($e.Z,Kc({key:e.id},t))}))))))))};function ns(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ns(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function as(){var e=(0,_.Z)(["\n  query DepartmentName($id: ID!) {\n    department(id: $id) {\n      __typename\n      id\n      name\n    }\n  }\n"]);return as=function(){return e},e}var os=function(e){var t=(0,r.useMemo)((function(){return{id:{eq:e.match.params.id}}}),[e.match.params.id]),n=(0,r.useMemo)((function(){return{}}),[]);return e.match.params.id?r.createElement(Gc,{selectableDepts:t,selectableAccounts:n,deptId:e.match.params.id}):r.createElement("div",null,"Error: No Dept ID!")},ls=(0,R.Ps)(as()),us=function(e){var t,n=(0,r.useMemo)((function(){return{department:{id:{lte:e.match.params.id}},fiscalYear:{id:{eq:e.match.params.fiscalYear}},deleted:!1}}),[e.match.params.id,e.match.params.fiscalYear]),a=(0,r.useMemo)((function(){return{id:{eq:e.match.params.id}}}),[e.match.params.id]),o=(0,r.useMemo)((function(){return{}}),[]),l=(0,N.a)(ls,(0,r.useMemo)((function(){return{skip:!e.match.params.id,variables:{id:e.match.params.id}}}),[e.match.params.id])),u=l.loading,i=l.error,c=l.data;return i?r.createElement(lt.Z,{color:"error"},i.message):r.createElement(gc,{title:null===(t=null==c?void 0:c.department)||void 0===t?void 0:t.name,reconcileMode:e.reconcileMode,loading:u,where:n,selectableDepts:a,selectableAccounts:o})},is=function(e){return r.createElement(us,rs(rs({},e),{},{reconcileMode:!0}))};const cs=function(){return r.createElement(V.rs,null,r.createElement(V.AW,{exact:!0,path:"/",component:ts}),r.createElement(V.AW,{exact:!0,path:"/department/:id",component:os}),r.createElement(V.AW,{exact:!0,path:"/journal/:id/:fiscalYear/",component:us}),r.createElement(V.AW,{exact:!0,path:"/journal/:id/:fiscalYear/reconcile",component:is}))};a.render(r.createElement((function(){return r.createElement(r.Fragment,null,r.createElement(l.ZP,null),r.createElement(o.e,{client:P},r.createElement(u.VK,null,r.createElement(cs,null))))}),null),document.getElementById("root"))}},e=>{e.O(0,[382],(()=>(6057,e(e.s=6057)))),e.O()}]);
//# sourceMappingURL=main.12f11379370fe303bc4d.js.map