type FiscalYear {
  id: ID!
  name: String!
  begin: Date!
  end: Date!
  archived: Boolean
  archivedAt: Date
  archivedBy: AuthUser
}

input FiscalYearsWhere {
  # Fields
  id: WhereId
  name: WhereRegex
  """
  A FiscalYear is the set of all dates in the interval [begin, end).
    eq: A fiscal year that contains the date.
    ne: Any fiscal year that does NOT contain the date.
    gt: Any fiscal year that begins after the date.
    gte: Any fiscal year that contains the date or begins after the date.
    lt: Any fiscal year that ends on or before the date.
    lte: Any fiscal year that contains the date or ends on or before the date.
  """
  date: WhereDate
  archived: Boolean

  # Logic
  and: [FiscalYearsWhere!]
  or: [FiscalYearsWhere!]
  nor: [FiscalYearsWhere!]
}

input CreateFiscalYearInput {
  name: String!
  begin: Date!
  end: Date!
}

type CreateFiscalYearPayload {
  fiscalYear: FiscalYear!
}

type ArchiveFiscalYearPayload {
  fiscalYear: FiscalYear!
  entriesArchived: Int!
  budgetsArchived: Int!
}

type RestoreFiscalYearPayload {
  fiscalYear: FiscalYear!
  entriesRestored: Int!
  budgetsRestored: Int!
}

type FiscalYearExport {
  fiscalYear: FiscalYear!
  entries: [Entry!]!
  budgets: [Budget!]!
  exportedAt: Date!
}

type DeleteFiscalYearPayload {
  success: Boolean!
  entriesDeleted: Int!
  budgetsDeleted: Int!
}

extend type Query {
  fiscalYears(where: FiscalYearsWhere): [FiscalYear!]!
  fiscalYear(id: ID!): FiscalYear!
  exportFiscalYear(id: ID!): FiscalYearExport!
}

extend type Mutation {
  createFiscalYear(input: CreateFiscalYearInput!): CreateFiscalYearPayload!
  archiveFiscalYear(id: ID!): ArchiveFiscalYearPayload!
  restoreFiscalYear(id: ID!): RestoreFiscalYearPayload!
  deleteFiscalYear(id: ID!): DeleteFiscalYearPayload!
}
