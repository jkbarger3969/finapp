union DepartmentAncestor = Department | Business

type Department {
  id: ID!
  name: String!
  code: String
  budgets: [Budget!]!
  business: Business!
  parent: DepartmentAncestor!
  children: [Department!]!
  ancestors: [DepartmentAncestor!]!
  decedents: [Department!]!
  virtualRoot: Boolean
}

enum DepartmentAncestorType {
  BUSINESS
  DEPARTMENT
}

input DepartmentAncestorInput {
  id: ID!
  type: DepartmentAncestorType!
}

input DepartmentsWhereAncestor {
  eq: DepartmentAncestorInput
  ne: DepartmentAncestorInput
  in: [DepartmentAncestorInput!]
  nin: [DepartmentAncestorInput!]
}

input DepartmentsWhereInput {
  eq: ID
  ne: ID
  in: [ID!]
  nin: [ID!]
  name: WhereRegexInput
  parent: DepartmentsWhereAncestor
  and: [DepartmentsWhereInput!]
  or: [DepartmentsWhereInput!]
  nor: [DepartmentsWhereInput!]
}

input DepartmentAddFields {
  name: String!
}

input DepartmentWhere {
  # Felids
  id: WhereTreeId
  name: WhereRegex
  code: String
  parent: WhereNode
  "Matches all departments that are a decedents of the business."
  business: ID

  # Logic Operators
  and: [DepartmentWhere!]
  or: [DepartmentWhere!]
  nor: [DepartmentWhere!]
}

type Query {
  departments(where: DepartmentWhere): [Department!]!
  department(id: ID!): Department!
}
