enum JournalEntryType {
  CREDIT
  DEBIT
}

type JournalEntryDateOfRecord {
  """
  ISO 8601
  """
  date: String!
  overrideFiscalYear: Boolean!
  deleted: Boolean!
}

input JournalEntryDateOfRecordAdd {
  """
  ISO 8601
  """
  date: String!
  overrideFiscalYear: Boolean!
}
input JournalEntryDateOfRecordUpdate {
  """
  ISO 8601
  """
  date: String
  overrideFiscalYear: Boolean
  deleted: Boolean
}

type JournalEntry {
  id: ID!
  refunds: [JournalEntryRefund!]!
  items: [JournalEntryItem!]!
  type: JournalEntryType!
  """
  ISO 8601
  """
  date: String!
  dateOfRecord: JournalEntryDateOfRecord
  department: Department!
  budget: Budget!
  fiscalYear: FiscalYear!
  category: JournalEntryCategory!
  paymentMethod: PaymentMethod!
  description: String
  total: Rational!
  source: JournalEntrySource!
  reconciled: Boolean!
  lastUpdate: String!
  deleted: Boolean!
}

enum JournalEntrySourceType {
  BUSINESS
  DEPARTMENT
  PERSON
}

input JournalEntrySourceInput {
  sourceType: JournalEntrySourceType!
  id: ID!
}

input JournalEntryUpdateFields {
  """
  ISO 8601
  """
  date: String
  dateOfRecord: JournalEntryDateOfRecordUpdate
  department: ID
  type: JournalEntryType
  category: ID
  paymentMethod: ID
  description: String
  total: RationalInput
  source: JournalEntrySourceInput
  reconciled: Boolean
}

input JournalEntryAddFields {
  """
  ISO 8601
  """
  date: String!
  dateOfRecord: JournalEntryDateOfRecordAdd
  department: ID!
  type: JournalEntryType!
  category: ID!
  paymentMethod: ID!
  description: String
  total: RationalInput!
  source: JournalEntrySourceInput!
  reconciled: Boolean
}

# Refunds
type JournalEntryRefund {
  id: ID!
  """
  ISO 8601
  """
  date: String!
  description: String
  paymentMethod: PaymentMethod!
  total: Rational!
  reconciled: Boolean!
  lastUpdate: String!
  deleted: Boolean!
}

input JournalEntryAddRefundFields {
  """
  ISO 8601
  """
  date: String!
  description: String
  paymentMethod: ID!
  total: RationalInput!
  reconciled: Boolean
}

input JournalEntryUpdateRefundFields {
  """
  ISO 8601
  """
  date: String
  description: String
  paymentMethod: ID
  total: RationalInput
  reconciled: Boolean
}

# Items
type JournalEntryItem {
  id: ID!
  department: Department
  category: JournalEntryCategory
  description: String
  units: Int!
  total: Rational!
  lastUpdate: String!
  deleted: Boolean!
}

input JournalEntryAddItemFields {
  department: ID
  category: ID
  description: String
  units: Int!
  total: RationalInput!
}

input JournalEntryUpdateItemFields {
  department: ID
  category: ID
  description: String
  units: Int
  total: RationalInput
}

type JournalEntryItemUpsertResult {
  journalEntryItem: JournalEntryItem!
  journalEntry: JournalEntry!
}

# Where
input JournalEntriesWhereDepartment {
  eq: WhereTreeNodeInput
  ne: WhereTreeNodeInput
  in: [WhereTreeNodeInput!]
  nin: [WhereTreeNodeInput!]
}

input JournalEntriesWhereCategory {
  eq: WhereTreeNodeInput
  ne: WhereTreeNodeInput
  in: [WhereTreeNodeInput!]
  nin: [WhereTreeNodeInput!]
}

input JournalEntriesSourceInput {
  id: ID!
  type: JournalEntrySourceType!
}

input JournalEntriesWhereSource {
  eq: JournalEntriesSourceInput
  ne: JournalEntriesSourceInput
  in: [JournalEntriesSourceInput!]
  nin: [JournalEntriesSourceInput!]
}

input JournalEntriesWherePaymentMethod {
  eq: WhereTreeNodeInput
  ne: WhereTreeNodeInput
  in: [WhereTreeNodeInput!]
  nin: [WhereTreeNodeInput!]
}

input JournalEntriesWhereFiscalYear {
  eq: ID
  ne: ID
  in: [ID!]
  nin: [ID!]
}

input JournalEntiresWhereInput {
  eq: ID
  ne: ID
  in: [ID!]
  nin: [ID!]
  date: WhereDate
  dateOfRecord: WhereDate
  fiscalYear: JournalEntriesWhereFiscalYear
  department: JournalEntriesWhereDepartment
  category: JournalEntriesWhereCategory
  source: JournalEntriesWhereSource
  paymentMethod: JournalEntriesWherePaymentMethod
  total: WhereRational
  reconciled: Boolean
  deleted: Boolean
  lastUpdate: WhereDate
  lastUpdateRefund: WhereDate
  lastUpdateItem: WhereDate
  or: [JournalEntiresWhereInput!]
  and: [JournalEntiresWhereInput!]
}

type Query {
  journalEntries(where: JournalEntiresWhereInput): [JournalEntry!]!
  journalEntry(id: ID!): JournalEntry
  journalEntryRefund(id: ID!): JournalEntryRefund
  journalEntryItem(id: ID!): JournalEntryItem
}

input JournalEntryUpdatePaymentMethod {
  id: ID!
  fields: PaymentMethodUpdateFields!
}

type Mutation {
  journalEntryUpdate(
    id: ID!
    fields: JournalEntryUpdateFields!
    """
    paymentMethodAdd and paymentMethodUpdate are mutually exclusive.
    """
    paymentMethodAdd: PaymentMethodAddFields
    paymentMethodUpdate: JournalEntryUpdatePaymentMethod
    """
    personAdd and businessAdd are mutually exclusive.
    """
    personAdd: PersonAddFields
    businessAdd: BusinessAddFields
  ): JournalEntry!
  journalEntryAdd(
    fields: JournalEntryAddFields!
    paymentMethodAdd: PaymentMethodAddFields
    personAdd: PersonAddFields
    businessAdd: BusinessAddFields
  ): JournalEntry!
  journalEntryDelete(id: ID!): JournalEntry!
  journalEntryAddRefund(
    id: ID!
    fields: JournalEntryAddRefundFields!
    paymentMethodAdd: PaymentMethodAddFields
  ): JournalEntry!
  journalEntryUpdateRefund(
    id: ID!
    fields: JournalEntryUpdateRefundFields!
    paymentMethodAdd: PaymentMethodAddFields
    paymentMethodUpdate: JournalEntryUpdatePaymentMethod
  ): JournalEntry!
  journalEntryDeleteRefund(id: ID!): JournalEntry!
  journalEntryAddItem(
    id: ID!
    fields: JournalEntryAddItemFields!
  ): JournalEntryItemUpsertResult!
  journalEntryUpdateItem(
    id: ID!
    fields: JournalEntryUpdateItemFields!
  ): JournalEntryItemUpsertResult!
  journalEntryDeleteItem(id: ID!): JournalEntryItemUpsertResult!
}

type Subscription {
  journalEntryAdded: JournalEntry!
  journalEntryUpdated: JournalEntry!
  journalEntryUpserted: JournalEntry!
}
